class QuillToolbarItem{constructor(options){const me=this;me.options=options,me.qlFormatsEl=document.createElement("span"),me.qlFormatsEl.className="ql-formats"}attach(quill){const me=this;me.quill=quill,me.toolbar=quill.getModule("toolbar"),me.toolbarEl=me.toolbar.container,me.toolbarEl.appendChild(me.qlFormatsEl)}detach(quill){const me=this;me.toolbarEl.removeChild(me.qlFormatsEl)}_getTextWidth(text,font="500 14px 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif"){const canvas=this._getTextWidth.canvas||(this._getTextWidth.canvas=document.createElement("canvas")),context=canvas.getContext("2d");context.font=font;const metrics=context.measureText(text);return metrics.width}_addCssRule(cssRule){const style=document.createElement("style");document.head.appendChild(style),style.sheet.insertRule(cssRule,0)}_generateId(){return Math.random().toString().substr(2,10)}}class QuillToolbarDropDown extends QuillToolbarItem{constructor(options){super(options);const me=this;me.id=me.options.id||`dropdown-${me._generateId()}`;const qlPicker=document.createElement("span");qlPicker.className=`ql-${me.id} ql-picker`,me.qlFormatsEl.appendChild(qlPicker);const qlPickerLabel=document.createElement("span");qlPickerLabel.className="ql-picker-label",qlPicker.appendChild(qlPickerLabel),qlPickerLabel.addEventListener("click",(function(e){qlPicker.classList.toggle("ql-expanded")})),window.addEventListener("click",(function(e){qlPicker.contains(e.target)||qlPicker.classList.remove("ql-expanded")}));const qlPickerOptions=document.createElement("span");qlPickerOptions.className="ql-picker-options",qlPicker.appendChild(qlPickerOptions),me.dropDownEl=qlPicker,me.dropDownPickerEl=me.dropDownEl.querySelector(".ql-picker-options"),me.dropDownPickerLabelEl=me.dropDownEl.querySelector(".ql-picker-label"),me.dropDownPickerLabelEl.innerHTML='<svg viewBox="0 0 18 18"> <polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon> <polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon> </svg>',me.setLabel(me.options.label||""),me.setItems(me.options.items||{}),me._addCssRule(`\n            .ql-snow .ql-picker.ql-${me.id} .ql-picker-label::before, .ql-${me.id} .ql-picker.ql-size .ql-picker-item::before {\n                content: attr(data-label);\n            }\n        `)}setItems(items){const me=this;for(const[label,value]of Object.entries(items)){const newItemEl=document.createElement("span");newItemEl.className="ql-picker-item",newItemEl.innerHTML=label,newItemEl.setAttribute("data-value",value),newItemEl.onclick=function(e){me.dropDownEl.classList.remove("ql-expanded"),me.options.rememberSelection&&me.setLabel(label),me.onSelect&&me.onSelect(label,value,me.quill)},me.dropDownPickerEl.appendChild(newItemEl)}}setLabel(newLabel){const me=this,requiredWidth=`${me._getTextWidth(newLabel)+30}px`;me.dropDownPickerLabelEl.style.width=requiredWidth,me.dropDownPickerLabelEl.setAttribute("data-label",newLabel)}onSelect(label,value,quill){}}