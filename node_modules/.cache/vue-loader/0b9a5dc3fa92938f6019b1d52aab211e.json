{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Pages/Login.vue","mtime":1663910265474},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHNpZGViYXJpdGVtcyBmcm9tICIuLi9MYXlvdXQvU2lkZUJhckl0ZW0iOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBidXMgfSBmcm9tICJAL3BvcnRhbC9tYWluIjsKaW1wb3J0IENvb2tpZXMgZnJvbSAianMtY29va2llIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIGRhdGU6ICIiLAogICAgICAgIGxvZ2luX3NvdXJjZSA6ICJQT1JUQUwiLAogICAgICAgIHNzb19zb3VyY2UgOiBudWxsLAogICAgICB9LAogICAgICBvcGVuX21vZGFsOiBmYWxzZSwKICAgICAgZm9yZ290X3Bhc3N3b3JkX2VtYWlsOiAiIiwKICAgICAgaXNfbGFuZ3VhZ2U6IHRoaXMuJHNlc3Npb24uZ2V0KCJQcmVmZXJyZWRMYW5ndWFnZSIpLAogICAgICByZWdfZW1haWw6IC9eKFswLTlhLXpBLVpdKFstLlx3XSpbMC05YS16QS1aXSkqQChbMC05YS16QS1aXVstXHddKlswLTlhLXpBLVpdXC4pK1thLXpBLVpdezIsOX0pJC8sCiAgICAgIHNob3dfdmFsaWRhdGlvbl9zdHJpbmc6IGZhbHNlLAogICAgICBsb2dpbl90eXBlOiAiUG9ydGFsIiwKICAgICAgaXNfc3VwZXJfYWRtaW46IGZhbHNlLAogICAgICBvcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQ6IGZhbHNlLAogICAgICBsb2dpbl9idXR0b25fc3Bpbm5lcjogZmFsc2UsCiAgICAgIGlzX3N1Ym1pdHRpbmc6IGZhbHNlLAogICAgICBhbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZzogbnVsbCwKICAgICAgaXNfdXNlcl9sb2NrZWQ6IGZhbHNlLAogICAgICB1c2VyX2xvY2tlZF9kYXRlX2FsbG93ZWQ6IG51bGwsCiAgICAgIG1haW5zcGlubmVyT246IGZhbHNlLAogICAgICBpc19mcmVlX3RyaWFsX2V4cGlyZSA6IGZhbHNlLAogICAgICAKICAgIH07CiAgfSwKICBiZWZvcmVDcmVhdGUoKSB7CiAgICBpZih0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikgJiYgQm9vbGVhbih0aGlzLiRyb3V0ZS5xdWVyeS5pc19zaG9waWZ5X2JpbGxpbmdfcmVkaXJlY3QpKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJEYXNoYm9hcmQiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaXNfc2hvcGlmeV9iaWxsaW5nX3JlZGlyZWN0OiB0cnVlCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGVsc2UgaWYgKAogICAgICB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikgJiYKICAgICAgIShCb29sZWFuKHRoaXMuJHJvdXRlLnF1ZXJ5LmVtYWlsKSAmJiBCb29sZWFuKHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuKSkKICAgICkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2JvdC9kYXNoYm9hcmQiKTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBsZXQgbF90eXBlID0gQ29va2llcy5nZXQoImxvZ2luX3R5cGUiKTsKICAgIGlmICgobF90eXBlICE9PSB1bmRlZmluZWQpICYmIChsX3R5cGUgIT09ICJ1bmRlZmluZWQiKSApIHsKICAgICAgdGhpcy5sb2dpbl90eXBlID0gQ29va2llcy5nZXQoImxvZ2luX3R5cGUiKTsKICAgIH0gCiAgICBpZih0aGlzLmxvZ2luX3R5cGUgPT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMubG9naW5fdHlwZSA9ICJQb3J0YWwiCiAgICB9CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBlbWFpbCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmVtYWlsOwogICAgdmFyIHRva2VuX2lkID0gdGhpcy4kcm91dGUucXVlcnkudG9rZW47CiAgICBpZiAoZW1haWwgJiYgdG9rZW5faWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoImxvZ2luIik7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnZhbGlkYXRlX2xvZ2luKCksIHsKICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgIHRva2VuOiB0b2tlbl9pZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkVtYWlsIGFscmVhZHkgdmVyaWZpZWQiKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICB0aGlzLnRsdCgnbGlua19leHBpcmVkX21zZycsICdjb2RlJyksCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJFbWFpbCB2ZXJpZmljYXRpb24gc3VjY2Vzc2Z1bCIpIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICB0aGlzLnRsdCgnbG9naW5fZW1haWxfdmVyaWZ5X3N1Y2Nlc3MnLCAnY29kZScpLAogICAgICAgICAgICAgIHRpbWVyOiAzMDAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiVXNlciBEb2Vzbid0IEV4aXN0IikgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnbG9naW5fdXNlcl9ub3RfZXhpc3QnLCAnY29kZScpLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZW1haWxfdmFsaWRhdGUoKSB7CiAgICAgIGlmICh0aGlzLnJlZ19lbWFpbC50ZXN0KHRoaXMuZm9yZ290X3Bhc3N3b3JkX2VtYWlsKSkgewogICAgICAgIHRoaXMuc2hvd192YWxpZGF0aW9uX3N0cmluZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd192YWxpZGF0aW9uX3N0cmluZyA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvLyAgdG9nZ2xlX2RvbWFpbihldmVudCkgewogICAgLy8gICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09ICJQb3J0YWwiKSB7CiAgICAvLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRvbWFpbl9pbnB1dCIpLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgIC8vICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gIkJvdCIpIHsKICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZG9tYWluX2lucHV0Iikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIC8vICAgfX0sCiAgICBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMuZm9yZ290X3Bhc3N3b3JkID0gIiI7CiAgICAgICQoIiN1c2VybW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICB0aGlzLnVzZXIuZW1haWwgPSAiIjsKICAgICAgdGhpcy51c2VyLnBhc3N3b3JkID0gIiI7CgogICAgfSwKICAgIGZvcmdvdF9wYXNzd29yZCgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKAogICAgICAgIHRoaXMuc2hvd192YWxpZGF0aW9uX3N0cmluZyA9PSBmYWxzZSAmJgogICAgICAgIHRoaXMuZm9yZ290X3Bhc3N3b3JkX2VtYWlsICE9ICIiCiAgICAgICkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnbG9naW5fc3VibWl0X3lvdXJfZGV0YWlscycsICdjb2RlJyksCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgIH0pOwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdChhcGlfY2FsbHMuZm9yZ290X3Bhc3N3b3JkKCksIHsKICAgICAgICAgICAgZW1haWw6IHRoaXMuZm9yZ290X3Bhc3N3b3JkX2VtYWlsLAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbmNsdWRlcygiZW1haWwgYWRkcmVzcyIpKSB7CiAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncmVnaXN0ZXJlZF9lbWFpbF9jaGVjaycsICdjb2RlJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkEgbWFpbCBoYXMgYmVlbiBzZW50IHRvIHlvdXIgZW1haWwiKSB7CiAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICB0aGlzLnRsdCgnbG9naW5fcmVzZXRfcGFzc3dvcmQnLCAnY29kZScpLAogICAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgJCgiI3VzZXJtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnc29tZV9lcnJvcl9vY2N1cnJlZF9tc2cnLCAnY29kZScpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgJCgiI3VzZXJtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFzc3dvcmRfdG9nZ2xlKCkgewogICAgICB2YXIgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybV9wYXNzd29yZCIpOwogICAgICBpZiAocGFzc3dvcmQudHlwZSA9PSAidGV4dCIpIHsKICAgICAgICBwYXNzd29yZC50eXBlID0gInBhc3N3b3JkIjsKICAgICAgfSBlbHNlIGlmIChwYXNzd29yZC50eXBlID09ICJwYXNzd29yZCIpIHsKICAgICAgICBwYXNzd29yZC50eXBlID0gInRleHQiOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlKCkgewogICAgICB0aGlzLmlzX3N1Ym1pdHRpbmcgPSB0cnVlOwogICAgICBpZiAodGhpcy51c2VyLm5hbWUgPT0gIiIgfHwgdGhpcy51c2VyLnBhc3N3b3JkID09ICIiKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ2xvZ2luX2VudGVyX2VtYWlsX3B3ZF9tc2cnLCAnY29kZScpLAogICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc19zdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2dpbl9idXR0b25fc3Bpbm5lciA9IHRydWU7CiAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwaW5uZXIiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgdGhpcy5jYWxsX2FwaSgpOwogICAgICB9CiAgICB9LAogICAgcmVkaXIoZGF0YSkgewogICAgICAvLyBpZiAoIXRoaXMuaXNfc3VwZXJfYWRtaW4pewogICAgICAgIGxldCByZXNldF9maWVsZHMgPSB0cnVlOwogICAgICAgIHRoaXMubG9naW5fYnV0dG9uX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Bpbm5lciIpLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjAuNSI7CiAgICAgIC8vIH0gCiAgICAgIGlmIChkYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuRU1BSUxfTk9UX1ZFUklGSUVEXzEwMjMuTVNHX0NPREUpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgIHRoaXMudGx0KCdsb2dpbl9hY2NvdW50X3ZhbGlkYXRlZCcsICdjb2RlJykrJzxicj4nK3RoaXMudGx0KCdsb2dpbl9jaGVja19lbWFpbF9kZXRhaWxzJywgJ2NvZGUnKSwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlVTRVJfSEFTX0JFRU5fTE9DS0VELk1TR19DT0RFKSB7CiAgICAgICAgcmVzZXRfZmllbGRzID0gZmFsc2U7CiAgICAgICAgIHN3YWwoewogICAgICAgICAgdGV4dDoKICAgICAgICAgICAgdGhpcy50bHQoJ2xvZ2luX2FjY291bnRfZ290X2xvY2tlZCcsICdjb2RlJyksCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsgICAKICAgICAgfSBlbHNlIGlmIChkYXRhLm1lc3NhZ2UuTVNHX0NPREUgID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgIHRoaXMudGx0KCdsb2dpbl9pbnRlcm5hbF9zZXJ2ZXJfbXNnJywgJ2NvZGUnKSwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFICA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5VU0VSX05PVF9BUFBST1ZFRF8xMDE5Lk1TR19DT0RFKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBodG1sOgogICAgICAgICAgICB0aGlzLnRsdCgncmVnaXN0cmF0aW9uX2RlY2xpbmVkX21zZycsICdjb2RlJyksCiAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFICA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5VU0VSX0FMUkVBRFlfTE9HR0VEX0lOXzEwMjEuTVNHX0NPREUpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBodG1sOiB0aGlzLnRsdCgndXNlcl9hbHJlYWR5X2xvZ2dlZCcsICdjb2RlJyksCiAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFICA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlZBTElEX0NSRURFTlRJQUxTXzAwMDUuTVNHX0NPREUpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKICAgICAgICBpZighaXNOYU4oZGF0YS5tZXNzYWdlLmFsbG93ZWRfYXR0ZW1wdHMpKXsKICAgICAgICAgIHRoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmcgPSBkYXRhLm1lc3NhZ2UuYWxsb3dlZF9hdHRlbXB0czsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnbG9naW5faW52YWxpZF9jcmVkZW50aWFsczEnLCAnY29kZScpLAogICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgneW91X2hhdmVfbXNnJywgJ2NvZGUnKStgICR7dGhpcy5hbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZ30gYCt0aGlzLnRsdCgnYWNjb3VudF9nZXRfbG9ja2VkX21zZycsICdjb2RlJyksCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnbG9naW5faW52YWxpZF9jcmVkZW50aWFsczEnLCAnY29kZScpLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFICA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5BUElfUkFURV9MSU1JVF9FWENFRURFRC5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgIHRoaXMudGx0KCdsb2dpbl9tb250aGx5X2FwaV9leGNlZWQnLCAnY29kZScpLAogICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSAgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuUkVORVdfUEFTU1dPUkQuTVNHX0NPREUpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBodG1sOgogICAgICAgICAgICB0aGlzLnRsdCgnbG9naW5fcmVuZXdfcGFzc3dvcmQnLCAnY29kZScpLAogICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYoQm9vbGVhbihkYXRhLmRhdGEuaXNfc3VwZXJfYWRtaW5fbG9naW4pKXsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiU3VwZXJBZG1pbkludGVybWVkaWF0ZVNjcmVlbiIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgZGF0YTogZGF0YS5kYXRhLmFsbF91c2Vyc19saXN0CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zdGFydCgpOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJVc2VySW5mb3JtYXRpb24iLCBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiYXQiLCBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLmFjY2Vzc190b2tlbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoInJ0IiwgZGF0YS5kYXRhLnVzZXJpbmZvcm1hdGlvbi5yZWZyZXNoX3Rva2VuKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxvZ2luX3R5cGUgPT0gIkJvdCIpIHsKICAgICAgICBDb29raWVzLnJlbW92ZSgibG9naW5fdHlwZSIpOwogICAgICAgIENvb2tpZXMuc2V0KCJsb2dpbl90eXBlIiwgdGhpcy5sb2dpbl90eXBlLCB7IGV4cGlyZXM6IDM2NSB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJJbmZvcm1hdGlvbiIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJhdCIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicnQiLCBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLnJlZnJlc2hfdG9rZW4pOwogICAgICAgIHRoaXMuY2hlY2tfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKCdwdXNoX2RpcmVjdF9yZXNwb25zZV9ib3QnKTsKICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCgiL2JvdC9kaXJlY3RyZXNwb25zZWJvdCIpOwogICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSAgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuVVNFUl9JU19MT0NLRUQuTVNHX0NPREUpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKICAgICAgICBpZihkYXRhLmRhdGEubG9ja2VkX2F0ICE9IG51bGwgJiYgZGF0YS5kYXRhLmxvY2tlZF9hdCAhPSB1bmRlZmluZWQpewogICAgICAgICAgdGhpcy5pc191c2VyX2xvY2tlZCA9IHRydWU7CiAgICAgICAgICAvLyB0aGlzLnVzZXJfbG9ja2VkX2RhdGVfYWxsb3dlZCA9IG1vbWVudChtb21lbnQobmV3IERhdGUobWVzc2FnZS5sb2NrZWRfYXQpKS5hZGQoMSwgJ2QnKSkuZm9ybWF0KCJNTU0gRG8sIGg6bW0gYSIpOwogICAgICAgICAgdGhpcy51c2VyX2xvY2tlZF9kYXRlX2FsbG93ZWQgPSBtb21lbnQobW9tZW50KG5ldyBEYXRlKGRhdGEuZGF0YS5sb2NrZWRfYXQpKS5hZGQoMSwgJ2QnKSkuY2FsZW5kYXIoKTsKICAgICAgICB9CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdsb2dpbl9hY2NvdW50X2xvY2tlZCcsICdjb2RlJyksCiAgICAgICAgICBodG1sOiB0aGlzLnRsdCgndXNlcl9hY2NvdW50X2xvY2tlZF9tc2cnLCAnY29kZScpKyBgICR7dGhpcy51c2VyX2xvY2tlZF9kYXRlX2FsbG93ZWR9LiA8YSBocmVmPSJtYWlsdG86c3VwcG9ydEBjZW5zZS5haT9zdWJqZWN0PUhlbHAlMjBSZXF1aXJlZCUyMC0lMjBDZW5zZSUyMFBvcnRhbCUyMEFjY291bnQlMjBMb2NrZWQiIGNsYXNzPSJjdGN0LXVzIj5gK3RoaXMudGx0KCdjb250YWN0X3VzX2xpbmsnKStgPC9hPiBgK3RoaXMudGx0KCdhbGVydF9tc2cxJywgJ2NvZGUnKSwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFICA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5SRUdJU1RFUl9BTkRfTE9HSU5fU09VUkNFX0RPTlRfTUFUQ0guTVNHX0NPREUpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ2xvZ2luX3NvdXJjZV9kaWZmZXJlbnRfbXNnJywgJ2NvZGUnKSwKICAgICAgICAgIGh0bWw6IHRoaXMudGx0KCdhY2NvdW50X3JlZ2lzdGVyZWRfbXNnJywgJ2NvZGUnKStgICR7ZGF0YS5tZXNzYWdlLnJlZ2lzdGVyX3NvdXJjZX0uIGArdGhpcy50bHQoJ2FsZXJ0X21zZzInLCAnY29kZScpLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKCiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFICA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5TU09fU0VSVkVSX0VSUk9SLk1TR19DT0RFKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdsb2dpbl9lcnJvcl93aXRoX3NzbycsICdjb2RlJyksCiAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnc29tZV9lcnJvcl9wbGVhc2VfdHJ5X2FnYWluJywgJ2NvZGUnKSwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CgogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIENvb2tpZXMucmVtb3ZlKCJsb2dpbl90eXBlIik7CiAgICAgICAgQ29va2llcy5zZXQoImxvZ2luX3R5cGUiLCB0aGlzLmxvZ2luX3R5cGUsIHsgZXhwaXJlczogMzY1IH0pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc3RhcnQoKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckluZm9ybWF0aW9uIiwgZGF0YS5kYXRhLnVzZXJpbmZvcm1hdGlvbik7CiAgICAgICAgaWYgKGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uc3Vic2NyaXB0aW9uID09ICdGcmVlJyAmJiBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLnN1YnNjcmlwdGlvbl9zdGF0dXMgIT0gJ2ZyZWV0cmlhbCcpIHsKICAgICAgICAgICAgdGhpcy5pc19mcmVlX3RyaWFsX2V4cGlyZSA9IHRydWUgOwogICAgICAgIH0KICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnd2hhdHNhcHBfc3Vic2NyaXB0aW9uJyxkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLndoYXRzYXBwX3N1YnNjcmlwdGlvbikKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicmV0YWlsX3dlYl9mcmFtZXdvcmsiLCBkYXRhLmRhdGEucmV0YWlsX3dlYl9mcmFtZXdvcmspOwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdChhcGlfY2FsbHMuYm90X3Jlc3BvbnNlX3Rva2VuKCksIHsKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLlNUQVRVU19TVUNDRVNTX0NPUkUuTVNHX0NPREUgPT09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSl7CiAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIkJvdFRva2VuIiwgcmVzcG9uc2UuZGF0YS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnJlbW92ZSgiVGVtcG9yYXJ5Qm90VG9rZW4iKTsKICAgICAgICAgICAgICBidXMuJGVtaXQoIlRva2VuIGNoYW5nZWQiLCAiVHJ1ZSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckZpcnN0TmFtZSIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uZmlyc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJMYXN0TmFtZSIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24ubGFzdF9uYW1lKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicnQiLCBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLnJlZnJlc2hfdG9rZW4pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJhdCIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiUmVzdHJpY3Rpb25MaXN0IiwgZGF0YS5kYXRhLnJlc3RyaWN0aW9uX2xpc3QpOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9CiAgICAgICAgICAiY29tcGFueV9pZD0iICsgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0KICAgICAgICAgICJjb21wYW55X25hbWU9IiArIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0gCiAgICAgICAgICAiY29tcGFueV9lbWFpbD0iICsgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsOyAKICAgICAgICB0aGlzLmxvZ2luX2J1dHRvbl9zcGlubmVyID0gdHJ1ZTsKICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Bpbm5lciIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgdGhpcy5jaGVja190ZW1wbGF0ZV9zdWJzY3JpcHRpb24obnVsbCwgZGF0YS5kYXRhLm1lbnViaW5kKTsKICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAvLyB0aGlzLnVwZGF0ZV9tZW51X2xpc3QobWVzc2FnZS5tZW51YmluZCk7CiAgICAgICAgLy8gfSwgMTAwKTsKICAgICAgfQogICAgICBpZihyZXNldF9maWVsZHMpewogICAgICAgIHRoaXMudXNlci5lbWFpbCA9ICIiOwogICAgICB9CiAgICAgIHRoaXMudXNlci5wYXNzd29yZCA9ICIiOwogICAgICB0aGlzLnVzZXIubG9naW5fc291cmNlID0gIlBPUlRBTCI7CiAgICAgIHRoaXMudXNlci5zc29fc291cmNlID0gbnVsbDsKICAgIH0sCiAgICBjaGVja190ZW1wbGF0ZV9zdWJzY3JpcHRpb24ocGFyYW0sIG1lbnUpIHsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGFwaV9jYWxscy5vcGVuX2JvdF90ZW1wbGF0ZV9zdWJzY3JpcHRpb25fYXBpKCksIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgfSwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgdGhpcy5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQgPSB0cnVlOwogICAgICAgICAgaWYgKHBhcmFtID09PSBudWxsKXsKICAgICAgICAgICAgdGhpcy51cGRhdGVfbWVudV9saXN0KG1lbnUpOwogICAgICAgICAgfQogICAgICAgICAgaWYoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5TVUNDRVNTRlVMX0RCX1FVRVJZX01PREVMUy5NU0dfQ09ERSl7CiAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJCb3RUZW1wbGF0ZXMiLCBkYXRhLmRhdGEudGVtcGxhdGVzKQogICAgICAgICAgICBpZihwYXJhbSA9PT0gJ3B1c2hfZGlyZWN0X3Jlc3BvbnNlX2JvdCcpewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgbmFtZTogIkRpcmVjdCBSZXNwb25zZSBCb3QiLAogICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUKICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZihwYXJhbSA9PT0gJ3B1c2hfZGlyZWN0X3Jlc3BvbnNlX2JvdCcpewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgbmFtZTogIkRpcmVjdCBSZXNwb25zZSBCb3QiLAogICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUKICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goKGUpPT4gewogICAgICAgICAgdGhpcy5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQgPSB0cnVlOwogICAgICAgICAgaWYgKHBhcmFtID09PSBudWxsKXsKICAgICAgICAgICAgdGhpcy51cGRhdGVfbWVudV9saXN0KG1lbnUpOwogICAgICAgICAgfQogICAgICAgICAgaWYocGFyYW0gPT09ICdwdXNoX2RpcmVjdF9yZXNwb25zZV9ib3QnKXsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgIG5hbWU6ICJEaXJlY3QgUmVzcG9uc2UgQm90IiwKICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgcmVsb2FkOiB0cnVlCiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgY2FsbF9hcGkoKSB7CiAgICAgIHRoaXMudXNlci5kYXRlID0gbW9tZW50KCkudG9JU09TdHJpbmcoKTsKICAgICAgdGhpcy5hbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZyA9IDA7CiAgICAgIHRoaXMuaXNfdXNlcl9sb2NrZWQgPSBmYWxzZTsKICAgICAgdGhpcy51c2VyX2xvY2tlZF9kYXRlX2FsbG93ZWQgPSBudWxsOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KGFwaV9jYWxscy5sb2dpbigpLCB0aGlzLnVzZXIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnJlZGlyKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy5tYWluc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgICB0aGlzLmxvZ2luX2J1dHRvbl9zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Bpbm5lciIpLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAvLyAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnc29tZV9lcnJvcl9vY2N1cnJlZF9tc2cnLCdjb2RlJykrJzxicj4nK3RoaXMudGx0KCdwbGVhc2VfdHJ5X2FnYWluX21zZycsJ2NvZGUnKSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gdG9hc3RyLmVycm9yKCJUaGVyZSBpcyBhbiBpbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIik7CiAgICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlX21lbnVfbGlzdChtZXNzYWdlKSB7CiAgICAgIGxldCBtZW51ID0ge307CiAgICAgIGxldCBtYWluX21lbnVfbGlzdCA9IG1lc3NhZ2UuZmlsdGVyKAogICAgICAgIChhcnIpID0+IGFyci5Jc01hc3Rlck1lbnUgPT0gdHJ1ZSAmJiBhcnIuRW5hYmxlZCA9PSB0cnVlCiAgICAgICk7CiAgICAgIGxldCBtYWluX21lbnVfbGlzdF9maWx0ZXJlZCA9IFtdOwogICAgICBsZXQgc3ViX21lbnVfbGlzdCA9IG1lc3NhZ2UuZmlsdGVyKAogICAgICAgIChhcnIpID0+CiAgICAgICAgICBhcnIuSGFzU3ViTWVudXMgPT0gZmFsc2UgJiYKICAgICAgICAgIGFyci5FbmFibGVkID09IHRydWUgJiYKICAgICAgICAgIGFyci5Jc1N1Yk1lbnUgPT0gdHJ1ZQogICAgICApOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBtYWluX21lbnVfbGlzdC5sZW5ndGg7IGkgPCBuOyBpICs9IDEpIHsKICAgICAgICBsZXQgbWVudUZpbHRlciA9IHNpZGViYXJpdGVtcy5maWx0ZXIoKHNpZGViYXIpID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHNpZGViYXIubmFtZSA9PT0gbWFpbl9tZW51X2xpc3RbaV0uTWVudUl0ZW0gJiYKICAgICAgICAgICAgQm9vbGVhbihzaWRlYmFyLnN2Z19odG1sKQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgICBpZiAobWVudUZpbHRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICBtYWluX21lbnVfbGlzdF9maWx0ZXJlZC5wdXNoKG1lbnVGaWx0ZXJbMF0pOwogICAgICAgICAgbWVudVttZW51RmlsdGVyWzBdLm5hbWVdID0gewogICAgICAgICAgICBtYWluX21lbnU6IG1lbnVGaWx0ZXJbMF0sCiAgICAgICAgICAgIHN1Yl9tZW51X2xpc3Q6IFtdLAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHN1Yl9tZW51X2xpc3QubGVuZ3RoOyBpIDwgbjsgaSArPSAxKSB7CiAgICAgICAgICBmb3IgKHZhciBqIGluIHNpZGViYXJpdGVtcykgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgc2lkZWJhcml0ZW1zW2pdLm5hbWUgPT09IHN1Yl9tZW51X2xpc3RbaV0uTWVudUl0ZW0gJiYKICAgICAgICAgICAgICBCb29sZWFuKHNpZGViYXJpdGVtc1tqXS5wYWdlX3BhdGggJiYgc2lkZWJhcml0ZW1zW2pdLm1hc3Rlcl9tZW51ID09PSBzdWJfbWVudV9saXN0W2ldLk1hc3Rlck1lbnUpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIG1lbnVbc3ViX21lbnVfbGlzdFtpXS5NYXN0ZXJNZW51XS5zdWJfbWVudV9saXN0LnB1c2goCiAgICAgICAgICAgICAgICBzaWRlYmFyaXRlbXNbal0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgIH0KICAgICAgbWVudSA9IE9iamVjdC52YWx1ZXMobWVudSk7CgogICAgICAvLyBmb3IgKGxldCBpID0gMCwgbiA9IG1lc3NhZ2UubGVuZ3RoOyBpIDwgbjsgaSArPSAxKSB7CiAgICAgIC8vICAgaWYgKG1lc3NhZ2VbaV0uRW5hYmxlZCAmJiBtZXNzYWdlW2ldLklzTWFzdGVyTWVudSkgewogICAgICAvLyAgICAgbGV0IG1lbnVGaWx0ZXIgPSBzaWRlYmFyaXRlbXMuZmlsdGVyKChzaWRlYmFyKSA9PiB7CiAgICAgIC8vICAgICAgIHJldHVybiAoCiAgICAgIC8vICAgICAgICAgc2lkZWJhci5uYW1lID09PSBtZXNzYWdlW2ldLk1lbnVJdGVtICYmIEJvb2xlYW4oc2lkZWJhci5zdmdfaHRtbCkKICAgICAgLy8gICAgICAgKTsKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgICAgaWYgKG1lbnVGaWx0ZXIubGVuZ3RoID4gMCkgewogICAgICAvLyAgICAgICBtYWluX21lbnUgPSBtZW51RmlsdGVyWzBdOwogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0gZWxzZSBpZiAoCiAgICAgIC8vICAgICBtZXNzYWdlW2ldLkhhc1N1Yk1lbnVzID09IGZhbHNlICYmCiAgICAgIC8vICAgICBtZXNzYWdlW2ldLkVuYWJsZWQgJiYKICAgICAgLy8gICAgIG1lc3NhZ2VbaV0uSXNTdWJNZW51ICYmCiAgICAgIC8vICAgICBPYmplY3Qua2V5cyhtYWluX21lbnUpLmxlbmd0aCA+IDAKICAgICAgLy8gICApIHsKICAgICAgLy8gICAgIGZvciAodmFyIGogaW4gc2lkZWJhcml0ZW1zKSB7CiAgICAgIC8vICAgICAgIGlmICgKICAgICAgLy8gICAgICAgICBzaWRlYmFyaXRlbXNbal0ubmFtZSA9PT0gbWVzc2FnZVtpXS5NZW51SXRlbSAmJgogICAgICAvLyAgICAgICAgIEJvb2xlYW4oc2lkZWJhcml0ZW1zW2pdLnBhZ2VfcGF0aCkKICAgICAgLy8gICAgICAgKSB7CiAgICAgIC8vICAgICAgICAgc3VibWVudXMucHVzaChzaWRlYmFyaXRlbXNbal0pOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfQogICAgICAvLyAgIGlmICgKICAgICAgLy8gICAgIGkgPT0gbiAtIDEgfHwKICAgICAgLy8gICAgIChtZXNzYWdlW2ldLklzTWFzdGVyTWVudSA9PSB0cnVlICYmCiAgICAgIC8vICAgICAgIG1lc3NhZ2VbaV0uSGFzU3ViTWVudXMgPT09IGZhbHNlICYmCiAgICAgIC8vICAgICAgICFCb29sZWFuKG1lc3NhZ2VbaV0uSXNTdWJNZW51KSAmJgogICAgICAvLyAgICAgICBtZXNzYWdlW2ldLkVuYWJsZWQpCiAgICAgIC8vICAgKSB7CiAgICAgIC8vICAgICBtZW51LnB1c2goewogICAgICAvLyAgICAgICBtYWluX21lbnU6IG1haW5fbWVudSwKICAgICAgLy8gICAgICAgc3ViX21lbnVfbGlzdDogc3VibWVudXMsCiAgICAgIC8vICAgICB9KTsKICAgICAgLy8gICAgIG1haW5fbWVudSA9IFtdOwogICAgICAvLyAgICAgc3VibWVudXMgPSBbXTsKICAgICAgLy8gICB9IGVsc2UgaWYgKAogICAgICAvLyAgICAgaSA8IG4gLSAxICYmCiAgICAgIC8vICAgICBtZXNzYWdlW2kgKyAxXS5Jc01hc3Rlck1lbnUgJiYKICAgICAgLy8gICAgICghQm9vbGVhbihtZXNzYWdlW2kgKyAxXS5Jc1N1Yk1lbnUpIHx8CiAgICAgIC8vICAgICAgIG1lc3NhZ2VbaSArIDFdLkhhc1N1Yk1lbnVzID09IHRydWUpICYmCiAgICAgIC8vICAgICBPYmplY3Qua2V5cyhtYWluX21lbnUpLmxlbmd0aCA+IDAKICAgICAgLy8gICApIHsKICAgICAgLy8gICAgIG1lbnUucHVzaCh7CiAgICAgIC8vICAgICAgIG1haW5fbWVudTogbWFpbl9tZW51LAogICAgICAvLyAgICAgICBzdWJfbWVudV9saXN0OiBzdWJtZW51cywKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgICAgbWFpbl9tZW51ID0gW107CiAgICAgIC8vICAgICBzdWJtZW51cyA9IFtdOwogICAgICAvLyAgIH0KICAgICAgLy8gfQogICAgICB0aGlzLiRzZXNzaW9uLnNldCgiQ2hhdGJvdE1lbnUiLCBtZW51KTsKICAgICAgLy8gd2hpbGUgKCF0aGlzLm9wZW5fYm90X2FwaV9yZXNwb25zZV9yZWNlaXZlZCl7CiAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goIi9ib3QvZGFzaGJvYXJkIik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogIkRhc2hib2FyZCIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgaXNfZnJlZV90cmlhbDp0aGlzLmlzX2ZyZWVfdHJpYWxfZXhwaXJlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIC8vIH0KICAgIH0sCiAgICBhc3luYyBsb2dpbldpdGhHb29nbGUoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gZmlyc3QKICAgICAgICAvLyBjb25zb2xlLmxvZygiZmlyc3QiKQogICAgICAgIGNvbnN0IGdvb2dsZVVzZXIgPSBhd2FpdCB0aGlzLiRnQXV0aC5zaWduSW4oKTsKICAgICAgICBjb25zdCBnb29nbGVfa2V5cyA9IE9iamVjdC5rZXlzKGdvb2dsZVVzZXIpOwogICAgICAgIGxldCBwcm9maWxlID0gZ29vZ2xlVXNlci5nZXRCYXNpY1Byb2ZpbGUoKTsKICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvZmlsZSk7CiAgICAgICAgLy8gY29uc29sZS5sb2coZ29vZ2xlVXNlcik7CiAgICAgICAgLy8gY29uc29sZS5sb2cocHJvZmlsZSk7CiAgICAgICAgY29uc3Qgc3NvX3Rva2VuID0gZ29vZ2xlVXNlcltnb29nbGVfa2V5c1sxXV0uaWRfdG9rZW4gIT09IHVuZGVmaW5lZAogICAgICAgICAgICA/IGdvb2dsZVVzZXJbZ29vZ2xlX2tleXNbMV1dLmlkX3Rva2VuCiAgICAgICAgICAgIDogZ29vZ2xlVXNlcltnb29nbGVfa2V5c1syXV0uaWRfdG9rZW47CiAgICAgICAgdGhpcy51c2VyLmxvZ2luX3NvdXJjZSA9ICJTU08iOwogICAgICAgIHRoaXMudXNlci5zc29fc291cmNlID0gImdvb2dsZSI7CiAgICAgICAgdGhpcy51c2VyLnNzb190b2tlbiA9IHNzb190b2tlbjsKICAgICAgICB0aGlzLnVzZXIuZW1haWwgPSBwcm9maWxlW2tleXNbNV1dOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudXNlcik7CiAgICAgICAgdGhpcy5tYWluc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICB0aGlzLmNhbGxfYXBpKCk7CiAgICAgIH0gCiAgICAgIGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMubWFpbnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBsb2dpbl9jYXJkX2hlaWdodCgpewogICAgICBpZigodGhpcy5pc191c2VyX2xvY2tlZCA9PT0gdHJ1ZSkgfHwgKHRoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmchPW51bGwgJiYgdGhpcy5hbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZyA+IDApKSB7CiAgICAgICAgcmV0dXJuICJsb2dpbi1jYXJkLXRhbGwiCiAgICAgIH0KICAgICAgcmV0dXJuICJsb2dpbi1jYXJkLWRlZmF1bHQiCiAgICB9CiAgfQp9Owo="},null]}