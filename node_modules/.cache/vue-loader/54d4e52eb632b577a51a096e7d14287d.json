{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Dashboard.vue","mtime":1655807120949},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGJ1cyB9IGZyb20gIkAvcG9ydGFsL21haW4iOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBSZXF1ZXN0Q2hhcnQgZnJvbSAiQC9wb3J0YWwvY29tcG9uZW50cy9SZXF1ZXN0Q2hhcnQudnVlIjsKaW1wb3J0IEFyZWFDaGFydCBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0FyZWFDaGFydC52dWUiOwppbXBvcnQgQmlsbGluZ0NoYXJ0IGZyb20gIkAvcG9ydGFsL2NvbXBvbmVudHMvQmlsbGluZ0NoYXJ0LnZ1ZSI7CmltcG9ydCBzd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJzsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCBjdXJyZW5jeSBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0N1cnJlbmN5IjsKaW1wb3J0IExpbmVDaGFydCBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0xpbmVDaGFydCI7Ci8vaW1wb3J0IHBhZ2VfZ3VpZGUgZnJvbSAiQC9wb3J0YWwvbWl4aW5zL3BhZ2VndWlkZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICAvL21peGluczogW3BhZ2VfZ3VpZGVdLAogIHByb3BzOiB7fSwKICBjb21wb25lbnRzOiB7CiAgICBSZXF1ZXN0Q2hhcnQsCiAgICBBcmVhQ2hhcnQsCiAgICBCaWxsaW5nQ2hhcnQsCiAgICBNdWx0aXNlbGVjdCwKICAgIExpbmVDaGFydAogIH0sCiAgbW91bnRlZCgpewogICAgdGhpcy5yZXRhaWxfd2ViX2ZyYW1ld29yayA9IHRoaXMuJHNlc3Npb24uZ2V0KCJyZXRhaWxfd2ViX2ZyYW1ld29yayIpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW5jeS5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLmN1cnJlbmN5X2xpc3QucHVzaCh7CiAgICAgICAgZGlzcGxheV9uYW1lOgogICAgICAgICAgY3VycmVuY3lbaV0uZW1vamkgKwogICAgICAgICAgIiAiICsKICAgICAgICAgIGN1cnJlbmN5W2ldLmN1cnJlbmN5X2NvZGUgKwogICAgICAgICAgIiAtICIgKwogICAgICAgICAgY3VycmVuY3lbaV0uY3VycmVuY3lfbmFtZSwKICAgICAgICB2YWx1ZTogY3VycmVuY3lbaV0uY3VycmVuY3lfY29kZQogICAgICB9KTsKICAgIH0KICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkKICAgIHRoaXMuY3VycmVudF95ZWFyID0gY3VycmVudFRpbWUuZ2V0RnVsbFllYXIoKTsKICAgIHRoaXMuZ2V0X21ldHJpY3NfZGF0YSgpOwogICAgdGhpcy5nZXRfbWV0cmljc19wcmljZV9kYXRhKCk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKAogICAgICAhdGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpICYmCiAgICAgIHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKS5yb2xlICYmCiAgICAgIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlID09ICJTdXBlckFkbWluIgogICAgKSB7CiAgICAgIHRvYXN0ci53YXJuaW5nKHRoaXMudGx0KCdzZWxlY3RfY29tcGFueV9uYW1lX2xhYmVsJykpOwogICAgfQogICAgaWYgKHRoaXMudXNlcl9yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpKSB7CiAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQKICAgICAgICA6ICIiOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lCiAgICAgICAgOiAiIjsKICAgIH0KICAgIHRoaXMuZGFzaGJvYXJkX2RldGFpbHMoKTsKICAgIC8vIGF4aW9zCiAgICAvLyAgIC5wb3N0KAogICAgLy8gICAgIGFwaV9jYWxscy5iaWxsaW5nX3VzYWdlX3VybCgpLAogICAgLy8gICAgIHsKICAgIC8vICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgIC8vICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgIGxvYWRfZGF0YV9ieTogIkxhc3QgNyBkYXlzIiwKICAgIC8vICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgfSwKICAgIC8vICAgICB7CiAgICAvLyAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICB9CiAgICAvLyAgICkKICAgIC8vICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzID0gW107CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50ID0gW107CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQuTXNnRXhjaGFuZ2UgPSBbXTsKICAgIC8vICAgICB0aGlzLlNlY29uZF9jaGFydC5UYXNrRXhlY3V0aW9uID0gW107CiAgICAvLyAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIk5vIERhdGEgYXZhaWxhYmxlIikgewogICAgLy8gICAgICAgYnVzLiRlbWl0KAogICAgLy8gICAgICAgICAiY2hhcnQgaXMgdXBkYXRlZCIsCiAgICAvLyAgICAgICAgICJUcnVlIiwKICAgIC8vICAgICAgICAgW10sCiAgICAvLyAgICAgICAgIFtdLAogICAgLy8gICAgICAgICBbXSwKICAgIC8vICAgICAgICAgW10sCiAgICAvLyAgICAgICAgIHRoaXMuYmFyX2NoYXJ0Ml9kcm9wZG93bl92YWx1ZQogICAgLy8gICAgICAgKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LmxhYmVscy5wdXNoKGkpOwogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5DYWxsQ291bnQucHVzaChyZXNwb25zZS5kYXRhW2ldLkNhbGxDb3VudCk7CiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0Lk1zZ0V4Y2hhbmdlLnB1c2gocmVzcG9uc2UuZGF0YVtpXS5Nc2dFeGNoYW5nZSk7CiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LlRhc2tFeGVjdXRpb24ucHVzaCgKICAgIC8vICAgICAgICAgICByZXNwb25zZS5kYXRhW2ldLlRhc2tFeGVjdXRpb24KICAgIC8vICAgICAgICAgKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIGJ1cy4kZW1pdCgKICAgIC8vICAgICAgICAgImJpbGxpbmcgY2hhcnQgaXMgdXBkYXRlZCIsCiAgICAvLyAgICAgICAgICJUcnVlIiwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50LAogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5Nc2dFeGNoYW5nZSwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbiwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzLAogICAgLy8gICAgICAgICB0aGlzLmJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWUKICAgIC8vICAgICAgICk7CiAgICAvLyAgICAgfQogICAgLy8gICB9KQogICAgLy8gICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgKSB7CiAgICAvLyAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSk7CiAgICBheGlvcwogICAgICAucG9zdCgKICAgICAgICBhcGlfY2FsbHMuZGFzaGJvYXJkX2NoYXJ0X3VybCgpLAogICAgICAgIHsKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGxvYWRfZGF0YV9ieTogIk1vbnRobHkgYmlsbGluZyBjeWNsZSIsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfQogICAgICApCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudXBkYXRlX2NoYXJ0X2RhdGEocmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICB9LAogIHVwZGF0ZWQoKSB7CiAgICBidXMuJG9uKCJjb21wYW55IGF0dHJpYnV0ZXMgdXBkYXRlZCIsIChkYXRhKSA9PiB7CiAgICAgIGlmIChkYXRhID09ICJUcnVlIikgewogICAgICAgIGJ1cy4kZW1pdCgic2VuZCBjb21wYW55IGF0dHJpYnV0ZXMiKTsKICAgICAgfQogICAgfSk7CiAgICBidXMuJG9uKCJjb21wYW55IG5hbWUgYW5kIGNvbXBhbnkgaWQiLCAoZGF0YTEsIGRhdGEyKSA9PiB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgfSk7CiAgfSwKICBjb21wdXRlZDp7CiAgICB2YWxpZEVtYWlsICgpIHsKICAgICAgaWYodGhpcy5jb250YWN0X3VzX2VtYWlsICE9IG51bGwpewogICAgICAgIGlmICh0aGlzLmVtYWlsX3ZhbGlkaXR5LnRlc3QodGhpcy5jb250YWN0X3VzX2VtYWlsKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRsdCgndmFsaWRfZW1haWxfYWRkcl9sYWJlbCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGxpbmVfY2hhcnRfcHJvcHNfbW9udGhseV91c2FnZSgpewogICAgICByZXR1cm4gewogICAgICAgIHhBeGlzTGFiZWw6ICdUaW1lbGluZScsCiAgICAgICAgeUF4aXNMYWJlbDogJ1ZhbHVlJywKICAgICAgICB4S2V5OiAnZGF0ZScsCiAgICAgICAgeUtleTogJ3ZhbHVlJywKICAgICAgICBpbnRlcnZhbDogJ2RheScsCiAgICAgICAgZGF0YTogdGhpcy5tb250aGx5X3VzYWdlX2RhdGEKICAgICAgfQogICAgfSwKICAgIGxpbmVfY2hhcnRfcHJvcHNfYXBwcm94X2NoYXJnZSgpewogICAgICByZXR1cm4gewogICAgICAgIHhBeGlzTGFiZWw6ICdUaW1lbGluZScsCiAgICAgICAgeUF4aXNMYWJlbDogJ3ByaWNlICgkKScsCiAgICAgICAgeEtleTogJ2RhdGUnLAogICAgICAgIHlLZXk6ICd2YWx1ZScsCiAgICAgICAgaW50ZXJ2YWw6ICdkYXknLCAgCiAgICAgICAgZGF0YTogdGhpcy5wcmljaW5nX2RhdGEKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBiYXJfY2hhcnRfZHJvcGRvd25fdmFsdWU6ICJNb250aGx5IGJpbGxpbmcgY3ljbGUiLAogICAgICBiYXJfY2hhcnQyX2Ryb3Bkb3duX3ZhbHVlOiAiTGFzdCA3IGRheXMiLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBwZXJtaXNzaW9uX2xpc3Q6IFtdLAogICAgICBBUElfZGF0YTogewogICAgICAgIGxhYmVsczogW10sCiAgICAgICAgU3VjY2Vzc2Z1bDogW10sCiAgICAgICAgVG90YWw6IFtdLAogICAgICAgIFVuc3VjY2Vzc2Z1bDogW10sCiAgICAgICAgeEF4aXNMYWJlbDogIiIsCiAgICAgIH0sCiAgICAgIFNlY29uZF9jaGFydDogewogICAgICAgIGxhYmVsczogW10sCiAgICAgICAgQ2FsbENvdW50OiBbXSwKICAgICAgICBNc2dFeGNoYW5nZTogW10sCiAgICAgICAgVGFza0V4ZWN1dGlvbjogW10sCiAgICAgIH0sCiAgICAgIENvbmN1cnJlbnRfVXNlcnNfRGF0YTogewogICAgICAgIGxhYmVsczogW10sCiAgICAgICAgZGF0YTogW10sCiAgICAgIH0sCiAgICAgIGNvbmN1cnJlbnRfdXNlcnNfbW9udGg6ICIiLAogICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUKICAgICAgICA6ICIiLAogICAgICBpbnRlbnRfY291bnQ6IDUzLAogICAgICBpbnRlbnRfY291bnRfZGlzcGxheTogMCwKICAgICAgZGlzcGxheV9saXN0OiBbXSwKICAgICAgcHJpbWFyeV9pdGVtX2VudGl0aWVzX2xpc3Q6IFsiSW50ZW50cyIsICJRdWVzdGlvbnMiLCAiUmVzcG9uc2VzIiwgIlRyYWluaW5nIl0sCiAgICAgIGRhbmdlcl9pdGVtX2VudGl0aWVzX2xpc3Q6IFsKICAgICAgICAiVmVyaWZ5IFJlc3BvbnNlcyBVbmFuc3dlcmVkIiwKICAgICAgICAiVmVyaWZ5IEJvdCBSZXNwb25zZSIsCiAgICAgICAgIlByb2R1Y3RzIiwKICAgICAgICAiU3lub255bXMiLAogICAgICAgICJBY2NvdW50cyIKICAgICAgXSwKICAgICAgaW5mb19pdGVtX2VudGl0aWVzX2xpc3Q6IFtdLAogICAgICBzdWNjZXNzX2l0ZW1faW5mb19saXN0OiBbIkNoZWNrIEJvdCBSZXNwb25zZSIsIkJvdCBDb25maWd1cmF0aW9uIl0sCiAgICAgIGl0ZW1fbGlzdF9vcmRlcjogWyJkYW5nZXJfaXRlbV9lbnRpdGllc19saXN0IiwgInN1Y2Nlc3NfaXRlbV9pbmZvX2xpc3QiLCAicHJpbWFyeV9pdGVtX2VudGl0aWVzX2xpc3QiXSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgcmV0YWlsX3dlYl9mcmFtZXdvcms6dGhpcy4kc2Vzc2lvbi5nZXQoInJldGFpbF93ZWJfZnJhbWV3b3JrIiksCiAgICAgIGN1cnJlbmN5X2NvZGU6ICIiLAogICAgICBjdXJyZW5jeV9saXN0OiBbXSwKICAgICAgZW1haWxfdmFsaWRpdHk6IC9eKFswLTlhLXpBLVpdKFstLlx3XSpbMC05YS16QS1aXSkqQChbMC05YS16QS1aXVstXHddKlswLTlhLXpBLVpdXC4pK1thLXpBLVpdezIsOX0pJC8sCiAgICAgIGNvbnRhY3RfdXNfZW1haWw6JycsCiAgICAgIG1vbnRobHlfdXNhZ2VfZGF0YTpbXSwKICAgICAgcHJpY2luZ19kYXRhOltdLAogICAgICBsaW5lX2NoYXJ0X2Ryb3Bkb3duX3ZhbHVlIDonYWxsJywKICAgICAgbGlzdF9vZl95ZWFyOiBbXSwKICAgICAgcHJpY2VfY2hhcnRfZHJvcGRvd25fdmFsdWU6JycsCiAgICAgIGN1cnJlbnRfeWVhcjogJycKICAgICAgLy90b3VyX2d1aWRlX2ljb246IHJlcXVpcmUoIkAvcG9ydGFsL2Fzc2V0cy9pbWcvaW5mb19pY29uLnN2ZyIpLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGdyYXBoXzJfYmFyX2NoYXJ0X2Ryb3Bkb3duKCkgewogICAgLy8gICB0aGlzLmJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7CiAgICAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYmFyX2NoYXJ0Ml9kcm9wZG93bl92YWx1ZSkKICAgIC8vICAgYXhpb3MKICAgIC8vICAgICAucG9zdCgKICAgIC8vICAgICAgIGFwaV9jYWxscy5iaWxsaW5nX3VzYWdlX3VybCgpLAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgIC8vICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgIC8vICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICAgIGxvYWRfZGF0YV9ieTogdGhpcy5iYXJfY2hhcnQyX2Ryb3Bkb3duX3ZhbHVlLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICB9LAogICAgLy8gICAgICAgfQogICAgLy8gICAgICkKICAgIC8vICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LmxhYmVscyA9IFtdOwogICAgLy8gICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50ID0gW107CiAgICAvLyAgICAgICB0aGlzLlNlY29uZF9jaGFydC5Nc2dFeGNoYW5nZSA9IFtdOwogICAgLy8gICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbiA9IFtdOwogICAgLy8gICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIk5vIERhdGEgYXZhaWxhYmxlIikgewogICAgLy8gICAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzLnB1c2goaSk7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50LnB1c2gocmVzcG9uc2UuZGF0YVtpXS5DYWxsQ291bnQpOwogICAgLy8gICAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0Lk1zZ0V4Y2hhbmdlLnB1c2gocmVzcG9uc2UuZGF0YVtpXS5Nc2dFeGNoYW5nZSk7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbi5wdXNoKAogICAgLy8gICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVtpXS5UYXNrRXhlY3V0aW9uCiAgICAvLyAgICAgICAgICAgKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICBpZiAoCiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgICApIHsKICAgIC8vICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICB9KTsKICAgIC8vIH0sCiAgICBiYXJfY2hhcnRfZHJvcGRvd24oKSB7CiAgICAgIHRoaXMuYmFyX2NoYXJ0X2Ryb3Bkb3duX3ZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLmRhc2hib2FyZF9jaGFydF91cmwoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBsb2FkX2RhdGFfYnk6IHRoaXMuYmFyX2NoYXJ0X2Ryb3Bkb3duX3ZhbHVlLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMudXBkYXRlX2NoYXJ0X2RhdGEocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZV9jaGFydF9kYXRhKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5BUElfZGF0YS5sYWJlbHMgPSBbXTsKICAgICAgdGhpcy5BUElfZGF0YS5TdWNjZXNzZnVsID0gW107CiAgICAgIHRoaXMuQVBJX2RhdGEuVG90YWwgPSBbXTsKICAgICAgdGhpcy5BUElfZGF0YS5VbnN1Y2Nlc3NmdWwgPSBbXTsKICAgICAgaWYgKG1lc3NhZ2UgPT0gIk5vIERhdGEgYXZhaWxhYmxlIikgewogICAgICB9IGVsc2UgewogICAgICAgIGZvciAodmFyIGkgaW4gbWVzc2FnZSkgewogICAgICAgICAgdGhpcy5BUElfZGF0YS5sYWJlbHMucHVzaChpKTsKICAgICAgICAgIHRoaXMuQVBJX2RhdGEuU3VjY2Vzc2Z1bC5wdXNoKG1lc3NhZ2VbaV0uU3VjY2Vzc2Z1bCk7CiAgICAgICAgICB0aGlzLkFQSV9kYXRhLlRvdGFsLnB1c2gobWVzc2FnZVtpXS5Ub3RhbCk7CiAgICAgICAgICB0aGlzLkFQSV9kYXRhLlVuc3VjY2Vzc2Z1bC5wdXNoKG1lc3NhZ2VbaV0uVW5zdWNjZXNzZnVsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnb190b19wYWdlKHBhZ2VfbmFtZSkgewogICAgICBpZiAocGFnZV9uYW1lID09ICJWZXJpZnkgUmVzcG9uc2VzIFVuYW5zd2VyZWQiKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogIlZlcmlmeSBCb3QgUmVzcG9uc2UiLAogICAgICAgICAgcGFyYW1zOiB7IG1vZGFsX29wZW5fc3dpdGNoX3RhYjogZmFsc2UgfSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmKHBhZ2VfbmFtZSA9PSAiU3lub255bXMiKXsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnRsdCgnZGFzaGJvYXJkX3N3YWxfYWxlcnRfbXNnJyksCiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnZGFzaGJvYXJkX3RyYWluX21vZGVsX21zZycpLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy50bHQoJ2Rhc2hib2FyZF9zd2FsX2NvbmZpcm1fbXNnJyksCiAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgIGFwaV9jYWxscy50cmFpbl9pbnRlbnRfbmVyX21vZGVsKCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgICAgIHVwZGF0ZV9tb2RlbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdXBkYXRlX21vZGVsX3N0YXR1czogdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJ3YW50X21vZGVsX3N0YXR1cyIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0dfQ09ERSA9PT0gNDA0NikgewogICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhyZXNwb25zZS5kYXRhLk1TRyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDEwMzQpIHsKICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHJlc3BvbnNlLmRhdGEuTVNHKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcih0aGlzLnRsdCgnZGFzaGJvYXJkX2ludGVybmFsX3NlcnZlcl9tc2cnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcih0aGlzLnRsdCgnZGFzaGJvYXJkX2Vycm9yX29jY3VyX21zZycpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25hbWUgPT0gIlByb2R1Y3RzIil7CiAgICAgICAgICAkKCIjc3RvcmVfY29uZmlnIikubW9kYWwoJ3Nob3cnKTsKICAgICAgICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICAgIH0gCiAgICAgIGVsc2UgaWYgKHBhZ2VfbmFtZT09IkFjY291bnRzIil7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ1NldHRpbmdzJyxwYXJhbXM6e1N1YnNjcmlwdGlvbjp0cnVlfQogICAgICAgIH0pCiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogcGFnZV9uYW1lLAogICAgICAgICAgcGFyYW1zOiB7IG1vZGFsX29wZW5fc3dpdGNoX3RhYjogdHJ1ZSB9LAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaW50ZW50c19jb3VudF9mdW5jdGlvbigpIHsKICAgICAgbGV0IHN0YXJ0VGltZXN0YW1wID0gbnVsbDsKICAgICAgbGV0IGR1cmF0aW9uID0gMjAwMDsKICAgICAgbGV0IGVuZCA9IHRoaXMuaW50ZW50X2NvdW50OwogICAgICBsZXQgc3RhcnQgPSAwOwogICAgICBjb25zdCBzdGVwID0gKHRpbWVzdGFtcCkgPT4gewogICAgICAgIGlmICghc3RhcnRUaW1lc3RhbXApIHN0YXJ0VGltZXN0YW1wID0gdGltZXN0YW1wOwogICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oKHRpbWVzdGFtcCAtIHN0YXJ0VGltZXN0YW1wKSAvIGR1cmF0aW9uLCAxKTsKICAgICAgICB0aGlzLmludGVudF9jb3VudF9kaXNwbGF5ID0gTWF0aC5mbG9vcigKICAgICAgICAgIHByb2dyZXNzICogKGVuZCAtIHN0YXJ0KSArIHN0YXJ0CiAgICAgICAgKTsKICAgICAgICBpZiAocHJvZ3Jlc3MgPCAxKSB7CiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApOwogICAgICAgIH0KICAgICAgfTsKICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTsKICAgIH0sCiAgICBsaXN0X2dyb3VwX2R5bmFtaWNfY2xhc3Mocm93KSB7CiAgICAgIGlmICh0aGlzLnByaW1hcnlfaXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImxpc3QtZ3JvdXAtaXRlbS1wcmltYXJ5IjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmRhbmdlcl9pdGVtX2VudGl0aWVzX2xpc3QuaW5jbHVkZXMocm93KSkgewogICAgICAgIHJldHVybiAibGlzdC1ncm91cC1pdGVtLWRhbmdlciI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmZvX2l0ZW1fZW50aXRpZXNfbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJsaXN0LWdyb3VwLWl0ZW0taW5mbyI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdWNjZXNzX2l0ZW1faW5mb19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImxpc3QtZ3JvdXAtaXRlbS1zdWNjZXNzIjsKICAgICAgfQogICAgfSwKICAgIGxpc3RfZ3JvdXBfZHluYW1pY190eXBlKHJvdykgewogICAgICAvKiogIAogICAgICAgICogQHBhcmFtLSByb3cgZGV0ZXJtaW5lcyB3aGljaCBsaXN0IGdyb3UgcGl0IGJlbG9uZ3MgdG8uCiAgICAgICAgKiBAcmV0dXJucy0gdGhlIHJlc3BlY3RpdmUgbGlzdCBpdGVtIGNvbG91ciBwcmVmaXhlZCB3aXRoIGFscGhhYmV0IGZvciBlYXN5IHNvcnRpbmcgYXMgcGVyIG91ciByZXF1aXJlbWVudAogICAgICAqLwogICAgICBpZiAodGhpcy5wcmltYXJ5X2l0ZW1fZW50aXRpZXNfbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJkLXByaW1hcnkiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGFuZ2VyX2l0ZW1fZW50aXRpZXNfbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJhLWRhbmdlciI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmZvX2l0ZW1fZW50aXRpZXNfbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJiLWluZm8iOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3VjY2Vzc19pdGVtX2luZm9fbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJjLXN1Y2Nlc3MiOwogICAgICB9CiAgICB9LAogICAgZGlzcGxheV9saXN0X2R5bmFtaWNfY2xhc3MoKSB7CiAgICAgIGlmICh0aGlzLmRpc3BsYXlfbGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuICJwYWRkaW5nOiAyMHB4IDI1cHg7IjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gInBhZGRpbmc6IDEwcHggMjVweDsiOwogICAgICB9CiAgICB9LAogICAgY29uZmlndXJlX3Byb2R1Y3Rfc2V0dGluZ3MoKSB7CiAgICAgIGlmKHRoaXMudmFsaWRFbWFpbCAhPSB0cnVlKXsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdkYXNoYm9hcmRfdmFsaWRfZW1haWxfdGV4dCcpLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBpZih0aGlzLmN1cnJlbmN5X2NvZGUgPT0gJycpewogICAgICAgIHN3YWwoewogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2Rhc2hib2FyZF9iYXNlX2N1cnJlbmN5X3RleHQnKSwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuCiAgICAgIH1lbHNlIHsKICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzX2VtYWlsX3JlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgIGVtYWlsX3JlcXVpcmVkOiB7CiAgICAgICAgICAgICAgICBjb250YWN0X2hlbHBfZW1haWw6dGhpcy5jb250YWN0X3VzX2VtYWlsLAogICAgICAgICAgICAgICAgYmFzZV9jdXJyZW5jeTogdGhpcy5jdXJyZW5jeV9jb2RlLAogICAgICAgICAgICAgICAgInNob3Bfc2V0dGluZ3Nfc2F2ZWQiOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgJCgiI3N0b3JlX2NvbmZpZyIpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnZGFzaGJvYXJkX2NoYW5nZXNfc2F2ZWRfdGV4dCcpLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGltZXI6IDQwMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgdGhpcy5kYXNoYm9hcmRfZGV0YWlscygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2Rhc2hib2FyZF9pbnRlcm5hbF9zZXJ2ZXJfZXJyb3InKSwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ2Rhc2hib2FyZF9zb21lX2Vycm9yX21zZycpKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGVtcHR5X3ZhcmlhYmxlKCkgewogICAgICB0aGlzLmNvbnRhY3RfdXNfZW1haWwgPSAnJzsKICAgICAgdGhpcy5lbWFpbF9yZXF1aXJlZCA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbmN5X2NvZGUgPSAiIjsKICAgIH0sCiAgICBkYXNoYm9hcmRfZGV0YWlscygpewogICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgYXhpb3MKICAgICAgLnBvc3QoCiAgICAgICAgYXBpX2NhbGxzLmRhc2hib2FyZF9ib3RfZGV0YWlsc19jb3VudCgpLAogICAgICAgIHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIHRoaXMuZGlzcGxheV9saXN0ID0gW107CiAgICAgICAgdGhpcy5wZXJtaXNzaW9uX2xpc3QgPSBbXTsKICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpKSB7CiAgICAgICAgICB0aGlzLnBlcm1pc3Npb25fbGlzdC5wdXNoKAogICAgICAgICAgICB0aGlzLiRzZXNzaW9uLmdldCgiQ2hhdGJvdE1lbnUiKVtpXS5tYWluX21lbnUubmFtZQogICAgICAgICAgKTsKICAgICAgICAgIGZvciAodmFyIGogaW4gdGhpcy4kc2Vzc2lvbi5nZXQoIkNoYXRib3RNZW51IilbaV0uc3ViX21lbnVfbGlzdCkgewogICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25fbGlzdC5wdXNoKAogICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpW2ldLnN1Yl9tZW51X2xpc3Rbal0ubmFtZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5TdGF0dXMgPT09ICJTdWNjZXNzIikgewogICAgICAgICAgdmFyIHZlcmlmeV9ib3RfcmVzcG9uc2UgPSBmYWxzZSwKICAgICAgICAgIHN0b3JlX3NldHRpbmdzID0gZmFsc2U7CiAgICAgICAgICBmb3IgKHZhciBuIGluIHRoaXMucGVybWlzc2lvbl9saXN0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLnBlcm1pc3Npb25fbGlzdFtuXSA9PSAiVmVyaWZ5IEJvdCBSZXNwb25zZSIpIHsKICAgICAgICAgICAgICB2ZXJpZnlfYm90X3Jlc3BvbnNlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLnBlcm1pc3Npb25fbGlzdFtuXSA9PT0gIlN0b3JlIil7CiAgICAgICAgICAgICAgc3RvcmVfc2V0dGluZ3MgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEuZGF0YSkgewogICAgICAgICAgICBsZXQgcHVzaGVkID0gZmFsc2U7CiAgICAgICAgICAgIGZvciAodmFyIGogaW4gdGhpcy5wZXJtaXNzaW9uX2xpc3QpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PSB0aGlzLnBlcm1pc3Npb25fbGlzdFtqXSkgewogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmxpc3RfYmVsb25nID0gdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KQogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pOwogICAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgdmVyaWZ5X2JvdF9yZXNwb25zZSA9PSB0cnVlICYmCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09ICJWZXJpZnkgUmVzcG9uc2VzIFVuYW5zd2VyZWQiCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBwdXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmxpc3RfYmVsb25nID0gdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KQogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pOwogICAgICAgICAgICAgICAgdmVyaWZ5X2JvdF9yZXNwb25zZSA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBzdG9yZV9zZXR0aW5ncyA9PSB0cnVlICYmCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09ICJQcm9kdWN0cyIKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHB1c2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0ubGlzdF9iZWxvbmcgPSB0aGlzLmxpc3RfZ3JvdXBfZHluYW1pY190eXBlKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkpCiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlfbGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YVtpXSk7CiAgICAgICAgICAgICAgICBzdG9yZV9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZighcHVzaGVkKXsKICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09PSAiVHJhaW5pbmciKXsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5saXN0X2JlbG9uZyA9IHRoaXMubGlzdF9ncm91cF9keW5hbWljX3R5cGUocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSkKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKQogICAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIXB1c2hlZCl7CiAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PT0gIlN5bm9ueW1zIil7CiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0ubGlzdF9iZWxvbmcgPSB0aGlzLmxpc3RfZ3JvdXBfZHluYW1pY190eXBlKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkpCiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlfbGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YVtpXSkKICAgICAgICAgICAgICAgIHB1c2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCFwdXNoZWQpewogICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkgPT09ICJBY2NvdW50cyIpewogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmxpc3RfYmVsb25nID0gdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KQogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pCiAgICAgICAgICAgICAgICBwdXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZGlzcGxheV9saXN0LnNvcnQoKGEsYikgPT4gKGEubGlzdF9iZWxvbmcgPiBiLmxpc3RfYmVsb25nKSA/IDEgOiAtMSApCiAgICAgICAgfQogICAgICB9KQogICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIGlmICgKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKSB7CiAgICAgIHRoaXMuY29udGFjdF91c19lbWFpbCA9ICcnOwogICAgICB0aGlzLmVtYWlsX3JlcXVpcmVkID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVuY3lfY29kZSA9ICIiOwogICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc19nZXQ6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgIHZhciB3ZWJmcmFtZXdvcmsgPSB0aGlzLnJldGFpbF93ZWJfZnJhbWV3b3JrOwogICAgICAgICAgaWYgKAogICAgICAgICAgICByZXNwb25zZS5kYXRhICE9ICIiICYmCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gbnVsbCAmJgogICAgICAgICAgICByZXNwb25zZS5kYXRhICE9ICJJbnRlcm5hbCBzZXJ2ZXIgRXJyb3IiICYmCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubXNnICE9PSAiTk8gREFUQSBBVkFJTEFCTEUiCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5jb250YWN0X3VzX2VtYWlsID0gcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXS5jb250YWN0X2hlbHBfZW1haWw7CiAgICAgICAgICAgIHRoaXMuZW1haWxfcmVxdWlyZWQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgJ19kZXRhaWxzJ10ub3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ7CiAgICAgICAgICAgIHRoaXMuY3VycmVuY3lfY29kZSA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXS5iYXNlX2N1cnJlbmN5OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCdkYXNoYm9hcmRfaW50ZXJuYWxfc2VydmVyX21zZzEnKSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ2Rhc2hib2FyZF9lcnJvcl9vY2N1cnJlZF9tc2cnKSk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRfbWV0cmljc19kYXRhKCl7CiAgICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLndoYXRzYXBwX21ldHJpY3MoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGlzX2dldDp0aGlzLmxpbmVfY2hhcnRfZHJvcGRvd25fdmFsdWUsCiAgICAgICAgICAgIGlzX2dldF9jb252ZXJzYXRpb25fbWV0cmljczp0cnVlLAogICAgICAgICAgICB5ZWFyOiB0aGlzLmN1cnJlbnRfeWVhcgogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMubW9udGhseV91c2FnZV9kYXRhID1yZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGdldF9tZXRyaWNzX3ByaWNlX2RhdGEoKXsKICAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMud2hhdHNhcHBfbWV0cmljcygpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgaXNfZ2V0OidwcmljZScsCiAgICAgICAgICAgIGlzX2dldF9jb252ZXJzYXRpb25fbWV0cmljczp0cnVlLAogICAgICAgICAgICB5ZWFyOiB0aGlzLmN1cnJlbnRfeWVhcgogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMucHJpY2luZ19kYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgdGhpcy5saXN0X29mX3llYXIgPSByZXNwb25zZS5kYXRhLnllYXJzOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBsaW5lX2NoYXJ0X2Ryb3Bkb3duKCl7CiAgICAgIHRoaXMubGluZV9jaGFydF9kcm9wZG93bl92YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgdGhpcy5nZXRfbWV0cmljc19kYXRhKCk7CiAgICB9LAogICAgbGluZV9jaGFydF95ZWFyX2Ryb3Bkb3duKCl7CiAgICAgIHRoaXMuY3VycmVudF95ZWFyID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICB0aGlzLmdldF9tZXRyaWNzX3ByaWNlX2RhdGEoKTsKICAgICAgdGhpcy5nZXRfbWV0cmljc19kYXRhKCk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/portal/Chatbot/Dashboard","sourcesContent":["<template>\n  <div>\n    <div class=\"dash-cont\">\n      <div class=\"spinner\" id=\"spinner\" v-show=\"spinnerOn\"></div>\n      <div class=\"container-fluid\" id=\"dashboard-chart\">\n        <div class=\"card dash-card\">\n          <div\n            class=\"card-header d-flex flex-wrap justify-content-between pb-0\"\n          >\n            <h3 class=\"mab-3 mb-md-0\">\n              {{tlt('welcome_text')}} {{ $session.get(\"UserFirstName\") }}\n            </h3>\n            <!-- <span\n              style=\"\n                margin-bottom: 5px !important;\n                color: #0645ad;\n                cursor: pointer;\n              \"\n            >\n              <i\n                class=\"fa fa-info-circle\"\n                aria-hidden=\"true\"\n                style=\"font-size: 22px\"\n                title=\"start your page tour.\"\n                @click=\"start_tour\"\n              >\n              </i>\n            </span> -->\n          </div>\n          <ul\n            class=\"list-group mb-2\"\n            style=\"width: auto\"\n            :style=\"display_list_dynamic_class()\"\n          >\n            <li\n              class=\"list-group-item\"\n              :class=\"list_group_dynamic_class(row.entity)\"\n              v-for=\"(row, index) in display_list\"\n              :key=\"index\"\n            >\n              <span v-html=\"row.message\">\n\n              </span>\n              <!-- {{ row.message }} -->\n              <a href=\"#\" style=\"float: right\" @click=\"go_to_page(row.entity)\">\n                {{ row.click_text }}</a\n              >\n            </li>\n          </ul>\n        </div>\n        <div class=\"card dash-card\">\n          <div class=\"card-header d-flex flex-wrap justify-content-between\">\n            <h4 class=\"mab-3 mb-md-0\">{{tlt('chatbot_request_response_label')}}</h4>\n            <div class=\"card-act d-flex flex-wrap\">\n              <div class=\"form-group mb-0\">\n                <select\n                  class=\"form-control\"\n                  @change=\"bar_chart_dropdown\"\n                  id=\"exampleFormControlSelect1\"\n                >\n                  <option>{{tlt('dashboard_billing_cycle')}}</option>\n                  <option>{{tlt('dashboard_last_seven')}}</option>\n                  <option>{{tlt('dashboard_last_30')}}</option>\n                  <option>{{tlt('dashboard_last_3_month')}}</option>\n                  <option>{{tlt('dashboard_last_9_month')}}</option>\n                  <option>{{tlt('dashboard_last_12_month')}}</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"chart-box\">\n              <request-chart\n                :Successful=\"API_data.Successful\"\n                :Total=\"API_data.Total\"\n                :Unsuccessful=\"API_data.Unsuccessful\"\n                :labels=\"API_data.labels\"\n                :scaleLabel=\"bar_chart_dropdown_value\"\n              ></request-chart>\n            </div>\n          </div>\n        </div>\n        <div class=\"card dash-card\">\n          <div class=\"card-header d-flex justify-content-between\">\n            <h4 class=\"mab-3 mb-md-0\">Monthly Usage</h4>\n              <div class=\"form-group mb-0\">\n                <select\n                  class=\"form-control  pt-1 pr-3 pb-1 pl-3\"      \n                  id=\"exampleFormControlSelect1\"\n                  @change=\"line_chart_dropdown\"\n                >\n                  <option>all</option>\n                  <option>free</option>\n                  <option>paid</option>\n                </select>\n              </div>\n          </div>\n          <div v-if=\"monthly_usage_data.length>0\">\n            <line-chart v-bind=\"line_chart_props_monthly_usage\"></line-chart>\n          </div>\n          <div v-else style=\"text-align: center;\">\n              <h5 class=\"mab-3 mb-md-0 pb-4\">Currently no data available</h5>\n          </div>\n        </div>\n        <div class=\"card dash-card\">\n          <div class=\"card-header  d-flex justify-content-between\">\n            <h4 class=\"mab-3 mb-md-0\">Approximate charges</h4>\n            <div class=\"form-group mb-0\">\n              <select\n                class=\"form-control pt-1 pr-3 pb-1 pl-3\"      \n                id=\"exampleFormControlSelect1\"\n                @change=\"line_chart_year_dropdown\"\n              >\n                <option v-for=\"(year,index) in list_of_year\"\n                :key=\"index\"                \n                >{{year}}</option>\n              </select>\n            </div>\n          </div>\n          <div v-if=\"pricing_data.length>0\">\n           <line-chart v-bind=\"line_chart_props_approx_charge\"></line-chart>\n          </div>\n          <div v-else style=\"text-align: center;\">\n              <h5 class=\"mab-3 mb-md-0 pb-4\">Currently no data available</h5>\n          </div>\n        </div>\n        <!-- <div class=\"card dash-card\">\n          <div class=\"card-header d-flex flex-wrap justify-content-between\">\n            <h4 class=\"mab-3 mb-md-0\">Chatbot Billing Parameters</h4>\n            <div class=\"card-act d-flex flex-wrap\">\n              <div class=\"form-group mb-0\">\n                <select\n                  class=\"form-control\"\n                  v-model=\"bar_chart2_dropdown_value\"\n                  @change=\"graph_2_bar_chart_dropdown\"\n                  id=\"exampleFormControlSelect\"\n                >\n                  <option>Last 7 days</option>\n                  <option>Last 30 days</option>\n                  <option>Last 3 months</option>\n                  <option>Last 9 months</option>\n                  <option>Last 12 months</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"chart-box\">\n              <billing-chart\n                :CallsCount=\"this.Second_chart.CallCount\"\n                :MsgExchange=\"this.Second_chart.MsgExchange\"\n                :TasksExecuted=\"this.Second_chart.TaskExecution\"\n                :labels=\"this.Second_chart.labels\"\n                :scaleLabel=\"this.bar_chart2_dropdown_value\"\n              ></billing-chart>\n            </div>\n          </div>\n        </div> -->\n      </div>\n    </div>\n    <div\n      class=\"modal fade dash-modal\"\n      id=\"store_config\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/msg-blue.png\" alt />\n              </div>\n              <h3>{{tlt('dashboard_store_config')}}</h3>\n            </div>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <div class=\"col-sm-12\">\n               <div class=\"form-group mb-0\">\n                  <div></div>\n                  <label\n                    class=\"mb-sm-6 mt-3\"\n                    style=\"margin-top: 0.3rem !important;\"\n                  ><strong>{{tlt('shop_base_currency_label')}}</strong></label\n                  >\n                  <div class=\"form-group mb-0\">\n                    <multiselect\n                      v-model=\"currency_code\"\n                      :options=\"currency_list\"\n                      :searchable=\"true\"\n                      :close-on-select=\"true\"\n                      :taggable=\"false\"\n                      :multiple=\"false\"\n                      placeholder=\"Select Shop Currency\"\n                      :max-height=\"200\"\n                      track-by=\"display_name\"\n                      label=\"display_name\"\n                      :allow-empty=\"false\"\n                    >\n                      <!-- <span>{{ currency_name}}</span> -->\n                    </multiselect>\n                  </div>\n                  <hr style=\"margin-top: 1.9rem !important;\" />\n                  <div>\n                    <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.3rem !important;\"\n                    ><strong>{{tlt('contact_us_email_label')}}</strong>\n                    </label><br/>\n                    <label>\n                      {{tlt('email_for_customer_label')}}\n                    </label>\n                    <input\n                      v-model.trim=\"contact_us_email\"\n                      type=\"email\"\n                      class=\"form-control\"\n                      placeholder=\"Enter the email-id\"\n                      style=\"padding: 8px;margin-bottom: 1rem;border-radius: 12px !important\"\n                      required\n                    />\n                    <div\n                      class=\"is-invalid\"\n                      style=\"color:red; padding-bottom:15px;\"\n                      v-if=\"validEmail!=true && contact_us_email!=''\"\n                    >\n                      {{ validEmail }}\n                    </div>\n                  </div>\n                  <div\n                  class=\"card-act btn-wrap text-right mt-0 pt-0 pb-3 border-top-0\"\n                  style=\"margin-left: 2rem;margin-bottom: 0.4rem\"\n                  >\n                  <button\n                    type=\"submit\"\n                    style=\"display: text-center !important;\"\n                    class=\"darkblue-btn\"\n                    @click=\"configure_product_settings()\"\n                  >\n                    {{tlt('save_btn')}}\n                  </button>\n                </div>\n               </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { bus } from \"@/portal/main\";\nimport api_calls from \"@/portal/api_calls\";\nimport RequestChart from \"@/portal/components/RequestChart.vue\";\nimport AreaChart from \"@/portal/components/AreaChart.vue\";\nimport BillingChart from \"@/portal/components/BillingChart.vue\";\nimport swal from 'sweetalert2';\nimport Multiselect from \"vue-multiselect\";\nimport currency from \"@/portal/components/Currency\";\nimport LineChart from \"@/portal/components/LineChart\";\n//import page_guide from \"@/portal/mixins/pageguide.js\";\nexport default {\n  //mixins: [page_guide],\n  props: {},\n  components: {\n    RequestChart,\n    AreaChart,\n    BillingChart,\n    Multiselect,\n    LineChart\n  },\n  mounted(){\n    this.retail_web_framework = this.$session.get(\"retail_web_framework\");\n    for (var i = 0; i < currency.length; i++) {\n      this.currency_list.push({\n        display_name:\n          currency[i].emoji +\n          \" \" +\n          currency[i].currency_code +\n          \" - \" +\n          currency[i].currency_name,\n        value: currency[i].currency_code\n      });\n    }\n    var currentTime = new Date()\n    this.current_year = currentTime.getFullYear();\n    this.get_metrics_data();\n    this.get_metrics_price_data();\n  },\n  created() {\n    if (\n      !this.$session.has(\"CompanyId\") &&\n      this.$session.has(\"UserInformation\").role &&\n      this.$session.get(\"UserInformation\").role == \"SuperAdmin\"\n    ) {\n      toastr.warning(this.tlt('select_company_name_label'));\n    }\n    if (this.user_role == \"SuperAdmin\") {\n      if (this.$session.has(\"CompanyId\")) {\n        this.companyid = this.$session.get(\"CompanyId\");\n        this.companyname = this.$session.get(\"CompanyName\");\n      }\n    } else {\n      this.companyid = this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").company_id\n        : \"\";\n      this.companyname = this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").company_name\n        : \"\";\n    }\n    this.dashboard_details();\n    // axios\n    //   .post(\n    //     api_calls.billing_usage_url(),\n    //     {\n    //       companyname: this.companyname,\n    //       companyid: this.companyid,\n    //       email: this.$session.get(\"UserInformation\").email,\n    //       token: this.$session.get(\"UserInformation\").tokens,\n    //       load_data_by: \"Last 7 days\",\n    //       license_key: this.$session.get(\"UserInformation\").license_key,\n    //     },\n    //     {\n    //       headers: {\n    //         Authorization: `Bearer ${this.$session.get(\"at\")}`,\n    //       },\n    //     }\n    //   )\n    //   .then((response) => {\n    //     this.Second_chart.labels = [];\n    //     this.Second_chart.CallCount = [];\n    //     this.Second_chart.MsgExchange = [];\n    //     this.Second_chart.TaskExecution = [];\n    //     if (response.data == \"No Data available\") {\n    //       bus.$emit(\n    //         \"chart is updated\",\n    //         \"True\",\n    //         [],\n    //         [],\n    //         [],\n    //         [],\n    //         this.bar_chart2_dropdown_value\n    //       );\n    //     } else {\n    //       for (var i in response.data) {\n    //         this.Second_chart.labels.push(i);\n    //         this.Second_chart.CallCount.push(response.data[i].CallCount);\n    //         this.Second_chart.MsgExchange.push(response.data[i].MsgExchange);\n    //         this.Second_chart.TaskExecution.push(\n    //           response.data[i].TaskExecution\n    //         );\n    //       }\n    //       bus.$emit(\n    //         \"billing chart is updated\",\n    //         \"True\",\n    //         this.Second_chart.CallCount,\n    //         this.Second_chart.MsgExchange,\n    //         this.Second_chart.TaskExecution,\n    //         this.Second_chart.labels,\n    //         this.bar_chart2_dropdown_value\n    //       );\n    //     }\n    //   })\n    //   .catch((e) => {\n    //     if (\n    //       e.response.status === 410 ||\n    //       e.response.status === 440 ||\n    //       e.response.status === 409\n    //     ) {\n    //       this.$root.$emit(\"Session_Expired\", e.response.data);\n    //     }\n    //   });\n    axios\n      .post(\n        api_calls.dashboard_chart_url(),\n        {\n          companyname: this.companyname,\n          companyid: this.companyid,\n          email: this.$session.get(\"UserInformation\").email,\n          token: this.$session.get(\"UserInformation\").tokens,\n          load_data_by: \"Monthly billing cycle\",\n          license_key: this.$session.get(\"UserInformation\").license_key,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n      )\n      .then((response) => {\n        this.update_chart_data(response.data);\n      })\n      .catch((e) => {\n        if (\n          e.response.status === 410 ||\n          e.response.status === 440 ||\n          e.response.status === 409\n        ) {\n          this.$root.$emit(\"Session_Expired\", e.response.data);\n        }\n      });\n  },\n  updated() {\n    bus.$on(\"company attributes updated\", (data) => {\n      if (data == \"True\") {\n        bus.$emit(\"send company attributes\");\n      }\n    });\n    bus.$on(\"company name and company id\", (data1, data2) => {\n      this.$router.go();\n    });\n  },\n  computed:{\n    validEmail () {\n      if(this.contact_us_email != null){\n        if (this.email_validity.test(this.contact_us_email)) {\n          return true;\n        } else {\n          return this.tlt('valid_email_addr_label');\n        }\n      }\n    },\n    line_chart_props_monthly_usage(){\n      return {\n        xAxisLabel: 'Timeline',\n        yAxisLabel: 'Value',\n        xKey: 'date',\n        yKey: 'value',\n        interval: 'day',\n        data: this.monthly_usage_data\n      }\n    },\n    line_chart_props_approx_charge(){\n      return {\n        xAxisLabel: 'Timeline',\n        yAxisLabel: 'price ($)',\n        xKey: 'date',\n        yKey: 'value',\n        interval: 'day',  \n        data: this.pricing_data\n      }\n    }\n  },\n  data() {\n    return {\n      show: false,\n      bar_chart_dropdown_value: \"Monthly billing cycle\",\n      bar_chart2_dropdown_value: \"Last 7 days\",\n      companyname: null,\n      companyid: null,\n      permission_list: [],\n      API_data: {\n        labels: [],\n        Successful: [],\n        Total: [],\n        Unsuccessful: [],\n        xAxisLabel: \"\",\n      },\n      Second_chart: {\n        labels: [],\n        CallCount: [],\n        MsgExchange: [],\n        TaskExecution: [],\n      },\n      Concurrent_Users_Data: {\n        labels: [],\n        data: [],\n      },\n      concurrent_users_month: \"\",\n      user_role: this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").role\n        : \"\",\n      intent_count: 53,\n      intent_count_display: 0,\n      display_list: [],\n      primary_item_entities_list: [\"Intents\", \"Questions\", \"Responses\", \"Training\"],\n      danger_item_entities_list: [\n        \"Verify Responses Unanswered\",\n        \"Verify Bot Response\",\n        \"Products\",\n        \"Synonyms\",\n        \"Accounts\"\n      ],\n      info_item_entities_list: [],\n      success_item_info_list: [\"Check Bot Response\",\"Bot Configuration\"],\n      item_list_order: [\"danger_item_entities_list\", \"success_item_info_list\", \"primary_item_entities_list\"],\n      spinnerOn: false,\n      retail_web_framework:this.$session.get(\"retail_web_framework\"),\n      currency_code: \"\",\n      currency_list: [],\n      email_validity: /^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$/,\n      contact_us_email:'',\n      monthly_usage_data:[],\n      pricing_data:[],\n      line_chart_dropdown_value :'all',\n      list_of_year: [],\n      price_chart_dropdown_value:'',\n      current_year: ''\n      //tour_guide_icon: require(\"@/portal/assets/img/info_icon.svg\"),\n    };\n  },\n  methods: {\n    // graph_2_bar_chart_dropdown() {\n    //   this.bar_chart2_dropdown_value = event.target.value;\n    //   // console.log(this.bar_chart2_dropdown_value)\n    //   axios\n    //     .post(\n    //       api_calls.billing_usage_url(),\n    //       {\n    //         companyname: this.$session.get(\"UserInformation\").company_name,\n    //         companyid: this.$session.get(\"UserInformation\").company_id,\n    //         email: this.$session.get(\"UserInformation\").email,\n    //         token: this.$session.get(\"UserInformation\").tokens,\n    //         load_data_by: this.bar_chart2_dropdown_value,\n    //         license_key: this.$session.get(\"UserInformation\").license_key,\n    //       },\n    //       {\n    //         headers: {\n    //           Authorization: `Bearer ${this.$session.get(\"at\")}`,\n    //         },\n    //       }\n    //     )\n    //     .then((response) => {\n    //       this.Second_chart.labels = [];\n    //       this.Second_chart.CallCount = [];\n    //       this.Second_chart.MsgExchange = [];\n    //       this.Second_chart.TaskExecution = [];\n    //       if (response.data == \"No Data available\") {\n    //       } else {\n    //         for (var i in response.data) {\n    //           this.Second_chart.labels.push(i);\n    //           this.Second_chart.CallCount.push(response.data[i].CallCount);\n    //           this.Second_chart.MsgExchange.push(response.data[i].MsgExchange);\n    //           this.Second_chart.TaskExecution.push(\n    //             response.data[i].TaskExecution\n    //           );\n    //         }\n    //       }\n    //     })\n    //     .catch((e) => {\n    //       if (\n    //         e.response.status === 410 ||\n    //         e.response.status === 440 ||\n    //         e.response.status === 409\n    //       ) {\n    //         this.$root.$emit(\"Session_Expired\", e.response.data);\n    //       }\n    //     });\n    // },\n    bar_chart_dropdown() {\n      this.bar_chart_dropdown_value = event.target.value;\n      axios\n        .post(\n          api_calls.dashboard_chart_url(),\n          {\n            companyname: this.companyname,\n            companyid: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            token: this.$session.get(\"UserInformation\").tokens,\n            load_data_by: this.bar_chart_dropdown_value,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.update_chart_data(response.data);\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    update_chart_data(message) {\n      this.API_data.labels = [];\n      this.API_data.Successful = [];\n      this.API_data.Total = [];\n      this.API_data.Unsuccessful = [];\n      if (message == \"No Data available\") {\n      } else {\n        for (var i in message) {\n          this.API_data.labels.push(i);\n          this.API_data.Successful.push(message[i].Successful);\n          this.API_data.Total.push(message[i].Total);\n          this.API_data.Unsuccessful.push(message[i].Unsuccessful);\n        }\n      }\n    },\n    go_to_page(page_name) {\n      if (page_name == \"Verify Responses Unanswered\") {\n        this.$router.push({\n          name: \"Verify Bot Response\",\n          params: { modal_open_switch_tab: false },\n        });\n      } else if(page_name == \"Synonyms\"){\n        swal({\n          title: this.tlt('dashboard_swal_alert_msg'),\n          text: this.tlt('dashboard_train_model_msg'),\n          type: \"question\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: this.tlt('dashboard_swal_confirm_msg'),\n          allowOutsideClick: false,\n          allowEscapeKey: false,\n        }).then((result) => {\n          if (result.value) {\n            this.spinnerOn = true;\n            axios\n              .post(\n                api_calls.train_intent_ner_model(),\n                {\n                  email: this.$session.get(\"UserInformation\").email,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  token: this.$session.get(\"UserInformation\").tokens,\n                  subscription: this.$session.get(\"UserInformation\").subscription,\n                  company_name: this.$session.get(\"UserInformation\").company_name,\n                  company_id: this.$session.get(\"UserInformation\").company_id,\n                  update_model: true,\n                  update_model_status: true\n                },\n                {\n                  headers: {\n                    Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                  },\n                }\n              )\n              .then((response) => {\n                this.spinnerOn = false;\n                this.$root.$emit(\"want_model_status\",true);\n                if (response.data.MSG_CODE === 4046) {\n                  toastr.success(response.data.MSG);\n                } else if (response.data.MSG_CODE === 1034) {\n                  toastr.error(response.data.MSG);\n                } else {\n                  toastr.error(this.tlt('dashboard_internal_server_msg'));\n                }\n              })\n              .catch((e) => {\n                this.spinnerOn = false;\n                if (\n                  e.response.status === 410 ||\n                  e.response.status === 440 ||\n                  e.response.status === 409\n                ) {\n                  this.$root.$emit(\"Session_Expired\", e.response.data);\n                }\n                toastr.error(this.tlt('dashboard_error_occur_msg'));\n              });\n          }\n        });\n      } else if (page_name == \"Products\"){\n          $(\"#store_config\").modal('show');\n          this.load_product_settings();\n      } \n      else if (page_name==\"Accounts\"){\n        this.$router.push({\n          name: 'Settings',params:{Subscription:true}\n        })\n      }\n      else {\n        this.$router.push({\n          name: page_name,\n          params: { modal_open_switch_tab: true },\n        });\n      }\n    },\n    intents_count_function() {\n      let startTimestamp = null;\n      let duration = 2000;\n      let end = this.intent_count;\n      let start = 0;\n      const step = (timestamp) => {\n        if (!startTimestamp) startTimestamp = timestamp;\n        const progress = Math.min((timestamp - startTimestamp) / duration, 1);\n        this.intent_count_display = Math.floor(\n          progress * (end - start) + start\n        );\n        if (progress < 1) {\n          window.requestAnimationFrame(step);\n        }\n      };\n      window.requestAnimationFrame(step);\n    },\n    list_group_dynamic_class(row) {\n      if (this.primary_item_entities_list.includes(row)) {\n        return \"list-group-item-primary\";\n      } else if (this.danger_item_entities_list.includes(row)) {\n        return \"list-group-item-danger\";\n      } else if (this.info_item_entities_list.includes(row)) {\n        return \"list-group-item-info\";\n      } else if (this.success_item_info_list.includes(row)) {\n        return \"list-group-item-success\";\n      }\n    },\n    list_group_dynamic_type(row) {\n      /**  \n        * @param- row determines which list grou pit belongs to.\n        * @returns- the respective list item colour prefixed with alphabet for easy sorting as per our requirement\n      */\n      if (this.primary_item_entities_list.includes(row)) {\n        return \"d-primary\";\n      } else if (this.danger_item_entities_list.includes(row)) {\n        return \"a-danger\";\n      } else if (this.info_item_entities_list.includes(row)) {\n        return \"b-info\";\n      } else if (this.success_item_info_list.includes(row)) {\n        return \"c-success\";\n      }\n    },\n    display_list_dynamic_class() {\n      if (this.display_list.length > 0) {\n        return \"padding: 20px 25px;\";\n      } else {\n        return \"padding: 10px 25px;\";\n      }\n    },\n    configure_product_settings() {\n      if(this.validEmail != true){\n        swal({\n          text: this.tlt('dashboard_valid_email_text'),\n          type: \"warning\",\n          timer: 3000\n        });\n        return\n      }\n      if(this.currency_code == ''){\n        swal({\n          text: this.tlt('dashboard_base_currency_text'),\n          type: \"warning\",\n          timer: 3000\n        });\n        return\n      }else {\n        this.big_spinner = true;\n        axios\n          .post(\n            api_calls.product_settings(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              is_email_required: true,\n              email_required: {\n                contact_help_email:this.contact_us_email,\n                base_currency: this.currency_code,\n                \"shop_settings_saved\": true\n              }\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.big_spinner = false;\n             $(\"#store_config\").modal('hide');\n            if (response.data == \"Query Executed Successfully\") {\n              swal({\n                text: this.tlt('dashboard_changes_saved_text'),\n                type: \"success\",\n                timer: 4000\n              });\n              this.empty_variable();\n              this.dashboard_details();\n            } else {\n              swal({\n                text: this.tlt('dashboard_internal_server_error'),\n                type: \"error\",\n                timer: 2000\n              });\n            }\n          })\n          .catch(e => {\n            this.big_spinner = false;\n            console.log(e);\n            toastr.error(this.tlt('dashboard_some_error_msg'));\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    empty_variable() {\n      this.contact_us_email = '';\n      this.email_required = false;\n      this.currency_code = \"\";\n    },\n    dashboard_details(){\n    this.spinnerOn = true;\n    axios\n      .post(\n        api_calls.dashboard_bot_details_count(),\n        {\n          company_name: this.companyname,\n          company_id: this.companyid,\n          email: this.$session.get(\"UserInformation\").email,\n          token: this.$session.get(\"UserInformation\").tokens,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          is_get: true,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n      )\n      .then((response) => {\n        this.spinnerOn = false;\n        this.display_list = [];\n        this.permission_list = [];\n        for (var i in this.$session.get(\"ChatbotMenu\")) {\n          this.permission_list.push(\n            this.$session.get(\"ChatbotMenu\")[i].main_menu.name\n          );\n          for (var j in this.$session.get(\"ChatbotMenu\")[i].sub_menu_list) {\n            this.permission_list.push(\n              this.$session.get(\"ChatbotMenu\")[i].sub_menu_list[j].name\n            );\n          }\n        }\n        if (response.data.Status === \"Success\") {\n          var verify_bot_response = false,\n          store_settings = false;\n          for (var n in this.permission_list) {\n            if (this.permission_list[n] == \"Verify Bot Response\") {\n              verify_bot_response = true;\n            }\n            if(this.permission_list[n] === \"Store\"){\n              store_settings = true;\n            }\n          }\n          for (var i in response.data.data) {\n            let pushed = false;\n            for (var j in this.permission_list) {\n              if (response.data.data[i].entity == this.permission_list[j]) {\n                response.data.data[i].list_belong = this.list_group_dynamic_type(response.data.data[i].entity)\n                this.display_list.push(response.data.data[i]);\n                pushed = true;\n              }\n              if (\n                verify_bot_response == true &&\n                response.data.data[i].entity == \"Verify Responses Unanswered\"\n              ) {\n                pushed = true;\n                response.data.data[i].list_belong = this.list_group_dynamic_type(response.data.data[i].entity)\n                this.display_list.push(response.data.data[i]);\n                verify_bot_response = false;\n              }\n              if (\n                store_settings == true &&\n                response.data.data[i].entity == \"Products\"\n              ) {\n                pushed = true;\n                response.data.data[i].list_belong = this.list_group_dynamic_type(response.data.data[i].entity)\n                this.display_list.push(response.data.data[i]);\n                store_settings = false;\n              }\n            }\n            if(!pushed){\n              if(response.data.data[i].entity === \"Training\"){\n                response.data.data[i].list_belong = this.list_group_dynamic_type(response.data.data[i].entity)\n                this.display_list.push(response.data.data[i])\n                pushed = true;\n              }\n            }\n            if(!pushed){\n              if(response.data.data[i].entity === \"Synonyms\"){\n                response.data.data[i].list_belong = this.list_group_dynamic_type(response.data.data[i].entity)\n                this.display_list.push(response.data.data[i])\n                pushed = true;\n              }\n            }\n            if(!pushed){\n              if(response.data.data[i].entity === \"Accounts\"){\n                response.data.data[i].list_belong = this.list_group_dynamic_type(response.data.data[i].entity)\n                this.display_list.push(response.data.data[i])\n                pushed = true;\n              }\n            }\n\n          }\n          this.display_list.sort((a,b) => (a.list_belong > b.list_belong) ? 1 : -1 )\n        }\n      })\n      .catch((e) => {\n        this.spinnerOn = false;\n        if (\n          e.response.status === 410 ||\n          e.response.status === 440 ||\n          e.response.status === 409\n        ) {\n          this.$root.$emit(\"Session_Expired\", e.response.data);\n        }\n      });\n    },\n    load_product_settings() {\n      this.contact_us_email = '';\n      this.email_required = false;\n      this.currency_code = \"\";\n      this.big_spinner = true;\n      axios\n        .post(\n          api_calls.product_settings(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            is_get: true\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          this.big_spinner = false;\n          var webframework = this.retail_web_framework;\n          if (\n            response.data != \"\" &&\n            response.data != null &&\n            response.data != \"Internal server Error\" &&\n            response.data.msg !== \"NO DATA AVAILABLE\"\n          ) {\n            this.contact_us_email = response.data[webframework + '_details'].contact_help_email;\n            this.email_required =\n              response.data[webframework + '_details'].order_retrieval_only_email_required;\n            this.currency_code =\n              response.data[webframework + '_details'].base_currency;\n          } else {\n            toastr.error(this.tlt('dashboard_internal_server_msg1'));\n          }\n        })\n        .catch(e => {\n          this.big_spinner = false;\n          toastr.error(this.tlt('dashboard_error_occurred_msg'));\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    get_metrics_data(){\n       axios\n        .post(\n          api_calls.whatsapp_metrics(),\n          {\n            companyname: this.companyname,\n            companyid: this.companyid,\n            is_get:this.line_chart_dropdown_value,\n            is_get_conversation_metrics:true,\n            year: this.current_year\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.monthly_usage_data =response.data.data;\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    get_metrics_price_data(){\n       axios\n        .post(\n          api_calls.whatsapp_metrics(),\n          {\n            companyname: this.companyname,\n            companyid: this.companyid,\n            is_get:'price',\n            is_get_conversation_metrics:true,\n            year: this.current_year\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.pricing_data = response.data.data;\n          this.list_of_year = response.data.years;\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    line_chart_dropdown(){\n      this.line_chart_dropdown_value = event.target.value;\n      this.get_metrics_data();\n    },\n    line_chart_year_dropdown(){\n      this.current_year = event.target.value;\n      this.get_metrics_price_data();\n      this.get_metrics_data();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.dash-card .card-body {\n  min-height: fit-content;\n}\na {\n  color: black;\n}\na:hover {\n  color: #4024da;\n}\n</style>\n<style>\n.multiselect__tags {\n  min-height: 42px !important;\n}\n</style>\n"]}]}