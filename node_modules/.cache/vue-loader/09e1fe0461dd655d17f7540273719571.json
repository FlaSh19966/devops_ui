{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Pages/Login.vue","mtime":1645594423491},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHNpZGViYXJpdGVtcyBmcm9tICIuLi9MYXlvdXQvU2lkZUJhckl0ZW0iOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBidXMgfSBmcm9tICJAL3BvcnRhbC9tYWluIjsKaW1wb3J0IENvb2tpZXMgZnJvbSAianMtY29va2llIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIGRhdGU6ICIiLAogICAgICB9LAogICAgICBvcGVuX21vZGFsOiBmYWxzZSwKICAgICAgZm9yZ290X3Bhc3N3b3JkX2VtYWlsOiAiIiwKICAgICAgcmVnX2VtYWlsOiAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICBzaG93X3ZhbGlkYXRpb25fc3RyaW5nOiBmYWxzZSwKICAgICAgbG9naW5fdHlwZTogIlBvcnRhbCIsCiAgICAgIGlzX3N1cGVyX2FkbWluOiBmYWxzZSwKICAgICAgb3Blbl9ib3RfYXBpX3Jlc3BvbnNlX3JlY2VpdmVkOiBmYWxzZSwKICAgICAgbG9naW5fYnV0dG9uX3NwaW5uZXI6IGZhbHNlLAogICAgICBpc19zdWJtaXR0aW5nOiBmYWxzZSwKICAgICAgYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmc6IG51bGwsCiAgICAgIGlzX3VzZXJfbG9ja2VkOiBmYWxzZSwKICAgICAgdXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkOiBudWxsLAogICAgfTsKICB9LAogIGJlZm9yZUNyZWF0ZSgpIHsKICAgIGlmKHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKSAmJiBCb29sZWFuKHRoaXMuJHJvdXRlLnF1ZXJ5LmlzX3Nob3BpZnlfYmlsbGluZ19yZWRpcmVjdCkpewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIkRhc2hib2FyZCIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpc19zaG9waWZ5X2JpbGxpbmdfcmVkaXJlY3Q6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgZWxzZSBpZiAoCiAgICAgIHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKSAmJgogICAgICAhKEJvb2xlYW4odGhpcy4kcm91dGUucXVlcnkuZW1haWwpICYmIEJvb2xlYW4odGhpcy4kcm91dGUucXVlcnkudG9rZW4pKQogICAgKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYm90L2Rhc2hib2FyZCIpOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGxldCBsX3R5cGUgPSBDb29raWVzLmdldCgibG9naW5fdHlwZSIpOwogICAgaWYgKChsX3R5cGUgIT09IHVuZGVmaW5lZCkgJiYgKGxfdHlwZSAhPT0gInVuZGVmaW5lZCIpICkgewogICAgICB0aGlzLmxvZ2luX3R5cGUgPSBDb29raWVzLmdldCgibG9naW5fdHlwZSIpOwogICAgfSAKICAgIGlmKHRoaXMubG9naW5fdHlwZSA9PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5sb2dpbl90eXBlID0gIlBvcnRhbCIKICAgIH0KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdmFyIGVtYWlsID0gdGhpcy4kcm91dGUucXVlcnkuZW1haWw7CiAgICB2YXIgdG9rZW5faWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50b2tlbjsKICAgIGlmIChlbWFpbCAmJiB0b2tlbl9pZCkgewogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgibG9naW4iKTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdChhcGlfY2FsbHMudmFsaWRhdGVfbG9naW4oKSwgewogICAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgICAgdG9rZW46IHRva2VuX2lkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiRW1haWwgYWxyZWFkeSB2ZXJpZmllZCIpIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICI8aDY+VGhpcyBFbWFpbCB2ZXJpZmljYXRpb24gbGluayBpcyBFeHBpcmVkLiBZb3UgYWxyZWFkeSBWZXJpZmllZCB5b3VyIGFjY291bnQuIEtpbmRseSBsb2dpbjwvaDY+IiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkVtYWlsIHZlcmlmaWNhdGlvbiBzdWNjZXNzZnVsIikgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICI8aDY+WW91ciBlbWFpbCB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bGx5IGRvbmUgLiBQbGVhc2UgdXNlIEVtYWlsIGlkIGFzIHlvdXIgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIGZvciBsb2dpbjwvaDY+IiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlVzZXIgRG9lc24ndCBFeGlzdCIpIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgaHRtbDogIjxoNj5Vc2VyIERvZXNuJ3QgRXhpc3Q8L2g2PiIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbWFpbF92YWxpZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMucmVnX2VtYWlsLnRlc3QodGhpcy5mb3Jnb3RfcGFzc3dvcmRfZW1haWwpKSB7CiAgICAgICAgdGhpcy5zaG93X3ZhbGlkYXRpb25fc3RyaW5nID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93X3ZhbGlkYXRpb25fc3RyaW5nID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vICB0b2dnbGVfZG9tYWluKGV2ZW50KSB7CiAgICAvLyAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gIlBvcnRhbCIpIHsKICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZG9tYWluX2lucHV0Iikuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgLy8gICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAiQm90IikgewogICAgLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkb21haW5faW5wdXQiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgLy8gICB9fSwKICAgIGNsZWFyX2ZpZWxkcygpIHsKICAgICAgdGhpcy5mb3Jnb3RfcGFzc3dvcmQgPSAiIjsKICAgICAgJCgiI3VzZXJtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICB9LAogICAgZm9yZ290X3Bhc3N3b3JkKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoCiAgICAgICAgdGhpcy5zaG93X3ZhbGlkYXRpb25fc3RyaW5nID09IGZhbHNlICYmCiAgICAgICAgdGhpcy5mb3Jnb3RfcGFzc3dvcmRfZW1haWwgIT0gIiIKICAgICAgKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHRleHQ6ICJQbGVhc2Ugd2FpdCB3aGlsZSB3ZSBzdWJtaXQgeW91ciBkZXRhaWxzIiwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICB9KTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmZvcmdvdF9wYXNzd29yZCgpLCB7CiAgICAgICAgICAgIGVtYWlsOiB0aGlzLmZvcmdvdF9wYXNzd29yZF9lbWFpbCwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5jbHVkZXMoImVtYWlsIGFkZHJlc3MiKSkgewogICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgaHRtbDogcmVzcG9uc2UuZGF0YSwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiQSBtYWlsIGhhcyBiZWVuIHNlbnQgdG8geW91ciBlbWFpbCIpIHsKICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICI8aDY+V2UgaGF2ZSBzZW50IGEgbGluayB0byByZXNldCB5b3VyIHBhc3N3b3JkLiBLaW5kbHkgY2hlY2sgeW91ciBlLW1haWw8L2g2PiIsCiAgICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAkKCIjdXNlcm1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgIGh0bWw6ICI8aDY+U29tZSBFcnJvciBPY2N1cnJlZC4gUGxlYXNlIFRyeSBBZ2FpbjwvaDY+IiwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICQoIiN1c2VybW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHBhc3N3b3JkX3RvZ2dsZSgpIHsKICAgICAgdmFyIHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm1fcGFzc3dvcmQiKTsKICAgICAgaWYgKHBhc3N3b3JkLnR5cGUgPT0gInRleHQiKSB7CiAgICAgICAgcGFzc3dvcmQudHlwZSA9ICJwYXNzd29yZCI7CiAgICAgIH0gZWxzZSBpZiAocGFzc3dvcmQudHlwZSA9PSAicGFzc3dvcmQiKSB7CiAgICAgICAgcGFzc3dvcmQudHlwZSA9ICJ0ZXh0IjsKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZSgpIHsKICAgICAgdGhpcy5pc19zdWJtaXR0aW5nID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMudXNlci5uYW1lID09ICIiIHx8IHRoaXMudXNlci5wYXNzd29yZCA9PSAiIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgdGl0bGU6ICI8aDQ+S2luZGx5IGVudGVyIHRoZSBlbWFpbCBhbmQgcGFzc3dvcmQ8L2g0PiIsCiAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzX3N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLmxvZ2luX2J1dHRvbl9zcGlubmVyID0gdHJ1ZTsKICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Bpbm5lciIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICB0aGlzLmNhbGxfYXBpKCk7CiAgICAgIH0KICAgIH0sCiAgICByZWRpcihtZXNzYWdlKSB7CiAgICAgIC8vIGlmICghdGhpcy5pc19zdXBlcl9hZG1pbil7CiAgICAgICAgbGV0IHJlc2V0X2ZpZWxkcyA9IHRydWU7CiAgICAgICAgdGhpcy5sb2dpbl9idXR0b25fc3Bpbm5lciA9IGZhbHNlOwogICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGlubmVyIikuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMC41IjsKICAgICAgLy8gfSAKICAgICAgaWYgKG1lc3NhZ2UuTVNHID09ICJFbWFpbCBoYXNuJ3QgYmVlbiB2ZXJpZmllZC4iKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICBodG1sOgogICAgICAgICAgICAiPGg2PllvdXIgYWNjb3VudCBoYXMgbm90IGJlZW4gdmFsaWRhdGVkIGZvciBsb2dpbi48YnI+UGxlYXNlIGNoZWNrIHlvdXIgZS1tYWlsIGZvciBkZXRhaWxzLjwvaDY+IiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYobWVzc2FnZS5NU0cgPT0gIllvdXIgYWNjb3VudCBoYXMgYmVlbiBsb2NrZWQgZHVlIGluY29ycmVjdCBsb2dpbiBhdHRlbXB0cyIpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKICAgICAgICAgc3dhbCh7CiAgICAgICAgICBodG1sOgogICAgICAgICAgICAiPGg2PllvdXIgYWNjb3VudCBoYXMgYmVlbiBsb2NrZWQgZm9yIGV4Y2VlZGluZyB0aGUgbnVtYmVyIG9mIGFsbG93ZWQgYXR0ZW1wdHMuPC9oNj4iLAogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7ICAgCiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5NU0cgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBodG1sOgogICAgICAgICAgICAiPGg2PlRoZXJlIHdhcyBhbiBpbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uPC9oNj4iLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLk1TRyA9PSAiVXNlciBoYXMgbm90IGJlZW4gYXBwcm92ZWQgeWV0LiIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICI8aDY+WW91ciByZWdpc3RyYXRpb24gaGFzIG5vdCBiZWVuIGFwcHJvdmVkIG9yIGl0IGhhcyBiZWVuIGRlY2xpbmVkIGJ5IEFkbWluLiBLaW5kbHkgY2hlY2sgeW91ciBtYWlsPC9oNj4iLAogICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuTVNHID09ICJZb3UgYXJlIGFscmVhZHkgbG9nZ2VkIGluISIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBodG1sOiAiPGg2PlRoaXMgdXNlciBpcyBhbHJlYWR5IGxvZ2dlZCBpbjwvaDY+IiwKICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLk1TRyA9PSAiSW52YWxpZCBDcmVkZW50aWFscyIpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKICAgICAgICBpZighaXNOYU4obWVzc2FnZS5hbGxvd2VkX2F0dGVtcHRzKSl7CiAgICAgICAgICB0aGlzLmFsbG93ZWRfYXR0ZW1wdHNfcmVtYWluaW5nID0gbWVzc2FnZS5hbGxvd2VkX2F0dGVtcHRzOwogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIGh0bWw6ICI8aDY+SW52YWxpZCBDcmVkZW50aWFscyE8L2g2PiIsCiAgICAgICAgICAgIHRleHQ6IGBZb3UgaGF2ZSAke3RoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmd9IGF0dGVtcHRzIHJlbWFpbmluZyBiZWZvcmUgeW91ciBhY2NvdW50IGdldHMgbG9ja2VkLmAsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIGh0bWw6ICI8aDY+SW52YWxpZCBDcmVkZW50aWFscyE8L2g2PiIsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLk1TRyA9PSAiQVBJIExJTUlUIEVYQ0VFREVEIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICI8aDY+WW91ciBtb250aGx5IGFwaSByZXF1ZXN0cyBoYXMgZXhjZWVkZWQuIFBsZWFzZSBVcGdyYWRlIHlvdXIgcGxhbnMgdG8gbG9naW48L2g2PiIsCiAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5NU0cgPT0gIlBhc3N3b3JkIHNob3VsZCBiZSBSZW5ld2VkIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICI8aDY+WW91ciBwYXNzd29yZCBoYXMgYmVlbiBleHBpcmVkLiBQbGVhc2UgUmVuZXcgeW91ciBwYXNzd29yZDwvaDY+IiwKICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmKEJvb2xlYW4obWVzc2FnZS5pc19zdXBlcl9hZG1pbl9sb2dpbikpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJTdXBlckFkbWluSW50ZXJtZWRpYXRlU2NyZWVuIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBkYXRhOiBtZXNzYWdlLmFsbF91c2Vyc19saXN0CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zdGFydCgpOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJVc2VySW5mb3JtYXRpb24iLCBtZXNzYWdlLnVzZXJpbmZvcm1hdGlvbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoImF0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicnQiLCBtZXNzYWdlLnVzZXJpbmZvcm1hdGlvbi5yZWZyZXNoX3Rva2VuKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxvZ2luX3R5cGUgPT0gIkJvdCIpIHsKICAgICAgICBDb29raWVzLnJlbW92ZSgibG9naW5fdHlwZSIpOwogICAgICAgIENvb2tpZXMuc2V0KCJsb2dpbl90eXBlIiwgdGhpcy5sb2dpbl90eXBlLCB7IGV4cGlyZXM6IDM2NSB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJJbmZvcm1hdGlvbiIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiYXQiLCBtZXNzYWdlLnVzZXJpbmZvcm1hdGlvbi5hY2Nlc3NfdG9rZW4pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJydCIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uLnJlZnJlc2hfdG9rZW4pOwogICAgICAgIHRoaXMuY2hlY2tfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKCdwdXNoX2RpcmVjdF9yZXNwb25zZV9ib3QnKTsKICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCgiL2JvdC9kaXJlY3RyZXNwb25zZWJvdCIpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuTVNHID09ICJVc2VyIElzIExvY2tlZCIpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKICAgICAgICBpZihtZXNzYWdlLmxvY2tlZF9hdCAhPSBudWxsICYmIG1lc3NhZ2UubG9ja2VkX2F0ICE9IHVuZGVmaW5lZCl7CiAgICAgICAgICB0aGlzLmlzX3VzZXJfbG9ja2VkID0gdHJ1ZTsKICAgICAgICAgIC8vIHRoaXMudXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkID0gbW9tZW50KG1vbWVudChuZXcgRGF0ZShtZXNzYWdlLmxvY2tlZF9hdCkpLmFkZCgxLCAnZCcpKS5mb3JtYXQoIk1NTSBEbywgaDptbSBhIik7CiAgICAgICAgICB0aGlzLnVzZXJfbG9ja2VkX2RhdGVfYWxsb3dlZCA9IG1vbWVudChtb21lbnQobmV3IERhdGUobWVzc2FnZS5sb2NrZWRfYXQpKS5hZGQoMSwgJ2QnKSkuY2FsZW5kYXIoKTsgCiAgICAgICAgfQogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRpdGxlOiAiQWNjb3VudCBMb2NrZWQhIiwKICAgICAgICAgIGh0bWw6IGBUaGlzIHVzZXIgaGFzIGJlZW4gbG9ja2VkIGZvciBleGNlZWRpbmcgdGhlIGFsbG93ZWQgbnVtYmVyIG9mIGZhaWxlZCBsb2dpbiBhdHRlbXB0cy4gUGxlYXNlIHRyeSBhZ2FpbiAke3RoaXMudXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkfS4gPGEgaHJlZj0ibWFpbHRvOnN1cHBvcnRAY2Vuc2UuYWk/c3ViamVjdD1IZWxwJTIwUmVxdWlyZWQlMjAtJTIwQ2Vuc2UlMjBQb3J0YWwlMjBBY2NvdW50JTIwTG9ja2VkIiBjbGFzcz0iY3RjdC11cyI+Q29udGFjdCBVczwvYT4gaWYgeW91IHRoaW5rIHRoaXMgd2FzIGEgbWlzdGFrZS5gLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBDb29raWVzLnJlbW92ZSgibG9naW5fdHlwZSIpOwogICAgICAgIENvb2tpZXMuc2V0KCJsb2dpbl90eXBlIiwgdGhpcy5sb2dpbl90eXBlLCB7IGV4cGlyZXM6IDM2NSB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJJbmZvcm1hdGlvbiIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicmV0YWlsX3dlYl9mcmFtZXdvcmsiLCBtZXNzYWdlLnJldGFpbF93ZWJfZnJhbWV3b3JrKTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJvdF9yZXNwb25zZV90b2tlbigpLCB7CiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJCb3RUb2tlbiIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnJlbW92ZSgiVGVtcG9yYXJ5Qm90VG9rZW4iKTsKICAgICAgICAgICAgYnVzLiRlbWl0KCJUb2tlbiBjaGFuZ2VkIiwgIlRydWUiKTsKICAgICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJVc2VyRmlyc3ROYW1lIiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24uZmlyc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJMYXN0TmFtZSIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uLmxhc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoInJ0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24ucmVmcmVzaF90b2tlbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoImF0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiUmVzdHJpY3Rpb25MaXN0IiwgbWVzc2FnZS5yZXN0cmljdGlvbl9saXN0KTsKICAgICAgICBkb2N1bWVudC5jb29raWUgPQogICAgICAgICAgImNvbXBhbnlfaWQ9IiArIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9CiAgICAgICAgICAiY29tcGFueV9uYW1lPSIgKyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IAogICAgICAgICAgImNvbXBhbnlfZW1haWw9IiArIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbDsgCiAgICAgICAgdGhpcy5sb2dpbl9idXR0b25fc3Bpbm5lciA9IHRydWU7CiAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwaW5uZXIiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgIHRoaXMuY2hlY2tfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKG51bGwsIG1lc3NhZ2UubWVudWJpbmQpOwogICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIC8vIHRoaXMudXBkYXRlX21lbnVfbGlzdChtZXNzYWdlLm1lbnViaW5kKTsKICAgICAgICAvLyB9LCAxMDApOwogICAgICB9CiAgICAgIGlmKHJlc2V0X2ZpZWxkcyl7CiAgICAgICAgdGhpcy51c2VyLmVtYWlsID0gIiI7CiAgICAgIH0KICAgICAgdGhpcy51c2VyLnBhc3N3b3JkID0gIiI7CiAgICB9LAogICAgY2hlY2tfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKHBhcmFtLCBtZW51KSB7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldChhcGlfY2FsbHMub3Blbl9ib3RfdGVtcGxhdGVfc3Vic2NyaXB0aW9uX2FwaSgpLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIH0sCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgIHRoaXMub3Blbl9ib3RfYXBpX3Jlc3BvbnNlX3JlY2VpdmVkID0gdHJ1ZTsKICAgICAgICAgIGlmIChwYXJhbSA9PT0gbnVsbCl7CiAgICAgICAgICAgIHRoaXMudXBkYXRlX21lbnVfbGlzdChtZW51KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKGRhdGEuc3RhdHVzID09PSAiU3VjY2VzcyIpewogICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiQm90VGVtcGxhdGVzIiwgZGF0YS50ZW1wbGF0ZXMpCiAgICAgICAgICAgIGlmKHBhcmFtID09PSAncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90Jyl7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICBuYW1lOiAiRGlyZWN0IFJlc3BvbnNlIEJvdCIsCiAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgIHJlbG9hZDogdHJ1ZQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmKHBhcmFtID09PSAncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90Jyl7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICBuYW1lOiAiRGlyZWN0IFJlc3BvbnNlIEJvdCIsCiAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgIHJlbG9hZDogdHJ1ZQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaCgoZSk9PiB7CiAgICAgICAgICB0aGlzLm9wZW5fYm90X2FwaV9yZXNwb25zZV9yZWNlaXZlZCA9IHRydWU7CiAgICAgICAgICBpZiAocGFyYW0gPT09IG51bGwpewogICAgICAgICAgICB0aGlzLnVwZGF0ZV9tZW51X2xpc3QobWVudSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZihwYXJhbSA9PT0gJ3B1c2hfZGlyZWN0X3Jlc3BvbnNlX2JvdCcpewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgbmFtZTogIkRpcmVjdCBSZXNwb25zZSBCb3QiLAogICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUKICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjYWxsX2FwaSgpIHsKICAgICAgdGhpcy51c2VyLmRhdGUgPSBtb21lbnQoKS50b0lTT1N0cmluZygpOwogICAgICB0aGlzLmFsbG93ZWRfYXR0ZW1wdHNfcmVtYWluaW5nID0gMDsKICAgICAgdGhpcy5pc191c2VyX2xvY2tlZCA9IGZhbHNlOwogICAgICB0aGlzLnVzZXJfbG9ja2VkX2RhdGVfYWxsb3dlZCA9IG51bGw7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmxvZ2luKCksIHRoaXMudXNlcikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMucmVkaXIocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGlubmVyIikuc3R5bGUub3BhY2l0eSA9ICIwIjsKICAgICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIGh0bWw6ICI8aDQ+U29tZSBFcnJvciBPY2N1cnJlZC48YnI+UGxlYXNlIFRyeSBBZ2FpbiE8L2g0PiIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIHRvYXN0ci5lcnJvcigiVGhlcmUgaXMgYW4gaW50ZXJuYWwgc2VydmVyIGVycm9yLiIpOwogICAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZV9tZW51X2xpc3QobWVzc2FnZSkgewogICAgICBsZXQgbWVudSA9IHt9OwogICAgICBsZXQgbWFpbl9tZW51X2xpc3QgPSBtZXNzYWdlLmZpbHRlcigKICAgICAgICAoYXJyKSA9PiBhcnIuSXNNYXN0ZXJNZW51ID09IHRydWUgJiYgYXJyLkVuYWJsZWQgPT0gdHJ1ZQogICAgICApOwogICAgICBsZXQgbWFpbl9tZW51X2xpc3RfZmlsdGVyZWQgPSBbXTsKICAgICAgbGV0IHN1Yl9tZW51X2xpc3QgPSBtZXNzYWdlLmZpbHRlcigKICAgICAgICAoYXJyKSA9PgogICAgICAgICAgYXJyLkhhc1N1Yk1lbnVzID09IGZhbHNlICYmCiAgICAgICAgICBhcnIuRW5hYmxlZCA9PSB0cnVlICYmCiAgICAgICAgICBhcnIuSXNTdWJNZW51ID09IHRydWUKICAgICAgKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gbWFpbl9tZW51X2xpc3QubGVuZ3RoOyBpIDwgbjsgaSArPSAxKSB7CiAgICAgICAgbGV0IG1lbnVGaWx0ZXIgPSBzaWRlYmFyaXRlbXMuZmlsdGVyKChzaWRlYmFyKSA9PiB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBzaWRlYmFyLm5hbWUgPT09IG1haW5fbWVudV9saXN0W2ldLk1lbnVJdGVtICYmCiAgICAgICAgICAgIEJvb2xlYW4oc2lkZWJhci5zdmdfaHRtbCkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKG1lbnVGaWx0ZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgbWFpbl9tZW51X2xpc3RfZmlsdGVyZWQucHVzaChtZW51RmlsdGVyWzBdKTsKICAgICAgICAgIG1lbnVbbWVudUZpbHRlclswXS5uYW1lXSA9IHsKICAgICAgICAgICAgbWFpbl9tZW51OiBtZW51RmlsdGVyWzBdLAogICAgICAgICAgICBzdWJfbWVudV9saXN0OiBbXSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBzdWJfbWVudV9saXN0Lmxlbmd0aDsgaSA8IG47IGkgKz0gMSkgewogICAgICAgICAgZm9yICh2YXIgaiBpbiBzaWRlYmFyaXRlbXMpIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHNpZGViYXJpdGVtc1tqXS5uYW1lID09PSBzdWJfbWVudV9saXN0W2ldLk1lbnVJdGVtICYmCiAgICAgICAgICAgICAgQm9vbGVhbihzaWRlYmFyaXRlbXNbal0ucGFnZV9wYXRoICYmIHNpZGViYXJpdGVtc1tqXS5tYXN0ZXJfbWVudSA9PT0gc3ViX21lbnVfbGlzdFtpXS5NYXN0ZXJNZW51KQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBtZW51W3N1Yl9tZW51X2xpc3RbaV0uTWFzdGVyTWVudV0uc3ViX21lbnVfbGlzdC5wdXNoKAogICAgICAgICAgICAgICAgc2lkZWJhcml0ZW1zW2pdCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIC8vIGRlYnVnZ2VyOwogICAgICB9CiAgICAgIG1lbnUgPSBPYmplY3QudmFsdWVzKG1lbnUpOwoKICAgICAgLy8gZm9yIChsZXQgaSA9IDAsIG4gPSBtZXNzYWdlLmxlbmd0aDsgaSA8IG47IGkgKz0gMSkgewogICAgICAvLyAgIGlmIChtZXNzYWdlW2ldLkVuYWJsZWQgJiYgbWVzc2FnZVtpXS5Jc01hc3Rlck1lbnUpIHsKICAgICAgLy8gICAgIGxldCBtZW51RmlsdGVyID0gc2lkZWJhcml0ZW1zLmZpbHRlcigoc2lkZWJhcikgPT4gewogICAgICAvLyAgICAgICByZXR1cm4gKAogICAgICAvLyAgICAgICAgIHNpZGViYXIubmFtZSA9PT0gbWVzc2FnZVtpXS5NZW51SXRlbSAmJiBCb29sZWFuKHNpZGViYXIuc3ZnX2h0bWwpCiAgICAgIC8vICAgICAgICk7CiAgICAgIC8vICAgICB9KTsKICAgICAgLy8gICAgIGlmIChtZW51RmlsdGVyLmxlbmd0aCA+IDApIHsKICAgICAgLy8gICAgICAgbWFpbl9tZW51ID0gbWVudUZpbHRlclswXTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9IGVsc2UgaWYgKAogICAgICAvLyAgICAgbWVzc2FnZVtpXS5IYXNTdWJNZW51cyA9PSBmYWxzZSAmJgogICAgICAvLyAgICAgbWVzc2FnZVtpXS5FbmFibGVkICYmCiAgICAgIC8vICAgICBtZXNzYWdlW2ldLklzU3ViTWVudSAmJgogICAgICAvLyAgICAgT2JqZWN0LmtleXMobWFpbl9tZW51KS5sZW5ndGggPiAwCiAgICAgIC8vICAgKSB7CiAgICAgIC8vICAgICBmb3IgKHZhciBqIGluIHNpZGViYXJpdGVtcykgewogICAgICAvLyAgICAgICBpZiAoCiAgICAgIC8vICAgICAgICAgc2lkZWJhcml0ZW1zW2pdLm5hbWUgPT09IG1lc3NhZ2VbaV0uTWVudUl0ZW0gJiYKICAgICAgLy8gICAgICAgICBCb29sZWFuKHNpZGViYXJpdGVtc1tqXS5wYWdlX3BhdGgpCiAgICAgIC8vICAgICAgICkgewogICAgICAvLyAgICAgICAgIHN1Ym1lbnVzLnB1c2goc2lkZWJhcml0ZW1zW2pdKTsKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0KICAgICAgLy8gICBpZiAoCiAgICAgIC8vICAgICBpID09IG4gLSAxIHx8CiAgICAgIC8vICAgICAobWVzc2FnZVtpXS5Jc01hc3Rlck1lbnUgPT0gdHJ1ZSAmJgogICAgICAvLyAgICAgICBtZXNzYWdlW2ldLkhhc1N1Yk1lbnVzID09PSBmYWxzZSAmJgogICAgICAvLyAgICAgICAhQm9vbGVhbihtZXNzYWdlW2ldLklzU3ViTWVudSkgJiYKICAgICAgLy8gICAgICAgbWVzc2FnZVtpXS5FbmFibGVkKQogICAgICAvLyAgICkgewogICAgICAvLyAgICAgbWVudS5wdXNoKHsKICAgICAgLy8gICAgICAgbWFpbl9tZW51OiBtYWluX21lbnUsCiAgICAgIC8vICAgICAgIHN1Yl9tZW51X2xpc3Q6IHN1Ym1lbnVzLAogICAgICAvLyAgICAgfSk7CiAgICAgIC8vICAgICBtYWluX21lbnUgPSBbXTsKICAgICAgLy8gICAgIHN1Ym1lbnVzID0gW107CiAgICAgIC8vICAgfSBlbHNlIGlmICgKICAgICAgLy8gICAgIGkgPCBuIC0gMSAmJgogICAgICAvLyAgICAgbWVzc2FnZVtpICsgMV0uSXNNYXN0ZXJNZW51ICYmCiAgICAgIC8vICAgICAoIUJvb2xlYW4obWVzc2FnZVtpICsgMV0uSXNTdWJNZW51KSB8fAogICAgICAvLyAgICAgICBtZXNzYWdlW2kgKyAxXS5IYXNTdWJNZW51cyA9PSB0cnVlKSAmJgogICAgICAvLyAgICAgT2JqZWN0LmtleXMobWFpbl9tZW51KS5sZW5ndGggPiAwCiAgICAgIC8vICAgKSB7CiAgICAgIC8vICAgICBtZW51LnB1c2goewogICAgICAvLyAgICAgICBtYWluX21lbnU6IG1haW5fbWVudSwKICAgICAgLy8gICAgICAgc3ViX21lbnVfbGlzdDogc3VibWVudXMsCiAgICAgIC8vICAgICB9KTsKICAgICAgLy8gICAgIG1haW5fbWVudSA9IFtdOwogICAgICAvLyAgICAgc3VibWVudXMgPSBbXTsKICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIkNoYXRib3RNZW51IiwgbWVudSk7CiAgICAgIC8vIHdoaWxlICghdGhpcy5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYm90L2Rhc2hib2FyZCIpOwogICAgICAvLyB9CiAgICB9LAogIH0sCn07Cg=="},null]}