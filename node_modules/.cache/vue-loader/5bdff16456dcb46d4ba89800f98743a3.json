{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue","mtime":1660042032551},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBTY3JpcHQgfSBmcm9tICJ2bSI7CmltcG9ydCB7IHRydW5jYXRlIH0gZnJvbSAiZnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1fbGlzdDogW10sCiAgICAgIGNoZWNrZWRfbGlzdDogW10sCiAgICAgIGZpbGVfbGFiZWw6IG51bGwsCiAgICAgIGFkZF9lZGl0OiB0cnVlLAogICAgICBkZWxldGVfbGlzdDogW10sCiAgICAgIHRyYXZlbDogWzAsIDEsIDJdLAogICAgICBlZGl0X2luZGV4OiBudWxsLAogICAgICBkb2NfaWQ6ICIiLAogICAgICBvbGRfZmlsZV9uYW1lOiAiIiwKICAgICAgcHJvZHVjdF9uYW1lOiAiIiwKICAgICAgY3N2ZmlsZTogIiIsCiAgICAgIGNzdmZpbGVuYW1lOiAiQ2hvb3NlIENTViBGaWxlIiwKICAgICAgZWRpdHByb2R1Y3RuYW1lOiBmYWxzZSwKICAgICAgZWRpdGNzdmZpbGU6IGZhbHNlLAogICAgICBwYWdlX25vOiAxLAogICAgICBwZXJfcGFnZTogMTAwLAogICAgICB0b3RhbF9wYWdlczogMCwKICAgICAgcGFnZV9hcnJheTogW10sCiAgICAgIG51bWJlcl9vZl9yb3dzOiAwLAogICAgICBuZXdfcHJvZHVjdDoge30sCiAgICAgIGlzZWRpdHByb2R1Y3RpZDogZmFsc2UsCiAgICAgIGlzZWRpdGNhdGVnb3J5bmFtZTogZmFsc2UsCiAgICAgIHZpZXd1cmw6IG51bGwsCiAgICAgIGNvbF9saXN0OiBbXSwKICAgICAgY29sX2xlbmd0aDogMCwKICAgICAgaXNvazogZmFsc2UsCiAgICAgIGNvbF9rZXk6IFtdLAogICAgICAvLyBzZWFyY2hfYnk6ICcnLAogICAgICBzZWFyY2hfbmFtZTogIiIsCiAgICAgIHNlbGVjdF9saXN0OiBbXSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBheGlvcwogICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGlzZ2V0Y3N2OiB0cnVlLAogICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UKICAgICAgfSx7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIHJlc3BvbnNlLmRhdGEuTVNHID09ICJObyBQcm9kdWN0cyBBZGRlZCBZZXQiIHx8CiAgICAgICAgICByZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiIHx8CiAgICAgICAgICByZXNwb25zZS5kYXRhLmNzdmZpbGUubGVuZ3RoID09IDAKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuZm9yZGVmYXVsdCgpOwogICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5jc3ZmaWxlLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5pdGVtTGlzdChyZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIHZhciB2bSA9IHRoaXM7CiAgICAvLyAkKCIjc2VsZWN0YWxsIikuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAvLyAgIGlmICgkKHRoaXMpLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAvLyAgICAgLy8gJCgnZGl2OmlucHV0JykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7CiAgICAvLyAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAvLyAgICAgY29uc29sZS5sb2coImhlZWV5Iik7CiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgdm0uY2hlY2tlZF9saXN0ID0gW107CiAgICAvLyAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgLy8gICAgIGNvbnNvbGUubG9nKCJoZWVleTIiKTsKICAgIC8vICAgfQogICAgLy8gfSk7CiAgfSwKICAvLyBjaGVja0FsbChlbGUpIHsKICAvLyAgICAgIHZhciBjaGVja2JveGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0Jyk7CiAgLy8gICAgICBpZiAoZWxlLmNoZWNrZWQpIHsKICAvLyAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrYm94ZXMubGVuZ3RoOyBpKyspIHsKICAvLyAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ZXNbaV0udHlwZSA9PSAnY2hlY2tib3gnKSB7CiAgLy8gICAgICAgICAgICAgICAgICBjaGVja2JveGVzW2ldLmNoZWNrZWQgPSB0cnVlOwogIC8vICAgICAgICAgICAgICB9CiAgLy8gICAgICAgICAgfQogIC8vICAgICAgfSBlbHNlIHsKICAvLyAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrYm94ZXMubGVuZ3RoOyBpKyspIHsKICAvLyAgICAgICAgICAgICAgY29uc29sZS5sb2coaSkKICAvLyAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ZXNbaV0udHlwZSA9PSAnY2hlY2tib3gnKSB7CiAgLy8gICAgICAgICAgICAgICAgICBjaGVja2JveGVzW2ldLmNoZWNrZWQgPSBmYWxzZTsKICAvLyAgICAgICAgICAgICAgfQogIC8vICAgICAgICAgIH0KICAvLyAgICAgIH0KICAvLyAgfSwKICBtZXRob2RzOiB7CiAgICBtYWtlX3RydWUoKSB7CiAgICAgIHRoaXMuaXNvayA9IHRydWU7CiAgICB9LAogICAgZG93bmxvYWRfc2FtcGxlX2ZpbGUoKSB7CiAgICAgIGxldCBzYW1wbGVfY3N2X2ZpbGVfdXJsID0gIiI7CiAgICAgIHdpbmRvdy5vcGVuKHNhbXBsZV9jc3ZfZmlsZV91cmwsICJfYmxhbmsiKTsKICAgIH0sCiAgICBmb3JkZWZhdWx0KCkgewogICAgICAodGhpcy5uZXdfcHJvZHVjdFsiQ2F0ZWdvcnlJZCJdID0gbnVsbCksCiAgICAgICAgKHRoaXMubmV3X3Byb2R1Y3RbIkNhdGVnb3J5TmFtZSJdID0gIiIpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJQcm9kdWN0SWQiXSA9IG51bGwpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJQcm9kdWN0TmFtZSJdID0gIiIpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJQcm9kdWN0VXJsIl0gPSAiIiksCiAgICAgICAgKHRoaXMubmV3X3Byb2R1Y3RbIlByb2R1Y3RJbWFnZVVybCJdID0gIiIpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJRdWFudGl0eSJdID0gbnVsbCksCiAgICAgICAgKHRoaXMubmV3X3Byb2R1Y3RbIlVuaXRQcmljZSJdID0gbnVsbCksCiAgICAgICAgKHRoaXMubmV3X3Byb2R1Y3RbIldlaWdodCJdID0gbnVsbCksCiAgICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJDQVRFR09SWSBJRCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiQ2F0ZWdvcnlJZCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIkNBVEVHT1JZIE5BTUUiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIkNhdGVnb3J5TmFtZSIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgSUQiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlByb2R1Y3RJZCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgTkFNRSIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUHJvZHVjdE5hbWUiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJQUk9EVUNUIFVSTCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUHJvZHVjdFVybCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgSU1BR0UgVVJMIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJQcm9kdWN0SW1hZ2VVcmwiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJRVUFOVElUWSIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUXVhbnRpdHkiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJVTklUIFBSSUNFIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJVbml0UHJpY2UiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJXRUlHSFQiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIldlaWdodCIpOwogICAgICB0aGlzLmNvbF9sZW5ndGggPSA5OwogICAgICB0aGlzLmlzb2sgPSB0cnVlOwogICAgfSwKICAgIGRvd25sb2FkX2NzdigpIHsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgaXNkb3dubG9hZDogdHJ1ZQogICAgICAgIH0sewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHICE9ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHJlc3BvbnNlLmRhdGEuZmlsZWRvd25sb2FkdXJsLCAiX2JsYW5rIik7CiAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKAogICAgICAgICAgICAgICJUcnkgVXBsb2FkaW5nIEZpbGUvUHJvZHVjdCIsCiAgICAgICAgICAgICAgIkVycm9yIE9jY3VyZWQgV2hpbGUgRG93bmxvYWRpbmcgRmlsZSIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hfcHJvZHVjdCgpIHsKICAgICAgLy8gaWYodGhpcy5zZWFyY2hfYnkhPScnKXsKICAgICAgaWYgKHRoaXMuc2VhcmNoX25hbWUgIT0gIiIpIHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgaXNzZWFyY2g6IHRydWUsCiAgICAgICAgICAgIC8vIHNlYXJjaGJ5OiB0aGlzLnNlYXJjaF9ieSwKICAgICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICBwYWdlbm86IHRoaXMucGFnZV9ubwogICAgICAgICAgfSx7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyAhPSAiTk8gUFJPRFVDVFMgRk9VTkQiKSB7CiAgICAgICAgICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLml0ZW1fbGlzdCA9IFtdOwogICAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucHJvZHVjdHMubGVuZ3RoOwogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pdGVtX2xpc3QucHVzaChyZXNwb25zZS5kYXRhLnByb2R1Y3RzW2ldKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2goZmFsc2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLml0ZW1fbGlzdCk7CiAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEuUGFnZUNvdW50OwogICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiTm8gTWF0Y2ggRm91bmQiKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIkVudGVyIHByb3BlciBkYXRhIGZvciBzZWFyY2hpbmciKTsKICAgICAgfQogICAgICAvLyB9ZWxzZXsKICAgICAgLy8gICB0b2FzdHIuZXJyb3IoIlNlbGVjdCBoZWFkZXIgZm9yIHNlYXJjaGluZyIpOwogICAgICAvLyB9CiAgICB9LAogICAgY2hhbmdlX2lkKCkgewogICAgICB0aGlzLmlzZWRpdHByb2R1Y3RpZCA9IHRydWU7CiAgICB9LAogICAgdmlldyhpbmRleCkgewogICAgICB0aGlzLnZpZXd1cmwgPSB0aGlzLml0ZW1fbGlzdFtpbmRleF1bIlByb2R1Y3RJbWFnZVVybCJdOwogICAgfSwKICAgIGl0ZW1MaXN0KG1lc3NhZ2UpIHsKICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IG1lc3NhZ2UuY3N2ZmlsZS5sZW5ndGg7CiAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBtZXNzYWdlLlBhZ2VDb3VudDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmNzdmZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLml0ZW1fbGlzdC5wdXNoKG1lc3NhZ2UuY3N2ZmlsZVtpXSk7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbbWVzc2FnZS5maWVsZHNbaV0ucmVwbGFjZSgiICIsICIiKS5yZXBsYWNlKCIgIiwgIiIpXSA9CiAgICAgICAgICAiIjsKICAgICAgICB0aGlzLmNvbF9saXN0LnB1c2gobWVzc2FnZS5maWVsZHNbaV0pOwogICAgICAgIGlmICgKICAgICAgICAgIG1lc3NhZ2UuZmllbGRzW2ldICE9ICJQcm9kdWN0IFVybCIgJiYKICAgICAgICAgIG1lc3NhZ2UuZmllbGRzW2ldICE9ICJQcm9kdWN0IEltYWdlIFVybCIKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuc2VsZWN0X2xpc3QucHVzaChtZXNzYWdlLmZpZWxkc1tpXSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY29sX2tleS5wdXNoKG1lc3NhZ2UuZmllbGRzW2ldLnJlcGxhY2UoIiAiLCAiIikucmVwbGFjZSgiICIsICIiKSk7CiAgICAgIH0KICAgICAgdGhpcy5jb2xfbGVuZ3RoID0gbWVzc2FnZS5maWVsZHMubGVuZ3RoOwogICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgIH0sCiAgICBkZWxldGVfcHJvZHVjdChpbmRleCkgewogICAgICB0aGlzLmNoZWNrX2xpc3RfYXJyYXkoaW5kZXgpOwogICAgICB0aGlzLmRlbGV0ZV9tdWx0aXBsZV9wcm9kdWN0KCk7CiAgICB9LAogICAgZGVsZXRlX211bHRpcGxlX3Byb2R1Y3QoKSB7CiAgICAgIHZhciBsZW4gPSB0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jaGVja2VkX2xpc3RbaV0pIHsKICAgICAgICAgIHRoaXMuZGVsZXRlX2xpc3QucHVzaCh7CiAgICAgICAgICAgIGlkOiB0aGlzLml0ZW1fbGlzdFtpXS5Eb2N1bWVudElkCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6Ik5vIHByb2R1Y3Qgc2VsZWN0ZWQhIiwKICAgICAgICAgIHRleHQ6IiIsCiAgICAgICAgICB0eXBlOiJlcnJvciIsCiAgICAgICAgICB0aW1lcjoyMDAwLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIGRvY2lkczogdGhpcy5kZWxldGVfbGlzdCwKICAgICAgICAgICAgICAgIGlzZGVsZXRlOiB0cnVlCiAgICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiUHJvZHVjdHMgRGVsZXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IkRlbGV0ZWQhIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiJZb3VyIHByb2R1Y3RzIGhhdmUgYmVlbiBkZWxldGVkLiIsCiAgICAgICAgICAgICAgICAgICAgdHlwZToic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6MjAwMCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZToiRXJyb3IhISIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDoiRXJyb3Igb2NjdXJlZCB3aGlsZSBkZWxldGluZyBmaWxlIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjoyNTAwLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldEZpbGUoZSkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICB0aGlzLmNzdmZpbGVuYW1lID0gZmlsZS5uYW1lOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgIHRoaXMuY3N2ZmlsZSA9IHJlYWRlci5yZXN1bHQ7CiAgICAgIH07CiAgICAgIHRoaXMuZWRpdGNzdmZpbGUgPSB0cnVlOwogICAgfSwKICAgIGNoZWNrX2xpc3RfYXJyYXkoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09ICJhbGwiKSB7CiAgICAgICAgdmFyIHJvbGVfbGVuZ3RoID0gdGhpcy5udW1iZXJfb2Zfcm93czsKICAgICAgICB2YXIgY2hlY2tlZGJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbdHlwZT1jaGVja2JveF0iKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvbGVfbGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0W2ldID0gIXRoaXMuY2hlY2tlZF9saXN0W2ldOwogICAgICAgIH0KICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSByb2xlX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoY2hlY2tlZGJveGVzW2ldLmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICBjaGVja2VkYm94ZXNbaV0uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hlY2tlZGJveGVzW2ldLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdFtpbmRleF0gPSAhdGhpcy5jaGVja2VkX2xpc3RbaW5kZXhdOwogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKHJvbGVfbGVuZ3RoLGNoZWNrZWRib3hlcyx0aGlzLmNoZWNrZWRfbGlzdCk7CiAgICB9LAogICAgZWRpdF9pdGVtKGluZGV4KSB7CiAgICAgIHRoaXMubmV3X3Byb2R1Y3QgPSB7fTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbF9sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9IHRoaXMuaXRlbV9saXN0W2luZGV4XVsKICAgICAgICAgIHRoaXMuY29sX2tleVtpXQogICAgICAgIF07CiAgICAgIH0KICAgICAgdGhpcy5kb2NfaWQgPSB0aGlzLml0ZW1fbGlzdFtpbmRleF0uRG9jdW1lbnRJZDsKICAgICAgdGhpcy5hZGRfZWRpdCA9IGZhbHNlOwogICAgfSwKICAgIGFkZF9jc3ZmaWxlKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy5jc3ZmaWxlbmFtZSA9PSAiIikgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIHNlbGVjdCBjc3YgZmlsZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIGNzdmZpbGVuYW1lOiB0aGlzLmNzdmZpbGVuYW1lLAogICAgICAgICAgICBjc3ZmaWxlZGF0YTogdGhpcy5jc3ZmaWxlLnNwbGl0KCJiYXNlNjQsIilbMV0sCiAgICAgICAgICAgIGlzdXBsb2FkOiB0cnVlCiAgICAgICAgICB9LHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkZpbGUgVXBsb2FkZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJZb3VyIGZpbGUgaGFzIGJlZW4gdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1pc3NpbmdfVmFsdWVzKSB7CiAgICAgICAgICAgICAgdmFyIG1zZyA9ICIiOwogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5NaXNzaW5nX1ZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbXNnID0gbXNnLmNvbmNhdChyZXNwb25zZS5kYXRhLk1pc3NpbmdfVmFsdWVzW2ldLCAiPGJyPiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIk1pc3NpbmcgVmFsdWVzIEluIEFib3ZlIENvbHVtbnMiLCBtc2cpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJFcnJvciBvY2N1cmVkIHdoaWxlIHVwbG9hZGluZyBmaWxlIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkX2l0ZW0oKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGlmICh0aGlzLmFkZF9lZGl0KSB7CiAgICAgICAgbGV0IGlzZmlsbGVkID0gdHJ1ZTsKICAgICAgICBsZXQgaTsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jb2xfbGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dID09ICIiIHx8CiAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9PSBudWxsCiAgICAgICAgICApIHsKICAgICAgICAgICAgaXNmaWxsZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGlzZmlsbGVkKSB7CiAgICAgICAgICBsZXQgeDsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbF9sZW5ndGg7IGkrKykgewogICAgICAgICAgICB4ID0gdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dOwogICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKHgpKSkgewogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9IE51bWJlcigKICAgICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgcHJvZHVjdGRldGFpbHM6IHRoaXMubmV3X3Byb2R1Y3QsCiAgICAgICAgICAgICAgaXNhZGRwcm9kdWN0OiB0cnVlCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIlByb2R1Y3QgQWRkZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlRoZSBwcm9kdWN0IGhhcyBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiRXJyb3Igb2NjdXJlZCB3aGlsZSBhZGRpbmcgcHJvZHVjdCIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIEZpbGwgQWxsIEZpZWxkcyIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHJ1ZSkgewogICAgICAgICAgbGV0IHg7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHggPSB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV07CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHgpOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgaXNOYU4oTnVtYmVyKHgpKSB8fAogICAgICAgICAgICAgIHggPT0gdHJ1ZSB8fAogICAgICAgICAgICAgIHggPT0gZmFsc2UgfHwKICAgICAgICAgICAgICB4ID09ICIiIHx8CiAgICAgICAgICAgICAgeCA9PSBudWxsCiAgICAgICAgICAgICkgewogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9IE51bWJlcigKICAgICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgcHJvZHVjdGRldGFpbHM6IHRoaXMubmV3X3Byb2R1Y3QsCiAgICAgICAgICAgICAgZG9jaWQ6IHRoaXMuZG9jX2lkLAogICAgICAgICAgICAgIGlzZWRpdHByb2R1Y3RpZDogdGhpcy5pc2VkaXRwcm9kdWN0aWQsCiAgICAgICAgICAgICAgaXNlZGl0OiB0cnVlCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIkNoYW5nZXMgQXBwbGllZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiVGhlIHByb2R1Y3QgaGFzIGJlZW4gZWRpdGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiRXJyb3Igb2NjdXJlZCB3aGlsZSBlZGl0aW5nIHByb2R1Y3QiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsZWFyX2ZpZWxkcygpIHsKICAgICAgdGhpcy5uZXdfcHJvZHVjdCA9IHt9OwogICAgICB0aGlzLmVkaXRwcm9kdWN0aWQgPSBmYWxzZTsKICAgIH0sCiAgICBwYWdpbmF0aW9uX2NsYXNzKGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PSB0aGlzLnBhZ2Vfbm8pIHsKICAgICAgICByZXR1cm4gIiBhY3RpdmUiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIGNhbGxzZWFyY2goKSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgewogICAgICAgIHRoaXMuc2VhcmNoX3Byb2R1Y3QoKTsKICAgICAgfQogICAgfSwKICAgIHNldHBhZ2luYXRpb24ocGFnZV9ubykgewogICAgICB0aGlzLnBhZ2VfYXJyYXkgPSBbXTsKICAgICAgaWYgKHRoaXMudG90YWxfcGFnZXMgPD0gNykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gMSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnRvdGFsX3BhZ2VzIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vIDw9IDQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2Vfbm8gKyAzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA+PSB0aGlzLnRvdGFsX3BhZ2VzIC0gNCkgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gMzsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDM7IGkgPD0gcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSk7CiAgICAgICAgfQogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9CiAgICB9LAogICAgcGFnZV9yZXF1aXJlKHBhZ2UpIHsKICAgICAgaWYgKHBhZ2UgPT0gMCB8fCBwYWdlID09IHRoaXMudG90YWxfcGFnZXMgKyAxKSB7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAgICAgaWYgKHRoaXMuc2VhcmNoX25hbWUgIT0gIiIpIHsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgaXNzZWFyY2g6IHRydWUsCiAgICAgICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoX2J5LAogICAgICAgICAgICAgIGtleTogdGhpcy5zZWFyY2hfbmFtZSwKICAgICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLml0ZW1fbGlzdCA9IFtdOwogICAgICAgICAgICAgIHRoaXMuaXNvayA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy5jb2xfbGlzdCA9IFtdOwogICAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5jb2xfa2V5ID0gW107CiAgICAgICAgICAgICAgdGhpcy5jb2xfbGVuZ3RoID0gMDsKICAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1fbGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEucHJvZHVjdHNbaV0pOwogICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLlBhZ2VDb3VudDsKICAgICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgaXNnZXRjc3Y6IHRydWUsCiAgICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgICAgICB9LHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIFByb2R1Y3RzIEFkZGVkIFlldCIgfHwKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIgfHwKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuY3N2ZmlsZS5sZW5ndGggPT0gMAogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy5mb3JkZWZhdWx0KCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLmNzdmZpbGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1fbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5jb2xfbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5jb2xfa2V5ID0gW107CiAgICAgICAgICAgICAgICB0aGlzLmNvbF9sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgdGhpcy5pdGVtTGlzdChyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsK"},null]}