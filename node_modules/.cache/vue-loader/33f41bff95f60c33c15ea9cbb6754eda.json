{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/DefineEndpoints.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/DefineEndpoints.vue","mtime":1643027096168},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHsgc2V0VGltZW91dCB9IGZyb20gInRpbWVycyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNvbmZpZy1hcGkiLAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dfb3JfYmxvY2s6IGZhbHNlLAogICAgICBpbnRlbnRsaXN0OiBbXSwKICAgICAgcXVlc3Rpb246ICIiLAogICAgICB1cmw6ICIiLAogICAgICBuYW1lOiBudWxsLAogICAgICBhcGlfbGlzdDogW10sCiAgICAgIGNvbXBhbnluYW1lOiBudWxsLAogICAgICBjb21wYW55aWQ6IG51bGwsCiAgICAgIGluZGV4OiBudWxsLAogICAgICB0b3RhbF9wYWdlczogIiIsCiAgICAgIHNob3dfanNvbl9yZXF1ZXN0X2RhdGE6ICIiLAogICAgICBzaG93X2pzb25fcmVzcG9uc2VfZGF0YTogIiIsCiAgICAgIHN1Y2Nlc3NmdWxfbWVzc2FnZTogIiIsCiAgICAgIGpzb25fcmVxdWVzdF9kYXRhOiBbXSwKICAgICAganNvbl9yZXNwb25zZV9kYXRhOiBbXSwKICAgICAgdHlwZTogbnVsbCwKICAgICAgdGFza19mcm9tOiAiIiwKICAgICAgZW50aXR5X2xpc3Q6IFtdLAogICAgICBwb3N0X21ldGhvZF9yZXF1ZXN0X2xpc3Q6IFtdLAogICAgICBwb3N0X21ldGhvZF9yZXF1ZXN0X3ZhbHVlOiAiIiwKICAgICAgYXBpX21ldGhvZDogbnVsbCwKICAgICAgcmVzcG9uc2Vfa2V5X2VkaXRfbWVzc2FnZTogIiIsCiAgICAgIGVuZHVzZXJfbXNnX3R5cGU6IG51bGwsCiAgICAgIHVuc3VjY2Vzc2Z1bF9tZXNzYWdlOiBudWxsLAogICAgICByZXF1ZXN0X2pzb25fZWRpdGFibGU6IG51bGwsCiAgICAgIHJlc3BvbnNlX2pzb25fZWRpdGFibGU6IG51bGwsCiAgICAgIGVuZF91c2VyX21lc3NhZ2U6IG51bGwsCiAgICAgIGVkaXRhYmxlX3ZhbHVlczogIiIsCiAgICAgIGNoZWNrZWRfbGlzdDogW10sCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIGludGVudHM6ICIiLAogICAgICBwYWdlX25vOiAxLAogICAgICBwZXJfcGFnZTogMTAsCiAgICAgIHNwaW5uZXJPbjogZmFsc2UsCiAgICAgIHVzZXJfcm9sZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUsCiAgICAgIHJlcXVlc3RfanNvbl9jYXNlXzE6IGB7CiAgICAgICAgICAiY29tcGFueWlkIjogIjxDb21wYW55X0lEPiIsCiAgICAgICAgICAiZW1haWwiOiAiPEVtYWlsPiIsCiAgICAgICAgICAicm9sZSI6ICI8Um9sZT4iLAogICAgICAgICAgInN1YmplY3QiOiAiICIsCiAgICAgICAgICAiZGVzY3JpcHRpb24iOiAiICIKfWAsCgogICAgICBpbnB1dF9mcm9tX3VzZXJfY2FzZV8xOiAic3ViamVjdDtkZXNjcmlwdGlvbiIsCiAgICAgIHJlcXVlc3RfanNvbl9jYXNlXzI6IGB7CgkidXNlciI6IHsKCQkiY29tcGFueWlkIjogIjxDb21wYW55X0lEPiIsCiAgICAiZW1haWwiOiAiPEVtYWlsPiIsCiAgICAicm9sZSI6ICI8Um9sZT4iLAoJCSJpbmZvIjogewoJCQkibmlja25hbWUiOiAiIgoJCX0KCX0sCgkic2VhcmNocGFyYW1ldGVyIjogewoJCSJzdGF0dXMiOiAiIiwKCQkib3JkZXJieSI6ICIiLAoJCSJmcm9tZGF0ZSI6ICIwMS8wMS8yMDE4IiwKCQkiY291bnQiOiAxMCwKCQkic2VhcmNodGV4dCI6ICIiLAoJCSJ0eXBlb2Z2aXNpdCI6ICJBTEwiLAoJCSJzb3J0b3JkZXIiOiAiYXBwb2ludG1lbnQiLAoJCSJzdGFydGluZGV4IjogIjEiLAoJCSJlbmRpbmRleCI6ICIxMCIsCgkJInRvZGF0ZSI6ICIwOC8wNi8yMDE4IgoJfQoKfWAsCiAgICAgIGlucHV0X2Zyb21fdXNlcl9jYXNlXzI6CiAgICAgICAgInVzZXIsaW5mbyxuaWNrbmFtZTtzZWFyY2hwYXJhbWV0ZXIsZnJvbWRhdGU7c2VhcmNocGFyYW1ldGVyLHRvZGF0ZSIsCiAgICAgIHJlcXVlc3RfanNvbl9jYXNlXzM6IGB7IAogICAgICAgICAgImNvbXBhbnlpZCI6InNlc3Npb24uZ2V0KCdjb21wYW55aWQnKSIsCiAgICAgICAgICAiZW1haWwiOiJzZXNzaW9uLmdldCgnZW1haWwnKSIsCiAgICAgICAgICAicm9sZSI6InNlc3Npb24uZ2V0KCdyb2xlJykiIAp9YCwKICAgICAgcmVzcG9uc2VfanNvbl9jYXNlXzE6IGB7CiAgJ21lc3NhZ2UnOidZb3VyIGFwcG9pbnRtZW50IGhhcyBiZWVuIHNjaGVkdWxlZCcsCiAgJ3VzZXJuYW1lJzonQ2Vuc2UnLAogICdlbWFpbCc6J3VzZXJAY2Vuc2UuYWknCn1gLAogICAgICByZXNwb25zZV9qc29uX2Nhc2VfMTE6IGB7CiAgJ21lc3NhZ2UnOidBUEkgZXhlY3V0ZWQgc3VjY2Vzc2Z1bGx5JywKICAnY291bnQnOic4JwogICd1c2VybmFtZSc6J0NlbnNlJywKICAnZW1haWwnOid1c2VyQGNlbnNlLmFpJwp9YCwKICAgICAgY3VycmVudF9zdGVwOiAxLAogICAgICB0b3RhbF9zdGVwczogMiwKICAgICAgLy8gdGFza19uYW1lOiAiIiwKICAgICAgdGFza19pbnB1dF92YWx1ZXM6IFtdLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAoCiAgICAgICF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikgJiYKICAgICAgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iCiAgICApIHsKICAgICAgdG9hc3RyLndhcm5pbmcoIlBsZWFzZSBzZWxlY3QgYSBjb21wYW55IG5hbWUgZnJvbSB0aGUgZHJvcGRvd24iKTsKICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3JvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlOYW1lIik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgIH0KICAgIGF4aW9zCiAgICAgIC5nZXQoYXBpX2NhbGxzLmdldF9uZXJfdGFncygpLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5lbnRpdHlfbGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5wb3N0X21ldGhvZF9yZXF1ZXN0X2xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICB9KQogICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICBpZiAoCiAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICBheGlvcwogICAgICAucG9zdCgKICAgICAgICBhcGlfY2FsbHMuZ2V0X2xpc3RfbGluaygpLAogICAgICAgIHsKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgfSwKICAgICAgICB9CiAgICAgICkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5hcGlfbGlzdF91cGRhdGUocmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIGF4aW9zCiAgICAgIC5wb3N0KAogICAgICAgIGFwaV9jYWxscy5zaG93X2ludGVudHNfdXJsKCksCiAgICAgICAgewogICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgIHNob3dpbnRlbnQ6ICJUcnVlIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIHRoaXMuaW50ZW50bGlzdC5wdXNoKAogICAgICAgICAgICByZXNwb25zZS5kYXRhW2ldLnJlcGxhY2UodGhpcy5jb21wYW55aWQgKyAiXyIsICIiKQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAkKCdbZGF0YS10b29sdGlwPSJ0b29sdGlwIl0nKS50b29sdGlwKCk7CiAgICB2YXIgdm0gPSB0aGlzOwogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIHZtID0gdGhpczsKICAgICQoIiNjb25maWdhcGltb2RhbDQiKS5vbigic2hvd24uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCIjY29uZmlnYXBpbW9kYWwiKS5jc3MoIm9wYWNpdHkiLCAiLTAuNSIpOwogICAgfSk7CiAgICAkKCIjY29uZmlnYXBpbW9kYWw0Iikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICQoIiNjb25maWdhcGltb2RhbCIpLmNzcygib3BhY2l0eSIsICIxIik7CiAgICB9KTsKICAgICQoIiNjb25maWdhcGltb2RhbDIiKS5vbigic2hvd24uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCIjY29uZmlnYXBpbW9kYWwiKS5jc3MoIm9wYWNpdHkiLCAiLTAuNSIpOwogICAgfSk7CiAgICAkKCIjY29uZmlnYXBpbW9kYWwyIikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICQoIiNjb25maWdhcGltb2RhbCIpLmNzcygib3BhY2l0eSIsICIxIik7CiAgICB9KTsKICAgICQoIiNjb25maWdhcGltb2RhbF9qc29uX2VkaXRhYmxlIikub24oInNob3duLmJzLm1vZGFsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI2NvbmZpZ2FwaW1vZGFsIikuY3NzKCJvcGFjaXR5IiwgIi0wLjUiKTsKICAgIH0pOwogICAgJCgiI2NvbmZpZ2FwaW1vZGFsX2pzb25fZWRpdGFibGUiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI2NvbmZpZ2FwaW1vZGFsIikuY3NzKCJvcGFjaXR5IiwgIjEiKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlX3RvdGFsX3N0ZXBzKHN0ZXBfdmFsdWUpIHsKICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAiVHJ1ZSIpIHsKICAgICAgICB0aGlzLnRvdGFsX3N0ZXBzID0gMzsKICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gIkZhbHNlIikgewogICAgICAgIHRoaXMudG90YWxfc3RlcHMgPSAyOwogICAgICB9IGVsc2UgaWYgKHN0ZXBfdmFsdWUgPT0gMyAmJiB0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiRmFsc2UiKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3N0ZXAgPSAxOwogICAgICB9IGVsc2UgaWYgKHN0ZXBfdmFsdWUgPiAxICYmIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJUcnVlIikgewogICAgICAgIHRoaXMuY3VycmVudF9zdGVwIC09IDE7CiAgICAgIH0KICAgIH0sCiAgICByZXFfanNvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBKU09OLnBhcnNlKHRoaXMuc2hvd19qc29uX3JlcXVlc3RfZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgdHJhaW5faW50ZW50X21vZGVsKCkgewogICAgICBTd2FsKHsKICAgICAgICB0aXRsZTogIkFyZSBZb3UgU3VyZT8iLAogICAgICAgIHRleHQ6ICJZb3Ugd2FudCB0byBUcmFpbiBUaGUgTW9kZWw/IiwKICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiLAogICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgIGFwaV9jYWxscy50cmFpbl9jb252ZXJzYXRpb25fbW9kZWxzKCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICAgIGNvbXBhbnlfZGV0YWlsczogewogICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0dfQ09ERSA9PT0gNDA0NikgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MocmVzcG9uc2UuZGF0YS5NU0cpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0dfQ09ERSA9PT0gMTAzNCkgewogICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHJlc3BvbnNlLmRhdGEuTVNHKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZV9hcGkoaW50ZW50bGlzdCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgZGVsZXRlISEiLAogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMuZGVsZXRlX2FwaV91cmwoKSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgaW50ZW50X2xpc3Q6IGludGVudGxpc3QsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiUXVlcnkgRXhlY3V0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIkFQSXMgaGF2ZSBiZWVuIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZV9pbmRpdmlkdWFsKGluZGV4KSB7CiAgICAgIGxldCBpbnRlbnRsaXN0ID0gW107CiAgICAgIGludGVudGxpc3QucHVzaCh0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuYXBpX2xpc3RbaW5kZXhdLmludGVudCk7CiAgICAgIHRoaXMuZGVsZXRlX2FwaShpbnRlbnRsaXN0KTsKICAgIH0sCiAgICBkZWxldGVfc2VsZWN0ZWQoKSB7CiAgICAgIGxldCBpbnRlbnRsaXN0ID0gW107CiAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZToiTm8gZW5kcG9pbnQgc2VsZWN0ZWQhIiwKICAgICAgICAgIHRleHQ6IiIsCiAgICAgICAgICB0eXBlOiJlcnJvciIsCiAgICAgICAgICB0aW1lcjoyMDAwLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5jaGVja2VkX2xpc3QpIHsKICAgICAgICAgIGludGVudGxpc3QucHVzaCh0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuY2hlY2tlZF9saXN0W2ldLmludGVudCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVsZXRlX2FwaShpbnRlbnRsaXN0KTsKICAgICAgfQogICAgfSwKICAgIGVkaXRfYXBpKGluZGV4KSB7CiAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKICAgICAgdGhpcy5xdWVzdGlvbiA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnF1ZXN0aW9uOwogICAgICB0aGlzLmludGVudHMgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5pbnRlbnQ7CiAgICAgIHRoaXMuYXBpX21ldGhvZCA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLm1ldGhvZDsKICAgICAgdGhpcy5lZGl0YWJsZV92YWx1ZXMgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5lZGl0YWJsZV92YWx1ZXM7CiAgICAgIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID0gdGhpcy5hcGlfbGlzdFtpbmRleF0uZWRpdGFibGU7CiAgICAgIGlmICh0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIpIHsKICAgICAgICB0aGlzLnRvdGFsX3N0ZXBzID0gMzsKICAgICAgfQogICAgICB0aGlzLnVybCA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnVybDsKICAgICAgdGhpcy5zaG93X2pzb25fcmVxdWVzdF9kYXRhID0gdGhpcy5hcGlfbGlzdFtpbmRleF0ucmVxX2pzb247CiAgICAgIHRoaXMuc2hvd19qc29uX3Jlc3BvbnNlX2RhdGEgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5yZXNwX2pzb247CiAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLm1lc3NhZ2VfdHlwZTsKICAgICAgdGhpcy5lbmRfdXNlcl9tZXNzYWdlID0gdGhpcy5hcGlfbGlzdFtpbmRleF0uZW5kX3VzZXJfbWVzc2FnZTsKICAgICAgdGhpcy5zdWNjZXNzZnVsX21lc3NhZ2UgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5yZXNwb25zZV9rZXk7CiAgICAgIHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnJlc3BvbnNlX2tleV9lZGl0YWJsZTsKICAgICAgdGhpcy5yZXNwb25zZV9rZXlfZWRpdF9tZXNzYWdlID0gdGhpcy5hcGlfbGlzdFsKICAgICAgICBpbmRleAogICAgICBdLnJlc3BvbnNlX2tleV9tZXNzYWdlOwogICAgICB0aGlzLnVuc3VjY2Vzc2Z1bF9tZXNzYWdlID0gdGhpcy5hcGlfbGlzdFsKICAgICAgICBpbmRleAogICAgICBdLnJlc3BvbnNlX2tleV91bnN1Y2Nlc3NmdWw7CiAgICAgIC8vIHRoaXMudGFza19uYW1lID0gdGhpcy5hcGlfbGlzdFtpbmRleF0udGFza19uYW1lOwogICAgICBmb3IgKHZhciBpIGluIHRoaXMuYXBpX2xpc3RbaW5kZXhdLnRhc2tzX2xpc3QpIHsKICAgICAgICB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzLnB1c2goewogICAgICAgICAga2V5X25hbWU6IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnRhc2tzX2xpc3RbaV0uUmF3U2xvdE5hbWUsCiAgICAgICAgICBpbnB1dF90ZXh0OiB0aGlzLmFwaV9saXN0W2luZGV4XS50YXNrc19saXN0W2ldLlRleHQsCiAgICAgICAgICBkcm9wZG93bl92YWx1ZTogIiIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZF9saXN0KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PSAiYWxsIikgewogICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCA9PSB0cnVlKSB0aGlzLmNoZWNrZWRfbGlzdCA9IHRoaXMuYzsKICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCA9PSBmYWxzZSkgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgbGV0IHZhbF9pbmRleCA9IHRoaXMuY2hlY2tlZF9saXN0LmluZGV4T2YodGhpcy5hcGlfbGlzdFtpbmRleF0pOwogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLmFwaV9saXN0W2luZGV4XTsKICAgICAgICAgIGlmICh2YWxfaW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IGZhbHNlKSB7CiAgICAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwogICAgICAgICAgaWYgKHNlbGVjdGFsbC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgc2VsZWN0YWxsLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5jaGVja2VkX2xpc3QuZmlsdGVyKChhcGlfbGlzdCkgPT4gewogICAgICAgICAgICByZXR1cm4gYXBpX2xpc3QuYXBpX2xpc3QgIT09IGluZGV4OwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IHRlbXA7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYWRkX2FwaShjdXJyZW50X3N0ZXApIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKGN1cnJlbnRfc3RlcCA9PSAxKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5xdWVzdGlvbiA9PSAiIiB8fAogICAgICAgICAgdGhpcy51cmwgPT0gIiIgfHwKICAgICAgICAgIHRoaXMuYXBpX21ldGhvZCA9PSBudWxsIHx8CiAgICAgICAgICB0aGlzLmludGVudHMgPT0gIiIgfHwKICAgICAgICAgIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09IG51bGwgfHwKICAgICAgICAgICh0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIgJiYgdGhpcy5lZGl0YWJsZV92YWx1ZXMgPT0gIiIpCiAgICAgICAgKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBlbnRlciBhbGwgdGhlIHJlcXVpcmVkIHZhbHVlcyIpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXFfanNvbigpID09IGZhbHNlKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdXIgUmVxdWVzdCBKU09OIGlzIGludmFsaWQuIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIgJiYgIXRoaXMuaXNFZGl0KSB7CiAgICAgICAgICAgIHZhciBjc3YgPSB0aGlzLmVkaXRhYmxlX3ZhbHVlcy5zcGxpdCgiOyIpOwogICAgICAgICAgICB2YXIgaW5wdXRfdmFsdWU7CiAgICAgICAgICAgIHRoaXMudGFza19pbnB1dF92YWx1ZXMgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBjc3YpIHsKICAgICAgICAgICAgICBsZXQgdGVtcF9saXN0ID0gY3N2W2ldLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgaW5wdXRfdmFsdWUgPSB0ZW1wX2xpc3RbdGVtcF9saXN0Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgIHRoaXMudGFza19pbnB1dF92YWx1ZXMucHVzaCh7CiAgICAgICAgICAgICAgICBrZXlfbmFtZTogaW5wdXRfdmFsdWUsCiAgICAgICAgICAgICAgICBpbnB1dF90ZXh0OiAiIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnRvdGFsX3N0ZXBzID0gMzsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50X3N0ZXAgKz0gMTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9zdGVwID0gMzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoY3VycmVudF9zdGVwID09IDIpIHsKICAgICAgICBsZXQgZW1wdHlfdmFycyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50YXNrX2lucHV0X3ZhbHVlcykgewogICAgICAgICAgaWYgKHRoaXMudGFza19pbnB1dF92YWx1ZXNbaV0uaW5wdXRfdGV4dCA9PSAiIikgewogICAgICAgICAgICBlbXB0eV92YXJzLnB1c2godGhpcy50YXNrX2lucHV0X3ZhbHVlc1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChlbXB0eV92YXJzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRfc3RlcCArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBlbnRlciBhbGwgdGhlIHZhbHVlcy4iKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGN1cnJlbnRfc3RlcCA9PSAzKSB7CiAgICAgICAgdmFyIGV4aXN0aW5nX2ludGVudF9saXN0ID0gdGhpcy5hcGlfbGlzdC5maWx0ZXIoKGFwaSkgPT4gewogICAgICAgICAgcmV0dXJuIGFwaS5pbnRlbnQgPT0gdGhpcy5pbnRlbnRzOwogICAgICAgIH0pOwogICAgICAgIHZhciBwb3N0X21ldGhvZF9kYXRhLCBnZXRfbWV0aG9kX2RhdGE7CiAgICAgICAgcG9zdF9tZXRob2RfZGF0YSA9IHt9OwogICAgICAgIGlmICh0aGlzLmFwaV9tZXRob2QgPT0gIlBPU1QiICYmIHRoaXMudGFza19mcm9tID09ICJmcm9tX2VudGl0eSIpIHsKICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50YXNrX2lucHV0X3ZhbHVlcykgewogICAgICAgICAgICBwb3N0X21ldGhvZF9kYXRhW3RoaXMudGFza19pbnB1dF92YWx1ZXNbaV0ua2V5X25hbWVdID0gewogICAgICAgICAgICAgIGZyb21fdGV4dDogdHJ1ZSwKICAgICAgICAgICAgICBmcm9tX2VudGl0eToKICAgICAgICAgICAgICAgIHRoaXMudGFza19pbnB1dF92YWx1ZXNbaV0uZHJvcGRvd25fdmFsdWUgIT0gIiIgPyB0cnVlIDogZmFsc2UsCiAgICAgICAgICAgICAgZW50aXR5OiB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzW2ldLmRyb3Bkb3duX3ZhbHVlLAogICAgICAgICAgICAgIGludGVudDogdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLmFwaV9saXN0W2ldLmludGVudCwKICAgICAgICAgICAgICBub3RfaW50ZW50OiBudWxsLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5hcGlfbWV0aG9kID09ICJHRVQiKSB7CiAgICAgICAgICBnZXRfbWV0aG9kX2RhdGEgPSB7fTsKICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50YXNrX2lucHV0X3ZhbHVlcykgewogICAgICAgICAgICBnZXRfbWV0aG9kX2RhdGFbdGhpcy50YXNrX2lucHV0X3ZhbHVlc1tpXS5rZXlfbmFtZV0gPSB7CiAgICAgICAgICAgICAgRW50aXR5OiB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzW2ldLmlucHV0X3RleHQsCiAgICAgICAgICAgICAgU2xvdDogbnVsbCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGV4aXN0aW5nX2ludGVudF9saXN0Lmxlbmd0aCA+IDAgJiYgIXRoaXMuaXNFZGl0KSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgICJUaGUgaW50ZW50IGFscmVhZHkgZXhpc3RzLiBQbGVhc2UgdHJ5IHdpdGggYW5vdGhlciBpbnRlbnQiCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAodGhpcy5lbmRfdXNlcl9tZXNzYWdlICE9ICIiIHx8CiAgICAgICAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9PSAiVGhyb3VnaF9BUEkiKSAmJgogICAgICAgICAgKHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSAhPSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9PSAiQ3VzdG9tIikgJiYKICAgICAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSAhPSBudWxsICYmCiAgICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxfbWVzc2FnZSAhPSBudWxsICYmCiAgICAgICAgICAodGhpcy5zaG93X2pzb25fcmVzcG9uc2VfZGF0YSAhPSAiIiB8fAogICAgICAgICAgICB0aGlzLmVuZHVzZXJfbXNnX3R5cGUgPT0gIkN1c3RvbSIpCiAgICAgICAgKSB7CiAgICAgICAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiA9PSAiU2lsdmVyIikgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICAiWW91J3JlIG5vdCBhdmFpbCB0byB1c2UgdGhpcyBzZXJ2aWNlLCBkdWUgdG8geW91ciBzdWJzY3JpcHRpb24gcGxhbi4gS2luZGx5IHVwZ3JhZGUgeW91ciBwbGFuLiIsCiAgICAgICAgICAgICAgdGltZXI6MzAwMCwgICAgICAgICAgICAKICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgICAgbGV0IHRhc2tzID0ge307CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAodGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUgPT0gIlRydWUiICYmCiAgICAgICAgICAgICAgICB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzLmxlbmd0aCA+IDApIHx8CiAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUgPT0gIkZhbHNlIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGFza19pbnB1dF92YWx1ZXMpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gW107CiAgICAgICAgICAgICAgICB0ZW1wLnB1c2goewogICAgICAgICAgICAgICAgICBUeXBlOiAiQXNrIiwKICAgICAgICAgICAgICAgICAgVGV4dDogdGhpcy50YXNrX2lucHV0X3ZhbHVlc1tpXS5pbnB1dF90ZXh0LAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0YXNrc1t0aGlzLnRhc2tfaW5wdXRfdmFsdWVzW2ldLmtleV9uYW1lXSA9IHRlbXA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICAgYXBpX2NhbGxzLmFkZF9jb25maWdfYXBpX3VybCgpLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0X2pzb25fa2V5X21hcHBpbmc6IGdldF9tZXRob2RfZGF0YSwKICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMudXJsLAogICAgICAgICAgICAgICAgICAgIGludGVudDogdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLmludGVudHMsCiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGpzb246IHRoaXMuc2hvd19qc29uX3JlcXVlc3RfZGF0YSwKICAgICAgICAgICAgICAgICAgICBhcGlfbWV0aG9kOiB0aGlzLmFwaV9tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgZW5kX3VzZXJfbWVzc2FnZTogdGhpcy5lbmRfdXNlcl9tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIG1zZ190eXBlOiB0aGlzLmVuZHVzZXJfbXNnX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VrZXk6IHRoaXMuc3VjY2Vzc2Z1bF9tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGFwaV9lZGl0OiB0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSwKICAgICAgICAgICAgICAgICAgICBhcGlfZWRpdGFibGVfdmFsdWU6CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmVkaXRhYmxlX3ZhbHVlcwogICAgICAgICAgICAgICAgICAgICAgICA6ICIiLAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlanNvbjoKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9PSAiVGhyb3VnaF9BUEkiCiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zaG93X2pzb25fcmVzcG9uc2VfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICA6ICIiLAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX21zZ19lZGl0YWJsZTogdGhpcy5yZXNwb25zZV9qc29uX2VkaXRhYmxlLAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX21zZ19lZGl0YWJsZV92YWx1ZToKICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnJlc3BvbnNlX2tleV9lZGl0X21lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgOiAiIiwKICAgICAgICAgICAgICAgICAgICBzbG90X21hcHBpbmdfZGF0YTogcG9zdF9tZXRob2RfZGF0YSwKICAgICAgICAgICAgICAgICAgICB1bnN1Y2Nlc3NmdWxfbXNnOiB0aGlzLnVuc3VjY2Vzc2Z1bF9tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikKICAgICAgICAgICAgICAgICAgICAgIC5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICAgIHRhc2tfZGV0YWlsczogdGFza3MsCiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiSnNvbiBhZGRlZCIpIHsKICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciBBUEkgaGFzIGJlZW4gYWRkZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiSnNvbiB1cGRhdGVkIikgewogICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJZb3VyIEFQSSBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5Nc2cgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iLAogICAgICAgICAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiRW5kcG9pbnQgbGltaXQgZXhjZWVkIikgewogICAgICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICJZb3VyIExpbWl0IGhhcyBiZWVuIGV4Y2VlZGVkLCBLaW5kbHkgdXBncmFkZSB5b3VyIHBsYW4iLAogICAgICAgICAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgLy8gYXhpb3MKICAgICAgICAgICAgICAvLyAgIC5wb3N0KGFwaV9jYWxscy50YXNrX2xpc3RfdXJsKCksIHsKICAgICAgICAgICAgICAvLyAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAvLyAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgLy8gICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgLy8gICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgLy8gICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIC8vICAgICBpbnRlbnQ6IHRoaXMuaW50ZW50cywKICAgICAgICAgICAgICAvLyAgICAgdGFza19kZXRhaWxzOiB0YXNrcywKICAgICAgICAgICAgICAvLyAgICAgLy8gdGFza19uYW1lOiB0aGlzLnRhc2tfbmFtZQogICAgICAgICAgICAgIC8vICAgfSwgewogICAgICAgICAgICAgIC8vICAgaGVhZGVyczogewogICAgICAgICAgICAgIC8vICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgIC8vICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIC8vICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIC8vICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiVGFzayBBZGRlZCIpIHsKICAgICAgICAgICAgICAvLyAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciB0YXNrIGhhcyBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgIC8vICAgICAgICQoIiNjb25maWdhcGltb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgLy8gICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAvLyAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgLy8gICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAvLyAgIGlmICgKICAgICAgICAgICAgICAvLyAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIC8vICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgLy8gICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAvLyAgICkgewogICAgICAgICAgICAgIC8vICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJGYWxzZSIgJiYKICAgICAgICAgICAgICB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzLmxlbmd0aCA+IDAKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICB2YXIgaW50ZW50cyA9IFtdOwogICAgICAgICAgICAgIGludGVudHMucHVzaCh0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuaW50ZW50cyk7CiAgICAgICAgICAgICAgaWYgKHRoaXMudGFza19pbnB1dF92YWx1ZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgLmRlbGV0ZSgKICAgICAgICAgICAgICAgICAgICBhcGlfY2FsbHMudGFza19saXN0X3VybCgpLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50czogaW50ZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5zdWJzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJUYXNrKHMpIERlbGV0ZWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZToiRGVsZXRlZCEiLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiJZb3VyIHRhc2socykgaGF2ZSBiZWVuIGRlbGV0ZWQuIiwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgZW50ZXIgYWxsIHRoZSByZXF1aXJlZCB2YWx1ZXMiKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMucXVlc3Rpb24gPSAiIjsKICAgICAgdGhpcy5pbnRlbnRzID0gIiI7CiAgICAgIHRoaXMuYXBpX21ldGhvZCA9IG51bGw7CiAgICAgIHRoaXMuZWRpdGFibGVfdmFsdWVzID0gIiI7CiAgICAgIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID0gbnVsbDsKICAgICAgdGhpcy51cmwgPSAiIjsKICAgICAgdGhpcy5zaG93X2pzb25fcmVxdWVzdF9kYXRhID0gIiI7CiAgICAgIHRoaXMuc2hvd19qc29uX3Jlc3BvbnNlX2RhdGEgPSAiIjsKICAgICAgdGhpcy5lbmRfdXNlcl9tZXNzYWdlID0gIiI7CiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9IG51bGw7CiAgICAgIHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSA9IG51bGw7CiAgICAgIHRoaXMucmVzcG9uc2Vfa2V5X2VkaXRfbWVzc2FnZSA9IG51bGw7CiAgICAgIHRoaXMudW5zdWNjZXNzZnVsX21lc3NhZ2UgPSBudWxsOwogICAgICB0aGlzLmN1cnJlbnRfc3RlcCA9IDE7CiAgICAgIHRoaXMudG90YWxfc3RlcHMgPSAyOwogICAgICB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzID0gW107CiAgICAgIC8vIHRoaXMudGFza19uYW1lID0gIiI7CiAgICB9LAogICAgYXBpX2xpc3RfdXBkYXRlKG1lc3NhZ2UpIHsKICAgICAgZm9yICh2YXIgaSBpbiBtZXNzYWdlKSB7CiAgICAgICAgdGhpcy5hcGlfbGlzdC5wdXNoKHsKICAgICAgICAgIGludGVudDogaS5yZXBsYWNlKHRoaXMuY29tcGFueWlkICsgIl8iLCAiIiksCiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlW2ldLk1TRywKICAgICAgICAgIG1ldGhvZDogbWVzc2FnZVtpXS5NRVRIT0QsCiAgICAgICAgICByZXFfanNvbjogbWVzc2FnZVtpXS5SZXF1ZXN0SnNvbiwKICAgICAgICAgIHJlc3BfanNvbjogbWVzc2FnZVtpXS5SZXNwb25zZUpzb24sCiAgICAgICAgICB1cmw6IG1lc3NhZ2VbaV0uVVJMLAogICAgICAgICAgZWRpdGFibGVfdmFsdWVzOiBtZXNzYWdlW2ldLlZhbHVlc1RvRWRpdCwKICAgICAgICAgIHF1ZXN0aW9uOiBtZXNzYWdlW2ldLlF1ZXN0aW9uLAogICAgICAgICAgZWRpdGFibGU6IG1lc3NhZ2VbaV0uaXNFZGl0LAogICAgICAgICAgbWVzc2FnZV90eXBlOiBtZXNzYWdlW2ldLk1zZ190eXBlLAogICAgICAgICAgZW5kX3VzZXJfbWVzc2FnZTogbWVzc2FnZVtpXS5NZXNzYWdlVG9FbmRVc2VyLAogICAgICAgICAgcmVzcG9uc2Vfa2V5OiBtZXNzYWdlW2ldLlJlc3BvbnNlS2V5VG9FbmRVc2VyLAogICAgICAgICAgcmVzcG9uc2Vfa2V5X2VkaXRhYmxlOiBtZXNzYWdlW2ldLlJlc3BvbnNlS2V5RWRpdGFibGUsCiAgICAgICAgICByZXNwb25zZV9rZXlfbWVzc2FnZTogbWVzc2FnZVtpXS5SZXNwb25zZUtleU1lc3NhZ2VUb0VuZFVzZXIsCiAgICAgICAgICByZXNwb25zZV9rZXlfdW5zdWNjZXNzZnVsOiBtZXNzYWdlW2ldLlVuU3VjY2Vzc2Z1bE1lc3NhZ2UsCiAgICAgICAgICB0YXNrX25hbWU6IG1lc3NhZ2VbaV0uVGFza3MgIT0gdW5kZWZpbmVkID8gbWVzc2FnZVtpXS5UYXNrTmFtZSA6ICIiLAogICAgICAgICAgdGFza3NfbGlzdDoKICAgICAgICAgICAgbWVzc2FnZVtpXS5UYXNrcyAhPSB1bmRlZmluZWQgPyBtZXNzYWdlW2ldLlRhc2tzLlV0dGVyYW5jZXMgOiBbXSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGpzb25fcmVxdWVzdF9jbGFzcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBKU09OLnBhcnNlKHRoaXMuanNvbl9yZXF1ZXN0X2RhdGFbdGhpcy5pbmRleF0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICJpcy1pbnZhbGlkIjsKICAgICAgfQogICAgICByZXR1cm4gImlzLXZhbGlkIjsKICAgIH0sCiAgICBqc29uX3Jlc3BvbnNlX2NsYXNzKCkgewogICAgICB0cnkgewogICAgICAgIEpTT04ucGFyc2UodGhpcy5qc29uX3Jlc3BvbnNlX2RhdGFbdGhpcy5pbmRleF0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICJpcy1pbnZhbGlkIjsKICAgICAgfQogICAgICByZXR1cm4gImlzLXZhbGlkIjsKICAgIH0sCiAgICBzaG93X2Jsb2NrKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PSAidXAiKSB7CiAgICAgICAgdGhpcy5zaG93X29yX2Jsb2NrID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gImRvd24iKSB7CiAgICAgICAgdGhpcy5zaG93X29yX2Jsb2NrID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGRvdF9jbGFzcyhzdGVwKSB7CiAgICAgIGlmICgKICAgICAgICBzdGVwID09IHRoaXMuY3VycmVudF9zdGVwIHx8CiAgICAgICAgKHN0ZXAgPT0gdGhpcy50b3RhbF9zdGVwcyAmJgogICAgICAgICAgdGhpcy5jdXJyZW50X3N0ZXAgPT0gMyAmJgogICAgICAgICAgdGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUgPT0gIkZhbHNlIikKICAgICAgKSB7CiAgICAgICAgcmV0dXJuICJkb3Qgc3VjY2VzcyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJkb3QiOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},null]}