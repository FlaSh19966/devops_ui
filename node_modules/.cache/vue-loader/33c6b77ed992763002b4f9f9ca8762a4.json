{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/User Management/AddUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/User Management/AddUser.vue","mtime":1663910265478},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IFBhc3N3b3JkVmFsaWRhdG9yIGZyb20gIi4uL1BhZ2VzL1Bhc3N3b3JkVmFsaWRhdG9yLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkLXVzZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0LAogICAgUGFzc3dvcmRWYWxpZGF0b3IsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNWaXNpYmxlU2VhcmNoQ2xlYXI6IGZhbHNlLAogICAgICBwb3J0YWxfcm9sZXM6IFtdLAogICAgICBjb3JyZWN0X3Bhc3N3b3JkOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRfcm9sZTogIiIsCiAgICAgIGNoZWNrZWRfbGlzdDogW10sCiAgICAgIGVtYWlsbGlzdDogW10sCiAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwZXJfcGFnZTogMTAsCiAgICAgIHRvdGFsX3BhZ2VzOiBudWxsLAogICAgICBudW1iZXJfb2Zfcm93czogbnVsbCwKICAgICAgcGFnZV9ubzogMSwKICAgICAgY29tcGFueW5hbWU6ICIiLAogICAgICBjb21wYW55aWQ6ICIiLAogICAgICB1c2VyczogW10sCiAgICAgIHJvbGVzOiBbXSwKICAgICAgcm9sZTogIiIsCiAgICAgIHJlZ19lbWFpbDogL14oWzAtOWEtekEtWl0oWy0uXHddKlswLTlhLXpBLVpdKSpAKFswLTlhLXpBLVpdWy1cd10qWzAtOWEtekEtWl1cLikrW2EtekEtWl17Miw5fSkkLywKICAgICAgcmVnX3B3ZDogL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcZCkoPz0uKlsjQCElKj8mJF0pW0EtWmEtelxkI0AhJSo/JiRdezgsfS8sCiAgICAgIHNob3dfbG9hZGVyOiBmYWxzZSwKICAgICAgLy9oYXJzaAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgc2VhcmNoX25hbWU6ICIiLAogICAgICBzcGlubmVyT246IGZhbHNlLAogICAgICBzaG93X2VtYWlsX2ZpZWxkOiBmYWxzZSwKICAgICAgc2hvd19wYXNzd29yZF9maWVsZDogZmFsc2UsCiAgICAgIHJvbGVzX2Ryb3B3ZG93bjogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiUG9ydGFsIFJvbGUiLAogICAgICAgICAgbGlzdDogW10sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIkJvdCBSb2xlIiwKICAgICAgICAgIGxpc3Q6IFtdLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHJvbGVfc2VsZWN0ZWQ6IG51bGwsCiAgICAgIHJvbGVfdHlwZV9zZWxlY3RlZDogbnVsbCwKICAgICAgLy8gbGV0dGVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGV0dGVyIiksCiAgICAgIC8vIGNhcGl0YWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXBpdGFsIiksCiAgICAgIC8vIG51bWJlcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm51bWJlciIpLAogICAgICAvLyBzcGVjaWFsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3BlY2lhbCIpLAogICAgICAvLyBhcnJheTogW10sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZhbGlkUGFzc3dvcmQoKSB7CiAgICAgIGlmICh0aGlzLnJlZ19wd2QudGVzdCh0aGlzLnBhc3N3b3JkKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLnRsdCgndXNlcl9saXN0X3B3ZF9jb25kaXRpb24nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkRW1haWwoKSB7CiAgICAgIGlmICh0aGlzLnJlZ19lbWFpbC50ZXN0KHRoaXMuZW1haWwpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZF91c2VyKCk7CiAgfSwKICBtb3VudGVkKCkgewogICAgdmFyIHZtID0gdGhpczsKICAgICQoIiNzZWxlY3RhbGwiKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgkKHRoaXMpLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm0uY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICB9CiAgICB9KTsKICAgICQoIiN1c2VybW9kZWwiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgKCkgPT4gewogICAgICB2bS5jbGVhcl9maWVsZHMoKTsKICAgICAgLy8gdm0ucm9sZV9zZWxlY3RlZCA9IG51bGw7CiAgICAgIC8vIHZtLnJvbGVfdHlwZV9zZWxlY3RlZCA9IG51bGw7CiAgICB9KTsKICAgIC8vIHRoaXMuJHJvb3QuJG9uKCJjb3JyZWN0UGFzc3dvcmQiLCAodmFsdWUpID0+IHsKICAgIC8vICAgY29uc29sZS5sb2codmFsdWUpOwogICAgLy8gICB0aGlzLmNvcnJlY3RfcGFzc3dvcmQgPSB2YWx1ZTsKICAgIC8vIH0pOwogIH0sCiAgd2F0Y2g6IHsKICAgIHNlYXJjaF9uYW1lKCkgewogICAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSA9PT0gIiIpIHsKICAgICAgICB0aGlzLmxvYWRfdXNlcigpOwogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9PSAiIikgewogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSB0cnVlOwogICAgICB9CiAgICB9LAogIH0sCiAgX21ldGhvZHM6IHsKICAgIG9wZW5fdXNlcm1vZGVsKCl7CiAgICAgICAgaWYodGhpcy5wb3J0YWxfcm9sZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgJCgiI3VzZXJtb2RlbCIpLm1vZGFsKCJzaG93Iik7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0ZXh0OnRoaXMudGx0KCdhZGRfdXNlcl9ub19yb2xlc19hZGRlZF9tc2cnKSwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgdGltZXI6IDYwMDAsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LAogICAgY2hlY2twYXNzd29yZChjb3JyZWN0UGFzc3dvcmQpIHsKICAgICAgdGhpcy5jb3JyZWN0X3Bhc3N3b3JkID0gY29ycmVjdFBhc3N3b3JkOwogICAgfSwKICAgIC8vIGNoZWNrX3ZhbHVlICgpIHsKCiAgICAvLyAgIGlmICh0aGlzLnBhc3N3b3JkICE9ICIiKSB7CiAgICAvLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1lc3NhZ2UiKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVzc2FnZSIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAvLyAgIH0KICAgIC8vICAgdmFyIGxvd2VyQ2FzZUxldHRlcnMgPSAvW2Etel0vZzsKICAgIC8vICAgaWYgKHRoaXMucGFzc3dvcmQubWF0Y2gobG93ZXJDYXNlTGV0dGVycykpIHsKICAgIC8vICAgICBsZXR0ZXIuY2xhc3NMaXN0LnJlbW92ZSgiaW52YWxpZCIpOwogICAgLy8gICAgIGxldHRlci5jbGFzc0xpc3QuYWRkKCJ2YWxpZCIpOwogICAgLy8gICAgIHRoaXMuYXJyYXlbMF0gPSAxOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIGxldHRlci5jbGFzc0xpc3QucmVtb3ZlKCJ2YWxpZCIpOwogICAgLy8gICAgIGxldHRlci5jbGFzc0xpc3QuYWRkKCJpbnZhbGlkIik7CiAgICAvLyAgICAgdGhpcy5hcnJheVswXSA9IDA7CiAgICAvLyAgIH0KCiAgICAvLyAgIC8vIFZhbGlkYXRlIGNhcGl0YWwgbGV0dGVycwogICAgLy8gICB2YXIgdXBwZXJDYXNlTGV0dGVycyA9IC9bQS1aXS9nOwogICAgLy8gICBpZiAodGhpcy5wYXNzd29yZC5tYXRjaCh1cHBlckNhc2VMZXR0ZXJzKSkgewogICAgLy8gICAgIGNhcGl0YWwuY2xhc3NMaXN0LnJlbW92ZSgiaW52YWxpZCIpOwogICAgLy8gICAgIGNhcGl0YWwuY2xhc3NMaXN0LmFkZCgidmFsaWQiKTsKICAgIC8vICAgICB0aGlzLmFycmF5WzFdID0gMTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICBjYXBpdGFsLmNsYXNzTGlzdC5yZW1vdmUoInZhbGlkIik7CiAgICAvLyAgICAgY2FwaXRhbC5jbGFzc0xpc3QuYWRkKCJpbnZhbGlkIik7CiAgICAvLyAgICAgdGhpcy5hcnJheVsxXSA9IDA7CiAgICAvLyAgIH0KCiAgICAvLyAgIC8vIFZhbGlkYXRlIG51bWJlcnMKICAgIC8vICAgdmFyIG51bWJlcnMgPSAvWzAtOV0vZzsKICAgIC8vICAgaWYgKHRoaXMucGFzc3dvcmQubWF0Y2gobnVtYmVycykpIHsKICAgIC8vICAgICBudW1iZXIuY2xhc3NMaXN0LnJlbW92ZSgiaW52YWxpZCIpOwogICAgLy8gICAgIG51bWJlci5jbGFzc0xpc3QuYWRkKCJ2YWxpZCIpOwogICAgLy8gICAgIHRoaXMuYXJyYXlbMl0gPSAxOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIG51bWJlci5jbGFzc0xpc3QucmVtb3ZlKCJ2YWxpZCIpOwogICAgLy8gICAgIG51bWJlci5jbGFzc0xpc3QuYWRkKCJpbnZhbGlkIik7CiAgICAvLyAgICAgdGhpcy5hcnJheVsyXSA9IDA7CiAgICAvLyAgIH0KCiAgICAvLyAgIC8vIFNwZWNpYWwgQ2hhcmFjdGVyCiAgICAvLyAgIHZhciBzcGVjaWFscyA9IC9bI0AhJSo/JiRdL2c7CiAgICAvLyAgIGlmICh0aGlzLnBhc3N3b3JkLm1hdGNoKHNwZWNpYWxzKSkgewogICAgLy8gICAgIHNwZWNpYWwuY2xhc3NMaXN0LnJlbW92ZSgiaW52YWxpZCIpOwogICAgLy8gICAgIHNwZWNpYWwuY2xhc3NMaXN0LmFkZCgidmFsaWQiKTsKICAgIC8vICAgICB0aGlzLmFycmF5WzNdID0gMTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICBzcGVjaWFsLmNsYXNzTGlzdC5yZW1vdmUoInZhbGlkIik7CiAgICAvLyAgICAgc3BlY2lhbC5jbGFzc0xpc3QuYWRkKCJpbnZhbGlkIik7CiAgICAvLyAgICAgdGhpcy5hcnJheVszXSA9IDA7CiAgICAvLyAgIH0KICAgIC8vICAgLy8gVmFsaWRhdGUgbGVuZ3RoCiAgICAvLyAgIGlmICh0aGlzLnBhc3N3b3JkLmxlbmd0aCA+PSA4KSB7CiAgICAvLyAgICAgdmFyIGxlbmd0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZW5ndGgiKTsKICAgIC8vICAgICBsZW5ndGguY2xhc3NMaXN0LnJlbW92ZSgiaW52YWxpZCIpOwogICAgLy8gICAgIGxlbmd0aC5jbGFzc0xpc3QuYWRkKCJ2YWxpZCIpOwogICAgLy8gICAgIHRoaXMuYXJyYXlbNF0gPSAxOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHZhciBsZW5ndGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGVuZ3RoIik7CiAgICAvLyAgICAgbGVuZ3RoLmNsYXNzTGlzdC5yZW1vdmUoInZhbGlkIik7CiAgICAvLyAgICAgbGVuZ3RoLmNsYXNzTGlzdC5hZGQoImludmFsaWQiKTsKICAgIC8vICAgICB0aGlzLmFycmF5WzRdID0gMDsKICAgIC8vICAgfQogICAgLy8gICB2YXIgc3VtID0gdGhpcy5hcnJheVswXSArIHRoaXMuYXJyYXlbMV0gKyB0aGlzLmFycmF5WzJdICsgdGhpcy5hcnJheVszXSArIHRoaXMuYXJyYXlbNF07CiAgICAvLyAgIGlmIChzdW0gPT0gNSB8fCBzdW0gPT0gMCkgewogICAgLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtZXNzYWdlIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVzc2FnZSIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgY2xlYXJfc2VhcmNoX25hbWUoKSB7CiAgICAgIHRoaXMuc2VhcmNoX25hbWUgPSAiIjsKICAgIH0sCiAgICBsb2FkX3VzZXIoKSB7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgdGhpcy5lbWFpbGxpc3QgPSBbXTsKICAgICAgdGhpcy5yb2xlX3NlbGVjdGVkID0gbnVsbDsKICAgICAgdGhpcy5wb3J0YWxfcm9sZXMgPSBbXTsKICAgICAgdGhpcy5yb2xlc19kcm9wd2Rvd24gPSBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICJQb3J0YWwgUm9sZSIsCiAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAiQm90IFJvbGUiLAogICAgICAgICAgbGlzdDogW10sCiAgICAgICAgfSwKICAgICAgXTsKICAgICAgdGhpcy5zZWxlY3RlZF9yb2xlID0gIiI7CiAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgaWYgKAogICAgICAgICF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikgJiYKICAgICAgICB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIKICAgICAgKSB7CiAgICAgICAgdG9hc3RyLndhcm5pbmcodGhpcy50bHQoJ2FkZF91c2VyX2xvYWRfdXNlcl9zZWxlY3RfY29tcGFueScpKTsKICAgICAgfQogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgICAgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSkgewogICAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlOYW1lIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci53YXJuaW5nKHRoaXMudGx0KCdhZGRfdXNlcl9sb2FkX3VzZXJfc2VsZWN0X2NvbXBhbnkyJykpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICB9CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMubG9hZF91c2Vyc191cmwoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUpIHsKICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9kYXRhID09IHVuZGVmaW5lZCA/IDAgOiByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfZGF0YTsKICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlID09IHVuZGVmaW5lZCA/IDAgOiByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgICAgdGhpcy51cGRhdGVfdXNlcnMocmVzcG9uc2UuZGF0YS5kYXRhLkVtYWlsLCByZXNwb25zZS5kYXRhLmRhdGEuUm9sZSk7CiAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOyAgICAgICAgICAgCiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5FTVBUWV9EQVRBLk1TR19DT0RFKXsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgIHRpbWVyOjI1MDAKICAgICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgZWxzZXsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMubWFpbl9yb2xlX3VybCgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgaXNTaG93OiB0cnVlLAogICAgICAgICAgICBwZXJfcGFnZTogMTAwMCwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIC8vIHBvcnRhbF9yb2xlcyA9IFtdOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFLk1TR19DT0RFKSB7ICAgICAgICAgIAogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEuUG9ydGFsLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5kYXRhLlBvcnRhbC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwb3J0YWxfcm9sZXMpOwogICAgICAgICAgICAgICAgICB0aGlzLnBvcnRhbF9yb2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAvLyByb2xlOiBbewogICAgICAgICAgICAgICAgICAgIC8vICAgcm9sZW5hbWU6IHJlc3BvbnNlLmRhdGEuUG9ydGFsW2ldCiAgICAgICAgICAgICAgICAgICAgLy8gICB9XSwKICAgICAgICAgICAgICAgICAgICByb2xlOiByZXNwb25zZS5kYXRhLmRhdGEuUG9ydGFsW2ldLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQb3J0YWwiLAogICAgICAgICAgICAgICAgICB9KTsgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhLkJvdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuZGF0YS5Cb3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgdGhpcy5wb3J0YWxfcm9sZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgLy8gcm9sZTogW3sKICAgICAgICAgICAgICAgICAgICAvLyAgIHJvbGVuYW1lOnJlc3BvbnNlLmRhdGEuQm90W2ldCiAgICAgICAgICAgICAgICAgICAgLy8gfV0sCiAgICAgICAgICAgICAgICAgICAgcm9sZTogcmVzcG9uc2UuZGF0YS5kYXRhLkJvdFtpXSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiQm90IiwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9ydGFsX3JvbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMucG9ydGFsX3JvbGVzW2ldLnR5cGUgPT09ICJQb3J0YWwiKSB7CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5yb2xlc19kcm9wd2Rvd24ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb2xlc19kcm9wd2Rvd25bal0udGl0bGUgPT09ICJQb3J0YWwgUm9sZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9sZXNfZHJvcHdkb3duW2pdLmxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucG9ydGFsX3JvbGVzW2ldLnJvbGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQb3J0YWwgVXNlciIsCiAgICAgICAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3J0YWxfcm9sZXNbaV0udHlwZSA9PT0gIkJvdCIpIHsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvbGVzX2Ryb3B3ZG93bi5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvbGVzX2Ryb3B3ZG93bltqXS50aXRsZSA9PT0gIkJvdCBSb2xlIikgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb2xlc19kcm9wd2Rvd25bal0ubGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wb3J0YWxfcm9sZXNbaV0ucm9sZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIkJvdCBVc2VyIiwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBwYWdpbmF0aW9uX2NsYXNzKGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PSB0aGlzLnBhZ2Vfbm8pIHsKICAgICAgICByZXR1cm4gIiBhY3RpdmUiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIGNoZWNrX2xpc3RfYXJyYXkoZSwgaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09ICJhbGwiKSB7CiAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0aGlzLnVzZXJzLm1hcCgodXNlcikgPT4gewogICAgICAgICAgICByZXR1cm4gdXNlci5lbWFpbDsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PSBmYWxzZSkgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgbGV0IHZhbF9pbmRleCA9IHRoaXMuY2hlY2tlZF9saXN0LmluZGV4T2YodGhpcy51c2Vyc1tpbmRleF0uZW1haWwpOwogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLnVzZXJzW2luZGV4XS5lbWFpbDsKICAgICAgICAgIGlmICh2YWxfaW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT0gZmFsc2UpIHsKICAgICAgICAgIHZhciBzZWxlY3RhbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc2VsZWN0YWxsIik7CiAgICAgICAgICBzZWxlY3RhbGwuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgbGV0IHVzZXJJbmRleCA9IHRoaXMuY2hlY2tlZF9saXN0LmluZGV4T2YodGhpcy51c2Vyc1tpbmRleF0uZW1haWwpOwogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3Quc3BsaWNlKHVzZXJJbmRleCwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGVsZXRlX3VzZXIoaW5kZXgpIHsKICAgICAgdGhpcy5lbWFpbGxpc3QgPSBbXTsKICAgICAgaWYgKGluZGV4ID09ICJhbGwiKSB7CiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ2FkZF91c2VyX25vX3VzZXJfc2VsZWN0X21zZycpLAogICAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gdGhpcy5jaGVja2VkX2xpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMuZW1haWxsaXN0LnB1c2godGhpcy5jaGVja2VkX2xpc3RbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5kZWxldGVfdXNlcl9hcGkoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbWFpbGxpc3QucHVzaCh0aGlzLnVzZXJzW2luZGV4XS5lbWFpbCk7CiAgICAgICAgdGhpcy5kZWxldGVfdXNlcl9hcGkoKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZV91c2VyX2FwaSgpIHsKICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogdGhpcy50bHQoJ2FkZF91c2VyX3N3YWxfYWxlcnRfbXNnJyksCiAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkZF91c2VyX25vX3JldmVydF9tc2cnKSwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgnYWRkX3VzZXJfc3dhbF9kZWxldGVfbXNnJyksCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIC8vIHRoaXMuc3Bpbm5lck9uPXRydWU7CiAgICAgICAgICBpZihyZXN1bHQuZGlzbWlzcyA9PT0nY2FuY2VsJyl7CiAgICAgICAgICAgIHRoaXMuZW1haWxsaXN0ID0gW107CiAgICAgICAgICB9ZWxzZSBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMuZGVsZXRlX3VzZXJfdXJsKCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZW1haWxsaXN0OiB0aGlzLmVtYWlsbGlzdCwKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIHZhciB1c2VybGlzdCA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5lbWFpbGxpc3QpIHsKICAgICAgICAgICAgICAgIHVzZXJsaXN0LnB1c2goewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy5lbWFpbGxpc3RbaV0uZW1haWwsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gYXhpb3MKICAgICAgICAgICAgICAvLyAgIC5wb3N0KGFwaV9jYWxscy51c2Vyc19saXN0X3N5bmMoKSwgewogICAgICAgICAgICAgIC8vICAgICBkZWxldGU6IHVzZXJsaXN0LAogICAgICAgICAgICAgIC8vICAgfSkKICAgICAgICAgICAgICAvLyAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAvLyAgIH0pOwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlNVQ0NFU1NGVUxfREJfUVVFUlkuTVNHX0NPREUpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKHRoaXMudGx0KCdhZGRfdXNlcl9kZWxldGVkX3N1Y2Nlc3NmdWxfbXNnJykpOwogICAgICAgICAgICAgICAgaWYoKCh0aGlzLmVtYWlsbGlzdC5sZW5ndGggPT09IDEgJiYgdGhpcy51c2Vycy5sZW5ndGggPT09IDEpIHx8CiAgICAgICAgICAgICAgICAgICh0aGlzLmVtYWlsbGlzdC5sZW5ndGggPT09IHRoaXMudXNlcnMubGVuZ3RoKSkgJiYgCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlX25vID4xKXsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IHRoaXMucGFnZV9ubyAtIDE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9ZWxzZSBpZihyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ3NlYXJjaF9wcm9kdWN0X2ludGVybmFsX3NlcnZlcl9tc2cxJykpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkX3VzZXIoKTsKICAgICAgICAgICAgICB9ICAKICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgICAgICAgIHRoaXMuZW1haWxsaXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5sb2FkX3VzZXIoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcGFzc3dvcmRfdG9nZ2xlKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtX3Bhc3N3b3JkIik7CiAgICAgIGlmIChwYXNzd29yZC50eXBlID09ICJ0ZXh0IikgewogICAgICAgIHBhc3N3b3JkLnR5cGUgPSAicGFzc3dvcmQiOwogICAgICB9IGVsc2UgaWYgKHBhc3N3b3JkLnR5cGUgPT0gInBhc3N3b3JkIikgewogICAgICAgIHBhc3N3b3JkLnR5cGUgPSAidGV4dCI7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVfdXNlcnMobWVzc2FnZTEsIG1lc3NhZ2UyKSB7CiAgICAgIGlmIChtZXNzYWdlMSA9PSBudWxsIHx8IG1lc3NhZ2UyID09IG51bGwpIHsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVzZXJzID0gW107CiAgICAgICAgZm9yICh2YXIgaSBpbiBtZXNzYWdlMSkgewogICAgICAgICAgdGhpcy51c2Vycy5wdXNoKHsKICAgICAgICAgICAgZW1haWw6IG1lc3NhZ2UxW2ldLAogICAgICAgICAgICByb2xlOiBtZXNzYWdlMltpXSwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHBhZ2VfcmVxdWlyZShwYWdlX25vKSB7CiAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgdGhpcy5lbWFpbGxpc3QgPSBbXTsKICAgICAgaWYgKHBhZ2Vfbm8gPT0gMCB8fCBwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMgKyAxKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9ICIiKSB7CiAgICAgICAgaWYgKHBhZ2Vfbm8gPT0gIi4uLnMiKSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09ICIuLi5sIikgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCh0aGlzLnRvdGFsX3BhZ2VzICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZV9ubzsKICAgICAgICB9CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgYXBpX2NhbGxzLmxvYWRfdXNlcnNfdXJsKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAgICAgIGtleTogdGhpcy5zZWFyY2hfbmFtZSwKICAgICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFICE9IHRoaXMuYXBpX3N0YXR1c19jb2RlLlVTRVJfUk9MRV9TRVRfQUxSRUFEWV9FWElTVFNfMjAwMi5NU0dfQ09ERSAmJgogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFICE9IHRoaXMuYXBpX3N0YXR1c19jb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5NU0dfQ09ERSAmJgogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFICE9IHRoaXMuYXBpX3N0YXR1c19jb2RlLkVNUFRZX0RBVEEuTVNHX0NPREUgICYmCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgIT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuU1VQRVJfQURNSU5fRVhJU1RTX0VSUk9SLk1TR19DT0RFCiAgICAgICAgICAgICl7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLiBkYXRhLkVtYWlsLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX2RhdGEgPT0gdW5kZWZpbmVkID8gMCA6IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9kYXRhOwogICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlID09IHVuZGVmaW5lZCA/IDAgOiByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgICAgICB0aGlzLnVzZXJzID0gW107CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm51bWJlcl9vZl9yb3dzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMudXNlcnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5FbWFpbCwKICAgICAgICAgICAgICAgICAgICByb2xlOiByZXNwb25zZS5kYXRhLmRhdGFbaV0uUm9sZSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlX25vOwogICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIH0gIGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5FTVBUWV9EQVRBLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCdhZGRfdXNlcl9ub191c2VyX2ZvdW5kX21zZycpKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfdXNlcigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUpIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ3NlYXJjaF9wcm9kdWN0X2ludGVybmFsX3NlcnZlcl9tc2cxJykpOwogICAgICAgICAgICAgIHRoaXMubG9hZF91c2VyKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgaWYgKHBhZ2Vfbm8gPT0gIi4uLnMiKSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09ICIuLi5sIikgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCh0aGlzLnRvdGFsX3BhZ2VzICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlX25vOwogICAgICAgIH0KICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMubG9hZF91c2Vyc191cmwoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGludGVudDogdGhpcy5uZXdfaW50ZW50cywKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfZGF0YSA9PSB1bmRlZmluZWQgPyAwIDogcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX2RhdGE7CiAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlID09IHVuZGVmaW5lZCA/IDAgOiByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZV91c2VycyhyZXNwb25zZS5kYXRhLmRhdGEuRW1haWwsIHJlc3BvbnNlLmRhdGEuZGF0YS5Sb2xlKTsKICAgICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRpbWVyOjI1MDAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyByb2xlX3N1Ym1pdF9hcGkoKSB7CiAgICAvLyAgIGF4aW9zCiAgICAvLyAgICAgLnBvc3QoCiAgICAvLyAgICAgICBhcGlfY2FsbHMucm9sZV91cmwoKSwKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgICAgc3VwZXJhZG1pbmNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAvLyAgICAgICAgICAgLmNvbXBhbnlfbmFtZSwKICAgIC8vICAgICAgICAgc3VwZXJhZG1pbmNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKQogICAgLy8gICAgICAgICAgIC5jb21wYW55X2lkLAogICAgLy8gICAgICAgICByb2xlOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSwKICAgIC8vICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgIC8vICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICB9LAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKQogICAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgdGhpcy5yb2xlcyA9IHJlc3BvbnNlLmRhdGEucm9sZWxpc3Q7CiAgICAvLyAgICAgfSkKICAgIC8vICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgIGlmICgKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgIC8vICAgICAgICkgewogICAgLy8gICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIGFkZF91c2VyKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy5lbWFpbCA9PSAiIiB8fCB0aGlzLnZhbGlkRW1haWwgIT0gdHJ1ZSkgewogICAgICAgIHRvYXN0ci5lcnJvcih0aGlzLnRsdCgnYWRkX3VzZXJfZW50ZXJfdmFsaWRfZW1haWxfbXNnJykpOwogICAgICB9CiAgICAgIC8vIGVsc2UgaWYodGhpcy5zaG93X3Bhc3N3b3JkX2ZpZWxkJiYKICAgICAgLy8gICAodGhpcy5wYXNzd29yZD09IiJ8fHRoaXMudmFsaWRQYXNzd29yZCE9dHJ1ZSkpIHsKICAgICAgLy8gICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBFbnRlciBhIFZhbGlkIFBhc3N3b3JkIik7CiAgICAgIC8vIH0KICAgICAgLy8gZWxzZSBpZih0aGlzLnBvcnRhbF9yb2xlcy50eXBlID09PSAiQm90Iil7CiAgICAgIC8vICAgaWYgKHRoaXMuZW1haWwgPT0gIiIgfHwgdGhpcy52YWxpZEVtYWlsICE9IHRydWUpIHsKICAgICAgLy8gICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgRW50ZXIgYSBWYWxpZCBFbWFpbCIpOwogICAgICAvLyB9CiAgICAgIC8vIH0KICAgICAgLy8gZWxzZSBpZiAodGhpcy5jb3JyZWN0X3Bhc3N3b3JkID09IGZhbHNlICYmIHRoaXMucm9sZV90eXBlX3NlbGVjdGVkID09PSAiUG9ydGFsIFVzZXIiKSB7CiAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgRW50ZXIgYSBWYWxpZCBQYXNzd29yZCIpOwogICAgICAvLyB9IAogICAgICBlbHNlIGlmICh0aGlzLnNlbGVjdGVkX3JvbGUgPT0gIiIpIHsKICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ2FkZF91c2VyX3NlbGVjdF9yb2xlX25hbWVfbXNnJykpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd19sb2FkZXIgPSB0cnVlOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAkKCIjdXNlcm1vZGVsIikubW9kYWwoImhpZGUiKTsKICAgICAgICB2YXIgY3VycmVudF9kYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAvLyBpZih0aGlzLnJvbGVfdHlwZV9zZWxlY3RlZCA9PT0gIlBvcnRhbCBVc2VyIikKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5hZGRfdXNlcl91cmwoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHJvbGU6IHRoaXMucm9sZV9zZWxlY3RlZCwKICAgICAgICAgICAgICBzdGFmZmVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGRvbWFpbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmRvbWFpbiwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGRhdGU6IGN1cnJlbnRfZGF0ZSwKICAgICAgICAgICAgICB1c2VyX3R5cGU6IHRoaXMucm9sZV90eXBlX3NlbGVjdGVkLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIC8vIHRoaXMucm9sZV9zZWxlY3RlZCA9IG51bGw7CiAgICAgICAgICAgIC8vIHZhciByZXNwb25zZV9hcGkgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLk5FV19VU0VSX1JFR0lTVEVSRURfU1VDQ0VTU18yMDA0Lk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ2FkZF91c2VyX2FkZGVkX3N1Y2Nlc3NmdWxfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICB0aGlzLnRsdCgnYWRkX3VzZXJfdXNlcl92ZXJpZmljYXRpb25fbXNnJyksCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLkRVUExJQ0FURV9FTUFJTF8xMDE1Lk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDoKICAgICAgICAgICAgICAgICAgdGhpcy50bHQoJ2FkZF91c2VyX2VtYWlsX2FscmVhZHlfcmVnaXN0ZXJlZF9tc2cnKSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuQ0hBVF9BR0VOVF9MSU1JVF9SRUFDSEVELk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRkX3VzZXJfdXBncmFkZV9wbGFuX2Zvcl9saXZlX2NoYXRfbXNnJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5FTUFJTF9SRUdJU1RFUkVEX1dJVEhfT1RIRVJfQ09NUEFOWS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd1c2VyX3JlZ2lzdGVyZWRfd2l0aF9vdGhlcl9jb21wYW55JyksCiAgICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUpIHsKICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRkX3JvbGVfaW50ZXJuYWxfc2VydmVyX21zZycpLAogICAgICAgICAgICAgICAgICB0aW1lcjozMDAwLCAgICAgCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLkVNQUlMX1JFR0lTVEVSRURfV0lUSF9PVEhFUl9DT01QQU5ZLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgICAgdGltZXI6MzAwMCwgICAgIAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubG9hZF91c2VyKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMuZW1haWwgPSAiIjsKICAgICAgdGhpcy5wYXNzd29yZCA9ICIiOwogICAgICB0aGlzLnNlbGVjdGVkX3JvbGUgPSAiIjsKICAgIH0sCiAgICBjYWxsc2VhcmNoKCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLnNlYXJjaF9wcm9kdWN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBzZWFyY2hfcHJvZHVjdCgpIHsKICAgICAgaWYgKHRoaXMuc2VhcmNoX25hbWUgIT0gIiIpIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICB0aGlzLmVtYWlsbGlzdCA9IFtdOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5sb2FkX3VzZXJzX3VybCgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBpc3NlYXJjaDogdHJ1ZSwKICAgICAgICAgICAgICBrZXk6IHRoaXMuc2VhcmNoX25hbWUsCiAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgcGFnZV9ubzogMSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgIT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuVVNFUl9ST0xFX1NFVF9BTFJFQURZX0VYSVNUU18yMDAyLk1TR19DT0RFICYmCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgIT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLk1TR19DT0RFICYmCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgIT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuRU1QVFlfREFUQS5NU0dfQ09ERSAgJiYKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSAhPSB0aGlzLmFwaV9zdGF0dXNfY29kZS5TVVBFUl9BRE1JTl9FWElTVFNfRVJST1IuTVNHX0NPREUKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgLy8gcmVzcG9uc2UuZGF0YS5kYXRhLkVtYWlsLmxlbmd0aCAhPSAwCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSkgewogICAgICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9kYXRhID09IHVuZGVmaW5lZCA/IDAgOiByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZSA9PSB1bmRlZmluZWQgPyAwIDogcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX3BhZ2U7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJzID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubnVtYmVyX29mX3Jvd3M7IGkrKykgewogICAgICAgICAgICAgICAgICB0aGlzLnVzZXJzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhLmRhdGFbaV0uRW1haWwsCiAgICAgICAgICAgICAgICAgICAgcm9sZTogcmVzcG9uc2UuZGF0YS5kYXRhW2ldLlJvbGUsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuRU1QVFlfREFUQS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcih0aGlzLnRsdCgnYWRkX3VzZXJfbm9fdXNlcl9mb3VuZF9tc2cnKSk7CiAgICAgICAgICAgICAgdGhpcy5sb2FkX3VzZXIoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCdzZWFyY2hfcHJvZHVjdF9pbnRlcm5hbF9zZXJ2ZXJfbXNnMScpKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfdXNlcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ2FkZF91c2VyX2RhdGFfZm9yX3NlYXJjaF9tc2cnKSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgICAgdGhpcy5wYWdlX2FycmF5ID0gW107CiAgICAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG90YWxfcGFnZXMgLSA0OyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPD0gNCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPj0gdGhpcy50b3RhbF9wYWdlcyAtIDQpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gMzsgaSA8PSBwYWdlX25vICsgMzsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfSwKICAgIHNob3dfZmllbGQoc2VsZWN0ZWRPcHRpb24sIGlkKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdGVkT3B0aW9uKTsKICAgICAgdGhpcy5yb2xlX3NlbGVjdGVkID0gc2VsZWN0ZWRPcHRpb24ubmFtZTsKICAgICAgdGhpcy5yb2xlX3R5cGVfc2VsZWN0ZWQgPSBzZWxlY3RlZE9wdGlvbi50eXBlOwogICAgICB0aGlzLnNob3dfZW1haWxfZmllbGQgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93X3Bhc3N3b3JkX2ZpZWxkID0gZmFsc2U7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3J0YWxfcm9sZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5wb3J0YWxfcm9sZXNbaV0ucm9sZSA9PT0gc2VsZWN0ZWRPcHRpb24ubmFtZSkgewogICAgICAgICAgaWYgKHRoaXMucG9ydGFsX3JvbGVzW2ldLnR5cGUgPT09ICJCb3QiKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd19lbWFpbF9maWVsZCA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucG9ydGFsX3JvbGVzW2ldLnR5cGUgPT09ICJQb3J0YWwiKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd19lbWFpbF9maWVsZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuc2hvd19wYXNzd29yZF9maWVsZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogIH0sCiAgZ2V0IG1ldGhvZHMoKSB7CiAgICByZXR1cm4gdGhpcy5fbWV0aG9kczsKICB9LAogIHNldCBtZXRob2RzKHZhbHVlKSB7CiAgICB0aGlzLl9tZXRob2RzID0gdmFsdWU7CiAgfSwKfTsK"},{"version":3,"sources":["AddUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddUser.vue","sourceRoot":"src/portal/Chatbot/Dashboard/User Management","sourcesContent":["<template>\n  <div class=\"dash-cont\">\n    <div class=\"spinner\" id=\"spinner\" v-show=\"spinnerOn\"></div>\n    <div class=\"container-fluid\">\n      <div class=\"card dash-card\">\n        <div\n          class=\"card-header d-block d-sm-flex flex-wrap justify-content-between\"\n        >\n          <h4 class=\"mb-sm-0\">{{tlt('user_list_heading')}}</h4>\n\n          <div class=\"card-act d-flex flex-wrap\">\n            <!-- for search -harsh -->\n            <input\n              class=\"form-control search-bar\"\n              id=\"search_bar\"\n              :placeholder=\"tlt('search_here')\"\n              v-model.trim=\"search_name\"\n              v-on:keyup=\"callsearch\"\n            />\n            <a\n              type=\"button\"\n              v-if=\"isVisibleSearchClear\"\n              class=\"btn bg-transparent mt-auto mb-auto py-0\"\n              @click=\"clear_search_name\"\n              style=\"margin-left: -40px; z-index: 10\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </a>\n            <a\n              href=\"#\"\n              class=\"darkblue-btn\"\n              @click=\"search_product\"\n              id=\"search_btn\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                width=\"14\"\n                height=\"14\"\n              >\n                <path\n                  d=\"M13.809011327100071,12.965505435601472 L9.30910012117823,8.49330664854199 C10.007392079586584,7.596111589605521 10.38512817619458,6.499157170138106 10.38512817619458,5.345374656726532 c0,-1.3810948891881802 -0.5423458634784514,-2.676086605733705 -1.523073527148749,-3.6524965835014083 c-0.9807276636702976,-0.9764099777677033 -2.287209392305289,-1.5136937750578685 -3.6751296371814526,-1.5136937750578685 s-2.6944019735111544,0.5390058607430178 -3.6751296371814526,1.5136937750578685 C0.5293349766245179,2.667565987539975 -0.011278152465820316,3.9642797675383576 -0.011278152465820316,5.345374656726532 c0,1.3793728257353273 0.5423458634784514,2.6778086691865575 1.523073527148749,3.6524965835014083 C2.492523038353222,9.974281217995648 3.7972720326001044,10.51156501528581 5.18692501186438,10.51156501528581 c1.160932040033745,0 2.2629511108717475,-0.37540983272197437 3.165705727077092,-1.0676793407689171 l4.499911205921844,4.470476723606628 a0.1420842198250257,0.14120920313395363 0 0 0 0.20099718902076805,0 l0.7554721932159904,-0.7490976019910955 a0.1420842198250257,0.14120920313395363 0 0 0 0,-0.19975936053095905 zM7.931576282630728,8.073123166045836 C7.196896902072058,8.80155600660269 6.2231001759542055,9.20279679111746 5.18692501186438,9.20279679111746 s-2.0099718902076775,-0.4012407845147706 -2.744651270766347,-1.1296736250716286 C1.709327094927478,7.342968262036121 1.3055999824978375,6.37516860153268 1.3055999824978375,5.345374656726532 s0.4037271124296458,-1.99931566876244 1.1366737586002036,-2.727748509319298 C3.1769531216567026,1.8891933068503817 4.150749847774562,1.4879525223356067 5.18692501186438,1.4879525223356067 s2.0117046245957884,0.3995187210619175 2.744651270766347,1.1296736250716286 S9.06825004123093,4.315580711920385 9.06825004123093,5.345374656726532 s-0.4037271124296458,1.99931566876244 -1.1366737586002036,2.727748509319298 z\"\n                  fill=\"#fff\"\n                />\n              </svg>\n            </a>\n\n            <a\n              href=\"#\"\n              class=\"darkblue-btn\"\n              id=\"add_user_btn\"\n              @click=\"open_usermodel()\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"14\"\n                height=\"13.997\"\n                viewBox=\"0 0 14 13.997\"\n              >\n                <path\n                  id=\"Union_13\"\n                  data-name=\"Union 13\"\n                  d=\"M-12684,2058v-5h-5a1,1,0,0,1-1-1,1,1,0,0,1,1-1h5v-5a1,1,0,0,1,1-1,1,1,0,0,1,1,1v5h5a1,1,0,0,1,1,1,1,1,0,0,1-1,1h-5v5a1,1,0,0,1-1,1A1,1,0,0,1-12684,2058Z\"\n                  transform=\"translate(12690.001 -2045.002)\"\n                  fill=\"#fff\"\n                />\n              </svg>\n              {{tlt('user_list_add_user_btn')}}\n            </a>\n            <a\n              href=\"javascript:void(0)\"\n              class=\"red-btn\"\n              @click=\"delete_user('all')\"\n              id=\"delete_user\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"14\"\n                height=\"14\"\n                viewBox=\"0 0 14 14\"\n              >\n                <path\n                  id=\"trash-can-outline\"\n                  d=\"M8.375,3v.778H4V5.333h.875V15.444A1.661,1.661,0,0,0,6.625,17h8.75a1.661,1.661,0,0,0,1.75-1.556V5.333H18V3.778H13.625V3H8.375M6.625,5.333h8.75V15.444H6.625V5.333m1.75,1.556v7h1.75v-7H8.375m3.5,0v7h1.75v-7Z\"\n                  transform=\"translate(-4 -3)\"\n                  fill=\"#fff\"\n                />\n              </svg>\n              {{tlt('user_list_delete_btn')}}\n            </a>\n          </div>\n        </div>\n        <div class=\"card-body\">\n          <div class=\"table-box\">\n            <div class=\"table-responsive\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\">\n                      <div class=\"form-check checkbox checkbox-success\">\n                        <label\n                          class=\"form-check-label checkbox checkbox-success\"\n                        >\n                          <input\n                            class=\"form-check-input\"\n                            id=\"selectall\"\n                            type=\"checkbox\"\n                            @change=\"check_list_array($event, 'all')\"\n                          />\n                          <span class=\"icn\"></span>\n                        </label>\n                      </div>\n                    </th>\n                    <th scope=\"col\" style=\"width: 50px\">{{tlt('user_list_action_label')}}</th>\n                    <th scope=\"col\">{{tlt('user_list_role_name_label')}}</th>\n                    <th scope=\"col\">{{tlt('user_list_email_label')}}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"(user, index) in users\" :key=\"index\">\n                    <th scope=\"row\">\n                      <div class=\"form-check checkbox-success\">\n                        <label\n                          class=\"form-check-label checkbox checkbox-success\"\n                        >\n                          <input\n                            class=\"form-check-input\"\n                            type=\"checkbox\"\n                            @change=\"check_list_array($event, index)\"\n                          />\n                          <span class=\"icn\"></span>\n                        </label>\n                      </div>\n                    </th>\n                    <td class=\"action\">\n                      <a\n                        href=\"#\"\n                        @click=\"delete_user(index)\"\n                        id=\"single_delete_user_id\"\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          width=\"13.682\"\n                          height=\"15.392\"\n                          viewBox=\"0 0 13.682 15.392\"\n                        >\n                          <path\n                            d=\"M8.276,3v.855H4v1.71h.855V16.682a1.71,1.71,0,0,0,1.71,1.71h8.551a1.71,1.71,0,0,0,1.71-1.71V5.565h.855V3.855H13.406V3H8.276M6.565,5.565h8.551V16.682H6.565V5.565m1.71,1.71v7.7h1.71v-7.7H8.276m3.42,0v7.7h1.71v-7.7Z\"\n                            transform=\"translate(-4 -3)\"\n                            fill=\"#f23d3d\"\n                          />\n                        </svg>\n                      </a>\n                    </td>\n                    <td>{{ user.role }}</td>\n                    <td>{{ user.email }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div v-if=\"users.length == 0\" style=\"text-align: center;\">No User data is available currently. Please add User Data.</div>\n            <div class=\"pagin-table\" style=\"margin: 0\">\n              <nav aria-label=\"Page navigation example\">\n                <ul class=\"pagination justify-content-center\">\n                  <li class=\"page-item\">\n                    <a\n                      class=\"page-link\"\n                      href=\"#\"\n                      @click=\"page_require(page_no - 1)\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"8.667\"\n                        height=\"15.204\"\n                        viewBox=\"0 0 8.667 15.204\"\n                      >\n                        <g\n                          id=\"arrow-point-to-left\"\n                          transform=\"translate(105.806 15.204) rotate(180)\"\n                        >\n                          <path\n                            id=\"Path_1136\"\n                            data-name=\"Path 1136\"\n                            d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                            transform=\"translate(0 0)\"\n                            fill=\"#9499ae\"\n                          />\n                        </g>\n                      </svg>\n                    </a>\n                  </li>\n                  <li\n                    :class=\"'page-item ' + pagination_class(pageno)\"\n                    v-for=\"pageno in page_array\"\n                    :key=\"pageno\"\n                  >\n                    <a\n                      v-if=\"pageno == '...s' || pageno == '...l'\"\n                      class=\"page-link\"\n                      href=\"#\"\n                      @click=\"page_require(pageno)\"\n                      >...</a\n                    >\n                    <a\n                      v-if=\"pageno != '...s' && pageno != '...l'\"\n                      class=\"page-link\"\n                      href=\"#\"\n                      @click=\"page_require(pageno)\"\n                      >{{ pageno }}</a\n                    >\n                  </li>\n                  <li class=\"page-item\">\n                    <a\n                      class=\"page-link\"\n                      href=\"#\"\n                      @click=\"page_require(page_no + 1)\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"8.667\"\n                        height=\"15.204\"\n                        viewBox=\"0 0 8.667 15.204\"\n                      >\n                        <g\n                          id=\"arrow-point-to-right\"\n                          transform=\"translate(-97.139 0)\"\n                        >\n                          <path\n                            id=\"Path_1136\"\n                            data-name=\"Path 1136\"\n                            d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                            transform=\"translate(0 0)\"\n                            fill=\"#9499ae\"\n                          />\n                        </g>\n                      </svg>\n                    </a>\n                  </li>\n                </ul>\n              </nav>\n            </div>\n\n            <div\n              class=\"modal fade dash-modal\"\n              id=\"usermodel\"\n              tabindex=\"-1\"\n              role=\"dialog\"\n              aria-labelledby=\"usermodeltitle\"\n              aria-hidden=\"true\"\n              data-keyboard=\"false\"\n              data-backdrop=\"static\"\n            >\n              <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                <div class=\"modal-content\">\n                  <div class=\"modal-body\">\n                    <div class=\"modal-head d-flex align-items-center\">\n                      <div class=\"head-icn\">\n                        <img src=\"/img/user-blue.png\" alt />\n                      </div>\n                      <h3>{{tlt('user_list_model_user_header')}}</h3>\n                    </div>\n                    <button\n                      type=\"button\"\n                      class=\"close\"\n                      data-dismiss=\"modal\"\n                      aria-label=\"Close\"\n                    >\n                      <img src=\"/img/close-icn.png\" alt />\n                    </button>\n                    <form @submit=\"add_user\">\n                      <div class=\"form-group\">\n                        <label>{{tlt('user_list_model_role_name_label')}}</label>\n                        <!-- <select v-model=\"selected_role\" class=\"form-control\" id=\"select_role_name\"  @change=\"show_field\">\n                          <option value disabled>Select Role Name</option>\n                          <option v-for=\"(role, index) in portal_roles\" :key=\"index\">{{role.role}}</option>\n                        </select> -->\n                        <multiselect\n                          id=\"role_select\"\n                          :close-on-select=\"true\"\n                          :taggable=\"false\"\n                          :multiple=\"false\"\n                          :options=\"roles_dropwdown\"\n                          :placeholder=\"tlt('select_role')\"\n                          v-model=\"selected_role\"\n                          group-values=\"list\"\n                          group-label=\"title\"\n                          :group-select=\"false\"\n                          track-by=\"name\"\n                          label=\"name\"\n                          @select=\"show_field\"\n                        >\n                        </multiselect>\n                      </div>\n\n                      <div class=\"form-group\" v-if=\"show_email_field\">\n                        <input\n                          v-model=\"email\"\n                          style=\"padding: 14px 8px 14px 50px\"\n                          type=\"email\"\n                          class=\"form-control email\"\n                          :placeholder=\"tlt('email_text')\"\n                          id=\"form_email\"\n                        />\n                      </div>\n                      <!-- <div class=\"form-group\" v-if=\"show_password_field\">\n                        <input\n                          v-model=\"password\"\n                          style=\"padding: 14px 8px 14px 50px\"\n                          type=\"password\"\n                          id=\"form_password\"\n                          class=\"form-control pass\"\n                          placeholder=\"Password\"\n                          autocomplete=\"new-password\"\n                        />\n                        <a href=\"#\" @click=\"password_toggle\" class=\"view-pass\">\n                          <img src=\"/img/eye-icn.png\" alt />\n                        </a>\n                      </div> -->\n                      <!-- <span\n                        style=\"color: #ff0000\"\n                        v-if=\"validPassword != true && password != ''\"\n                        >{{ validPassword }}</span\n                      > -->\n\n                      <!-- <password-validator\n                        :testpassword=\"password\"\n                        @correctPassword=\"checkpassword\"\n                        style=\"padding: 0px\"\n                      ></password-validator> -->\n\n                      <!-- <div id=\"message\">\n                      <h6>Password must contain the following:</h6>\n                      <p\n                        id=\"letter\"\n                        class=\"invalid\"\n                        style=\"margin-left: 10%;\"\n                      >A lower case letter</p>\n                      <p\n                        id=\"capital\"\n                        class=\"invalid\"\n                        style=\"margin-left: 10%;\"\n                      >A capital (uppercase) letter</p>\n                      <p\n                        id=\"number\"\n                        class=\"invalid\"\n                        style=\"margin-left: 10%;\"\n                      >A number</p>\n                      <p\n                        id=\"special\"\n                        class=\"invalid\"\n                        style=\"margin-left: 10%;\"\n                      >A special character( # @ ! % * ? & $ )</p>\n                      <p\n                        id=\"length\"\n                        class=\"invalid\"\n                        style=\"margin-left: 10%;\"\n                      >Minimum 8 characters</p>\n                    </div> -->\n                      <div class=\"btn-wrap text-right\">\n                        <button\n                          type=\"button\"\n                          class=\"btn btn-link\"\n                          data-dismiss=\"modal\"\n                        >\n                          {{tlt('user_list_cancel_btn')}}\n                        </button>\n                        <button type=\"submit\" class=\"darkblue-btn\">\n                          {{tlt('user_list_save_close_btn')}}\n                        </button>\n                      </div>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\nimport Multiselect from \"vue-multiselect\";\nimport PasswordValidator from \"../Pages/PasswordValidator.vue\";\nexport default {\n  name: \"add-user\",\n  components: {\n    Multiselect,\n    PasswordValidator,\n  },\n  data() {\n    return {\n      isVisibleSearchClear: false,\n      portal_roles: [],\n      correct_password: false,\n      selected_role: \"\",\n      checked_list: [],\n      emaillist: [],\n      password: \"\",\n      email: \"\",\n      per_page: 10,\n      total_pages: null,\n      number_of_rows: null,\n      page_no: 1,\n      companyname: \"\",\n      companyid: \"\",\n      users: [],\n      roles: [],\n      role: \"\",\n      reg_email: /^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$/,\n      reg_pwd: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#@!%*?&$])[A-Za-z\\d#@!%*?&$]{8,}/,\n      show_loader: false,\n      //harsh\n      page_array: [],\n      search_name: \"\",\n      spinnerOn: false,\n      show_email_field: false,\n      show_password_field: false,\n      roles_dropwdown: [\n        {\n          title: \"Portal Role\",\n          list: [],\n        },\n        {\n          title: \"Bot Role\",\n          list: [],\n        },\n      ],\n      role_selected: null,\n      role_type_selected: null,\n      // letter: document.getElementById(\"letter\"),\n      // capital: document.getElementById(\"capital\"),\n      // number: document.getElementById(\"number\"),\n      // special: document.getElementById(\"special\"),\n      // array: [],\n    };\n  },\n  computed: {\n    validPassword() {\n      if (this.reg_pwd.test(this.password)) {\n        return true;\n      } else {\n        return this.tlt('user_list_pwd_condition');\n      }\n    },\n    validEmail() {\n      if (this.reg_email.test(this.email)) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n  created() {\n    this.load_user();\n  },\n  mounted() {\n    var vm = this;\n    $(\"#selectall\").click(function () {\n      if ($(this).is(\":checked\")) {\n        $(\"input:checkbox\").prop(\"checked\", true);\n      } else {\n        vm.checked_list = [];\n        $(\"input:checkbox\").prop(\"checked\", false);\n      }\n    });\n    $(\"#usermodel\").on(\"hidden.bs.modal\", () => {\n      vm.clear_fields();\n      // vm.role_selected = null;\n      // vm.role_type_selected = null;\n    });\n    // this.$root.$on(\"correctPassword\", (value) => {\n    //   console.log(value);\n    //   this.correct_password = value;\n    // });\n  },\n  watch: {\n    search_name() {\n      if (this.search_name === \"\") {\n        this.load_user();\n        this.isVisibleSearchClear = false;\n      } else if (this.search_name !== \"\") {\n        this.isVisibleSearchClear = true;\n      }\n    },\n  },\n  _methods: {\n    open_usermodel(){\n        if(this.portal_roles.length > 0) {\n          $(\"#usermodel\").modal(\"show\");\n        }\n        else{\n          Swal.fire({\n            text:this.tlt('add_user_no_roles_added_msg'),\n            type: \"warning\",\n            showConfirmButton: true,\n            timer: 6000,\n          });\n        }\n    },\n    checkpassword(correctPassword) {\n      this.correct_password = correctPassword;\n    },\n    // check_value () {\n\n    //   if (this.password != \"\") {\n    //     document.getElementById(\"message\").style.display = \"block\";\n    //   } else {\n    //     document.getElementById(\"message\").style.display = \"none\";\n    //   }\n    //   var lowerCaseLetters = /[a-z]/g;\n    //   if (this.password.match(lowerCaseLetters)) {\n    //     letter.classList.remove(\"invalid\");\n    //     letter.classList.add(\"valid\");\n    //     this.array[0] = 1;\n    //   } else {\n    //     letter.classList.remove(\"valid\");\n    //     letter.classList.add(\"invalid\");\n    //     this.array[0] = 0;\n    //   }\n\n    //   // Validate capital letters\n    //   var upperCaseLetters = /[A-Z]/g;\n    //   if (this.password.match(upperCaseLetters)) {\n    //     capital.classList.remove(\"invalid\");\n    //     capital.classList.add(\"valid\");\n    //     this.array[1] = 1;\n    //   } else {\n    //     capital.classList.remove(\"valid\");\n    //     capital.classList.add(\"invalid\");\n    //     this.array[1] = 0;\n    //   }\n\n    //   // Validate numbers\n    //   var numbers = /[0-9]/g;\n    //   if (this.password.match(numbers)) {\n    //     number.classList.remove(\"invalid\");\n    //     number.classList.add(\"valid\");\n    //     this.array[2] = 1;\n    //   } else {\n    //     number.classList.remove(\"valid\");\n    //     number.classList.add(\"invalid\");\n    //     this.array[2] = 0;\n    //   }\n\n    //   // Special Character\n    //   var specials = /[#@!%*?&$]/g;\n    //   if (this.password.match(specials)) {\n    //     special.classList.remove(\"invalid\");\n    //     special.classList.add(\"valid\");\n    //     this.array[3] = 1;\n    //   } else {\n    //     special.classList.remove(\"valid\");\n    //     special.classList.add(\"invalid\");\n    //     this.array[3] = 0;\n    //   }\n    //   // Validate length\n    //   if (this.password.length >= 8) {\n    //     var length = document.getElementById(\"length\");\n    //     length.classList.remove(\"invalid\");\n    //     length.classList.add(\"valid\");\n    //     this.array[4] = 1;\n    //   } else {\n    //     var length = document.getElementById(\"length\");\n    //     length.classList.remove(\"valid\");\n    //     length.classList.add(\"invalid\");\n    //     this.array[4] = 0;\n    //   }\n    //   var sum = this.array[0] + this.array[1] + this.array[2] + this.array[3] + this.array[4];\n    //   if (sum == 5 || sum == 0) {\n    //     document.getElementById(\"message\").style.display = \"none\";\n    //   } else {\n    //     document.getElementById(\"message\").style.display = \"block\";\n    //   }\n    // },\n    clear_search_name() {\n      this.search_name = \"\";\n    },\n    load_user() {\n      this.spinnerOn = true;\n      this.checked_list = [];\n      this.emaillist = [];\n      this.role_selected = null;\n      this.portal_roles = [];\n      this.roles_dropwdown = [\n        {\n          title: \"Portal Role\",\n          list: [],\n        },\n        {\n          title: \"Bot Role\",\n          list: [],\n        },\n      ];\n      this.selected_role = \"\";\n      $(\"input:checkbox\").prop(\"checked\", false);\n      if (\n        !this.$session.has(\"CompanyId\") &&\n        this.$session.get(\"UserInformation\").role == \"SuperAdmin\"\n      ) {\n        toastr.warning(this.tlt('add_user_load_user_select_company'));\n      }\n      if (this.$session.get(\"UserInformation\").role == \"SuperAdmin\") {\n        if (this.$session.has(\"CompanyId\")) {\n          this.companyid = this.$session.get(\"CompanyId\");\n          this.companyname = this.$session.get(\"CompanyName\");\n        } else {\n          toastr.warning(this.tlt('add_user_load_user_select_company2'));\n        }\n      } else {\n        this.companyid = this.$session.get(\"UserInformation\").company_id;\n        this.companyname = this.$session.get(\"UserInformation\").company_name;\n      }\n      axios\n        .post(\n          api_calls.load_users_url(),\n          {\n            company_id: this.companyid,\n            company_name: this.companyname,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            email: this.$session.get(\"UserInformation\").email,\n            token: this.$session.get(\"UserInformation\").tokens,\n            page_no: this.page_no,\n            per_page: this.per_page,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          if (response.data.message.MSG_CODE == this.api_status_code.DATA_AVAILABLE.MSG_CODE) {\n            this.number_of_rows = response.data.pagination.total_data == undefined ? 0 : response.data.pagination.total_data;\n            this.total_pages = response.data.pagination.total_page == undefined ? 0 : response.data.pagination.total_page;\n            this.update_users(response.data.data.Email, response.data.data.Role);\n            this.setpagination(this.page_no);           \n          } else if (response.data.message.MSG_CODE == this.api_status_code.EMPTY_DATA.MSG_CODE){\n              Swal({\n                text: response.data.message.MSG,\n                toast: true,\n                position: 'top-end',\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"warning\",\n                timer:2500\n              })\n          }\n          else{\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              showCancelButton: false,\n              showConfirmButton: false,\n              type: \"error\",\n              timer:2500\n            })\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      axios\n        .post(\n          api_calls.main_role_url(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            isShow: true,\n            per_page: 1000,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n            // portal_roles = [];\n            if (response.data.message.MSG_CODE == this.api_status_code.DATA_AVAILABLE.MSG_CODE) {          \n              if (response.data.data.Portal.length > 0) {\n                for (let i = 0; i < response.data.data.Portal.length; i++) {\n                  // console.log(portal_roles);\n                  this.portal_roles.push({\n                    // role: [{\n                    //   rolename: response.data.Portal[i]\n                    //   }],\n                    role: response.data.data.Portal[i],\n                    type: \"Portal\",\n                  });  \n                }\n              }\n              if (response.data.data.Bot.length > 0) {\n                for (let i = 0; i < response.data.data.Bot.length; i++) {\n                  this.portal_roles.push({\n                    // role: [{\n                    //   rolename:response.data.Bot[i]\n                    // }],\n                    role: response.data.data.Bot[i],\n                    type: \"Bot\",\n                  });\n                }\n              } \n              for (let i = 0; i < this.portal_roles.length; i++) {\n              if (this.portal_roles[i].type === \"Portal\") {\n                  for (let j = 0; j < this.roles_dropwdown.length; j++) {\n                    if (this.roles_dropwdown[j].title === \"Portal Role\") {\n                      this.roles_dropwdown[j].list.push({\n                        name: this.portal_roles[i].role,\n                        type: \"Portal User\",\n                      }); \n                    }\n                  }\n                }\n                if (this.portal_roles[i].type === \"Bot\") {\n                  for (let j = 0; j < this.roles_dropwdown.length; j++) {\n                    if (this.roles_dropwdown[j].title === \"Bot Role\") {\n                      this.roles_dropwdown[j].list.push({\n                        name: this.portal_roles[i].role,\n                        type: \"Bot User\",\n                      });\n                    }\n                  }\n                }\n              } \n            }else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\"\n              })\n            }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    pagination_class(index) {\n      if (index == this.page_no) {\n        return \" active\";\n      } else {\n        return \"\";\n      }\n    },\n    check_list_array(e, index) {\n      if (index == \"all\") {\n        if (e.target.checked == true) {\n          this.checked_list = this.users.map((user) => {\n            return user.email;\n          });\n        } else if (e.target.checked == false) {\n          this.checked_list = [];\n        }\n      } else {\n        if (e.target.checked == true) {\n          let val_index = this.checked_list.indexOf(this.users[index].email);\n          var temp = this.users[index].email;\n          if (val_index == -1) {\n            this.checked_list.push(temp);\n          }\n        } else if (e.target.checked == false) {\n          var selectall = document.querySelector(\"#selectall\");\n          selectall.checked = false;\n          let userIndex = this.checked_list.indexOf(this.users[index].email);\n          this.checked_list.splice(userIndex, 1);\n        }\n      }\n    },\n    delete_user(index) {\n      this.emaillist = [];\n      if (index == \"all\") {\n        if (this.checked_list.length == 0) {\n          Swal.fire({\n            title: this.tlt('add_user_no_user_select_msg'),\n            text: \"\",\n            type: \"error\",\n            timer: 2000,\n          });\n        } else if (this.checked_list.length > 0) {\n          for (let i = 0, n = this.checked_list.length; i < n; i++) {\n            this.emaillist.push(this.checked_list[i]);\n          }\n          this.delete_user_api();\n        }\n      } else {\n        this.emaillist.push(this.users[index].email);\n        this.delete_user_api();\n      }\n    },\n    delete_user_api() {\n      Swal.fire({\n        title: this.tlt('add_user_swal_alert_msg'),\n        text: this.tlt('add_user_no_revert_msg'),\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: this.tlt('add_user_swal_delete_msg'),\n      }).then((result) => {\n        // this.spinnerOn=true;\n          if(result.dismiss ==='cancel'){\n            this.emaillist = [];\n          }else if (result.value) {\n          axios\n            .post(\n              api_calls.delete_user_url(),\n              {\n                emaillist: this.emaillist,\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                subscription: this.$session.get(\"UserInformation\").subscription,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.spinnerOn = false;\n              var userlist = [];\n              for (var i in this.emaillist) {\n                userlist.push({\n                  username: this.emaillist[i].email,\n                });\n              }\n              // axios\n              //   .post(api_calls.users_list_sync(), {\n              //     delete: userlist,\n              //   })\n              //   .then((response) => {\n              //     // console.log(response.data);\n              //   });\n\n              if (response.data.message.MSG_CODE == this.api_status_code.SUCCESSFUL_DB_QUERY.MSG_CODE) {\n                toastr.success(this.tlt('add_user_deleted_successful_msg'));\n                if(((this.emaillist.length === 1 && this.users.length === 1) ||\n                  (this.emaillist.length === this.users.length)) && \n                    this.page_no >1){\n                      this.page_no = this.page_no - 1;\n                  }\n              }else if(response.data.message.MSG_CODE == this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE) {\n                toastr.error(this.tlt('search_product_internal_server_msg1'));\n                this.load_user();\n              }  \n              this.checked_list = [];\n              this.emaillist = [];\n              this.load_user();\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      });\n    },\n    password_toggle(event) {\n      event.preventDefault();\n      var password = document.getElementById(\"form_password\");\n      if (password.type == \"text\") {\n        password.type = \"password\";\n      } else if (password.type == \"password\") {\n        password.type = \"text\";\n      }\n    },\n    update_users(message1, message2) {\n      if (message1 == null || message2 == null) {\n      } else {\n        this.users = [];\n        for (var i in message1) {\n          this.users.push({\n            email: message1[i],\n            role: message2[i],\n          });\n        }\n      }\n    },\n    page_require(page_no) {\n      $(\"input:checkbox\").prop(\"checked\", false);\n      this.checked_list = [];\n      this.emaillist = [];\n      if (page_no == 0 || page_no == this.total_pages + 1) {\n        event.preventDefault();\n      } else if (this.search_name != \"\") {\n        if (page_no == \"...s\") {\n          this.page_no = Math.ceil((1 + this.page_no) / 2);\n        } else if (page_no == \"...l\") {\n          this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n        }else{\n          this.page_no = page_no;\n        }\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.load_users_url(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              issearch: true,\n              key: this.search_name,\n              per_page: this.per_page,\n              page_no: this.page_no,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            if (\n                response.data.message.MSG_CODE != this.api_status_code.USER_ROLE_SET_ALREADY_EXISTS_2002.MSG_CODE &&\n                response.data.message.MSG_CODE != this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE &&\n                response.data.message.MSG_CODE != this.api_status_code.EMPTY_DATA.MSG_CODE  &&\n                response.data.message.MSG_CODE != this.api_status_code.SUPER_ADMIN_EXISTS_ERROR.MSG_CODE\n            ){\n            if (response.data. data.Email.length != 0) {\n                this.number_of_rows = response.data.pagination.total_data == undefined ? 0 : response.data.pagination.total_data;\n                this.total_pages = response.data.pagination.total_page == undefined ? 0 : response.data.pagination.total_page;\n              this.users = [];\n              for (var i = 0; i < this.number_of_rows; i++) {\n                this.users.push({\n                    email: response.data.data[i].Email,\n                    role: response.data.data[i].Role,\n                });\n              }\n              this.page_no = page_no;\n              this.setpagination(this.page_no);\n            }\n            }  else if (response.data.message.MSG_CODE == this.api_status_code.EMPTY_DATA.MSG_CODE) {\n              toastr.error(this.tlt('add_user_no_user_found_msg'));\n              this.load_user();\n            } else if (response.data.message.MSG_CODE == this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE) {\n              toastr.error(this.tlt('search_product_internal_server_msg1'));\n              this.load_user();\n            } else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\"\n              })\n            }\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        $(\"input:checkbox\").prop(\"checked\", false);\n        if (page_no == \"...s\") {\n          this.page_no = Math.ceil((1 + this.page_no) / 2);\n        } else if (page_no == \"...l\") {\n          this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n        } else {\n          this.page_no = page_no;\n        }\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.load_users_url(),\n            {\n              intent: this.new_intents,\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              subscription: this.$session.get(\"UserInformation\").subscription,\n              page_no: this.page_no,\n              per_page: this.per_page,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            if (response.data.message.MSG_CODE == this.api_status_code.DATA_AVAILABLE.MSG_CODE) {\n              this.number_of_rows = response.data.pagination.total_data == undefined ? 0 : response.data.pagination.total_data;\n              this.total_pages = response.data.pagination.total_page == undefined ? 0 : response.data.pagination.total_page;\n              this.update_users(response.data.data.Email, response.data.data.Role);\n              this.setpagination(this.page_no);\n            }else{\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\",\n                timer:2500\n              })\n            }\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    // role_submit_api() {\n    //   axios\n    //     .post(\n    //       api_calls.role_url(),\n    //       {\n    //         company_id: this.companyid,\n    //         company_name: this.companyname,\n    //         superadmincompany_name: this.$session.get(\"UserInformation\")\n    //           .company_name,\n    //         superadmincompany_id: this.$session.get(\"UserInformation\")\n    //           .company_id,\n    //         role: this.$session.get(\"UserInformation\").role,\n    //         email: this.$session.get(\"UserInformation\").email,\n    //         license_key: this.$session.get(\"UserInformation\").license_key,\n    //         token: this.$session.get(\"UserInformation\").tokens,\n    //       },\n    //       {\n    //         headers: {\n    //           Authorization: `Bearer ${this.$session.get(\"at\")}`,\n    //         },\n    //       }\n    //     )\n    //     .then((response) => {\n    //       this.roles = response.data.rolelist;\n    //     })\n    //     .catch((e) => {\n    //       if (\n    //         e.response.status === 410 ||\n    //         e.response.status === 440 ||\n    //         e.response.status === 409\n    //       ) {\n    //         this.$root.$emit(\"Session_Expired\", e.response.data);\n    //       }\n    //     });\n    // },\n    add_user() {\n      event.preventDefault();\n      if (this.email == \"\" || this.validEmail != true) {\n        toastr.error(this.tlt('add_user_enter_valid_email_msg'));\n      }\n      // else if(this.show_password_field&&\n      //   (this.password==\"\"||this.validPassword!=true)) {\n      //   toastr.error(\"Please Enter a Valid Password\");\n      // }\n      // else if(this.portal_roles.type === \"Bot\"){\n      //   if (this.email == \"\" || this.validEmail != true) {\n      //       toastr.error(\"Please Enter a Valid Email\");\n      // }\n      // }\n      // else if (this.correct_password == false && this.role_type_selected === \"Portal User\") {\n      //   toastr.error(\"Please Enter a Valid Password\");\n      // } \n      else if (this.selected_role == \"\") {\n        toastr.error(this.tlt('add_user_select_role_name_msg'));\n      } else {\n        this.show_loader = true;\n        this.spinnerOn = true;\n        $(\"#usermodel\").modal(\"hide\");\n        var current_date = new Date();\n        // if(this.role_type_selected === \"Portal User\")\n        axios\n          .post(\n            api_calls.add_user_url(),\n            {\n              role: this.role_selected,\n              staffemail: this.email,\n              email: this.$session.get(\"UserInformation\").email,\n              password: this.password,\n              company_id: this.companyid,\n              company_name: this.companyname,\n              domain: this.$session.get(\"UserInformation\").domain,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              date: current_date,\n              user_type: this.role_type_selected,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            // this.role_selected = null;\n            // var response_api = response.data;\n            if (response.data.message.MSG_CODE == this.api_status_code.NEW_USER_REGISTERED_SUCCESS_2004.MSG_CODE) {\n              Swal({\n                title: this.tlt('add_user_added_successful_msg'),\n                type: \"success\",\n                text:\n                  this.tlt('add_user_user_verification_msg'),\n              });\n            } else if (response.data.message.MSG_CODE == this.api_status_code.DUPLICATE_EMAIL_1015.MSG_CODE) {\n              Swal({\n                type: \"error\",\n                text:\n                  this.tlt('add_user_email_already_registered_msg'),\n              });\n            } else if (response.data.message.MSG_CODE == this.api_status_code.CHAT_AGENT_LIMIT_REACHED.MSG_CODE) {\n              Swal({\n                type: \"warning\",\n                text: this.tlt('add_user_upgrade_plan_for_live_chat_msg'),\n                timer: 3000\n              });\n            } else if (response.data.message.MSG_CODE == this.api_status_code.EMAIL_REGISTERED_WITH_OTHER_COMPANY.MSG_CODE) {\n              Swal({\n                type: \"error\",\n                text: this.tlt('user_registered_with_other_company'),\n                timer: 3000\n              });\n            } else if (response.data.message.MSG_CODE == this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE) {\n                Swal({\n                  type: \"error\",\n                  text: this.tlt('add_role_internal_server_msg'),\n                  timer:3000,     \n                });\n             } else if (response.data.message.MSG_CODE == this.api_status_code.EMAIL_REGISTERED_WITH_OTHER_COMPANY.MSG_CODE) {\n                Swal({\n                  type: \"error\",\n                  text: response.data.message.MSG,\n                  timer:3000,     \n                });\n             }\n             else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\",\n                timer: 2500\n              })\n            }\n            this.load_user();\n          })\n          .catch((e) => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    clear_fields() {\n      this.email = \"\";\n      this.password = \"\";\n      this.selected_role = \"\";\n    },\n    callsearch() {\n      if (event.keyCode === 13) {\n        this.search_product();\n      }\n    },\n    search_product() {\n      if (this.search_name != \"\") {\n        $(\"input:checkbox\").prop(\"checked\", false);\n        this.checked_list = [];\n        this.emaillist = [];\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.load_users_url(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              issearch: true,\n              key: this.search_name,\n              per_page: this.per_page,\n              page_no: 1,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            if (\n                response.data.message.MSG_CODE != this.api_status_code.USER_ROLE_SET_ALREADY_EXISTS_2002.MSG_CODE &&\n                response.data.message.MSG_CODE != this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE &&\n                response.data.message.MSG_CODE != this.api_status_code.EMPTY_DATA.MSG_CODE  &&\n                response.data.message.MSG_CODE != this.api_status_code.SUPER_ADMIN_EXISTS_ERROR.MSG_CODE\n            ) {\n              // response.data.data.Email.length != 0\n              if (response.data.message.MSG_CODE == this.api_status_code.DATA_AVAILABLE.MSG_CODE) {\n                this.number_of_rows = response.data.pagination.total_data == undefined ? 0 : response.data.pagination.total_data;\n                this.total_pages = response.data.pagination.total_page == undefined ? 0 : response.data.pagination.total_page;\n                this.users = [];\n                for (var i = 0; i < this.number_of_rows; i++) {\n                  this.users.push({\n                    email: response.data.data[i].Email,\n                    role: response.data.data[i].Role,\n                  });\n                }\n                this.page_no = 1;\n                this.setpagination(this.page_no);\n              }\n            } else if (response.data.message.MSG_CODE == this.api_status_code.EMPTY_DATA.MSG_CODE) {\n              toastr.error(this.tlt('add_user_no_user_found_msg'));\n              this.load_user();\n            } else if (response.data.message.MSG_CODE == this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE) {\n              toastr.error(this.tlt('search_product_internal_server_msg1'));\n              this.load_user();\n            } else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\",\n                timer: 2500\n              })\n            }\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        toastr.error(this.tlt('add_user_data_for_search_msg'));\n      }\n    },\n    setpagination(page_no) {\n      this.page_array = [];\n      if (this.total_pages <= 7) {\n        for (let i = 0; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no == 1) {\n        for (let i = 0; i < 4; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no == this.total_pages) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = this.total_pages - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no <= 4) {\n        for (let i = 0; i < page_no + 3; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no >= this.total_pages - 4) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 3; i <= page_no + 3; i++) {\n          this.page_array.push(i);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      }\n    },\n    show_field(selectedOption, id) {\n      // console.log(selectedOption);\n      this.role_selected = selectedOption.name;\n      this.role_type_selected = selectedOption.type;\n      this.show_email_field = false;\n      this.show_password_field = false;\n      for (let i = 0; i < this.portal_roles.length; i++) {\n        if (this.portal_roles[i].role === selectedOption.name) {\n          if (this.portal_roles[i].type === \"Bot\") {\n            this.show_email_field = true;\n          } else if (this.portal_roles[i].type === \"Portal\") {\n            this.show_email_field = true;\n            this.show_password_field = true;\n          }\n        }\n      }\n    },\n  },\n  get methods() {\n    return this._methods;\n  },\n  set methods(value) {\n    this._methods = value;\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.swal-size {\n  height: 20px !important;\n}\n.pass.form-control,\n.email.form-control {\n  background-position: 8px 50% !important;\n}\n.view-pass {\n  top: 10px;\n}\n// #message {\n//   display: none;\n//   background: #fff;\n//   color: #000;\n//   position: relative;\n//   padding: 20px;\n//   margin-top: 10px;\n// }\n\n// .valid {\n//   color: green;\n// }\n\n// .valid:before {\n//   position: relative;\n//   left: -35px;\n//   content: \"✔\";\n// }\n\n// /* Add a red text color and an \"x\" when the requirements are wrong */\n// .invalid {\n//   color: red;\n// }\n\n// .invalid:before {\n//   position: relative;\n//   left: -35px;\n//   content: \"✖\";\n// }\n// .is-invalid {\n//   color: red;\n// }\n</style>\n\n"]}]}