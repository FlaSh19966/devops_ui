{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/AnalyticsConfigV2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/AnalyticsConfigV2.vue","mtime":1643027096184},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgc3dhbCBmcm9tICdzd2VldGFsZXJ0Mic7CgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBbmFseXRpY3NDb25maWdWMiIsCiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3QsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgY29sdW1uczogW10sCiAgICAgIG1ldHJpY3M6IFtdLAogICAgICBmaWxlX2xhYmVsOiAiQ2hvb3NlIGZpbGUiLAogICAgICBpc19maWxlX3VwbG9hZGVkOiBmYWxzZSwKICAgICAgbmV3Y29sdW1uczogW10sCiAgICAgIGlzY29sdW1uc25hbWVjaGFuZ2VkOiBmYWxzZSwKICAgICAgb2JqZWN0X25hbWU6ICIiLAogICAgICBtZXRyaWNzZGF0YTogW10sCiAgICAgIGlzbWV0cmljc3NhdmVkOiBmYWxzZSwKICAgICAgZGF0YXNldF9uYW1lOiAiIiwKICAgICAgZmlsZTogbnVsbCwKICAgICAgbmV3Y29sdW1uc2NvbXBsZXRlOiBbXSwKICAgICAgY29sdW1uX2RldGFpbHM6IHt9LAogICAgICBpc19kYXRhc2V0X2VkaXRhYmxlOiBmYWxzZSwKICAgICAgZGF0YXNldHM6W10sCiAgICAgIHNob3dfZGF0YXNldF9zZXR0aW5nczogZmFsc2UsCiAgICAgIC8vIGNvdW50cnlfY29kZXM6WyJBRk4iLCJFVVIiLCJBTEwiLCJEWkQiLCJVU0QiLCJFVVIiLCJBT0EiLCJYQ0QiLCJYQ0QiLCJBUlMiLCJBTUQiLCJBV0ciLCJBVUQiLCJFVVIiLCJBWk4iLCJCU0QiLCJCSEQiLCJCRFQiLCJCQkQiLCJCWU4iLCJFVVIiLCJCWkQiLCJYT0YiLCJCTUQiLCJJTlIiLCJCVE4iLCJCT0IiLCJCT1YiLCJVU0QiLCJCQU0iLCJCV1AiLCJOT0siLCJCUkwiLCJVU0QiLCJCTkQiLCJCR04iLCJYT0YiLCJCSUYiLCJDVkUiLCJLSFIiLCJYQUYiLCJDQUQiLCJLWUQiLCJYQUYiLCJYQUYiLCJDTFAiLCJDTEYiLCJDTlkiLCJBVUQiLCJBVUQiLCJDT1AiLCJDT1UiLCJLTUYiLCJDREYiLCJYQUYiLCJOWkQiLCJDUkMiLCJYT0YiLCJIUksiLCJDVVAiLCJDVUMiLCJBTkciLCJFVVIiLCJDWksiLCJES0siLCJESkYiLCJYQ0QiLCJET1AiLCJVU0QiLCJFR1AiLCJTVkMiLCJVU0QiLCJYQUYiLCJFUk4iLCJFVVIiLCJFVEIiLCJFVVIiLCJGS1AiLCJES0siLCJGSkQiLCJFVVIiLCJFVVIiLCJFVVIiLCJYUEYiLCJFVVIiLCJYQUYiLCJHTUQiLCJHRUwiLCJFVVIiLCJHSFMiLCJHSVAiLCJFVVIiLCJES0siLCJYQ0QiLCJFVVIiLCJVU0QiLCJHVFEiLCJHQlAiLCJHTkYiLCJYT0YiLCJHWUQiLCJIVEciLCJVU0QiLCJBVUQiLCJFVVIiLCJITkwiLCJIS0QiLCJIVUYiLCJJU0siLCJJTlIiLCJJRFIiLCJYRFIiLCJJUlIiLCJJUUQiLCJFVVIiLCJHQlAiLCJJTFMiLCJFVVIiLCJKTUQiLCJKUFkiLCJHQlAiLCJKT0QiLCJLWlQiLCJLRVMiLCJBVUQiLCJLUFciLCJLUlciLCJLV0QiLCJLR1MiLCJMQUsiLCJFVVIiLCJMQlAiLCJMU0wiLCJaQVIiLCJMUkQiLCJMWUQiLCJDSEYiLCJFVVIiLCJFVVIiLCJNT1AiLCJNS0QiLCJNR0EiLCJNV0siLCJNWVIiLCJNVlIiLCJYT0YiLCJFVVIiLCJVU0QiLCJFVVIiLCJNUk8iLCJNVVIiLCJFVVIiLCJYVUEiLCJNWE4iLCJNWFYiLCJVU0QiLCJNREwiLCJFVVIiLCJNTlQiLCJFVVIiLCJYQ0QiLCJNQUQiLCJNWk4iLCJNTUsiLCJOQUQiLCJaQVIiLCJBVUQiLCJOUFIiLCJFVVIiLCJYUEYiLCJOWkQiLCJOSU8iLCJYT0YiLCJOR04iLCJOWkQiLCJBVUQiLCJVU0QiLCJOT0siLCJPTVIiLCJQS1IiLCJVU0QiLCIiLCJQQUIiLCJVU0QiLCJQR0siLCJQWUciLCJQRU4iLCJQSFAiLCJOWkQiLCJQTE4iLCJFVVIiLCJVU0QiLCJRQVIiLCJFVVIiLCJST04iLCJSVUIiLCJSV0YiLCJFVVIiLCJTSFAiLCJYQ0QiLCJYQ0QiLCJFVVIiLCJFVVIiLCJYQ0QiLCJXU1QiLCJFVVIiLCJTVEQiLCJTQVIiLCJYT0YiLCJSU0QiLCJTQ1IiLCJTTEwiLCJTR0QiLCJBTkciLCJYU1UiLCJFVVIiLCJFVVIiLCJTQkQiLCJTT1MiLCJaQVIiLCIiLCJTU1AiLCJFVVIiLCJMS1IiLCJTREciLCJTUkQiLCJOT0siLCJTWkwiLCJTRUsiLCJDSEYiLCJDSEUiLCJDSFciLCJTWVAiLCJUV0QiLCJUSlMiLCJUWlMiLCJUSEIiLCJVU0QiLCJYT0YiLCJOWkQiLCJUT1AiLCJUVEQiLCJUTkQiLCJUUlkiLCJUTVQiLCJVU0QiLCJBVUQiLCJVR1giLCJVQUgiLCJBRUQiLCJHQlAiLCJVU0QiLCJVU0QiLCJVU04iLCJVWVUiLCJVWUkiLCJVWlMiLCJWVVYiLCJWRUYiLCJWTkQiLCJVU0QiLCJVU0QiLCJYUEYiLCJNQUQiLCJZRVIiLCJaTVciLCJaV0wiLCJYQkEiLCJYQkIiLCJYQkMiLCJYQkQiLCJYVFMiLCJYWFgiLCJYQVUiLCJYUEQiLCJYUFQiLCJYQUciLCJBRkEiLCJGSU0iLCJBTEsiLCJBRFAiLCJFU1AiLCJGUkYiLCJBT0siLCJBT04iLCJBT1IiLCJBUkEiLCJBUlAiLCJBUlkiLCJSVVIiLCJBVFMiLCJBWU0iLCJBWk0iLCJSVVIiLCJCWVIiLCJCWUIiLCJSVVIiLCJCRUMiLCJCRUYiLCJCRUwiLCJCT1AiLCJCQUQiLCJCUkIiLCJCUkMiLCJCUkUiLCJCUk4iLCJCUlIiLCJCR0oiLCJCR0siLCJCR0wiLCJCVUsiLCJDTlgiLCJIUkQiLCJIUksiLCJDWVAiLCJDU0oiLCJDU0siLCJFQ1MiLCJFQ1YiLCJHUUUiLCJFRUsiLCJYRVUiLCJGSU0iLCJGUkYiLCJGUkYiLCJGUkYiLCJHRUsiLCJSVVIiLCJERE0iLCJERU0iLCJHSEMiLCJHSFAiLCJHUkQiLCJGUkYiLCJHTkUiLCJHTlMiLCJHV0UiLCJHV1AiLCJJVEwiLCJJU0oiLCJJRVAiLCJJTFAiLCJJTFIiLCJJVEwiLCJSVVIiLCJSVVIiLCJMQUoiLCJMVkwiLCJMVlIiLCJMU00iLCJaQUwiLCJMVEwiLCJMVFQiLCJMVUMiLCJMVUYiLCJMVUwiLCJNR0YiLCJNV0siLCJNVlEiLCJNTEYiLCJNVEwiLCJNVFAiLCJGUkYiLCJGUkYiLCJNWFAiLCJSVVIiLCJGUkYiLCJNWkUiLCJNWk0iLCJOTEciLCJBTkciLCJOSUMiLCJQRU4iLCJQRUgiLCJQRUkiLCJQRVMiLCJQTFoiLCJQVEUiLCJGUkYiLCJST0siLCJST04iLCJST0wiLCJSVVIiLCJGUkYiLCJGUkYiLCJGUkYiLCJJVEwiLCJDU0QiLCJFVVIiLCJTS0siLCJTSVQiLCJaQUwiLCJTREciLCJSSEQiLCJFU0EiLCJFU0IiLCJFU1AiLCJTREQiLCJTRFAiLCJTUkciLCJDSEMiLCJSVVIiLCJUSlIiLCJJRFIiLCJUUEUiLCJUUkwiLCJUUlkiLCJSVVIiLCJUTU0iLCJVR1MiLCJVR1ciLCJVQUsiLCJTVVIiLCJVU1MiLCJVWU4iLCJVWVAiLCJSVVIiLCJWRUIiLCJWRUYiLCJWRUYiLCJWTkMiLCJZREQiLCJZVUQiLCJZVU0iLCJZVU4iLCJaUk4iLCJaUloiLCJaTUsiLCJaV0MiLCJaV0QiLCJaV0QiLCJaV04iLCJaV1IiLCJYRk8iLCJYUkUiLCJYRlUiXSwgCiAgICAgIGNvdW50cnlfaXNvX2NvZGU6IG51bGwsCiAgICAgIGN1cnJlbmN5X2Zvcm1hdF9tb2RhbDogJycsCiAgICAgIGlzX2NvdW50cnlfY29kZXNfZHJvcGRvd25fZGlzYWJsZWQ6IHRydWUsCiAgICAgIGN1cnJlbnRfY29sdW1uX2luZGV4OiBudWxsLAogICAgICBhZ2dyZWdhdGlvbl9vcHRpb25zOiBbbnVsbCwgIlNVTSIsIkFWRyJdLAogICAgICBzYW1wbGU6ICIiLAogICAgICBjb3VudHJ5X2NvZGVzOiBbIkFMTCIsIkFGTiIsIkFSUyIsIkFXRyIsIkFVRCIsIkFaTiIsIkJTRCIsIkJCRCIsIkJZUiIsIkJaRCIsIkJNRCIsIkJPQiIsIkJBTSIsIkJXUCIsIkJHTiIsIkJSTCIsIkJORCIsIktIUiIsIkNBRCIsIktZRCIsIkNMUCIsIkNOWSIsIkNPUCIsIkNSQyIsIkhSSyIsIkNVUCIsIkNaSyIsIkRLSyIsIkRPUCIsIkVHUCIsIlNWQyIsIkVFSyIsIkVVUiIsIkZLUCIsIkZKRCIsIkdFTCIsIkdIQyIsIkdJUCIsIkdUUSIsIkdHUCIsIkdZRCIsIkhOTCIsIkhLRCIsIkhVRiIsIklTSyIsIklOUiIsIklEUiIsIklSUiIsIklNUCIsIklMUyIsIkpNRCIsIkpQWSIsIkpFUCIsIktaVCIsIktQVyIsIktSVyIsIktHUyIsIkxBSyIsIkxWTCIsIkxCUCIsIkxSRCIsIkxUTCIsIk1LRCIsIk1ZUiIsIk1VUiIsIk1YTiIsIk1OVCIsIk1aTiIsIk5BRCIsIk5QUiIsIkFORyIsIk5aRCIsIk5JTyIsIk5HTiIsIk5PSyIsIk9NUiIsIlBLUiIsIlBBQiIsIlBZRyIsIlBFTiIsIlBIUCIsIlBMTiIsIlFBUiIsIlJPTiIsIlJVQiIsIlNIUCIsIlNBUiIsIlJTRCIsIlNDUiIsIlNHRCIsIlNCRCIsIlNPUyIsIlpBUiIsIkxLUiIsIlNFSyIsIkNIRiIsIlNSRCIsIlNZUCIsIlRXRCIsIlRIQiIsIlRURCIsIlRSTCIsIlRWRCIsIlVBSCIsIkdCUCIsIlVTRCIsIlVZVSIsIlVaUyIsIlZFRiIsIlZORCIsIllFUiIsIlpXRCJdLAogICAgICBtZXRyaWNfb3BlcmF0aW9uX29wdGlvbnM6IFsnU1VNJywgJ0FWRycsICdDT1VOVCcsICdOVU5JUVVFJ10sCiAgICAgIG9sZF93b3Jrc2hlZXRfZGV0YWlsczoge30sCiAgICAgIHBvc3RncmVzX2ljb25fcGF0aDogcmVxdWlyZSgnQC9wb3J0YWwvYXNzZXRzL2ltZy9wb3N0Z3Jlc19pY29uLnBuZycpLAogICAgICAvLyBteXNxbF9pY29uX3BhdGg6IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvbXlzcWxfaWNvbi5wbmcnKSwKICAgICAgbXlzcWxfaWNvbl9wYXRoOiByZXF1aXJlKCdAL3BvcnRhbC9hc3NldHMvaW1nL2xvZ28tbXlzcWwucG5nJyksCiAgICAgIHNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nczogZmFsc2UsCiAgICAgIGRhdGFiYXNlX2RhdGFzZXRfaWQ6IG51bGwsCiAgICAgIGRhdGFiYXNlX2RhdGFzZXRfbmFtZTogbnVsbCwKICAgICAgZGF0YWJhc2Vfc2NoZW1hX25hbWU6IG51bGwsCiAgICAgIGRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmc6IG51bGwsCiAgICAgIGRhdGFiYXNlX2hvc3Q6IG51bGwsCiAgICAgIGRhdGFiYXNlX3BvcnQ6IG51bGwsCiAgICAgIGRhdGFiYXNlX3VzZXJuYW1lOiBudWxsLAogICAgICBkYXRhYmFzZV9wYXNzd29yZDogbnVsbCwKICAgICAgZGF0YWJhc2VfZGJfbmFtZTogbnVsbCwKICAgICAgc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzX2RldGFpbHM6IGZhbHNlLAogICAgICBjdXJyZW50X2RhdGFzZXRfZGF0YWJhc2VfaWNvbjogbnVsbCwKICAgICAgaXNTaG93aW5nX3Rlc3Q6IGZhbHNlLAogICAgICBzaG93X2RhdGFiYXNlX29wdGlvbnM6IHRydWUsCiAgICAgIGRhdGFiYXNlX2RhdGFzZXRfY29ubmVjdGlvbl90eXBlOiAnSkRCQycsCgogICAgICAKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRfZGF0YXNldF9saXN0KCk7CiAgICAvLyB0aGlzLnBvc3RncmVzX2ljb25fcGF0aCA9IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvcG9zdGdyZXNfaWNvbi5wbmcnKQogIH0sCiAgbWV0aG9kczogewogICAgb3Blbl9zZXR0aW5nc19mb3JfZGF0YXNldChpbmRleCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTsKICAgICAgaWYoaW5kZXggPT09IG51bGwpewogICAgICAgICAgdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YXNldHNbaW5kZXhdKQogICAgICAgICAgdGhpcy5vbGRfd29ya3NoZWV0X2RldGFpbHMgPSB0aGlzLmRhdGFzZXRzW2luZGV4XS5vbGRfd29ya3NoZWV0X2RldGFpbHM7CiAgICAgICAgICB0aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUgPSB0cnVlOwogICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gdGhpcy5kYXRhc2V0c1tpbmRleF0uZmlsZV9uYW1lOwogICAgICAgICAgJCgiI2lucHV0R3JvdXBGaWxlMDEiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgJCgiI2RhdGFzZXRfbmFtZSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICB0aGlzLmRhdGFzZXRfbmFtZSA9IHRoaXMuZGF0YXNldHNbaW5kZXhdLmRhdGFfbmFtZTsKICAgICAgICAgICQoIiN1cGxvYWRfZmlsZSIpLmhpZGUoKTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YV9zb3VyY2VzWzBdLndvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9kZXRhaWxzKTsKCgogICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9yZW5hbWVfbWFwKSkgewogICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZToga2V5LAogICAgICAgICAgICAgICAgICBuZXduYW1lOiB2YWx1ZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IHRydWU7CiAgICAgICAgICB2YXIgbWV0cmljc19sZW4gPSB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzLmxlbmd0aDsgCiAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbWV0cmljc19sZW4gOyBpKyspIHsKICAgICAgICAgICAgICB0aGlzLm1ldHJpY3MucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLm1ldHJpY3NbaV0ubmFtZSwKICAgICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzW2ldLmNvbHVtbiwKICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzW2ldLm9wZXJhdGlvbiwKICAgICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1ldHJpY3MpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1ldHJpY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB0aGlzLm1ldHJpY3NkYXRhLnB1c2goewogICAgICAgICAgICAgIG5hbWU6IHRoaXMubWV0cmljc1tpXS5uYW1lLAogICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5tZXRyaWNzW2ldLmNvbHVtbiwKICAgICAgICAgICAgICBvcGVyYXRpb246IHRoaXMubWV0cmljc1tpXS5vcGVyYXRpb24sCiAgICAgICAgICAgICAgLy8gb246IFt0aGlzLm1ldHJpY3NbaV0uY29sdW1uMSwgdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjJdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgb2JqZWN0ID0gdGhpcy5jb2x1bW5zLnJlZHVjZSgKICAgICAgICAgICAgICAob2JqLCBpdGVtKSA9PiBPYmplY3QuYXNzaWduKG9iaiwgeyBbaXRlbS5uYW1lXTogaXRlbS5uZXduYW1lIH0pLAogICAgICAgICAgICAgIHt9CiAgICAgICAgICApOwoKICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5jb2x1bW5fZGV0YWlscykpIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBpZih0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSA9PT0ga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZS5jdXJyZW5jeV9mb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zW2ldLmRhdGFfdHlwZSA9IHZhbHVlLmRhdGF0eXBlOyAKICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jb2x1bW5zW2ldLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBuZXduYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZSA6IHZhbHVlLmRhdGF0eXBlLAogICAgICAgICAgICAgICAgICAgICAgY29sdW1uX3R5cGU6IHZhbHVlLmNvbHVtbl90eXBlLAogICAgICAgICAgICAgICAgICAgICAgYWRkaXRpdmU6IHZhbHVlLmFkZGl0aXZlLAogICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb246ICgodmFsdWUuYWdncmVnYXRpb24gPT09IG51bGwpID8gdmFsdWUuYWdncmVnYXRpb24gPSAiTm9uZSIgOiB2YWx1ZS5hZ2dyZWdhdGlvbiA9IHZhbHVlLmFnZ3JlZ2F0aW9uICksCiAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46dmFsdWUuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgICAgbmxwX3NlYXJjaF9lbmFibGVkOiB2YWx1ZS5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgICAgICAgICBzeW5vbnltczogKHZhbHVlLnN5bm9ueW1zID8gdW5kZWZpbmVkIDogIiIgKSwKICAgICAgICAgICAgICAgICAgICAgIGluZGV4X3R5cGU6IHZhbHVlLmluZGV4X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlfY2F0ZWdvcnk6dmFsdWUuZW50aXR5X2NhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lfZm9ybWF0OiAoKHZhbHVlLmN1cnJlbmN5X2Zvcm1hdCA9PT0gdW5kZWZpbmVkKSA/IG51bGwgOiB2YWx1ZS5jdXJyZW5jeV9mb3JtYXQpCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyBicmVhazsKICAgICAgICAgICAgICB9IAogICAgICAgICAgfSAgCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlKTsKCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cKICAgICAgICAgIHZhciBhcnJheSA9IHt9OyAKICAgICAgICAgIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHt9OwogICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlLmxlbmd0aDsgaSsrKXsKICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV07CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wLmN1cnJlbmN5X2Zvcm1hdCkKICAgICAgICAgIC8vIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLywvZywgJz4+Jyk7CiAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsc1t0ZW1wLm5ld25hbWVdID0gewogICAgICAgICAgICAgICJkYXRhdHlwZSI6IGAke3RlbXAuZGF0YV90eXBlfWAsCiAgICAgICAgICAgICAgImNvbHVtbl90eXBlIjogYCR7dGVtcC5jb2x1bW5fdHlwZX1gLAogICAgICAgICAgICAgICJhZGRpdGl2ZSI6IHRlbXAuYWRkaXRpdmUsCiAgICAgICAgICAgICAgImFnZ3JlZ2F0aW9uIjogdGVtcC5hZ2dyZWdhdGlvbiwKICAgICAgICAgICAgICAiaGlkZGVuIiA6IHRlbXAuaGlkZGVuLAogICAgICAgICAgICAgICJubHBfc2VhcmNoX2VuYWJsZWQiOiB0ZW1wLm5scF9zZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgICAiaW5kZXhfdHlwZSI6IGAke3RlbXAuaW5kZXhfdHlwZX1gLAogICAgICAgICAgICAgICJzeW5vbnltcyI6IGAke3RlbXAuc3lub255bXN9YCwKICAgICAgICAgICAgICAiZW50aXR5X2NhdGVnb3J5IjpgJHt0ZW1wLmVudGl0eV9jYXRlZ29yeX1gLAogICAgICAgICAgICAgICJjdXJyZW5jeV9mb3JtYXQiOnRlbXAuY3VycmVuY3lfZm9ybWF0CiAgICAgICAgICAgICAgfQogICAgICAgICAgLy8gdGVtcC5zeW5vbnltcyA9IHRlbXAuc3lub255bXMucmVwbGFjZSgvPj4gL2csICcsJyk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh3b3Jrc2hlZXRfZGV0YWlscyk7CiAgICAgICAgICB0aGlzLmNvbHVtbl9kZXRhaWxzID0gT2JqZWN0LmFzc2lnbih3b3Jrc2hlZXRfZGV0YWlscyk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZSx0aGlzLmNvbHVtbl9kZXRhaWxzKTsKICAgICAgICAgIHRoaXMubmV3Y29sdW1ucyA9IG9iamVjdDsKICAgICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSB0cnVlOwogICAgICAgICAgdGhpcy5pc21ldHJpY3NzYXZlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAkKCIjaW5wdXRHcm91cEZpbGUwMSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAkKCIjZGF0YXNldF9uYW1lIikucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAKICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlVVVJRCgpIHsKICAgICAgLy8gUHVibGljIERvbWFpbi9NSVQKICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgLy9UaW1lc3RhbXAKICAgICAgdmFyIGQyID0KICAgICAgICAgIChwZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZS5ub3cgJiYgcGVyZm9ybWFuY2Uubm93KCkgKiAxMDAwKSB8fCAwOyAvL1RpbWUgaW4gbWljcm9zZWNvbmRzIHNpbmNlIHBhZ2UtbG9hZCBvciAwIGlmIHVuc3VwcG9ydGVkCiAgICAgIHJldHVybiAieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Ii5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKAogICAgICAgICAgYwogICAgICApIHsKICAgICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2OyAvL3JhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxNgogICAgICAgICAgaWYgKGQgPiAwKSB7CiAgICAgICAgICAvL1VzZSB0aW1lc3RhbXAgdW50aWwgZGVwbGV0ZWQKICAgICAgICAgIHIgPSAoZCArIHIpICUgMTYgfCAwOwogICAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL1VzZSBtaWNyb3NlY29uZHMgc2luY2UgcGFnZS1sb2FkIGlmIHN1cHBvcnRlZAogICAgICAgICAgciA9IChkMiArIHIpICUgMTYgfCAwOwogICAgICAgICAgZDIgPSBNYXRoLmZsb29yKGQyIC8gMTYpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIChjID09PSAieCIgPyByIDogKHIgJiAweDMpIHwgMHg4KS50b1N0cmluZygxNik7CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXR2YWx1ZShpbmRleCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLmRpc2FibGVkID0gIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dCIgKyBpbmRleCkuZGlzYWJsZWQ7CiAgICB9LAogICAgZ2V0RmlsZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgbGV0IGZpbGVuYW1lID0gIiI7CiAgICAgIGxldCBmaWxlZGF0YSA9ICIiOwogICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IGZpbGUubmFtZTsKICAgICAgLy8gY29uc29sZS5sb2coZmlsZSk7CiAgICAgIGlmIChmaWxlLnR5cGUgIT0gInRleHQvY3N2IikgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGV4dDogIk9ubHkgQ1NWIGZpbGVzIGNhbiBiZSB1cGxvYWRlZC4iLAogICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB9CiAgICB9LAogICAgYWRkbWV0cmljdmFsdWUoKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMubWV0cmljcy5wdXNoKHsKICAgICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgICBvcGVyYXRpb246ICJTVU0iLAogICAgICAgICAgY29sdW1uOiBudWxsLAogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVoZWFkZXIodmFsdWVpbmRleCkgewogICAgICB0aGlzLm1ldHJpY3Muc3BsaWNlKHZhbHVlaW5kZXgsIDEpOwogICAgfSwKICAgIGVkaXRjb2x1bW5zKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdmFsaWRhdGlvbl9zdWNjZXNzID0gdHJ1ZTsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmKHRoaXMuY29sdW1uc1tpXS5uZXduYW1lID09PSAnJyB8fCB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyl7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdSBjYW5ub3Qgc2V0IGNvbHVtbiBuYW1lcyBFbXB0eSIpOwogICAgICAgICAgdmFsaWRhdGlvbl9zdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYodmFsaWRhdGlvbl9zdWNjZXNzKXsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIEVkaXQgdGhlIENvbHVtbnM/IiwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnMpCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscyk7CiAgICAgICAgICAgIC8vIHRoaXMubmV3Y29sdW1ucyA9IHRoaXMuY29sdW1ucwogICAgICAgICAgICB2YXIgbmV3Y29sdW1uc2RhdGEgPSBbXTsKICAgICAgICAgICAgaWYoIXRoaXMuaXNfZGF0YXNldF9lZGl0YWJsZSl7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnNbaV0pCiAgICAgICAgICAgICAgICAgICAgbmV3Y29sdW1uc2RhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jb2x1bW5zW2ldLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgbmV3bmFtZTogdGhpcy5jb2x1bW5zW2ldLm5ld25hbWUsCiAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlIDogdGhpcy5jb2x1bW5zW2ldLmRhdGFfdHlwZSwKICAgICAgICAgICAgICAgICAgICBjb2x1bW5fdHlwZTogIk1ldHJpYyIsCiAgICAgICAgICAgICAgICAgICAgYWRkaXRpdmU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uOiAiTm9uZSIsCiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOmZhbHNlLAogICAgICAgICAgICAgICAgICAgIG5scF9zZWFyY2hfZW5hYmxlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc3lub255bXM6ICIiLAogICAgICAgICAgICAgICAgICAgIGluZGV4X3R5cGU6ICJERUZBVUxUIiwKICAgICAgICAgICAgICAgICAgICBlbnRpdHlfY2F0ZWdvcnk6ICJQRVJTT04iLAogICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Zvcm1hdDogIk5vbmUiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKGxldCBba2V5LHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmNvbHVtbl9kZXRhaWxzKSl7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhrZXksIHZhbHVlKQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uc1tpXS5uYW1lID09PSBrZXkpewogICAgICAgICAgICAgICAgICBuZXdjb2x1bW5zZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmFtZSwKICAgICAgICAgICAgICAgICAgICBuZXduYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSwKICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGUgOiB0aGlzLmNvbHVtbnNbaV0uZGF0YV90eXBlLAogICAgICAgICAgICAgICAgICAgIGNvbHVtbl90eXBlOiB2YWx1ZS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAgICAgICBhZGRpdGl2ZTogdmFsdWUuYWRkaXRpdmUsCiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb246IHZhbHVlLmFnZ3JlZ2F0aW9uLAogICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdmFsdWUuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgIG5scF9zZWFyY2hfZW5hYmxlZDogdmFsdWUubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAgICAgICAgIHN5bm9ueW1zOiB2YWx1ZS5zeW5vbnltcywKICAgICAgICAgICAgICAgICAgICBpbmRleF90eXBlOiB2YWx1ZS5pbmRleF90eXBlLAogICAgICAgICAgICAgICAgICAgIGVudGl0eV9jYXRlZ29yeTogdmFsdWUuZW50aXR5X2NhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Zvcm1hdDogdmFsdWUuY3VycmVuY3lfZm9ybWF0IAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAvLyAgIG5ld2NvbHVtbnNkYXRhLnB1c2goewogICAgICAgICAgICAgICAgLy8gICAgIG5hbWU6IHRoaXMuY29sdW1uc1tpXS5uYW1lLAogICAgICAgICAgICAgICAgLy8gICAgIG5ld25hbWU6IHRoaXMuY29sdW1uc1tpXS5uZXduYW1lLAogICAgICAgICAgICAgICAgLy8gICAgIGRhdGFfdHlwZSA6IHRoaXMuY29sdW1uc1tpXS5kYXRhX3R5cGUsCiAgICAgICAgICAgICAgICAvLyAgICAgY29sdW1uX3R5cGU6IHRoaXMuY29sdW1uc1tpXS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAgIC8vICAgICBhZGRpdGl2ZTogdGhpcy5jb2x1bW5zW2ldLmFkZGl0aXZlLAogICAgICAgICAgICAgICAgLy8gICAgIGFnZ3JlZ2F0aW9uOiB0aGlzLmNvbHVtbnNbaV0uYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgICAvLyAgICAgaGlkZGVuOiB0aGlzLmNvbHVtbnNbaV0uaGlkZGVuLAogICAgICAgICAgICAgICAgLy8gICAgIG5scF9zZWFyY2hfZW5hYmxlZDogdGhpcy5jb2x1bW5zW2ldLm5scF9zZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgICAgIC8vICAgICBzeW5vbnltczogdGhpcy5jb2x1bW5zW2ldLnN5bm9ueW1zLAogICAgICAgICAgICAgICAgLy8gICAgIGluZGV4X3R5cGU6IHRoaXMuY29sdW1uc1tpXS5pbmRleF90eXBlLAogICAgICAgICAgICAgICAgLy8gICAgIGVudGl0eV9jYXRlZ29yeTogdGhpcy5jb2x1bW5zW2ldLmVudGl0eV9jYXRlZ29yeSwKICAgICAgICAgICAgICAgIC8vICAgICBjdXJyZW5jeV9mb3JtYXQ6IHRoaXMuY29sdW1uc1tpXS5jdXJyZW5jeV9mb3JtYXQgCiAgICAgICAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2NvbHVtbnNkYXRhKTsKICAgICAgICAgICAgdmFyIG9iamVjdCA9IG5ld2NvbHVtbnNkYXRhLnJlZHVjZSgKICAgICAgICAgICAgICAgIChvYmosIGl0ZW0pID0+IE9iamVjdC5hc3NpZ24ob2JqLCB7IFtpdGVtLm5hbWVdOiBpdGVtLm5ld25hbWUgfSksCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmplY3QpOwogICAgICAgICAgICB0aGlzLm5ld2NvbHVtbnMgPSBvYmplY3Q7CiAgICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlID0gbmV3Y29sdW1uc2RhdGE7CiAgICAgICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRtZXRyaWNzKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdmFsaWRhdGlvbl9zdWNjZXNzID0gdHJ1ZSwKICAgICAgbWV0cmljc19uYW1lX2xpc3QgPSBbXQogICAgICAvLyBjb25zb2xlLmxvZyhtZXRyaWNzX25hbWVfbGlzdCkKICAgICAgLy8gZm9yKGxldCBpID0gMDtpIDwgdGhpcy5tZXRyaWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgaWYoKHRoaXMubWV0cmljc1tpXS5uYW1lID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0ubmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyApIHx8ICh0aGlzLm1ldHJpY3NbaV0uY29sdW1uID09PSBudWxsKSB8fCAodGhpcy5tZXRyaWNzW2ldLm9wZXJhdGlvbiA9PT0gbnVsbCkpewogICAgICAvLyAgIG1ldHJpY3NfbmFtZV9saXN0LnB1c2godGhpcy5tZXRyaWNzW2ldLm5hbWUpCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIGZvcihsZXQgaSA9IDA7aSA8IHRoaXMubWV0cmljcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWV0cmljc1tpXSk7CiAgICAgICAgaWYoKHRoaXMubWV0cmljc1tpXS5uYW1lID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0ubmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyApIHx8ICh0aGlzLm1ldHJpY3NbaV0uY29sdW1uID09PSBudWxsKSB8fCAodGhpcy5tZXRyaWNzW2ldLm9wZXJhdGlvbiA9PT0gbnVsbCkpewogICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgRmlsbCBpbiBhbGwgdGhlIHZhbHVlcyBmb3IgdGhlIG1ldHJpY3MiKTsKICAgICAgICAgIHZhbGlkYXRpb25fc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgLy8gYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8vIGVsc2V7CiAgICAgICAgLy8gICBtZXRyaWNzX25hbWVfbGlzdC5wdXNoKHRoaXMubWV0cmljc1tpXS5uYW1lKTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY29uc29sZS5sb2cobWV0cmljc19uYW1lX2xpc3QpCiAgICAgICAgLy8gaWYobWV0cmljc19uYW1lX2xpc3QubGVuZ3RoID4gMSAmJiB2YWxpZGF0aW9uX3N1Y2Nlc3MgPT09IHRydWUgJiYgbWV0cmljc19uYW1lX2xpc3QuaW5jbHVkZXModGhpcy5tZXRyaWNzW2ldLm5hbWUpKXsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGkpOwogICAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJUd28gbWV0cmljIG5hbWVzIGNhbm5vdCBiZSBzYW1lIik7CiAgICAgICAgLy8gICB2YWxpZGF0aW9uX3N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAvLyAgIC8vIGJyZWFrOwogICAgICAgIC8vIH0KICAgICAgfQogICAgICBpZih2YWxpZGF0aW9uX3N1Y2Nlc3MpewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICAgIHRleHQ6ICIgWW91IHdhbnQgdG8gYWRkIHRoZXNlIG1ldHJpY3M/IiwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5tZXRyaWNzZGF0YSA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWV0cmljcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5tZXRyaWNzZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubWV0cmljc1tpXS5uYW1lLAogICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLm1ldHJpY3NbaV0uY29sdW1uLAogICAgICAgICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLm1ldHJpY3NbaV0ub3BlcmF0aW9uLAogICAgICAgICAgICAgICAgLy8gb246IFt0aGlzLm1ldHJpY3NbaV0uY29sdW1uMSwgdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjJdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmlzbWV0cmljc3NhdmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1ldHJpY3NkYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGZpbmFsc2F2ZSgpIHsKICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIsCiAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UKICAgICAgfSkudGhlbihyZXN1bHQgPT4gewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGlmKCF0aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUpewogICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJpX3Byb2Nlc3NfZGF0YSgpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBvYmplY3RfbmFtZTogdGhpcy5vYmplY3RfbmFtZSwKICAgICAgICAgIGNvbHVtbl9yZW5hbWVfbWFwcGluZzogdGhpcy5uZXdjb2x1bW5zLAogICAgICAgICAgZGF0YXNldF9uYW1lOiB0aGlzLmRhdGFzZXRfbmFtZSwKICAgICAgICAgIG1ldHJpY3M6IHRoaXMubWV0cmljc2RhdGEsCiAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsczogdGhpcy5jb2x1bW5fZGV0YWlscywKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJEYXRhIFByb2Nlc3NlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgdGltZXI6MjAwMCwKCiAgICAgICAgICAgICAgfSkudGhlbihyZXN1bHRfc3VjY2VzcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXN1bHRfc3VjY2Vzcy52YWx1ZSl7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC8vIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgIC8vIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CiAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHRoaXMuY29sdW1uX2RldGFpbHM7CiAgICAgICAgICAvLyB2YXIgY29sdW1uX3JlbmFtZV9tYXAgPSB0aGlzLm5ld2NvbHVtbnM7CiAgICAgICAgICAvLyB2YXIgbWV0cmljcyA9IHRoaXMubWV0cmljc2RhdGEKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1uX2RldGFpbHMpCiAgICAgICAgICB2YXIgd29ya3NoZWV0X2RldGFpbHMgPSB7fTsKICAgICAgICAgIHdvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9kZXRhaWxzID0gdGhpcy5jb2x1bW5fZGV0YWlsczsKICAgICAgICAgIHdvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9yZW5hbWVfbWFwID0gdGhpcy5uZXdjb2x1bW5zOwogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHMubWV0cmljcyA9IHRoaXMubWV0cmljc2RhdGE7CiAgICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJpX2RhdGFfc2hlZXRfZGV0YWlscygpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBkYXRhc2V0X25hbWU6IHRoaXMuZGF0YXNldF9uYW1lLAogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHM6IHdvcmtzaGVldF9kZXRhaWxzLAogICAgICAgICAgb2xkX3dvcmtzaGVldF9kZXRhaWxzOiB0aGlzLm9sZF93b3Jrc2hlZXRfZGV0YWlscwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJXT1JLU0hFRVQgREVUQUlMUyBVUERBVEVEIil7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJEYXRhIFVwZGF0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlCiAgICAgICAgICAgICAgfSkudGhlbihyZXN1bHRfc3VjY2VzcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXN1bHRfc3VjY2Vzcy52YWx1ZSl7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjoyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiEiLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBsb2FkZmlsZSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhc2V0X25hbWUpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpbGUpOwogICAgICBsZXQgZmlsZW5hbWUgPSAiIjsKICAgICAgbGV0IGZpbGVkYXRhID0gIiI7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIGZpbGVuYW1lID0gdGhpcy5maWxlLm5hbWU7CiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZSk7CiAgICAgIHJlYWRlci5vbmxvYWRzdGFydCA9ICgpID0+IHsKICAgICAgICAgIC8vIHRoaXMuJHJvb3QuJGVtaXQoJ3Nob3dfbG9hZGVyJywgdHJ1ZSk7CiAgICAgIH07CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAvLyB0aGlzLiRyb290LiRlbWl0KCdzaG93X2xvYWRlcicsIHRydWUpOwogICAgICAgICAgZmlsZWRhdGEgPSByZWFkZXIucmVzdWx0LnNwbGl0KCJiYXNlNjQsIilbMV07CiAgICAgIH07CiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7CiAgICAgICAgICB2YXIgeCA9IGZpbGVkYXRhLnNwbGl0KCJiYXNlNjQsIilbMV07CiAgICAgICAgICB2YXIgdGVtcF91dWlkID0gIiI7CiAgICAgICAgICB0ZW1wX3V1aWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpOwogICAgICAgICAgdmFyIHVzZXJfZGV0YWlscyA9IHsKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGlkZW1wb3RlbmN5X2tleTogdGVtcF91dWlkLAogICAgICAgICAgZGF0YXNldF9uYW1lOiB0aGlzLmRhdGFzZXRfbmFtZQogICAgICAgICAgfTsKICAgICAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkodXNlcl9kZXRhaWxzKTsKICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2pzb25dLCB7CiAgICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgIGZkLmFwcGVuZCgiZmlsZSIsIHRoaXMuZmlsZSwgZmlsZW5hbWUpOwogICAgICAgICAgZmQuYXBwZW5kKCJqc29uIiwgYmxvYik7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmZCk7CiAgICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJpX3VwbG9hZF9maWxlKCksIGZkKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICAgIGkgPCByZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5jb2x1bW5zLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgaSsrCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uc1tpXSwKICAgICAgICAgICAgICAgICAgbmV3bmFtZTogcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uc1tpXSwKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPSAwOyBrPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBrICsrKXsKICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5kYXRhX3R5cGVzKSkgewogICAgICAgICAgICAgICAgICAgICAgaWYoa2V5ID09IHRoaXMuY29sdW1uc1trXS5uYW1lKXsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1trXS5kYXRhX3R5cGUgPSAgdmFsdWUKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnMpOwogICAgICAgICAgICAgIC8vICAgdGhpcy5jb2x1bW5zID0gcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uczsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy5vYmplY3RfbmFtZSA9IHJlc3BvbnNlLmRhdGEuZmlsZV9kZXRhaWxzLm9iamVjdF9uYW1lOwogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRmlsZSBVcGxvYWRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyAhPSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgLy8gJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIC8vIH0sIDEwMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyLCJ3RWVlZWUiKTsKICAgICAgICAgIH0pOwogICAgICB9OwogICAgfSwKICAgIHNhdmVfY29sdW1uX2RhdGEoKXsgCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlKTsKICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZS5sZW5ndGg7IGkrKyl7CiAgICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMpCiAgICAgIC8vICAgaWYodGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMgIT0gIiIgfHwgdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMuc3BsaXQoJyAnKS5qb2luKCcnKSAhPSAiIiB8fHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2ldLnN5bm9ueW1zICE9IHVuZGVmaW5lZCApewogICAgICAvLyAgICAgY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMpCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBhZGQgdGhlc2Ugd29ya3NoZWV0IGRldGFpbHM/IiwKICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIgogICAgICB9KQogICAgICAudGhlbihyZXN1bHQgPT4gewogICAgICAgIGlmKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgdmFyIGFycmF5ID0ge307IAogICAgICAgICAgdmFyIHdvcmtzaGVldF9kZXRhaWxzID0ge307CiAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUubGVuZ3RoOyBpKyspewogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpXTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXApOwogICAgICAgICAgKCh0ZW1wLmFnZ3JlZ2F0aW9uID09PSAiTm9uZSIpPyB0ZW1wLmFnZ3JlZ2F0aW9uID0gbnVsbCA6IHRlbXAuYWdncmVnYXRpb24gPSB0ZW1wLmFnZ3JlZ2F0aW9uKQogICAgICAgICAgaWYgKHRlbXAuc3lub255bXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB0ZW1wLnN5bm9ueW1zID0gdGVtcC5zeW5vbnltcy5yZXBsYWNlKC8sL2csICc+PicpOwogICAgICAgICAgfQogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHNbdGVtcC5uZXduYW1lXSA9IHsKICAgICAgICAgICAgICAiZGF0YXR5cGUiOiBgJHt0ZW1wLmRhdGFfdHlwZX1gLAogICAgICAgICAgICAgICJjb2x1bW5fdHlwZSI6IGAke3RlbXAuY29sdW1uX3R5cGV9YCwKICAgICAgICAgICAgICAiYWRkaXRpdmUiOiB0ZW1wLmFkZGl0aXZlLAogICAgICAgICAgICAgICJhZ2dyZWdhdGlvbiI6IHRlbXAuYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgImhpZGRlbiIgOiB0ZW1wLmhpZGRlbiwKICAgICAgICAgICAgICAibmxwX3NlYXJjaF9lbmFibGVkIjogdGVtcC5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgImluZGV4X3R5cGUiOiBgJHt0ZW1wLmluZGV4X3R5cGV9YCwKICAgICAgICAgICAgICAic3lub255bXMiOiBgJHt0ZW1wLnN5bm9ueW1zfWAsCiAgICAgICAgICAgICAgImVudGl0eV9jYXRlZ29yeSI6YCR7dGVtcC5lbnRpdHlfY2F0ZWdvcnl9YCwKICAgICAgICAgICAgICAiY3VycmVuY3lfZm9ybWF0Ijp0ZW1wLmN1cnJlbmN5X2Zvcm1hdAogICAgICAgICAgICB9CiAgICAgICAgICBpZiAodGVtcC5zeW5vbnltcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLz4+IC9nLCAnLCcpOwogICAgICAgICAgfQogICAgICAgICAgKCh0ZW1wLmFnZ3JlZ2F0aW9uID09PSBudWxsKT8gdGVtcC5hZ2dyZWdhdGlvbiA9ICJOb25lIiA6IHRlbXAuYWdncmVnYXRpb24gPSB0ZW1wLmFnZ3JlZ2F0aW9uKQogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwogICAgICAgICAgdGhpcy5jb2x1bW5fZGV0YWlscyA9IE9iamVjdC5hc3NpZ24od29ya3NoZWV0X2RldGFpbHMpOwogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwogICAgfSwKICAgIGdldF9kYXRhc2V0X2xpc3QoKXsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcwogICAgICAuZ2V0KGFwaV9jYWxscy5iaV9kYXRhX3NoZWV0X2RldGFpbHMoKSwgewogICAgICAgIHBhcmFtcyA6IHsKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIC8vIGRhdGFzZXRfbmFtZTogIkZydWl0aHV0IHYxIiwKICAgICAgICAvLyBkYXRhc2V0X25hbWU6ICJEcnVnIFRyaWFsIERhdGEiLAogICAgICAgIH0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICB0aGlzLmRhdGFzZXRzID0gcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXM7CiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8cmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXMubGVuZ3RoOyBpKyspewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbaV0ub2xkX3dvcmtzaGVldF9kZXRhaWxzID0gcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbaV0ud29ya3NoZWV0X2RldGFpbHM7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluIik7CiAgICAgIH0pCiAgICB9LAogICAgZm9ybWF0X2RhdGUoZGF0ZSl7CiAgICAgIC8vIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJZWVlZIE1NTU0gREQiKQogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiZGRkZCwgTU1NTSBEbyBZWVlZIikKICAgIH0sCiAgICBvcGVuX2N1cnJlbmN5X2Zvcm1hdF9tb2RhbChpbmRleCl7CiAgICAgIGlmKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2luZGV4XS5jdXJyZW5jeV9mb3JtYXQgPT09IG51bGwpewogICAgICAgIHRoaXMuY3VycmVuY3lfZm9ybWF0X21vZGFsID0gIk5vbmUiOwogICAgICAgIHRoaXMuY3VycmVudF9jb2x1bW5faW5kZXggPSBpbmRleDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gaW5kZXg7CiAgICAgICAgdGhpcy5jdXJyZW5jeV9mb3JtYXRfbW9kYWwgPSAiU3BlY2lmaWMiOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2luZGV4XS5jdXJyZW5jeV9mb3JtYXQ7CiAgICAgIH0KICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgic2hvdyIpCiAgICB9LAogICAgY2hhbmdlX2N1cnJlbmN5X2Zvcm1hdChvcGVyYXRpb24pewogICAgICBpZiggb3BlcmF0aW9uID09PSAnY2xvc2UnKSB7CiAgICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgIH0gCiAgICAgIGlmKG9wZXJhdGlvbiA9PT0gJ3NhdmUnKXsKICAgICAgICBpZih0aGlzLmN1cnJlbmN5X2Zvcm1hdF9tb2RhbCA9PT0gIk5vbmUiKXsKICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW3RoaXMuY3VycmVudF9jb2x1bW5faW5kZXhdLmN1cnJlbmN5X2Zvcm1hdCA9IG51bGw7CiAgICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gbnVsbDsKICAgICAgICAgICQoIiNjdXJyZW5jeUZvcm1hdE1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgaWYodGhpcy5jb3VudHJ5X2lzb19jb2RlID09PSBudWxsKXsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgU2VsZWN0IGFuIElTTyBDb2RlIikKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW3RoaXMuY3VycmVudF9jb2x1bW5faW5kZXhdLmN1cnJlbmN5X2Zvcm1hdCA9IHRoaXMuY291bnRyeV9pc29fY29kZTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50X2NvbHVtbl9pbmRleCA9IG51bGw7CiAgICAgICAgICAgICQoIiNjdXJyZW5jeUZvcm1hdE1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgdGhpcy5jb3VudHJ5X2lzb19jb2RlID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9CiAgICB9LAogICAgb3Blbl9zZXR0aW5nc19mb3JfZGF0YWJhc2VfZGF0YXNldChpbmRleCl7CiAgICAgIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzID0gdHJ1ZTsKICAgIH0sCiAgICBvcGVuX2RhdGFiYXNlX2RhdGFzZXRfbW9kYWwoZGF0YWJhc2UpewogICAgICB0aGlzLnNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzID0gZmFsc2U7CiAgICAgIGlmKGRhdGFiYXNlID09PSAncG9zdGdyZXMnKXsKICAgICAgICB0aGlzLmN1cnJlbnRfZGF0YXNldF9kYXRhYmFzZV9pY29uID0gdGhpcy5wb3N0Z3Jlc19pY29uX3BhdGgKICAgICAgfQogICAgICBpZihkYXRhYmFzZSA9PT0gJ215c3FsJyl7CiAgICAgICAgdGhpcy5jdXJyZW50X2RhdGFzZXRfZGF0YWJhc2VfaWNvbiA9IHRoaXMubXlzcWxfaWNvbl9wYXRoCiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YWJhc2VfZGF0YXNldF9pZCA9IHRoaXMuZ2VuZXJhdGVVVUlEKCkKICAgICAgdGhpcy5zaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3NfZGV0YWlscyA9IHRydWU7CiAgICB9LAogICAgYWRkX2RhdGFzZXRfZGV0YWlscygpewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBzd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdGV4dDogJ1lvdSB3YW50IHRvIGludGVncmF0ZSB3aXRoIHRoaXMgRGF0YWJhc2U/JywKICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiLAogICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICB9KQogICAgICAudGhlbihyZXN1bHQgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmJpX2RiX2ludGVncmF0aW9uKCksewogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgcmRibXNfbmFtZTogJ3Bvc3RncmVzcWwnLAogICAgICAgICAgICBkYXRhc2V0X2lkOiB0aGlzLmRhdGFiYXNlX2RhdGFzZXRfaWQsCiAgICAgICAgICAgIGRhdGFzZXRfbmFtZTogdGhpcy5kYXRhYmFzZV9kYXRhc2V0X25hbWUsCiAgICAgICAgICAgIHNjaGVtYV9uYW1lOiB0aGlzLmRhdGFiYXNlX3NjaGVtYV9uYW1lLAogICAgICAgICAgICBqZGJjX2Nvbm5lY3Rpb25fc3RyaW5nOiB0aGlzLmRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmcsCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmRhdGFiYXNlX3VzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZDogdGhpcy5kYXRhYmFzZV9wYXNzd29yZAogICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PnsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gJ0RCIElOVEVHUkFUSU9OIERFVEFJTFMgU0FWRUQnKXsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiREIgSW50ZWdyYXRpb24gU3VjY2Vzc2Z1bCIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0X3N1Y2Nlc3MgPT4gewogICAgICAgICAgICAgICAgaWYocmVzdWx0X3N1Y2Nlc3MudmFsdWUpewogICAgICAgICAgICAgICAgICB0aGlzLmdldF9kYXRhc2V0X2xpc3QoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3MgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgLy8gdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLiBQbGVhc2UgVHJ5IEFnYWluIikKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzaG93X2RhdGFzZXRfc2V0dGluZ3MobmV3VmFsLCBvbGRWYWwpewogICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coJ2tqaGd2ZmNkeGQnKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTsKICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTsKICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IGZhbHNlOwogICAgICAgIHRoaXMubmV3Y29sdW1ucyA9IFtdOwogICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLm9iamVjdF9uYW1lID0gIiI7CiAgICAgICAgdGhpcy5tZXRyaWNzZGF0YSA9IFtdOwogICAgICAgIHRoaXMuaXNtZXRyaWNzc2F2ZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmRhdGFzZXRfbmFtZSA9ICIiOwogICAgICAgIHRoaXMuZmlsZSA9IG51bGw7CiAgICAgICAgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUgPSBbXTsKICAgICAgICB0aGlzLmNvbHVtbl9kZXRhaWxzID0ge307CiAgICAgICAgdGhpcy5pc19kYXRhc2V0X2VkaXRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjdXJyZW5jeV9mb3JtYXRfbW9kYWwobmV3VmFsLCBvbGRWYWwpewogICAgICBpZihuZXdWYWwgPT09ICJOb25lIikgewogICAgICAgIHRoaXMuaXNfY291bnRyeV9jb2Rlc19kcm9wZG93bl9kaXNhYmxlZCA9IHRydWUKICAgICAgICB0aGlzLmNvdW50cnlfaXNvX2NvZGUgPSBudWxsCiAgICAgIH0KICAgICAgaWYobmV3VmFsID09PSAiU3BlY2lmaWMiKSB7CiAgICAgICAgdGhpcy5pc19jb3VudHJ5X2NvZGVzX2Ryb3Bkb3duX2Rpc2FibGVkID0gZmFsc2UKICAgICAgfQogICAgfSwKICAgIGRhdGFiYXNlX2RhdGFzZXRfY29ubmVjdGlvbl90eXBlKG5ld1ZhbCwgb2xkVmFsKXsKICAgICAgaWYgKG5ld1ZhbCA9PT0gJ0pEQkMnKXsKICAgICAgICB0aGlzLmRhdGFiYXNlX2hvc3QgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfcG9ydCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9kYl9uYW1lID0gbnVsbDsKICAgICAgfQogICAgICBpZiAobmV3VmFsID09PSAnaG9zdF9wb3J0Jyl7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9qZGJjX2Nvbm5lY3Rpb25fc3RyaW5nID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzKG5ld1ZhbCwgb2xkVmFsKXsKICAgICAgaWYgKG5ld1ZhbCA9PT0gZmFsc2UpewogICAgICAgIHRoaXMuZGF0YWJhc2VfZGF0YXNldF9uYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3NjaGVtYV9uYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3VzZXJuYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3Bhc3N3b3JkID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmcgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfaG9zdCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9wb3J0ID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX2RiX25hbWUgPSBudWxsOwogICAgICB9CgogICAgfQogIH0sCn0K"},{"version":3,"sources":["AnalyticsConfigV2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+lBA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AnalyticsConfigV2.vue","sourceRoot":"src/portal/analytics","sourcesContent":["<template>\n<div>\n    <div class=\"spinner\" id=\"spinner\" v-show=\"spinnerOn\" style=\"z-index:100\"></div>\n    <div class=\"card-body\" style=\"padding:0\">\n        <div v-if=\"!show_dataset_settings && !show_database_dataset_settings\"> \n            <div style=\"text-align:end\">\n                <button style=\"margin-right:1%\" class=\"btn btn-primary\" @click=\"open_settings_for_dataset(null)\"> Add File </button>\n                <button class=\"btn btn-primary\" @click=\"open_settings_for_database_dataset(null)\"> Add DB </button>\n            </div>\n            <table class=\"table\" style=\"border: 1px solid #dbe2e8;margin-top:1%\" v-if=\"datasets.length>0\">\n                <tr>\n                    <th style=\"text-align:left;width:50%\">Dataset Name </th>\n                    <th style=\"text-align:left\">Uploaded On</th>\n                    <th style=\"text-align:center\">Edit</th>\n                </tr>\n                <tr v-if=\"datasets.length==0\">\n                    <td colspan=\"2\" style=\"text-align:center\"> It seems you dont have any datasets! Kindly Add a Dataset to Begin. </td>\n                </tr>\n                <tr v-for=\"(dataset, index) in datasets\" :key=\"index\">\n                    <td style=\"text-align:left\"> {{dataset.data_name}} </td>\n                    <td style=\"text-align:left\"> {{format_date(dataset.uploaded_at)}} </td>\n                    <td style=\"text-align:center\">  <i class=\"fa fa-cog\" aria-hidden=\"true\" @click=\"open_settings_for_dataset(index)\" style=\"cursor:pointer\"></i> </td>\n                </tr>\n            </table>    \n        </div>\n        <!-- <transition name=\"fade\" mode=\"in-out\"> -->\n        <div v-if=\"show_dataset_settings\" style=\"transition: visibility 0s linear 300ms, opacity 300ms;\">\n            <div style=\"margin-bottom:2%\" v-if=\"is_dataset_editable\" ><i class=\"fa fa-chevron-left fa-lg\" aria-hidden=\"true\" @click=\"show_dataset_settings = !show_dataset_settings\" style=\"cursor:pointer\" > Back</i> <span> </span> </div>\n            <div style=\"margin-bottom:2%\" v-else><i class=\"fa fa-chevron-left fa-lg\" aria-hidden=\"true\" @click=\"show_dataset_settings = !show_dataset_settings \" style=\"cursor:pointer\"> Back</i>  </div>\n            <div class=\"table-box\">\n            <div class=\"table-responsive\">\n              <div>\n                <form id=\"filedata\" @submit=\"uploadfile\">\n                  <!-- <a\n                class=\"btn btn-primaryy border-0\"\n                data-toggle=\"collapse\"\n                href=\"#collapseExample\"\n                role=\"button\"\n                aria-expanded=\"false\"\n                aria-controls=\"collapseExample\"\n                style=\"display:flex;color: black;padding-left: 0px;\"\n                  >-->\n                  <i\n                    class=\"fa fa-chevron-down rotate\"\n                    style=\"margin-right:15px; margin-top:1%\"\n                  ></i>\n                  <b v-if=\"is_dataset_editable\">Uploaded File</b>\n                  <b v-else>Upload File</b>\n                  <!-- </a> -->\n                  <div\n                    id=\"collapseExample\"\n                    class=\"col-sm-12\"\n                    style=\"padding: 0.3rem;display:flex\"\n                  >\n                    <div class=\"custom-file col-sm-6\">\n                      <input\n                        @change=\"getFile($event)\"\n                        accept=\".csv\"\n                        type=\"file\"\n                        class=\"custom-file-input\"\n                        id=\"inputGroupFile01\"\n                      />\n                      <label\n                        class=\"custom-file-label\"\n                        for=\"inputGroupFile01\"\n                        placeholder=\"Choose File\"\n                      >{{file_label}}</label>\n                    </div>\n                    <div class=\"col-sm-6\" style=\"display:flex\">\n                      <div class=\"col-sm-4\" style=\"margin-top:1%\">\n                      <label style=\"padding-left:10px;float:right\">Name of Dataset</label>\n                      </div>\n                      <div class=\"col-sm-8\">\n                      <input\n                        id=\"dataset_name\"\n                        type=\"text\"\n                        v-model=\"dataset_name\"\n                        style=\"padding-left:8px;margin-left: 3%;height: 40px !important;\"\n                        class=\"form-control\"\n                        required\n                      />\n                      </div>\n                    </div>\n                    <!-- <div class=\"col-sm-2\" style=\"display:flex\">\n                      <button\n                        style=\"height:40px\"\n                        class=\"btn btn-primary\"\n                        type=\"submit\"\n                      >Upload File</button>\n                    </div> -->\n                  </div>\n                  <div class=\"col-sm-3\" style=\"margin-top:1%\">\n                      <button v-if=\"!is_dataset_editable\"\n                        style=\"height:40px\"\n                        class=\"darkblue-btn\"\n                        type=\"submit\"\n                        id=\"upload_file\"\n                      >Upload File</button>\n                    </div>\n                </form>\n              </div>\n              <div v-if=\"is_file_uploaded\">\n                <table class=\"table\">\n                  <!-- <thead></thead>\n                  <tbody></tbody>-->\n                  <tr>\n                    <!-- <a\n                      class=\"btn btn-primaryy border-0\"\n                      data-toggle=\"collapse\"\n                      href=\"#collapseExamples__1\"\n                      role=\"button\"\n                      aria-expanded=\"false\"\n                      aria-controls=\"collapseExamples__1\"\n                      style=\"display:flex;color: black;padding-left: 0px;\"\n                    >-->\n                    <i\n                      class=\"fa fa-chevron-down rotate\"\n                      style=\"margin-right:15px; margin-top:1%\"\n                    ></i>\n                    <b>Change Column Names</b>\n                    <!-- </a> -->\n                    <div id=\"collapseExamples__1\" class=\"col-sm-12\" style=\"padding:0\">\n                      <form @submit=\"editcolumns()\">\n                        <div\n                          style=\"display:flex;margin-bottom: 1%;margin-top: 1%;padding:0\"\n                          v-for=\"(column,index) in columns \"\n                          :key=\"index\"\n                          class=\"col-sm-12\"\n                        >\n                          <div class=\"col-sm-2\">\n                          <label>Original Name</label>\n                          </div>\n                          <div class=\"col-sm-4\">\n                          <input\n                            class=\"form-control\"\n                            v-model=\"column.name\"\n                            disabled\n                            type=\"text\"\n                            style=\"padding-left:12px;margin-left: 3%;height: 40px !important;\"\n                          />\n                          </div>\n                          <div class=\"col-sm-2\">\n                          <label style=\"padding-left:9px;\">New Name</label>\n                          </div>\n                          <div class=\"col-sm-4\" style=\"display: contents;\">\n\n                          <input\n                            class=\"form-control\"\n                            :id=\"'input'+index\"\n                            v-model=\"column.newname\"\n                            type=\"text\"\n                            style=\"padding-left:12px;margin-left: 3%;height: 40px !important;\"\n                          />\n                          </div>\n                        </div>\n                        <button type=\"submit\" class=\"darkblue-btn\" style=\"margin:2%\">Save Column Names</button>\n                      </form>\n                    </div>\n                  </tr>\n                </table>\n              </div>\n              <div v-if=\"is_file_uploaded && iscolumnsnamechanged\">\n                <table class=\"table\">\n                  <tr>\n                    <i\n                      class=\"fa fa-chevron-down rotate\"\n                      style=\"margin-right:15px; margin-top:1%\"\n                    ></i>\n                    <b>Define Column Metrics</b>\n                    <button\n                      class=\"save_node_button\"\n                      @click=\"addmetricvalue()\"\n                      style=\"height: 29px;padding-top: 0px;padding-left: 10px;padding-right: 10px;padding-bottom: 0px;margin-left:15px;float: none;\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"14\"\n                        height=\"14\"\n                        viewBox=\"0 0 14 16\"\n                      >\n                        <path\n                          id=\"Union_13\"\n                          data-name=\"Union 13\"\n                          d=\"M-12684,2058v-5h-5a1,1,0,0,1-1-1,1,1,0,0,1,1-1h5v-5a1,1,0,0,1,1-1,1,1,0,0,1,1,1v5h5a1,1,0,0,1,1,1,1,1,0,0,1-1,1h-5v5a1,1,0,0,1-1,1A1,1,0,0,1-12684,2058Z\"\n                          transform=\"translate(12690.001 -2045.002)\"\n                          fill=\"#fff\"\n                        />\n                      </svg>\n                    </button>\n                    <div\n                      class=\"col-sm-12\"\n                      style=\"display: flex;margin-top: 2%;margin-left:0;padding-left:0\"\n                      v-for=\"(metric,index) in metrics\"\n                      :key=\"index\"\n                    >\n                      <div class=\"col-sm-5\">\n                        <label>Name</label>\n                        <input\n                          type=\"text\"\n                          class=\"form-control\"\n                          style=\"height: 40px !important;padding-left:12px;\"\n                          v-model=\"metric.name\"\n                          required\n                        />\n                      </div>\n                      <div class=\"col-sm-3\">\n                        <label>Operation</label>\n                        <!-- <select\n                          type=\"text\"\n                          class=\"form-control\"\n                          v-model=\"metric.operation\"\n                          required\n                          style=\"padding-left:12px;margin-left: 3%;height: 40px !important;\"\n                        >\n                          <option value=\"SUM\" selected>SUMMATION</option>\n                          <option value=\"AVG\">AVERAGE</option>\n                          <option value=\"COUNT\">COUNT</option>\n                          <option value=\"NUNIQUE\">NUNIQUE</option>\n                        </select> -->\n                        <multiselect\n                        :close-on-select=\"true\"\n                        :taggable=\"false\"\n                        :multiple=\"false\"\n                        :options=\"metric_operation_options\"\n                        v-model=\"metric.operation\"\n                        >\n                        </multiselect>\n                      </div>\n                      <div class=\"col-sm-4\">\n                        <label>Column</label>\n                        <!-- <select\n                          type=\"text\"\n                          class=\"form-control\"\n                          v-model=\"metric.column\"\n                          required\n                          style=\"padding-left:12px;margin-left: 3%;height: 40px !important;\"\n                        >\n                          <option\n                            v-for=\"(column, index) in newcolumns\"\n                            :value=\"column\"\n                            :key=\"index\"\n                          >{{column}}</option>\n                        </select> -->\n                        <div style=\"display:flex\">\n                        <multiselect\n                        :close-on-select=\"true\"\n                        :taggable=\"false\"\n                        :multiple=\"false\"\n                        :options=\"Object.values(newcolumns)\"\n                        v-model=\"metric.column\"\n                        >\n                        </multiselect>\n                          <button\n                          class=\"save_node_button\"\n                          style=\"margin-left: 3%;height: 39px;padding-top: 0px;padding-left: 10px;padding-right: 10px;padding-bottom: 0px;background: #F23D3D;border: solid 1px #F23D3D;\"\n                          @click=\"deleteheader(index)\"\n                        >\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"14\"\n                            height=\"14\"\n                            viewBox=\"0 0 14 14\"\n                          >\n                            <path\n                              id=\"trash-can-outline\"\n                              d=\"M8.375,3v.778H4V5.333h.875V15.444A1.661,1.661,0,0,0,6.625,17h8.75a1.661,1.661,0,0,0,1.75-1.556V5.333H18V3.778H13.625V3H8.375M6.625,5.333h8.75V15.444H6.625V5.333m1.75,1.556v7h1.75v-7H8.375m3.5,0v7h1.75v-7Z\"\n                              transform=\"translate(-4 -3)\"\n                              fill=\"#fff\"\n                            />\n                          </svg>\n                        </button>\n                        </div>\n                      </div>\n                    </div>\n                    <button\n                      v-if=\"metrics.length > 0\"\n                      @click=\"addmetrics()\"\n                      class=\"darkblue-btn\"\n                      style=\"margin:2%\"\n                    >Save Metrics</button>\n                  </tr>\n                </table>\n              </div>\n                  <div v-if=\"is_file_uploaded && iscolumnsnamechanged && ismetricssaved\">  \n                    <i\n                    class=\"fa fa-chevron-down rotate\"\n                    style=\"margin-right:15px; margin-top:1%\"\n                    ></i>\n                    <b>Define Worksheet Details</b>\n                   <div id=\"table-scroll\" class=\"table-scroll\"  style=\"border: 1px solid #dbe2e8;\">\n                     <table class=\"table\" id=\"worksheet_details\">\n                       <thead>\n                       <tr style=\"text-align:left\">\n                          <th style=\"text-align:left;width:8%\">COLUMN NAME</th>\n                            <th style=\"text-align:left\">DATA TYPE</th>\n                            <th>COLUMN TYPE</th>\n                            <th>AGGREGATION</th>\n                            <th>CURRENCY FORMAT</th>\n                            <th>INDEX TYPE</th>\n                            <th>ENTITY CATEGORY</th>\n                            <th>ADDITIVE</th>\n                            <th>HIDDEN</th>\n                            <th>NLP SEARCH ENABLED</th>\n                            <th>SYNONYMS</th>\n                       </tr>\n                       </thead>\n                       <tbody>\n                       <tr v-for=\"(column,index) in newcolumnscomplete \"\n                          :key=\"index\">\n                          <!-- {{column}} -->\n                        <td style=\"text-align:left;width:5%\"> {{column.newname}} </td>\n                        <td style=\"text-align:left\"> {{column.data_type}} </td>\n                        <td style=\"text-align:center\">\n                            <select\n                              class=\"form-control\"\n                              :id=\"'to_'+index\"\n                              v-model=\"column.column_type\"\n                              style=\"padding:0\"\n                            >\n                              <option value=\"Metric\">Metric</option>\n                              <option value=\"Attribute\">Attribute</option>\n                            </select>\n                        </td>\n                        \n                        <td>\n                           <select\n                              class=\"form-control\"\n                              :id=\"'aggregation'+index\"\n                              v-model=\"column.aggregation\"\n                              style=\"padding:0\"\n                            >\n                              <option value=\"None\" >None</option>\n                              <option value=\"SUM\">SUM</option>\n                              <option value=\"AVG\">AVG</option>\n                              <!-- <option v-for=\"(agg_option,index2) in aggregation_options\" :key=\"index2\" :value=\"agg_option\">\n                                {{agg_option}}\n                              </option> -->\n                            </select>\n                        </td>\n                        <td style=\"text-align:center;\"> <p @click=\"open_currency_format_modal(index)\"> {{((column.currency_format === null)? \"None\" : column.currency_format)}} </p> </td>\n                        <td>\n                          <select\n                           v-model=\"column.index_type\"\n                           class=\"form-control\"\n                           style=\"padding:0\">\n                            <option value=\"NOT INDEXED\">NOT INDEXED</option>\n                            <option value=\"DEFAULT\">DEFAULT</option>\n                          </select>\n                        </td>\n                        <td>\n                          <select\n                           v-model=\"column.entity_category\"\n                           class=\"form-control\"\n                           style=\"padding:0\">\n                            <option value=\"PERSON\">PERSON</option>\n                            <option value=\"PLACE\">PLACE</option>\n                            <option value=\"TIME\">TIME</option>\n                            <option value=\"PRODUCT\">PRODUCT\t</option>\n                            <option value=\"ZIP_CODE\">ZIP_CODE</option>\n                            <option value=\"LAT_LONG\">LAT_LONG</option>\n                            <option value=\"COMPANY_ORG\">COMPANY_ORG</option>\n                            <option value=\"NUM_TYPES\">NUM_TYPES</option>\n                          </select>\n                        </td>\n                        <td style=\"text-align:center\">\n                        <label class=\"switch\">\n                            <input type=\"checkbox\" v-model=\"column.additive\" >\n                            <span class=\"slider round\" style=\"border-radius: 50px;\"></span>\n                        </label>  \n                        </td>\n                        <td style=\"text-align:center\">\n                        <label class=\"switch\">\n                            <input type=\"checkbox\" v-model=\"column.hidden\" >\n                            <span class=\"slider round\" style=\"border-radius: 50px;\">\n                            </span>\n                        </label>  \n                        </td>\n                        <td style=\"text-align:center\">\n                        <label class=\"switch\">\n                            <input type=\"checkbox\" v-model=\"column.nlp_search_enabled\" >\n                            <span class=\"slider round\" style=\"border-radius: 50px;\"></span>\n                        </label>  \n                        </td>\n                        <td> \n                        <input \n                          class=\"form-control\" \n                          type=\"text\" \n                          placeholder=\"Type to edit\"\n                          v-model=\"column.synonyms\"\n                          style=\"height: 40px !important;padding-left:12px;\"\n                          >  \n                        </td>\n                       </tr>\n                       </tbody>\n                     </table>\n                     </div>\n                      <button\n                        style=\"margin-top:2%\"\n                          @click=\"save_column_data()\"\n                          class=\"darkblue-btn\"\n                      >Save Column Details</button>\n                  </div>\n                  <button\n                    style=\"margin-top:1%\"\n                    v-if=\"is_file_uploaded && iscolumnsnamechanged && ismetricssaved\"\n                    @click=\"finalsave()\"\n                    class=\"darkblue-btn\"\n                  >Final Save</button>\n            </div>\n          </div>\n        </div>\n        <!-- </transition> -->\n        <div v-if=\"show_database_dataset_settings\">\n          <div style=\"margin-bottom:2%\"><i class=\"fa fa-chevron-left fa-lg\" aria-hidden=\"true\" @click=\"show_database_dataset_settings = !show_database_dataset_settings;show_database_dataset_settings_details = false\" style=\"cursor:pointer\"> Back</i>  </div>\n          <div class=\"row\" v-if=\"!show_database_dataset_settings_details\">\n            <div class=\"image-block col-sm-3 shadow\" style=\"text-align:center;margin:1%\" @click=\"open_database_dataset_modal('postgres')\">\n              <img :src=\"postgres_icon_path\" height=\"150px\" width=\"150px\" alt=\"\">\n              <!-- <p> POSTGRESQL </p> -->\n            </div>\n            <div class=\"image-block col-sm-3 shadow\"  style=\"cursor:not-allowed;text-align:center;margin:1%;background: #ececec;\" @click=\"open_database_dataset_modal('mysql')\" disabled>\n              <img :src=\"mysql_icon_path\" height=\"150px\" width=\"175px\" alt=\"\" >\n              <!-- <p> MYSQL </p> -->\n            </div>\n          </div>\n          <!-- <div id=\"addDatabaseDatasetModal\" class=\"modal fade\" role=\"dialog\" data-backdrop=\"static\">\n            <div class=\"modal-dialog\"> -->\n\n              <!-- Modal content-->\n              <!-- <div class=\"modal-content\"> -->\n                <!-- <div class=\"modal-header\">\n                  <button type=\"button\" class=\"close\" @click=\"change_currency_format('close')\">&times;</button>\n                </div> -->\n            <transition name=\"fade\" mode=\"out-in\">\n              <div class=\"row\" v-if=\"show_database_dataset_settings_details\">\n                <div class=\"col-sm-12\" style=\"display:flex\">\n                <div class=\"col-sm-2\"></div>\n                <div class=\"col-sm-7\">\n                <div class=\"card\">\n                 <div class=\"card-body\">\n                  <form @submit=\"add_dataset_details\">\n                <!-- <div class=\"modal-body\"> -->\n                  <div style=\"text-align:center;margin:1%\">\n                  <img :src=\"current_dataset_database_icon\" height=\"150px\" width=\"150px\" alt=\"\">\n                  <button type=\"button\" class=\"close\" @click=\"show_database_dataset_settings_details = !show_database_dataset_settings_details\">&times;</button>\n                  </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset ID</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_dataset_id\" disabled>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset Name</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_dataset_name\" required >\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset Schema Name</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_schema_name\">\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset Username</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_username\" required>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset Password</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_password\" required >\n                    </div>\n                    <div style=\"display:flex; margin:1%\">\n                    <div class=\"radio\" >\n                      <label style=\"vertical-align: text-top;\">\n                        <input type=\"radio\" value=\"JDBC\" name=\"database_dataset_connection_type\" v-model=\"database_dataset_connection_type\"/>\n                        <span\n                          class=\"icn\"\n                          id=\"radio\"\n                        ></span>\n                        JDBC Connection String\n                      </label>\n                   </div>\n                  <div class=\"radio\" style=\"margin-left:2%\">\n                      <label style=\"vertical-align: text-top;\">\n                        <input type=\"radio\" value=\"host_port\" name=\"database_dataset_connection_type\" v-model=\"database_dataset_connection_type\"/>\n                        <span\n                          class=\"icn\"\n                          id=\"radio\"\n                        ></span>\n                        Host, Port, DB Name\n                      </label>\n                   </div>\n                   </div>\n                  <transition name=\"fade\" mode=\"out-in\">\n                    <div style=\"margin-top:2%\" class=\"form-group\" v-if=\"database_dataset_connection_type === 'JDBC'\">\n                      <label for=\"dataset_id\">Dataset JDBC Connection String</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_jdbc_connection_string\" required>\n                    </div>\n                  </transition>\n                  <transition name=\"fade\" mode=\"out-in\">\n                    <div style=\"margin-top:2%\" v-if=\"database_dataset_connection_type === 'host_port'\">\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset Host</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_host\" required>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset Port</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_port\" required>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"dataset_id\">Dataset DB Name</label>\n                      <input type=\"text\" class=\"form-control\" style=\"height: 40px !important;padding-left:12px;\" v-model=\"database_db_name\" required>\n                    </div>\n                    </div>\n                  </transition>\n                <!-- </div> -->\n                <div class=\"modal-footer\">\n                  <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n                  <button type=\"button\" class=\"btn btn-primary\" @click=\"show_database_dataset_settings_details = !show_database_dataset_settings_details\">Cancel</button>\n                </div>\n                </form>\n                </div>\n                </div>\n                </div>  \n                </div>\n              </div>\n            </transition> \n              <!-- </div> -->\n\n            <!-- </div>\n          </div>   -->\n        </div>\n       <!--Currency Format Modal -->\n        <div id=\"currencyFormatModal\" class=\"modal fade\" role=\"dialog\" data-backdrop=\"static\">\n          <div class=\"modal-dialog\">\n            <!-- Modal content-->\n            <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h4 class=\"modal-title\">Specify Currency Type</h4>\n                <button type=\"button\" class=\"close\" @click=\"change_currency_format('close')\">&times;</button>\n              </div>\n              <div class=\"modal-body\">\n                  <!-- <input type=\"radio\" id=\"None\" name=\"gender\" value=\"None\">\n                  <label for=\"None\">None</label><br>\n                  <input type=\"radio\" id=\"Specific\" name=\"gender\" value=\"Specific\">\n                  <label for=\"Custom\">Specify ISO Code</label><br> -->\n                  <div class=\"radio\" >\n                      <label style=\"vertical-align: text-top;\">\n                        <input\n                          type=\"radio\"\n                          value=\"None\"\n                          name=\"currency_format\"    \n                          v-model=\"currency_format_modal\"\n\n                        />\n                        <span\n                          class=\"icn\"\n                          id=\"radio\"\n                        ></span>\n                        None\n                      </label>\n\n                   </div>\n                   <div style=\"display:flex\"> \n                  <!-- <table>\n                    <td> -->\n                    \n                   <div class=\"radio\" >\n                      <label style=\"vertical-align: text-top;\">\n                        <input\n                          type=\"radio\"\n                          value=\"Specific\"\n                          name=\"currency_format\"\n                          v-model=\"currency_format_modal\"\n                        />\n                        <span\n                          class=\"icn\"\n                          id=\"radio\"\n                        ></span>\n                        Specify ISO Code\n                        \n                      </label>\n                       \n                   </div>\n                   <!-- </td>\n                   <td> -->\n                   <multiselect\n                   class=\"country\"\n                      :close-on-select=\"true\"\n                      :taggable=\"false\"\n                      :multiple=\"false\"\n                      :options=\"country_codes\"\n                      placeholder=\"Select Country Code\"\n                      v-model=\"country_iso_code\"\n                      :disabled=\"is_country_codes_dropdown_disabled\"\n                    ></multiselect>\n                   <!-- </td>\n                    </table> -->\n                   </div>\n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-default\" @click=\"change_currency_format('save')\">Save</button>\n                <button type=\"button\" class=\"btn btn-default\" @click=\"change_currency_format('close')\">Close</button>\n              </div>\n            </div>\n\n          </div>\n        </div>        \n    </div>\n</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\nimport Multiselect from \"vue-multiselect\";\nimport moment from \"moment\";\nimport swal from 'sweetalert2';\n\n\nexport default {\n  name: \"AnalyticsConfigV2\",\n  components: {\n    Multiselect,\n  },\n  data() {\n    return {\n      spinnerOn: false,\n      columns: [],\n      metrics: [],\n      file_label: \"Choose file\",\n      is_file_uploaded: false,\n      newcolumns: [],\n      iscolumnsnamechanged: false,\n      object_name: \"\",\n      metricsdata: [],\n      ismetricssaved: false,\n      dataset_name: \"\",\n      file: null,\n      newcolumnscomplete: [],\n      column_details: {},\n      is_dataset_editable: false,\n      datasets:[],\n      show_dataset_settings: false,\n      // country_codes:[\"AFN\",\"EUR\",\"ALL\",\"DZD\",\"USD\",\"EUR\",\"AOA\",\"XCD\",\"XCD\",\"ARS\",\"AMD\",\"AWG\",\"AUD\",\"EUR\",\"AZN\",\"BSD\",\"BHD\",\"BDT\",\"BBD\",\"BYN\",\"EUR\",\"BZD\",\"XOF\",\"BMD\",\"INR\",\"BTN\",\"BOB\",\"BOV\",\"USD\",\"BAM\",\"BWP\",\"NOK\",\"BRL\",\"USD\",\"BND\",\"BGN\",\"XOF\",\"BIF\",\"CVE\",\"KHR\",\"XAF\",\"CAD\",\"KYD\",\"XAF\",\"XAF\",\"CLP\",\"CLF\",\"CNY\",\"AUD\",\"AUD\",\"COP\",\"COU\",\"KMF\",\"CDF\",\"XAF\",\"NZD\",\"CRC\",\"XOF\",\"HRK\",\"CUP\",\"CUC\",\"ANG\",\"EUR\",\"CZK\",\"DKK\",\"DJF\",\"XCD\",\"DOP\",\"USD\",\"EGP\",\"SVC\",\"USD\",\"XAF\",\"ERN\",\"EUR\",\"ETB\",\"EUR\",\"FKP\",\"DKK\",\"FJD\",\"EUR\",\"EUR\",\"EUR\",\"XPF\",\"EUR\",\"XAF\",\"GMD\",\"GEL\",\"EUR\",\"GHS\",\"GIP\",\"EUR\",\"DKK\",\"XCD\",\"EUR\",\"USD\",\"GTQ\",\"GBP\",\"GNF\",\"XOF\",\"GYD\",\"HTG\",\"USD\",\"AUD\",\"EUR\",\"HNL\",\"HKD\",\"HUF\",\"ISK\",\"INR\",\"IDR\",\"XDR\",\"IRR\",\"IQD\",\"EUR\",\"GBP\",\"ILS\",\"EUR\",\"JMD\",\"JPY\",\"GBP\",\"JOD\",\"KZT\",\"KES\",\"AUD\",\"KPW\",\"KRW\",\"KWD\",\"KGS\",\"LAK\",\"EUR\",\"LBP\",\"LSL\",\"ZAR\",\"LRD\",\"LYD\",\"CHF\",\"EUR\",\"EUR\",\"MOP\",\"MKD\",\"MGA\",\"MWK\",\"MYR\",\"MVR\",\"XOF\",\"EUR\",\"USD\",\"EUR\",\"MRO\",\"MUR\",\"EUR\",\"XUA\",\"MXN\",\"MXV\",\"USD\",\"MDL\",\"EUR\",\"MNT\",\"EUR\",\"XCD\",\"MAD\",\"MZN\",\"MMK\",\"NAD\",\"ZAR\",\"AUD\",\"NPR\",\"EUR\",\"XPF\",\"NZD\",\"NIO\",\"XOF\",\"NGN\",\"NZD\",\"AUD\",\"USD\",\"NOK\",\"OMR\",\"PKR\",\"USD\",\"\",\"PAB\",\"USD\",\"PGK\",\"PYG\",\"PEN\",\"PHP\",\"NZD\",\"PLN\",\"EUR\",\"USD\",\"QAR\",\"EUR\",\"RON\",\"RUB\",\"RWF\",\"EUR\",\"SHP\",\"XCD\",\"XCD\",\"EUR\",\"EUR\",\"XCD\",\"WST\",\"EUR\",\"STD\",\"SAR\",\"XOF\",\"RSD\",\"SCR\",\"SLL\",\"SGD\",\"ANG\",\"XSU\",\"EUR\",\"EUR\",\"SBD\",\"SOS\",\"ZAR\",\"\",\"SSP\",\"EUR\",\"LKR\",\"SDG\",\"SRD\",\"NOK\",\"SZL\",\"SEK\",\"CHF\",\"CHE\",\"CHW\",\"SYP\",\"TWD\",\"TJS\",\"TZS\",\"THB\",\"USD\",\"XOF\",\"NZD\",\"TOP\",\"TTD\",\"TND\",\"TRY\",\"TMT\",\"USD\",\"AUD\",\"UGX\",\"UAH\",\"AED\",\"GBP\",\"USD\",\"USD\",\"USN\",\"UYU\",\"UYI\",\"UZS\",\"VUV\",\"VEF\",\"VND\",\"USD\",\"USD\",\"XPF\",\"MAD\",\"YER\",\"ZMW\",\"ZWL\",\"XBA\",\"XBB\",\"XBC\",\"XBD\",\"XTS\",\"XXX\",\"XAU\",\"XPD\",\"XPT\",\"XAG\",\"AFA\",\"FIM\",\"ALK\",\"ADP\",\"ESP\",\"FRF\",\"AOK\",\"AON\",\"AOR\",\"ARA\",\"ARP\",\"ARY\",\"RUR\",\"ATS\",\"AYM\",\"AZM\",\"RUR\",\"BYR\",\"BYB\",\"RUR\",\"BEC\",\"BEF\",\"BEL\",\"BOP\",\"BAD\",\"BRB\",\"BRC\",\"BRE\",\"BRN\",\"BRR\",\"BGJ\",\"BGK\",\"BGL\",\"BUK\",\"CNX\",\"HRD\",\"HRK\",\"CYP\",\"CSJ\",\"CSK\",\"ECS\",\"ECV\",\"GQE\",\"EEK\",\"XEU\",\"FIM\",\"FRF\",\"FRF\",\"FRF\",\"GEK\",\"RUR\",\"DDM\",\"DEM\",\"GHC\",\"GHP\",\"GRD\",\"FRF\",\"GNE\",\"GNS\",\"GWE\",\"GWP\",\"ITL\",\"ISJ\",\"IEP\",\"ILP\",\"ILR\",\"ITL\",\"RUR\",\"RUR\",\"LAJ\",\"LVL\",\"LVR\",\"LSM\",\"ZAL\",\"LTL\",\"LTT\",\"LUC\",\"LUF\",\"LUL\",\"MGF\",\"MWK\",\"MVQ\",\"MLF\",\"MTL\",\"MTP\",\"FRF\",\"FRF\",\"MXP\",\"RUR\",\"FRF\",\"MZE\",\"MZM\",\"NLG\",\"ANG\",\"NIC\",\"PEN\",\"PEH\",\"PEI\",\"PES\",\"PLZ\",\"PTE\",\"FRF\",\"ROK\",\"RON\",\"ROL\",\"RUR\",\"FRF\",\"FRF\",\"FRF\",\"ITL\",\"CSD\",\"EUR\",\"SKK\",\"SIT\",\"ZAL\",\"SDG\",\"RHD\",\"ESA\",\"ESB\",\"ESP\",\"SDD\",\"SDP\",\"SRG\",\"CHC\",\"RUR\",\"TJR\",\"IDR\",\"TPE\",\"TRL\",\"TRY\",\"RUR\",\"TMM\",\"UGS\",\"UGW\",\"UAK\",\"SUR\",\"USS\",\"UYN\",\"UYP\",\"RUR\",\"VEB\",\"VEF\",\"VEF\",\"VNC\",\"YDD\",\"YUD\",\"YUM\",\"YUN\",\"ZRN\",\"ZRZ\",\"ZMK\",\"ZWC\",\"ZWD\",\"ZWD\",\"ZWN\",\"ZWR\",\"XFO\",\"XRE\",\"XFU\"], \n      country_iso_code: null,\n      currency_format_modal: '',\n      is_country_codes_dropdown_disabled: true,\n      current_column_index: null,\n      aggregation_options: [null, \"SUM\",\"AVG\"],\n      sample: \"\",\n      country_codes: [\"ALL\",\"AFN\",\"ARS\",\"AWG\",\"AUD\",\"AZN\",\"BSD\",\"BBD\",\"BYR\",\"BZD\",\"BMD\",\"BOB\",\"BAM\",\"BWP\",\"BGN\",\"BRL\",\"BND\",\"KHR\",\"CAD\",\"KYD\",\"CLP\",\"CNY\",\"COP\",\"CRC\",\"HRK\",\"CUP\",\"CZK\",\"DKK\",\"DOP\",\"EGP\",\"SVC\",\"EEK\",\"EUR\",\"FKP\",\"FJD\",\"GEL\",\"GHC\",\"GIP\",\"GTQ\",\"GGP\",\"GYD\",\"HNL\",\"HKD\",\"HUF\",\"ISK\",\"INR\",\"IDR\",\"IRR\",\"IMP\",\"ILS\",\"JMD\",\"JPY\",\"JEP\",\"KZT\",\"KPW\",\"KRW\",\"KGS\",\"LAK\",\"LVL\",\"LBP\",\"LRD\",\"LTL\",\"MKD\",\"MYR\",\"MUR\",\"MXN\",\"MNT\",\"MZN\",\"NAD\",\"NPR\",\"ANG\",\"NZD\",\"NIO\",\"NGN\",\"NOK\",\"OMR\",\"PKR\",\"PAB\",\"PYG\",\"PEN\",\"PHP\",\"PLN\",\"QAR\",\"RON\",\"RUB\",\"SHP\",\"SAR\",\"RSD\",\"SCR\",\"SGD\",\"SBD\",\"SOS\",\"ZAR\",\"LKR\",\"SEK\",\"CHF\",\"SRD\",\"SYP\",\"TWD\",\"THB\",\"TTD\",\"TRL\",\"TVD\",\"UAH\",\"GBP\",\"USD\",\"UYU\",\"UZS\",\"VEF\",\"VND\",\"YER\",\"ZWD\"],\n      metric_operation_options: ['SUM', 'AVG', 'COUNT', 'NUNIQUE'],\n      old_worksheet_details: {},\n      postgres_icon_path: require('@/portal/assets/img/postgres_icon.png'),\n      // mysql_icon_path: require('@/portal/assets/img/mysql_icon.png'),\n      mysql_icon_path: require('@/portal/assets/img/logo-mysql.png'),\n      show_database_dataset_settings: false,\n      database_dataset_id: null,\n      database_dataset_name: null,\n      database_schema_name: null,\n      database_jdbc_connection_string: null,\n      database_host: null,\n      database_port: null,\n      database_username: null,\n      database_password: null,\n      database_db_name: null,\n      show_database_dataset_settings_details: false,\n      current_dataset_database_icon: null,\n      isShowing_test: false,\n      show_database_options: true,\n      database_dataset_connection_type: 'JDBC',\n\n      \n    };\n  },\n  mounted() {\n    this.get_dataset_list();\n    // this.postgres_icon_path = require('@/portal/assets/img/postgres_icon.png')\n  },\n  methods: {\n    open_settings_for_dataset(index){\n      // console.log(index);\n      if(index === null){\n          this.show_dataset_settings = true;\n      } else {\n        // console.log(this.datasets[index])\n          this.old_worksheet_details = this.datasets[index].old_worksheet_details;\n          this.is_dataset_editable = true;\n          this.file_label = this.datasets[index].file_name;\n          $(\"#inputGroupFile01\").prop(\"disabled\", true);\n          $(\"#dataset_name\").prop(\"disabled\", true);\n          this.dataset_name = this.datasets[index].data_name;\n          $(\"#upload_file\").hide();\n          // console.log(response.data.data_sources[0].worksheet_details.column_details);\n\n\n          for (let [key, value] of Object.entries(this.datasets[index].worksheet_details.column_rename_map)) {\n              this.columns.push({\n                  name: key,\n                  newname: value,\n              });\n          }\n          this.is_file_uploaded = true;\n          var metrics_len = this.datasets[index].worksheet_details.metrics.length; \n          for(let i = 0; i < metrics_len ; i++) {\n              this.metrics.push({\n                  name: this.datasets[index].worksheet_details.metrics[i].name,\n                  column: this.datasets[index].worksheet_details.metrics[i].column,\n                  operation: this.datasets[index].worksheet_details.metrics[i].operation,\n              })\n          }\n          // debugger;\n          // console.log(this.metrics);\n          for (let i = 0; i < this.metrics.length; i++) {\n              this.metricsdata.push({\n              name: this.metrics[i].name,\n              column: this.metrics[i].column,\n              operation: this.metrics[i].operation,\n              // on: [this.metrics[i].column1, this.metrics[i].column2]\n              });\n          }\n          var object = this.columns.reduce(\n              (obj, item) => Object.assign(obj, { [item.name]: item.newname }),\n              {}\n          );\n\n          for (let [key, value] of Object.entries(this.datasets[index].worksheet_details.column_details)) {\n              for (let i = 0; i < this.columns.length; i++) {\n                  if(this.columns[i].newname === key) {\n                      // console.log(value.currency_format);\n                      this.columns[i].data_type = value.datatype; \n                      this.newcolumnscomplete.push({\n                      name: this.columns[i].name,\n                      newname: this.columns[i].newname,\n                      data_type : value.datatype,\n                      column_type: value.column_type,\n                      additive: value.additive,\n                      aggregation: ((value.aggregation === null) ? value.aggregation = \"None\" : value.aggregation = value.aggregation ),\n                      hidden:value.hidden,\n                      nlp_search_enabled: value.nlp_search_enabled,\n                      synonyms: (value.synonyms ? undefined : \"\" ),\n                      index_type: value.index_type,\n                      entity_category:value.entity_category,\n                      currency_format: ((value.currency_format === undefined) ? null : value.currency_format)\n                      });\n                  }\n                  // break;\n              } \n          }  \n            // console.log(this.newcolumnscomplete);\n\n              // console.log\n          var array = {}; \n          var worksheet_details = {};\n          for(let i = 0; i < this.newcolumnscomplete.length; i++){\n          var temp = this.newcolumnscomplete[i];\n          // console.log(temp.currency_format)\n          // temp.synonyms = temp.synonyms.replace(/,/g, '>>');\n          worksheet_details[temp.newname] = {\n              \"datatype\": `${temp.data_type}`,\n              \"column_type\": `${temp.column_type}`,\n              \"additive\": temp.additive,\n              \"aggregation\": temp.aggregation,\n              \"hidden\" : temp.hidden,\n              \"nlp_search_enabled\": temp.nlp_search_enabled,\n              \"index_type\": `${temp.index_type}`,\n              \"synonyms\": `${temp.synonyms}`,\n              \"entity_category\":`${temp.entity_category}`,\n              \"currency_format\":temp.currency_format\n              }\n          // temp.synonyms = temp.synonyms.replace(/>> /g, ',');\n          }\n          // console.log(worksheet_details);\n          this.column_details = Object.assign(worksheet_details);\n          // console.log(this.newcolumnscomplete,this.column_details);\n          this.newcolumns = object;\n          this.iscolumnsnamechanged = true;\n          this.ismetricssaved = true;\n          this.spinnerOn = false;\n          this.show_dataset_settings = true;\n          setTimeout(() => {\n          $(\"#inputGroupFile01\").prop(\"disabled\", true);\n          $(\"#dataset_name\").prop(\"disabled\", true);\n          }, 100);\n          \n      }\n    },\n    generateUUID() {\n      // Public Domain/MIT\n      var d = new Date().getTime(); //Timestamp\n      var d2 =\n          (performance && performance.now && performance.now() * 1000) || 0; //Time in microseconds since page-load or 0 if unsupported\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(\n          c\n      ) {\n          var r = Math.random() * 16; //random number between 0 and 16\n          if (d > 0) {\n          //Use timestamp until depleted\n          r = (d + r) % 16 | 0;\n          d = Math.floor(d / 16);\n          } else {\n          //Use microseconds since page-load if supported\n          r = (d2 + r) % 16 | 0;\n          d2 = Math.floor(d2 / 16);\n          }\n          return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n      });\n    },\n    editvalue(index) {\n      document.getElementById(\"input\" + index).disabled = !document.getElementById(\"input\" + index).disabled;\n    },\n    getFile(e) {\n      e.preventDefault();\n      let filename = \"\";\n      let filedata = \"\";\n      const file = e.target.files[0];\n      this.file_label = file.name;\n      // console.log(file);\n      if (file.type != \"text/csv\") {\n          Swal({\n          type: \"error\",\n          text: \"Only CSV files can be uploaded.\",\n          timer:2500,\n          });\n          this.file_label = \"Choose file\";\n      } else {\n          this.file = e.target.files[0];\n      }\n    },\n    addmetricvalue() {\n      event.preventDefault();\n      this.metrics.push({\n          name: null,\n          operation: \"SUM\",\n          column: null,\n      });\n    },\n    deleteheader(valueindex) {\n      this.metrics.splice(valueindex, 1);\n    },\n    editcolumns() {\n      event.preventDefault();\n      var validation_success = true;\n      for(let i = 0; i < this.columns.length; i++) {\n        if(this.columns[i].newname === '' || this.columns[i].newname.split(' ').join('') === ''){\n          toastr.error(\"You cannot set column names Empty\");\n          validation_success = false;\n          break;\n        }\n      }\n      if(validation_success){\n        Swal.fire({\n            title: \"Are you sure?\",\n            text: \" You want to Edit the Columns?\",\n            type: \"question\",\n            showCancelButton: true,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: \"Yes, Confirm!\"\n        }).then(result => {\n            if (result.value) {\n              // debugger;\n              // console.log(this.columns)\n              // console.log(this.column_details);\n            // this.newcolumns = this.columns\n            var newcolumnsdata = [];\n            if(!this.is_dataset_editable){\n                for (let i = 0; i < this.columns.length; i++) {\n                  // console.log(this.columns[i])\n                    newcolumnsdata.push({\n                    name: this.columns[i].name,\n                    newname: this.columns[i].newname,\n                    data_type : this.columns[i].data_type,\n                    column_type: \"Metric\",\n                    additive: false,\n                    aggregation: \"None\",\n                    hidden:false,\n                    nlp_search_enabled: false,\n                    synonyms: \"\",\n                    index_type: \"DEFAULT\",\n                    entity_category: \"PERSON\",\n                    currency_format: \"None\"\n                });\n                }\n            } else {\n              for (let [key,value] of Object.entries(this.column_details)){\n                // console.log(key, value)\n                for (let i = 0; i < this.columns.length; i++) {\n                  if (this.columns[i].name === key){\n                  newcolumnsdata.push({\n                    name: this.columns[i].name,\n                    newname: this.columns[i].newname,\n                    data_type : this.columns[i].data_type,\n                    column_type: value.column_type,\n                    additive: value.additive,\n                    aggregation: value.aggregation,\n                    hidden: value.hidden,\n                    nlp_search_enabled: value.nlp_search_enabled,\n                    synonyms: value.synonyms,\n                    index_type: value.index_type,\n                    entity_category: value.entity_category,\n                    currency_format: value.currency_format \n                  });\n                  }\n                }\n              }\n                // for (let i = 0; i < this.columns.length; i++) {\n                //   newcolumnsdata.push({\n                //     name: this.columns[i].name,\n                //     newname: this.columns[i].newname,\n                //     data_type : this.columns[i].data_type,\n                //     column_type: this.columns[i].column_type,\n                //     additive: this.columns[i].additive,\n                //     aggregation: this.columns[i].aggregation,\n                //     hidden: this.columns[i].hidden,\n                //     nlp_search_enabled: this.columns[i].nlp_search_enabled,\n                //     synonyms: this.columns[i].synonyms,\n                //     index_type: this.columns[i].index_type,\n                //     entity_category: this.columns[i].entity_category,\n                //     currency_format: this.columns[i].currency_format \n                //   });\n                // }\n            }\n            // console.log(newcolumnsdata);\n            var object = newcolumnsdata.reduce(\n                (obj, item) => Object.assign(obj, { [item.name]: item.newname }),\n                {}\n            );\n            // console.log(object);\n            this.newcolumns = object;\n            this.newcolumnscomplete = newcolumnsdata;\n            this.iscolumnsnamechanged = true;\n            }\n        });\n      }\n    },\n    addmetrics() {\n      event.preventDefault();\n      var validation_success = true,\n      metrics_name_list = []\n      // console.log(metrics_name_list)\n      // for(let i = 0;i < this.metrics.length; i++) {\n      //   if((this.metrics[i].name === null || this.metrics[i].name === '' || this.metrics[i].name.split(' ').join('') === '' ) || (this.metrics[i].column === null) || (this.metrics[i].operation === null)){\n      //   metrics_name_list.push(this.metrics[i].name)\n      //   }\n      // }\n      for(let i = 0;i < this.metrics.length; i++) {\n        // console.log(this.metrics[i]);\n        if((this.metrics[i].name === null || this.metrics[i].name === '' || this.metrics[i].name.split(' ').join('') === '' ) || (this.metrics[i].column === null) || (this.metrics[i].operation === null)){\n          toastr.error(\"Please Fill in all the values for the metrics\");\n          validation_success = false;\n          // break;\n        }\n        // else{\n        //   metrics_name_list.push(this.metrics[i].name);\n        // }\n        // console.log(metrics_name_list)\n        // if(metrics_name_list.length > 1 && validation_success === true && metrics_name_list.includes(this.metrics[i].name)){\n        //   console.log(i);\n        //   toastr.error(\"Two metric names cannot be same\");\n        //   validation_success = false;\n        //   // break;\n        // }\n      }\n      if(validation_success){\n        Swal.fire({\n            title: \"Are you sure?\",\n            text: \" You want to add these metrics?\",\n            type: \"question\",\n            showCancelButton: true,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: \"Yes, Confirm!\"\n        }).then(result => {\n            if (result.value) {\n            this.metricsdata = [];\n            for (let i = 0; i < this.metrics.length; i++) {\n                this.metricsdata.push({\n                name: this.metrics[i].name,\n                column: this.metrics[i].column,\n                operation: this.metrics[i].operation,\n                // on: [this.metrics[i].column1, this.metrics[i].column2]\n                });\n            }\n            this.ismetricssaved = true;\n            }\n            // console.log(this.metricsdata);\n        });\n      }\n    },\n    finalsave() {\n      Swal.fire({\n          title: \"Are you sure?\",\n          type: \"question\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Yes, Confirm!\",\n          allowOutsideClick: false\n      }).then(result => {\n          if (result.value) {\n      this.spinnerOn = true;\n      if(!this.is_dataset_editable){\n      axios\n          .post(api_calls.bi_process_data(), {\n          company_name: this.$session.get(\"UserInformation\").company_name,\n          company_id: this.$session.get(\"UserInformation\").company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          object_name: this.object_name,\n          column_rename_mapping: this.newcolumns,\n          dataset_name: this.dataset_name,\n          metrics: this.metricsdata,\n          worksheet_details: this.column_details,\n          })\n          .then(response => {\n          this.spinnerOn = false;\n          if (response.data.status == \"Success\") {\n              Swal.fire({\n              title: \"Data Processed Successfully\",\n              type: \"success\",\n              allowOutsideClick: false,\n              timer:2000,\n\n              }).then(result_success => {\n                if(result_success.value){\n                  this.get_dataset_list();\n                  this.show_dataset_settings = false;\n                  this.$router.go();\n                }\n              })\n              // this.get_dataset_list();\n              // this.show_dataset_settings = false;\n              // this.$router.go()\n          } else {\n              Swal.fire({\n              title: \"Some Error Occurred, Please Try Again!\",\n              type: \"error\",\n              timer:2500,\n              });\n          }\n          // console.log(response);\n          })\n          .catch(err => {\n          this.spinnerOn = false;\n          Swal.fire({\n              title: \"Some Error Occurred, Please Try Again!\",\n              type: \"error\",\n              timer:2500,\n          });\n          console.log(err);\n          });\n      } else {\n          // var worksheet_details = this.column_details;\n          // var column_rename_map = this.newcolumns;\n          // var metrics = this.metricsdata\n          // console.log(this.column_details)\n          var worksheet_details = {};\n          worksheet_details.column_details = this.column_details;\n          worksheet_details.column_rename_map = this.newcolumns;\n          worksheet_details.metrics = this.metricsdata;\n          axios\n          .post(api_calls.bi_data_sheet_details(), {\n          company_name: this.$session.get(\"UserInformation\").company_name,\n          company_id: this.$session.get(\"UserInformation\").company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          dataset_name: this.dataset_name,\n          worksheet_details: worksheet_details,\n          old_worksheet_details: this.old_worksheet_details\n          })\n          .then(response => {\n          this.spinnerOn = false;\n          if(response.data.message === \"WORKSHEET DETAILS UPDATED\"){\n            Swal.fire({\n              title: \"Data Updated Successfully\",\n              type: \"success\",\n              allowOutsideClick: false\n              }).then(result_success => {\n                if(result_success.value){\n                  this.get_dataset_list();\n                  this.show_dataset_settings = false;\n                  this.$router.go()\n                }\n              })\n          } else {\n              Swal.fire({\n              title: \"Some Error Occurred, Please Try Again!\",\n              type: \"error\",\n              timer:2500,\n              });\n          }\n          }).catch(err => {\n          this.spinnerOn = false;\n          Swal.fire({\n              title: \"Some Error Occurred, Please Try Again!\",\n              type: \"error\",\n              timer:2500,\n          });\n          console.log(err);\n          });\n        }\n          }\n      });\n    },\n    uploadfile() {\n      event.preventDefault();\n      // console.log(this.dataset_name);\n      // console.log(this.file);\n      let filename = \"\";\n      let filedata = \"\";\n      const reader = new FileReader();\n      filename = this.file.name;\n      reader.readAsDataURL(this.file);\n      reader.onloadstart = () => {\n          // this.$root.$emit('show_loader', true);\n      };\n      reader.onload = () => {\n          // this.$root.$emit('show_loader', true);\n          filedata = reader.result.split(\"base64,\")[1];\n      };\n      reader.onloadend = () => {\n          var x = filedata.split(\"base64,\")[1];\n          var temp_uuid = \"\";\n          temp_uuid = this.generateUUID();\n          var user_details = {\n          email: this.$session.get(\"UserInformation\").email,\n          token: this.$session.get(\"UserInformation\").tokens,\n          company_name: this.$session.get(\"UserInformation\").company_name,\n          company_id: this.$session.get(\"UserInformation\").company_id,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          idempotency_key: temp_uuid,\n          dataset_name: this.dataset_name\n          };\n          var json = JSON.stringify(user_details);\n          var blob = new Blob([json], {\n          type: \"application/json\"\n          });\n          const fd = new FormData();\n          fd.append(\"file\", this.file, filename);\n          fd.append(\"json\", blob);\n          this.spinnerOn = true;\n          // console.log(fd);\n          axios\n          .post(api_calls.bi_upload_file(), fd)\n          .then(response => {\n              if (response.data.status == \"Success\") {\n              for (\n                  let i = 0;\n                  i < response.data.file_details.columns.length;\n                  i++\n              ) {\n                  this.columns.push({\n                  name: response.data.file_details.columns[i],\n                  newname: response.data.file_details.columns[i],\n                  \n                  });\n              \n              }\n                  for(let k= 0; k< this.columns.length; k ++){\n                      for (let [key, value] of Object.entries(response.data.file_details.data_types)) {\n                      if(key == this.columns[k].name){\n                      this.columns[k].data_type =  value\n                      }\n                      }\n                  }\n                  // console.log(this.columns);\n              //   this.columns = response.data.file_details.columns;\n              this.spinnerOn = false;\n              this.is_file_uploaded = true;\n              this.object_name = response.data.file_details.object_name;\n              Swal.fire({\n                  title: \"File Uploaded Successfully\",\n                  type: \"success\",\n                  timer:2000,\n              });\n              } else if (response.data.status != \"Success\") {\n              this.file_label = \"Choose file\";\n              this.spinnerOn = false;\n              Swal.fire({\n                  title: \"Some Error Occurred, Please Try Again!\",\n                  type: \"error\",\n                  timer:2500,\n              });\n              // setTimeout(() => {\n              // $router.go();\n              // }, 1000);\n              }\n          })\n          .catch(err => {\n              this.file_label = \"Choose file\";\n              this.spinnerOn = false;\n              Swal.fire({\n              title: \"Some Error Occurred, Please Try Again!\",\n              type: \"error\",\n              timer:2500,\n              });\n              // console.log(err,\"wEeeee\");\n          });\n      };\n    },\n    save_column_data(){ \n      // console.log(this.newcolumnscomplete);\n      // for (let i = 0; i < this.newcolumnscomplete.length; i++){\n      //   // console.log(this.newcolumnscomplete[i].synonyms)\n      //   if(this.newcolumnscomplete[i].synonyms != \"\" || this.newcolumnscomplete[i].synonyms.split(' ').join('') != \"\" ||this.newcolumnscomplete[i].synonyms != undefined ){\n      //     console.log(this.newcolumnscomplete[i].synonyms)\n      //   }\n      // }\n      Swal.fire({\n          title: \"Are you sure?\",\n          text: \" You want to add these worksheet details?\",\n          type: \"question\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Yes, Confirm!\"\n      })\n      .then(result => {\n        if(result.value) {\n          var array = {}; \n          var worksheet_details = {};\n          for(let i = 0; i < this.newcolumnscomplete.length; i++){\n          var temp = this.newcolumnscomplete[i];\n          // console.log(temp);\n          ((temp.aggregation === \"None\")? temp.aggregation = null : temp.aggregation = temp.aggregation)\n          if (temp.synonyms !== undefined) {\n            temp.synonyms = temp.synonyms.replace(/,/g, '>>');\n          }\n          worksheet_details[temp.newname] = {\n              \"datatype\": `${temp.data_type}`,\n              \"column_type\": `${temp.column_type}`,\n              \"additive\": temp.additive,\n              \"aggregation\": temp.aggregation,\n              \"hidden\" : temp.hidden,\n              \"nlp_search_enabled\": temp.nlp_search_enabled,\n              \"index_type\": `${temp.index_type}`,\n              \"synonyms\": `${temp.synonyms}`,\n              \"entity_category\":`${temp.entity_category}`,\n              \"currency_format\":temp.currency_format\n            }\n          if (temp.synonyms !== undefined) {\n            temp.synonyms = temp.synonyms.replace(/>> /g, ',');\n          }\n          ((temp.aggregation === null)? temp.aggregation = \"None\" : temp.aggregation = temp.aggregation)\n          }\n          // console.log(worksheet_details);\n          this.column_details = Object.assign(worksheet_details);\n          // console.log(this.column_details);\n        }\n      });\n      // console.log(worksheet_details);\n    },\n    get_dataset_list(){\n      this.spinnerOn = true;\n      axios\n      .get(api_calls.bi_data_sheet_details(), {\n        params : {\n        email: this.$session.get(\"UserInformation\").email,\n        token: this.$session.get(\"UserInformation\").tokens,\n        company_name: this.$session.get(\"UserInformation\").company_name,\n        company_id: this.$session.get(\"UserInformation\").company_id,\n        license_key: this.$session.get(\"UserInformation\").license_key,\n        // dataset_name: \"Fruithut v1\",\n        // dataset_name: \"Drug Trial Data\",\n        }\n      }).then(response => {\n        this.spinnerOn = false;\n        this.datasets = response.data.data_sources;\n        for(let i = 0; i <response.data.data_sources.length; i++){\n          response.data.data_sources[i].old_worksheet_details = response.data.data_sources[i].worksheet_details;\n        }\n      }).catch(err => {\n        this.spinnerOn = false;\n        toastr.error(\"Some Error Occurred, Please Try Again\");\n      })\n    },\n    format_date(date){\n      // return moment(date).format(\"YYYY MMMM DD\")\n      return moment(date).format(\"dddd, MMMM Do YYYY\")\n    },\n    open_currency_format_modal(index){\n      if(this.newcolumnscomplete[index].currency_format === null){\n        this.currency_format_modal = \"None\";\n        this.current_column_index = index;\n      } else {\n        this.current_column_index = index;\n        this.currency_format_modal = \"Specific\";\n        this.country_iso_code = this.newcolumnscomplete[index].currency_format;\n      }\n      $(\"#currencyFormatModal\").modal(\"show\")\n    },\n    change_currency_format(operation){\n      if( operation === 'close') {\n        $(\"#currencyFormatModal\").modal(\"hide\");\n        this.country_iso_code = null;\n      } \n      if(operation === 'save'){\n        if(this.currency_format_modal === \"None\"){\n          this.newcolumnscomplete[this.current_column_index].currency_format = null;\n          this.current_column_index = null;\n          $(\"#currencyFormatModal\").modal(\"hide\");\n          this.country_iso_code = null;\n        }\n        else {\n          if(this.country_iso_code === null){\n            toastr.error(\"Please Select an ISO Code\")\n          } else {\n            this.newcolumnscomplete[this.current_column_index].currency_format = this.country_iso_code;\n            this.current_column_index = null;\n            $(\"#currencyFormatModal\").modal(\"hide\");\n            this.country_iso_code = null;\n          }\n        }\n\n      }\n    },\n    open_settings_for_database_dataset(index){\n      this.show_dataset_settings = false;\n      this.show_database_dataset_settings = true;\n    },\n    open_database_dataset_modal(database){\n      this.show_database_dataset_settings_details = false;\n      if(database === 'postgres'){\n        this.current_dataset_database_icon = this.postgres_icon_path\n      }\n      if(database === 'mysql'){\n        this.current_dataset_database_icon = this.mysql_icon_path\n      }\n\n      this.database_dataset_id = this.generateUUID()\n      this.show_database_dataset_settings_details = true;\n    },\n    add_dataset_details(){\n      event.preventDefault();\n      swal.fire({\n        title: \"Are you sure?\",\n        text: 'You want to integrate with this Database?',\n        type: \"question\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, Confirm!\",\n        allowOutsideClick: false\n      })\n      .then(result => {\n        if (result.value) {\n          this.spinnerOn = true;\n          axios.post(api_calls.bi_db_integration(),{\n            email: this.$session.get(\"UserInformation\").email,\n            token: this.$session.get(\"UserInformation\").tokens,\n            company_name: this.$session.get(\"UserInformation\").company_name,\n            company_id: this.$session.get(\"UserInformation\").company_id,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            rdbms_name: 'postgresql',\n            dataset_id: this.database_dataset_id,\n            dataset_name: this.database_dataset_name,\n            schema_name: this.database_schema_name,\n            jdbc_connection_string: this.database_jdbc_connection_string,\n            username: this.database_username,\n            password: this.database_password\n          }).then(response =>{\n            this.spinnerOn = false;\n            if (response.data.message === 'DB INTEGRATION DETAILS SAVED'){\n              Swal.fire({\n              title: \"DB Integration Successful\",\n              type: \"success\",\n              allowOutsideClick: false\n              }).then(result_success => {\n                if(result_success.value){\n                  this.get_dataset_list();\n                  this.show_database_dataset_settings = false;\n                  this.$router.go()\n                }\n              });\n            } else {\n              Swal.fire({\n                title: \"Some Error Occurred, Please Try Again!\",\n                type: \"error\",\n                timer:2500,\n              });\n            }\n            // console.log(response)\n          }).catch(error => {\n            this.spinnerOn = false;\n            // toastr.error(\"Some Error Occurred. Please Try Again\")\n            Swal.fire({\n              title: \"Some Error Occurred, Please Try Again!\",\n              type: \"error\",\n              timer:2500,\n            });\n          });\n        }\n      });\n    }\n  },\n  watch: {\n    show_dataset_settings(newVal, oldVal){\n      if (newVal) {\n        // console.log('kjhgvfcdxd');\n      }\n      else {\n        this.columns = [];\n        this.metrics = [];\n        this.file_label = \"Choose file\";\n        this.is_file_uploaded = false;\n        this.newcolumns = [];\n        this.iscolumnsnamechanged = false;\n        this.object_name = \"\";\n        this.metricsdata = [];\n        this.ismetricssaved = false;\n        this.dataset_name = \"\";\n        this.file = null;\n        this.newcolumnscomplete = [];\n        this.column_details = {};\n        this.is_dataset_editable = false;\n      }\n    },\n    currency_format_modal(newVal, oldVal){\n      if(newVal === \"None\") {\n        this.is_country_codes_dropdown_disabled = true\n        this.country_iso_code = null\n      }\n      if(newVal === \"Specific\") {\n        this.is_country_codes_dropdown_disabled = false\n      }\n    },\n    database_dataset_connection_type(newVal, oldVal){\n      if (newVal === 'JDBC'){\n        this.database_host = null;\n        this.database_port = null;\n        this.database_db_name = null;\n      }\n      if (newVal === 'host_port'){\n        this.database_jdbc_connection_string = null;\n      }\n    },\n    show_database_dataset_settings_details(newVal, oldVal){\n      if (newVal === false){\n        this.database_dataset_name = null;\n        this.database_schema_name = null;\n        this.database_username = null;\n        this.database_password = null;\n        this.database_jdbc_connection_string = null;\n        this.database_host = null;\n        this.database_port = null;\n        this.database_db_name = null;\n      }\n\n    }\n  },\n}\n</script>\n<style scoped>\n.table td,\n.table th {\n  padding: 0.5rem !important;\n}\n.save_node_button {\n  font-size: 14px;\n  color: #fff;\n  background: #273679;\n  border: solid 1px #273679;\n  padding: 6px 15px;\n  font-weight: 400;\n  line-height: 20px;\n  /* display: inline-block; */\n  border-radius: 4px;\n  cursor: pointer;\n  float: right;\n}\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 36px;\n  height: 20px;\n  margin-left: 0 !important;\n}\n\n.switch input { \n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  -webkit-transition: .4s;\n  transition: .4s;\n}\n\n.slider:before {\n  position: absolute;\n  content: \"\";\n  height: 12px;\n  width: 12px;\n  left: 4px;\n  bottom: 4px;\n  background-color: white;\n  -webkit-transition: .4s;\n  transition: .4s;\n}\n\ninput:checked + .slider {\n  background-color: #2196F3;\n  border-radius: 20px;\n}\n\ninput:focus + .slider {\n  box-shadow: 0 0 1px #2196F3;\n  border-radius: 20px;\n}\n\ninput:checked + .slider:before {\n  -webkit-transform: translateX(26px);\n  -ms-transform: translateX(26px);\n  transform: translateX(17px);\n}\n\nRounded sliders\n.slider.round {\n  border-radius: 34px;\n}\n\n.slider.round:before {\n  border-radius: 50%;\n}\n.multiselect.country{\n  width: 60% !important;\n  margin-left: 6%;\n}\n.table tbody td{\n  background: #F7F8FB;\n  border-color: #DBE2E8;\n  border-width: 1px;\n  font-size: 14px;\n  color: #9499AE;\n  font-weight: 400;\n  border-top: 1px solid #dee2e6;\n  border-left: solid 1px #DBE2E8;\n}\n.table-scroll {\n  position: relative;\n  width:100%;\n  z-index: 1;\n  overflow: auto !important;\n  height: 480px;\n}\n#worksheet_details {\n  width: 100%;\n  min-width: 1500px;\n  margin: auto;\n  border-collapse: separate;\n  border-spacing: 0;\n}\n\n/* .table-wrap {\n  position: relative;\n} */\n/* #worksheet_details th,\n#worksheet_details td {\n  padding: 5px 10px;\n  border: 1px solid #000;\n  background: #fff;\n  vertical-align: top;\n} */\n.table-scroll tbody {\n  overflow-y: scroll;\n}\n.table-scroll thead th {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  z-index: 9999999;\n  background-color: #d7ddea;\n}\n#table-scroll::-webkit-scrollbar {\n    max-height: 10px;\n    width: 7px;\n    height: 7px;\n    border-radius: 10px;\n    overflow-x: hidden;\n}\n#table-scroll::-webkit-scrollbar {\n    max-height: 10px;\n    width: 7px;\n    height: 7px;\n    border-radius: 10px;\n    overflow-x: hidden;\n}\n#table-scroll::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 10px;\n}\n#table-scroll::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 10px;\n}\n#table-scroll::-webkit-scrollbar-thumb:hover {\n    background: #555;\n    border-radius: 10px;\n}\n/*\n.table-scroll tfoot,\n.table-scroll tfoot th,\n.table-scroll tfoot td {\n  position: -webkit-sticky;\n  position: sticky;\n  bottom: 0;\n  background: #666;\n  color: #fff;\n  z-index:4;\n}\n\n.table-scroll th:first-child {\n  position: -webkit-sticky;\n  position: sticky;\n  left: 0;\n  z-index: 2;\n  background: #ccc;\n}\n.table-scroll thead th:first-child,\n.table-scroll tfoot th:first-child {\n  z-index: 5;\n} */\n\n.shadow {\n  cursor: pointer;\n  -webkit-box-shadow: 3px 3px 5px 6px #ccc;  /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */\n  -moz-box-shadow:    3px 3px 5px 6px #ccc;  /* Firefox 3.5 - 3.6 */\n  box-shadow:         3px 3px 5px 6px #ccc;  /* Opera 10.5, IE 9, Firefox 4+, Chrome 6+, iOS 5 */\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.45s ease-out;\n}\n\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n\n\n</style>"]}]}