{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Customer Support/SupportSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Customer Support/SupportSettings.vue","mtime":1660042032563},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IEpzb25FeGNlbCBmcm9tICJ2dWUtanNvbi1leGNlbCI7CmltcG9ydCBjb3VudHJpZXMgZnJvbSAiQC9wb3J0YWwvY29tcG9uZW50cy9Db3VudHJpZXMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCB7IHNldFRpbWVvdXQgfSBmcm9tICJ0aW1lcnMiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJ2dWUtbXVsdGlzZWxlY3QiOwoKVnVlLmNvbXBvbmVudCgiZG93bmxvYWRFeGNlbCIsIEpzb25FeGNlbCk7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc21zX3RleHQ6ICIiLAogICAgICBzdGFydF9ncmVldGluZ3M6ICIiLAogICAgICBlbmRfZ3JlZXRpbmdzOiAiIiwKICAgICAgYmlnX3NwaW5uZXI6IGZhbHNlLAogICAgICB0b3RhbF9wYWdlczogbnVsbCwKICAgICAgbnVtYmVyX29mX3Jvd3M6IG51bGwsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiA1LAogICAgICBjb3VudHJ5X2xpc3Q6IGNvdW50cmllcywKICAgICAgdXNlcl9yb2xlOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgY29tcGFueWlkOiAiIiwKICAgICAgY29tcGFueW5hbWU6ICIiLAogICAgICBjYWxsX2hpc3RvcnlfbmFtZTogIiIsCiAgICAgIHN1cHBvcnRfbnVtYmVyc19saXN0OiBbXSwKICAgICAgY29udGFjdF9udW1iZXJzOiAiIiwKICAgICAgY29udGFjdF9uYW1lczogIiIsCiAgICAgIGNvdW50cnlfbmFtZTogewogICAgICAgIGNvZGU6ICIiLAogICAgICAgIG5hbWU6ICItLVNlbGVjdCBDb3VudHJ5IE5hbWUtLSIKICAgICAgfSwKCiAgICAgIG9sZF9jb250YWN0X2RhdGE6IHsKICAgICAgICBDb250YWN0TnVtYmVyOiAiIiwKICAgICAgICBDb3VudHJ5Q29kZTogIiIsCiAgICAgICAgTmFtZTogIiIKICAgICAgfSwKICAgICAgbmV3X2NvbnRhY3RfZGF0YTogewogICAgICAgIENvbnRhY3ROdW1iZXI6ICIiLAogICAgICAgIENvdW50cnlDb2RlOiAiIiwKICAgICAgICBOYW1lOiAiIgogICAgICB9LAogICAgICBjYWxsX2hpc3RvcnlfbGlzdDogW10sCiAgICAgIGNhbGxfaGlzdG9yeV9udW1iZXJfb2Zfcm93czogIiIsCiAgICAgIGNhbGxfaGlzdG9yeV90b3RhbF9wYWdlczogMCwKICAgICAgY2FsbF9oaXN0b3J5X3Blcl9wYWdlOiAxMCwKICAgICAgc3RhcnRfc21zX2dyZWV0aW5nczogYFRoYW5rIHlvdSBmb3IgcmVnaXN0ZXJpbmcgd2l0aCBDZW5zZSBBSS4gWW91ciBvdHAgaXMge09UUH0uYCwKICAgICAgY2FsbF9zdGFydF9ncmVldGluZ3M6IGBUaGlzIGNhbGwgaXMgZnJvbSB7Y29tcGFueSBuYW1lfSwgcGxlYXNlIGhvbGQgb24gd2hpbGUgd2UgY29ubmVjdCB5b3Ugd2l0aCBvdXIgcmVzcHJlc2VudGF0aXZlLmAsCiAgICAgIGNvdW50cnluYW1lOiBbXSwKICAgICAgY29udGFjdG51bWJlcnM6IFtdLAogICAgICBjb250YWN0bmFtZXM6IFtdLAogICAgICBwaG9uZV9udW1iZXJfdmFsaWRpdHk6IC9bMC05XXs5LDExfSQvLAogICAgICBjb250YWN0X2VkaXRfbnVtYmVyOiAiZmFsc2UiLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0CiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKAogICAgICAhdGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpICYmCiAgICAgIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlID09ICJTdXBlckFkbWluIgogICAgKSB7CiAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2Ugc2VsZWN0IGEgY29tcGFueSBuYW1lIGZyb20gdGhlIGRyb3Bkb3duIik7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmxvYWRfc3VwcG9ydF91cmwoKSwgewogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBzaG93X3N1cGVyYWRtaW46ICJUcnVlIiwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc1Nob3c6ICJUcnVlIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YVsxXS5udW1iZXJfb2Zfcm93czsKICAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwodGhpcy5udW1iZXJfb2Zfcm93cyAvIHRoaXMucGVyX3BhZ2UpOwogICAgICAgICAgdGhpcy5zdXBwb3J0X251bWJlcnNfbGlzdCA9IHJlc3BvbnNlLmRhdGFbMF07CiAgICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55SWQiKTsKICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICB9CiAgICBpZiAoCiAgICAgIHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSB8fAogICAgICB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSAhPSAiU3VwZXJBZG1pbiIKICAgICkgewogICAgICBheGlvcwogICAgICAgIC5wb3N0KGFwaV9jYWxscy5sb2FkX3N1cHBvcnRfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgaXNTaG93OiAiVHJ1ZSIKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGFbMV0ubnVtYmVyX29mX3Jvd3M7CiAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgICAgICAgIHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3QgPSByZXNwb25zZS5kYXRhWzBdOwogICAgICAgIH0pOwogICAgfQogICAgYXhpb3MKICAgICAgLnBvc3QoYXBpX2NhbGxzLnR3aWxpb19ncmVldGluZ3MoKSwgewogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgaXNTaG93OiB0cnVlCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnN0YXJ0X2dyZWV0aW5ncyA9IHJlc3BvbnNlLmRhdGEuZ3JlZXRpbmc7CiAgICAgICAgdGhpcy5lbmRfZ3JlZXRpbmdzID0gcmVzcG9uc2UuZGF0YS5idXN5OwogICAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmVfZ3JlZXRpbmdzKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KGFwaV9jYWxscy50d2lsaW9fZ3JlZXRpbmdzKCksIHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzRWRpdDogdHJ1ZSwKICAgICAgICAgIGdyZWV0aW5nOiB0aGlzLnN0YXJ0X2dyZWV0aW5ncywKICAgICAgICAgIGJ1c3k6IHRoaXMuZW5kX2dyZWV0aW5ncwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiQ2FsbCBNZXNzYWdlcyBVcGRhdGVkIikgewogICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiQ2FsbCBHcmVldGluZ3MgVXBkYXRlZCBTdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlNNUyBtZXNzYWdlIHNhdmVkIHN1Y2Nlc2Z1bGx5Iik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgc21zX3NldHRpbmdzKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KGFwaV9jYWxscy5zbXNfc2V0dGluZ3MoKSwgewogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgc21zdGV4dDogdGhpcy5zbXNfdGV4dAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiUXVlcnkgRXhlY3V0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiU01TIG1lc3NhZ2Ugc2F2ZWQgc3VjY2VzZnVsbHkiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVfc3VwcG9ydF9udW1iZXIoaW5kZXgpIHsKICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyEiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmFkZF9zdXBwb3J0X3VybCgpLCB7CiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICBDb250YWN0TnVtYmVyOiB0aGlzLmNoZWNrZWRfbGlzdCwKICAgICAgICAgICAgICBpc0RlbGV0ZTogIlRydWUiLAogICAgICAgICAgICAgIGNvbnRhY3RzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIE5hbWU6IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdLk5hbWUsCiAgICAgICAgICAgICAgICAgIENvbnRhY3ROdW1iZXI6IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdLkNvbnRhY3ROdW1iZXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkNPTlRBQ1RTIERFTEVURUQiKSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiQ29udGFjdCBEZWxldGVkIFN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZV9tdWx0aXBsZV9zdXBwb3J0X251bWJlcigpIHsKICAgICAgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiJObyBudW1iZXIgc2VsZWN0ZWQhIiwKICAgICAgICAgICAgICAgIHRleHQ6IiIsCiAgICAgICAgICAgICAgICB0eXBlOiJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjoyMDAwLAogICAgICAgICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGVja2VkX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdChhcGlfY2FsbHMuYWRkX3N1cHBvcnRfdXJsKCksIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIGlzRGVsZXRlOiAiVHJ1ZSIsCiAgICAgICAgICAgICAgICBjb250YWN0czogdGhpcy5jaGVja2VkX2xpc3QKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkNPTlRBQ1RTIERFTEVURUQiKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJDb250YWN0IERlbGV0ZWQgU3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHN1cHBvcnRfbW9kYWwoaW5kZXgpIHsKICAgICAgdGhpcy5jYWxsX2hpc3RvcnlfbmFtZSA9IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdLk5hbWU7CiAgICAgIHRoaXMuY2FsbF9oaXN0b3J5X2xpc3QgPSBbXTsKICAgICAgaWYgKAogICAgICAgIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlID09ICJTdXBlckFkbWluIiAmJgogICAgICAgICF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikKICAgICAgKSB7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy5nZXRfY2FsbF9sb2dfdXJsKCksIHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIHN1cHBvcnRudW1iZXI6IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdLkNvbnRhY3ROdW1iZXIsCiAgICAgICAgICAgIHBhZ2Vfbm86IDEsCiAgICAgICAgICAgIHN1cGVyX2FkbWluX2xvZzogdHJ1ZSwKICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5X251bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YVsxXS5udW1iZXJfb2Zfcm93czsKICAgICAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnlfdG90YWxfcGFnZXMgPSBNYXRoLmNlaWwoCiAgICAgICAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnlfbnVtYmVyX29mX3Jvd3MgLyB0aGlzLmNhbGxfaGlzdG9yeV9wZXJfcGFnZQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmNhbGxlcl9oaXN0b3J5X2xpc3QgPSByZXNwb25zZS5kYXRhWzBdOwogICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2FsbGVyX2hpc3RvcnlfbGlzdCkgewogICAgICAgICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5X2xpc3QucHVzaCh0aGlzLmNhbGxlcl9oaXN0b3J5X2xpc3RbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmdldF9jYWxsX2xvZ191cmwoKSwgewogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgc3VwcG9ydG51bWJlcjogdGhpcy5zdXBwb3J0X251bWJlcnNfbGlzdFtpbmRleF0uQ29udGFjdE51bWJlciwKICAgICAgICAgICAgcGFnZV9ubzogMSwKICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5X251bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YVsxXS5udW1iZXJfb2Zfcm93czsKICAgICAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnlfdG90YWxfcGFnZXMgPSBNYXRoLmNlaWwoCiAgICAgICAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnlfbnVtYmVyX29mX3Jvd3MgLyB0aGlzLmNhbGxfaGlzdG9yeV9wZXJfcGFnZQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmNhbGxlcl9oaXN0b3J5X2xpc3QgPSByZXNwb25zZS5kYXRhWzBdOwogICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2FsbGVyX2hpc3RvcnlfbGlzdCkgewogICAgICAgICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5X2xpc3QucHVzaCh0aGlzLmNhbGxlcl9oaXN0b3J5X2xpc3RbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjYWxsX2hpc3RvcnlfbGVuZ3RoID0gdGhpcy5jYWxsX2hpc3RvcnlfbGlzdC5sZW5ndGg7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGNhbGxfaGlzdG9yeV9sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHRoaXMuY2FsbF9oaXN0b3J5X2xpc3RbaV0uY2FsbGVyX25hbWUgPSB0aGlzLnN1cHBvcnRfbnVtYmVyc19saXN0WwogICAgICAgICAgICAgICAgaW5kZXgKICAgICAgICAgICAgICBdLk5hbWU7CiAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsbF9oaXN0b3J5X2xpc3RbaV0uZHVyYXRpb24gPT0gIjAiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNhbGxfaGlzdG9yeV9saXN0W2ldLmR1cmF0aW9uID0gIk1pc3NlZCBDYWxsIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gY2FsbF9oaXN0b3J5X2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdGhpcy5jYWxsX2hpc3RvcnlfbGlzdFtpXS5jYWxsZXJfbmFtZSA9IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbCiAgICAgICAgICAgICAgICBpbmRleAogICAgICAgICAgICAgIF0uTmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgIHZhciBkID0gbmV3IERhdGUoKTsKICAgICAgICB2YXIgbiA9IGQuZ2V0TW9udGgoKTsKICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGVtbyIpLmlubmVySFRNTCA9IG47CiAgICAgICAgdGhpcy5jdXJyZW50X21vbnRoID0gbiArIDE7CiAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRfbW9udGgpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIiNoX2phbiIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX2ZlYiIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX21hciIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX2FwciIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX21heSIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX2p1biIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX2p1bCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX2F1ZyIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX3NlcCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaF9vY3QiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIzI3MzY3OSI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhfbm92Iikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiMyNzM2NzkiOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoX2RlYyIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjMjczNjc5IjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjYWxsX2hpc3RvcnlfcGFnZV9yZXF1aXJlKHBhZ2VfbnVtYmVyKSB7CiAgICAgIHRoaXMuY2FsbGVyX2hpc3RvcnlfbGlzdCA9IFtdOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KGFwaV9jYWxscy5nZXRfY2FsbF9sb2dfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIHN1cHBvcnRudW1iZXI6IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdLkNvbnRhY3ROdW1iZXIsCiAgICAgICAgICBwYWdlX25vOiBwYWdlX251bWJlciwKICAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuY2FsbGVyX2hpc3RvcnlfbGlzdCA9IHJlc3BvbnNlLmRhdGFbMF07CiAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2FsbGVyX2hpc3RvcnlfbGlzdCkgewogICAgICAgICAgICB0aGlzLmNhbGxfaGlzdG9yeV9saXN0LnB1c2godGhpcy5jYWxsZXJfaGlzdG9yeV9saXN0W2ldKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgdGhpcy50b19udW1iZXIgPSB0aGlzLnN1cHBvcnRfbnVtYmVyc19saXN0W2luZGV4XS5OYW1lOwogICAgfSwKICAgIHN1Ym1pdF9udW1iZXJzKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoCiAgICAgICAgdGhpcy5jb250YWN0X25hbWVzID09ICIiIHx8CiAgICAgICAgdGhpcy5jb250YWN0X251bWJlcnMgPT0gIiIgfHwKICAgICAgICB0aGlzLmNvdW50cnlfbmFtZS5jb2RlID09ICIiCiAgICAgICkgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIGVudGVyIHRoZSBibGFuayBmaWVsZHMiKTsKICAgICAgfSBlbHNlIGlmICghdGhpcy5jaGVja19udW1iZXJfdmFsaWRpdHkoKSkgewogICAgICAgIHRvYXN0ci5lcnJvcigKICAgICAgICAgICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBwaG9uZSBudW1iZXIgb3IgdHJ5IGFkZGluZyBudW1iZXIgd2l0aG91dCBzcGFjZXMiCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbnRhY3RudW1iZXJzLnB1c2godGhpcy5jb250YWN0X251bWJlcnMucmVwbGFjZSgvW14wLTldL2csICIiKSk7CiAgICAgICAgdGhpcy5jb3VudHJ5bmFtZS5wdXNoKHRoaXMuY291bnRyeV9uYW1lKTsKICAgICAgICB0aGlzLmNvbnRhY3RuYW1lcy5wdXNoKHRoaXMuY29udGFjdF9uYW1lcyk7CiAgICAgICAgaWYgKHRoaXMuY29udGFjdF9lZGl0X251bWJlciA9PSAiZmFsc2UiKSB7CiAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy5hZGRfc3VwcG9ydF91cmwoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgaXNJbnNlcnQ6ICJUcnVlIiwKICAgICAgICAgICAgICBjb250YWN0czogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBOYW1lOiB0aGlzLmNvbnRhY3RfbmFtZXMsCiAgICAgICAgICAgICAgICAgIENvbnRhY3ROdW1iZXI6IHRoaXMuY29udGFjdF9udW1iZXJzLAogICAgICAgICAgICAgICAgICBDb3VudHJ5Q29kZTogdGhpcy5jb3VudHJ5X25hbWUuY29kZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTXNnID09ICJDb250YWN0cyBhZGRlZCBzdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiQ29udGFjdHMgYWRkZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICAkKCIjYWRkX251bWJlcl9tb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIklOU0VSVCBEVVBMSUNBVEUgQ09OVEFDVCIpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigKICAgICAgICAgICAgICAgICAgIlBsZWFzZSBUcnkgd2l0aCBhbm90aGVyIGNvbnRhY3QgbnVtYmVyLlRoaXMgY29udGFjdCBudW1iZXIgaXMgYWxyZWFkeSBleGlzdCIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiSW52YWxpZCBjb250YWN0IG51bWJlciIpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiVGhlIGNvbnRhY3QgbnVtYmVyIHlvdSBwcm92aWRlZCBpcyBpbnZhbGlkLiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnRhY3RfZWRpdF9udW1iZXIgPT0gInRydWUiKSB7CiAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMubmV3X2NvbnRhY3RfZGF0YS5Db250YWN0TnVtYmVyID0gdGhpcy5jb250YWN0X251bWJlcnM7CiAgICAgICAgICB0aGlzLm5ld19jb250YWN0X2RhdGEuQ291bnRyeUNvZGUgPSB0aGlzLmNvdW50cnlfbmFtZS5jb2RlOwogICAgICAgICAgdGhpcy5uZXdfY29udGFjdF9kYXRhLk5hbWUgPSB0aGlzLmNvbnRhY3RfbmFtZXM7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdChhcGlfY2FsbHMuYWRkX3N1cHBvcnRfdXJsKCksIHsKICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIG9sZF9jb250YWN0X2RhdGE6IHRoaXMub2xkX2NvbnRhY3RfZGF0YSwKICAgICAgICAgICAgICBuZXdfY29udGFjdF9kYXRhOiB0aGlzLm5ld19jb250YWN0X2RhdGEsCiAgICAgICAgICAgICAgaXNFZGl0OiAiVHJ1ZSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkNvbnRhY3QgVXBkYXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiQ29udGFjdHMgdXBkYXRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICAgICQoIiNhZGRfbnVtYmVyX21vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZW1wdHlfdmFyaWFibGUoKSB7CiAgICAgIHRoaXMuY29udGFjdF9uYW1lcyA9ICIiOwogICAgICB0aGlzLmNvbnRhY3RfbnVtYmVycyA9ICIiOwogICAgICB0aGlzLmNvdW50cnlfbmFtZS5jb2RlID0gIiI7CiAgICAgIHRoaXMuY291bnRyeV9uYW1lLm5hbWUgPSAiLS1TZWxlY3QgQ291bnRyeSBOYW1lLS0iOwogICAgfSwKICAgIHBhZ2luYXRpb25fY2xhc3MoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICAgIHJldHVybiAiIGFjdGl2ZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgZWRpdF9zdXBwb3J0X251bWJlcihpbmRleCkgewogICAgICB0aGlzLmNvbnRhY3RfbmFtZXMgPSB0aGlzLnN1cHBvcnRfbnVtYmVyc19saXN0W2luZGV4XS5OYW1lOwogICAgICB0aGlzLmNvbnRhY3RfbnVtYmVycyA9IHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdLkNvbnRhY3ROdW1iZXI7CiAgICAgIHRoaXMuY291bnRyeV9uYW1lLmNvZGUgPSB0aGlzLnN1cHBvcnRfbnVtYmVyc19saXN0W2luZGV4XS5Db3VudHJ5Q29kZTsKICAgICAgdGhpcy5vbGRfY29udGFjdF9kYXRhLkNvbnRhY3ROdW1iZXIgPSB0aGlzLmNvbnRhY3RfbnVtYmVyczsKICAgICAgdGhpcy5vbGRfY29udGFjdF9kYXRhLkNvdW50cnlDb2RlID0gdGhpcy5jb3VudHJ5X25hbWUuY29kZTsKICAgICAgdGhpcy5vbGRfY29udGFjdF9kYXRhLk5hbWUgPSB0aGlzLmNvbnRhY3RfbmFtZXM7CiAgICAgIHRoaXMuY29udGFjdF9lZGl0X251bWJlciA9ICJ0cnVlIjsKICAgICAgLy9oYXJzaAogICAgICBsZXQgc2VsZWN0X2NvdW50cnkgPSB0aGlzLmNvdW50cnlfbGlzdC5maWx0ZXIoY291bnRyeSA9PiB7CiAgICAgICAgcmV0dXJuIGNvdW50cnkuY29kZSA9PSB0aGlzLmNvdW50cnlfbmFtZS5jb2RlOwogICAgICB9KTsKICAgICAgdGhpcy5jb3VudHJ5X25hbWUubmFtZSA9IHNlbGVjdF9jb3VudHJ5WzBdLm5hbWU7CiAgICB9LAogICAgY2hlY2tfbnVtYmVyX3ZhbGlkaXR5KCkgewogICAgICB2YXIgcGhvbmVfbnVtID0gdGhpcy5jb250YWN0X251bWJlcnMucmVwbGFjZSgvW14wLTldL2csICIiKTsKICAgICAgaWYgKHRoaXMucGhvbmVfbnVtYmVyX3ZhbGlkaXR5LnRlc3QocGhvbmVfbnVtKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGNvbnRhY3Rfc2VsZWN0KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PSAiYWxsIikgewogICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0aGlzLnN1cHBvcnRfbnVtYmVyc19saXN0OwogICAgICAgIH0gZWxzZSBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgbGV0IHZhbF9pbmRleCA9IHRoaXMuY2hlY2tlZF9saXN0LmluZGV4T2YoCiAgICAgICAgICAgIHRoaXMuc3VwcG9ydF9udW1iZXJzX2xpc3RbaW5kZXhdCiAgICAgICAgICApOwogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLnN1cHBvcnRfbnVtYmVyc19saXN0W2luZGV4XTsKICAgICAgICAgIGlmICh2YWxfaW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IGZhbHNlKSB7CiAgICAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwogICAgICAgICAgaWYgKHNlbGVjdGFsbC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgc2VsZWN0YWxsLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5jaGVja2VkX2xpc3QuZmlsdGVyKHN1cHBvcnRfbnVtYmVyc19saXN0ID0+IHsKICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRfbnVtYmVyc19saXN0LnN1cHBvcnRfbnVtYmVyc19saXN0ICE9PSBpbmRleDsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0ZW1wOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9Cn07Cg=="},null]}