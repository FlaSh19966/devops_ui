{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/Components/FacebookMessengerDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/Components/FacebookMessengerDetails.vue","mtime":1655466542524},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZXNzYWdpbmdGcmFtZXdvcmtzIiwKICBjb21wb25lbnRzOiB7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYmlnX3NwaW5uZXI6IGZhbHNlLAogICAgICB3ZWJzaXRlX25hbWU6ICIiLAogICAgICB3aWRnZXRfY29kZTogIiIsCiAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIGZiX2FjY2Vzc190b2tlbjogIiIsCiAgICAgIGZiX3VzZXJfaWQ6ICIiLAogICAgICB1c2VyX2FjY2Vzc190b2tlbjogbnVsbCwKICAgICAgZmJfcGFnZV9kYXRhOiBbXSwKICAgICAgZmJfc2F2ZWRfcGFnZV9kYXRhOiBbXQogICAgICAvLyBmYl9tZXNzYWdpbmdfdXJsX3JlZ2V4OiAvWyhtLm1lKVwvP2EtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fVwuW2Etel17Miw2fVxiKFstYS16QS1aMC05QDolX1wrLn4jPyYvLz1dKikvaSwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmJfcGFnZV9lbmFibGVkKG5ld1ZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhuZXdWYWwpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzW3dlYnMgKyAiX2RhdGEiXS5pc192aXNpYmxlX29uX2JvdCk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsgICAKICAgIHRoaXMuZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKTsKICAgIC8vIHRoaXMuY2hlY2tMb2dpblN0YXRlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVfZGF0YSgpIHsKICAgICAgZm9yKHZhciBpIGluIHRoaXMuZmJfc2F2ZWRfcGFnZV9kYXRhKXsKICAgICAgICBmb3IodmFyIGogaW4gdGhpcy5mYl9wYWdlX2RhdGEpewogICAgICAgICAgaWYodGhpcy5mYl9zYXZlZF9wYWdlX2RhdGFbaV0uZmJfcGFnZV9pZCA9PSB0aGlzLmZiX3BhZ2VfZGF0YVtqXS5pZCl7CiAgICAgICAgICAgIHRoaXMuZmJfcGFnZV9kYXRhLnNwbGljZShqLCAxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRfaW50ZWdyYXRpb25fZGV0YWlscygpIHsKICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuY2hhdGJvdF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICJzdWNjZXNzIikgewogICAgICAgICAgICB0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YSA9IFtdOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgQm9vbGVhbihkYXRhLmRhdGEuZmFjZWJvb2tfZGV0YWlscy5sZW5ndGgpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YS5kYXRhLmZhY2Vib29rX2RldGFpbHMpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wID0ge307CiAgICAgICAgICAgICAgICB0ZW1wID0gewogICAgICAgICAgICAgICAgICBmYl9hY2Nlc3NfdG9rZW46IGRhdGEuZGF0YS5mYWNlYm9va19kZXRhaWxzW2ldLmZiX2FjY2Vzc190b2tlbiwKICAgICAgICAgICAgICAgICAgZmJfcGFnZV9pZDogIGRhdGEuZGF0YS5mYWNlYm9va19kZXRhaWxzW2ldLmZiX3BhZ2VfaWQsCiAgICAgICAgICAgICAgICAgIGZiX3BhZ2VfbmFtZTogIGRhdGEuZGF0YS5mYWNlYm9va19kZXRhaWxzW2ldLmZiX3BhZ2VfbmFtZSwKICAgICAgICAgICAgICAgICAgZmJfdmVyaWZ5X3Rva2VuOiAgZGF0YS5kYXRhLmZhY2Vib29rX2RldGFpbHNbaV0uZmJfdmVyaWZ5X3Rva2VuLAogICAgICAgICAgICAgICAgICBmYl9wYWdlX2VuYWJsZWQ6ICBkYXRhLmRhdGEuZmFjZWJvb2tfZGV0YWlsc1tpXS5lbmFibGVkLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGEucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPT09IHRydWUgPyB0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YS5pc19pbnRlZ3JhdGVkID0gdHJ1ZSA6CiAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGEuaXNfaW50ZWdyYXRlZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudXBkYXRlX2RhdGEoKTsKICAgICAgICAgIH1lbHNlIGlmKGRhdGEubXNnID09ICJOTyBEQVRBIEFWQUlMQUJMRSIpIHsgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHBhZ2VfY29ubmVjdF9mYihwYWdlKXsKICAgICAgaWYocGFnZSAhPSBudWxsKSB7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuY2hhdGJvdF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCksewogICAgICAgICAgLy8gZmJfdmVyaWZ5X3Rva2VuIDogLAogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBmYl9wYWdlX25hbWU6IHBhZ2UubmFtZSwKICAgICAgICAgIGZiX2FjY2Vzc190b2tlbiA6IHBhZ2UuYWNjZXNzX3Rva2VuLAogICAgICAgICAgZmJfcGFnZV9pZCA6IHBhZ2UuaWQsCiAgICAgICAgICBmYl9wYWdlX2VuYWJsZWQ6IHRydWUsCiAgICAgICAgICBpc19zYXZlOiB0cnVlLAogICAgICAgICAgaXNfZmFjZWJvb2s6IHRydWUsIAogICAgICAgICAgaXNfbWVzc2FnaW5nX3BsYXRmb3JtOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tc2cgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIkZhY2Vib29rIFBhZ2UgQ29ubmVjdGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIHBhdGggPSAiLyIgKyBwYWdlLmlkICsgIi9zdWJzY3JpYmVkX2FwcHM/YWNjZXNzX3Rva2VuPSIgKyBwYWdlLmFjY2Vzc190b2tlbjsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIlBPU1QiLCBwYXRoKTsKICAgICAgICAgICAgRkIuYXBpKAogICAgICAgICAgICAgIHBhdGgsCiAgICAgICAgICAgICAgJ1BPU1QnLAogICAgICAgICAgICAgIHsic3Vic2NyaWJlZF9maWVsZHMiOiJtZXNzYWdlcyJ9LAogICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTdWJzY3JpcHRpb24iLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLmdldF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubXNnID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGVkaXRfZmJfcGFnZShpbmRleCl7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHRoaXMuZmJfc2F2ZWRfcGFnZV9kYXRhW2luZGV4XS5mYl9wYWdlX2VuYWJsZWQgPT0gZmFsc2UgPyB0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YVtpbmRleF0uZmJfcGFnZV9lbmFibGVkID0gdHJ1ZSA6IHRoaXMuZmJfc2F2ZWRfcGFnZV9kYXRhW2luZGV4XS5mYl9wYWdlX2VuYWJsZWQgPSBmYWxzZTsgCiAgICAgIGlmKGluZGV4ICE9IG51bGwpIHsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5jaGF0Ym90X2ludGVncmF0aW9uX2RldGFpbHMoKSx7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGZiX3BhZ2VfaWQgOiB0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YVtpbmRleF0uZmJfcGFnZV9pZCwKICAgICAgICAgIGlzX2VkaXQ6IHRydWUsCiAgICAgICAgICBpc19mYWNlYm9vazogdHJ1ZSwKICAgICAgICAgIGZiX3BhZ2VfZW5hYmxlZDogdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGFbaW5kZXhdLmZiX3BhZ2VfZW5hYmxlZAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1zZyA9PSAiUXVlcnkgRXhlY3V0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiRmFjZWJvb2sgUGFnZSBFZGl0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZighQm9vbGVhbih0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YVtpbmRleF0uZmJfcGFnZV9lbmFibGVkKSkgewogICAgICAgICAgICAgIHZhciBwYXRoID0gIi8iICsgdm0uZmJfc2F2ZWRfcGFnZV9kYXRhW2luZGV4XS5mYl9wYWdlX2lkICsgIi9zdWJzY3JpYmVkX2FwcHM/YWNjZXNzX3Rva2VuPSIgKyB2bS5mYl9zYXZlZF9wYWdlX2RhdGFbaW5kZXhdLmZiX2FjY2Vzc190b2tlbjsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiUGF0aCIsIHBhdGgpOwogICAgICAgICAgICAgIEZCLmFwaSgKICAgICAgICAgICAgICAgIHBhdGgsCiAgICAgICAgICAgICAgICAnREVMRVRFJywKICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiREVMRVRFIiwgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIHBhdGggPSAiLyIgKyB2bS5mYl9zYXZlZF9wYWdlX2RhdGFbaW5kZXhdLmZiX3BhZ2VfaWQgKyAiL3N1YnNjcmliZWRfYXBwcz9hY2Nlc3NfdG9rZW49IiArIHZtLmZiX3NhdmVkX3BhZ2VfZGF0YVtpbmRleF0uZmJfYWNjZXNzX3Rva2VuOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJQT1NUIiwgcGF0aCk7CiAgICAgICAgICAgICAgRkIuYXBpKAogICAgICAgICAgICAgICAgcGF0aCwKICAgICAgICAgICAgICAgICdQT1NUJywKICAgICAgICAgICAgICAgIHsic3Vic2NyaWJlZF9maWVsZHMiOiJtZXNzYWdlcyJ9LAogICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3Vic2NyaXB0aW9uIiwgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5nZXRfaW50ZWdyYXRpb25fZGV0YWlscygpOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1zZyA9PSAiRmFjZWJvb2sgcGFnZSBpZCBkb2VzIG5vdCBleGlzdHMgaW4gZGIiKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJGYWNlYm9vayBwYWdlIGlkIGRvZXMgbm90IGV4aXN0cyBpbiBkYiIsCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tc2cgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIkludGVybmFsIFNlcnZlciBFcnJvciIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlX2ZiX3BhZ2UocGFnZSl7CiAgICAgIGlmKHBhZ2UgIT0gbnVsbCkgewogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmNoYXRib3RfaW50ZWdyYXRpb25fZGV0YWlscygpLHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgZmJfcGFnZV9pZCA6IHBhZ2UuZmJfcGFnZV9pZCwKICAgICAgICAgIGlzX2RlbGV0ZTogdHJ1ZSwKICAgICAgICAgIGlzX2ZhY2Vib29rOiB0cnVlLCAKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tc2cgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIkZhY2Vib29rIFBhZ2UgRGVsZXRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBwYXRoID0gIi8iICsgcGFnZS5mYl9wYWdlX2lkICsgIi9zdWJzY3JpYmVkX2FwcHM/YWNjZXNzX3Rva2VuPSIgKyBwYWdlLmZiX2FjY2Vzc190b2tlbjsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIlBhdGgiLCBwYXRoKTsKICAgICAgICAgICAgRkIuYXBpKAogICAgICAgICAgICAgIHBhdGgsCiAgICAgICAgICAgICAgJ0RFTEVURScsCiAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRFTEVURSIsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMuZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tc2cgPT0gIkZhY2Vib29rIHBhZ2UgaWQgZG9lcyBub3QgZXhpc3RzIGluIGRiIikgewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiRmFjZWJvb2sgcGFnZSBpZCBkb2VzIG5vdCBleGlzdHMgaW4gZGIiLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLm1zZyA9PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja0xvZ2luU3RhdGUoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIEZCLmdldExvZ2luU3RhdHVzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgdm0uc3RhdHVzQ2hhbmdlQ2FsbGJhY2socmVzcG9uc2UpOwogICAgICB9KTsKICAgIH0sCiAgICBzdGF0dXNDaGFuZ2VDYWxsYmFjayhyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZygiTWVzc2VuZ2VyIGxvZ2luMSIsIHJlc3BvbnNlKTsKICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09PSAiY29ubmVjdGVkIikKICAgICAgewogICAgICAgIHRoaXMuZmJfYWNjZXNzX3Rva2VuID0gcmVzcG9uc2UuYXV0aFJlc3BvbnNlLmFjY2Vzc1Rva2VuOwogICAgICAgIHRoaXMuZmJfdXNlcl9pZCA9IHJlc3BvbnNlLmF1dGhSZXNwb25zZS51c2VySUQ7CiAgICAgICAgJCgiI2xvZ2luIikuaGlkZSgpOwogICAgICAgICQoIiNsb2dvdXQiKS5zaG93KCk7IAogICAgICAgIHRoaXMuZmV0Y2hVc2VyUHJvZmlsZSgpOwogICAgICB9CiAgICAgIGVsc2V7CiAgICAgICAgICB0aGlzLmZhY2Vib29rTG9naW5CeURpYWxvZygpOwogICAgICB9CiAgICB9LAogICAgZmFjZWJvb2tMb2dvdXQoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICQoIiNsb2dvdXQiKS5oaWRlKCk7CiAgICAgICQoIiNsb2dpbiIpLnNob3coKTsKICAgICAgJCgiI3N0YXR1cyIpLmVtcHR5KCk7CiAgICAgIEZCLmxvZ291dChmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgIC8vIHZtLnN0YXR1c0NoYW5nZUNhbGxiYWNrKHJlc3BvbnNlKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZmJfcGFnZV9kYXRhID0gW107CiAgICAgIHRoaXMuZmJfYWNjZXNzX3Rva2VuID0gIiI7CiAgICAgIHRoaXMuZmJfdXNlcl9pZCA9ICIiOwogICAgICB0aGlzLmdldF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCk7CiAgICB9LAogICAgZmFjZWJvb2tMb2dpbkJ5RGlhbG9nKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBGQi5sb2dpbihmdW5jdGlvbihyZXNwb25zZSkgeyAgICAgICAgCiAgICAgICAgICB2bS5zdGF0dXNDaGFuZ2VDYWxsYmFjayhyZXNwb25zZSk7CiAgICAgIH0sIHtzY29wZTogJ3B1YmxpY19wcm9maWxlLHBhZ2VzX21hbmFnZV9tZXRhZGF0YSxwYWdlc19zaG93X2xpc3QscGFnZXNfbWVzc2FnaW5nLHBhZ2VzX3JlYWRfZW5nYWdlbWVudCd9KTsKICAgIH0sCiAgICBmZXRjaFVzZXJQcm9maWxlKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgdXNlcl9pZCA9IHRoaXMuZmJfdXNlcl9pZDsKICAgICAgdmFyIGFjY2Vzc190b2tlbiA9IHRoaXMuZmJfYWNjZXNzX3Rva2VuOwogICAgICB2YXIgYXBwX2lkID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9BUFBfSUQ7CiAgICAgIHZhciBhcHBfc2VjcmV0ID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9BUFBfU0VDUkVUOwogICAgICB2YXIgY2xpZW50X3Rva2VuID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9DTElFTlRfVE9LRU47CgogICAgICAvLyBGQi5hcGkoJy9tZScsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgIC8vICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTsKICAgICAgLy8gfSk7CiAgICAgIAogICAgICAvLyBGQi5hcGkoJy9tZT9maWVsZHM9aWQsbmFtZSxlbWFpbCxnZW5kZXIsYmlydGhkYXknLCBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAvLyAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsIGxvZ2luIGZvcjogJyArIHJlc3BvbnNlLm5hbWUpOwogICAgICAvLyB9KTsKCiAgICAgIHZhciBwYXRoMSA9ICcvb2F1dGgvYWNjZXNzX3Rva2VuP2dyYW50X3R5cGU9ZmJfZXhjaGFuZ2VfdG9rZW4mY2xpZW50X2lkPScgKyBhcHBfaWQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGFwcF9zZWNyZXQgKyAnJmZiX2V4Y2hhbmdlX3Rva2VuPScgKyBhY2Nlc3NfdG9rZW47CiAgICAgIEZCLmFwaShwYXRoMSwgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiUGF0aCAxIiwgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTsKICAgICAgICB2bS51c2VyX2FjY2Vzc190b2tlbiA9IHJlc3BvbnNlLmFjY2Vzc190b2tlbjsKICAgICAgfSkKCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHZhciBwYXRoMiA9ICcvJyt1c2VyX2lkKyc/ZmllbGRzPWlkLG5hbWUsZW1haWwscGljdHVyZSZhY2Nlc3NfdG9rZW49Jyt0aGlzLnVzZXJfYWNjZXNzX3Rva2VuOwogICAgICAgIEZCLmFwaShwYXRoMiwgZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coIlBhdGggMiIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKQogICAgICAgIH0pOwoKICAgICAgICB2YXIgcGF0aDMgPSAnLycrdXNlcl9pZCsnL2FjY291bnRzP2ZpZWxkcz1uYW1lLGFjY2Vzc190b2tlbiZhY2Nlc3NfdG9rZW49Jyt0aGlzLnVzZXJfYWNjZXNzX3Rva2VuOwogICAgICAgIEZCLmFwaShwYXRoMywgZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coIlBhdGggMyIsIEpTT04uc3RyaW5naWZ5KGRhdGEuZGF0YSkpCiAgICAgICAgICB2bS5mYl9wYWdlX2RhdGEgPSBkYXRhLmRhdGE7CiAgICAgICAgICB2bS51cGRhdGVfZGF0YSgpOwogICAgICAgIH0pOyAKICAgICAgfSwgMjAwMCk7CiAgICAgIAogICAgfSwKICAgIC8vIHRlc3RBUEkoKSB7CiAgICAvLyAgIGNvbnNvbGUubG9nKCdXZWxjb21lISAgRmV0Y2hpbmcgeW91ciBpbmZvcm1hdGlvbi4uLi4gJyk7CiAgICAvLyAgIEZCLmFwaSgnL21lJywgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIC8vICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bCBsb2dpbiBmb3I6ICcgKyByZXNwb25zZS5uYW1lKTsKICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAvLyAgIH0pOwogICAgLy8gfQogIH0sCn07Cg=="},{"version":3,"sources":["FacebookMessengerDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FacebookMessengerDetails.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Integrations/Components","sourcesContent":["<template>\n  <div>\n    <div class=\"modal-body\">\n        <div class=\"modal-head d-flex align-items-center\">\n        <h3>Messenger Settings</h3>\n        </div>\n        <button\n        type=\"button\"\n        class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"Close\"\n        >\n        <img src=\"/img/close-icn.png\" alt />\n        </button>\n        <div>\n        <div>\n            <h4>Connect your Facebook Messenger account</h4>\n            <div class=\"d-flex\">\n            <div id=\"login\" class=\"fb-button\" @click=\"checkLoginState()\">\n            <div class=\"icon\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 118 222\">\n                <path id=\"f\" d=\"M75.41,220.31V120.5h33.5l5-38.9H75.41V56.78c0-11.26,3.13-18.93,19.27-18.93h20.6V3a275.33,275.33,0,0,0-30-1.53c-29.7,0-50,18.13-50,51.41V81.61H1.66v38.9H35.24v99.8Z\" style=\"fill: #fff\"></path>\n                </svg>\n            </div> \n            <span>Connect with Facebook</span>\n            </div>\n            <div style=\"display:none;\" @click=\"facebookLogout()\" id=\"logout\" class=\"logout-button\"><span>Log Out</span></div>\n            </div>\n        <div v-show=\"Boolean(fb_page_data.length)\">\n            <div class=\"col-sm-12 p-0\">\n            <h4 class=\"mt-2\">Connect Pages</h4>\n            <div v-for=\"(page, index) in fb_page_data\"\n                :key=\"index\">\n                <div class=\"messenger-pages d-flex\">\n                    <div>\n                    {{page.name}}\n                    </div>\n                    <div style=\"margin-left: auto;\">\n                    <button class=\"fb-connect-btn\" @click=\"page_connect_fb(page)\">Connect</button>\n                    </div>\n                </div>\n                </div>\n            </div>\n        </div>\n        <div v-show=\"Boolean(fb_saved_page_data.length)\">\n            <div class=\"col-sm-12 p-0\">\n            <h4 class=\"mt-2\">Connected Pages</h4>\n            <div v-for=\"(page, index) in fb_saved_page_data\"\n                :key=\"index\">\n                <div class=\"messenger-pages d-flex\">\n                    <div>\n                    {{page.fb_page_name}}\n                    </div>\n                    <label class=\"switch mb-0 mt-0 mr-2\" style=\"margin-left: auto;\">\n                    <input\n                        type=\"checkbox\"\n                        v-model=\"page.fb_page_enabled\"\n                        @click=\"edit_fb_page(index)\"\n                        id=\"email_required_id\"\n                    />\n                    <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px\"\n                    ></span>\n                    </label>\n                    <!-- <div style=\"margin-left: auto;\"> -->\n                    <span class=\"delete-cart-item\" @click=\"delete_fb_page(page)\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"13.682\" height=\"15.392\" viewBox=\"0 0 13.682 15.392\"><path data-v-0f909d54=\"\" d=\"M8.276,3v.855H4v1.71h.855V16.682a1.71,1.71,0,0,0,1.71,1.71h8.551a1.71,1.71,0,0,0,1.71-1.71V5.565h.855V3.855H13.406V3H8.276M6.565,5.565h8.551V16.682H6.565V5.565m1.71,1.71v7.7h1.71v-7.7H8.276m3.42,0v7.7h1.71v-7.7Z\" transform=\"translate(-4 -3)\" fill=\"#f23d3d\"></path></svg>\n                    </span>\n                    <!-- </div> -->\n                </div>\n                </div>\n            </div>\n        </div>\n        </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\n\nexport default {\n  name: \"MessagingFrameworks\",\n  components: {\n  },\n  data() {\n    return {\n      big_spinner: false,\n      website_name: \"\",\n      widget_code: \"\",\n      company_name: this.$session.get(\"UserInformation\").company_name,\n      company_id: this.$session.get(\"UserInformation\").company_id,\n      fb_access_token: \"\",\n      fb_user_id: \"\",\n      user_access_token: null,\n      fb_page_data: [],\n      fb_saved_page_data: []\n      // fb_messaging_url_regex: /[(m.me)\\/?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/i,\n    };\n  },\n  watch: {\n    fb_page_enabled(newVal) {\n      // console.log(newVal);\n      // console.log(this[webs + \"_data\"].is_visible_on_bot);\n    },\n  },\n  mounted() {   \n    this.get_integration_details();\n    // this.checkLoginState();\n  },\n  methods: {\n    update_data() {\n      for(var i in this.fb_saved_page_data){\n        for(var j in this.fb_page_data){\n          if(this.fb_saved_page_data[i].fb_page_id == this.fb_page_data[j].id){\n            this.fb_page_data.splice(j, 1);\n          }\n        }\n      }\n    },\n    get_integration_details() {\n      this.big_spinner = true;\n      axios\n        .post(\n          api_calls.chatbot_integration_details(),\n          {\n            is_get: true,\n            company_name: this.company_name,\n            company_id: this.company_id,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then(({ data }) => {\n          this.big_spinner = false;\n          if (data.status === \"success\") {\n            this.fb_saved_page_data = [];\n            if (\n              Boolean(data.data.facebook_details.length)\n            ) {\n              for (var i in data.data.facebook_details) {\n                var temp = {};\n                temp = {\n                  fb_access_token: data.data.facebook_details[i].fb_access_token,\n                  fb_page_id:  data.data.facebook_details[i].fb_page_id,\n                  fb_page_name:  data.data.facebook_details[i].fb_page_name,\n                  fb_verify_token:  data.data.facebook_details[i].fb_verify_token,\n                  fb_page_enabled:  data.data.facebook_details[i].enabled,\n                }\n                this.fb_saved_page_data.push(temp);\n              }\n              // this.fb_saved_page_data.is_visible_on_bot === true ? this.fb_saved_page_data.is_integrated = true :\n              //                                                 this.fb_saved_page_data.is_integrated = false;\n            }\n            this.update_data();\n          }else if(data.msg == \"NO DATA AVAILABLE\") {   }\n        })\n        .catch((e) => {\n          this.big_spinner = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    page_connect_fb(page){\n      if(page != null) {\n        axios.post(api_calls.chatbot_integration_details(),{\n          // fb_verify_token : ,\n          company_name: this.company_name,\n          company_id: this.company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          fb_page_name: page.name,\n          fb_access_token : page.access_token,\n          fb_page_id : page.id,\n          fb_page_enabled: true,\n          is_save: true,\n          is_facebook: true, \n          is_messaging_platform: false\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n        )\n        .then((response) => {\n           if (response.data.msg == \"Query Executed Successfully\") {\n            Swal.fire({\n              title: \"Facebook Page Connected Successfully\",\n              type: \"success\",\n              timer: 2500,\n            });\n            var path = \"/\" + page.id + \"/subscribed_apps?access_token=\" + page.access_token;\n            // console.log(\"POST\", path);\n            FB.api(\n              path,\n              'POST',\n              {\"subscribed_fields\":\"messages\"},\n              function(response) {\n                  console.log(\"Subscription\", response);\n              }\n            );\n            this.get_integration_details();\n          } else if (response.data.msg == \"Internal Server Error\") {\n            Swal.fire({\n              title: \"Internal Server Error\",\n              type: \"error\",\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      }\n    },\n    edit_fb_page(index){\n      var vm = this;\n      this.fb_saved_page_data[index].fb_page_enabled == false ? this.fb_saved_page_data[index].fb_page_enabled = true : this.fb_saved_page_data[index].fb_page_enabled = false; \n      if(index != null) {\n        axios.post(api_calls.chatbot_integration_details(),{\n          company_name: this.company_name,\n          company_id: this.company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          fb_page_id : this.fb_saved_page_data[index].fb_page_id,\n          is_edit: true,\n          is_facebook: true,\n          fb_page_enabled: this.fb_saved_page_data[index].fb_page_enabled\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n        )\n        .then((response) => {\n          if (response.data.msg == \"Query Executed Successfully\") {\n            Swal.fire({\n              title: \"Facebook Page Edited Successfully\",\n              type: \"success\",\n              timer: 2500,\n            });\n            if(!Boolean(this.fb_saved_page_data[index].fb_page_enabled)) {\n              var path = \"/\" + vm.fb_saved_page_data[index].fb_page_id + \"/subscribed_apps?access_token=\" + vm.fb_saved_page_data[index].fb_access_token;\n              // console.log(\"Path\", path);\n              FB.api(\n                path,\n                'DELETE',\n                {},\n                function(response) {\n                    console.log(\"DELETE\", response);\n                }\n              );\n            } else {\n              var path = \"/\" + vm.fb_saved_page_data[index].fb_page_id + \"/subscribed_apps?access_token=\" + vm.fb_saved_page_data[index].fb_access_token;\n              // console.log(\"POST\", path);\n              FB.api(\n                path,\n                'POST',\n                {\"subscribed_fields\":\"messages\"},\n                function(response) {\n                    console.log(\"Subscription\", response);\n                }\n              );\n            }\n            this.get_integration_details();\n          } else if (response.data.msg == \"Facebook page id does not exists in db\") {\n            Swal.fire({\n              title: \"Facebook page id does not exists in db\",\n              type: \"warning\",\n              timer: 2500,\n            });\n          } else if (response.data.msg == \"Internal Server Error\") {\n            Swal.fire({\n              title: \"Internal Server Error\",\n              type: \"error\",\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      }\n    },\n    delete_fb_page(page){\n      if(page != null) {\n        axios.post(api_calls.chatbot_integration_details(),{\n          company_name: this.company_name,\n          company_id: this.company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          fb_page_id : page.fb_page_id,\n          is_delete: true,\n          is_facebook: true, \n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n        )\n        .then((response) => {\n          if (response.data.msg == \"Query Executed Successfully\") {\n            Swal.fire({\n              title: \"Facebook Page Deleted Successfully\",\n              type: \"success\",\n              timer: 2500,\n            });\n            var path = \"/\" + page.fb_page_id + \"/subscribed_apps?access_token=\" + page.fb_access_token;\n            // console.log(\"Path\", path);\n            FB.api(\n              path,\n              'DELETE',\n              {},\n              function(response) {\n                  console.log(\"DELETE\", response);\n              }\n            );\n            this.get_integration_details();\n          } else if (response.data.msg == \"Facebook page id does not exists in db\") {\n            Swal.fire({\n              title: \"Facebook page id does not exists in db\",\n              type: \"warning\",\n              timer: 2500,\n            });\n          } else if (response.msg == \"Internal Server Error\") {\n            Swal.fire({\n              title: \"Internal Server Error\",\n              type: \"error\",\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      }\n    },\n    checkLoginState() {\n      var vm = this;\n      FB.getLoginStatus(function(response) {\n        vm.statusChangeCallback(response);\n      });\n    },\n    statusChangeCallback(response) {\n      console.log(\"Messenger login1\", response);\n      if(response.status === \"connected\")\n      {\n        this.fb_access_token = response.authResponse.accessToken;\n        this.fb_user_id = response.authResponse.userID;\n        $(\"#login\").hide();\n        $(\"#logout\").show(); \n        this.fetchUserProfile();\n      }\n      else{\n          this.facebookLoginByDialog();\n      }\n    },\n    facebookLogout() {\n      var vm = this;\n      $(\"#logout\").hide();\n      $(\"#login\").show();\n      $(\"#status\").empty();\n      FB.logout(function(response) {\n        // vm.statusChangeCallback(response);\n      });\n      this.fb_page_data = [];\n      this.fb_access_token = \"\";\n      this.fb_user_id = \"\";\n      this.get_integration_details();\n    },\n    facebookLoginByDialog() {\n      var vm = this;\n      FB.login(function(response) {        \n          vm.statusChangeCallback(response);\n      }, {scope: 'public_profile,pages_manage_metadata,pages_show_list,pages_messaging,pages_read_engagement'});\n    },\n    fetchUserProfile() {\n      var vm = this;\n      var user_id = this.fb_user_id;\n      var access_token = this.fb_access_token;\n      var app_id = process.env.VUE_APP_FB_APP_ID;\n      var app_secret = process.env.VUE_APP_FB_APP_SECRET;\n      var client_token = process.env.VUE_APP_FB_CLIENT_TOKEN;\n\n      // FB.api('/me', function(response) {\n      //   console.log(JSON.stringify(response));\n      // });\n      \n      // FB.api('/me?fields=id,name,email,gender,birthday', function(response) {\n      //   console.log('Successful login for: ' + response.name);\n      // });\n\n      var path1 = '/oauth/access_token?grant_type=fb_exchange_token&client_id=' + app_id + '&client_secret=' + app_secret + '&fb_exchange_token=' + access_token;\n      FB.api(path1, function(response) {\n        // console.log(\"Path 1\", JSON.stringify(response));\n        vm.user_access_token = response.access_token;\n      })\n\n      setTimeout(() => {\n        var path2 = '/'+user_id+'?fields=id,name,email,picture&access_token='+this.user_access_token;\n        FB.api(path2, function(data) {\n          // console.log(\"Path 2\", JSON.stringify(data))\n        });\n\n        var path3 = '/'+user_id+'/accounts?fields=name,access_token&access_token='+this.user_access_token;\n        FB.api(path3, function(data) {\n          // console.log(\"Path 3\", JSON.stringify(data.data))\n          vm.fb_page_data = data.data;\n          vm.update_data();\n        }); \n      }, 2000);\n      \n    },\n    // testAPI() {\n    //   console.log('Welcome!  Fetching your information.... ');\n    //   FB.api('/me', function(response) {\n    //     console.log('Successful login for: ' + response.name);\n    //     console.log(response);\n    //   });\n    // }\n  },\n};\n</script>\n<style scoped>\n.delete-cart-item {\n  cursor: pointer;\n}\n.delete-cart-item svg :hover {\n  color: #f23d3d !important;\n  fill: #f23d3d !important;\n}\n.fb-connect-btn {\n  background: #006cff;\n  border: 1px solid #006cff;\n  color: #fff;\n  cursor: pointer;\n  transition: all .3s;\n}\n.fb-connect-btn:active {\n  opacity: .5!important;\n}\n.fb-connect-btn:hover {\n  opacity: .8!important;\n}\n.fb-button {\n  width: 45%;\n  display: flex;\n  background: #3b5998;\n  color: #fff;\n  padding: 10px 20px;\n  border-radius: 10px;\n  -webkit-transition: opacity .3s;\n  transition: opacity .3s;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-backface-visibility: hidden;\n  cursor: pointer;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.fb-button:active {\n  opacity: .5!important;\n}\n.fb-button:hover {\n  opacity: .8!important;\n}\n.fb-button .icon {\n  margin-right: 10px;\n  width: 15px;\n  height: 25px;\n}\n.fb-button .icon svg {\n  max-width: 100%;\n  max-height: 100%;\n  -o-object-fit: contain;\n  object-fit: contain;\n}\n.logout-button {\n  margin-left: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 20px;\n  border-radius: 20px;\n  background: #f0f4f7;\n  color: #9ba6b3;\n  width: 96px;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-backface-visibility: hidden;\n  cursor: pointer;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.logout-button:active {\n  opacity: .5!important;\n}\n.logout-button:hover {\n  opacity: .8!important;\n}\n.messenger-pages {\n  width: 100%;\n  background: #f7f7f8;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  /* -webkit-box-align: center; */\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 10px 15px;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n.third-party-logo {\n  width: 150px;\n  height: 75px;\n  object-fit: contain;\n}\n.msg__span {\n  padding-left: 1rem;\n}\n.card-act .red-btn {\n  font-size: 14px;\n  color: #fff;\n  background: #f23d3d;\n  border: solid 1px #f23d3d;\n  padding: 5px 20px;\n  font-weight: 400;\n  line-height: 20px;\n  display: inline-block;\n  border-radius: 4px;\n  cursor: pointer;\n  text-align: center;\n}\n.switch {\n  margin-left: 1rem;\n}\n.col-sm-3{\n  max-width: 24%;\n}\n.row {\n    display: flex;\n    flex-wrap: wrap;\n    margin-right: -2px;\n    margin-left: 15px;\n}\n</style>"]}]}