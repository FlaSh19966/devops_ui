{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Templates/WhatsappTemplate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Templates/WhatsappTemplate.vue","mtime":1655807120969},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gInZ1ZTItZWRpdG9yIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCB7IGZyZWV6ZV9wb3J0YWwsIHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCB9IGZyb20gIkAvcG9ydGFsL21peGlucyI7CmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJ2dWUtbXVsdGlzZWxlY3QiOwppbXBvcnQgVnVlUGhvbmVOdW1iZXJJbnB1dCBmcm9tICJ2dWUtcGhvbmUtbnVtYmVyLWlucHV0IjsKaW1wb3J0ICJ2dWUtcGhvbmUtbnVtYmVyLWlucHV0L2Rpc3QvdnVlLXBob25lLW51bWJlci1pbnB1dC5jc3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJXaGF0c2FwcFRlbXBsYXRlUGFnZSIsCiAgY29tcG9uZW50czogewogICAgVnVlRWRpdG9yLAogICAgTXVsdGlzZWxlY3QsCiAgICBWdWVQaG9uZU51bWJlcklucHV0LAogIH0sCiAgbWl4aW5zOiBbZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29udDogWyJJTiJdLAogICAgICBwZW5jaWxfc3ZnOgogICAgICAgICcgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNS41NDYiIGhlaWdodD0iMTUuNDYxIiB2aWV3Qm94PSIwIDAgMTUuNTQ2IDE1LjQ2MSI+PGRlZnM+PHN0eWxlPi5he2ZpbGw6IzllOWU5ZTt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc0Ny44ODggLTM1Ni43NjkpIj48cGF0aCBjbGFzcz0iYSIgZD0iTTc1OS40MTYsMzU2Ljc2OWEyLjM1OCwyLjM1OCwwLDAsMSwxLjc3Ny42NjJjLjUzNC41MTMsMS4wNzIsMS4wMjUsMS41NjcsMS41NzVhMi4zLDIuMywwLDAsMS0uMDcxLDMuMzI1Yy0yLjczNiwyLjc2LTUuNDk0LDUuNS04LjIzOCw4LjI1MWExLjM4MSwxLjM4MSwwLDAsMS0uNzU4LjI4OGMtLjcxOS4xNzQtMS40MjkuMzc5LTIuMTQ0LjU3Mi0uOTMyLjI1MS0xLjg2Mi41LTIuNzk1Ljc1MS0uNi4xNTgtLjk4OS0uMjEzLS44MzItLjgwN3EuNjg5LTIuNTk1LDEuNDA2LTUuMTgyYTEuMTY0LDEuMTY0LDAsMCwxLC4yODktLjQ4N3E0LjA5MS00LjEwNyw4LjItOC4yQTIuMjY1LDIuMjY1LDAsMCwxLDc1OS40MTYsMzU2Ljc2OVptLTEuOTg5LDIuOTU2LTYuNTQsNi41MzgsMy4wMjUsMy4wMjQsNi41MzgtNi41MzdabTQuMDIzLDIuMTY1Yy4xMTgtLjEzNS4yMjUtLjI2OS4zNDMtLjM5MmExLjEzNCwxLjEzNCwwLDAsMCwwLTEuNzM0Yy0uNDYtLjQ2Ni0uOTI2LS45MjUtMS4zODgtMS4zOWExLjE2NiwxLjE2NiwwLDAsMC0uODYxLS4zNjhjLS41NzgsMC0uODgxLjQtMS4yMTQuNzZabS0xMi4wODQsOC44NjMsMy4yLS44NjMtMi4zMzctMi4zMzFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIvPjxwYXRoIGNsYXNzPSJhIiBkPSJNODEzLjk0Miw0MjIuNmwtLjc4OS0uOCwzLjgyMS0zLjgxOS43ODQuOFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01OS42NDggLTU1Ljk0NykiLz48L2c+PC9zdmc+JywKICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgdGVtcGxhdGVfbmFtZTogIiIsCiAgICAgIHNhdmVfc3ViamVjdDogIiIsCiAgICAgIGlzX3B1Ymxpc2hfdGVtcGxhdGU6IHRydWUsCiAgICAgIHZlcmlmaWNhdGlvbl9zdGF0dXM6IG51bGwsCiAgICAgIGRlZmF1bHRfdGVtcGxhdGVsaXN0OiBbXSwKICAgICAgdGVtcGxhdGVsaXN0OiBbXSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgY3VycmVudF90ZW1wbGF0ZTogW10sCiAgICAgIG9sZF90ZW1wbGF0ZV9uYW1lOiAiIiwKICAgICAgaXNFZGl0VGVtcGxhdGU6IGZhbHNlLAogICAgICBudW1iZXJfb2Zfcm93czogbnVsbCwKICAgICAgdG90YWxfcGFnZXM6IG51bGwsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgcHJldmlld190ZW1wbGF0ZV9kYXRhOiBudWxsLAogICAgICBwcmV2aWV3X3RlbXBsYXRlX2RhdGExOiB7CiAgICAgICAgSEVBREVSOiB7CiAgICAgICAgICB0eXBlOiAiSU1BR0UiLAogICAgICAgICAgYm9keTogImh0dHBzOi8vc3RvcmFnZS5jZW5zZS5haS9jb2RlYXJyYXkvY2Vuc2Vfd2Vic2l0ZV9zdGF0aWNfYXNzZXRzL3JldGFpbC9BdmFpbGFibGVEaXNjb3VudHMuc3ZnIiwKICAgICAgICB9LAogICAgICAgIEJPRFk6IHsKICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgIGJvZHk6ICJIZWxsbyBXT3JsZCIsCiAgICAgICAgfSwKICAgICAgICBGT09URVI6IHsKICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgIGJvZHk6ICJXb3JsZCwgaGVsbG8gISIsCiAgICAgICAgfSwKICAgICAgICBCVVRUT046IHsKICAgICAgICAgIGJvZHk6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICJVUkwiLAogICAgICAgICAgICAgIGxhYmVsOiAiS25vdyBtb3JlIiwKICAgICAgICAgICAgICBib2R5OiAiaHR0cHM6Ly90ZXN0LmNvbSIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAiVVJMIiwKICAgICAgICAgICAgICBsYWJlbDogIktub3cgbW9yZSIsCiAgICAgICAgICAgICAgYm9keTogImh0dHBzOi8vdGVzdC5jb20iLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICB9LAogICAgICB0ZW1wbGF0ZV9uYW1lX2FscmVhZHlfZXhpc3Q6IGZhbHNlLAogICAgICBlZGl0X3RlbXBsYXRlX25hbWVfYWxyZWFkeV9leGlzdDogZmFsc2UsCiAgICAgIHBhZ2VfYXJyYXk6IFtdLAogICAgICBzZW5kX3RlbXBsYXRlX2FsbF9jdXN0b21lcjogdHJ1ZSwKICAgICAgY29udGFjdHNfbGlzdDogW10sCiAgICAgIGNvbnRhY3RzX2xpc3RfcGFnaW5hdGlvbjogMSwKICAgICAgY29udGFjdHNfbGlzdF9wYWdpbmF0aW9uX2NvdW50OiAwLAogICAgICBzZWFyY2hfY3VzdG9tZXI6ICIiLAogICAgICBzcGVjaWZpY19jb250YWN0X2xpc3Q6IFtdLAogICAgICBkaXNhYmxlX2J0bl9leHBpcmVkOiBmYWxzZSwKICAgICAgY2hvb3Nlbl90ZW1wbGF0ZTogbnVsbCwKICAgICAgaXNWaXNpYmxlU2VhcmNoQ2xlYXI6IGZhbHNlLAogICAgICBzZWFyY2hfbmFtZTogIiIsCiAgICAgIGFkZF9jdXN0b21lcl9jb250YWN0X251bWJlcjogbnVsbCwKICAgICAgYWRkX2N1c3RvbWVyX25hbWU6IG51bGwsCiAgICAgIHBob25lTnVtYmVyOiBudWxsLAogICAgICBjcmVkaXRzX2JhbGFuY2U6IG51bGwsCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGlzX25vdGlmaWNhdGlvbl90ZW1wbGF0ZTogQm9vbGVhbiwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlOYW1lIik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzZWFyY2hfbmFtZSgpIHsKICAgICAgaWYgKHRoaXMuc2VhcmNoX25hbWUgPT09ICIiKSB7CiAgICAgICAgdGhpcy5sb2FkX3RlbXBsYXRlcygpOwogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9PSAiIikgewogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgY2hvb3Nlbl90ZW1wbGF0ZTogewogICAgICBoYW5kbGVyKHZhbCwgb2xkVmFsKSB7CiAgICAgICAgaWYgKHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZSAhPSBudWxsKSB7CiAgICAgICAgICB0aGlzLnByZXZpZXdfdGVtcGxhdGUoIm5ldyIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgICBjdXJyZW50X3RlbXBsYXRlOiB7CiAgICAgIGhhbmRsZXIodmFsLCBvbGRWYWwpIHsKICAgICAgICBpZiAodGhpcy5jdXJyZW50X3RlbXBsYXRlLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICB0aGlzLnByZXZpZXdfdGVtcGxhdGUoIm9sZCIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHRoaXMuZnJlZXplX3BvcnRhbCgpOwogICAgfSwgMjAwMCk7CiAgICB0aGlzLmxvYWRfdGVtcGxhdGVzKCk7CiAgICBpZiAodGhpcy5pc19ub3RpZmljYXRpb25fdGVtcGxhdGUgPT09IGZhbHNlKSB7CiAgICAgIHRoaXMubG9hZF9jdXN0b21lcl9saXN0KCk7CiAgICB9CiAgICB2YXIgdm0gPSB0aGlzOwogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pc0VkaXRUZW1wbGF0ZSA9IGZhbHNlOwogICAgICBpZiAoJCh0aGlzKS5pcygiOmNoZWNrZWQiKSkgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgfQogICAgfSk7CgogICAgLy8gY29uc3QgbXlEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubXVsdGlzZWxlY3QnKQogICAgLy8gY29uc3QgbXlEaXYxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm11bHRpc2VsZWN0X19jb250ZW50LXdyYXBwZXInKQogICAgLy8gY29uc3QgbXlEaXYyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm11bHRpc2VsZWN0X19jb250ZW50JykKICAgIC8vIGNvbnN0IG15RGl2MyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzcGVjaWZpY19jb250YWN0X2xpc3RfaWQnKQogICAgLy8gY29uc29sZS5sb2coIm15RGl2IixteURpdik7CiAgICAvLyBjb25zb2xlLmxvZygibXlEaXYxIixteURpdjEpOwogICAgLy8gY29uc29sZS5sb2coIm15RGl2MiIsbXlEaXYyKTsKICAgIC8vIGNvbnNvbGUubG9nKCJteURpdjMiLG15RGl2Myk7CgogICAgLy8gbXlEaXYuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Njcm9sbGVkIHRvIGJvdHRvbScpCiAgICAvLyAgIGlmIChteURpdi5vZmZzZXRIZWlnaHQgKyBteURpdi5zY3JvbGxUb3AgPj0gbXlEaXYuc2Nyb2xsSGVpZ2h0KSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Njcm9sbGVkIHRvIGJvdHRvbScpCiAgICAvLyAgIH0KICAgIC8vIH0pCiAgICAvLyBteURpdjEuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Njcm9sbGVkIHRvIGJvdHRvbTExMTEnKSAgOwogICAgLy8gICBpZiAobXlEaXYub2Zmc2V0SGVpZ2h0ICsgbXlEaXYuc2Nyb2xsVG9wID49IG15RGl2LnNjcm9sbEhlaWdodCkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCdzY3JvbGxlZCB0byBib3R0b20nKQogICAgLy8gICB9CiAgICAvLyB9KQogICAgLy8gbXlEaXYyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKCkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCdzY3JvbGxlZCB0byBib3R0b20yMjInKSAgOwogICAgLy8gICBpZiAobXlEaXYub2Zmc2V0SGVpZ2h0ICsgbXlEaXYuc2Nyb2xsVG9wID49IG15RGl2LnNjcm9sbEhlaWdodCkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCdzY3JvbGxlZCB0byBib3R0b20nKQogICAgLy8gICB9CiAgICAvLyB9KQogICAgLy8gbXlEaXYzLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKCkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCdzY3JvbGxlZCB0byBib3R0b20zMzMzJyk7CiAgICAvLyAgIGlmIChteURpdi5vZmZzZXRIZWlnaHQgKyBteURpdi5zY3JvbGxUb3AgPj0gbXlEaXYuc2Nyb2xsSGVpZ2h0KSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Njcm9sbGVkIHRvIGJvdHRvbScpCiAgICAvLyAgIH0KICAgIC8vIH0pCiAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNsaXN0X2lkIik7CiAgICBlbC5vbndoZWVsID0gdGhpcy5oYW5kbGVXaGVlbDsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVdoZWVsKGV2ZW50LCBkYXRhLCBmdW5jKSB7CiAgICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7CiAgICAgICAgLy8gZGF0YSArPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJjb21pbmcgaGVyZSBkb3duIik7CiAgICAgICAgdGhpcy5jb250YWN0c19saXN0X3BhZ2luYXRpb24gKz0gMTsKICAgICAgICBpZih0aGlzLmNvbnRhY3RzX2xpc3RfcGFnaW5hdGlvbiA8IHRoaXMuY29udGFjdHNfbGlzdF9wYWdpbmF0aW9uX2NvdW50KSB7CiAgICAgICAgICB0aGlzLmxvYWRfY3VzdG9tZXJfbGlzdCgpOwogICAgICAgIH1lbHNlIGlmKHRoaXMuc2VhcmNoX2N1c3RvbWVyICE9ICIiKSB7CiAgICAgICAgICB0aGlzLnNlYXJjaF9jdXN0b21lcl9saXN0KCk7CiAgICAgICAgfQogICAgICAgIC8vIGRhdGEgLT0gMTsKICAgICAgfQogICAgfSwKICAgIGFkZF9jdXN0b21lcigpIHsKICAgICAgaWYgKHRoaXMucGhvbmVOdW1iZXIuaXNWYWxpZCA9PSB0cnVlKSB7CiAgICAgICAgdGhpcy5jb250YWN0c19saXN0LnB1c2goewogICAgICAgICAgd2hhdHNhcHBfcGhvbmVfbnVtYmVyOiB0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlciwKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNwZWNpZmljX2NvbnRhY3RfbGlzdC5wdXNoKHsKICAgICAgICAgIHBob25lOiB0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlciwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBTd2FsKHsKICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCcnKSwKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2hlY2tfYWRkb25zX2JhbGFuY2UoKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuY2hlY2tfYWRkb25zX2JhbGFuY2UoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgY2hlY2tfYmFsYW5jZTogdHJ1ZSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB2YXIgdGVtcGxhdGVfY291bnQgPSByZXNwb25zZS5kYXRhLmNyZWRpdHMuc21zX2NvdW50OwogICAgICAgICAgdGhpcy5jcmVkaXRzX2JhbGFuY2UgPQogICAgICAgICAgICB0aGlzLnRsdCgnY3VycmVudF9zbXNfY3JlZGl0X3RleHQnKSArIiA8c3Ryb25nPiIrIHRoaXMudGx0KCdjdXJyZW50X3Ntc19jcmVkaXRfdGV4dCcpICsiIDoiICsKICAgICAgICAgICAgc21zX2NvdW50LnVzICsKICAgICAgICAgICAgIiB8IisgdGhpcy50bHQoJ2N1cnJlbnRfc21zX2NyZWRpdF90ZXh0MicpKyI6ICIgKwogICAgICAgICAgICBzbXNfY291bnQubm9uX3VzICsKICAgICAgICAgICAgIjwvc3Ryb25nPiI7CiAgICAgICAgICAkKCIjY2hlY2tiYWxhbmNlIikubW9kYWwoInNob3ciKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgY2xlYXJfc2VhcmNoX25hbWUoKSB7CiAgICAgIHRoaXMuc2VhcmNoX25hbWUgPSAiIjsKICAgIH0sCiAgICBjYWxsc2VhcmNoKCkgewogICAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSAhPSAiIikgewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy53aGF0c2FwcF90ZW1wbGF0ZSgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgaXNfc2VhcmNoOiB0cnVlLAogICAgICAgICAgICAgIHBhZ2Vfbm86IDEsCiAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgaXNfbm90aWZpY2F0aW9uOiB0aGlzLmlzX25vdGlmaWNhdGlvbl90ZW1wbGF0ZSwKICAgICAgICAgICAgICBzZWFyY2hfa2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gW107CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJObyBXaGF0c2FwcCBUZW1wbGF0ZSBpbiBkYXRhYmFzZSIpIHsKICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlbGlzdCA9IFtdOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnRlbXBsYXRlcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZWxpc3QgPSByZXNwb25zZS5kYXRhLnRlbXBsYXRlczsKICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZWxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93X3RlbXBsYXRlKDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdlX2NvdW50OwogICAgICAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwodGhpcy5udW1iZXJfb2Zfcm93cyAvIHRoaXMucGVyX3BhZ2UpOwogICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbigxKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2N1cnJlbnRfc21zX2NyZWRpdF90ZXh0MycpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2N1cnJlbnRfc21zX2NyZWRpdF90ZXh0NCcpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pc0VkaXRUZW1wbGF0ZSA9IGZhbHNlOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2F2ZV90ZW1wbGF0ZSgpIHsKICAgICAgaWYgKHRoaXMudGVtcGxhdGVfbmFtZSA9PSAiIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3RlbXBsYXRlX25hbWVfbXNnJyksCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZSAhPSBudWxsKSB7CiAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7CiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmNob29zZW5fdGVtcGxhdGUudmFyaWFibGVfbGlzdCkgewogICAgICAgICAgaWYgKHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZS52YXJpYWJsZV9saXN0W2ldID09ICIiKSB7CiAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNoZWNrKSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3ZhcmlhYmxlX3ZhbHVlX21zZycpLAogICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLnRlbXBsYXRlX25hbWVfYWxyZWFkeV9leGlzdCA9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciB0ZW1wbGF0ZV9kZXRhaWxzID0gewogICAgICAgIHRlbXBsYXRlX25hbWU6IHRoaXMudGVtcGxhdGVfbmFtZSwKICAgICAgICBwYXJlbnRfdGVtcGxhdGVfaWQ6IHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZS50ZW1wbGF0ZV9pZCwKICAgICAgICB2YXJpYWJsZV9kaWN0OiB0aGlzLmNob29zZW5fdGVtcGxhdGUudmFyaWFibGVfZGljdCwKICAgICAgfTsKICAgICAgLy8gcmV0dXJuOwogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMud2hhdHNhcHBfdGVtcGxhdGUoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgICBpc19zYXZlOiB0cnVlLAogICAgICAgICAgICBpc19ub3RpZmljYXRpb246IHRoaXMuaXNfbm90aWZpY2F0aW9uX3RlbXBsYXRlLAogICAgICAgICAgICB0ZW1wbGF0ZV9kZXRhaWxzOiB0ZW1wbGF0ZV9kZXRhaWxzLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICQoIiNhZGR0ZW1wbGF0ZW1vZGVsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0ZW1wbGF0ZV9kYXRhX2FkZGVkJyksCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfdGVtcGxhdGVzKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJQYXJlbnQgVGVtcGxhdGUgbm90IGZvdW5kIGluIGRhdGFiYXNlIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3BhcmVudF90ZW1wbGF0ZV9ub3RfZm91bmQnKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAiREIgT1BFUkFUSU9OIFVOU1VDQ0VTU0ZVTCIpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnZGJfb3BlcmF0aW9uX3Vuc3VjY2VzcycpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAiVGVtcGxhdGUgZGV0YWlscyBtaXNzaW5nIGluIHJlcXVlc3QgYm9keSIKICAgICAgICAgICkgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3RlbXBsYXRlX2RldGFpbF9taXNzaW5nJyksCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnaW50ZXJuYWxfc2VydmVyX21zZycpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnc29tZV9lcnJvcl9tc2cnKSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmlzRWRpdFRlbXBsYXRlID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBlZGl0X3RlbXBsYXRlX2RldGFpbHMoKSB7CiAgICAgIGlmICghdGhpcy5pc0VkaXRUZW1wbGF0ZSkgewogICAgICAgIHRoaXMuaXNFZGl0VGVtcGxhdGUgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNFZGl0VGVtcGxhdGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmxvYWRfdGVtcGxhdGVzKCk7CiAgICAgICAgdGhpcy5lZGl0X3RlbXBsYXRlX25hbWVfYWxyZWFkeV9leGlzdCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgZWRpdF90ZW1wbGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudF90ZW1wbGF0ZS50ZW1wbGF0ZV9uYW1lID09ICIiKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnZWRpdF90ZW1wbGF0ZV9uYW1lX2JsYW5rJyksCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuY3VycmVudF90ZW1wbGF0ZSAhPSBudWxsKSB7CiAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7CiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmN1cnJlbnRfdGVtcGxhdGUudmFyaWFibGVfZGljdCkgewogICAgICAgICAgaWYgKHRoaXMuY3VycmVudF90ZW1wbGF0ZS52YXJpYWJsZV9kaWN0W2ldID09ICIiKSB7CiAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNoZWNrKSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2VkaXRfdGVtcGxhdGVfdmFsdWVfZW1wdHlfbXNnJyksCiAgICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZWRpdF90ZW1wbGF0ZV9uYW1lX2FscmVhZHlfZXhpc3QgPT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIHZhciB0ZW1wbGF0ZV9kZXRhaWxzID0gewogICAgICAgIHRlbXBsYXRlX25hbWU6IHRoaXMuY3VycmVudF90ZW1wbGF0ZS50ZW1wbGF0ZV9uYW1lLAogICAgICAgIHRlbXBsYXRlX2lkOiB0aGlzLmN1cnJlbnRfdGVtcGxhdGUudGVtcGxhdGVfaWQsCiAgICAgICAgdmFyaWFibGVfZGljdDogdGhpcy5jdXJyZW50X3RlbXBsYXRlLnZhcmlhYmxlX2RpY3QsCiAgICAgIH07CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMud2hhdHNhcHBfdGVtcGxhdGUoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgICB0ZW1wbGF0ZV9kZXRhaWxzOiB0ZW1wbGF0ZV9kZXRhaWxzLAogICAgICAgICAgICBpc19lZGl0OiB0cnVlLAogICAgICAgICAgICBpc19ub3RpZmljYXRpb246IHRoaXMuaXNfbm90aWZpY2F0aW9uX3RlbXBsYXRlLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICQoIiNhZGR0ZW1wbGF0ZW1vZGVsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdlZGl0X3RlbXBsYXRlX2RhdGFfZWRpdGVkJyksCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfdGVtcGxhdGVzKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIkRCIE9QRVJBVElPTiBVTlNVQ0NFU1NGVUwiKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2VkaXRfdGVtcGxhdGVfb3BlcmF0aW9uX3Vuc3VjY2Vzc2Z1bCcpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAiU2VsZWN0ZWQgdGVtcGxhdGUgbm90IGZvdW5kIGluIGRhdGFiYXNlIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2VkaXRfdGVtcGxhdGVfc2VsZWN0ZWRfdGVtcGxhdGUnKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIlRlbXBsYXRlIGRldGFpbHMgbWlzc2luZyBpbiByZXF1ZXN0IGJvZHkiCiAgICAgICAgICApIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnZWRpdF90ZW1wbGF0ZV9kZXRhaWxfbWlzc2luZycpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZihyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2ludGVybmFsX3NlcnZlcl9tc2cnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NvbWVfZXJyb3JfbXNnJyksCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5pc0VkaXRUZW1wbGF0ZSA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgbG9hZF9jdXN0b21lcl9saXN0KCkgewogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMud2hhdHNhcHBfdGVtcGxhdGUoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgICBnZXRfY29udGFjdHNfbGlzdDogdHJ1ZSwKICAgICAgICAgICAgcGVyX3BhZ2U6IDUsCiAgICAgICAgICAgIHBhZ2Vfbm86IHRoaXMuY29udGFjdHNfbGlzdF9wYWdpbmF0aW9uLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgIGZvcih2YXIgaSBpbiByZXNwb25zZS5kYXRhLmNvbnRhY3RzX2xpc3QpIHsKICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RzX2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmNvbnRhY3RzX2xpc3RbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuY29udGFjdHNfbGlzdF9wYWdpbmF0aW9uX2NvdW50ID0gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJObyBjdXN0b21lciBkYXRhIGF2YWlsYWJsZSIpIHsKICAgICAgICAgICAgdGhpcy5jb250YWN0c19saXN0ID0gW107CiAgICAgICAgICB9IGVsc2UgaWYocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdpbnRlcm5hbF9zZXJ2ZXJfbXNnJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdzb21lX2Vycm9yX21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaF9jdXN0b21lcl9saXN0KHF1ZXJ5KSB7CiAgICAgIGlmIChxdWVyeSAhPSAiIikgewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLndoYXRzYXBwX3RlbXBsYXRlKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgZ2V0X2NvbnRhY3RzX2xpc3Q6IHRydWUsCiAgICAgICAgICAgIHNlYXJjaF9rZXk6IHF1ZXJ5LAogICAgICAgICAgICBwZXJfcGFnZTogNSwKICAgICAgICAgICAgcGFnZV9ubzogMSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgdGhpcy5jb250YWN0c19saXN0ID0gW107CiAgICAgICAgICBjb25zb2xlLmxvZygiQ3VzdG9tZXIgc2VhcmNoIiwgcmVzcG9uc2UpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgICBmb3IodmFyIGkgaW4gcmVzcG9uc2UuZGF0YS5jb250YWN0c19saXN0KSB7CiAgICAgICAgICAgICAgdGhpcy5jb250YWN0c19saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5jb250YWN0c19saXN0W2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmNvbnRhY3RzX2xpc3RfcGFnaW5hdGlvbl9jb3VudCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAiTm8gY3VzdG9tZXIgZGF0YSBhdmFpbGFibGUiKSB7CiAgICAgICAgICAgIHRoaXMuY29udGFjdHNfbGlzdCA9IFtdOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogIkludGVybmFsIFNlcnZlciBFcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogIlNvbWUgZXJyb3Igb2NjdXJlZCIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb250YWN0c19saXN0X3BhZ2luYXRpb24gPSAxOwogICAgICAgIHRoaXMuY29udGFjdHNfbGlzdCA9IFtdOwogICAgICAgIHRoaXMubG9hZF9jdXN0b21lcl9saXN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBzZW5kX3RlbXBsYXRlKCkgewogICAgICB2YXIgbGlzdCA9IFtdOwogICAgICBpZiAodGhpcy5zcGVjaWZpY19jb250YWN0X2xpc3QubGVuZ3RoICE9IDApIHsKICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuc3BlY2lmaWNfY29udGFjdF9saXN0KSB7CiAgICAgICAgICBsaXN0LnB1c2godGhpcy5zcGVjaWZpY19jb250YWN0X2xpc3RbaV0ud2hhdHNhcHBfcGhvbmVfbnVtYmVyKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3NlbmRfdGVtcGxhdGVfc2VsZWN0X2NvbnRhY3QnKSwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgYXBpX2NhbGxzLndoYXRzYXBwX3RlbXBsYXRlKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICBpc19ub3RpZmljYXRpb246IHRoaXMuaXNfbm90aWZpY2F0aW9uX3RlbXBsYXRlLAogICAgICAgICAgICAgIHRlbXBsYXRlX2lkOiB0aGlzLmN1cnJlbnRfdGVtcGxhdGUudGVtcGxhdGVfaWQsCiAgICAgICAgICAgICAgY29udGFjdHNfbGlzdDogbGlzdCwKICAgICAgICAgICAgICBwdWJsaXNoX3RlbXBsYXRlOiB0cnVlLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIlNlbGVjdGVkIHRlbXBsYXRlIG5vdCBmb3VuZCBpbiBkYiIpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRsdCgnc2VuZF90ZW1wbGF0ZV9pbnN1ZmZpY2llbnQnKSwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdzZW5kX3RlbXBsYXRlX25vX2NyZWRpdHNfbGVmdCcpLAogICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJObyBjcmVkaXRzIGxlZnQgZm9yIHRlbXBsYXRlIHRvIG5vbiB1cyIKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3NlbmRfdGVtcGxhdGVfaW5zdWZmaWNpZW50JyksCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnc2VuZF90ZW1wbGF0ZV9ub19jcmVkaXRzX2xlZnQnKSwKICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHRpbWVyOiA0MDAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAidGVtcGxhdGUgaXMgYmVpbmcgc2VudCIpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRsdCgnc2VuZF90ZW1wbGF0ZV9zZW50X21zZycpLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICQoIiNzZW5kdGVtcGxhdGUiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAiTm8gY3JlZGl0cyBsZWZ0IHRvIHNlbmQgdGVtcGxhdGUiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdzZW5kX3RlbXBsYXRlX2luc3VmZmljaWVudCcpLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NlbmRfdGVtcGxhdGVfbm9fY3JlZGl0c19sZWZ0JyksCiAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0aW1lcjogNDAwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2ludGVybmFsX3NlcnZlcl9tc2cnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NvbWVfZXJyb3JfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGVfdGVtcGxhdGVfbmFtZSgpIHsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy53aGF0c2FwcF90ZW1wbGF0ZSgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICBpc190ZW1wbGF0ZV9uYW1lX2V4aXN0czogdHJ1ZSwKICAgICAgICAgICAgaXNfbm90aWZpY2F0aW9uOiB0aGlzLmlzX25vdGlmaWNhdGlvbl90ZW1wbGF0ZSwKICAgICAgICAgICAgdGVtcGxhdGVfbmFtZTogdGhpcy50ZW1wbGF0ZV9uYW1lLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJXaGF0c2FwcCBUZW1wbGF0ZSBOYW1lIGRvZXMgbm90IGV4aXN0cyIKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnRlbXBsYXRlX25hbWVfYWxyZWFkeV9leGlzdCA9IGZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGVtcGxhdGVfbmFtZV9hZGRfaWQiKS5zdHlsZS5ib3JkZXIgPSBudWxsOwogICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZV9uYW1lICE9ICIiKSB7CiAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRlbXBsYXRlX25hbWVfYWRkX2lkIikuc3R5bGUuYm9yZGVyID0KICAgICAgICAgICAgICAvLyAiMXB4IHNvbGlkIGdyZWVuIjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJXaGF0c2FwcCBUZW1wbGF0ZSBOYW1lIEFscmVhZHkgRXhpc3RzIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVfbmFtZV9hbHJlYWR5X2V4aXN0ID0gdHJ1ZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRlbXBsYXRlX25hbWVfYWRkX2lkIikuc3R5bGUuYm9yZGVyID0KICAgICAgICAgICAgICAiMXB4IHNvbGlkIHJlZCI7CiAgICAgICAgICB9IGVsc2UgaWYocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdpbnRlcm5hbF9zZXJ2ZXJfbXNnJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdzb21lX2Vycm9yX21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgdmFsaWRhdGVfZWRpdF90ZW1wbGF0ZV9uYW1lKCkgewogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLndoYXRzYXBwX3RlbXBsYXRlKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICAgIGlzX3RlbXBsYXRlX25hbWVfZXhpc3RzOiB0cnVlLAogICAgICAgICAgICBpc19ub3RpZmljYXRpb246IHRoaXMuaXNfbm90aWZpY2F0aW9uX3RlbXBsYXRlLAogICAgICAgICAgICB0ZW1wbGF0ZV9uYW1lOiB0aGlzLmN1cnJlbnRfdGVtcGxhdGUudGVtcGxhdGVfbmFtZSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAiV2hhdHNhcHAgVGVtcGxhdGUgTmFtZSBkb2VzIG5vdCBleGlzdHMiCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5lZGl0X3RlbXBsYXRlX25hbWVfYWxyZWFkeV9leGlzdCA9IGZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZWRpdF90ZW1wbGF0ZV9uYW1lX2lkIikuc3R5bGUuYm9yZGVyID0KICAgICAgICAgICAgICBudWxsOwogICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50X3RlbXBsYXRlLnRlbXBsYXRlX25hbWUgIT0gIiIpIHsKICAgICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZWRpdF90ZW1wbGF0ZV9uYW1lX2lkIikuc3R5bGUuYm9yZGVyID0KICAgICAgICAgICAgICAvLyAiMXB4IHNvbGlkICMwMGYwMDAiOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIldoYXRzYXBwIFRlbXBsYXRlIE5hbWUgQWxyZWFkeSBFeGlzdHMiCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKHRoaXMub2xkX3RlbXBsYXRlX25hbWUgPT0gdGhpcy5jdXJyZW50X3RlbXBsYXRlLnRlbXBsYXRlX25hbWUpIHsKICAgICAgICAgICAgICB0aGlzLmVkaXRfdGVtcGxhdGVfbmFtZV9hbHJlYWR5X2V4aXN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXRfdGVtcGxhdGVfbmFtZV9pZCIpLnN0eWxlLmJvcmRlciA9CiAgICAgICAgICAgICAgICBudWxsOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuZWRpdF90ZW1wbGF0ZV9uYW1lX2FscmVhZHlfZXhpc3QgPSB0cnVlOwogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlZGl0X3RlbXBsYXRlX25hbWVfaWQiKS5zdHlsZS5ib3JkZXIgPQogICAgICAgICAgICAgICAgIjFweCBzb2xpZCByZWQiOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdpbnRlcm5hbF9zZXJ2ZXJfbXNnJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdzb21lX2Vycm9yX21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgcHJldmlld190ZW1wbGF0ZSh2YWwpIHsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBpZiAodmFsID09ICJvbGQiKSB7CiAgICAgICAgdmFyIHRlbXBsYXRlX2lkID0gdGhpcy5jdXJyZW50X3RlbXBsYXRlLnRlbXBsYXRlX2lkOwogICAgICAgIHZhciB2YXJpYWJsZV9kaWN0ID0gdGhpcy5jdXJyZW50X3RlbXBsYXRlLnZhcmlhYmxlX2RpY3Q7CiAgICAgICAgdmFyIGlzX3BhcmVudF90ZW1wbGF0ZSA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PSAibmV3IikgewogICAgICAgIHZhciB0ZW1wbGF0ZV9pZCA9IHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZS50ZW1wbGF0ZV9pZDsKICAgICAgICB2YXIgdmFyaWFibGVfZGljdCA9IHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZS52YXJpYWJsZV9kaWN0OwogICAgICAgIHZhciBpc19wYXJlbnRfdGVtcGxhdGUgPSB0cnVlOwogICAgICB9CiAgICAgIGlmICh0ZW1wbGF0ZV9pZCAhPSB1bmRlZmluZWQpIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy53aGF0c2FwcF90ZW1wbGF0ZSgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgaXNfbm90aWZpY2F0aW9uOiB0aGlzLmlzX25vdGlmaWNhdGlvbl90ZW1wbGF0ZSwKICAgICAgICAgICAgICBpc19wcmV2aWV3OiB0cnVlLAogICAgICAgICAgICAgIGlzX3BhcmVudF90ZW1wbGF0ZTogaXNfcGFyZW50X3RlbXBsYXRlLAogICAgICAgICAgICAgIHRlbXBsYXRlX2lkOiB0ZW1wbGF0ZV9pZCwKICAgICAgICAgICAgICB2YXJpYWJsZV9kaWN0OiB2YXJpYWJsZV9kaWN0LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICB0aGlzLnByZXZpZXdfdGVtcGxhdGVfZGF0YSA9IHJlc3BvbnNlLmRhdGEuYm9keTsKICAgICAgICAgICAgICAvLyAkKCIjcHJldmlld190ZW1wbGF0ZV92aXNpYmxlIikubW9kYWwoInNob3ciKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2ludGVybmFsX3NlcnZlcl9tc2cnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NvbWVfZXJyb3JfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlbmRfZW1haWxfY29uZmlybV9wcm9tcHRfdGV4dChhbGxfY3VzdG9tZXIpIHsKICAgICAgaWYgKGFsbF9jdXN0b21lcikgewogICAgICAgIHJldHVybiB0aGlzLnRsdCgnc2VuZF9idWxrX21zZycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLnRsdCgnZW1haWxfdG9fc3BlY2lmaWNfY3VzdG9tZXInKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdGVkX3RlbXBsYXRlcyh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT0gImFsbCIpIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGVtcGxhdGVsaXN0KSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2godGhpcy50ZW1wbGF0ZWxpc3RbaV0udGVtcGxhdGVfaWQpOwogICAgICAgICAgfQogICAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAkKCIjIiArIFtpXSkucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICAgICAgICAkKCIjc2VsZWN0YWxsIikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2godmFsdWUpOwogICAgICAgIH0gZWxzZSBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwogICAgICAgICAgaWYgKHNlbGVjdGFsbC5jaGVja2VkKSB7CiAgICAgICAgICAgIHNlbGVjdGFsbC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcigodGVtcGxhdGVzX2lkKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZXNfaWQgIT0gdmFsdWU7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gdGVtcDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVfdGVtcGxhdGUoKSB7CiAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGggPCAxKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnc2VsZWN0X29uZV90ZW1wbGF0ZScpLAogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy53aGF0c2FwcF90ZW1wbGF0ZSgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGlzX25vdGlmaWNhdGlvbjogdGhpcy5pc19ub3RpZmljYXRpb25fdGVtcGxhdGUsCiAgICAgICAgICAgIGlzX2RlbGV0ZTogdHJ1ZSwKICAgICAgICAgICAgdGVtcGxhdGVfbGlzdDogdGhpcy5jaGVja2VkX2xpc3QsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgIHRoaXMubG9hZF90ZW1wbGF0ZXMoKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0ZW1wbGF0ZV9kZWxldGVkX21zZycpLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJRdWVyeSBFeGVjdXRlZCBVblN1Y2Nlc3NmdWxseSIKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncXVlcnlfZXhlY3V0ZWRfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdpbnRlcm5hbF9zZXJ2ZXJfbXNnJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdzb21lX2Vycm9yX21zZycpLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmlzRWRpdFRlbXBsYXRlID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBsb2FkX3RlbXBsYXRlcygpIHsKICAgICAgdGhpcy5jdXJyZW50X3RlbXBsYXRlID0ge307CiAgICAgIC8vIEdldCBkZWZhdWx0IHRlbXBsYXRlcwogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMud2hhdHNhcHBfdGVtcGxhdGUoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgICBpc19ub3RpZmljYXRpb246IHRoaXMuaXNfbm90aWZpY2F0aW9uX3RlbXBsYXRlLAogICAgICAgICAgICBpc19nZXRfZGVmYXVsdF90ZW1wbGF0ZXM6IHRydWUsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5kZWZhdWx0X3RlbXBsYXRlbGlzdCA9IFtdOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICJTdWNjZXNzIiAmJgogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGVmYXVsdF90ZW1wbGF0ZXMgIT0gbnVsbAogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRfdGVtcGxhdGVsaXN0ID0gcmVzcG9uc2UuZGF0YS5kZWZhdWx0X3RlbXBsYXRlczsKICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09CiAgICAgICAgICAgICAgIk5vIERlZmF1bHQgV2hhdHNhcHAgVGVtcGxhdGUgaW4gZGF0YWJhc2UiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuZGVmYXVsdF90ZW1wbGF0ZWxpc3QgPSBbXTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2ludGVybmFsX3NlcnZlcl9tc2cnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NvbWVfZXJyb3JfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pc0VkaXRUZW1wbGF0ZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgIC8vIEdldCBTYXZlZCBUZW1wbGF0ZXMKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy53aGF0c2FwcF90ZW1wbGF0ZSgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICAgICAgaXNfbm90aWZpY2F0aW9uOiB0aGlzLmlzX25vdGlmaWNhdGlvbl90ZW1wbGF0ZSwKICAgICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLnRlbXBsYXRlbGlzdCA9IFtdOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAiTm8gV2hhdHNhcHAgVGVtcGxhdGUgaW4gZGF0YWJhc2UiKSB7CiAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZWxpc3QgPSBbXTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50ZW1wbGF0ZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZXM7CiAgICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucGFnZV9jb3VudDsKICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZWxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93X3RlbXBsYXRlKDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2ludGVybmFsX3NlcnZlcl9tc2cnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuaXNFZGl0VGVtcGxhdGUgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb21pbmcgaGVyZSIpOwogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NvbWVfZXJyb3JfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHBhZ2VfcmVxdWlyZShwYWdlKSB7CiAgICAgIGlmIChwYWdlID09IDAgfHwgcGFnZSA9PSB0aGlzLnRvdGFsX3BhZ2VzICsgMSkgewogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09ICIiKSB7CiAgICAgICAgICBpZiAocGFnZSA9PSAiLi4ucyIpIHsKICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCgxICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgICAgfSBlbHNlIGlmIChwYWdlID09ICIuLi5sIikgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKHRoaXMudG90YWxfcGFnZXMgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgICAgfQogICAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgYXBpX2NhbGxzLndoYXRzYXBwX3RlbXBsYXRlKCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICAgICAgICAgIGlzX25vdGlmaWNhdGlvbjogdGhpcy5pc19ub3RpZmljYXRpb25fdGVtcGxhdGUsCiAgICAgICAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gW107CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gIk5vIFdoYXRzYXBwIFRlbXBsYXRlIGluIGRhdGFiYXNlIgogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gW107CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50ZW1wbGF0ZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlbGlzdCA9IHJlc3BvbnNlLmRhdGEudGVtcGxhdGVzOwogICAgICAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdlX2NvdW50OwogICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKAogICAgICAgICAgICAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlbGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93X3RlbXBsYXRlKDApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2ludGVybmFsX3NlcnZlcl9tc2cnKSwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdFRlbXBsYXRlID0gZmFsc2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnc29tZV9lcnJvcl9tc2cnKSwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIi4uLmwiKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAgICAgICB9CiAgICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMud2hhdHNhcHBfdGVtcGxhdGUoKSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgaXNfc2VhcmNoOiB0cnVlLAogICAgICAgICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgICBpc19ub3RpZmljYXRpb246IHRoaXMuaXNfbm90aWZpY2F0aW9uX3RlbXBsYXRlLAogICAgICAgICAgICAgICAgc2VhcmNoX2tleTogdGhpcy5zZWFyY2hfbmFtZSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5pc0VkaXRUZW1wbGF0ZSA9IGZhbHNlOwogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gIk5vIFdoYXRzYXBwIFRlbXBsYXRlIGluIGRhdGFiYXNlIgogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZWxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGVtcGxhdGVzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVsaXN0ID0gcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZXM7CiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZWxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICB0aGlzLnNob3dfdGVtcGxhdGUoMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdlX2NvdW50OwogICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IE1hdGguY2VpbCgKICAgICAgICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyAvIHRoaXMucGVyX3BhZ2UKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnaW50ZXJuYWxfc2VydmVyX21zZycpLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3NvbWVfZXJyb3JfbXNnJyksCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgICAgdGhpcy5wYWdlX2FycmF5ID0gW107CiAgICAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG90YWxfcGFnZXMgLSA0OyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPD0gNCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPj0gdGhpcy50b3RhbF9wYWdlcyAtIDQpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gMzsgaSA8PSBwYWdlX25vICsgMzsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfSwKICAgIHBhZ2luYXRpb25fY2xhc3MoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICAgIHJldHVybiAiIGFjdGl2ZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgc2hvd190ZW1wbGF0ZShpbmRleCkgewogICAgICB0aGlzLmN1cnJlbnRfdGVtcGxhdGUgPSBKU09OLnBhcnNlKAogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMudGVtcGxhdGVsaXN0W2luZGV4XSkKICAgICAgKTsKICAgICAgdGhpcy5vbGRfdGVtcGxhdGVfbmFtZSA9IHRoaXMuY3VycmVudF90ZW1wbGF0ZS50ZW1wbGF0ZV9uYW1lOwogICAgICB0aGlzLmN1cnJlbnRfdGVtcGxhdGVfaW5kZXggPSBpbmRleDsKICAgICAgdGhpcy5pc0VkaXRUZW1wbGF0ZSA9IGZhbHNlOwogICAgICB0aGlzLnByZXZpZXdfdGVtcGxhdGUoIm9sZCIpOwogICAgfSwKICAgIGVtcHR5X3ZhcmlhYmxlKCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIHRoaXMuY2hvb3Nlbl90ZW1wbGF0ZSA9IG51bGw7CiAgICAgICAgdGhpcy5zcGVjaWZpY19jb250YWN0X2xpc3QgPSBbXTsKICAgICAgICB0aGlzLnRlbXBsYXRlX25hbWUgPSAiIjsKICAgICAgICB0aGlzLm9sZF90ZW1wbGF0ZV9uYW1lID0gIiI7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudF90ZW1wbGF0ZS5sZW5ndGggIT0gMCkgewogICAgICAgICAgdGhpcy5wcmV2aWV3X3RlbXBsYXRlKCJvbGQiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wcmV2aWV3X3RlbXBsYXRlX2RhdGEgPSBudWxsOwogICAgICAgIH0KICAgICAgICB0aGlzLnRlbXBsYXRlX25hbWVfYWxyZWFkeV9leGlzdCA9IGZhbHNlOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0ZW1wbGF0ZV9uYW1lX2FkZF9pZCIpLnN0eWxlLmJvcmRlciA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93X3N1YnNjcmlwdGlvbl9leHBpcmVkX3N3YWwoKTsKICAgICAgfQogICAgfSwKICAgIGNoZWNrX2N1cnJlbnRfdGVtcGxhdGVfYWN0aXZlKGluZGV4KSB7CiAgICAgIC8vIGNvbnNvbGUudGFibGUoaW5kZXgsIHRoaXMudGVtcGxhdGVsaXN0W2luZGV4XSwgdGhpcy5jdXJyZW50X3RlbXBsYXRlKTsKICAgICAgaWYgKEJvb2xlYW4odGhpcy50ZW1wbGF0ZWxpc3RbaW5kZXhdKSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlbGlzdFtpbmRleF0udGVtcGxhdGVfbmFtZSA9PT0KICAgICAgICAgIHRoaXMuY3VycmVudF90ZW1wbGF0ZS50ZW1wbGF0ZV9uYW1lCiAgICAgICAgICA/ICJjdXJyZW50LWFjdGl2ZS10ZW1wbGF0ZSIKICAgICAgICAgIDogbnVsbDsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["WhatsappTemplate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+iCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WhatsappTemplate.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Templates","sourcesContent":["<template>\n  <div>\n    <div class=\"spinner\" id=\"spinner\" v-show=\"spinnerOn\"></div>\n    <div class=\"container-fluid p-0\">\n      <div class=\"card dash-card\">\n        <div class=\"dash-card card-header d-flex m-0\">\n          <div class=\"card-act col-sm-4 pr-3 pl-0 d-flex\">\n            <input\n              class=\"form-control mr-auto\"\n              style=\"padding: 0px 15px; height: 36px !important\"\n              id=\"search_bar_id\"\n              placeholder=\"Search template here\"\n              v-model.trim=\"search_name\"\n              v-on:keyup=\"callsearch\"\n            />\n            <a\n              type=\"button\"\n              v-if=\"isVisibleSearchClear\"\n              class=\"btn bg-transparent mt-auto mb-auto py-0\"\n              @click=\"clear_search_name\"\n              style=\"margin-left: -40px; z-index: 10\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </a>\n          </div>\n          <div class=\"card-act ml-auto d-flex flex-wrap\">\n            <!-- <a\n              id=\"check_balance_btn\"\n              href=\"#\"\n              class=\"darkblue-btn\"\n              data-toggle=\"checkbalance\"\n              style=\"font-size: 15px; margin-right: 10px\"\n              @click=\"check_addons_balance\"\n              title=\"Check your whatsapp credits\"\n            >\n              Check Balance\n            </a> -->\n            <a\n              id=\"send_template_btn\"\n              href=\"#\"\n              class=\"darkblue-btn\"\n              data-toggle=\"modal\"\n              data-target=\"#sendtemplate\"\n              title=\"Send Template\"\n              style=\"font-size: 15px; margin-right: 10px\"\n              v-show=\"\n                templatelist.length > 0 &&\n                is_notification_template === false &&\n                !disable_btn_expired\n              \"\n            >\n              {{tlt('publish_template_btn')}}\n            </a>\n            <a\n              id=\"add_template_btn\"\n              href=\"#\"\n              class=\"darkblue-btn\"\n              v-if=\"disable_btn_expired\"\n              style=\"font-size: 15px; margin-right: 10px\"\n              title=\"Add new Template\"\n              @click=\"empty_variable\"\n            >\n              {{tlt('add_template_btn')}}\n            </a>\n            <a\n              id=\"add_template_btn\"\n              v-else\n              href=\"#\"\n              class=\"darkblue-btn\"\n              data-toggle=\"modal\"\n              data-target=\"#addtemplatemodel\"\n              style=\"font-size: 15px; margin-right: 10px\"\n              title=\"Add new Template\"\n              @click=\"empty_variable\"\n            >\n              {{tlt('add_template_btn')}}\n            </a>\n            <a\n              href=\"javascript:void(0)\"\n              class=\"red-btn\"\n              id=\"delete_intent\"\n              style=\"font-size: 15px\"\n              @click=\"delete_template\"\n            >\n              {{tlt('delete_btn')}}\n            </a>\n          </div>\n        </div>\n        <div class=\"card-body py-0\" id=\"page\">\n          <div class=\"col-sm-12 d-flex px-0\" v-if=\"templatelist.length > 0\">\n            <div class=\"col-sm-4 pl-0\" style=\"height: 80vh; overflow-y: auto\">\n              <div class=\"table-box\">\n                <div class=\"table-responsive\">\n                  <table class=\"table\" style=\"overflow-y: auto\">\n                    <thead>\n                      <!-- <tr> -->\n                      <th scope=\"row\">\n                        <div class=\"form-check checkbox checkbox-success\">\n                          <label class=\"form-check-label\">\n                            <input\n                              class=\"form-check-input\"\n                              id=\"selectall\"\n                              type=\"checkbox\"\n                              @change=\"selected_templates('all')\"\n                            />\n                            <span class=\"icn\"></span>\n                          </label>\n                        </div>\n                      </th>\n                      <th\n                        scope=\"row\"\n                        class=\"text-left\"\n                        style=\"\n                          font: normal normal normal 16px/22px Roboto;\n                          letter-spacing: 0px;\n                          color: #414141;\n                        \"\n                      >\n                        {{tlt('template_label')}}\n                      </th>\n                      <!-- </tr> -->\n                    </thead>\n                    <tbody>\n                      <tr\n                        v-for=\"(template, index) in templatelist\"\n                        :key=\"index\"\n                        :class=\"check_current_template_active(index)\"\n                      >\n                        <td scope=\"row\">\n                          <div class=\"form-check checkbox checkbox-success\">\n                            <label class=\"form-check-label\">\n                              <input\n                                class=\"form-check-input\"\n                                type=\"checkbox\"\n                                :id=\"index\"\n                                @change=\"\n                                  selected_templates(template.template_id)\n                                \"\n                              />\n                              <span class=\"icn\"></span>\n                            </label>\n                          </div>\n                        </td>\n                        <td\n                          style=\"cursor: pointer\"\n                          @click=\"show_template(index)\"\n                          :title=\"template.template_name\"\n                        >\n                          <template>\n                            <p style=\"margin-bottom: 0\">\n                              {{ template.template_name }}\n                            </p>\n                          </template>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n            <div\n              class=\"col-sm-8 pr-0\"\n              style=\"overflow-y: auto\"\n              v-if=\"templatelist.length > 0\"\n            >\n              <div style=\"border: 1px solid #dbe2e8\">\n                <div class=\"col-sm-12\">\n                  <div style=\"color: #414141\" class=\"d-flex\">\n                    <h5 class=\"pt-2\">{{tlt('template_details_label')}}\n                    </h5>\n                    <span\n                      @click=\"edit_template_details\"\n                      v-html=\"pencil_svg\"\n                      class=\"ml-auto mr-2 mt-2\"\n                      style=\"cursor: pointer\"\n                    ></span>\n                  </div>\n                </div>\n                <hr style=\"margin-top: 0\" />\n                <div class=\"col-sm-12\" style=\"margin-bottom: 1rem\">\n                  <h5>\n                    <p class=\"mt-2 mb-0\" style=\"color: #414141\">\n                      {{tlt('template_name_label')}}\n                    </p>\n                  </h5>\n                  <div v-if=\"!isEditTemplate\" style=\"padding-left: 20px\">\n                    <p>{{ current_template.template_name }}</p>\n                  </div>\n                  <div v-else>\n                    <input\n                      id=\"edit_template_name_id\"\n                      type=\"text\"\n                      v-model.trim=\"current_template.template_name\"\n                      v-on:keyup=\"validate_edit_template_name\"\n                      class=\"form-control edit\"\n                      style=\"padding: 0.375rem 0.75rem\"\n                      placeholder=\"Enter Template Name\"\n                    />\n                    <span\n                      v-show=\"edit_template_name_already_exist\"\n                      style=\"color: red\"\n                      >{{tlt('template_name_exist_msg')}}</span\n                    >\n                  </div>\n                </div>\n                <div class=\"col-sm-12\" style=\"margin-bottom: 1rem\">\n                  <div v-if=\"isEditTemplate\" style=\"width: 100%\">\n                    <h5>\n                      <p class=\"mt-2 mb-0\" style=\"color: #414141\">\n                        {{tlt('template_variable_label')}}\n                      </p>\n                    </h5>\n                    <!-- <div v-for=\"(variable, index) in current_template.variable_dict\" :key=\"index\"> -->\n                    <div v-if=\"current_template.variable_dict['HEADER']\">\n                      <p class=\"template-input-title\">\n                        {{\n                          current_template.variable_dict[\"HEADER\"]\n                            .component_name\n                        }}\n                      </p>\n                      <input\n                        :placeholder=\"\n                          current_template.variable_dict['HEADER'].type ==\n                          'IMAGE'\n                            ? 'Enter Image URL'\n                            : 'Enter Header Text'\n                        \"\n                        class=\"form-control edit\"\n                        type=\"text\"\n                        v-model=\"current_template.variable_dict['HEADER'].url\"\n                      />\n                    </div>\n                    <div v-if=\"current_template.variable_dict['BODY']\">\n                      <div\n                        v-for=\"(body_var, name, itr) in current_template\n                          .variable_dict['BODY'].variables\"\n                        :key=\"itr\"\n                      >\n                        <p class=\"template-input-title\">\n                          {{\n                            current_template.variable_dict[\"BODY\"]\n                              .component_name\n                          }}\n                          : {{ name }}\n                        </p>\n                        <input\n                          placeholder=\"Enter Body Text\"\n                          class=\"form-control edit\"\n                          type=\"text\"\n                          v-model=\"\n                            current_template.variable_dict['BODY'].variables[\n                              name\n                            ]\n                          \"\n                        />\n                      </div>\n                    </div>\n                    <div v-if=\"current_template.variable_dict['BUTTONS']\">\n                      <div\n                        v-for=\"(btn, name, itr) in current_template\n                          .variable_dict['BUTTONS'].buttons_list\"\n                        :key=\"itr\"\n                      >\n                        <div v-if=\"btn.type == 'URL'\">\n                          <p class=\"template-input-title\">\n                            {{\n                              current_template.variable_dict[\"BUTTONS\"]\n                                .component_name\n                            }}\n                            : {1}\n                          </p>\n                          <div class=\"input-group mb-3\">\n                            <div class=\"input-group-prepend\">\n                              <span\n                                class=\"input-group-text\"\n                                id=\"basic-addon3\"\n                                >{{ btn.base_url }}</span\n                              >\n                            </div>\n                            <input\n                              type=\"text\"\n                              class=\"form-control edit\"\n                              v-model=\"btn.variables['1']\"\n                              placeholder=\"Enter URL path\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <!-- </div> -->\n                  </div>\n                  <div class=\"col-sm-12 p-0\">\n                    <h5>\n                      <p class=\"my-3 mb-0\" style=\"color: #414141\">\n                        {{tlt('template_preview_label')}}\n                      </p>\n                    </h5>\n                    <div\n                      v-if=\"Boolean(preview_template_data)\"\n                      class=\"cards\"\n                      style=\"width: 50%; margin: 0 auto\"\n                    >\n                      <!-- <div\n                        v-for=\"(comp, name, index) in preview_template_data\"\n                        :key=\"index\"\n                      > -->\n                      <div v-if=\"Boolean(preview_template_data['HEADER'])\">\n                        <div\n                          v-if=\"preview_template_data['HEADER'].type == 'IMAGE'\"\n                        >\n                          <img\n                            :src=\"preview_template_data['HEADER'].body\"\n                            width=\"100%\"\n                          />\n                        </div>\n                        <div v-else>\n                          <p>{{ preview_template_data[\"HEADER\"].body }}</p>\n                        </div>\n                      </div>\n                      <div\n                        class=\"mt-4\"\n                        v-if=\"Boolean(preview_template_data['BODY'])\"\n                      >\n                        <label\n                          v-if=\"preview_template_data['BODY'].type == 'text'\"\n                          style=\"line-height: 1.5\"\n                        >\n                          {{ preview_template_data[\"BODY\"].body }}\n                        </label>\n                      </div>\n                      <div v-if=\"Boolean(preview_template_data['FOOTER'])\">\n                        <span\n                          v-if=\"preview_template_data['FOOTER'].type == 'text'\"\n                          style=\"\n                            font-size: 10px;\n                            line-height: 1.5;\n                            font-weight: 300;\n                          \"\n                        >\n                          {{ preview_template_data[\"FOOTER\"].body }}\n                        </span>\n                      </div>\n                      <!-- </div> -->\n                    </div>\n                    <div\n                      v-if=\"\n                        Boolean(preview_template_data) &&\n                        Boolean(preview_template_data['BUTTON'])\n                      \"\n                    >\n                      <div\n                        v-for=\"(btn, index1) in preview_template_data['BUTTON']\n                          .body\"\n                        :key=\"index1\"\n                      >\n                        <div\n                          v-if=\"btn['type'] === 'QUICK_REPLY'\"\n                          class=\"preview-button-div\"\n                          style=\"width: 50%; margin: 0 auto\"\n                        >\n                          <button\n                            color=\"rgba(11,103,170,1)\"\n                            class=\"btn preview-button\"\n                          >\n                            <span color=\"rgba(11,103,170,1)\" class=\"\"\n                              >{{ btn[\"text\"] }}\n                            </span>\n                          </button>\n                        </div>\n                        <div\n                          v-else-if=\"btn['type'] === 'URL'\"\n                          class=\"preview-button-div\"\n                          style=\"width: 50%; margin: 0 auto\"\n                        >\n                          <a\n                            :href=\"btn.url\"\n                            target=\"_blank\"\n                            class=\"btn preview-button\"\n                          >\n                            <span color=\"#0b67aa\" class=\"\"\n                              ><svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                width=\"17\"\n                                height=\"17\"\n                                viewBox=\"0 0 24 24\"\n                                fill=\"none\"\n                                stroke=\"#0b67aa\"\n                                stroke-width=\"2\"\n                                stroke-linecap=\"round\"\n                                stroke-linejoin=\"round\"\n                                class=\"mr-2\"\n                              >\n                                <path\n                                  d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"\n                                ></path>\n                                <polyline points=\"15 3 21 3 21 9\"></polyline>\n                                <line\n                                  x1=\"10\"\n                                  y1=\"14\"\n                                  x2=\"21\"\n                                  y2=\"3\"\n                                ></line></svg\n                              >{{ btn[\"text\"] }}</span\n                            >\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"modal-footer\" v-if=\"isEditTemplate\">\n                  <div class=\"dash-modal\">\n                    <div class=\"btn-wrap text-right mt-0 py-0 border-top-0\">\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-link\"\n                        style=\"border-radius: 0\"\n                        data-dismiss=\"modal\"\n                        @click=\"edit_template_details\"\n                      >\n                        {{tlt('cancel_btn')}}\n                      </button>\n                      <button\n                        type=\"submit\"\n                        class=\"darkblue-btn\"\n                        id=\"res_n_int_save\"\n                        @click=\"edit_template()\"\n                      >\n                        {{tlt('save_btn')}}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-sm-12 d-flex px-0 py-5\" v-else-if=\"search_name == ''\">\n            <h4 class=\"mx-auto\">\n              {{tlt('no_template_added_msg')}}\n            </h4>\n          </div>\n          <div\n            class=\"col-sm-12 d-flex px-0 py-5\"\n            v-else-if=\"templatelist.length == 0 && search_name != ''\"\n          >\n            <h4 class=\"mx-auto\">{{tlt('no_template_found_msg')}}</h4>\n          </div>\n          <div\n            class=\"pagin-table pb-3\"\n            v-if=\"templatelist.length > 0\"\n            style=\"margin-top: 2%\"\n          >\n            <nav aria-label=\"Page navigation example\">\n              <ul class=\"pagination justify-content-center\">\n                <li class=\"page-item\">\n                  <a\n                    class=\"page-link\"\n                    href=\"#\"\n                    @click=\"page_require(page_no - 1)\"\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"8.667\"\n                      height=\"15.204\"\n                      viewBox=\"0 0 8.667 15.204\"\n                    >\n                      <g\n                        id=\"arrow-point-to-left\"\n                        transform=\"translate(105.806 15.204) rotate(180)\"\n                      >\n                        <path\n                          id=\"Path_1136\"\n                          data-name=\"Path 1136\"\n                          d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                          transform=\"translate(0 0)\"\n                          fill=\"#9499ae\"\n                        />\n                      </g>\n                    </svg>\n                  </a>\n                </li>\n                <li\n                  :class=\"'page-item ' + pagination_class(pageno)\"\n                  v-for=\"pageno in page_array\"\n                  :key=\"pageno\"\n                >\n                  <a\n                    v-if=\"pageno == '...s' || pageno == '...l'\"\n                    class=\"page-link\"\n                    href=\"#\"\n                    @click=\"page_require(pageno)\"\n                    >...</a\n                  >\n                  <a\n                    v-if=\"pageno != '...s' && pageno != '...l'\"\n                    class=\"page-link\"\n                    href=\"#\"\n                    @click=\"page_require(pageno)\"\n                    >{{ pageno }}</a\n                  >\n                </li>\n                <li class=\"page-item\">\n                  <a\n                    class=\"page-link\"\n                    href=\"#\"\n                    @click=\"page_require(page_no + 1)\"\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"8.667\"\n                      height=\"15.204\"\n                      viewBox=\"0 0 8.667 15.204\"\n                    >\n                      <g\n                        id=\"arrow-point-to-right\"\n                        transform=\"translate(-97.139 0)\"\n                      >\n                        <path\n                          id=\"Path_1136\"\n                          data-name=\"Path 1136\"\n                          d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                          transform=\"translate(0 0)\"\n                          fill=\"#9499ae\"\n                        />\n                      </g>\n                    </svg>\n                  </a>\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      id=\"addtemplatemodel\"\n      class=\"modal fade dash-modal\"\n      role=\"dialog\"\n      data-backdrop=\"static\"\n      data-keyboard=\"false\"\n    >\n      <div class=\"modal-dialog modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/msg-blue.png\" alt />\n              </div>\n              <h3>{{tlt('add_template_header')}}</h3>\n              <button\n                type=\"button\"\n                class=\"close\"\n                @click=\"empty_variable\"\n                data-dismiss=\"modal\"\n              >\n                <img src=\"/img/close-icn.png\" alt />\n              </button>\n            </div>\n            <div class=\"form-group\">\n              <h5 class=\"heading\">{{tlt('template_name_label')}}</h5>\n              <div class=\"ml-3\">\n                <input\n                  id=\"template_name_add_id\"\n                  type=\"text\"\n                  v-model.trim=\"template_name\"\n                  v-on:keyup=\"validate_template_name\"\n                  class=\"form-control\"\n                  placeholder=\"Enter Template Name\"\n                />\n                <span v-show=\"template_name_already_exist\" style=\"color: red\"\n                  >{{tlt('template_name_exist_msg')}}</span\n                >\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <h5 class=\"heading\">{{tlt('promotional_template_label')}}</h5>\n              <div class=\"container\">\n                <div class=\"row\">\n                  <div\n                    class=\"col-3 radio my-auto\"\n                    v-for=\"(template, index) in default_templatelist\"\n                    :key=\"index\"\n                  >\n                    <label>\n                      <input\n                        v-model=\"choosen_template\"\n                        type=\"radio\"\n                        id=\"template_radio_id\"\n                        :value=\"template\"\n                        required\n                      />\n                      <span class=\"icn\" id=\"template_radio_icon_id\"></span>\n                      {{ template.template_name }}\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div v-if=\"choosen_template != null\">\n              <div class=\"form-group\">\n                <div class=\"col-sm-12 p-0 d-flex\">\n                  <div v-if=\"Boolean(choosen_template)\" class=\"col-sm-7 p-0 pr-3\">\n                    <h5 class=\"heading mb-2\">{{tlt('template_variable_label')}}</h5>\n                    <!-- <div v-for=\"(variable, index) in choosen_template.variable_list\" :key=\"index\"> -->\n                    <div\n                      v-if=\"Boolean(choosen_template.variable_dict['HEADER'])\"\n                    >\n                      <p class=\"template-input-title\">\n                        {{\n                          choosen_template.variable_dict[\"HEADER\"]\n                            .component_name\n                        }}\n                      </p>\n                      <input\n                        :placeholder=\"\n                          choosen_template.variable_dict['HEADER'].type ==\n                          'IMAGE'\n                            ? 'Enter Image URL'\n                            : 'Enter Header Text'\n                        \"\n                        class=\"form-control\"\n                        type=\"text\"\n                        v-model=\"choosen_template.variable_dict['HEADER'].url\"\n                      />\n                    </div>\n                    <div v-if=\"Boolean(choosen_template.variable_dict['BODY'])\">\n                      <div\n                        v-for=\"(body_var, name, itr) in choosen_template\n                          .variable_dict['BODY'].variables\"\n                        :key=\"itr\"\n                      >\n                        <p class=\"template-input-title\">\n                          {{\n                            choosen_template.variable_dict[\"BODY\"]\n                              .component_name\n                          }}\n                          : {{ name }}\n                        </p>\n                        <input\n                          placeholder=\"Enter Body Text\"\n                          class=\"form-control\"\n                          type=\"text\"\n                          v-model=\"\n                            choosen_template.variable_dict['BODY'].variables[\n                              name\n                            ]\n                          \"\n                        />\n                      </div>\n                    </div>\n                    <div\n                      v-if=\"Boolean(choosen_template.variable_dict['BUTTONS'])\"\n                    >\n                      <div\n                        v-for=\"(btn, name, itr) in choosen_template\n                          .variable_dict['BUTTONS'].buttons_list\"\n                        :key=\"itr\"\n                      >\n                        <div v-if=\"btn.type == 'URL'\">\n                          <p class=\"template-input-title\">\n                            {{\n                              choosen_template.variable_dict[\"BUTTONS\"]\n                                .component_name\n                            }}\n                            : {1}\n                          </p>\n                          <div class=\"input-group mb-3\">\n                            <div class=\"input-group-prepend\">\n                              <span\n                                class=\"input-group-text\"\n                                id=\"basic-addon3\"\n                                >{{ btn.base_url }}</span\n                              >\n                            </div>\n                            <input\n                              type=\"text\"\n                              class=\"form-control\"\n                              v-model=\"btn.variables['1']\"\n                              placeholder=\"Enter URL path\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <!-- </div> -->\n                  </div>\n                  <div class=\"col-sm-5 p-0 pl-3\">\n                    <h5 class=\"sub_heading mb-4\">{{tlt('preview_label')}}</h5>\n                    <div v-if=\"Boolean(preview_template_data)\">\n                      <div class=\"cards\">\n                        <!-- <div\n                        v-for=\"(comp, name, index) in preview_template_data\"\n                        :key=\"index\"\n                      > -->\n                        <div v-if=\"Boolean(preview_template_data['HEADER'])\">\n                          <div\n                            v-if=\"\n                              preview_template_data['HEADER'].type == 'IMAGE'\n                            \"\n                          >\n                            <img\n                              :src=\"preview_template_data['HEADER'].body\"\n                              width=\"100%\"\n                            />\n                          </div>\n                          <div v-else>\n                            <p>{{ preview_template_data[\"HEADER\"].body }}</p>\n                          </div>\n                        </div>\n                        <div\n                          class=\"mt-4\"\n                          v-if=\"Boolean(preview_template_data['BODY'])\"\n                        >\n                          <label\n                            v-if=\"preview_template_data['BODY'].type == 'text'\"\n                            style=\"line-height: 1.5\"\n                          >\n                            {{ preview_template_data[\"BODY\"].body }}\n                          </label>\n                        </div>\n                        <div v-if=\"Boolean(preview_template_data['FOOTER'])\">\n                          <span\n                            v-if=\"\n                              preview_template_data['FOOTER'].type == 'text'\n                            \"\n                            style=\"\n                              font-size: 10px;\n                              line-height: 1.5;\n                              font-weight: 300;\n                            \"\n                          >\n                            {{ preview_template_data[\"FOOTER\"].body }}\n                          </span>\n                        </div>\n                        <!-- </div> -->\n                      </div>\n                      <div v-if=\"Boolean(preview_template_data['BUTTON'])\">\n                        <div\n                          v-for=\"(btn, index1) in preview_template_data[\n                            'BUTTON'\n                          ].body\"\n                          :key=\"index1\"\n                        >\n                          <div\n                            v-if=\"btn['type'] === 'QUICK_REPLY'\"\n                            class=\"preview-button-div\"\n                          >\n                            <button\n                              color=\"rgba(11,103,170,1)\"\n                              class=\"btn preview-button\"\n                            >\n                              <span color=\"rgba(11,103,170,1)\" class=\"\"\n                                >{{ btn[\"text\"] }}\n                              </span>\n                            </button>\n                          </div>\n                          <div\n                            v-else-if=\"btn['type'] === 'URL'\"\n                            class=\"preview-button-div\"\n                          >\n                            <a\n                              :href=\"btn.url\"\n                              target=\"_blank\"\n                              class=\"btn preview-button\"\n                            >\n                              <span color=\"#0b67aa\" class=\"\"\n                                ><svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  width=\"17\"\n                                  height=\"17\"\n                                  viewBox=\"0 0 24 24\"\n                                  fill=\"none\"\n                                  stroke=\"#0b67aa\"\n                                  stroke-width=\"2\"\n                                  stroke-linecap=\"round\"\n                                  stroke-linejoin=\"round\"\n                                  class=\"mr-2\"\n                                >\n                                  <path\n                                    d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"\n                                  ></path>\n                                  <polyline points=\"15 3 21 3 21 9\"></polyline>\n                                  <line\n                                    x1=\"10\"\n                                    y1=\"14\"\n                                    x2=\"21\"\n                                    y2=\"3\"\n                                  ></line></svg\n                                >{{ btn[\"text\"] }}</span\n                              >\n                            </a>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <div class=\"btn-wrap text-right mt-0 py-0 border-top-0\">\n              <button\n                type=\"button\"\n                class=\"btn btn-link\"\n                data-dismiss=\"modal\"\n                @click=\"empty_variable()\"\n              >\n                {{tlt('cancel_btn')}}\n              </button>\n              <button\n                type=\"submit\"\n                class=\"darkblue-btn\"\n                id=\"res_n_int_save\"\n                @click=\"save_template()\"\n              >\n                {{tlt('save_btn')}}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      id=\"sendtemplate\"\n      class=\"modal fade dash-modal\"\n      role=\"dialog\"\n      data-backdrop=\"static\"\n      data-keyboard=\"false\"\n    >\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/msg-blue.png\" alt />\n              </div>\n              <h3>{{tlt('send_template_header')}}</h3>\n              <button\n                type=\"button\"\n                class=\"close\"\n                @click=\"empty_variable\"\n                data-dismiss=\"modal\"\n              >\n                <img src=\"/img/close-icn.png\" alt />\n              </button>\n            </div>\n            <div class=\"form-group\">\n              <h5>\n                <p class=\"mt-2 mb-0\" style=\"color: #414141\">{{tlt('template_name_label')}}</p>\n              </h5>\n              <div style=\"padding-left: 20px\">\n                <p>{{ current_template.template_name }}</p>\n              </div>\n            </div>\n            <div class=\"form-group m-0\">\n              <div class=\"d-flex\">\n                <h5>\n                  <p class=\"mb-0\" style=\"color: #414141\">{{tlt('send_template_label')}}</p>\n                </h5>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label>\n                {{tlt('add_new_customer_text')}}\n              </label>\n              <div class=\"d-flex mb-3\">\n                <vue-phone-number-input\n                  v-model=\"add_customer_contact_number\"\n                  :only-countries=\"cont\"\n                  default-country-code=\"IN\"\n                  @update=\"phoneNumber = $event\"\n                >\n                </vue-phone-number-input>\n                <button\n                  id=\"alternate_product_name_add_btn\"\n                  class=\"darkblue-btn ml-2\"\n                  @click=\"add_customer\"\n                >\n                  {{tlt('add_btn')}}\n                </button>\n              </div>\n              <div id=\"list_id\">\n                <multiselect\n                  v-model=\"specific_contact_list\"\n                  :options=\"contacts_list\"\n                  id=\"specific_contact_list_id\"\n                  :searchable=\"true\"\n                  @search-change=\"search_customer_list\"\n                  :hide-selected=\"true\"\n                  :close-on-select=\"false\"\n                  :multiple=\"true\"\n                  :taggable=\"true\"\n                  tag-position=\"top\"\n                  tag-placeholder=\"Add this as new number\"\n                  placeholder=\"Search customer number\"\n                  :max-height=\"400\"\n                  label=\"profile_name\"\n                  track-by=\"whatsapp_phone_number\"\n                  open-direction=\"below\"\n                >\n                  <!-- <span>{{ selected_role }}</span> -->\n                </multiselect>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <h5>\n                <p class=\"mt-2 mb-0\" style=\"color: #414141\">\n                  {{tlt('template_preview_label')}}\n                </p>\n              </h5>\n              <div v-if=\"Boolean(preview_template_data)\">\n                <div class=\"cards\" style=\"width: 50%; margin: 0px auto\">\n                  <!-- <div\n                  v-for=\"(comp, name, index) in preview_template_data\"\n                  :key=\"index\"\n                > -->\n                  <div v-if=\"Boolean(preview_template_data['HEADER'])\">\n                    <div v-if=\"preview_template_data['HEADER'].type == 'IMAGE'\">\n                      <img\n                        :src=\"preview_template_data['HEADER'].body\"\n                        width=\"100%\"\n                      />\n                    </div>\n                    <div v-else>\n                      <p>{{ preview_template_data[\"HEADER\"].body }}</p>\n                    </div>\n                  </div>\n                  <div\n                    class=\"mt-4\"\n                    v-if=\"Boolean(preview_template_data['BODY'])\"\n                  >\n                    <label\n                      v-if=\"preview_template_data['BODY'].type == 'text'\"\n                      style=\"line-height: 1.5\"\n                    >\n                      {{ preview_template_data[\"BODY\"].body }}\n                    </label>\n                  </div>\n                  <div v-if=\"Boolean(preview_template_data['FOOTER'])\">\n                    <span\n                      v-if=\"preview_template_data['FOOTER'].type == 'text'\"\n                      style=\"\n                        font-size: 10px;\n                        line-height: 1.5;\n                        font-weight: 300;\n                      \"\n                    >\n                      {{ preview_template_data[\"FOOTER\"].body }}\n                    </span>\n                  </div>\n                  <!-- </div> -->\n                </div>\n                <div v-if=\"Boolean(preview_template_data['BUTTON'])\">\n                  <div\n                    v-for=\"(btn, index1) in preview_template_data['BUTTON']\n                      .body\"\n                    :key=\"index1\"\n                  >\n                    <div\n                      v-if=\"btn['type'] === 'QUICK_REPLY'\"\n                      class=\"preview-button-div\"\n                      style=\"width: 50%; margin: 0px auto\"\n                    >\n                      <button\n                        color=\"rgba(11,103,170,1)\"\n                        class=\"btn preview-button\"\n                      >\n                        <span color=\"rgba(11,103,170,1)\" class=\"\"\n                          >{{ btn[\"text\"] }}\n                        </span>\n                      </button>\n                    </div>\n                    <div\n                      v-else-if=\"btn['type'] === 'URL'\"\n                      class=\"preview-button-div\"\n                      style=\"width: 50%; margin: 0px auto\"\n                    >\n                      <a\n                        :href=\"btn.url\"\n                        target=\"_blank\"\n                        class=\"btn preview-button\"\n                      >\n                        <span color=\"#0b67aa\" class=\"\"\n                          ><svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"17\"\n                            height=\"17\"\n                            viewBox=\"0 0 24 24\"\n                            fill=\"none\"\n                            stroke=\"#0b67aa\"\n                            stroke-width=\"2\"\n                            stroke-linecap=\"round\"\n                            stroke-linejoin=\"round\"\n                            class=\"mr-2\"\n                          >\n                            <path\n                              d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"\n                            ></path>\n                            <polyline points=\"15 3 21 3 21 9\"></polyline>\n                            <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line></svg\n                          >{{ btn[\"text\"] }}</span\n                        >\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <div class=\"btn-wrap text-right mt-0 py-0 border-top-0\">\n              <button\n                type=\"button\"\n                class=\"btn btn-link\"\n                data-dismiss=\"modal\"\n                @click=\"empty_variable\"\n              >\n                {{tlt('cancel_btn')}}\n              </button>\n              <button\n                type=\"submit\"\n                class=\"darkblue-btn\"\n                id=\"res_n_int_save\"\n                @click=\"send_template()\"\n              >\n                {{tlt('send_btn')}}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"modal fade\"\n      id=\"checkbalance\"\n      role=\"dialog\"\n      aria-labelledby=\"checkbalance\"\n      aria-hidden=\"true\"\n    >\n      <div\n        class=\"modal-dialog modal-dialog-centered modal\"\n        role=\"document\"\n        style=\"max-width: 600px !important\"\n      >\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <!-- <i style='font-size:24px; padding-right: 10px; padding-top: 3px;' class='far'>&#xf27a;</i> -->\n            <h5 class=\"modal-title\">{{tlt('add_on_balance')}}</h5>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div></div>\n            <p v-show=\"credits_balance != null\" v-html=\"credits_balance\">\n              &nbsp; &nbsp;\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\nimport { freeze_portal, show_subscription_expired_swal } from \"@/portal/mixins\";\nimport Multiselect from \"vue-multiselect\";\nimport VuePhoneNumberInput from \"vue-phone-number-input\";\nimport \"vue-phone-number-input/dist/vue-phone-number-input.css\";\n\nexport default {\n  name: \"WhatsappTemplatePage\",\n  components: {\n    VueEditor,\n    Multiselect,\n    VuePhoneNumberInput,\n  },\n  mixins: [freeze_portal, show_subscription_expired_swal],\n  data() {\n    return {\n      cont: [\"IN\"],\n      pencil_svg:\n        ' <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.546\" height=\"15.461\" viewBox=\"0 0 15.546 15.461\"><defs><style>.a{fill:#9e9e9e;}</style></defs><g transform=\"translate(-747.888 -356.769)\"><path class=\"a\" d=\"M759.416,356.769a2.358,2.358,0,0,1,1.777.662c.534.513,1.072,1.025,1.567,1.575a2.3,2.3,0,0,1-.071,3.325c-2.736,2.76-5.494,5.5-8.238,8.251a1.381,1.381,0,0,1-.758.288c-.719.174-1.429.379-2.144.572-.932.251-1.862.5-2.795.751-.6.158-.989-.213-.832-.807q.689-2.595,1.406-5.182a1.164,1.164,0,0,1,.289-.487q4.091-4.107,8.2-8.2A2.265,2.265,0,0,1,759.416,356.769Zm-1.989,2.956-6.54,6.538,3.025,3.024,6.538-6.537Zm4.023,2.165c.118-.135.225-.269.343-.392a1.134,1.134,0,0,0,0-1.734c-.46-.466-.926-.925-1.388-1.39a1.166,1.166,0,0,0-.861-.368c-.578,0-.881.4-1.214.76Zm-12.084,8.863,3.2-.863-2.337-2.331Z\" transform=\"translate(0)\"/><path class=\"a\" d=\"M813.942,422.6l-.789-.8,3.821-3.819.784.8Z\" transform=\"translate(-59.648 -55.947)\"/></g></svg>',\n      company_id: this.$session.get(\"UserInformation\").company_id,\n      company_name: this.$session.get(\"UserInformation\").company_name,\n      spinnerOn: false,\n      template_name: \"\",\n      save_subject: \"\",\n      is_publish_template: true,\n      verification_status: null,\n      default_templatelist: [],\n      templatelist: [],\n      checked_list: [],\n      current_template: [],\n      old_template_name: \"\",\n      isEditTemplate: false,\n      number_of_rows: null,\n      total_pages: null,\n      page_no: 1,\n      per_page: 10,\n      preview_template_data: null,\n      preview_template_data1: {\n        HEADER: {\n          type: \"IMAGE\",\n          body: \"https://storage.cense.ai/codearray/cense_website_static_assets/retail/AvailableDiscounts.svg\",\n        },\n        BODY: {\n          type: \"text\",\n          body: \"Hello WOrld\",\n        },\n        FOOTER: {\n          type: \"text\",\n          body: \"World, hello !\",\n        },\n        BUTTON: {\n          body: [\n            {\n              type: \"URL\",\n              label: \"Know more\",\n              body: \"https://test.com\",\n            },\n            {\n              type: \"URL\",\n              label: \"Know more\",\n              body: \"https://test.com\",\n            },\n          ],\n        },\n      },\n      template_name_already_exist: false,\n      edit_template_name_already_exist: false,\n      page_array: [],\n      send_template_all_customer: true,\n      contacts_list: [],\n      contacts_list_pagination: 1,\n      contacts_list_pagination_count: 0,\n      search_customer: \"\",\n      specific_contact_list: [],\n      disable_btn_expired: false,\n      choosen_template: null,\n      isVisibleSearchClear: false,\n      search_name: \"\",\n      add_customer_contact_number: null,\n      add_customer_name: null,\n      phoneNumber: null,\n      credits_balance: null,\n    };\n  },\n  props: {\n    is_notification_template: Boolean,\n  },\n  created() {\n    if (this.$session.get(\"UserInformation\").role == \"SuperAdmin\") {\n      this.companyid = this.$session.get(\"CompanyId\");\n      this.companyname = this.$session.get(\"CompanyName\");\n    } else {\n      this.companyid = this.$session.get(\"UserInformation\").company_id;\n      this.companyname = this.$session.get(\"UserInformation\").company_name;\n    }\n  },\n  watch: {\n    search_name() {\n      if (this.search_name === \"\") {\n        this.load_templates();\n        this.isVisibleSearchClear = false;\n      } else if (this.search_name !== \"\") {\n        this.isVisibleSearchClear = true;\n      }\n    },\n    choosen_template: {\n      handler(val, oldVal) {\n        if (this.choosen_template != null) {\n          this.preview_template(\"new\");\n        }\n      },\n      deep: true,\n    },\n    current_template: {\n      handler(val, oldVal) {\n        if (this.current_template.length != 0) {\n          this.preview_template(\"old\");\n        }\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    setTimeout(() => {\n      this.freeze_portal();\n    }, 2000);\n    this.load_templates();\n    if (this.is_notification_template === false) {\n      this.load_customer_list();\n    }\n    var vm = this;\n    $(\"#selectall\").click(function () {\n      this.isEditTemplate = false;\n      if ($(this).is(\":checked\")) {\n        $(\"input:checkbox\").prop(\"checked\", true);\n      } else {\n        vm.checked_list = [];\n        $(\"input:checkbox\").prop(\"checked\", false);\n      }\n    });\n\n    // const myDiv = document.querySelector('.multiselect')\n    // const myDiv1 = document.querySelector('.multiselect__content-wrapper')\n    // const myDiv2 = document.querySelector('.multiselect__content')\n    // const myDiv3 = document.querySelector('#specific_contact_list_id')\n    // console.log(\"myDiv\",myDiv);\n    // console.log(\"myDiv1\",myDiv1);\n    // console.log(\"myDiv2\",myDiv2);\n    // console.log(\"myDiv3\",myDiv3);\n\n    // myDiv.addEventListener('scroll', function() {\n    //     console.log('scrolled to bottom')\n    //   if (myDiv.offsetHeight + myDiv.scrollTop >= myDiv.scrollHeight) {\n    //     console.log('scrolled to bottom')\n    //   }\n    // })\n    // myDiv1.addEventListener('scroll', function() {\n    //     console.log('scrolled to bottom1111')  ;\n    //   if (myDiv.offsetHeight + myDiv.scrollTop >= myDiv.scrollHeight) {\n    //     console.log('scrolled to bottom')\n    //   }\n    // })\n    // myDiv2.addEventListener('scroll', function() {\n    //     console.log('scrolled to bottom222')  ;\n    //   if (myDiv.offsetHeight + myDiv.scrollTop >= myDiv.scrollHeight) {\n    //     console.log('scrolled to bottom')\n    //   }\n    // })\n    // myDiv3.addEventListener('scroll', function() {\n    //     console.log('scrolled to bottom3333');\n    //   if (myDiv.offsetHeight + myDiv.scrollTop >= myDiv.scrollHeight) {\n    //     console.log('scrolled to bottom')\n    //   }\n    // })\n    const el = document.querySelector(\"#list_id\");\n    el.onwheel = this.handleWheel;\n  },\n  methods: {\n    handleWheel(event, data, func) {\n      if (event.deltaY < 0) {\n        // data += 1;\n      } else {\n        console.log(\"coming here down\");\n        this.contacts_list_pagination += 1;\n        if(this.contacts_list_pagination < this.contacts_list_pagination_count) {\n          this.load_customer_list();\n        }else if(this.search_customer != \"\") {\n          this.search_customer_list();\n        }\n        // data -= 1;\n      }\n    },\n    add_customer() {\n      if (this.phoneNumber.isValid == true) {\n        this.contacts_list.push({\n          whatsapp_phone_number: this.phoneNumber.formattedNumber,\n        });\n        this.specific_contact_list.push({\n          phone: this.phoneNumber.formattedNumber,\n        });\n      } else {\n        Swal({\n          text: this.tlt(''),\n          toast: true,\n          position: \"top-end\",\n          type: \"warning\",\n          showConfirmButton: false,\n          timer: 2500,\n        });\n      }\n    },\n    check_addons_balance() {\n      axios\n        .post(\n          api_calls.check_addons_balance(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            check_balance: true,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          var template_count = response.data.credits.sms_count;\n          this.credits_balance =\n            this.tlt('current_sms_credit_text') +\" <strong>\"+ this.tlt('current_sms_credit_text') +\" :\" +\n            sms_count.us +\n            \" |\"+ this.tlt('current_sms_credit_text2')+\": \" +\n            sms_count.non_us +\n            \"</strong>\";\n          $(\"#checkbalance\").modal(\"show\");\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    clear_search_name() {\n      this.search_name = \"\";\n    },\n    callsearch() {\n      if (this.search_name != \"\") {\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.whatsapp_template(),\n            {\n              company_id: this.company_id,\n              company_name: this.company_name,\n              is_search: true,\n              page_no: 1,\n              per_page: this.per_page,\n              is_notification: this.is_notification_template,\n              search_key: this.search_name,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            this.templatelist = [];\n            if (response.data.message === \"No Whatsapp Template in database\") {\n              this.templatelist = [];\n              return;\n            } else if (response.data.templates != null) {\n              this.templatelist = response.data.templates;\n              if (this.templatelist.length > 0) {\n                this.show_template(0);\n              }\n              this.number_of_rows = response.data.page_count;\n              this.total_pages = Math.ceil(this.number_of_rows / this.per_page);\n              this.setpagination(1);\n            } else if (response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('current_sms_credit_text3'),\n                timer: 2500,\n              });\n            } else {\n              Swal({\n                type: \"error\",\n                text: this.tlt('current_sms_credit_text4'),\n                timer: 2500,\n              });\n            }\n            this.isEditTemplate = false;\n          })\n          .catch((e) => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    save_template() {\n      if (this.template_name == \"\") {\n        Swal({\n          text: this.tlt('template_name_msg'),\n          toast: true,\n          position: \"top-end\",\n          type: \"warning\",\n          showConfirmButton: false,\n          timer: 2500,\n        });\n        return;\n      }\n      if (this.choosen_template != null) {\n        var check = false;\n        for (var i in this.choosen_template.variable_list) {\n          if (this.choosen_template.variable_list[i] == \"\") {\n            check = true;\n          }\n        }\n        if (check) {\n          Swal({\n            text: this.tlt('variable_value_msg'),\n            toast: true,\n            position: \"top-end\",\n            type: \"warning\",\n            showConfirmButton: false,\n            timer: 2500,\n          });\n          return;\n        }\n      }\n      if (this.template_name_already_exist == true) {\n        return;\n      }\n      var template_details = {\n        template_name: this.template_name,\n        parent_template_id: this.choosen_template.template_id,\n        variable_dict: this.choosen_template.variable_dict,\n      };\n      // return;\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            is_save: true,\n            is_notification: this.is_notification_template,\n            template_details: template_details,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          if (response.data.message == \"Query Executed Successfully\") {\n            $(\"#addtemplatemodel\").modal(\"hide\");\n            Swal({\n              type: \"success\",\n              text: this.tlt('template_data_added'),\n              timer: 2500,\n            }).then((result) => {\n              this.empty_variable();\n              this.load_templates();\n            });\n          } else if (\n            response.data.message == \"Parent Template not found in database\"\n          ) {\n            Swal({\n              type: \"error\",\n              text: this.tlt('parent_template_not_found'),\n              timer: 2500,\n            });\n          } else if (response.data.message == \"DB OPERATION UNSUCCESSFUL\") {\n            Swal({\n              type: \"error\",\n              text: this.tlt('db_operation_unsuccess'),\n              timer: 2500,\n            });\n          } else if (\n            response.data.message == \"Template details missing in request body\"\n          ) {\n            Swal({\n              type: \"warning\",\n              text: this.tlt('template_detail_missing'),\n              timer: 2500,\n            });\n          } else if(response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n          } else {\n            Swal({\n              text: this.tlt('some_error_msg'),\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 2500,\n            });\n          }\n          this.isEditTemplate = false;\n        })\n        .catch((e) => {\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    edit_template_details() {\n      if (!this.isEditTemplate) {\n        this.isEditTemplate = true;\n      } else {\n        this.isEditTemplate = false;\n        this.load_templates();\n        this.edit_template_name_already_exist = false;\n      }\n    },\n    edit_template() {\n      if (this.current_template.template_name == \"\") {\n        Swal({\n          text: this.tlt('edit_template_name_blank'),\n          toast: true,\n          position: \"top-end\",\n          type: \"warning\",\n          showConfirmButton: false,\n          timer: 2500,\n        });\n        return;\n      }\n      if (this.current_template != null) {\n        var check = false;\n        for (var i in this.current_template.variable_dict) {\n          if (this.current_template.variable_dict[i] == \"\") {\n            check = true;\n          }\n        }\n        if (check) {\n          Swal({\n            text: this.tlt('edit_template_value_empty_msg'),\n            toast: true,\n            position: \"top-end\",\n            type: \"warning\",\n            showConfirmButton: false,\n            timer: 2500,\n          });\n          return;\n        }\n      }\n      if (this.edit_template_name_already_exist == true) {\n        return;\n      }\n      this.spinnerOn = true;\n      var template_details = {\n        template_name: this.current_template.template_name,\n        template_id: this.current_template.template_id,\n        variable_dict: this.current_template.variable_dict,\n      };\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            template_details: template_details,\n            is_edit: true,\n            is_notification: this.is_notification_template,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          if (response.data.message == \"Query Executed Successfully\") {\n            $(\"#addtemplatemodel\").modal(\"hide\");\n            Swal({\n              type: \"success\",\n              text: this.tlt('edit_template_data_edited'),\n              timer: 2500,\n            }).then((result) => {\n              this.empty_variable();\n              this.load_templates();\n            });\n          } else if (response.data.message == \"DB OPERATION UNSUCCESSFUL\") {\n            Swal({\n              type: \"error\",\n              text: this.tlt('edit_template_operation_unsuccessful'),\n              timer: 2500,\n            });\n          } else if (\n            response.data.message == \"Selected template not found in database\"\n          ) {\n            Swal({\n              type: \"error\",\n              text: this.tlt('edit_template_selected_template'),\n              timer: 2500,\n            });\n          } else if (\n            response.data.message == \"Template details missing in request body\"\n          ) {\n            Swal({\n              type: \"error\",\n              text: this.tlt('edit_template_detail_missing'),\n              timer: 2500,\n            });\n          } else if(response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n          } else {\n            Swal({\n              text: this.tlt('some_error_msg'),\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 2500,\n            });\n          }\n          this.isEditTemplate = false;\n        })\n        .catch((e) => {\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    load_customer_list() {\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            get_contacts_list: true,\n            per_page: 5,\n            page_no: this.contacts_list_pagination,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          console.log(response);\n          if (response.data.status == \"Success\") {\n            for(var i in response.data.contacts_list) {\n              this.contacts_list.push(response.data.contacts_list[i]);\n            }\n            this.contacts_list_pagination_count = response.data.count;\n          } else if (response.data.message == \"No customer data available\") {\n            this.contacts_list = [];\n          } else if(response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n          } else {\n            Swal({\n              text: this.tlt('some_error_msg'),\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    search_customer_list(query) {\n      if (query != \"\") {\n        this.spinnerOn = true;\n        axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            get_contacts_list: true,\n            search_key: query,\n            per_page: 5,\n            page_no: 1,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          this.contacts_list = [];\n          console.log(\"Customer search\", response);\n          if (response.data.status == \"Success\") {\n            for(var i in response.data.contacts_list) {\n              this.contacts_list.push(response.data.contacts_list[i]);\n            }\n            this.contacts_list_pagination_count = response.data.count;\n          } else if (response.data.message == \"No customer data available\") {\n            this.contacts_list = [];\n          } else if (response.data.message === \"Internal Server Error\") {\n            Swal({\n              type: \"error\",\n              text: \"Internal Server Error\",\n              timer: 2500,\n            });\n          } else {\n            Swal({\n              text: \"Some error occured\",\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      } else {\n        this.contacts_list_pagination = 1;\n        this.contacts_list = [];\n        this.load_customer_list();\n      }\n    },\n    send_template() {\n      var list = [];\n      if (this.specific_contact_list.length != 0) {\n        for (var i in this.specific_contact_list) {\n          list.push(this.specific_contact_list[i].whatsapp_phone_number);\n        }\n      } else {\n        Swal({\n          title: this.tlt('send_template_select_contact'),\n          type: \"warning\",\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        return;\n      }\n      if (!this.disable_btn_expired) {\n        axios\n          .post(\n            api_calls.whatsapp_template(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              subscription: this.$session.get(\"UserInformation\").subscription,\n              is_notification: this.is_notification_template,\n              template_id: this.current_template.template_id,\n              contacts_list: list,\n              publish_template: true,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            if (response.data.message == \"Selected template not found in db\") {\n              Swal({\n                title: this.tlt('send_template_insufficient'),\n                text: this.tlt('send_template_no_credits_left'),\n                type: \"warning\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n            } else if (\n              response.data.message == \"No credits left for template to non us\"\n            ) {\n              Swal({\n                title: this.tlt('send_template_insufficient'),\n                text: this.tlt('send_template_no_credits_left'),\n                type: \"warning\",\n                showConfirmButton: false,\n                timer: 4000,\n              });\n            } else if (response.data.message == \"template is being sent\") {\n              Swal({\n                title: this.tlt('send_template_sent_msg'),\n                type: \"success\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n              this.empty_variable();\n              $(\"#sendtemplate\").modal(\"hide\");\n            } else if (\n              response.data.message == \"No credits left to send template\"\n            ) {\n              Swal({\n                title: this.tlt('send_template_insufficient'),\n                text: this.tlt('send_template_no_credits_left'),\n                type: \"warning\",\n                showConfirmButton: false,\n                timer: 4000,\n              });\n            } else if (response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n            } else {\n              Swal({\n                text: this.tlt('some_error_msg'),\n                type: \"error\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n            }\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        this.show_subscription_expired_swal();\n      }\n    },\n    validate_template_name() {\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            is_template_name_exists: true,\n            is_notification: this.is_notification_template,\n            template_name: this.template_name,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          if (\n            response.data.message == \"Whatsapp Template Name does not exists\"\n          ) {\n            this.template_name_already_exist = false;\n            document.getElementById(\"template_name_add_id\").style.border = null;\n            if (this.template_name != \"\") {\n              // document.getElementById(\"template_name_add_id\").style.border =\n              // \"1px solid green\";\n            }\n          } else if (\n            response.data.message == \"Whatsapp Template Name Already Exists\"\n          ) {\n            this.template_name_already_exist = true;\n            document.getElementById(\"template_name_add_id\").style.border =\n              \"1px solid red\";\n          } else if(response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n          } else {\n            Swal({\n              text: this.tlt('some_error_msg'),\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    validate_edit_template_name() {\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            subscription: this.$session.get(\"UserInformation\").subscription,\n            is_template_name_exists: true,\n            is_notification: this.is_notification_template,\n            template_name: this.current_template.template_name,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          if (\n            response.data.message == \"Whatsapp Template Name does not exists\"\n          ) {\n            this.edit_template_name_already_exist = false;\n            document.getElementById(\"edit_template_name_id\").style.border =\n              null;\n            if (this.current_template.template_name != \"\") {\n              // document.getElementById(\"edit_template_name_id\").style.border =\n              // \"1px solid #00f000\";\n            }\n          } else if (\n            response.data.message == \"Whatsapp Template Name Already Exists\"\n          ) {\n            if (this.old_template_name == this.current_template.template_name) {\n              this.edit_template_name_already_exist = false;\n              document.getElementById(\"edit_template_name_id\").style.border =\n                null;\n            } else {\n              this.edit_template_name_already_exist = true;\n              document.getElementById(\"edit_template_name_id\").style.border =\n                \"1px solid red\";\n            }\n          } else if(response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n          } else {\n            Swal({\n              text: this.tlt('some_error_msg'),\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    preview_template(val) {\n      this.spinnerOn = true;\n      if (val == \"old\") {\n        var template_id = this.current_template.template_id;\n        var variable_dict = this.current_template.variable_dict;\n        var is_parent_template = false;\n      } else if (val == \"new\") {\n        var template_id = this.choosen_template.template_id;\n        var variable_dict = this.choosen_template.variable_dict;\n        var is_parent_template = true;\n      }\n      if (template_id != undefined) {\n        axios\n          .post(\n            api_calls.whatsapp_template(),\n            {\n              company_id: this.company_id,\n              company_name: this.company_name,\n              is_notification: this.is_notification_template,\n              is_preview: true,\n              is_parent_template: is_parent_template,\n              template_id: template_id,\n              variable_dict: variable_dict,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            if (response.data.status == \"Success\") {\n              this.preview_template_data = response.data.body;\n              // $(\"#preview_template_visible\").modal(\"show\");\n            } else if (response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n            } else {\n              Swal({\n                text: this.tlt('some_error_msg'),\n                type: \"error\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n            }\n          })\n          .catch((e) => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    send_email_confirm_prompt_text(all_customer) {\n      if (all_customer) {\n        return this.tlt('send_bulk_msg');\n      } else {\n        return this.tlt('email_to_specific_customer');\n      }\n    },\n    selected_templates(value) {\n      if (value == \"all\") {\n        if (event.target.checked) {\n          this.checked_list = [];\n          for (var i in this.templatelist) {\n            this.checked_list.push(this.templatelist[i].template_id);\n          }\n          $(\"input:checkbox\").prop(\"checked\", false);\n          for (let i = 0; i < this.checked_list.length; i++) {\n            $(\"#\" + [i]).prop(\"checked\", true);\n            $(\"#selectall\").prop(\"checked\", true);\n          }\n        } else if (!event.target.checked) {\n          this.checked_list = [];\n          $(\"input:checkbox\").prop(\"checked\", false);\n        }\n      } else {\n        if (event.target.checked) {\n          this.checked_list.push(value);\n        } else if (!event.target.checked) {\n          var selectall = document.querySelector(\"#selectall\");\n          if (selectall.checked) {\n            selectall.checked = false;\n          }\n          var temp = this.checked_list.filter((templates_id) => {\n            return templates_id != value;\n          });\n          this.checked_list = temp;\n        }\n      }\n    },\n    delete_template() {\n      if (this.checked_list.length < 1) {\n        Swal({\n          text: this.tlt('select_one_template'),\n          toast: true,\n          position: \"top-end\",\n          type: \"warning\",\n          showConfirmButton: false,\n          timer: 2500,\n        });\n        return;\n      }\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            is_notification: this.is_notification_template,\n            is_delete: true,\n            template_list: this.checked_list,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          this.empty_variable();\n          this.load_templates();\n          if (response.data != null) {\n            this.checked_list = [];\n            if (response.data.status === \"Success\") {\n              Swal({\n                text: this.tlt('template_deleted_msg'),\n                type: \"success\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n              $(\"input:checkbox\").prop(\"checked\", false);\n              return;\n            } else if (\n              response.data.message === \"Query Executed UnSuccessfully\"\n            ) {\n              Swal({\n                text: this.tlt('query_executed_msg'),\n                type: \"error\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n            } else if (response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n            } else {\n              Swal({\n                text: this.tlt('some_error_msg'),\n                type: \"error\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n              $(\"input:checkbox\").prop(\"checked\", false);\n            }\n            this.isEditTemplate = false;\n          }\n        })\n        .catch((e) => {\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    load_templates() {\n      this.current_template = {};\n      // Get default templates\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            is_notification: this.is_notification_template,\n            is_get_default_templates: true,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          if (response.data != null) {\n            this.default_templatelist = [];\n            if (\n              response.data.status === \"Success\" &&\n              response.data.default_templates != null\n            ) {\n              this.default_templatelist = response.data.default_templates;\n            } else if (\n              response.data.message ===\n              \"No Default Whatsapp Template in database\"\n            ) {\n              this.default_templatelist = [];\n            } else if (response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n            } else {\n              Swal({\n                text: this.tlt('some_error_msg'),\n                type: \"error\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n            }\n            this.isEditTemplate = false;\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n\n      // Get Saved Templates\n      axios\n        .post(\n          api_calls.whatsapp_template(),\n          {\n            company_id: this.company_id,\n            company_name: this.company_name,\n            is_get: true,\n            is_notification: this.is_notification_template,\n            page_no: this.page_no,\n            per_page: this.per_page,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          if (response.data != null) {\n            this.templatelist = [];\n            if (response.data.message === \"No Whatsapp Template in database\") {\n              this.templatelist = [];\n              return;\n            } else if (response.data.templates != null) {\n              this.templatelist = response.data.templates;\n              this.number_of_rows = response.data.page_count;\n              this.total_pages = Math.ceil(this.number_of_rows / this.per_page);\n              if (this.templatelist.length > 0) {\n                this.show_template(0);\n              }\n              this.setpagination(this.page_no);\n            } else if (response.data.message === \"Internal Server Error\") {\n              Swal({\n                type: \"error\",\n                text: this.tlt('internal_server_msg'),\n                timer: 2500,\n              });\n            }\n            this.isEditTemplate = false;\n          } else {\n            console.log(\"coming here\");\n              Swal({\n                text: this.tlt('some_error_msg'),\n                type: \"error\",\n                showConfirmButton: false,\n                timer: 2500,\n              });\n            }\n        })\n        .catch((e) => {\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    page_require(page) {\n      if (page == 0 || page == this.total_pages + 1) {\n      } else {\n        if (this.search_name == \"\") {\n          if (page == \"...s\") {\n            this.page_no = Math.ceil((1 + this.page_no) / 2);\n          } else if (page == \"...l\") {\n            this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n          } else {\n            this.page_no = page;\n          }\n          $(\"input:checkbox\").prop(\"checked\", false);\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.whatsapp_template(),\n              {\n                company_id: this.company_id,\n                company_name: this.company_name,\n                is_get: true,\n                is_notification: this.is_notification_template,\n                page_no: this.page_no,\n                per_page: this.per_page,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.spinnerOn = false;\n              if (response.data != null) {\n                this.templatelist = [];\n                if (\n                  response.data.message === \"No Whatsapp Template in database\"\n                ) {\n                  this.templatelist = [];\n                  return;\n                } else if (response.data.templates != null) {\n                  this.templatelist = response.data.templates;\n                  this.number_of_rows = response.data.page_count;\n                  this.total_pages = Math.ceil(\n                    this.number_of_rows / this.per_page\n                  );\n                  if (this.templatelist.length > 0) {\n                    this.show_template(0);\n                  }\n                  this.setpagination(this.page_no);\n                } else if (response.data.message === \"Internal Server Error\") {\n                  Swal({\n                    type: \"error\",\n                    text: this.tlt('internal_server_msg'),\n                    timer: 2500,\n                  });\n                }\n                this.isEditTemplate = false;\n              } else {\n                Swal({\n                  text: this.tlt('some_error_msg'),\n                  type: \"error\",\n                  showConfirmButton: false,\n                  timer: 2500,\n                });\n              }\n            })\n            .catch((e) => {\n              this.spinnerOn = false;\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        } else {\n          if (page == \"...s\") {\n            this.page_no = Math.ceil((1 + this.page_no) / 2);\n          } else if (page == \"...l\") {\n            this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n          } else {\n            this.page_no = page;\n          }\n          $(\"input:checkbox\").prop(\"checked\", false);\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.whatsapp_template(),\n              {\n                company_id: this.company_id,\n                company_name: this.company_name,\n                is_search: true,\n                page_no: this.page_no,\n                per_page: this.per_page,\n                is_notification: this.is_notification_template,\n                search_key: this.search_name,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.spinnerOn = false;\n              this.templatelist = [];\n              this.isEditTemplate = false;\n              if (\n                response.data.message === \"No Whatsapp Template in database\"\n              ) {\n                this.templatelist = [];\n                return;\n              } else if (response.data.templates != null) {\n                this.templatelist = response.data.templates;\n                if (this.templatelist.length > 0) {\n                  this.show_template(0);\n                }\n                this.number_of_rows = response.data.page_count;\n                this.total_pages = Math.ceil(\n                  this.number_of_rows / this.per_page\n                );\n                this.setpagination(this.page_no);\n              } else if (response.data.message === \"Internal Server Error\") {\n                Swal({\n                  type: \"error\",\n                  text: this.tlt('internal_server_msg'),\n                  timer: 2500,\n                });\n              } else {\n                Swal({\n                  type: \"error\",\n                  text: this.tlt('some_error_msg'),\n                  timer: 2500,\n                });\n              }\n            })\n            .catch((e) => {\n              this.spinnerOn = false;\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      }\n    },\n    setpagination(page_no) {\n      this.page_array = [];\n      if (this.total_pages <= 7) {\n        for (let i = 0; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no == 1) {\n        for (let i = 0; i < 4; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no == this.total_pages) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = this.total_pages - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no <= 4) {\n        for (let i = 0; i < page_no + 3; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no >= this.total_pages - 4) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 3; i <= page_no + 3; i++) {\n          this.page_array.push(i);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      }\n    },\n    pagination_class(index) {\n      if (index == this.page_no) {\n        return \" active\";\n      } else {\n        return \"\";\n      }\n    },\n    show_template(index) {\n      this.current_template = JSON.parse(\n        JSON.stringify(this.templatelist[index])\n      );\n      this.old_template_name = this.current_template.template_name;\n      this.current_template_index = index;\n      this.isEditTemplate = false;\n      this.preview_template(\"old\");\n    },\n    empty_variable() {\n      if (!this.disable_btn_expired) {\n        this.choosen_template = null;\n        this.specific_contact_list = [];\n        this.template_name = \"\";\n        this.old_template_name = \"\";\n        if (this.current_template.length != 0) {\n          this.preview_template(\"old\");\n        } else {\n          this.preview_template_data = null;\n        }\n        this.template_name_already_exist = false;\n        document.getElementById(\"template_name_add_id\").style.border = null;\n      } else {\n        this.show_subscription_expired_swal();\n      }\n    },\n    check_current_template_active(index) {\n      // console.table(index, this.templatelist[index], this.current_template);\n      if (Boolean(this.templatelist[index]) === true) {\n        return this.templatelist[index].template_name ===\n          this.current_template.template_name\n          ? \"current-active-template\"\n          : null;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.edit {\n  line-height: 16px;\n  padding: 10px 15px;\n}\n.custom-box {\n  border: 0.5px solid #ccc;\n  padding: 10px !important;\n}\n.table-responsive {\n  min-height: 0px !important;\n  height: unset !important;\n  overflow-y: unset !important;\n  border: 1px solid #e3e2e5 !important;\n}\n.current-active-template {\n  background: rgba(0, 0, 0, 0.1);\n}\n.modal-xl {\n  max-width: 1140px;\n  min-height: 1140px;\n}\n.table-box tbody tr:hover td,\n.table-box tbody tr:hover th {\n  background: #ececec;\n}\n.table th {\n  border-top: none;\n}\n.table-responsive thead th {\n  top: 0;\n  position: sticky;\n}\n.table-responsive::-webkit-scrollbar {\n  max-height: 10px;\n  width: 7px;\n  height: 7px;\n  border-radius: 10px;\n  overflow-x: hidden;\n}\n.table-responsive::-webkit-scrollbar-track {\n  background: #ffffff;\n  border-radius: 10px;\n}\n.table-responsive::-webkit-scrollbar-thumb {\n  background: #27397b;\n  border-radius: 10px;\n}\n.table-responsive::-webkit-scrollbar-thumb:hover {\n  background: #19295f;\n  border-radius: 10px;\n}\n.text-area {\n  padding: 15px;\n  width: 100%;\n  margin: 5px 0 22px 0;\n  border: none;\n  background: #f1f1f1;\n  resize: none;\n  min-height: 150px;\n}\n.modal {\n  overflow-y: auto;\n}\n.heading {\n  color: #414141 !important;\n}\n.sub_heading {\n  font-size: 16px !important;\n  font-weight: 500 !important;\n}\n.cards {\n  background: rgb(255, 255, 255);\n  border-radius: 6px;\n  position: relative;\n  padding: 28px;\n  min-height: 175px;\n  box-shadow: 0px 2px 8px rgba(12, 12, 13, 0.1);\n}\n.preview-button-div {\n  display: grid;\n  gap: 4px;\n  margin-top: 4px;\n  grid-auto-columns: minmax(50%, 100%);\n}\n.preview-button {\n  background: rgb(255, 255, 255);\n  border-radius: 6px;\n  position: relative;\n  box-shadow: 0px 2px 8px rgba(12, 12, 13, 0.1);\n  color: #0b67aa;\n}\n.template-input-title {\n  margin-top: 1rem;\n  margin-bottom: 0rem;\n}\n</style>"]}]}