{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue","mtime":1645594423495},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBjdXJyZW5jeSBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0N1cnJlbmN5IjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCB7IGZyZWV6ZV9wb3J0YWwsc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsfSBmcm9tICJAL3BvcnRhbC9taXhpbnMiOwppbXBvcnQgVnVlUGhvbmVOdW1iZXJJbnB1dCBmcm9tICd2dWUtcGhvbmUtbnVtYmVyLWlucHV0JzsKaW1wb3J0ICd2dWUtcGhvbmUtbnVtYmVyLWlucHV0L2Rpc3QvdnVlLXBob25lLW51bWJlci1pbnB1dC5jc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2R1Y3RTZXR0aW5nc1BhZ2UiLAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0LAogICAgVnVlUGhvbmVOdW1iZXJJbnB1dCwKICB9LAogIG1peGluczogW2ZyZWV6ZV9wb3J0YWwgLHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbF0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBob25lTnVtYmVyOiBudWxsLAogICAgICBjb250YWN0X3VzX3Bob25lX251bWJlcjpudWxsLAogICAgICBpbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uOiA1LAogICAgICBjdXJyZW5jeV9jb2RlOiAiIiwKICAgICAgY3VycmVuY3lfbGlzdDogW10sCiAgICAgIGZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeTogOTAsCiAgICAgIHBob25lX25vX2Rpc2FibGU6IGZhbHNlLAogICAgICBlbWFpbF9kaXNhYmxlOiBmYWxzZSwKICAgICAgcmVzZXRfaWNvbl9wYXRoOiByZXF1aXJlKCJAL3BvcnRhbC9hc3NldHMvaW1nL3Jlc2V0X2ljb24uc3ZnIiksCiAgICAgIHZlcmlmaWNhdGlvbl9zdGF0dXM6IG51bGwsCiAgICAgIGJpZ19zcGlubmVyOiBmYWxzZSwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgaXNfZGlzcGxheV9wcm9kdWN0czogZmFsc2UsCiAgICAgIGRpc3BsYXlfcHJvZHVjdHNfaWQ6IHRydWUsCiAgICAgIGRpc3BsYXlfcHJvZHVjdHNfdHlwZTogbnVsbCwKICAgICAgZW1haWxfcmVxdWlyZWQ6IGZhbHNlLAogICAgICBwaG9uZV9ub19kZXRhaWxzOiBudWxsLAogICAgICBlbWFpbF9kZXRhaWxzOiBudWxsLAogICAgICBlbWFpbF9yZXF1aXJlZF9pZDogdHJ1ZSwKICAgICAgcGhvbmVfbnVtYmVyX3ZhbGlkaXR5OiAvXCtbMC05XXs5LDE0fSQvLAogICAgICBlbWFpbF92YWxpZGl0eTogL14oWzAtOWEtekEtWl0oWy0uXHddKlswLTlhLXpBLVpdKSpAKFswLTlhLXpBLVpdWy1cd10qWzAtOWEtekEtWl1cLikrW2EtekEtWl17Miw5fSkkLywKICAgICAgbGltaXRfdXBfc2VsbDogMTAsCiAgICAgIGxpbWl0X2Nyb3NzX3NlbGw6IDEwLAogICAgICBjb250YWN0X3VzX2VtYWlsOicnLAogICAgICByZXZpZXdfbWVzc2FnZV9maXJzdDonJywKICAgICAgcmV2aWV3X21lc3NhZ2Vfc2Vjb25kOicnLAogICAgICByZXRhaWxfd2ViX2ZyYW1ld29yazogdGhpcy4kc2Vzc2lvbi5nZXQoInJldGFpbF93ZWJfZnJhbWV3b3JrIiksCiAgICAgIHZlcmlmeV9wcm9kdWN0X3NldHRpbmdzOiBbXSwKICAgICAgdmVyaWZ5X2NoZWNrOiBmYWxzZSwKICAgICAgaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZzogZmFsc2UsCiAgICAgIGRpc2FibGVfYnRuX2V4cGlyZWQ6ZmFsc2UsCiAgICAgIHVuc3Vic2NyaWJlX2xpbms6IG51bGwsCiAgICAgIHVuc3Vic2NyaWJlX2xpbmtfdHlwZTogJ3N0YW5kYXJkJywKICAgICAgcmVnX2hvc3Q6IC9odHRwczpcL1wvWyh3d3dcLik/YS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIoWy1hLXpBLVowLTlAOiVfXCsufiM/JlwvXC89XSopL2ksCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQogICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICB9LCAxMDAwKTsKICAgIHRoaXMuJHJvb3QuJG9uKCJQcm9kdWN0U2V0dGluZ3NQYWdlRGlzYWJsZWQiLCAoZGF0YSkgPT57CiAgICAgIGlmKGRhdGE9PT10cnVlKXsKICAgICAgICB0aGlzLmRpc2FibGVfYnRuX2V4cGlyZWQgPSB0cnVlOwogICAgICB9CiAgICB9KQogICAgdGhpcy5yZXRhaWxfd2ViX2ZyYW1ld29yayA9IHRoaXMuJHNlc3Npb24uZ2V0KCJyZXRhaWxfd2ViX2ZyYW1ld29yayIpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW5jeS5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLmN1cnJlbmN5X2xpc3QucHVzaCh7CiAgICAgICAgZGlzcGxheV9uYW1lOgogICAgICAgICAgY3VycmVuY3lbaV0uZW1vamkgKwogICAgICAgICAgIiAiICsKICAgICAgICAgIGN1cnJlbmN5W2ldLmN1cnJlbmN5X2NvZGUgKwogICAgICAgICAgIiAtICIgKwogICAgICAgICAgY3VycmVuY3lbaV0uY3VycmVuY3lfbmFtZSwKICAgICAgICB2YWx1ZTogY3VycmVuY3lbaV0uY3VycmVuY3lfY29kZQogICAgICB9KTsKICAgIH0KICAgIC8vIHRoaXMudW5pcXVlKCk7CiAgICB0aGlzLmZyZWV6ZV9wb3J0YWwoKTsKICAgICQoJ1tkYXRhLXRvZ2dsZT0icG9wb3ZlciJdJykucG9wb3ZlcigpOwogICAgLy8gbG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICB0aGlzLiRyb290LiRlbWl0KCdjaGFuZ2Vfc2lkZWJhcl9tYWluX21lbnUnLCAnU3RvcmUnKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2YWxpZFBob25lTnVtYmVyKCkgewogICAgICBpZiAodGhpcy5waG9uZV9ub19kZXRhaWxzICE9IG51bGwpIHsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLnBob25lX251bWJlcl92YWxpZGl0eS50ZXN0KAogICAgICAgICAgICB0aGlzLnBob25lX25vX2RldGFpbHMucmVwbGFjZSgvXHMrL2csICIiKQogICAgICAgICAgKQogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAiUGxlYXNlIGVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyIGluIHRoZSBmb3JtYXQ6ICtDb3VudHJ5Q29kZSBOdW1iZXIiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHZhbGlkRW1haWwgKCkgewogICAgICBpZih0aGlzLmNvbnRhY3RfdXNfZW1haWwgIT0gbnVsbCl7CiAgICAgICAgaWYgKHRoaXMuZW1haWxfdmFsaWRpdHkudGVzdCh0aGlzLmNvbnRhY3RfdXNfZW1haWwpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBFbWFpbCBBZGRyZXNzIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZFVybCAoKXsKICAgICAgaWYodGhpcy5jb250YWN0X3VzX2VtYWlsICE9IG51bGwpewogICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlX2xpbmtfdHlwZSA9PT0nc3RhbmRhcmQnKXsKICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVfbGluayA9IG51bGw7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodGhpcy5yZWdfaG9zdC50ZXN0KHRoaXMudW5zdWJzY3JpYmVfbGluaykpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gIlBsZWFzZSBlbnRlciBhIHZhbGlkIFVybCI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZW1haWxfZGV0YWlscygpIHsKICAgICAgaWYgKHRoaXMuZW1haWxfZGV0YWlscyA9PSBudWxsIHx8IHRoaXMuZW1haWxfZGV0YWlscyA9PSAiIikgewogICAgICAgIHRoaXMuZW1haWxfZGlzYWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBiZWZvcmVSb3V0ZUxlYXZlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgY2hlY2sgPSBmYWxzZTsKICAgIGlmICh0aGlzLnZlcmlmeV9jaGVjayl7CiAgICAgIGlmICh0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLnJldmlld19tZXNzYWdlX2ZpcnN0ID09IHRoaXMucmV2aWV3X21lc3NhZ2VfZmlyc3QgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLnJldmlld19tZXNzYWdlX3NlY29uZCA9PSB0aGlzLnJldmlld19tZXNzYWdlX3NlY29uZCAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MuY29udGFjdF9oZWxwX2VtYWlsID09IHRoaXMuY29udGFjdF91c19lbWFpbCAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MuY29udGFjdF91c19waG9uZV9udW1iZXIgPT0gKHRoaXMuY29udGFjdF91c19waG9uZV9udW1iZXIgPyB0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlciA6IHVuZGVmaW5lZCkgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLm9yZGVyX3JldHJpZXZhbF9vbmx5X2VtYWlsX3JlcXVpcmVkID09IHRoaXMuZW1haWxfcmVxdWlyZWQgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmJhc2VfY3VycmVuY3kudmFsdWUgPT0gdGhpcy5jdXJyZW5jeV9jb2RlLnZhbHVlICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy51c2VyX2ZlZWRiYWNrX2ZyZXF1ZW5jeSA9PSB0aGlzLmZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeSAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MubG93X2ludmVudG9yeV9ub3RpZmljYXRpb24gPT0gdGhpcy5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5saW1pdF91cF9zZWxsID09IHRoaXMubGltaXRfdXBfc2VsbCAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MubGltaXRfY3Jvc3Nfc2VsbCA9PSB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLnNlbmRlcl9lbWFpbCA9PSB0aGlzLmVtYWlsX2RldGFpbHMgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmRpc3BsYXlfcHJvZHVjdHNfb25fbGFuZGluZyA9PSB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmcgPT0gdGhpcy5pc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgPT0gdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUKICAgICAgICApCiAgICAgICAgewogICAgICAgICAgY2hlY2sgPSBmYWxzZTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIGNoZWNrID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICBpZiAoY2hlY2sgJiYgIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICBTd2FsKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICJJZiB5b3UgaGF2ZSBtYWRlIGFueSBjaGFuZ2VzIGluIHRoZSBwcm9kdWN0IHNldHRpbmdzIHBsZWFzZSBzYXZlIHRoZW0gZmlyc3QsIGVsc2UgdGhleSB3aWxsIGRpc2NhcmRlZCEiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJTYXZlIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAiQ2FuY2VsIiwKICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgdGhpcy5jb25maWd1cmVfcHJvZHVjdF9zZXR0aW5ncygiZW1haWxfcmVxdWlyZWQiKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIG5leHQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdW5pcXVlKCkgewogICAgICBsZXQgYXJyID0gdGhpcy5jdXJyZW5jeV9saXN0OwogICAgICB2YXIgdSA9IHt9LAogICAgICAgIGEgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgICAgaWYgKCF1Lmhhc093blByb3BlcnR5KGFycltpXSkpIHsKICAgICAgICAgIGEucHVzaChhcnJbaV0pOwogICAgICAgICAgdVthcnJbaV1dID0gMTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW5jeV9saXN0ID0gYTsKICAgIH0sCiAgICBlbWFpbF92ZXJpZmljYXRpb25fc3RhdHVzKCkgewogICAgICBpZiAodGhpcy5lbWFpbF9kZXRhaWxzICE9IG51bGwgJiYgdGhpcy5lbWFpbF9kZXRhaWxzICE9ICIiKSB7CiAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzX2VtYWlsX3ZlcmlmaWNhdGlvbl9zdGF0dXM6IHRydWUsCiAgICAgICAgICAgICAgZW1haWxfaWQ6IHRoaXMuZW1haWxfZGV0YWlscwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSAhPSAiIiAmJgogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gbnVsbCAmJgogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gIkludGVybmFsIHNlcnZlciBFcnJvciIKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHJlc3BvbnNlLmRhdGEudmVyaWZpY2F0aW9uX3N0YXR1czsKICAgICAgICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbl9zdGF0dXMgPQogICAgICAgICAgICAgICAgc3RhdHVzID09ICJTdWNjZXNzIgogICAgICAgICAgICAgICAgICA/ICJTdWNjZXNzIgogICAgICAgICAgICAgICAgICA6IHN0YXR1cyA9PSAiUGVuZGluZyIKICAgICAgICAgICAgICAgICAgPyAiUGVuZGluZyAoUGxlYXNlIFZlcmlmeSBZb3VyIEVtYWlsIEFkZHJlc3MpIgogICAgICAgICAgICAgICAgICA6IHN0YXR1cyArCiAgICAgICAgICAgICAgICAgICAgIihUaGUgdmVyaWZpY2F0aW9uIGxpbmsgaGFzIGV4cGlyZWQsIGtpbmRseSByZXN0YXJ0IHRoZSBwcm9jZXNzIGJ5IHJlbW92aW5nIHRoZSBleGlzdGluZyBlbWFpbC1pZC4pIjsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbG9hZF9wcm9kdWN0X3NldHRpbmdzKCkgewogICAgICB0aGlzLmVtYWlsX2RldGFpbHMgPSBudWxsOwogICAgICB0aGlzLnBob25lX25vX2RldGFpbHMgPSBudWxsOwogICAgICB0aGlzLmVtYWlsX3JlcXVpcmVkID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVuY3lfY29kZSA9ICIiOwogICAgICB0aGlzLmZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeSA9IDkwOwogICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24gPSA1OwogICAgICB0aGlzLmxpbWl0X3VwX3NlbGwgPSAxMDsKICAgICAgdGhpcy5saW1pdF9jcm9zc19zZWxsID0gMTA7CiAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIGlzX2dldDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgdmFyIHdlYmZyYW1ld29yayA9IHRoaXMucmV0YWlsX3dlYl9mcmFtZXdvcms7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gIiIgJiYKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSAhPSBudWxsICYmCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gIkludGVybmFsIHNlcnZlciBFcnJvciIKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzID0gcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXTsKICAgICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9maXJzdCA9IAogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgJ19kZXRhaWxzJ10ucmV2aWV3X21lc3NhZ2VfZmlyc3Q7CiAgICAgICAgICAgIHRoaXMucmV2aWV3X21lc3NhZ2Vfc2Vjb25kID0gCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXS5yZXZpZXdfbWVzc2FnZV9zZWNvbmQ7CiAgICAgICAgICAgIHRoaXMuY29udGFjdF91c19lbWFpbCA9IHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgJ19kZXRhaWxzJ10uY29udGFjdF9oZWxwX2VtYWlsOwogICAgICAgICAgICB0aGlzLmNvbnRhY3RfdXNfcGhvbmVfbnVtYmVyID0gcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXS5jb250YWN0X3VzX3Bob25lX251bWJlcjsKICAgICAgICAgICAgdGhpcy5lbWFpbF9kZXRhaWxzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICdfZGV0YWlscyddLnNlbmRlcl9lbWFpbDsKICAgICAgICAgICAgdGhpcy5waG9uZV9ub19kZXRhaWxzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICdfZGV0YWlscyddLnNlbmRlcl9waG9uZV9ubzsKICAgICAgICAgICAgdGhpcy5lbWFpbF9yZXF1aXJlZCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXS5vcmRlcl9yZXRyaWV2YWxfb25seV9lbWFpbF9yZXF1aXJlZDsKICAgICAgICAgICAgdGhpcy5jdXJyZW5jeV9jb2RlID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICdfZGV0YWlscyddLmJhc2VfY3VycmVuY3k7CiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5ID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICdfZGV0YWlscyddLnVzZXJfZmVlZGJhY2tfZnJlcXVlbmN5OwogICAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24gPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgJ19kZXRhaWxzJ10ubG93X2ludmVudG9yeV9ub3RpZmljYXRpb247CiAgICAgICAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA9IHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgJ19kZXRhaWxzJ10ubGltaXRfdXBfc2VsbDsKICAgICAgICAgICAgdGhpcy5saW1pdF9jcm9zc19zZWxsID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICdfZGV0YWlscyddLmxpbWl0X2Nyb3NzX3NlbGw7CiAgICAgICAgICAgIHRoaXMuaXNfZGlzcGxheV9wcm9kdWN0cyA9IAogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgJ19kZXRhaWxzJ10uZGlzcGxheV9wcm9kdWN0c19vbl9sYW5kaW5nOwogICAgICAgICAgICB0aGlzLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmcgPSAKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICdfZGV0YWlscyddLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmc7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlID0gcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAnX2RldGFpbHMnXS5kaXNwbGF5X3Byb2R1Y3RzX3R5cGU7CiAgICAgICAgICAgIHRoaXMuZW1haWxfdmVyaWZpY2F0aW9uX3N0YXR1cygpOwogICAgICAgICAgICB0aGlzLnZlcmlmeV9jaGVjayA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnZlcmlmeV9jaGVjayA9IGZhbHNlOwogICAgICAgICAgICB0b2FzdHIuZXJyb3IoIkludGVybmFsIFNlcnZlciBFcnJvciIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgdGhpcy52ZXJpZnlfY2hlY2sgPSBmYWxzZTsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4iKTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGNvbmZpZ3VyZV9wcm9kdWN0X3NldHRpbmdzKHZhbHVlKSB7CiAgICAgIGlmKCF0aGlzLmRpc2FibGVfYnRuX2V4cGlyZWQpewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodmFsdWUgPT0gImVtYWlsIikgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDoKICAgICAgICAgICAgIlBsZWFzZSBtYWtlIHN1cmUgeW91IGhhdmUgZW50ZXJlZCBhIGNvcnJlY3QgZW1haWwgYWRkcmVzcywgeW91IHdpbGwgcmVjZWl2ZSBhbiBlbWFpbCB3aXRoIHRoZSB2ZXJpZmljYXRpb24gbGluay4iLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgUHJvY2VlZCEhIgogICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgICAgaXNfZW1haWw6IHRydWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsX2lkOiB0aGlzLmVtYWlsX2RldGFpbHMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnQgdG8iICsKICAgICAgICAgICAgICAgICAgICAgICIgIiArCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsX2RldGFpbHMgKwogICAgICAgICAgICAgICAgICAgICAgIi4gS2luZGx5IGNoZWNrIHlvdXIgZW1haWwuIFxuIFlvdSB3aWxsIHJlY2VpdmUgYW4gZW1haWwgZnJvbSBzZW5kZXIgJ0FtYXpvbiBXZWIgU2VydmljZXMnLiBQbGVhc2UgdmVyaWZ5IHRoYXQgbGluayIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF92ZXJpZmljYXRpb25fc3RhdHVzKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLiIpOwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gInBob25lX25vIikgewogICAgICAgIGlmICh0aGlzLnZhbGlkUGhvbmVOdW1iZXIgPT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIGlzX3Bob25lX25vOiB0cnVlLAogICAgICAgICAgICAgICAgcGhvbmVfbm86IHRoaXMucGhvbmVfbm9fZGV0YWlscwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgdGV4dDogIlBob25lIG51bWJlciBzYXZlZCBzdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgICAgICAgICAgICB0aXRsZTogIlN1Y2Nlc3MiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICB0ZXh0OiAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIlNvbWUgRXJyb3IgT2NjdXJyZWQuIik7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgICJNb2JpbGUgbnVtYmVyIGlzIGludmFsaWQsIHBsZWFzZSBlbnRlciBpbiBmb3JtYXQ6ICsgQ291bnRyeUNvZGUgTnVtYmVyIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gImVtYWlsX3JlcXVpcmVkIikgewogICAgICAgIGlmKHRoaXMudmFsaWRFbWFpbCAhPSB0cnVlKXsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OiAiUGxlYXNlIGVudGVyIGEgdmFsaWQgRW1haWwgQWRkcmVzcyIsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmKCFCb29sZWFuKHRoaXMucGhvbmVOdW1iZXIpKXsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OiAiUGxlYXNlIGVudGVyIGEgdmFsaWQgUGhvbmUgTnVtYmVyIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9ZWxzZSBpZih0aGlzLnBob25lTnVtYmVyLmlzVmFsaWQgIT0gdHJ1ZSl7CiAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIHZhbGlkIFBob25lIE51bWJlciIsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnJldmlld19tZXNzYWdlX2ZpcnN0ID09PSAnJyAmJgogICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQgPT09ICcnKXsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OiAiUGxlYXNlIGVudGVyIGEgbWVzc2FnZSBmb3IgcmV2aWV3IGFuZCByYXRpbmdzIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB0aW1lcjogMzUwMAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgaWYodGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzID09PSB0cnVlICYmIAogICAgICAgICAgICAodGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgPT09IG51bGwgfHwgdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgPT09ICcnKSl7CiAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgdGV4dDogIlBsZWFzZSBzZWxlY3QgZGlzcGxheSBwcm9kdWN0IHR5cGUiLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIHRpbWVyOiA1MDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24gPCAwIHx8CiAgICAgICAgICB0aGlzLmZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeSA8IDAKICAgICAgICApIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OiAiTnVtZXJpY2FsIHZhbHVlIGNhbiBub3QgYmUgbGVzcyB0aGVuIHplcm8iLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgdGhpcy5saW1pdF91cF9zZWxsID09IG51bGwgfHwKICAgICAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA8PSAwIHx8CiAgICAgICAgICB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwgPT0gbnVsbCB8fAogICAgICAgICAgdGhpcy5saW1pdF9jcm9zc19zZWxsIDw9IDAKICAgICAgICApIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICJVcC1zZWxsIGFuZCBDcm9zcy1zZWxsIGxpbWl0IHZhbHVlcyBjYW5ub3QgYmUgbGVzcyB0aGFuIHplcm8iLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIGlzX2VtYWlsX3JlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgZW1haWxfcmVxdWlyZWQ6IHsKICAgICAgICAgICAgICAgICAgcmV2aWV3X21lc3NhZ2VfZmlyc3Q6dGhpcy5yZXZpZXdfbWVzc2FnZV9maXJzdCwKICAgICAgICAgICAgICAgICAgcmV2aWV3X21lc3NhZ2Vfc2Vjb25kOnRoaXMucmV2aWV3X21lc3NhZ2Vfc2Vjb25kLAogICAgICAgICAgICAgICAgICBjb250YWN0X2hlbHBfZW1haWw6dGhpcy5jb250YWN0X3VzX2VtYWlsLAogICAgICAgICAgICAgICAgICBjb250YWN0X3VzX3Bob25lX251bWJlcjp0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlciwKICAgICAgICAgICAgICAgICAgb3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ6IHRoaXMKICAgICAgICAgICAgICAgICAgICAuZW1haWxfcmVxdWlyZWQsCiAgICAgICAgICAgICAgICAgIGJhc2VfY3VycmVuY3k6IHRoaXMuY3VycmVuY3lfY29kZSwKICAgICAgICAgICAgICAgICAgdXNlcl9mZWVkYmFja19mcmVxdWVuY3k6IHRoaXMKICAgICAgICAgICAgICAgICAgICAuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5LAogICAgICAgICAgICAgICAgICBsb3dfaW52ZW50b3J5X25vdGlmaWNhdGlvbjogdGhpcwogICAgICAgICAgICAgICAgICAgIC5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uLAogICAgICAgICAgICAgICAgICBsaW1pdF91cF9zZWxsOiB0aGlzLmxpbWl0X3VwX3NlbGwsCiAgICAgICAgICAgICAgICAgIGxpbWl0X2Nyb3NzX3NlbGw6IHRoaXMubGltaXRfY3Jvc3Nfc2VsbCwKICAgICAgICAgICAgICAgICAgZGlzcGxheV9wcm9kdWN0c19vbl9sYW5kaW5nOiB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMsCiAgICAgICAgICAgICAgICAgIGlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmc6IHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZywKICAgICAgICAgICAgICAgICAgZGlzcGxheV9wcm9kdWN0c190eXBlOiB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHM/IHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlOiBudWxsLAogICAgICAgICAgICAgICAgICAic2hvcF9zZXR0aW5nc19zYXZlZCI6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiUXVlcnkgRXhlY3V0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJZb3VyIGNoYW5nZXMgaGF2ZSBiZWVuIHNhdmVkIHN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDQwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4iKTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICJlbWFpbF9yZW1vdmUiKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAiT25jZSB5b3UgcmVtb3ZlIHRoZSBzYXZlZCBlbWFpbCBhZGRyZXNzLCB5b3Ugd2lsbCBoYXZlIHRvIGFkZCBhbmQgdmVyaWZ5IHRoZSBlbWFpbCBhZ2FpbiBiZWZvcmUgeW91IGNhbiBzZW5kIGVtYWlscyEiLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgUmVtb3ZlISEiCiAgICAgICAgfSkudGhlbihyZXN1bHQgPT4gewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICBpc19yZW1vdmVfZW1haWw6IHRydWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsX2lkOiB0aGlzLmVtYWlsX2RldGFpbHMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICJFbWFpbCBJZCBoYXMgYmVlbiByZW1vdmVkIHN1Y2Nlc3NmdWxseSEiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogNTAwMCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsX2Rpc2FibGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF9kZXRhaWxzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogIkludGVybmFsIFNlcnZlciBFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4iKTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICJ1bnN1YnNjcmliZV9wcm9tb3Rpb25hbF9lbWFpbCIpewogICAgICAgIGlmKHRoaXMudmFsaWRVcmwgIT0gdHJ1ZSl7CiAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIHZhbGlkIFVybCIsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuCiAgICAgICAgfWVsc2UgewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIGlzX2VtYWlsX3JlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgZW1haWxfcmVxdWlyZWQ6IHsKICAgICAgICAgICAgICAgICAgcmV2aWV3X21lc3NhZ2VfZmlyc3Q6dGhpcy5yZXZpZXdfbWVzc2FnZV9maXJzdCwKICAgICAgICAgICAgICAgICAgcmV2aWV3X21lc3NhZ2Vfc2Vjb25kOnRoaXMucmV2aWV3X21lc3NhZ2Vfc2Vjb25kLAogICAgICAgICAgICAgICAgICBjb250YWN0X2hlbHBfZW1haWw6dGhpcy5jb250YWN0X3VzX2VtYWlsLAogICAgICAgICAgICAgICAgICAvLyBjb250YWN0X3VzX3Bob25lX251bWJlcjp0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlciwKICAgICAgICAgICAgICAgICAgb3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ6IHRoaXMKICAgICAgICAgICAgICAgICAgICAuZW1haWxfcmVxdWlyZWQsCiAgICAgICAgICAgICAgICAgIGJhc2VfY3VycmVuY3k6IHRoaXMuY3VycmVuY3lfY29kZSwKICAgICAgICAgICAgICAgICAgdXNlcl9mZWVkYmFja19mcmVxdWVuY3k6IHRoaXMKICAgICAgICAgICAgICAgICAgICAuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5LAogICAgICAgICAgICAgICAgICBsb3dfaW52ZW50b3J5X25vdGlmaWNhdGlvbjogdGhpcwogICAgICAgICAgICAgICAgICAgIC5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uLAogICAgICAgICAgICAgICAgICBsaW1pdF91cF9zZWxsOiB0aGlzLmxpbWl0X3VwX3NlbGwsCiAgICAgICAgICAgICAgICAgIGxpbWl0X2Nyb3NzX3NlbGw6IHRoaXMubGltaXRfY3Jvc3Nfc2VsbCwKICAgICAgICAgICAgICAgICAgZGlzcGxheV9wcm9kdWN0c19vbl9sYW5kaW5nOiB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMsCiAgICAgICAgICAgICAgICAgIGlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmc6IHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZywKICAgICAgICAgICAgICAgICAgZGlzcGxheV9wcm9kdWN0c190eXBlOiB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHM/IHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlOiBudWxsLAogICAgICAgICAgICAgICAgICAic2hvcF9zZXR0aW5nc19zYXZlZCI6IHRydWUsCiAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlX2xpbms6dGhpcy51bnN1YnNjcmliZV9saW5rLAogICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZV9saW5rX3R5cGU6dGhpcy51bnN1YnNjcmliZV9saW5rX3R5cGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiUXVlcnkgRXhlY3V0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJZb3VyIGNoYW5nZXMgaGF2ZSBiZWVuIHNhdmVkIHN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDQwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4iKTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgfQogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICB9CiAgICB9LAogICAgZW1wdHlfdmFyaWFibGUoKSB7CiAgICAgIHRoaXMuZW1haWxfZGV0YWlscyA9IG51bGw7CiAgICAgIHRoaXMuZW1haWxfcmVxdWlyZWQgPSBmYWxzZTsKICAgICAgdGhpcy5jdXJyZW5jeV9jb2RlID0gIiI7CiAgICAgIHRoaXMuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5ID0gOTA7CiAgICAgIHRoaXMuaW52ZW50b3J5X2xldmVsX25vdGlmaWNhdGlvbiA9IDU7CiAgICAgIHRoaXMucGhvbmVfbm9fZGV0YWlscyA9IG51bGw7CiAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA9IDEwOwogICAgICB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwgPSAxMDsKICAgIH0KICB9Cn07Cg=="},null]}