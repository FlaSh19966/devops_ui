{"remainingRequest":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Elixir/chatbot-portal/src/portal/analytics/components/MultiLineChartAlternative.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Elixir/chatbot-portal/src/portal/analytics/components/MultiLineChartAlternative.vue","mtime":1643027096188},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzLTMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk11bHRpTGluZUNoYXJ0QWx0ZXJuYXRpdmUiLAogIHByb3BzIDogewogICAgeEtleTogU3RyaW5nLAogICAgeUtleTogU3RyaW5nLAogICAgYXBpRGF0YTogQXJyYXksCiAgICBkYXRlS2V5OiBTdHJpbmcKICB9LAogIC8vIGRhdGEgOiB7CgogIC8vIH0sCiAgbW91bnRlZCgpIHsKCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHJlc2l6ZV9vZl9wYWdlKCk7CiAgICAgICAgcmVzaXplX29mX3BhZ2UoKTsKICAgICAgICByZXNpemVfb2ZfcGFnZSgpOwogICAgICAgIHJlc2l6ZV9vZl9wYWdlKCk7CiAgICAgICAgcmVzaXplX29mX3BhZ2UoKTsKICAgICAgfSwgNDAwKTsKICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIC8vICAgcmVzaXplX29mX3BhZ2UoKTsKICAgICAgLy8gfSwgMTIwMCk7CiAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgIHJlc2l6ZV9vZl9wYWdlKCk7CiAgICAgIC8vIH0sIDE1MDApOwogICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gICByZXNpemVfb2ZfcGFnZSgpOwogICAgICAvLyB9LCA4MDApOwoKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMueEtleSx0aGlzLnlLZXksdGhpcy5kYXRlS2V5KTsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYXBpRGF0YSk7CiAgIHZhciBhcGlfZGF0YSA9IAogICAgICAgIFsKICAgICAgICAgICAgeyJTQUxFUyI6MTM0MC40NTA0MTk5OTk5OTksIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlRodSwgMTcgTWFyIDIwMTYgMTA6MTg6NDcgR01UIiwiQ0FURUdPUlkiOiJTdG9uZWZydWl0cyIsIk1PTlRIIjoiMDMifSwKICAgICAgICAgICAgeyJTQUxFUyI6MTcwLjkwMTk0MDAwMDAwMDA1LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJUaHUsIDE3IE1hciAyMDE2IDExOjUzOjEyIEdNVCIsIkNBVEVHT1JZIjoiQ3VjdW1iZXJzIiwiTU9OVEgiOiIwMyJ9LAogICAgICAgICAgICB7IlNBTEVTIjo3NC43OTk5OTk5OTk5OTk5OCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiRnJpLCAxOCBNYXIgMjAxNiAxMjoxMzo1NSBHTVQiLCJDQVRFR09SWSI6IlNyaSBMYW5rYW4gR3JvY2VyaWVzIiwiTU9OVEgiOiIwMyJ9LAogICAgICAgICAgICB7IlNBTEVTIjo2Mi45MzkzNjAwMDAwMDAwMSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU2F0LCAxOSBNYXIgMjAxNiAxOTo0MjoxMCBHTVQiLCJDQVRFR09SWSI6IlZlZ2dpZXMiLCJNT05USCI6IjAzIn0sCiAgICAgICAgICAgIHsiU0FMRVMiOjIxOC40Nzc4ODAwMDAwMDAxLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDIwIE1hciAyMDE2IDE3OjEyOjA2IEdNVCIsIkNBVEVHT1JZIjoiTXVzaHJvb21zIiwiTU9OVEgiOiIwMyJ9LAogICAgICAgICAgICB7IlNBTEVTIjoyNjIuNTk5NTIzNjM2MzYzOCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU3VuLCAyMCBNYXIgMjAxNiAxNzozNDoyMiBHTVQiLCJDQVRFR09SWSI6IlRyb3BpY2FsIEZydWl0cyIsIk1PTlRIIjoiMDMifSwKICAgICAgICAgICAgeyJTQUxFUyI6NjkuNTkzMjAwMDAwMDAwMDEsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlN1biwgMjAgTWFyIDIwMTYgMTk6MDI6MTUgR01UIiwiQ0FURUdPUlkiOiJDYWJiYWdlcyIsIk1PTlRIIjoiMDMifSwKICAgICAgICAgICAgeyJTQUxFUyI6NjcxLjgzNDk2MDAwMDAwMDUsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IldlZCwgMjMgTWFyIDIwMTYgMDE6MDQ6MDYgR01UIiwiQ0FURUdPUlkiOiJCYW5hbmFzIiwiTU9OVEgiOiIwMyJ9LAogICAgICAgICAgICB7IlNBTEVTIjoxMTYuMjAxMjg1NDU0NTQ1NDcsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IldlZCwgMjMgTWFyIDIwMTYgMDE6MzU6MTMgR01UIiwiQ0FURUdPUlkiOiJOdXRzIiwiTU9OVEgiOiIwMyJ9LAogICAgICAgICAgICB7IlNBTEVTIjoyOTUuMjAwMDAwMDAwMDAwMiwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiV2VkLCAyMyBNYXIgMjAxNiAwNDozMToxNyBHTVQiLCJDQVRFR09SWSI6IkF2b2NhZG9lcyIsIk1PTlRIIjoiMDMifSwKICAgICAgICAgICAgeyJTQUxFUyI6NDcuNSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVGh1LCAyNCBNYXIgMjAxNiAwMzoxMzowNyBHTVQiLCJDQVRFR09SWSI6IkhlcmJzIiwiTU9OVEgiOiIwMyJ9LAogICAgICAgICAgICB7IlNBTEVTIjoxNjkuMjAyNTYwMDAwMDAwMDMsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlRodSwgMjQgTWFyIDIwMTYgMDQ6MTI6MzIgR01UIiwiQ0FURUdPUlkiOiJQdW1wa2lucyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjozMDcuNjQ5OTk5OTk5OTk5NywiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVGh1LCAyNCBNYXIgMjAxNiAwNDo0Mzo1OSBHTVQiLCJDQVRFR09SWSI6IkVnZ3MiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6OTc1LjEyMDA1NDU0NTQ1NTMsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlRodSwgMjQgTWFyIDIwMTYgMDU6MjI6NTAgR01UIiwiQ0FURUdPUlkiOiJPdGhlciBWZWdpZXMiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6MTEyLjQ0NDcsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IkZyaSwgMjUgTWFyIDIwMTYgMDE6NDg6NDUgR01UIiwiQ0FURUdPUlkiOiJDaGlsbGllcyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjo1OTcuMDkwNTM2MzYzNjM2NSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiRnJpLCAyNSBNYXIgMjAxNiAwMzoyODowMyBHTVQiLCJDQVRFR09SWSI6IkNpdHJ1cyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjoxNjYuODEyLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJGcmksIDI1IE1hciAyMDE2IDAzOjUwOjA4IEdNVCIsIkNBVEVHT1JZIjoiY2Fycm90cyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjozNjAuOTIxMDYsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IkZyaSwgMjUgTWFyIDIwMTYgMDQ6NDE6MTkgR01UIiwiQ0FURUdPUlkiOiJjYXBzaWN1bSIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjo1Ny44ODM2MzYzNjM2MzYzNywiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU2F0LCAyNiBNYXIgMjAxNiAyMjo1MToyNyBHTVQiLCJDQVRFR09SWSI6Ik90aGVyIEZydWl0cyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjo4ODQuNDQxMTE5OTk5OTk5NywiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU2F0LCAyNiBNYXIgMjAxNiAyMzozNzozOCBHTVQiLCJDQVRFR09SWSI6IlBvdGF0b2VzIiwiTU9OVEgiOiIwMyJ9LHsiU0FMRVMiOjMwNC45MjU0NjAwMDAwMDAwNCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU3VuLCAyNyBNYXIgMjAxNiAwMDoyNTowNyBHTVQiLCJDQVRFR09SWSI6IlBlYXJzIiwiTU9OVEgiOiIwMyJ9LHsiU0FMRVMiOjMwMy4yMjYwMDAwMDAwMDA0LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDI3IE1hciAyMDE2IDAwOjI4OjUwIEdNVCIsIkNBVEVHT1JZIjoiQnVuY2ggVmVnaWVzIiwiTU9OVEgiOiIwMyJ9LHsiU0FMRVMiOjYyMC42NjczOTk5OTk5OTk3LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDI3IE1hciAyMDE2IDAxOjA4OjAzIEdNVCIsIkNBVEVHT1JZIjoiVG9tYXRvZXMiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6NjI5Ljg1MTY4MDAwMDAwMDQsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlN1biwgMjcgTWFyIDIwMTYgMDE6NDU6NTggR01UIiwiQ0FURUdPUlkiOiJBcHBsZXMiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6MzcyLjgyMDk5OTk5OTk5OTIzLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDI3IE1hciAyMDE2IDAzOjM4OjE2IEdNVCIsIkNBVEVHT1JZIjoiTGV0dHVjZXMiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6MTU0LjQ4NSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU3VuLCAyNyBNYXIgMjAxNiAyMzowODo0MCBHTVQiLCJDQVRFR09SWSI6Ik11bHRpIGJ1eSIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjozODcuOTE1Nzk5OTk5OTk5OSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiTW9uLCAyOCBNYXIgMjAxNiAwMjoxNToxMSBHTVQiLCJDQVRFR09SWSI6Ik1lbG9ucyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjoxODAuMjE3MjcyNzI3MjcyOCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiTW9uLCAyOCBNYXIgMjAxNiAyMjo1OTozNCBHTVQiLCJDQVRFR09SWSI6Ik9seW1waWFuIFByb2R1Y3RzIiwiTU9OVEgiOiIwMyJ9LHsiU0FMRVMiOjYzMy4zNjgyNDM2MzYzNjM4LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJNb24sIDI4IE1hciAyMDE2IDIzOjU3OjI4IEdNVCIsIkNBVEVHT1JZIjoiT25pb25zIiwiTU9OVEgiOiIwMyJ9LHsiU0FMRVMiOjg1NC4zMDA5NiwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiV2VkLCAzMCBNYXIgMjAxNiAwMzowMjowOSBHTVQiLCJDQVRFR09SWSI6IkdyYXBlcyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjoxMDguMCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiV2VkLCAzMCBNYXIgMjAxNiAwNDoxNTo1OSBHTVQiLCJDQVRFR09SWSI6IkZsb3dlcnMiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6ODcuMTA3NDE5OTk5OTk5OTksIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IldlZCwgMzAgTWFyIDIwMTYgMjE6NDA6MTUgR01UIiwiQ0FURUdPUlkiOiJSb290IFZlZ2llcyIsIk1PTlRIIjoiMDMifSx7IlNBTEVTIjo3My43LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJUaHUsIDMxIE1hciAyMDE2IDAwOjIzOjUwIEdNVCIsIkNBVEVHT1JZIjoiQ3V0IFZlZ2dpZXMiLCJNT05USCI6IjAzIn0seyJTQUxFUyI6MjE2LjUwNDEwMDAwMDAwMDAyLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJUaHUsIDMxIE1hciAyMDE2IDAxOjI3OjQzIEdNVCIsIkNBVEVHT1JZIjoiQXNpYW4gVmVnaWVzIiwiTU9OVEgiOiIwMyJ9LHsiU0FMRVMiOjE2Ny44Nzk5OTk5OTk5OTk5NywiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVGh1LCAzMSBNYXIgMjAxNiAwMTo1OTowNyBHTVQiLCJDQVRFR09SWSI6IkJlcnJpZXMiLCJNT05USCI6IjAzIn0sCiAgICAgICAgICAgIHsiU0FMRVMiOjYwMi4yMjU5NDU0NTQ1NDU4LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJGcmksIDAxIEFwciAyMDE2IDAwOjI2OjIzIEdNVCIsIkNBVEVHT1JZIjoiQ2l0cnVzIiwiTU9OVEgiOiIwNCJ9LAogICAgICAgICAgICB7IlNBTEVTIjo5NjQuMDUyNzgwMDAwMDAwOCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiRnJpLCAwMSBBcHIgMjAxNiAwMDo0MTowMSBHTVQiLCJDQVRFR09SWSI6Ik90aGVyIFZlZ2llcyIsIk1PTlRIIjoiMDQifSwKICAgICAgICAgICAgeyJTQUxFUyI6MTA3Ljg3OTk5OTk5OTk5OTk4LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJGcmksIDAxIEFwciAyMDE2IDA0OjUwOjI0IEdNVCIsIkNBVEVHT1JZIjoiQ2FiYmFnZXMiLCJNT05USCI6IjA0In0sCiAgICAgICAgICAgIHsiU0FMRVMiOjg2LjU1NTYsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IkZyaSwgMDEgQXByIDIwMTYgMDQ6NTA6MjQgR01UIiwiQ0FURUdPUlkiOiJSb290IFZlZ2llcyIsIk1PTlRIIjoiMDQifSwKICAgICAgICAgICAgeyJTQUxFUyI6Njc1LjkyOTkwMDAwMDAwMDIsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IkZyaSwgMDEgQXByIDIwMTYgMDQ6NTU6MjQgR01UIiwiQ0FURUdPUlkiOiJCYW5hbmFzIiwiTU9OVEgiOiIwNCJ9LAogICAgICAgICAgICB7IlNBTEVTIjoxOTcuMjA4MDgwMDAwMDAwMDUsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IkZyaSwgMDEgQXByIDIwMTYgMDg6MDY6MjYgR01UIiwiQ0FURUdPUlkiOiJBc2lhbiBWZWdpZXMiLCJNT05USCI6IjA0In0sCiAgICAgICAgICAgIHsiU0FMRVMiOjEwOC4wLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJGcmksIDAxIEFwciAyMDE2IDIxOjUyOjEyIEdNVCIsIkNBVEVHT1JZIjoiRmxvd2VycyIsIk1PTlRIIjoiMDQifSwKICAgICAgICAgICAgeyJTQUxFUyI6MTUuMjAwMDAwMDAwMDAwMDAzLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTYXQsIDAyIEFwciAyMDE2IDAwOjIyOjE0IEdNVCIsIkNBVEVHT1JZIjoiU3JpIExhbmthbiBHcm9jZXJpZXMiLCJNT05USCI6IjA0In0sCiAgICAgICAgICAgIHsiU0FMRVMiOjExOC42MzIwMDAwMDAwMDAwOSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU2F0LCAwMiBBcHIgMjAxNiAwMDoyMjoxNCBHTVQiLCJDQVRFR09SWSI6ImNhcnJvdHMiLCJNT05USCI6IjA0In0sCiAgICAgICAgICAgIHsiU0FMRVMiOjEyOS4wLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDAzIEFwciAyMDE2IDAwOjAwOjUyIEdNVCIsIkNBVEVHT1JZIjoiTXVsdGkgYnV5IiwiTU9OVEgiOiIwNCJ9LAogICAgICAgICAgICB7IlNBTEVTIjoxNzQuMTc1MDgwMDAwMDAwMDQsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlN1biwgMDMgQXByIDIwMTYgMDA6MDA6NTIgR01UIiwiQ0FURUdPUlkiOiJjYXBzaWN1bSIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjoyMzAuNTYyNzI3MjcyNzI3MzMsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlN1biwgMDMgQXByIDIwMTYgMDA6MzQ6MTkgR01UIiwiQ0FURUdPUlkiOiJPbHltcGlhbiBQcm9kdWN0cyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjo5Ni44NDYxNDcyNzI3MjcyOCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU3VuLCAwMyBBcHIgMjAxNiAwMDozNzo0OSBHTVQiLCJDQVRFR09SWSI6Ik51dHMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6NDM5LjEwODk2NTQ1NDU0NTM0LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDAzIEFwciAyMDE2IDAxOjQyOjE4IEdNVCIsIkNBVEVHT1JZIjoiVG9tYXRvZXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6NTEyLjA1NjkyMDAwMDAwMDEsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlN1biwgMDMgQXByIDIwMTYgMDI6NDQ6NTkgR01UIiwiQ0FURUdPUlkiOiJHcmFwZXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6MTUxLjA0NzksIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlN1biwgMDMgQXByIDIwMTYgMDI6NTM6MDAgR01UIiwiQ0FURUdPUlkiOiJQdW1wa2lucyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjo0My4wLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDAzIEFwciAyMDE2IDAyOjUzOjAwIEdNVCIsIkNBVEVHT1JZIjoiQ3V0IFZlZ2dpZXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6MTM3LjgwNjA3OTk5OTk5OTk1LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTdW4sIDAzIEFwciAyMDE2IDA2OjA5OjUwIEdNVCIsIkNBVEVHT1JZIjoiQ3VjdW1iZXJzIiwiTU9OVEgiOiIwNCJ9LHsiU0FMRVMiOjExOS4wMTQ1LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJNb24sIDA0IEFwciAyMDE2IDAxOjE4OjAwIEdNVCIsIkNBVEVHT1JZIjoiQ2hpbGxpZXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6Mjc2LjEwMDg3OTk5OTk5OTksIllFQVIiOiIyMDE2IiwiREFURU5FVyI6Ik1vbiwgMDQgQXByIDIwMTYgMDE6NDY6MDEgR01UIiwiQ0FURUdPUlkiOiJNdXNocm9vbXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6MjAyLjg4NDc0MDAwMDAwMDA4LCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJNb24sIDA0IEFwciAyMDE2IDAzOjUyOjA4IEdNVCIsIkNBVEVHT1JZIjoiTWVsb25zIiwiTU9OVEgiOiIwNCJ9LHsiU0FMRVMiOjEzMS4zNTI3NiwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVHVlLCAwNSBBcHIgMjAxNiAwMTo0Njo0MiBHTVQiLCJDQVRFR09SWSI6IlRyb3BpY2FsIEZydWl0cyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjo5MC41NTgxODE4MTgxODE4MSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVHVlLCAwNSBBcHIgMjAxNiAwNDowMTowNyBHTVQiLCJDQVRFR09SWSI6Ik90aGVyIEZydWl0cyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjoxODcuNjMyMjU5OTk5OTk5OTIsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IlR1ZSwgMDUgQXByIDIwMTYgMDQ6NDk6MjYgR01UIiwiQ0FURUdPUlkiOiJQZWFycyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjo0OTYuMzc4MDgwMDAwMDAwMywiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVHVlLCAwNSBBcHIgMjAxNiAwNTowMDoyOSBHTVQiLCJDQVRFR09SWSI6Ik9uaW9ucyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjoyMC40NDE3NCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVHVlLCAwNSBBcHIgMjAxNiAyMjozNjozNCBHTVQiLCJDQVRFR09SWSI6IlZlZ2dpZXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6NjQyLjgyMTk0MDAwMDAwMDIsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IldlZCwgMDYgQXByIDIwMTYgMDI6MTY6MTMgR01UIiwiQ0FURUdPUlkiOiJQb3RhdG9lcyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjoyNzUuODAwMDAwMDAwMDAwMiwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiV2VkLCAwNiBBcHIgMjAxNiAwMzoyNjo1MiBHTVQiLCJDQVRFR09SWSI6IkF2b2NhZG9lcyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjozOS45NiwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiV2VkLCAwNiBBcHIgMjAxNiAwMzoyNzo1OCBHTVQiLCJDQVRFR09SWSI6Ikdyb2Nlcmllcy1EcnkgR29vZHMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6NjE4Ljk2NTc3OTk5OTk5OTcsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IldlZCwgMDYgQXByIDIwMTYgMDQ6NDc6NTMgR01UIiwiQ0FURUdPUlkiOiJTdG9uZWZydWl0cyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjozNDguNTEyMDAwMDAwMDAwMiwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVGh1LCAwNyBBcHIgMjAxNiAwMjo0NToxMyBHTVQiLCJDQVRFR09SWSI6IkxldHR1Y2VzIiwiTU9OVEgiOiIwNCJ9LHsiU0FMRVMiOjI5My4xMDAwMDAwMDAwMDAyNSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiVGh1LCAwNyBBcHIgMjAxNiAwMzoyNDo0OCBHTVQiLCJDQVRFR09SWSI6IkJ1bmNoIFZlZ2llcyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjoyMjcuMzQ5OTk5OTk5OTk5ODUsIllFQVIiOiIyMDE2IiwiREFURU5FVyI6IkZyaSwgMDggQXByIDIwMTYgMDE6MDQ6NDQgR01UIiwiQ0FURUdPUlkiOiJFZ2dzIiwiTU9OVEgiOiIwNCJ9LHsiU0FMRVMiOjEzOC45NzE5OTk5OTk5OTk5OCwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiRnJpLCAwOCBBcHIgMjAxNiAwNDoyMTo1NCBHTVQiLCJDQVRFR09SWSI6IkhlcmJzIiwiTU9OVEgiOiIwNCJ9LHsiU0FMRVMiOjUwMi4zNzIzODAwMDAwMDAyNSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU2F0LCAwOSBBcHIgMjAxNiAwMzozNDo1MCBHTVQiLCJDQVRFR09SWSI6IkFwcGxlcyIsIk1PTlRIIjoiMDQifSx7IlNBTEVTIjo3NC4yNzAwMDAwMDAwMDAwMSwiWUVBUiI6IjIwMTYiLCJEQVRFTkVXIjoiU2F0LCAwOSBBcHIgMjAxNiAwNDoyMjozNyBHTVQiLCJDQVRFR09SWSI6IkJlcnJpZXMiLCJNT05USCI6IjA0In0seyJTQUxFUyI6Mi4wLCJZRUFSIjoiMjAxNiIsIkRBVEVORVciOiJTYXQsIDA5IEFwciAyMDE2IDA0OjIyOjM3IEdNVCIsIkNBVEVHT1JZIjoiQ3V0IEZydWl0cyIsIk1PTlRIIjoiMDQifQogICAgICAgIF0KCiAgICAvLyB2YXIgbWFwID0gYXBpX2RhdGEucmVkdWNlKChyLCBpKSA9PiAoY29uc29sZS5sb2cociksKChyW2kuQ0FURUdPUlldID0gcltpLkNBVEVHT1JZXSB8fCBbXSkucHVzaCh7CiAgICAvLyAgIGRhdGUgOiBpLkRBVEVORVcsCiAgICAvLyAgIHNhbGVzOiBpLlNBTEVTCiAgICAvLyB9KSwgcikpLCB7fSk7CiAgICAvLyB2YXIgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKG1hcCk7CiAgICAvLyBjb25zdCBzZWNvbmRfZGF0YSA9IFtdOwogICAgLy8gICBmb3IobGV0IGkgPTA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAvLyAgICAgc2Vjb25kX2RhdGEucHVzaCh7CiAgICAvLyAgICAgICBsYWJlbCA6IGVudHJpZXNbaV1bMF0sCiAgICAvLyAgICAgICBkYXRhOiBbXSwKICAgIC8vICAgICB9KQogICAgLy8gICAgIGZvcihsZXQgaiA9MCA7IGogPCBlbnRyaWVzW2ldWzFdLmxlbmd0aDsgaisrKSB7CiAgICAvLyAgICAgICBzZWNvbmRfZGF0YVtpXS5kYXRhLnB1c2goewogICAgLy8gICAgICAgICBkYXRlOiBlbnRyaWVzW2ldWzFdW2pdLmRhdGUsCiAgICAvLyAgICAgICAgIHNhbGVzOiBlbnRyaWVzW2ldWzFdW2pdLnNhbGVzCiAgICAvLyAgICAgICB9KQogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gY29uc29sZS5sb2coInNlY29uZCBkYXRhIixzZWNvbmRfZGF0YSkKCiAgICAvLyBjb25zdCBkYXRhID0gW107CiAgICAvLyAgIGZvcihsZXQgaSA9MDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHsKICAgIC8vICAgICBkYXRhLnB1c2goewogICAgLy8gICAgICAgbGFiZWwgOiBlbnRyaWVzW2ldWzBdLAogICAgLy8gICAgICAgZGF0YTogW10sCiAgICAvLyAgICAgfSkKICAgIC8vICAgICBmb3IobGV0IGogPTAgOyBqIDwgZW50cmllc1tpXVsxXS5sZW5ndGg7IGorKykgewogICAgLy8gICAgICAgZGF0YVtpXS5kYXRhLnB1c2goewogICAgLy8gICAgICAgICBkYXRlOiBuZXcgRGF0ZShlbnRyaWVzW2ldWzFdW2pdLmRhdGUpLAogICAgLy8gICAgICAgICBzYWxlczogZW50cmllc1tpXVsxXVtqXS5zYWxlcwogICAgLy8gICAgICAgfSkKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIHZhciB2bSA9dGhpczsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYXBpRGF0YSk7CiAgICB2YXIgbWFwID0gdGhpcy5hcGlEYXRhLnJlZHVjZSgociwgaSkgPT4gKChyW2lbdGhpcy54S2V5XV0gPSByW2lbdGhpcy54S2V5XV0gfHwgW10pLnB1c2goewogICAgICAvLyBkYXRlIDogaVsiTU9OVEgiXSsiLyIrIjAxLyIraVsiWUVBUiJdLAogICAgICBkYXRlIDogaVt0aGlzLmRhdGVLZXldLAogICAgICAvLyBkYXRlIDogaVsiTU9OVEgiXSwKICAgICAgc2FsZXM6IGlbdGhpcy55S2V5XQogICAgICAvLyBpCiAgICB9KSwgciksIHt9KTsKICAgIHZhciBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMobWFwKTsKICAgIC8vIGNvbnNvbGUubG9nKGVudHJpZXMpOwogICAgY29uc3Qgc2Vjb25kX2RhdGEgPSBbXTsKICAgICAgZm9yKGxldCBpID0wOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHNlY29uZF9kYXRhLnB1c2goewogICAgICAgICAgbGFiZWwgOiBlbnRyaWVzW2ldWzBdLAogICAgICAgICAgZGF0YTogW10sCiAgICAgICAgfSkKICAgICAgICBmb3IobGV0IGogPTAgOyBqIDwgZW50cmllc1tpXVsxXS5sZW5ndGg7IGorKykgewogICAgICAgICAgc2Vjb25kX2RhdGFbaV0uZGF0YS5wdXNoKHsKICAgICAgICAgICAgZGF0ZTogZW50cmllc1tpXVsxXVtqXS5kYXRlLAogICAgICAgICAgICBzYWxlczogZW50cmllc1tpXVsxXVtqXS5zYWxlcwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0KICAgIC8vIGNvbnNvbGUubG9nKCJzZWNvbmQgZGF0YSIsc2Vjb25kX2RhdGEpCgogICAgY29uc3QgZGF0YSA9IFtdOwogICAgICBmb3IobGV0IGkgPTA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZGF0YS5wdXNoKHsKICAgICAgICAgIGxhYmVsIDogZW50cmllc1tpXVswXSwKICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgIH0pCiAgICAgICAgZm9yKGxldCBqID0wIDsgaiA8IGVudHJpZXNbaV1bMV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGRhdGFbaV0uZGF0YS5wdXNoKHsKICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoZW50cmllc1tpXVsxXVtqXS5kYXRlKSwKICAgICAgICAgICAgc2FsZXM6IGVudHJpZXNbaV1bMV1bal0uc2FsZXMKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CgogICAgLy8gY29uc29sZS5sb2coZGF0YVswXS5kYXRhWzBdLmRhdGUsICJISSIsbmV3IERhdGUoZGF0YVswXS5kYXRhWzBdLmRhdGUpKTsKICAgIC8vIGNvbnNvbGUubG9nKCJmaW5hbCBkYXRhIixkYXRhLCJIaSIpOwoKCiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAxMCwgYm90dG9tOiA1MCwgbGVmdDogNjB9LAogICAgICBjaGFydCA9IGQzTGluZVdpdGhMZWdlbmQoKQogICAgICAgICAgICAgICAgLnhBeGlzLmxhYmVsKHRoaXMueEtleSkKICAgICAgICAgICAgICAgIC53aWR0aCh3aWR0aChtYXJnaW4pKQogICAgICAgICAgICAgICAgLmhlaWdodChoZWlnaHQobWFyZ2luKSkKICAgICAgICAgICAgICAgIC55QXhpcy5sYWJlbCh0aGlzLnlLZXkpOwoKCiAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnI3Rlc3QxIHN2ZycpCiAgICAgIC5kYXR1bShnZW5lcmF0ZURhdGEoKSkKCiAgc3ZnLnRyYW5zaXRpb24oKS5kdXJhdGlvbigwKQogICAgICAuYXR0cignd2lkdGgnLCB3aWR0aChtYXJnaW4pKQogICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KG1hcmdpbikpCiAgICAgIC5jYWxsKGNoYXJ0KTsKCgogIGNoYXJ0LmRpc3BhdGNoLm9uKCdzaG93VG9vbHRpcCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgb2Zmc2V0ID0gJCgnI3Rlc3QxJykub2Zmc2V0KCksIC8vIHsgbGVmdDogMCwgdG9wOiAwIH0KICAgICAgICBsZWZ0ID0gZS5wb3NbMF0gKyBvZmZzZXQubGVmdCwKICAgICAgICB0b3AgPSBlLnBvc1sxXSArIG9mZnNldC50b3AsCiAgICAgICAgLy8gZm9ybWF0dGVyID0gZDMudGltZS5mb3JtYXQoIiVtLyVkLyVZIikKICAgICAgICBmb3JtYXR0ZXIgPSBkMy50aW1lLmZvcm1hdCgiJWEsJWIvJWQvJXkiKQogICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgLy8gVE9ETyA6ICAKICAgIHZhciBjb250ZW50ID0gJzxoMz4nICsgZS5zZXJpZXMubGFiZWwgKyAnPC9oMz4nICsKICAgICAgICAgICAgICAgICAgJzxwPicgKwogICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InZhbHVlIj5bJyArIGUucG9pbnQuc2FsZXMudG9GaXhlZCgyKSArICcsICcgKyBmb3JtYXR0ZXIoZS5wb2ludC5kYXRlKSArICddPC9zcGFuPicgKwogICAgICAgICAgICAgICAgICAnPC9wPic7CiAgICAgICAgICAgICAgCgogICAgbnZ0b29sdGlwLnNob3coW2xlZnQsIHRvcF0sIGNvbnRlbnQpOwogIH0pOwoKICBjaGFydC5kaXNwYXRjaC5vbignaGlkZVRvb2x0aXAnLCBmdW5jdGlvbihlKSB7CiAgICBudnRvb2x0aXAuY2xlYW51cCgpOwogIH0pOwoKCgoKICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkgewogICAgcmVzaXplX29mX3BhZ2UoKTsKCiAgICB9KTsKCiAgICBmdW5jdGlvbiByZXNpemVfb2ZfcGFnZSgpewogICAgICAgICAgdmFyIG1hcmdpbiA9IGNoYXJ0Lm1hcmdpbigpOwogICAgY2hhcnQKICAgICAgLndpZHRoKHdpZHRoKG1hcmdpbikpCiAgICAgIC5oZWlnaHQoaGVpZ2h0KG1hcmdpbikpOwoKICAgIGQzLnNlbGVjdCgnI3Rlc3QxIHN2ZycpCiAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKG1hcmdpbikpCiAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQobWFyZ2luKSkKICAgICAgLmNhbGwoY2hhcnQpOwogICAgfQoKCiAgZnVuY3Rpb24gd2lkdGgobWFyZ2luKSB7CiAgICB2YXIgdyA9ICQoIi5jYXJkLWJvZHkiKS53aWR0aCgpIC0gNDA7CgogICAgLy8gcmV0dXJuIDUwMDsKICAgIHJldHVybiAoICh3IC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQgLSAyMCkgPCAwICkgPyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodCArIDIgOiB3OwogIH0KCiAgZnVuY3Rpb24gaGVpZ2h0KG1hcmdpbikgewogICAgLy8gdmFyIGggPSAkKCIuY2FyZC1ib2R5IikuaGVpZ2h0KCkgLSAyMDsKICAgIC8vIHZhciBoID0gJCgiLmNhcmQtYm9keSIpLmhlaWdodCgpIC0gMjA7CiAgICB2YXIgaCA9IDcwMCAtIDEwMDsKCiAgICByZXR1cm4gKCBoIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b20gLSAyMCA8IDAgKSA/IAogICAgICAgICAgICAgIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tICsgMiA6IGg7CgogICAgLy8gcmV0dXJuIDcwMAogIH0KCgogIC8vZGF0YQogIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YSgpIHsKICAgIHZhciBzaW4gPSBbXSwKICAgICAgICBzaW4yID0gW10sCiAgICAgICAgY29zID0gW10sCiAgICAgICAgY29zMiA9IFtdLAogICAgICAgIHNpbjMgID0gW10sCiAgICAgICAgc2luNCA9IFtdLAogICAgICAgIHNpbjUgPSBbXSwKICAgICAgICBzaW42ID0gW10sCiAgICAgICAgY29zMiA9IFtdLAogICAgICAgIHIxID0gTWF0aC5yYW5kb20oKSwKICAgICAgICByMiA9IE1hdGgucmFuZG9tKCksCiAgICAgICAgcjMgPSBNYXRoLnJhbmRvbSgpLAogICAgICAgIHI0ID0gTWF0aC5yYW5kb20oKSwKICAgICAgICByNSA9IE1hdGgucmFuZG9tKCksCiAgICAgICAgcjYgPSBNYXRoLnJhbmRvbSgpLAogICAgICAgIHI3ID0gTWF0aC5yYW5kb20oKQogICAgICAgIC8vIHI0ID0gTWF0aC5yYW5kb20oKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgIHNpbi5wdXNoKFsgaSwgcjEgKiBNYXRoLnNpbiggcjIgKyAgaSAvICgxMCAqIChyNCArIC41KSApKV0pOwogICAgICBjb3MucHVzaChbIGksIHIyICogTWF0aC5jb3MoIHIzICsgaSAvICgxMCAqIChyMyArIC41KSApKV0pOwogICAgICBzaW4yLnB1c2goWyBpLCByMyAqIE1hdGguc2luKCByMyArIGkgLyAoMTAgKiAocjIgKyAuNSkgKSldKTsKICAgICAgc2luMy5wdXNoKFsgaSwgcjQgKiBNYXRoLnNpbiggcjQgKyBpIC8gKDEwICogKHIyICsgLjUpICkpXSk7CiAgICAgIHNpbjQucHVzaChbIGksIHI1ICogTWF0aC5zaW4oIHI1ICsgaSAvICgxMCAqIChyMiArIC41KSApKV0pOwogICAgICBzaW41LnB1c2goWyBpLCByNiAqIE1hdGguc2luKCByNiArIGkgLyAoMTAgKiAocjIgKyAuNSkgKSldKTsKICAgICAgc2luNi5wdXNoKFsgaSwgcjcgKiBNYXRoLnNpbiggcjcgKyBpIC8gKDEwICogKHIyICsgLjUpICkpXSk7CiAgICAgIGNvczIucHVzaChbIGksIHI0ICogTWF0aC5jb3MoIHI0ICsgaSAvICgxMCAqIChyMSArIC41KSApKV0pOwogICAgfQogICAgICAvLyBjb25zb2xlLmxvZyhjb3MpOwoKICAgIHJldHVybiBkYXRhOwoKICAgIC8vIHJldHVybiBbCiAgICAvLyAgIHsKICAgIC8vICAgICBkYXRhOiBzaW4sCiAgICAvLyAgICAgbGFiZWw6ICJTaW5lIFdhdmUiCiAgICAvLyAgIH0sCiAgICAvLyAgIHsKICAgIC8vICAgICBkYXRhOiBjb3MsCiAgICAvLyAgICAgbGFiZWw6ICJDb3NpbmUgV2F2ZSIKICAgIC8vICAgfSwKICAgIC8vICAgewogICAgLy8gICAgIGRhdGE6IHNpbjIsCiAgICAvLyAgICAgbGFiZWw6ICJTaW5lMiBXYXZlIgogICAgLy8gICB9LAogICAgLy8gICB7CiAgICAvLyAgICAgZGF0YTogY29zMiwKICAgIC8vICAgICBsYWJlbDogIkNvc2luZTIgV2F2ZSIKICAgIC8vICAgfSwKICAgIC8vICAgewogICAgLy8gICAgIGRhdGE6IHNpbjMsCiAgICAvLyAgICAgbGFiZWw6ICJTaW5lMyBXYXZlIgogICAgLy8gICB9LAogICAgLy8gICB7CiAgICAvLyAgICAgZGF0YTogc2luNCwKICAgIC8vICAgICBsYWJlbDogIlNpbmU0IFdhdmUiCiAgICAvLyAgIH0sCiAgICAvLyAgIHsKICAgIC8vICAgICBkYXRhOiBzaW41LAogICAgLy8gICAgIGxhYmVsOiAiU2luZTUgV2F2ZSIKICAgIC8vICAgfSwKICAgIC8vICAgewogICAgLy8gICAgIGRhdGE6IHNpbjYsCiAgICAvLyAgICAgbGFiZWw6ICJTaW5lNiBXYXZlIgogICAgLy8gICB9LAoKICAgIC8vIF07CiAgICAvLyBjb25zb2xlLmxvZyhkYXRhKQogIH0KCiAgZnVuY3Rpb24gZDNMZWdlbmQoKSB7CiAgICAgIHZhciBtYXJnaW4gPSB7dG9wOiA1LCByaWdodDogMCwgYm90dG9tOiA1LCBsZWZ0OiAxMH0sCiAgICAgICAgICB3aWR0aCA9IDQwMCwKICAgICAgICAgIGhlaWdodCA9IDIwLAogICAgICAgICAgY29sb3IgPSBkMy5zY2FsZS5jYXRlZ29yeTIwKCkucmFuZ2UoKSwKICAgICAgICAgIGRpc3BhdGNoID0gZDMuZGlzcGF0Y2goJ2xlZ2VuZENsaWNrJywgJ2xlZ2VuZE1vdXNlb3ZlcicsICdsZWdlbmRNb3VzZW91dCcpOwoKCiAgICAgIGZ1bmN0aW9uIGNoYXJ0KHNlbGVjdGlvbikgewogICAgICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJGdW5jdGlvbi1jaGFydCIsZGF0YSk7CiAgICAgICAgICAvKioKICAgICAgICAgICogICAgTGVnZW5kIGN1cmVudGx5IGlzIHNldHVwIHRvIGF1dG9tYXRpY2FseSBleHBhbmQgdmVydGljYWxseSBiYXNlZCBvbiBhIG1heCB3aWR0aC4KICAgICAgICAgICogICAgU2hvdWxkIGltcGxlbWVudCBsZWdlbmQgd2hlcmUgRUlUSEVSIGEgbWF4V2lkdGggb3IgYSBtYXhIZWlnaHQgaXMgZGVmaW5lZCwgdGhlbgogICAgICAgICAgKiAgICB0aGUgb3RoZXIgZGltZW5zaW9uIHdpbGwgYXV0b21hdGljYWxseSBleHBhbmQgdG8gZml0LCBhbmQgYW55dGhpbmcgdGhhdCBleGNlZWRzCiAgICAgICAgICAqICAgIHRoYXQgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNsaXBwZWQuCiAgICAgICAgICAqKi8KCiAgICAgICAgICB2YXIgd3JhcCA9IGQzLnNlbGVjdCh0aGlzKS5zZWxlY3RBbGwoJ2cubGVnZW5kJykuZGF0YShbZGF0YV0pOwogICAgICAgICAgdmFyIGdFbnRlciA9IHdyYXAuZW50ZXIoKS5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdsZWdlbmQnKS5hcHBlbmQoJ2cnKTsKCgogICAgICAgICAgdmFyIGcgPSB3cmFwLnNlbGVjdCgnZycpCiAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5sZWZ0ICsgJywnICsgbWFyZ2luLnRvcCArICcpJyk7CgoKICAgICAgICAgIHZhciBzZXJpZXMgPSBnLnNlbGVjdEFsbCgnLnNlcmllcycpCiAgICAgICAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkgeyByZXR1cm4gZCB9KTsKICAgICAgICAgIHZhciBzZXJpZXNFbnRlciA9IHNlcmllcy5lbnRlcigpLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ3NlcmllcycpCiAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQsIGkpIHsKICAgICAgICAgICAgICAgIC8vIGRpc3BhdGNoLmxlZ2VuZENsaWNrKGQsIGkpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkLCBpKSB7CiAgICAgICAgICAgICAgICBkaXNwYXRjaC5sZWdlbmRNb3VzZW92ZXIoZCwgaSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCwgaSkgewogICAgICAgICAgICAgICAgZGlzcGF0Y2gubGVnZW5kTW91c2VvdXQoZCwgaSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICBzZXJpZXNFbnRlci5hcHBlbmQoJ2NpcmNsZScpCiAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCwgaSl7IHJldHVybiBkLmNvbG9yIHx8IGNvbG9yW2kgJSAxMF0gfSkKICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGZ1bmN0aW9uKGQsIGkpeyByZXR1cm4gZC5jb2xvciB8fCBjb2xvcltpICUgMTBdIH0pCiAgICAgICAgICAgICAgLmF0dHIoJ3InLCA1KTsKICAgICAgICAgIHNlcmllc0VudGVyLmFwcGVuZCgndGV4dCcpCiAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5sYWJlbCB9KQogICAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpCiAgICAgICAgICAgICAgLmF0dHIoJ2R5JywgJy4zMmVtJykKICAgICAgICAgICAgICAuYXR0cignZHgnLCAnOCcpOwogICAgICAgICAgc2VyaWVzLmNsYXNzZWQoJ2Rpc2FibGVkJywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5kaXNhYmxlZCB9KTsKICAgICAgICAgIHNlcmllcy5leGl0KCkucmVtb3ZlKCk7CgoKICAgICAgICAgIHZhciB5cG9zID0gNSwKICAgICAgICAgICAgICBuZXd4cG9zID0gNSwKICAgICAgICAgICAgICBtYXh3aWR0aCA9IDAsCiAgICAgICAgICAgICAgeHBvczsKICAgICAgICAgIHNlcmllcwogICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkLCBpKSB7CiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpLm5vZGUoKS5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSArIDI4OwogICAgICAgICAgICAgICAgeHBvcyA9IG5ld3hwb3M7CgogICAgICAgICAgICAgICAgLy9UT0RPOiAxKSBNYWtlIHN1cmUgZG90ICsgdGV4dCBvZiBldmVyeSBzZXJpZXMgZml0cyBob3Jpem9udGFsbHksIG9yIGNsaXAgdGV4dCB0byBmaXgKICAgICAgICAgICAgICAgIC8vICAgICAgMikgQ29uc2lkZXIgbWFraW5nIGNvbHVtbnMgaW4gbGluZSBzbyBkb3RzIGxpbmUgdXAKICAgICAgICAgICAgICAgIC8vICAgICAgICAgLS1hbGwgbGFiZWxzIHNhbWUgd2lkdGg/IG9yIGp1c3QgYWxsIGluIHRoZSBzYW1lIGNvbHVtbj8KICAgICAgICAgICAgICAgIC8vICAgICAgICAgLS1vcHRpb25hbCwgb3IgZm9yY2VkIGFsd2F5cz8KICAgICAgICAgICAgICAgIGlmICh3aWR0aCA8IG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0ICsgeHBvcyArIGxlbmd0aCkgewogICAgICAgICAgICAgICAgICBuZXd4cG9zID0geHBvcyA9IDU7CiAgICAgICAgICAgICAgICAgIHlwb3MgKz0gMjA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbmV3eHBvcyArPSBsZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmV3eHBvcyA+IG1heHdpZHRoKSBtYXh3aWR0aCA9IG5ld3hwb3M7CgogICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHhwb3MgKyAnLCcgKyB5cG9zICsgJyknOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vcG9zaXRpb24gbGVnZW5kIGFzIGZhciByaWdodCBhcyBwb3NzaWJsZSB3aXRoaW4gdGhlIHRvdGFsIHdpZHRoCiAgICAgICAgICBnLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArICh3aWR0aCAtIG1hcmdpbi5yaWdodCAtIG1heHdpZHRoKSArICcsJyArIG1hcmdpbi50b3AgKyAnKScpOwoKICAgICAgICAgIGhlaWdodCA9IG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tICsgeXBvcyArIDE1OwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gY2hhcnQ7CiAgICAgIH0KCiAgICAgIGNoYXJ0LmRpc3BhdGNoID0gZGlzcGF0Y2g7CgogICAgICBjaGFydC5tYXJnaW4gPSBmdW5jdGlvbihfKSB7CiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbWFyZ2luOwogICAgICAgIG1hcmdpbiA9IF87CiAgICAgICAgcmV0dXJuIGNoYXJ0OwogICAgICB9OwoKICAgICAgY2hhcnQud2lkdGggPSBmdW5jdGlvbihfKSB7CiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gd2lkdGg7CiAgICAgICAgd2lkdGggPSBfOwogICAgICAgIHJldHVybiBjaGFydDsKICAgICAgfTsKCiAgICAgIGNoYXJ0LmhlaWdodCA9IGZ1bmN0aW9uKF8pIHsKICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBoZWlnaHQ7CiAgICAgICAgaGVpZ2h0ID0gXzsKICAgICAgICByZXR1cm4gY2hhcnQ7CiAgICAgIH07CgogICAgICBjaGFydC5jb2xvciA9IGZ1bmN0aW9uKF8pIHsKICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBjb2xvcjsKICAgICAgICBjb2xvciA9IF87CiAgICAgICAgcmV0dXJuIGNoYXJ0OwogICAgICB9OwoKICAgICAgcmV0dXJuIGNoYXJ0OwogIH0KCgogIGZ1bmN0aW9uIGQzTGluZSgpIHsKICB2YXIgbWFyZ2luID0ge3RvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCwgbGVmdDogMH0sCiAgICAgIHdpZHRoID0gOTYwLAogICAgICBoZWlnaHQgPSA1MDAsCiAgICAgIGRvdFJhZGl1cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMi41IH0sCiAgICAgIGNvbG9yID0gZDMuc2NhbGUuY2F0ZWdvcnkyMCgpLnJhbmdlKCksCiAgICAgIGlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApLCAvL0NyZWF0ZSBzZW1pLXVuaXF1ZSBJRCBpbmNhc2UgdXNlciBkb2Vzbid0IHNlbGVjdCBvbmUKICAgICAgLy8geCA9IGQzLnNjYWxlLmxpbmVhcigpLAogICAgICB4ID0gZDMudGltZS5zY2FsZSgpLAogICAgICB5ID0gZDMuc2NhbGUubGluZWFyKCksCiAgICAgIGRpc3BhdGNoID0gZDMuZGlzcGF0Y2goInBvaW50TW91c2VvdmVyIiwgInBvaW50TW91c2VvdXQiKSwKICAgICAgeDAsIHkwOwoKCiAgZnVuY3Rpb24gY2hhcnQoc2VsZWN0aW9uKSB7CiAgICBzZWxlY3Rpb24uZWFjaChmdW5jdGlvbihkYXRhKSB7CiAgICAgIHZhciBzZXJpZXNEYXRhID0gZGF0YS5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5kYXRhIH0pOwogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgLy8gY29uc29sZS5sb2coc2VyaWVzRGF0YSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRvbWFpbihkMy5leHRlbnQoZDMubWVyZ2Uoc2VyaWVzRGF0YSksIGZ1bmN0aW9uKGQpIHsgIHJldHVybiBkLmRhdGUgfSApKSk7CiAgICAgIHgwID0geDAgfHwgeDsKICAgICAgeTAgPSB5MCB8fCB5OwoKICAgICAgLy9UT0RPOiByZWNvbnNpZGVyIHBvaW50cyB7eDogIywgeTogI30gaW5zdGVhZCBvZiBbeCx5XQogICAgICAvL1RPRE86IGRhdGEgYWNjZXNzb3JzIHNvIGFib3ZlIHdvbid0IHJlYWxseSBtYXR0ZXIsIGJ1dCBuZWVkIHRvIGRlY2lkZSBmb3IgaW50ZXJuYWwgdXNlCgogICAgICAvL2FkZCBzZXJpZXMgZGF0YSB0byBlYWNoIHBvaW50IGZvciBmdXR1cmUgZWFzZSBvZiB1c2UKICAgICAgZGF0YSA9IGRhdGEubWFwKGZ1bmN0aW9uKHNlcmllcywgaSkgewogICAgICAgIHNlcmllcy5kYXRhID0gc2VyaWVzLmRhdGEubWFwKGZ1bmN0aW9uKHBvaW50KSB7CiAgICAgICAgICBwb2ludC5zZXJpZXMgPSBpOwogICAgICAgICAgcmV0dXJuIHBvaW50OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBzZXJpZXM7CiAgICAgIH0pOwoKCiAgICAgIC8vIHggICAuZG9tYWluKGQzLmV4dGVudChkMy5tZXJnZShzZXJpZXNEYXRhKSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZFswXSB9ICkpCiAgICAgIHguZG9tYWluKGQzLmV4dGVudChkMy5tZXJnZShzZXJpZXNEYXRhKSwgZnVuY3Rpb24oZCkgeyAgcmV0dXJuIGQuZGF0ZSB9ICkpCiAgICAgIC8vIHggICAuZG9tYWluKGQzLmV4dGVudChhcGlfZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5EQVRFTkVXOyB9KSkKICAgICAgICAvLyB4LmRvbWFpbihhcGlfZGF0YS5tYXAoKGQpPT57CiAgICAgICAgLy8gcmV0dXJuIGQuREFURU5FVwogICAgICAgIC8vIH0pKQogICAgICAgICAgLnJhbmdlKFswLCB3aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0XSk7CgogICAgICAvLyB5ICAgLmRvbWFpbihkMy5leHRlbnQoZDMubWVyZ2Uoc2VyaWVzRGF0YSksIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGRbMV0gfSApKQogICAgICB5LmRvbWFpbihkMy5leHRlbnQoZDMubWVyZ2Uoc2VyaWVzRGF0YSksIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc2FsZXMgfSApKQogICAgICAgICAgLnJhbmdlKFtoZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSwgMF0pOwoKICAgICAgLy8gdmFyIHZlcnRpY2VzID0gIiI7CgogICAgICB2YXIgdmVydGljZXMgPSBkMy5tZXJnZShkYXRhLm1hcChmdW5jdGlvbihsaW5lLCBsaW5lSW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGxpbmUuZGF0YS5tYXAoZnVuY3Rpb24ocG9pbnQsIHBvaW50SW5kZXgpIHsKICAgICAgICAgICAgICB2YXIgcG9pbnRLZXkgPSBsaW5lLmxhYmVsICsgJy0nICsgcG9pbnRbMF07CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocG9pbnQpCiAgICAgICAgICAgICAgLy8gcmV0dXJuIFt4KHBvaW50WzBdKSwgeShwb2ludFsxXSksIGxpbmVJbmRleCwgcG9pbnRJbmRleF07IC8vYWRkaW5nIHNlcmllcyBpbmRleCB0byBwb2ludCBiZWNhdXNlIGRhdGEgaXMgYmVpbmcgZmxhdHRlbmVkCiAgICAgICAgICAgICAgcmV0dXJuIFt4KHBvaW50LmRhdGUpLCB5KHBvaW50LnNhbGVzKSwgbGluZUluZGV4LCBwb2ludEluZGV4XTsgLy9hZGRpbmcgc2VyaWVzIGluZGV4IHRvIHBvaW50IGJlY2F1c2UgZGF0YSBpcyBiZWluZyBmbGF0dGVuZWQKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJ2ZXJ0aSIsdmVydGljZXMpOwoKCiAgICAgIHZhciB3cmFwID0gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbCgnZy5kM2xpbmUnKS5kYXRhKFtkYXRhXSk7CiAgICAgIHZhciBnRW50ZXIgPSB3cmFwLmVudGVyKCkuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnZDNsaW5lJykuYXBwZW5kKCdnJyk7CgogICAgICBnRW50ZXIuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnbGluZXMnKTsKICAgICAgZ0VudGVyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ3BvaW50LWNsaXBzJyk7CiAgICAgIGdFbnRlci5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdwb2ludC1wYXRocycpOwoKCiAgICAgIHZhciBnID0gd3JhcC5zZWxlY3QoJ2cnKQogICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5sZWZ0ICsgJywnICsgbWFyZ2luLnRvcCArICcpJyk7CgoKCiAgICAgIHZhciB2b3Jvbm9pQ2xpcCA9ICBnRW50ZXIuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAndm9yb25vaS1jbGlwJykKICAgICAgICAuYXBwZW5kKCdjbGlwUGF0aCcpCiAgICAgICAgICAuYXR0cignaWQnLCAndm9yb25vaS1jbGlwLXBhdGgtJyArIGlkKSAvL3RoaXMgaWQgc2hvdWxkIHByb2JhYmx5IGJlIHNldCBvbiB1cGRhdGUsIHVubGVzcyBJRCBpcyBhbHdheXMgc2V0IGJlZm9yZSByZW5kZXIKICAgICAgICAuYXBwZW5kKCdyZWN0Jyk7CiAgICAgIHdyYXAuc2VsZWN0KCcudm9yb25vaS1jbGlwIHJlY3QnKQogICAgICAgICAgLmF0dHIoJ3gnLCAtMTApCiAgICAgICAgICAuYXR0cigneScsIC0xMCkKICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQgKyAyMCkKICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSArIDIwKTsKICAgICAgd3JhcC5zZWxlY3QoJy5wb2ludC1wYXRocycpCiAgICAgICAgICAuYXR0cignY2xpcC1wYXRoJywgJ3VybCgjdm9yb25vaS1jbGlwLXBhdGgtJyArIGlkICsgJyknKTsKCgogICAgICAvL3ZhciBwb2ludENsaXBzID0gd3JhcC5zZWxlY3QoJy5wb2ludC1jbGlwcycpLnNlbGVjdEFsbCgnY2xpcFBhdGgnKSAvLyAqKkJST1dTRVIgQlVHKiogY2FuJ3QgcmVzZWxlY3QgY2FtZWwgY2FzZWQgZWxlbWVudHMKICAgICAgdmFyIHBvaW50Q2xpcHMgPSB3cmFwLnNlbGVjdCgnLnBvaW50LWNsaXBzJykuc2VsZWN0QWxsKCcuY2xpcC1wYXRoJykKICAgICAgICAgIC5kYXRhKHZlcnRpY2VzKTsKICAgICAgcG9pbnRDbGlwcy5lbnRlcigpLmFwcGVuZCgnY2xpcFBhdGgnKS5hdHRyKCdjbGFzcycsICdjbGlwLXBhdGgnKQogICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpCiAgICAgICAgICAuYXR0cigncicsIDI1KTsKICAgICAgcG9pbnRDbGlwcy5leGl0KCkucmVtb3ZlKCk7CiAgICAgIHBvaW50Q2xpcHMKICAgICAgICAgIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuICdjbGlwLScgKyBpZCArICctJyArIGRbMl0gKyAnLScgKyBkWzNdIH0pCiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkgeyByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZFswXSArICcsJyArIGRbMV0gKyAnKScgfSk7CgoKICAgICAgdmFyIHZvcm9ub2kgPSBkMy5nZW9tLnZvcm9ub2kodmVydGljZXMpLm1hcChmdW5jdGlvbihkLGkpIHsKICAgICAgICAgIHJldHVybiB7ICdkYXRhJzogZCwgJ3Nlcmllcyc6IHZlcnRpY2VzW2ldWzJdLCAncG9pbnQnOiB2ZXJ0aWNlc1tpXVszXSB9CiAgICAgIH0pOwogICAgICAvLyBjb25zb2xlLmxvZygidm9ybyIsdm9yb25vaSk7CgogICAgICAvL1RPRE86IEFkZCB2ZXJ5IHNtYWxsIGFtb3VudCBvZiBub2lzZSB0byBwcmV2ZW50IGR1cGxpY2F0ZXMKICAgICAgdmFyIHBvaW50UGF0aHMgPSB3cmFwLnNlbGVjdCgnLnBvaW50LXBhdGhzJykuc2VsZWN0QWxsKCdwYXRoJykKICAgICAgICAgIC5kYXRhKHZvcm9ub2kpOwogICAgICBwb2ludFBhdGhzLmVudGVyKCkuYXBwZW5kKCdwYXRoJykKICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsaSkgeyByZXR1cm4gJ3BhdGgtJyArIGk7IH0pOwogICAgICBwb2ludFBhdGhzLmV4aXQoKS5yZW1vdmUoKTsKICAgICAgcG9pbnRQYXRocwogICAgICAgICAgLmF0dHIoJ2NsaXAtcGF0aCcsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuICd1cmwoI2NsaXAtJyArIGlkICsgJy0nICsgZC5zZXJpZXMgKyAnLScgKyBkLnBvaW50ICsgJyknOyB9KQogICAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7IHJldHVybiAnTScgKyBkLmRhdGEuam9pbignLCcpICsgJ1onOyB9KQogICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgIGRpc3BhdGNoLnBvaW50TW91c2VvdmVyKHsKICAgICAgICAgICAgICBwb2ludDogZGF0YVtkLnNlcmllc10uZGF0YVtkLnBvaW50XSwKICAgICAgICAgICAgICBzZXJpZXM6IGRhdGFbZC5zZXJpZXNdLAogICAgICAgICAgICAgIC8vIHBvczogW3goZGF0YVtkLnNlcmllc10uZGF0YVtkLnBvaW50XVswXSkgKyBtYXJnaW4ubGVmdCwgeShkYXRhW2Quc2VyaWVzXS5kYXRhW2QucG9pbnRdWzFdKSArIG1hcmdpbi50b3BdLAogICAgICAgICAgICAgIHBvczogW3goZGF0YVtkLnNlcmllc10uZGF0YVtkLnBvaW50XS5kYXRlKSArIG1hcmdpbi5sZWZ0LCB5KGRhdGFbZC5zZXJpZXNdLmRhdGFbZC5wb2ludF0uc2FsZXMpICsgbWFyZ2luLnRvcF0sCiAgICAgICAgICAgICAgcG9pbnRJbmRleDogZC5wb2ludCwKICAgICAgICAgICAgICBzZXJpZXNJbmRleDogZC5zZXJpZXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgZGlzcGF0Y2gucG9pbnRNb3VzZW91dCh7CiAgICAgICAgICAgICAgcG9pbnQ6IGQsCiAgICAgICAgICAgICAgc2VyaWVzOiBkYXRhW2Quc2VyaWVzXSwKICAgICAgICAgICAgICBwb2ludEluZGV4OiBkLnBvaW50LAogICAgICAgICAgICAgIHNlcmllc0luZGV4OiBkLnNlcmllcwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKCiAgICAgIGRpc3BhdGNoLm9uKCdwb2ludE1vdXNlb3Zlci5wb2ludCcsIGZ1bmN0aW9uKGQpIHsgCiAgICAgICAgd3JhcC5zZWxlY3QoJy5saW5lLScgKyBkLnNlcmllc0luZGV4ICsgJyAucG9pbnQtJyArIGQucG9pbnRJbmRleCkKICAgICAgICAgIC5jbGFzc2VkKCdob3ZlcicsIHRydWUpOwogICAgICB9KTsKCiAgICAgIGRpc3BhdGNoLm9uKCdwb2ludE1vdXNlb3V0LnBvaW50JywgZnVuY3Rpb24oZCkgeyAKICAgICAgICB3cmFwLnNlbGVjdCgnLmxpbmUtJyArIGQuc2VyaWVzSW5kZXggKyAnIC5wb2ludC0nICsgZC5wb2ludEluZGV4KQogICAgICAgICAgLmNsYXNzZWQoJ2hvdmVyJywgZmFsc2UpOwogICAgICB9KTsKCgoKICAgICAgdmFyIGxpbmVzID0gd3JhcC5zZWxlY3QoJy5saW5lcycpLnNlbGVjdEFsbCgnLmxpbmUnKQogICAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkgeyByZXR1cm4gZCB9LCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmxhYmVsIH0pOwogICAgICBsaW5lcy5lbnRlcigpLmFwcGVuZCgnZycpCiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgMWUtNikKICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMWUtNik7CiAgICAgIGQzLnRyYW5zaXRpb24obGluZXMuZXhpdCgpKQogICAgICAgICAgLnN0eWxlKCdzdHJva2Utb3BhY2l0eScsIDFlLTYpCiAgICAgICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIDFlLTYpCiAgICAgICAgICAucmVtb3ZlKCk7CiAgICAgIGxpbmVzLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCxpKSB7IHJldHVybiAnbGluZSBsaW5lLScgKyBpIH0pCiAgICAgICAgICAuY2xhc3NlZCgnaG92ZXInLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmhvdmVyIH0pCiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkLGkpIHsgcmV0dXJuIGNvbG9yW2kgJSAxMF0gfSkKICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgZnVuY3Rpb24oZCxpKSB7IHJldHVybiBjb2xvcltpICUgMTBdIH0pCiAgICAgIGQzLnRyYW5zaXRpb24obGluZXMpCiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZS1vcGFjaXR5JywgMSkKICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgLjUpOwoKCiAgICAgIHZhciBwYXRocyA9IGxpbmVzLnNlbGVjdEFsbCgncGF0aCcpCiAgICAgICAgICAuZGF0YShmdW5jdGlvbihkLCBpKSB7IHJldHVybiBbZC5kYXRhXSB9KTsKICAgICAgcGF0aHMuZW50ZXIoKS5hcHBlbmQoJ3BhdGgnKQogICAgICAgICAgLmF0dHIoJ2QnLCBkMy5zdmcubGluZSgpCiAgICAgICAgICAgIC8vIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgwKGRbMF0pIH0pCiAgICAgICAgICAgIC8vIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkwKGRbMV0pIH0pCiAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4MChkLmRhdGUpIH0pCiAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkwKGQuc2FsZXMpIH0pCiAgICAgICAgICApOwogICAgICBwYXRocy5leGl0KCkucmVtb3ZlKCk7CiAgICAgIGQzLnRyYW5zaXRpb24ocGF0aHMpCiAgICAgICAgICAuYXR0cignZCcsIGQzLnN2Zy5saW5lKCkKICAgICAgICAgICAgLy8gLngoZnVuY3Rpb24oZCkgeyByZXR1cm4geChkWzBdKSB9KQogICAgICAgICAgICAvLyAueShmdW5jdGlvbihkKSB7IHJldHVybiB5KGRbMV0pIH0pCiAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KGQuZGF0ZSkgfSkKICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLnNhbGVzKSB9KQogICAgICAgICAgKTsKCgogICAgICB2YXIgcG9pbnRzID0gbGluZXMuc2VsZWN0QWxsKCdjaXJjbGUucG9pbnQnKQogICAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5kYXRhIH0pOwogICAgICBwb2ludHMuZW50ZXIoKS5hcHBlbmQoJ2NpcmNsZScpCiAgICAgICAgICAvLyAuYXR0cignY3gnLCBmdW5jdGlvbihkKSB7IHJldHVybiB4MChkWzBdKSB9KQogICAgICAgICAgLy8gLmF0dHIoJ2N5JywgZnVuY3Rpb24oZCkgeyByZXR1cm4geTAoZFsxXSkgfSk7CiAgICAgICAgICAuYXR0cignY3gnLCBmdW5jdGlvbihkKSB7IHJldHVybiB4MChkLmRhdGUpIH0pCiAgICAgICAgICAuYXR0cignY3knLCBmdW5jdGlvbihkKSB7IHJldHVybiB5MChkLnNhbGVzKSB9KTsKICAgICAgcG9pbnRzLmV4aXQoKS5yZW1vdmUoKTsKICAgICAgcG9pbnRzLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCxpKSB7IHJldHVybiAncG9pbnQgcG9pbnQtJyArIGkgfSk7CiAgICAgIGQzLnRyYW5zaXRpb24ocG9pbnRzKQogICAgICAgICAgLy8gLmF0dHIoJ2N4JywgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkWzBdKSB9KQogICAgICAgICAgLy8gLmF0dHIoJ2N5JywgZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKSB9KQogICAgICAgICAgLmF0dHIoJ2N4JywgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkLmRhdGUpIH0pCiAgICAgICAgICAuYXR0cignY3knLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQuc2FsZXMpIH0pCiAgICAgICAgICAuYXR0cigncicsIGRvdFJhZGl1cygpKTsKCiAgICB9KTsKCiAgICB4MCA9IHg7CiAgICB5MCA9IHk7CgogICAgcmV0dXJuIGNoYXJ0OwogIH0KCgoKICBjaGFydC5kaXNwYXRjaCA9IGRpc3BhdGNoOwoKICBjaGFydC5tYXJnaW4gPSBmdW5jdGlvbihfKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBtYXJnaW47CiAgICBtYXJnaW4gPSBfOwogICAgcmV0dXJuIGNoYXJ0OwogIH07CgogIGNoYXJ0LndpZHRoID0gZnVuY3Rpb24oXykgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gd2lkdGg7CiAgICB3aWR0aCA9IF87CiAgICByZXR1cm4gY2hhcnQ7CiAgfTsKCiAgY2hhcnQuaGVpZ2h0ID0gZnVuY3Rpb24oXykgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaGVpZ2h0OwogICAgaGVpZ2h0ID0gXzsKICAgIHJldHVybiBjaGFydDsKICB9OwoKICBjaGFydC5kb3RSYWRpdXMgPSBmdW5jdGlvbihfKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkb3RSYWRpdXM7CiAgICBkb3RSYWRpdXMgPSBkMy5mdW5jdG9yKF8pOwogICAgcmV0dXJuIGNoYXJ0OwogIH07CgogIGNoYXJ0LmNvbG9yID0gZnVuY3Rpb24oXykgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gY29sb3I7CiAgICBjb2xvciA9IF87CiAgICByZXR1cm4gY2hhcnQ7CiAgfTsKCiAgY2hhcnQuaWQgPSBmdW5jdGlvbihfKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBpZDsKICAgIGlkID0gXzsKICAgIHJldHVybiBjaGFydDsKICB9OwoKCiAgcmV0dXJuIGNoYXJ0Owp9CgpmdW5jdGlvbiBkM0xpbmVXaXRoTGVnZW5kKCkgewogIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDQwLCBib3R0b206IDQwLCBsZWZ0OiA2MH0sCiAgICAgIHdpZHRoID0gOTYwLAogICAgICBoZWlnaHQgPSA1MDAsCiAgICAgIGRvdFJhZGl1cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMi41IH0sCiAgICAgIHhBeGlzTGFiZWxUZXh0ID0gZmFsc2UsCiAgICAgIHlBeGlzTGFiZWxUZXh0ID0gZmFsc2UsCiAgICAgIGNvbG9yID0gZDMuc2NhbGUuY2F0ZWdvcnkyMCgpLnJhbmdlKCksCiAgICAgIGRpc3BhdGNoID0gZDMuZGlzcGF0Y2goJ3Nob3dUb29sdGlwJywgJ2hpZGVUb29sdGlwJyk7CgogIHZhciAKICAgICAgeCA9IGQzLnRpbWUuc2NhbGUoKSwKICAvLyB4ID0gZDMuc2NhbGUubGluZWFyKCksCiAgICAgIHkgPSBkMy5zY2FsZS5saW5lYXIoKSwKICAgICAgeEF4aXMgPSBkMy5zdmcuYXhpcygpLnNjYWxlKHgpLm9yaWVudCgnYm90dG9tJyksCiAgICAgIHlBeGlzID0gZDMuc3ZnLmF4aXMoKS5zY2FsZSh5KS5vcmllbnQoJ2xlZnQnKSwKICAgICAgbGVnZW5kID0gZDNMZWdlbmQoKS5oZWlnaHQoMzApLmNvbG9yKGNvbG9yKSwKICAgICAgbGluZXMgPSBkM0xpbmUoKTsKCgogIGZ1bmN0aW9uIGNoYXJ0KHNlbGVjdGlvbikgewogICAgc2VsZWN0aW9uLmVhY2goZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgc2VyaWVzID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCkgeyByZXR1cm4gIWQuZGlzYWJsZWQgfSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLmRhdGEgfSk7CgogICAgICB4ICAgLmRvbWFpbihkMy5leHRlbnQoZDMubWVyZ2Uoc2VyaWVzKSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5kYXRlIH0gKSkKICAgICAgICAgIC5yYW5nZShbMCwgd2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodF0pOwoKICAgICAgeSAgIC5kb21haW4oZDMuZXh0ZW50KGQzLm1lcmdlKHNlcmllcyksIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc2FsZXMgfSApKQogICAgICAgICAgLnJhbmdlKFtoZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSwgMF0pOwoKICAgICAgbGluZXMKICAgICAgICAud2lkdGgod2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCkKICAgICAgICAuaGVpZ2h0KGhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tKQogICAgICAgIC5jb2xvcihkYXRhLm1hcChmdW5jdGlvbihkLGkpIHsKICAgICAgICAgIHJldHVybiBkLmNvbG9yIHx8IGNvbG9yW2kgJSAxMF07CiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGQsaSkgeyByZXR1cm4gIWRhdGFbaV0uZGlzYWJsZWQgfSkpCgogICAgICB4QXhpcwogICAgICAgIC50aWNrcyggd2lkdGggLyAxMDAgKQogICAgICAgIC50aWNrU2l6ZSgtKGhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tKSwgMCk7CiAgICAgIHlBeGlzCiAgICAgICAgLnRpY2tzKCBoZWlnaHQgLyAzNiApCiAgICAgICAgLnRpY2tTaXplKC0od2lkdGggLSBtYXJnaW4ucmlnaHQgLSBtYXJnaW4ubGVmdCksIDApCiAgICAgICAgIC50aWNrRm9ybWF0KGQzLmZvcm1hdCgicyIpKQoKICAgICAgdmFyIHdyYXAgPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0QWxsKCdnLndyYXAnKS5kYXRhKFtkYXRhXSk7CiAgICAgIHZhciBnRW50ZXIgPSB3cmFwLmVudGVyKCkuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnd3JhcCBkM2xpbmVXaXRoTGVnZW5kJykuYXBwZW5kKCdnJyk7CgogICAgICBnRW50ZXIuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnbGVnZW5kV3JhcCcpOwogICAgICBnRW50ZXIuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAneCBheGlzJyk7CiAgICAgIGdFbnRlci5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICd5IGF4aXMnKTsKICAgICAgZ0VudGVyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2xpbmVzV3JhcCcpOwoKCiAgICAgIGxlZ2VuZC5kaXNwYXRjaC5vbignbGVnZW5kQ2xpY2snLCBmdW5jdGlvbihkLCBpKSB7IAogICAgICAgIGQuZGlzYWJsZWQgPSAhZC5kaXNhYmxlZDsKCiAgICAgICAgaWYgKCFkYXRhLmZpbHRlcihmdW5jdGlvbihkKSB7IHJldHVybiAhZC5kaXNhYmxlZCB9KS5sZW5ndGgpIHsKICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgIGQuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxlY3Rpb24pOwogICAgICAgIC8vIHNlbGVjdGlvbi50cmFuc2l0aW9uKCkuY2FsbChjaGFydCkKICAgICAgICAvLyBzZWxlY3Rpb24udHJhbnNpdGlvbigpCiAgICAgIH0pOwoKCiAgICAgIGxlZ2VuZC5kaXNwYXRjaC5vbignbGVnZW5kTW91c2VvdmVyJywgZnVuY3Rpb24oZCwgaSkgewogICAgICAgIGQuaG92ZXIgPSB0cnVlOwogICAgICAgIHNlbGVjdGlvbi50cmFuc2l0aW9uKCkuY2FsbChjaGFydCkKICAgICAgfSk7CgogICAgICBsZWdlbmQuZGlzcGF0Y2gub24oJ2xlZ2VuZE1vdXNlb3V0JywgZnVuY3Rpb24oZCwgaSkgewogICAgICAgIGQuaG92ZXIgPSBmYWxzZTsKICAgICAgICBzZWxlY3Rpb24udHJhbnNpdGlvbigpLmNhbGwoY2hhcnQpCiAgICAgICAgLy8gc2VsZWN0aW9uLnRyYW5zaXRpb24oKS5kdXJhdGlvbigyMDAwKS5jYWxsKGNoYXJ0KQogICAgICB9KTsKCgogICAgICBsaW5lcy5kaXNwYXRjaC5vbigncG9pbnRNb3VzZW92ZXIudG9vbHRpcCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBkaXNwYXRjaC5zaG93VG9vbHRpcCh7CiAgICAgICAgICBwb2ludDogZS5wb2ludCwKICAgICAgICAgIHNlcmllczogZS5zZXJpZXMsCiAgICAgICAgICBwb3M6IFtlLnBvc1swXSArIG1hcmdpbi5sZWZ0LCBlLnBvc1sxXSArIG1hcmdpbi50b3BdLAogICAgICAgICAgc2VyaWVzSW5kZXg6IGUuc2VyaWVzSW5kZXgsCiAgICAgICAgICBwb2ludEluZGV4OiBlLnBvaW50SW5kZXgKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBsaW5lcy5kaXNwYXRjaC5vbigncG9pbnRNb3VzZW91dC50b29sdGlwJywgZnVuY3Rpb24oZSkgewogICAgICAgIGRpc3BhdGNoLmhpZGVUb29sdGlwKGUpOwogICAgICB9KTsKCgoKCiAgICAgIGxlZ2VuZAogICAgICAgICAgLmNvbG9yKGNvbG9yKQogICAgICAgICAgLndpZHRoKHdpZHRoIC8gMiAtIG1hcmdpbi5yaWdodCk7CgogICAgICB3cmFwLnNlbGVjdCgnLmxlZ2VuZFdyYXAnKQogICAgICAgICAgLmRhdHVtKGRhdGEpCiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgKHdpZHRoLzIgLSBtYXJnaW4ubGVmdCkgKyAnLCcgKyAoLWxlZ2VuZC5oZWlnaHQoKSkgKycpJykKICAgICAgICAgIC5jYWxsKGxlZ2VuZCk7CgoKICAgICAgLy9UT0RPOiBtYXliZSBtYXJnaW5zIHNob3VsZCBiZSBhZGp1c3RlZCBiYXNlZCBvbiB3aGF0IGNvbXBvbmVudHMgYXJlIHVzZWQ6IGF4ZXMsIGF4aXMgbGFiZWxzLCBsZWdlbmQKICAgICAgLy8gbWFyZ2luLnRvcCA9IGxlZ2VuZC5oZWlnaHQoKTsgIC8vbmVlZCB0byByZS1yZW5kZXIgdG8gc2VlIHVwZGF0ZQogICAgICBtYXJnaW4udG9wID0gbGVnZW5kLmhlaWdodCgpOyAgLy9uZWVkIHRvIHJlLXJlbmRlciB0byBzZWUgdXBkYXRlCgogICAgICB2YXIgZyA9IHdyYXAuc2VsZWN0KCdnJykKICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4ubGVmdCArICcsJyArIG1hcmdpbi50b3AgKyAnKScpOwoKCgogICAgICB2YXIgbGluZXNXcmFwID0gd3JhcC5zZWxlY3QoJy5saW5lc1dyYXAnKQogICAgICAgICAgLmRhdHVtKGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGQpIHsgcmV0dXJuICFkLmRpc2FibGVkIH0pKTsKCiAgICAgIGQzLnRyYW5zaXRpb24obGluZXNXcmFwKS5jYWxsKGxpbmVzKTsKCgoKICAgICAgdmFyIHhBeGlzTGFiZWwgPSBnLnNlbGVjdCgnLnguYXhpcycpLnNlbGVjdEFsbCgndGV4dC5heGlzbGFiZWwnKQogICAgICAgICAgLmRhdGEoW3hBeGlzTGFiZWxUZXh0IHx8IG51bGxdKTsKICAgICAgeEF4aXNMYWJlbC5lbnRlcigpLmFwcGVuZCgndGV4dCcpLmF0dHIoJ2NsYXNzJywgJ2F4aXNsYWJlbCcpCiAgICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJykKICAgICAgICAgIC5hdHRyKCd4JywgeC5yYW5nZSgpWzFdIC8gMikKICAgICAgICAgIC5hdHRyKCd5JywgbWFyZ2luLmJvdHRvbSAtIDUpOwogICAgICB4QXhpc0xhYmVsLmV4aXQoKS5yZW1vdmUoKTsKICAgICAgeEF4aXNMYWJlbC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgfSk7CgogICAgICBnLnNlbGVjdCgnLnguYXhpcycpCiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyB5LnJhbmdlKClbMF0gKyAnKScpCiAgICAgICAgICAuY2FsbCh4QXhpcykKICAgICAgICAuc2VsZWN0QWxsKCdsaW5lLnRpY2snKQogICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkgeyByZXR1cm4gIWQgfSkKICAgICAgICAgIC5jbGFzc2VkKCd6ZXJvJywgdHJ1ZSk7CgoKICAgICAgdmFyIHlBeGlzTGFiZWwgPSBnLnNlbGVjdCgnLnkuYXhpcycpLnNlbGVjdEFsbCgndGV4dC5heGlzbGFiZWwnKQogICAgICAgICAgLmRhdGEoW3lBeGlzTGFiZWxUZXh0IHx8IG51bGxdKTsKICAgICAgeUF4aXNMYWJlbC5lbnRlcigpLmFwcGVuZCgndGV4dCcpLmF0dHIoJ2NsYXNzJywgJ2F4aXNsYWJlbCcpCiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3JvdGF0ZSgtOTApJykKICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKQogICAgICAgICAgLmF0dHIoJ3knLCAyMCAtIG1hcmdpbi5sZWZ0KTsKICAgICAgeUF4aXNMYWJlbC5leGl0KCkucmVtb3ZlKCk7CiAgICAgIHlBeGlzTGFiZWwKICAgICAgICAgIC5hdHRyKCd4JywgLXkucmFuZ2UoKVswXSAvIDIpCiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkIH0pOwoKICAgICAgZy5zZWxlY3QoJy55LmF4aXMnKQogICAgICAgICAgLmNhbGwoeUF4aXMpCiAgICAgICAgLnNlbGVjdEFsbCgnbGluZS50aWNrJykKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHsgcmV0dXJuICFkIH0pCiAgICAgICAgICAuY2xhc3NlZCgnemVybycsIHRydWUpOwogICAgfSk7CgogICAgcmV0dXJuIGNoYXJ0OwogIH0KCiAgY2hhcnQuZGlzcGF0Y2ggPSBkaXNwYXRjaDsKCiAgY2hhcnQubWFyZ2luID0gZnVuY3Rpb24oXykgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbWFyZ2luOwogICAgbWFyZ2luID0gXzsKICAgIHJldHVybiBjaGFydDsKICB9OwoKICBjaGFydC53aWR0aCA9IGZ1bmN0aW9uKF8pIHsKICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHdpZHRoOwogICAgd2lkdGggPSBfOwogICAgcmV0dXJuIGNoYXJ0OwogIH07CgogIGNoYXJ0LmhlaWdodCA9IGZ1bmN0aW9uKF8pIHsKICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGhlaWdodDsKICAgIGhlaWdodCA9IF87CiAgICByZXR1cm4gY2hhcnQ7CiAgfTsKCiAgY2hhcnQuY29sb3IgPSBmdW5jdGlvbihfKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBjb2xvcjsKICAgIGNvbG9yID0gXzsKICAgIHJldHVybiBjaGFydDsKICB9OwoKICBjaGFydC5kb3RSYWRpdXMgPSBmdW5jdGlvbihfKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkb3RSYWRpdXM7CiAgICBkb3RSYWRpdXMgPSBkMy5mdW5jdG9yKF8pOwogICAgbGluZXMuZG90UmFkaXVzID0gZDMuZnVuY3RvcihfKTsKICAgIHJldHVybiBjaGFydDsKICB9OwoKICAvL1RPRE86IGNvbnNpZGVyIGRpcmVjdGx5IGV4cG9zaW5nIGJvdGggYXhlcwogIC8vY2hhcnQueEF4aXMgPSB4QXhpczsKCiAgLy9FeHBvc2UgdGhlIHgtYXhpcycgdGlja0Zvcm1hdCBtZXRob2QuCiAgY2hhcnQueEF4aXMgPSB7fTsKICBkMy5yZWJpbmQoY2hhcnQueEF4aXMsIHhBeGlzLCAndGlja0Zvcm1hdCcpOwoKICBjaGFydC54QXhpcy5sYWJlbCA9IGZ1bmN0aW9uKF8pIHsKICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHhBeGlzTGFiZWxUZXh0OwogICAgeEF4aXNMYWJlbFRleHQgPSBfOwogICAgcmV0dXJuIGNoYXJ0OwogIH0KCiAgLy8gRXhwb3NlIHRoZSB5LWF4aXMnIHRpY2tGb3JtYXQgbWV0aG9kLgogIC8vY2hhcnQueUF4aXMgPSB5QXhpczsKCiAgY2hhcnQueUF4aXMgPSB7fTsKICBkMy5yZWJpbmQoY2hhcnQueUF4aXMsIHlBeGlzLCAndGlja0Zvcm1hdCcpOwoKICBjaGFydC55QXhpcy5sYWJlbCA9IGZ1bmN0aW9uKF8pIHsKICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHlBeGlzTGFiZWxUZXh0OwogICAgeUF4aXNMYWJlbFRleHQgPSBfOwogICAgcmV0dXJuIGNoYXJ0OwogIH0KCiAgcmV0dXJuIGNoYXJ0Owp9CihmdW5jdGlvbigkKSB7CgogIHZhciBudnRvb2x0aXAgPSB3aW5kb3cubnZ0b29sdGlwID0ge307CgogIG52dG9vbHRpcC5zaG93ID0gZnVuY3Rpb24ocG9zLCBjb250ZW50LCBncmF2aXR5LCBkaXN0KSB7CiAgICB2YXIgY29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz0ibnZ0b29sdGlwIj4nKTsKCiAgICBncmF2aXR5ID0gZ3Jhdml0eSB8fCAncyc7CiAgICBkaXN0ID0gZGlzdCB8fCAyMDsKCiAgICBjb250YWluZXIKICAgICAgLmh0bWwoY29udGVudCkKICAgICAgLmNzcyh7bGVmdDogLTEwMDAsIHRvcDogLTEwMDAsIG9wYWNpdHk6IDB9KQogICAgICAuYXBwZW5kVG8oJ2JvZHknKTsKCiAgICB2YXIgaGVpZ2h0ID0gY29udGFpbmVyLmhlaWdodCgpICsgcGFyc2VJbnQoY29udGFpbmVyLmNzcygncGFkZGluZy10b3AnKSkgICsgcGFyc2VJbnQoY29udGFpbmVyLmNzcygncGFkZGluZy1ib3R0b20nKSksCiAgICAgICAgd2lkdGggPSBjb250YWluZXIud2lkdGgoKSArIHBhcnNlSW50KGNvbnRhaW5lci5jc3MoJ3BhZGRpbmctbGVmdCcpKSAgKyBwYXJzZUludChjb250YWluZXIuY3NzKCdwYWRkaW5nLXJpZ2h0JykpLAogICAgICAgIC8vIHdpbmRvd1dpZHRoID0gJCgiLmNhcmQtYm9keSIpLndpZHRoKCksCiAgICAgICAgLy8gd2luZG93SGVpZ2h0ID0gJCgiLmNhcmQtYm9keSIpLmhlaWdodCgpLAogICAgICAgICB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLAogICAgICAgIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSwKICAgICAgICBzY3JvbGxUb3AgPSAkKCdib2R5Jykuc2Nyb2xsVG9wKCksICAvL1RPRE86IGFsc28gYWRqdXN0IGhvcml6b250YWwgc2Nyb2xsCiAgICAgICAgbGVmdCwgdG9wOwoKCiAgICAvL1RPRE86IGltcGxlbWVudCBvdGhlciBncmF2aXRpZXMKICAgIHN3aXRjaCAoZ3Jhdml0eSkgewogICAgICBjYXNlICdlJzoKICAgICAgY2FzZSAndyc6CiAgICAgIGNhc2UgJ24nOgogICAgICAgIGxlZnQgPSBwb3NbMF0gLSAod2lkdGggLyAyKTsKICAgICAgICB0b3AgPSBwb3NbMV0gKyBkaXN0OwogICAgICAgIGlmIChsZWZ0IDwgMCkgbGVmdCA9IDU7CiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IHdpbmRvd1dpZHRoKSBsZWZ0ID0gd2luZG93V2lkdGggLSB3aWR0aCAtIDU7CiAgICAgICAgaWYgKHNjcm9sbFRvcCArIHdpbmRvd0hlaWdodCA8IHRvcCArIGhlaWdodCkgdG9wID0gcG9zWzFdIC0gaGVpZ2h0IC0gZGlzdDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncyc6CiAgICAgICAgbGVmdCA9IHBvc1swXSAtICh3aWR0aCAvIDIpOwogICAgICAgIHRvcCA9IHBvc1sxXSAtIGhlaWdodCAtIGRpc3Q7CiAgICAgICAgaWYgKGxlZnQgPCAwKSBsZWZ0ID0gNTsKICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gd2luZG93V2lkdGgpIGxlZnQgPSB3aW5kb3dXaWR0aCAtIHdpZHRoIC0gNTsKICAgICAgICBpZiAoc2Nyb2xsVG9wID4gdG9wKSB0b3AgPSBwb3NbMV0gKyBkaXN0OwogICAgICAgIGJyZWFrOwogICAgfQoKICAgIGNvbnRhaW5lcgogICAgICAgIC5jc3MoewogICAgICAgICAgbGVmdDogbGVmdCwKICAgICAgICAgIHRvcDogdG9wLAogICAgICAgICAgb3BhY2l0eTogMQogICAgICAgIH0pOwogIH07CgogIG52dG9vbHRpcC5jbGVhbnVwID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgdG9vbHRpcHMgPSAkKCcubnZ0b29sdGlwJyk7CgogICAgLy8gcmVtb3ZlIHJpZ2h0IGF3YXksIGJ1dCBkZWxheSB0aGUgc2hvdyB3aXRoIGNzcwogICAgdG9vbHRpcHMuY3NzKHsKICAgICAgICAndHJhbnNpdGlvbi1kZWxheSc6ICcwICFpbXBvcnRhbnQnLAogICAgICAgICctbW96LXRyYW5zaXRpb24tZGVsYXknOiAnMCAhaW1wb3J0YW50JywKICAgICAgICAnLXdlYmtpdC10cmFuc2l0aW9uLWRlbGF5JzogJzAgIWltcG9ydGFudCcKICAgIH0pOwoKICAgIHRvb2x0aXBzLmNzcygnb3BhY2l0eScsMCk7CgogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgdG9vbHRpcHMucmVtb3ZlKCkKICAgIH0sIDUwMCk7CiAgfTsKCn0pKGpRdWVyeSk7CgogIH0KfTsK"},{"version":3,"sources":["MultiLineChartAlternative.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA","file":"MultiLineChartAlternative.vue","sourceRoot":"src/portal/analytics/components","sourcesContent":["<template>\n<div id=\"#chart\">\n<div id=\"test1\">\n  <svg></svg>\n</div>\n</div>\n</template>\n\n<script>\nimport * as d3 from \"d3-3\";\nexport default {\n  name: \"MultiLineChartAlternative\",\n  props : {\n    xKey: String,\n    yKey: String,\n    apiData: Array,\n    dateKey: String\n  },\n  // data : {\n\n  // },\n  mounted() {\n\n      setTimeout(() => {\n        resize_of_page();\n        resize_of_page();\n        resize_of_page();\n        resize_of_page();\n        resize_of_page();\n      }, 400);\n      // setTimeout(() => {\n      //   resize_of_page();\n      // }, 1200);\n      // setTimeout(() => {\n      //   resize_of_page();\n      // }, 1500);\n      // setTimeout(() => {\n      //   resize_of_page();\n      // }, 800);\n\n    // console.log(this.xKey,this.yKey,this.dateKey);\n    // console.log(this.apiData);\n   var api_data = \n        [\n            {\"SALES\":1340.450419999999,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 17 Mar 2016 10:18:47 GMT\",\"CATEGORY\":\"Stonefruits\",\"MONTH\":\"03\"},\n            {\"SALES\":170.90194000000005,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 17 Mar 2016 11:53:12 GMT\",\"CATEGORY\":\"Cucumbers\",\"MONTH\":\"03\"},\n            {\"SALES\":74.79999999999998,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 18 Mar 2016 12:13:55 GMT\",\"CATEGORY\":\"Sri Lankan Groceries\",\"MONTH\":\"03\"},\n            {\"SALES\":62.93936000000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 19 Mar 2016 19:42:10 GMT\",\"CATEGORY\":\"Veggies\",\"MONTH\":\"03\"},\n            {\"SALES\":218.4778800000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 20 Mar 2016 17:12:06 GMT\",\"CATEGORY\":\"Mushrooms\",\"MONTH\":\"03\"},\n            {\"SALES\":262.5995236363638,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 20 Mar 2016 17:34:22 GMT\",\"CATEGORY\":\"Tropical Fruits\",\"MONTH\":\"03\"},\n            {\"SALES\":69.59320000000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 20 Mar 2016 19:02:15 GMT\",\"CATEGORY\":\"Cabbages\",\"MONTH\":\"03\"},\n            {\"SALES\":671.8349600000005,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 23 Mar 2016 01:04:06 GMT\",\"CATEGORY\":\"Bananas\",\"MONTH\":\"03\"},\n            {\"SALES\":116.20128545454547,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 23 Mar 2016 01:35:13 GMT\",\"CATEGORY\":\"Nuts\",\"MONTH\":\"03\"},\n            {\"SALES\":295.2000000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 23 Mar 2016 04:31:17 GMT\",\"CATEGORY\":\"Avocadoes\",\"MONTH\":\"03\"},\n            {\"SALES\":47.5,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 03:13:07 GMT\",\"CATEGORY\":\"Herbs\",\"MONTH\":\"03\"},\n            {\"SALES\":169.20256000000003,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 04:12:32 GMT\",\"CATEGORY\":\"Pumpkins\",\"MONTH\":\"03\"},{\"SALES\":307.6499999999997,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 04:43:59 GMT\",\"CATEGORY\":\"Eggs\",\"MONTH\":\"03\"},{\"SALES\":975.1200545454553,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 05:22:50 GMT\",\"CATEGORY\":\"Other Vegies\",\"MONTH\":\"03\"},{\"SALES\":112.4447,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 01:48:45 GMT\",\"CATEGORY\":\"Chillies\",\"MONTH\":\"03\"},{\"SALES\":597.0905363636365,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 03:28:03 GMT\",\"CATEGORY\":\"Citrus\",\"MONTH\":\"03\"},{\"SALES\":166.812,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 03:50:08 GMT\",\"CATEGORY\":\"carrots\",\"MONTH\":\"03\"},{\"SALES\":360.92106,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 04:41:19 GMT\",\"CATEGORY\":\"capsicum\",\"MONTH\":\"03\"},{\"SALES\":57.88363636363637,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 26 Mar 2016 22:51:27 GMT\",\"CATEGORY\":\"Other Fruits\",\"MONTH\":\"03\"},{\"SALES\":884.4411199999997,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 26 Mar 2016 23:37:38 GMT\",\"CATEGORY\":\"Potatoes\",\"MONTH\":\"03\"},{\"SALES\":304.92546000000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 00:25:07 GMT\",\"CATEGORY\":\"Pears\",\"MONTH\":\"03\"},{\"SALES\":303.2260000000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 00:28:50 GMT\",\"CATEGORY\":\"Bunch Vegies\",\"MONTH\":\"03\"},{\"SALES\":620.6673999999997,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 01:08:03 GMT\",\"CATEGORY\":\"Tomatoes\",\"MONTH\":\"03\"},{\"SALES\":629.8516800000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 01:45:58 GMT\",\"CATEGORY\":\"Apples\",\"MONTH\":\"03\"},{\"SALES\":372.82099999999923,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 03:38:16 GMT\",\"CATEGORY\":\"Lettuces\",\"MONTH\":\"03\"},{\"SALES\":154.485,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 23:08:40 GMT\",\"CATEGORY\":\"Multi buy\",\"MONTH\":\"03\"},{\"SALES\":387.9157999999999,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 28 Mar 2016 02:15:11 GMT\",\"CATEGORY\":\"Melons\",\"MONTH\":\"03\"},{\"SALES\":180.2172727272728,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 28 Mar 2016 22:59:34 GMT\",\"CATEGORY\":\"Olympian Products\",\"MONTH\":\"03\"},{\"SALES\":633.3682436363638,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 28 Mar 2016 23:57:28 GMT\",\"CATEGORY\":\"Onions\",\"MONTH\":\"03\"},{\"SALES\":854.30096,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 30 Mar 2016 03:02:09 GMT\",\"CATEGORY\":\"Grapes\",\"MONTH\":\"03\"},{\"SALES\":108.0,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 30 Mar 2016 04:15:59 GMT\",\"CATEGORY\":\"Flowers\",\"MONTH\":\"03\"},{\"SALES\":87.10741999999999,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 30 Mar 2016 21:40:15 GMT\",\"CATEGORY\":\"Root Vegies\",\"MONTH\":\"03\"},{\"SALES\":73.7,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 31 Mar 2016 00:23:50 GMT\",\"CATEGORY\":\"Cut Veggies\",\"MONTH\":\"03\"},{\"SALES\":216.50410000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 31 Mar 2016 01:27:43 GMT\",\"CATEGORY\":\"Asian Vegies\",\"MONTH\":\"03\"},{\"SALES\":167.87999999999997,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 31 Mar 2016 01:59:07 GMT\",\"CATEGORY\":\"Berries\",\"MONTH\":\"03\"},\n            {\"SALES\":602.2259454545458,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 00:26:23 GMT\",\"CATEGORY\":\"Citrus\",\"MONTH\":\"04\"},\n            {\"SALES\":964.0527800000008,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 00:41:01 GMT\",\"CATEGORY\":\"Other Vegies\",\"MONTH\":\"04\"},\n            {\"SALES\":107.87999999999998,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 04:50:24 GMT\",\"CATEGORY\":\"Cabbages\",\"MONTH\":\"04\"},\n            {\"SALES\":86.5556,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 04:50:24 GMT\",\"CATEGORY\":\"Root Vegies\",\"MONTH\":\"04\"},\n            {\"SALES\":675.9299000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 04:55:24 GMT\",\"CATEGORY\":\"Bananas\",\"MONTH\":\"04\"},\n            {\"SALES\":197.20808000000005,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 08:06:26 GMT\",\"CATEGORY\":\"Asian Vegies\",\"MONTH\":\"04\"},\n            {\"SALES\":108.0,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 21:52:12 GMT\",\"CATEGORY\":\"Flowers\",\"MONTH\":\"04\"},\n            {\"SALES\":15.200000000000003,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 02 Apr 2016 00:22:14 GMT\",\"CATEGORY\":\"Sri Lankan Groceries\",\"MONTH\":\"04\"},\n            {\"SALES\":118.63200000000009,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 02 Apr 2016 00:22:14 GMT\",\"CATEGORY\":\"carrots\",\"MONTH\":\"04\"},\n            {\"SALES\":129.0,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:00:52 GMT\",\"CATEGORY\":\"Multi buy\",\"MONTH\":\"04\"},\n            {\"SALES\":174.17508000000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:00:52 GMT\",\"CATEGORY\":\"capsicum\",\"MONTH\":\"04\"},{\"SALES\":230.56272727272733,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:34:19 GMT\",\"CATEGORY\":\"Olympian Products\",\"MONTH\":\"04\"},{\"SALES\":96.84614727272728,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:37:49 GMT\",\"CATEGORY\":\"Nuts\",\"MONTH\":\"04\"},{\"SALES\":439.10896545454534,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 01:42:18 GMT\",\"CATEGORY\":\"Tomatoes\",\"MONTH\":\"04\"},{\"SALES\":512.0569200000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 02:44:59 GMT\",\"CATEGORY\":\"Grapes\",\"MONTH\":\"04\"},{\"SALES\":151.0479,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 02:53:00 GMT\",\"CATEGORY\":\"Pumpkins\",\"MONTH\":\"04\"},{\"SALES\":43.0,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 02:53:00 GMT\",\"CATEGORY\":\"Cut Veggies\",\"MONTH\":\"04\"},{\"SALES\":137.80607999999995,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 06:09:50 GMT\",\"CATEGORY\":\"Cucumbers\",\"MONTH\":\"04\"},{\"SALES\":119.0145,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 04 Apr 2016 01:18:00 GMT\",\"CATEGORY\":\"Chillies\",\"MONTH\":\"04\"},{\"SALES\":276.1008799999999,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 04 Apr 2016 01:46:01 GMT\",\"CATEGORY\":\"Mushrooms\",\"MONTH\":\"04\"},{\"SALES\":202.88474000000008,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 04 Apr 2016 03:52:08 GMT\",\"CATEGORY\":\"Melons\",\"MONTH\":\"04\"},{\"SALES\":131.35276,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 01:46:42 GMT\",\"CATEGORY\":\"Tropical Fruits\",\"MONTH\":\"04\"},{\"SALES\":90.55818181818181,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 04:01:07 GMT\",\"CATEGORY\":\"Other Fruits\",\"MONTH\":\"04\"},{\"SALES\":187.63225999999992,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 04:49:26 GMT\",\"CATEGORY\":\"Pears\",\"MONTH\":\"04\"},{\"SALES\":496.3780800000003,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 05:00:29 GMT\",\"CATEGORY\":\"Onions\",\"MONTH\":\"04\"},{\"SALES\":20.44174,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 22:36:34 GMT\",\"CATEGORY\":\"Veggies\",\"MONTH\":\"04\"},{\"SALES\":642.8219400000002,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 02:16:13 GMT\",\"CATEGORY\":\"Potatoes\",\"MONTH\":\"04\"},{\"SALES\":275.8000000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 03:26:52 GMT\",\"CATEGORY\":\"Avocadoes\",\"MONTH\":\"04\"},{\"SALES\":39.96,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 03:27:58 GMT\",\"CATEGORY\":\"Groceries-Dry Goods\",\"MONTH\":\"04\"},{\"SALES\":618.9657799999997,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 04:47:53 GMT\",\"CATEGORY\":\"Stonefruits\",\"MONTH\":\"04\"},{\"SALES\":348.5120000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 07 Apr 2016 02:45:13 GMT\",\"CATEGORY\":\"Lettuces\",\"MONTH\":\"04\"},{\"SALES\":293.10000000000025,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 07 Apr 2016 03:24:48 GMT\",\"CATEGORY\":\"Bunch Vegies\",\"MONTH\":\"04\"},{\"SALES\":227.34999999999985,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 08 Apr 2016 01:04:44 GMT\",\"CATEGORY\":\"Eggs\",\"MONTH\":\"04\"},{\"SALES\":138.97199999999998,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 08 Apr 2016 04:21:54 GMT\",\"CATEGORY\":\"Herbs\",\"MONTH\":\"04\"},{\"SALES\":502.37238000000025,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 09 Apr 2016 03:34:50 GMT\",\"CATEGORY\":\"Apples\",\"MONTH\":\"04\"},{\"SALES\":74.27000000000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 09 Apr 2016 04:22:37 GMT\",\"CATEGORY\":\"Berries\",\"MONTH\":\"04\"},{\"SALES\":2.0,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 09 Apr 2016 04:22:37 GMT\",\"CATEGORY\":\"Cut Fruits\",\"MONTH\":\"04\"}\n        ]\n\n    // var map = api_data.reduce((r, i) => (console.log(r),((r[i.CATEGORY] = r[i.CATEGORY] || []).push({\n    //   date : i.DATENEW,\n    //   sales: i.SALES\n    // }), r)), {});\n    // var entries = Object.entries(map);\n    // const second_data = [];\n    //   for(let i =0; i < entries.length; i++) {\n    //     second_data.push({\n    //       label : entries[i][0],\n    //       data: [],\n    //     })\n    //     for(let j =0 ; j < entries[i][1].length; j++) {\n    //       second_data[i].data.push({\n    //         date: entries[i][1][j].date,\n    //         sales: entries[i][1][j].sales\n    //       })\n    //     }\n    //   }\n    // console.log(\"second data\",second_data)\n\n    // const data = [];\n    //   for(let i =0; i < entries.length; i++) {\n    //     data.push({\n    //       label : entries[i][0],\n    //       data: [],\n    //     })\n    //     for(let j =0 ; j < entries[i][1].length; j++) {\n    //       data[i].data.push({\n    //         date: new Date(entries[i][1][j].date),\n    //         sales: entries[i][1][j].sales\n    //       })\n    //     }\n    //   }\n    // var vm =this;\n    // console.log(this.apiData);\n    var map = this.apiData.reduce((r, i) => ((r[i[this.xKey]] = r[i[this.xKey]] || []).push({\n      // date : i[\"MONTH\"]+\"/\"+\"01/\"+i[\"YEAR\"],\n      date : i[this.dateKey],\n      // date : i[\"MONTH\"],\n      sales: i[this.yKey]\n      // i\n    }), r), {});\n    var entries = Object.entries(map);\n    // console.log(entries);\n    const second_data = [];\n      for(let i =0; i < entries.length; i++) {\n        second_data.push({\n          label : entries[i][0],\n          data: [],\n        })\n        for(let j =0 ; j < entries[i][1].length; j++) {\n          second_data[i].data.push({\n            date: entries[i][1][j].date,\n            sales: entries[i][1][j].sales\n          })\n        }\n      }\n    // console.log(\"second data\",second_data)\n\n    const data = [];\n      for(let i =0; i < entries.length; i++) {\n        data.push({\n          label : entries[i][0],\n          data: [],\n        })\n        for(let j =0 ; j < entries[i][1].length; j++) {\n          data[i].data.push({\n            date: new Date(entries[i][1][j].date),\n            sales: entries[i][1][j].sales\n          })\n        }\n      }\n\n    // console.log(data[0].data[0].date, \"HI\",new Date(data[0].data[0].date));\n    // console.log(\"final data\",data,\"Hi\");\n\n\n    var margin = {top: 30, right: 10, bottom: 50, left: 60},\n      chart = d3LineWithLegend()\n                .xAxis.label(this.xKey)\n                .width(width(margin))\n                .height(height(margin))\n                .yAxis.label(this.yKey);\n\n\n  var svg = d3.select('#test1 svg')\n      .datum(generateData())\n\n  svg.transition().duration(0)\n      .attr('width', width(margin))\n      .attr('height', height(margin))\n      .call(chart);\n\n\n  chart.dispatch.on('showTooltip', function(e) {\n  var offset = $('#test1').offset(), // { left: 0, top: 0 }\n        left = e.pos[0] + offset.left,\n        top = e.pos[1] + offset.top,\n        // formatter = d3.time.format(\"%m/%d/%Y\")\n        formatter = d3.time.format(\"%a,%b/%d/%y\")\n        // console.log(e);\n    // TODO :  \n    var content = '<h3>' + e.series.label + '</h3>' +\n                  '<p>' +\n                  '<span class=\"value\">[' + e.point.sales.toFixed(2) + ', ' + formatter(e.point.date) + ']</span>' +\n                  '</p>';\n              \n\n    nvtooltip.show([left, top], content);\n  });\n\n  chart.dispatch.on('hideTooltip', function(e) {\n    nvtooltip.cleanup();\n  });\n\n\n\n\n  $(window).resize(function() {\n    resize_of_page();\n\n    });\n\n    function resize_of_page(){\n          var margin = chart.margin();\n    chart\n      .width(width(margin))\n      .height(height(margin));\n\n    d3.select('#test1 svg')\n      .attr('width', width(margin))\n      .attr('height', height(margin))\n      .call(chart);\n    }\n\n\n  function width(margin) {\n    var w = $(\".card-body\").width() - 40;\n\n    // return 500;\n    return ( (w - margin.left - margin.right - 20) < 0 ) ? margin.left + margin.right + 2 : w;\n  }\n\n  function height(margin) {\n    // var h = $(\".card-body\").height() - 20;\n    // var h = $(\".card-body\").height() - 20;\n    var h = 700 - 100;\n\n    return ( h - margin.top - margin.bottom - 20 < 0 ) ? \n              margin.top + margin.bottom + 2 : h;\n\n    // return 700\n  }\n\n\n  //data\n  function generateData() {\n    var sin = [],\n        sin2 = [],\n        cos = [],\n        cos2 = [],\n        sin3  = [],\n        sin4 = [],\n        sin5 = [],\n        sin6 = [],\n        cos2 = [],\n        r1 = Math.random(),\n        r2 = Math.random(),\n        r3 = Math.random(),\n        r4 = Math.random(),\n        r5 = Math.random(),\n        r6 = Math.random(),\n        r7 = Math.random()\n        // r4 = Math.random();\n\n    for (var i = 0; i < 100; i++) {\n      sin.push([ i, r1 * Math.sin( r2 +  i / (10 * (r4 + .5) ))]);\n      cos.push([ i, r2 * Math.cos( r3 + i / (10 * (r3 + .5) ))]);\n      sin2.push([ i, r3 * Math.sin( r3 + i / (10 * (r2 + .5) ))]);\n      sin3.push([ i, r4 * Math.sin( r4 + i / (10 * (r2 + .5) ))]);\n      sin4.push([ i, r5 * Math.sin( r5 + i / (10 * (r2 + .5) ))]);\n      sin5.push([ i, r6 * Math.sin( r6 + i / (10 * (r2 + .5) ))]);\n      sin6.push([ i, r7 * Math.sin( r7 + i / (10 * (r2 + .5) ))]);\n      cos2.push([ i, r4 * Math.cos( r4 + i / (10 * (r1 + .5) ))]);\n    }\n      // console.log(cos);\n\n    return data;\n\n    // return [\n    //   {\n    //     data: sin,\n    //     label: \"Sine Wave\"\n    //   },\n    //   {\n    //     data: cos,\n    //     label: \"Cosine Wave\"\n    //   },\n    //   {\n    //     data: sin2,\n    //     label: \"Sine2 Wave\"\n    //   },\n    //   {\n    //     data: cos2,\n    //     label: \"Cosine2 Wave\"\n    //   },\n    //   {\n    //     data: sin3,\n    //     label: \"Sine3 Wave\"\n    //   },\n    //   {\n    //     data: sin4,\n    //     label: \"Sine4 Wave\"\n    //   },\n    //   {\n    //     data: sin5,\n    //     label: \"Sine5 Wave\"\n    //   },\n    //   {\n    //     data: sin6,\n    //     label: \"Sine6 Wave\"\n    //   },\n\n    // ];\n    // console.log(data)\n  }\n\n  function d3Legend() {\n      var margin = {top: 5, right: 0, bottom: 5, left: 10},\n          width = 400,\n          height = 20,\n          color = d3.scale.category20().range(),\n          dispatch = d3.dispatch('legendClick', 'legendMouseover', 'legendMouseout');\n\n\n      function chart(selection) {\n        selection.each(function(data) {\n          // console.log(\"Function-chart\",data);\n          /**\n          *    Legend curently is setup to automaticaly expand vertically based on a max width.\n          *    Should implement legend where EITHER a maxWidth or a maxHeight is defined, then\n          *    the other dimension will automatically expand to fit, and anything that exceeds\n          *    that will automatically be clipped.\n          **/\n\n          var wrap = d3.select(this).selectAll('g.legend').data([data]);\n          var gEnter = wrap.enter().append('g').attr('class', 'legend').append('g');\n\n\n          var g = wrap.select('g')\n              .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n          var series = g.selectAll('.series')\n              .data(function(d) { return d });\n          var seriesEnter = series.enter().append('g').attr('class', 'series')\n              .on('click', function(d, i) {\n                // dispatch.legendClick(d, i);\n              })\n              .on('mouseover', function(d, i) {\n                dispatch.legendMouseover(d, i);\n              })\n              .on('mouseout', function(d, i) {\n                dispatch.legendMouseout(d, i);\n              });\n          seriesEnter.append('circle')\n              .style('fill', function(d, i){ return d.color || color[i % 10] })\n              .style('stroke', function(d, i){ return d.color || color[i % 10] })\n              .attr('r', 5);\n          seriesEnter.append('text')\n              .text(function(d) { return d.label })\n              .attr('text-anchor', 'start')\n              .attr('dy', '.32em')\n              .attr('dx', '8');\n          series.classed('disabled', function(d) { return d.disabled });\n          series.exit().remove();\n\n\n          var ypos = 5,\n              newxpos = 5,\n              maxwidth = 0,\n              xpos;\n          series\n              .attr('transform', function(d, i) {\n                var length = d3.select(this).select('text').node().getComputedTextLength() + 28;\n                xpos = newxpos;\n\n                //TODO: 1) Make sure dot + text of every series fits horizontally, or clip text to fix\n                //      2) Consider making columns in line so dots line up\n                //         --all labels same width? or just all in the same column?\n                //         --optional, or forced always?\n                if (width < margin.left + margin.right + xpos + length) {\n                  newxpos = xpos = 5;\n                  ypos += 20;\n                }\n\n                newxpos += length;\n                if (newxpos > maxwidth) maxwidth = newxpos;\n\n                return 'translate(' + xpos + ',' + ypos + ')';\n              });\n\n          //position legend as far right as possible within the total width\n          g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n\n          height = margin.top + margin.bottom + ypos + 15;\n        });\n\n        return chart;\n      }\n\n      chart.dispatch = dispatch;\n\n      chart.margin = function(_) {\n        if (!arguments.length) return margin;\n        margin = _;\n        return chart;\n      };\n\n      chart.width = function(_) {\n        if (!arguments.length) return width;\n        width = _;\n        return chart;\n      };\n\n      chart.height = function(_) {\n        if (!arguments.length) return height;\n        height = _;\n        return chart;\n      };\n\n      chart.color = function(_) {\n        if (!arguments.length) return color;\n        color = _;\n        return chart;\n      };\n\n      return chart;\n  }\n\n\n  function d3Line() {\n  var margin = {top: 0, right: 0, bottom: 0, left: 0},\n      width = 960,\n      height = 500,\n      dotRadius = function() { return 2.5 },\n      color = d3.scale.category20().range(),\n      id = Math.floor(Math.random() * 10000), //Create semi-unique ID incase user doesn't select one\n      // x = d3.scale.linear(),\n      x = d3.time.scale(),\n      y = d3.scale.linear(),\n      dispatch = d3.dispatch(\"pointMouseover\", \"pointMouseout\"),\n      x0, y0;\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var seriesData = data.map(function(d) { return d.data });\n      // console.log(data);\n      // console.log(seriesData);\n      // console.log(domain(d3.extent(d3.merge(seriesData), function(d) {  return d.date } )));\n      x0 = x0 || x;\n      y0 = y0 || y;\n\n      //TODO: reconsider points {x: #, y: #} instead of [x,y]\n      //TODO: data accessors so above won't really matter, but need to decide for internal use\n\n      //add series data to each point for future ease of use\n      data = data.map(function(series, i) {\n        series.data = series.data.map(function(point) {\n          point.series = i;\n          return point;\n        });\n        return series;\n      });\n\n\n      // x   .domain(d3.extent(d3.merge(seriesData), function(d) { return d[0] } ))\n      x.domain(d3.extent(d3.merge(seriesData), function(d) {  return d.date } ))\n      // x   .domain(d3.extent(api_data, function(d) { return d.DATENEW; }))\n        // x.domain(api_data.map((d)=>{\n        // return d.DATENEW\n        // }))\n          .range([0, width - margin.left - margin.right]);\n\n      // y   .domain(d3.extent(d3.merge(seriesData), function(d) { return d[1] } ))\n      y.domain(d3.extent(d3.merge(seriesData), function(d) { return d.sales } ))\n          .range([height - margin.top - margin.bottom, 0]);\n\n      // var vertices = \"\";\n\n      var vertices = d3.merge(data.map(function(line, lineIndex) {\n            return line.data.map(function(point, pointIndex) {\n              var pointKey = line.label + '-' + point[0];\n              // console.log(point)\n              // return [x(point[0]), y(point[1]), lineIndex, pointIndex]; //adding series index to point because data is being flattened\n              return [x(point.date), y(point.sales), lineIndex, pointIndex]; //adding series index to point because data is being flattened\n            })\n          })\n      );\n      // console.log(\"verti\",vertices);\n\n\n      var wrap = d3.select(this).selectAll('g.d3line').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'd3line').append('g');\n\n      gEnter.append('g').attr('class', 'lines');\n      gEnter.append('g').attr('class', 'point-clips');\n      gEnter.append('g').attr('class', 'point-paths');\n\n\n      var g = wrap.select('g')\n          .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n\n      var voronoiClip =  gEnter.append('g').attr('class', 'voronoi-clip')\n        .append('clipPath')\n          .attr('id', 'voronoi-clip-path-' + id) //this id should probably be set on update, unless ID is always set before render\n        .append('rect');\n      wrap.select('.voronoi-clip rect')\n          .attr('x', -10)\n          .attr('y', -10)\n          .attr('width', width - margin.left - margin.right + 20)\n          .attr('height', height - margin.top - margin.bottom + 20);\n      wrap.select('.point-paths')\n          .attr('clip-path', 'url(#voronoi-clip-path-' + id + ')');\n\n\n      //var pointClips = wrap.select('.point-clips').selectAll('clipPath') // **BROWSER BUG** can't reselect camel cased elements\n      var pointClips = wrap.select('.point-clips').selectAll('.clip-path')\n          .data(vertices);\n      pointClips.enter().append('clipPath').attr('class', 'clip-path')\n        .append('circle')\n          .attr('r', 25);\n      pointClips.exit().remove();\n      pointClips\n          .attr('id', function(d, i) { return 'clip-' + id + '-' + d[2] + '-' + d[3] })\n          .attr('transform', function(d) { return 'translate(' + d[0] + ',' + d[1] + ')' });\n\n\n      var voronoi = d3.geom.voronoi(vertices).map(function(d,i) {\n          return { 'data': d, 'series': vertices[i][2], 'point': vertices[i][3] }\n      });\n      // console.log(\"voro\",voronoi);\n\n      //TODO: Add very small amount of noise to prevent duplicates\n      var pointPaths = wrap.select('.point-paths').selectAll('path')\n          .data(voronoi);\n      pointPaths.enter().append('path')\n          .attr('class', function(d,i) { return 'path-' + i; });\n      pointPaths.exit().remove();\n      pointPaths\n          .attr('clip-path', function(d) { return 'url(#clip-' + id + '-' + d.series + '-' + d.point + ')'; })\n          .attr('d', function(d) { return 'M' + d.data.join(',') + 'Z'; })\n          .on('mouseover', function(d) {\n            dispatch.pointMouseover({\n              point: data[d.series].data[d.point],\n              series: data[d.series],\n              // pos: [x(data[d.series].data[d.point][0]) + margin.left, y(data[d.series].data[d.point][1]) + margin.top],\n              pos: [x(data[d.series].data[d.point].date) + margin.left, y(data[d.series].data[d.point].sales) + margin.top],\n              pointIndex: d.point,\n              seriesIndex: d.series\n            });\n          })\n          .on('mouseout', function(d) {\n            dispatch.pointMouseout({\n              point: d,\n              series: data[d.series],\n              pointIndex: d.point,\n              seriesIndex: d.series\n            });\n          });\n\n\n      dispatch.on('pointMouseover.point', function(d) { \n        wrap.select('.line-' + d.seriesIndex + ' .point-' + d.pointIndex)\n          .classed('hover', true);\n      });\n\n      dispatch.on('pointMouseout.point', function(d) { \n        wrap.select('.line-' + d.seriesIndex + ' .point-' + d.pointIndex)\n          .classed('hover', false);\n      });\n\n\n\n      var lines = wrap.select('.lines').selectAll('.line')\n          .data(function(d) { return d }, function(d) { return d.label });\n      lines.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n      d3.transition(lines.exit())\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6)\n          .remove();\n      lines.attr('class', function(d,i) { return 'line line-' + i })\n          .classed('hover', function(d) { return d.hover })\n          .style('fill', function(d,i) { return color[i % 10] })\n          .style('stroke', function(d,i) { return color[i % 10] })\n      d3.transition(lines)\n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .5);\n\n\n      var paths = lines.selectAll('path')\n          .data(function(d, i) { return [d.data] });\n      paths.enter().append('path')\n          .attr('d', d3.svg.line()\n            // .x(function(d) { return x0(d[0]) })\n            // .y(function(d) { return y0(d[1]) })\n             .x(function(d) { return x0(d.date) })\n            .y(function(d) { return y0(d.sales) })\n          );\n      paths.exit().remove();\n      d3.transition(paths)\n          .attr('d', d3.svg.line()\n            // .x(function(d) { return x(d[0]) })\n            // .y(function(d) { return y(d[1]) })\n             .x(function(d) { return x(d.date) })\n            .y(function(d) { return y(d.sales) })\n          );\n\n\n      var points = lines.selectAll('circle.point')\n          .data(function(d) { return d.data });\n      points.enter().append('circle')\n          // .attr('cx', function(d) { return x0(d[0]) })\n          // .attr('cy', function(d) { return y0(d[1]) });\n          .attr('cx', function(d) { return x0(d.date) })\n          .attr('cy', function(d) { return y0(d.sales) });\n      points.exit().remove();\n      points.attr('class', function(d,i) { return 'point point-' + i });\n      d3.transition(points)\n          // .attr('cx', function(d) { return x(d[0]) })\n          // .attr('cy', function(d) { return y(d[1]) })\n          .attr('cx', function(d) { return x(d.date) })\n          .attr('cy', function(d) { return y(d.sales) })\n          .attr('r', dotRadius());\n\n    });\n\n    x0 = x;\n    y0 = y;\n\n    return chart;\n  }\n\n\n\n  chart.dispatch = dispatch;\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.dotRadius = function(_) {\n    if (!arguments.length) return dotRadius;\n    dotRadius = d3.functor(_);\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = _;\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n\n  return chart;\n}\n\nfunction d3LineWithLegend() {\n  var margin = {top: 30, right: 40, bottom: 40, left: 60},\n      width = 960,\n      height = 500,\n      dotRadius = function() { return 2.5 },\n      xAxisLabelText = false,\n      yAxisLabelText = false,\n      color = d3.scale.category20().range(),\n      dispatch = d3.dispatch('showTooltip', 'hideTooltip');\n\n  var \n      x = d3.time.scale(),\n  // x = d3.scale.linear(),\n      y = d3.scale.linear(),\n      xAxis = d3.svg.axis().scale(x).orient('bottom'),\n      yAxis = d3.svg.axis().scale(y).orient('left'),\n      legend = d3Legend().height(30).color(color),\n      lines = d3Line();\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var series = data.filter(function(d) { return !d.disabled })\n            .map(function(d) { return d.data });\n\n      x   .domain(d3.extent(d3.merge(series), function(d) { return d.date } ))\n          .range([0, width - margin.left - margin.right]);\n\n      y   .domain(d3.extent(d3.merge(series), function(d) { return d.sales } ))\n          .range([height - margin.top - margin.bottom, 0]);\n\n      lines\n        .width(width - margin.left - margin.right)\n        .height(height - margin.top - margin.bottom)\n        .color(data.map(function(d,i) {\n          return d.color || color[i % 10];\n        }).filter(function(d,i) { return !data[i].disabled }))\n\n      xAxis\n        .ticks( width / 100 )\n        .tickSize(-(height - margin.top - margin.bottom), 0);\n      yAxis\n        .ticks( height / 36 )\n        .tickSize(-(width - margin.right - margin.left), 0)\n         .tickFormat(d3.format(\"s\"))\n\n      var wrap = d3.select(this).selectAll('g.wrap').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'wrap d3lineWithLegend').append('g');\n\n      gEnter.append('g').attr('class', 'legendWrap');\n      gEnter.append('g').attr('class', 'x axis');\n      gEnter.append('g').attr('class', 'y axis');\n      gEnter.append('g').attr('class', 'linesWrap');\n\n\n      legend.dispatch.on('legendClick', function(d, i) { \n        d.disabled = !d.disabled;\n\n        if (!data.filter(function(d) { return !d.disabled }).length) {\n          data.forEach(function(d) {\n            d.disabled = false;\n          });\n        }\n        // console.log(selection);\n        // selection.transition().call(chart)\n        // selection.transition()\n      });\n\n\n      legend.dispatch.on('legendMouseover', function(d, i) {\n        d.hover = true;\n        selection.transition().call(chart)\n      });\n\n      legend.dispatch.on('legendMouseout', function(d, i) {\n        d.hover = false;\n        selection.transition().call(chart)\n        // selection.transition().duration(2000).call(chart)\n      });\n\n\n      lines.dispatch.on('pointMouseover.tooltip', function(e) {\n        dispatch.showTooltip({\n          point: e.point,\n          series: e.series,\n          pos: [e.pos[0] + margin.left, e.pos[1] + margin.top],\n          seriesIndex: e.seriesIndex,\n          pointIndex: e.pointIndex\n        });\n      });\n\n      lines.dispatch.on('pointMouseout.tooltip', function(e) {\n        dispatch.hideTooltip(e);\n      });\n\n\n\n\n      legend\n          .color(color)\n          .width(width / 2 - margin.right);\n\n      wrap.select('.legendWrap')\n          .datum(data)\n          .attr('transform', 'translate(' + (width/2 - margin.left) + ',' + (-legend.height()) +')')\n          .call(legend);\n\n\n      //TODO: maybe margins should be adjusted based on what components are used: axes, axis labels, legend\n      // margin.top = legend.height();  //need to re-render to see update\n      margin.top = legend.height();  //need to re-render to see update\n\n      var g = wrap.select('g')\n          .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n\n      var linesWrap = wrap.select('.linesWrap')\n          .datum(data.filter(function(d) { return !d.disabled }));\n\n      d3.transition(linesWrap).call(lines);\n\n\n\n      var xAxisLabel = g.select('.x.axis').selectAll('text.axislabel')\n          .data([xAxisLabelText || null]);\n      xAxisLabel.enter().append('text').attr('class', 'axislabel')\n          .attr('text-anchor', 'middle')\n          .attr('x', x.range()[1] / 2)\n          .attr('y', margin.bottom - 5);\n      xAxisLabel.exit().remove();\n      xAxisLabel.text(function(d) { return d });\n\n      g.select('.x.axis')\n          .attr('transform', 'translate(0,' + y.range()[0] + ')')\n          .call(xAxis)\n        .selectAll('line.tick')\n        .filter(function(d) { return !d })\n          .classed('zero', true);\n\n\n      var yAxisLabel = g.select('.y.axis').selectAll('text.axislabel')\n          .data([yAxisLabelText || null]);\n      yAxisLabel.enter().append('text').attr('class', 'axislabel')\n          .attr('transform', 'rotate(-90)')\n          .attr('text-anchor', 'middle')\n          .attr('y', 20 - margin.left);\n      yAxisLabel.exit().remove();\n      yAxisLabel\n          .attr('x', -y.range()[0] / 2)\n          .text(function(d) { return d });\n\n      g.select('.y.axis')\n          .call(yAxis)\n        .selectAll('line.tick')\n        .filter(function(d) { return !d })\n          .classed('zero', true);\n    });\n\n    return chart;\n  }\n\n  chart.dispatch = dispatch;\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = _;\n    return chart;\n  };\n\n  chart.dotRadius = function(_) {\n    if (!arguments.length) return dotRadius;\n    dotRadius = d3.functor(_);\n    lines.dotRadius = d3.functor(_);\n    return chart;\n  };\n\n  //TODO: consider directly exposing both axes\n  //chart.xAxis = xAxis;\n\n  //Expose the x-axis' tickFormat method.\n  chart.xAxis = {};\n  d3.rebind(chart.xAxis, xAxis, 'tickFormat');\n\n  chart.xAxis.label = function(_) {\n    if (!arguments.length) return xAxisLabelText;\n    xAxisLabelText = _;\n    return chart;\n  }\n\n  // Expose the y-axis' tickFormat method.\n  //chart.yAxis = yAxis;\n\n  chart.yAxis = {};\n  d3.rebind(chart.yAxis, yAxis, 'tickFormat');\n\n  chart.yAxis.label = function(_) {\n    if (!arguments.length) return yAxisLabelText;\n    yAxisLabelText = _;\n    return chart;\n  }\n\n  return chart;\n}\n(function($) {\n\n  var nvtooltip = window.nvtooltip = {};\n\n  nvtooltip.show = function(pos, content, gravity, dist) {\n    var container = $('<div class=\"nvtooltip\">');\n\n    gravity = gravity || 's';\n    dist = dist || 20;\n\n    container\n      .html(content)\n      .css({left: -1000, top: -1000, opacity: 0})\n      .appendTo('body');\n\n    var height = container.height() + parseInt(container.css('padding-top'))  + parseInt(container.css('padding-bottom')),\n        width = container.width() + parseInt(container.css('padding-left'))  + parseInt(container.css('padding-right')),\n        // windowWidth = $(\".card-body\").width(),\n        // windowHeight = $(\".card-body\").height(),\n         windowWidth = $(window).width(),\n        windowHeight = $(window).height(),\n        scrollTop = $('body').scrollTop(),  //TODO: also adjust horizontal scroll\n        left, top;\n\n\n    //TODO: implement other gravities\n    switch (gravity) {\n      case 'e':\n      case 'w':\n      case 'n':\n        left = pos[0] - (width / 2);\n        top = pos[1] + dist;\n        if (left < 0) left = 5;\n        if (left + width > windowWidth) left = windowWidth - width - 5;\n        if (scrollTop + windowHeight < top + height) top = pos[1] - height - dist;\n        break;\n      case 's':\n        left = pos[0] - (width / 2);\n        top = pos[1] - height - dist;\n        if (left < 0) left = 5;\n        if (left + width > windowWidth) left = windowWidth - width - 5;\n        if (scrollTop > top) top = pos[1] + dist;\n        break;\n    }\n\n    container\n        .css({\n          left: left,\n          top: top,\n          opacity: 1\n        });\n  };\n\n  nvtooltip.cleanup = function() {\n    var tooltips = $('.nvtooltip');\n\n    // remove right away, but delay the show with css\n    tooltips.css({\n        'transition-delay': '0 !important',\n        '-moz-transition-delay': '0 !important',\n        '-webkit-transition-delay': '0 !important'\n    });\n\n    tooltips.css('opacity',0);\n\n    setTimeout(function() {\n      tooltips.remove()\n    }, 500);\n  };\n\n})(jQuery);\n\n  }\n};\n</script>\n\n<style>\n\n/********************\n * TOOLTIP CSS\n */\n\n.nvtooltip {\n  position: absolute;\n  background-color: rgba(255,255,255,1);\n  padding: 10px;\n  border: 1px solid #ddd;\n\n  font-family: Arial;\n  font-size: 13px;\n\n  transition: opacity 500ms linear;\n  -moz-transition: opacity 500ms linear;\n  -webkit-transition: opacity 500ms linear;\n\n  transition-delay: 500ms;\n  -moz-transition-delay: 500ms;\n  -webkit-transition-delay: 500ms;\n\n  -moz-box-shadow: 4px 4px 12px rgba(0,0,0,.5);\n  -webkit-box-shadow: 4px 4px 12px rgba(0,0,0,.5);\n  box-shadow: 4px 4px 12px rgba(0,0,0,.5);\n\n  -moz-border-radius: 15px;\n  border-radius : 15px;\n  z-index: 1000;\n}\n\n.nvtooltip h3 {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.nvtooltip p {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.nvtooltip span {\n  display: inline-block;\n  margin: 2px 0;\n}\n\n\n\n\n\n/**********\n*  General SVG CSS\n*/\n\n\n/* text {\n  font: 12px sans-serif;\n} */\n\n\n\n/**********\n*  Legend\n*/\n\n.legend .series {\n  cursor: pointer;\n}\n\n.legend circle {\n  stroke-width: 2px;\n}\n\n.legend .disabled circle {\n  fill-opacity: 0;\n}\n\n\n\n/**********\n*  Axes\n*/\n\n.axis path {\n  fill: none;\n  stroke: #000;\n  stroke-opacity: .75;\n  shape-rendering: crispEdges;\n}\n\n.axis path.domain {\n  stroke-opacity: .75;\n}\n\n.axis line {\n  fill: none;\n  stroke: #000;\n  stroke-opacity: .25;\n  shape-rendering: crispEdges;\n}\n\n.axis line.zero {\n  stroke-opacity: .75;\n}\n\n\n\n/**********\n*  Line chart\n*/\n\n.point-paths path {\n  /*\n  fill: #eee;\n  stroke: #aaa;\n  */\n  stroke-opacity: 0;\n  fill-opacity: 0;\n}\n\n\n.lines path {\n  fill: none;\n  stroke-width: 1.5px;\n  stroke-linecap: round;\n\n  transition: stroke-width 250ms linear;\n  -moz-transition: stroke-width 250ms linear;\n  -webkit-transition: stroke-width 250ms linear;\n\n  transition-delay: 250ms;\n  -moz-transition-delay: 250ms;\n  -webkit-transition-delay: 250ms;\n}\n\n.line.hover path {\n  stroke-width: 6px;\n}\n\n.lines .point {\n  transition: stroke-width 250ms linear;\n  -moz-transition: stroke-width 250ms linear;\n  -webkit-transition: stroke-width 250ms linear;\n}\n\n.lines .point.hover {\n  stroke-width: 20px;\n  stroke-opacity: .5;\n}\n\n</style>"]}]}