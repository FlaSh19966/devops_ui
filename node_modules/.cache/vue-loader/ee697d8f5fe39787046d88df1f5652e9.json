{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/analytics/components/GroupedBarChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/analytics/components/GroupedBarChart.vue","mtime":1643027096188},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGQzID0gcmVxdWlyZSgiZDMtMyIpOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiR3JvdXBlZEJhciIsCiAgICBwcm9wczogewogICAgZGF0YTogQXJyYXksCiAgICB4S2V5OiBTdHJpbmcsCiAgICB5S2V5OiBTdHJpbmcsCiAgICBwcmltYXJ5X2NvbDogU3RyaW5nLCAgCiAgICBzZWNvbmRhcnlfY29sOiBTdHJpbmcsCiAgICBjdXJyZW5jeV9rZXk6IFN0cmluZwoKICB9LAogIG1vdW50ZWQgKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgbWFyZ2luID0ge3RvcDogMjAsIHJpZ2h0OiAxNTAsIGJvdHRvbTogMjAwLCBsZWZ0OiA0MH0sCiAgICAgICAgICAgIHdpZHRoID0gOTYwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsCiAgICAgICAgICAgIGhlaWdodCA9IDcxMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOwoKICAgICAgICB2YXIgeDAgPSBkMy5zY2FsZS5vcmRpbmFsKCkKICAgICAgICAgICAgLnJhbmdlUm91bmRCYW5kcyhbMCwgd2lkdGhdLCAwLjEpOwoKICAgICAgICB2YXIgeDEgPSBkMy5zY2FsZS5vcmRpbmFsKCk7CgogICAgICAgIHZhciB5ID0gZDMuc2NhbGUubGluZWFyKCkKICAgICAgICAgICAgLnJhbmdlKFtoZWlnaHQtODAsIDBdKTsKCiAgICAgICAgdmFyIHhBeGlzID0gZDMuc3ZnLmF4aXMoKQogICAgICAgICAgICAuc2NhbGUoeDApCiAgICAgICAgICAgIC50aWNrU2l6ZSgwKQogICAgICAgICAgICAub3JpZW50KCJib3R0b20iKTsKCiAgICAgICAgdmFyIHlBeGlzID0gZDMuc3ZnLmF4aXMoKQogICAgICAgICAgICAuc2NhbGUoeSkKICAgICAgICAgICAgLm9yaWVudCgibGVmdCIpCiAgICAgICAgICAgIC50aWNrRm9ybWF0KGQzLmZvcm1hdCgicyIpKQoKICAgICAgICAvLyB2YXIgY29sb3IgPSBkMy5zY2FsZS5vcmRpbmFsKCkKICAgICAgICAvLyAgICAgLnJhbmdlKFsiI2NhMDAyMCIsIiNmNGE1ODIiLCIjZDVkNWQ1IiwiIzkyYzVkZSIsIiMwNTcxYjAiLCIjMDUxOWIwIl0pOwoKICAgICAgICAvLyB2YXIgY29sb3IgPSBkMy5zY2FsZS5vcmRpbmFsKCkKICAgICAgICAvLyAgICAgLnJhbmdlKFsiIzVkNjJiNSIsICIjMjljM2JlIiwgIiNmMTcyNmUiLCAiI2ZiYzUzZiIsICIjNjJiNThmIiwgIiNkMDc0M2MiLCAiI2ZmOGMwMCIsIiNjYTAwMjAiLCIjZjRhNTgyIiwiI2Q1ZDVkNSIsIiM5MmM1ZGUiLCIjMDU3MWIwIiwiIzA1MTliMCJdKTsKCiAgICAgICAgLy8gdmFyIGNvbG9yID0gZDMuc2NhbGUub3JkaW5hbCgpCiAgICAgICAgLy8gICAgIC5yYW5nZShbIiMzRkJDMTEiLCIjRkY5NzUwIiwgIiM1ZDYyYjUiLCAiIzI5YzNiZSIsICIjZjE3MjZlIiwgIiNmYmM1M2YiLCAiIzYyYjU4ZiIsICIjZDA3NDNjIiwiI2NhMDAyMCIsIiNmNGE1ODIiLCIjOTJjNWRlIiwiIzA1NzFiMCIsICIjZDNmZTE0IiwgIiNmZWM3ZjgiLCAiIzBiN2IzZSIsICIjMGJmMGU5IiwnI0U2NjZCMycsICcjMzM5OTFBJywgJyNDQzk5OTknLCAnI0IzQjMxQScsICcjMDBFNjgwJywKICAgICAgICAvLyAgICAgJyNGRjlBQTInLCAnI0ZGQjdCMicsICcjRkZEQUMxJywgJyNCNUVBRDcnLCAnIzYzZDJhOCcsICIjMjI1YTRiIiwgIiNlNWRmNzMiLCAnIzY2NjZGRicsJyNmZjAwMDAJJywnI2EyNzk4ZicsJyNkN2M2Y2YnLCcjZTg4NzU4JywnI2IxM2ExNScsJyM2ZDM2NTYnLCcjZmZmYTkwJywnI2E0ZmZhYScsJyNhNmNiZmYnLCcjODUwMGY5JywnI2IwNzdiYScsJwkjNzY1Mjg0JywnIzk4NGI2NycsJyM5YzYyNGUnLCcjZmViOGZmJywnIzliZTNiZCcsJyM3NzU5MzQnLCcjMDA4Mzg1JywnIzZhMmNhMScsJyNlNjBlNjgnLCcjZmY2ZDAxJywnI2ZlZTlkMycKICAgICAgICAvLyBdKTsKCiAgICAgICAgdmFyIGNvbG9yID0gZDMuc2NhbGUub3JkaW5hbCgpCiAgICAgICAgICAgIC5yYW5nZShbIiNGQkIzMTciLCIjRkY5NzUwIiwiIzNGQkMxMSIsIiMwMEM3RTYiLCIjRUEzMzc5IiwiIzAxNjVmYyIsIiM0MWZkZmUiLCIjMjRhMGVkIiwiIzFhYzFkZCIsIiM3ZGY5ZmYiLCIjM2YwMGZmIiwiIzA4ZmYwOCIsIiNhZWZmNmUiLCIjNTZmY2EyIiwiIzQ1Y2VhMiIsIiMwNmMyYWMiLCIjZmU2NzAwIiwiI2ZmMzUwMyIsIiNkOTAxNjYiLCIjYmUwM2ZkIiwiI2FkMGFmZCIsIiM2NjAwZmYiLCIjZDAxYzFmIiwiI2YxMTcyZiIsIiNmZmY2MDAiLCIjZmNkMTE2IiwiI2NmZmYwNCIsIiNmZmMzMjQiLCIjZjRjNDMwIiwiI0ZFN0Q2OCIsIiM3MTAxOTMiLAogICAgICAgICAgICAiIzA0OTJDMiIsIiM5ODk3QTkiLCIjNjMyQTBEIiwiIzlBNzk0RSIsIiMxNTFFM0QiLCIjNTk3ODhEIiwiIzFFNDU2RSIsIiMwMTYwNjQiLCIjNDhBQUFEIiwiIzdFN0Q5QyIsIiMzMDMxNTAiLCIjNjA5RDlFIiwiIzI4N0U5RSIsIiNFNEE4MzQiLCIjMDI4OTEwIiwKICAgICAgICAgICAgIiMzNzM3MzciLCIjNkM2MjZEIiwiIzU4NEQ1QiIsIiM0RDRDNUMiXSk7CiAgICAgICAgLy8gdmFyIGNvbG9yID0gZDMuc2NhbGUuY2F0ZWdvcnkxMCgpOwoKICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjZ3JvdXBlZF9iYXJfY2hhcnQnKS5hcHBlbmQoInN2ZyIpCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkKICAgICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG1hcmdpbi5sZWZ0ICsgIiwiICsgbWFyZ2luLnRvcCArICIpIik7CgogICAgICAgIC8vIGQzLmpzb24oImRhdGEuanNvbiIsIGZ1bmN0aW9uKGVycm9yLCBkYXRhKSB7CgogICAgICAgIHZhciBkYXRhID0gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiY2F0ZWdvcmllIjogIlN0dWRlbnQiLCAKICAgICAgICAgICAgICAgICJ2YWx1ZXMiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAwLCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiTm90IGF0IGFsbCIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDQsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgdmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTIsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJNZWRpdW0iCiAgICAgICAgICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiA2LCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiVmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMCwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlRyZW1lbmRvdXNseSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTAsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3Qgc28gbXVjaCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgewogICAgICAgICAgICAgICAgImNhdGVnb3JpZSI6ICJTdHVkZW50MTIzNDUiLCAKICAgICAgICAgICAgICAgICJ2YWx1ZXMiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAwLCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiTm90IGF0IGFsbCIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDQsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgdmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTIsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJNZWRpdW0iCiAgICAgICAgICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiA2LCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiVmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMCwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlRyZW1lbmRvdXNseSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTAsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3Qgc28gbXVjaCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiY2F0ZWdvcmllIjogIkxpYmVyYWwgUHJvZmVzc2lvbiIsIAogICAgICAgICAgICAgICAgInZhbHVlcyI6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDEsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgYXQgYWxsIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMjEsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgdmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTMsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJNZWRpdW0iCiAgICAgICAgICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAxOCwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlZlcnkgbXVjaCIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDYsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJUcmVtZW5kb3VzbHkiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDIwLCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiTm90IHNvIG11Y2giCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LCAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgImNhdGVnb3JpZSI6ICJTYWxhcmllZCBTdGFmZiIsIAogICAgICAgICAgICAgICAgInZhbHVlcyI6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDMsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgYXQgYWxsIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMjIsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgdmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogNiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIk1lZGl1bSIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDE1LCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiVmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMywgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlRyZW1lbmRvdXNseSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiY2F0ZWdvcmllIjogIkVtcGxveWVlIiwgCiAgICAgICAgICAgICAgICAidmFsdWVzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTIsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgYXQgYWxsIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogNywgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIk5vdCB2ZXJ5IG11Y2giCiAgICAgICAgICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAxOCwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIk1lZGl1bSIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDEzLCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiVmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogNiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlRyZW1lbmRvdXNseSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiY2F0ZWdvcmllIjogIkNyYWZ0c21hbiIsIAogICAgICAgICAgICAgICAgInZhbHVlcyI6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDYsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgYXQgYWxsIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMTUsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJOb3QgdmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogOSwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIk1lZGl1bSIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDEyLCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiVmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMywgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlRyZW1lbmRvdXNseSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiY2F0ZWdvcmllIjogIkluYWN0aXZlIiwgCiAgICAgICAgICAgICAgICAidmFsdWVzIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogNiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIk5vdCBhdCBhbGwiCiAgICAgICAgICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiA2LCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiTm90IHZlcnkgbXVjaCIKICAgICAgICAgICAgICAgICAgICB9LCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IDYsIAogICAgICAgICAgICAgICAgICAgICAgICAicmF0ZSI6ICJNZWRpdW0iCiAgICAgICAgICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAyLCAKICAgICAgICAgICAgICAgICAgICAgICAgInJhdGUiOiAiVmVyeSBtdWNoIgogICAgICAgICAgICAgICAgICAgIH0sIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogMywgCiAgICAgICAgICAgICAgICAgICAgICAgICJyYXRlIjogIlRyZW1lbmRvdXNseSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KICAgICAgICBdCgogICAgICAgIC8vIHZhciBzYW1wbGVkYXRhID0gW3siRHJ1ZyBOYW1lIjoiSFVNSVJBIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjQzMzMsIk91dGNvbWUiOiJJbXBhaXJtZW50L0RhbWFnZSJ9LHsiRHJ1ZyBOYW1lIjoiSFVNSVJBIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjI1MDIsIk91dGNvbWUiOiJIb3NwaXRhbGl6YXRpb24gLSBJbml0aWFsIG9yIFByb2xvbmdlZCJ9LHsiRHJ1ZyBOYW1lIjoiSFVNSVJBIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjM2OSwiT3V0Y29tZSI6IkRlYXRoIn0seyJEcnVnIE5hbWUiOiJIVU1JUkEiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6MTIyLCJPdXRjb21lIjoiRGlzYWJpbGl0eSJ9LHsiRHJ1ZyBOYW1lIjoiSFVNSVJBIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjM4LCJPdXRjb21lIjoiTGlmZS1UaHJlYXRlbmluZyJ9LHsiRHJ1ZyBOYW1lIjoiSFVNSVJBIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjQsIk91dGNvbWUiOiJDb25nZW5pdGFsIEFub21hbHkifSx7IkRydWcgTmFtZSI6IkhVTUlSQSIsIlVuaXF1ZSBQYXRpZW50IENvdW50IjoyLCJPdXRjb21lIjoiUmVxdWlyZWQgSW50ZXJ2ZW50aW9uIHRvIFByZXZlbnQgUGVybWFuZW50In0seyJEcnVnIE5hbWUiOiJYQVJFTFRPIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjI1ODAsIk91dGNvbWUiOiJJbXBhaXJtZW50L0RhbWFnZSJ9LHsiRHJ1ZyBOYW1lIjoiWEFSRUxUTyIsIlVuaXF1ZSBQYXRpZW50IENvdW50IjoxNjE5LCJPdXRjb21lIjoiSG9zcGl0YWxpemF0aW9uIC0gSW5pdGlhbCBvciBQcm9sb25nZWQifSx7IkRydWcgTmFtZSI6IlhBUkVMVE8iLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6NDg5LCJPdXRjb21lIjoiRGVhdGgifSx7IkRydWcgTmFtZSI6IlhBUkVMVE8iLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6NDMsIk91dGNvbWUiOiJMaWZlLVRocmVhdGVuaW5nIn0seyJEcnVnIE5hbWUiOiJYQVJFTFRPIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjI3LCJPdXRjb21lIjoiRGlzYWJpbGl0eSJ9LHsiRHJ1ZyBOYW1lIjoiWEFSRUxUTyIsIlVuaXF1ZSBQYXRpZW50IENvdW50IjoxLCJPdXRjb21lIjoiQ29uZ2VuaXRhbCBBbm9tYWx5In0seyJEcnVnIE5hbWUiOiJSRVZMSU1JRCIsIlVuaXF1ZSBQYXRpZW50IENvdW50IjoyMTY1LCJPdXRjb21lIjoiSG9zcGl0YWxpemF0aW9uIC0gSW5pdGlhbCBvciBQcm9sb25nZWQifSx7IkRydWcgTmFtZSI6IlJFVkxJTUlEIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjE2MDQsIk91dGNvbWUiOiJJbXBhaXJtZW50L0RhbWFnZSJ9LHsiRHJ1ZyBOYW1lIjoiUkVWTElNSUQiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6NjU4LCJPdXRjb21lIjoiRGVhdGgifSx7IkRydWcgTmFtZSI6IlJFVkxJTUlEIiwiVW5pcXVlIFBhdGllbnQgQ291bnQiOjI1LCJPdXRjb21lIjoiTGlmZS1UaHJlYXRlbmluZyJ9LHsiRHJ1ZyBOYW1lIjoiUkVWTElNSUQiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6MjAsIk91dGNvbWUiOiJEaXNhYmlsaXR5In0seyJEcnVnIE5hbWUiOiJSRVZMSU1JRCIsIlVuaXF1ZSBQYXRpZW50IENvdW50Ijo1LCJPdXRjb21lIjoiQ29uZ2VuaXRhbCBBbm9tYWx5In0seyJEcnVnIE5hbWUiOiJFTkJSRUwiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6MjA5MCwiT3V0Y29tZSI6IkltcGFpcm1lbnQvRGFtYWdlIn0seyJEcnVnIE5hbWUiOiJFTkJSRUwiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6NDQzLCJPdXRjb21lIjoiSG9zcGl0YWxpemF0aW9uIC0gSW5pdGlhbCBvciBQcm9sb25nZWQifSx7IkRydWcgTmFtZSI6IkVOQlJFTCIsIlVuaXF1ZSBQYXRpZW50IENvdW50Ijo1OCwiT3V0Y29tZSI6IkRpc2FiaWxpdHkifSx7IkRydWcgTmFtZSI6IkVOQlJFTCIsIlVuaXF1ZSBQYXRpZW50IENvdW50Ijo1MSwiT3V0Y29tZSI6IkRlYXRoIn0seyJEcnVnIE5hbWUiOiJFTkJSRUwiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6MjEsIk91dGNvbWUiOiJMaWZlLVRocmVhdGVuaW5nIn0seyJEcnVnIE5hbWUiOiJFTkJSRUwiLCJVbmlxdWUgUGF0aWVudCBDb3VudCI6MSwiT3V0Y29tZSI6IlJlcXVpcmVkIEludGVydmVudGlvbiB0byBQcmV2ZW50IFBlcm1hbmVudCJ9XQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7CiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZGF0YS5yZWR1Y2UoKHIsIGkpID0+ICgocltpW3ZtLnByaW1hcnlfY29sXV0gPSByW2lbdm0ucHJpbWFyeV9jb2xdXSB8fCBbXSkucHVzaCh7CiAgICAgICAgICAgIGRhdGUgOiBpW3ZtLnNlY29uZGFyeV9jb2xdLAogICAgICAgICAgICBzYWxlczogaVt2bS55S2V5XQogICAgICAgICAgICAgLy8gaQogICAgICAgIH0pLCByKSwge30pOwogICAgICAgIHZhciBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMobWFwKTsKICAgICAgICBjb25zdCBzZWNvbmRfZGF0YSA9IFtdOwogICAgICAgIGZvcihsZXQgaSA9MDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc2Vjb25kX2RhdGEucHVzaCh7CiAgICAgICAgICAgIGNhdGVnb3JpZSA6IGVudHJpZXNbaV1bMF0sCiAgICAgICAgICAgIHZhbHVlczogW10sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGZvcihsZXQgaiA9MCA7IGogPCBlbnRyaWVzW2ldWzFdLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIHNlY29uZF9kYXRhW2ldLnZhbHVlcy5wdXNoKHsKICAgICAgICAgICAgICAgIHJhdGU6IGVudHJpZXNbaV1bMV1bal0uZGF0ZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyaWVzW2ldWzFdW2pdLnNhbGVzLAogICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGVudHJpZXNbaV1bMF0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkYXRhID0gW107CiAgICAgICAgZGF0YSA9IHNlY29uZF9kYXRhOwogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgIHZhciBjYXRlZ29yaWVzTmFtZXMscmF0ZU5hbWVzICAgICAgIAogICAgICAgIHZhciBjYXRlZ29yaWVzTmFtZXNGdWxsID0gZGF0YS5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jYXRlZ29yaWU7IH0pOwogICAgICAgIC8vIHZhciBjYXRlZ29yaWVzTmFtZXMgPSBkYXRhLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLmNhdGVnb3JpZTsgfSk7CiAgICAgICAgLy8gdmFyIHJhdGVOYW1lcyA9IGRhdGFbMF0udmFsdWVzLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhdGU7IH0pOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHJhdGVOYW1lcyxjYXRlZ29yaWVzTmFtZXMpOwogICAgICAgIHZhciBpc1Njcm9sbERpc3BsYXllZCA9ICBmYWxzZSwKICAgICAgICBudW1CYXJzID0gNDsKICAgICAgICB2YXIgbWFyZ2luT3ZlcnZpZXcgPSB7dG9wOiAzMCwgcmlnaHQ6IDEwLCBib3R0b206IDIwLCBsZWZ0OiA3MH07CiAgICAgICAgdmFyIGhlaWdodE92ZXJ2aWV3ID0gODAgLSBtYXJnaW5PdmVydmlldy50b3AgLSBtYXJnaW5PdmVydmlldy5ib3R0b207CiAgICAgICAgaWYoY2F0ZWdvcmllc05hbWVzRnVsbC5sZW5ndGggPiA1ICkgeyBpc1Njcm9sbERpc3BsYXllZCA9IHRydWU7IH0KICAgICAgICBjYXRlZ29yaWVzTmFtZXMgPSBkYXRhLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLmNhdGVnb3JpZTsgfSk7CiAgICAgICAgcmF0ZU5hbWVzICAgICAgID0gZGF0YVsyXS52YWx1ZXMubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucmF0ZTsgfSk7CgogICAgICAgIC8vIGNvbnNvbGUubG9nKHJhdGVOYW1lcyk7CiAgICAgICAgLy8gZm9yKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspewogICAgICAgICAgICAKICAgICAgICAvLyB9CiAgICAgICAgbGV0IGtleV9kYXRhX3RlbXAgPSBbXSwKICAgICAgICBrZXlfZGF0YV90ZW1wX2xlbmd0aCA9IFtdOwogICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YVtpXS52YWx1ZXMubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucmF0ZTsgfSkpCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGQzLmtleXMoZGF0YVtpXS52YWx1ZXMpKQogICAgICAgICAgICBrZXlfZGF0YV90ZW1wLnB1c2goZGF0YVtpXS52YWx1ZXMubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucmF0ZTsgfSkpCiAgICAgICAgICAgIGtleV9kYXRhX3RlbXBfbGVuZ3RoLnB1c2goZDMua2V5cyhkYXRhW2ldKS5zbGljZSgxKS5sZW5ndGgpCiAgICAgICAgfQogICAgICAgIC8vIGNvbnNvbGUubG9nKGtleV9kYXRhX3RlbXApOwogICAgICAgIGxldCBrZXlfZGF0YV90ZW1wXzIgPSBbXTsKICAgICAgICBmb3IobGV0IGkgPTA7IGkgPCBrZXlfZGF0YV90ZW1wLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGtleV9kYXRhX3RlbXBbaV0ubGVuZ3RoOyBqKyspewogICAgICAgICAgICAgICAga2V5X2RhdGFfdGVtcF8yLnB1c2goa2V5X2RhdGFfdGVtcFtpXVtqXSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgeHl6ID0ga2V5X2RhdGFfdGVtcF8yLnJlZHVjZShmdW5jdGlvbihhLGIpewogICAgICAgIGlmKGEuaW5kZXhPZihiKSA8IDAgKSBhLnB1c2goYik7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSwgW10pCiAgICAgICAgLy8gY29uc29sZS5sb2coeHl6LCAnSEVSRSBGT1IgRElTVElOQ1QnKQogICAgICAgIHJhdGVOYW1lcyA9IHh5ejsKICAgICAgICAvLyBjb25zb2xlLmxvZyhpc1Njcm9sbERpc3BsYXllZCk7CiAgICAgICAgaWYoaXNTY3JvbGxEaXNwbGF5ZWQpIHsKICAgICAgICAgICAgLy8gY2F0ZWdvcmllc05hbWVzID0gZGF0YS5zbGljZSgwLG51bUJhcnMpLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLmNhdGVnb3JpZTsgfSk7CiAgICAgICAgICAgIC8vIHJhdGVOYW1lcyAgICAgICA9IGRhdGFbMF0udmFsdWVzLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhdGU7IH0pOwogICAgICAgICAgICB4MC5kb21haW4oY2F0ZWdvcmllc05hbWVzLnNsaWNlKDAsbnVtQmFycykpOwogICAgICAgICAgICB4MS5kb21haW4ocmF0ZU5hbWVzKS5yYW5nZVJvdW5kQmFuZHMoWzAsIHgwLnJhbmdlQmFuZCgpXSk7IAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGNhdGVnb3JpZXNOYW1lcyA9IGRhdGEubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY2F0ZWdvcmllOyB9KTsKICAgICAgICAgICAgLy8gcmF0ZU5hbWVzID0gZGF0YVswXS52YWx1ZXMubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucmF0ZTsgfSk7CiAgICAgICAgICAgIHgwLmRvbWFpbihjYXRlZ29yaWVzTmFtZXMpOwogICAgICAgICAgICB4MS5kb21haW4ocmF0ZU5hbWVzKS5yYW5nZVJvdW5kQmFuZHMoWzAsIHgwLnJhbmdlQmFuZCgpXSk7IAogICAgICAgIH0KICAgICAgICB5LmRvbWFpbihbMCwgZDMubWF4KGRhdGEsIGZ1bmN0aW9uKGNhdGVnb3JpZSkgeyByZXR1cm4gZDMubWF4KGNhdGVnb3JpZS52YWx1ZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudmFsdWU7IH0pOyB9KV0pOwoKICAgICAgICAvLyBpZihkYXRhLmxlbmd0aCA+IDIpIHsKICAgICAgICAvLyAgICAgc3ZnLmFwcGVuZCgiZyIpCiAgICAgICAgLy8gICAgIC5zdHlsZSgiZm9udC1zaXplIiwgIjEycHgiKQogICAgICAgIC8vICAgICAuYXR0cigiY2xhc3MiLCAieGdyb3VwZWQiKQogICAgICAgIC8vICAgICAuc3R5bGUoJ29wYWNpdHknLCcwJykKICAgICAgICAvLyAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKQogICAgICAgIC8vICAgICAuY2FsbCh4QXhpcykKICAgICAgICAvLyAgICAgZDMuc2VsZWN0QWxsKCJ0ZXh0IikKICAgICAgICAvLyAgICAgLmF0dHIoInkiLCAwKQogICAgICAgIC8vICAgICAuYXR0cigieCIsIC0xMCkKICAgICAgICAvLyAgICAgLmF0dHIoImR5IiwgIi4zNWVtIikKICAgICAgICAvLyAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJyb3RhdGUoLTcwKSIpCiAgICAgICAgLy8gICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAiZW5kIik7ICAKICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICBzdmcuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgInhncm91cGVkIikKICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywnMCcpCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIGhlaWdodCArICIpIikKICAgICAgICAgICAgLmNhbGwoeEF4aXMpCiAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLnRpY2sgdGV4dCIpCiAgICAgICAgICAgIC5jYWxsKHdyYXAsIDEwKQogICAgICAgICAgICBmdW5jdGlvbiB3cmFwKHRleHQsIHdpZHRoKSB7CiAgICAgICAgICAgIHRleHQuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgdGV4dCA9IGQzLnNlbGVjdCh0aGlzKSwKICAgICAgICAgICAgICAgICAgd29yZHMgPSB0ZXh0LnRleHQoKS5zcGxpdCgvXHMrLykucmV2ZXJzZSgpLAogICAgICAgICAgICAgICAgICB3b3JkLAogICAgICAgICAgICAgICAgICBsaW5lID0gW10sCiAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXIgPSAwLAogICAgICAgICAgICAgICAgLy8gICBsaW5lSGVpZ2h0ID0gMC42LCAvLyBlbXMKICAgICAgICAgICAgICAgICAgbGluZUhlaWdodCA9IDEuMSwgLy8gZW1zCiAgICAgICAgICAgICAgICAgIHkgPSB0ZXh0LmF0dHIoInkiKSwKICAgICAgICAgICAgICAgICAgZHkgPSBwYXJzZUZsb2F0KHRleHQuYXR0cigiZHkiKSksCiAgICAgICAgICAgICAgICAgIHRzcGFuID0gdGV4dC50ZXh0KG51bGwpLmFwcGVuZCgidHNwYW4iKS5hdHRyKCJ4IiwgMCkuYXR0cigieSIsIHkpLmF0dHIoImR5IiwgZHkgKyAiZW0iKTsKICAgICAgICAgICAgICB3aGlsZSAod29yZCA9IHdvcmRzLnBvcCgpKSB7CiAgICAgICAgICAgICAgICBsaW5lLnB1c2god29yZCk7CiAgICAgICAgICAgICAgICB0c3Bhbi50ZXh0KGxpbmUuam9pbigiICIpKTsKICAgICAgICAgICAgICAgIGlmICh0c3Bhbi5ub2RlKCkuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgPiB3aWR0aCkgewogICAgICAgICAgICAgICAgICBsaW5lLnBvcCgpOwogICAgICAgICAgICAgICAgICB0c3Bhbi50ZXh0KGxpbmUuam9pbigiICIpKTsKICAgICAgICAgICAgICAgICAgbGluZSA9IFt3b3JkXTsKICAgICAgICAgICAgICAgICAgdHNwYW4gPSB0ZXh0LmFwcGVuZCgidHNwYW4iKS5hdHRyKCJ4IiwgMCkuYXR0cigieSIsIHkpLmF0dHIoImR5IiwgKytsaW5lTnVtYmVyICogbGluZUhlaWdodCArIGR5ICsgImVtIikudGV4dCh3b3JkKQogICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgLy8gfQoKICAgICAgICBzdmcuYXBwZW5kKCJnIikKICAgICAgICAvLyAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLDMwKSIpCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJ5IGF4aXMiKQogICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCcwJykKICAgICAgICAgICAgLmNhbGwoeUF4aXMpCiAgICAgICAgLy8gLmFwcGVuZCgidGV4dCIpCiAgICAgICAgLy8gICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAicm90YXRlKC05MCkiKQogICAgICAgIC8vICAgICAuYXR0cigieSIsIDYpCiAgICAgICAgLy8gICAgIC5hdHRyKCJkeSIsICIuNzFlbSIpCiAgICAgICAgLy8gICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAiZW5kIikKICAgICAgICAvLyAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsJ2JvbGQnKQogICAgICAgIC8vICAgICAudGV4dCgiVmFsdWUiKTsKCiAgICAgICAgc3ZnLnNlbGVjdCgnLnknKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oNTAwKS5kZWxheShmdW5jdGlvbihkLGkpeyByZXR1cm4gMTMwMCArIDEwMCAqIGk7IH0pLnN0eWxlKCdvcGFjaXR5JywnMScpOwogICAgICAgIHN2Zy5zZWxlY3QoJy54Z3JvdXBlZCcpLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDApLmRlbGF5KGZ1bmN0aW9uKGQsaSl7IHJldHVybiAxMzAwICsgMTAwICogaTsgfSkuc3R5bGUoJ29wYWNpdHknLCcxJyk7CiAgICAgICAgdmFyIHRvb2x0aXAgPSBkMy5zZWxlY3QoIi5jYXJkLWJvZHkiKS5hcHBlbmQoImRpdiIpLmF0dHIoImNsYXNzIiwgInRvb2xUaXAiKTsKCiAgICAgICAgaWYoaXNTY3JvbGxEaXNwbGF5ZWQpIHsKCiAgICAgICAgICAgIHZhciBzbGljZSA9IHN2Zy5zZWxlY3RBbGwoIi5zbGljZSIpCiAgICAgICAgICAgICAgICAuZGF0YShkYXRhLnNsaWNlKDAsbnVtQmFycykpCiAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgLmFwcGVuZCgic3ZnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsImdyb3VwIikKICAgICAgICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImciKQogICAgICAgICAgICAgICAgLmF0dHIoImlkIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jYXRlZ29yaWUgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLGZ1bmN0aW9uKGQpIHsgcmV0dXJuICJ0cmFuc2xhdGUoIiArIHgwKGQuY2F0ZWdvcmllKSArICIsMCkiOyB9KQoKICAgICAgICAgICAgc2xpY2Uuc2VsZWN0QWxsKCJyZWN0IikKICAgICAgICAgICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudmFsdWVzOyB9KQogICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCJyZWN0IikKICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHgxLnJhbmdlQmFuZCgpKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIi5iYXItcG9zaXRpdmUtc3RhY2siKQogICAgICAgICAgICAgICAgLy8gLmF0dHIoImlkIiwgZ3VpZEdlbmVyYXRvcigpKQogICAgICAgICAgICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbihkKSB7ICByZXR1cm4geDEoZC5yYXRlKTsgfSkKICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGNvbG9yKGQucmF0ZSkgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geSgwKTsgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbihkKSB7IHJldHVybiAgeSgwKTsgfSkKICAgICAgICAgICAgICAgIC8vIC5hdHRyKCJ5IiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLnZhbHVlKTsgfSkKICAgICAgICAgICAgICAgIC8vIC5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbihkKSB7IHJldHVybiBoZWlnaHQgLSB5KGQudmFsdWUpOyB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnN0eWxlKCJmaWxsIiwgZDMucmdiKGNvbG9yKGQucmF0ZSkpLmJyaWdodGVyKDEpKTsKICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdpZCcpOwogICAgICAgICAgICAgICAgICAgIHRvb2x0aXAKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImxlZnQiLCBldmVudC5wYWdlWCAtIDMxNSArICJweCIpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0b3AiLCBldmVudC5wYWdlWSAtIDE3MCArICJweCIpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpCiAgICAgICAgICAgICAgICAgICAgLmh0bWwoICI8ZW0+IDxiPiIgKyBkLmNhdGVnb3J5ICsgIiA8L2I+IDwvZW0+IDxicj4iICsgZC5yYXRlICsgIjxicj4iICsgdm0uY3VycmVuY3lfa2V5ICsgJyAnICsgKChOdW1iZXIuaXNJbnRlZ2VyKGQudmFsdWUpKSA/IGQudmFsdWUgOiAgZC52YWx1ZS50b0ZpeGVkKDIpKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKCJkaXNwbGF5IiwgIm5vbmUiKTsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoImZpbGwiLCBjb2xvcihkLnJhdGUpKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgc2xpY2Uuc2VsZWN0QWxsKCJyZWN0IikKICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAuZGVsYXkoZnVuY3Rpb24gKGQpIHtyZXR1cm4gTWF0aC5yYW5kb20oKSoxMDAwO30pCiAgICAgICAgICAgIC5kdXJhdGlvbigxMDAwKQogICAgICAgICAgICAuYXR0cigieSIsIGZ1bmN0aW9uKGQpIHsgaWYoZC52YWx1ZSA9PT0gMCl7cmV0dXJuIDA7fSBlbHNlIHsgcmV0dXJuIHkoZC52YWx1ZSk7fSB9KQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZnVuY3Rpb24oZCkgeyAgaWYoZC52YWx1ZSA9PT0gMCl7cmV0dXJuIDA7fSBlbHNlIHtyZXR1cm4gaGVpZ2h0IC0geShkLnZhbHVlKTsgfX0pOwoKICAgICAgICAgICAgdmFyIHhPdmVydmlldyA9IGQzLnNjYWxlLm9yZGluYWwoKQogICAgICAgICAgICAgICAgLmRvbWFpbihkYXRhLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5sYWJlbDsgfSkpCiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSwgLjIpOwogICAgICAgICAgICB2YXIgeU92ZXJ2aWV3ID0gZDMuc2NhbGUubGluZWFyKCkucmFuZ2UoW2hlaWdodE92ZXJ2aWV3LCAwXSk7CiAgICAgICAgICAgIHlPdmVydmlldy5kb21haW4oeS5kb21haW4oKSk7CgogICAgICAgICAgICB2YXIgZGlzcGxheWVkID0gZDMuc2NhbGUucXVhbnRpemUoKQogICAgICAgICAgICAgICAgICAgIC5kb21haW4oWzAsIHdpZHRoXSkKICAgICAgICAgICAgICAgICAgICAucmFuZ2UoZDMucmFuZ2UoZGF0YS5sZW5ndGgpKTsKICAgICAgICAgICAgICAgICAgICBzdmcuYXBwZW5kKCJnIikuYXBwZW5kKCJyZWN0IikKICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSg1LCAiICsgKGhlaWdodCs1KSArICIpIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW92ZXIiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgMCkKICAgICAgICAgICAgICAgICAgICAuYXR0cigieSIsIDApCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInJ4Iiw1KQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyeSIsMTApCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDEwKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsTWF0aC5yb3VuZChwYXJzZUZsb2F0KG51bUJhcnMgKiB3aWR0aCkvZGF0YS5sZW5ndGgpKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJhbGwiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJjdXJzb3IiLCAiZXctcmVzaXplIikKICAgICAgICAgICAgICAgICAgICAuY2FsbChkMy5iZWhhdmlvci5kcmFnKCkub24oImRyYWciLCBkaXNwbGF5KSk7CiAgICAgICAgfSAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgc2xpY2UgPSBzdmcuc2VsZWN0QWxsKCIuc2xpY2UiKQogICAgICAgICAgICAgICAgLmRhdGEoZGF0YSkKICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAgICAgLy8gLmF0dHIoIiIpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJpZCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY2F0ZWdvcmllIH0pCiAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIixmdW5jdGlvbihkKSB7IHJldHVybiAidHJhbnNsYXRlKCIgKyB4MChkLmNhdGVnb3JpZSkgKyAiLDApIjsgfSkKCiAgICAgICAgICAgIHNsaWNlLnNlbGVjdEFsbCgicmVjdCIpCiAgICAgICAgICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7IHJldHVybiBkLnZhbHVlczsgfSkKICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCB4MS5yYW5nZUJhbmQoKSkKICAgICAgICAgICAgICAgIC8vIC5hdHRyKCJpZCIsIGd1aWRHZW5lcmF0b3IoKSkKICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geDEoZC5yYXRlKTsgfSkKICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGNvbG9yKGQucmF0ZSkgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geSgwKTsgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KDApOyB9KQogICAgICAgICAgICAgICAgLy8gLmF0dHIoInkiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQudmFsdWUpOyB9KQogICAgICAgICAgICAgICAgLy8gLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGhlaWdodCAtIHkoZC52YWx1ZSk7IH0pCiAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoImZpbGwiLCBkMy5yZ2IoY29sb3IoZC5yYXRlKSkuYnJpZ2h0ZXIoMSkpOwogICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ2lkJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZCkKICAgICAgICAgICAgICAgICAgICB0b29sdGlwCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJsZWZ0IiwgZXZlbnQucGFnZVggLSAzMTUgKyAicHgiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidG9wIiwgZXZlbnQucGFnZVkgLSAxNzAgKyAicHgiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKQogICAgICAgICAgICAgICAgICAgIC5odG1sKCAiPGVtPiA8Yj4iICsgZC5jYXRlZ29yeSArICIgPC9iPiA8L2VtPiA8YnI+IiArIGQucmF0ZSArICI8YnI+Iisgdm0uY3VycmVuY3lfa2V5ICsgJyAnICArICgoTnVtYmVyLmlzSW50ZWdlcihkLnZhbHVlKSkgPyBkLnZhbHVlIDogIGQudmFsdWUudG9GaXhlZCgyKSkpOwogICAgICAgICAgICAgICAgICAgIC8vIC5odG1sKCBkLnJhdGUgKyAiPGJyPiIgICsgZC52YWx1ZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKCJkaXNwbGF5IiwgIm5vbmUiKTsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoImZpbGwiLCBjb2xvcihkLnJhdGUpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBzbGljZS5zZWxlY3RBbGwoInJlY3QiKQogICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kZWxheShmdW5jdGlvbiAoZCkge3JldHVybiBNYXRoLnJhbmRvbSgpKjEwMDA7fSkKICAgICAgICAgICAgLmR1cmF0aW9uKDEwMDApCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLnZhbHVlKTsgfSkKICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGhlaWdodCAtIHkoZC52YWx1ZSk7IH0pOwoKICAgICAgICAvLyBzbGljZS5zZWxlY3RBbGwoInJlY3QiKQogICAgICAgIC8vIC50cmFuc2l0aW9uKCkKICAgICAgICAvLyAuZGVsYXkoKGQsaSk9PiBpICogMTUwKQogICAgICAgIC8vIC5kdXJhdGlvbig4MDApCiAgICAgICAgLy8gLmF0dHIoInkiLCBmdW5jdGlvbihkKSB7cmV0dXJuIHkoZC52YWx1ZSk7IH0pCiAgICAgICAgCiAgICAgICAgLy9MZWdlbmQKICAgICAgICB2YXIgbGVnZW5kX2RpdiA9IGQzLnNlbGVjdCgiI2xlZ2VuZF9kaXYiKS5hcHBlbmQoInN2ZyIpLnN0eWxlKCJ3aWR0aCIsIjIwMCUiKS5zdHlsZSgiaGVpZ2h0IiwiMjUwJSIpOwogICAgICAgIHZhciBsZWdlbmRfZyA9ICBsZWdlbmRfZGl2LmFwcGVuZCgiZyIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwwKSIpOwogICAgICAgIC8vIHZhciBsZWdlbmQgPSBzdmcuc2VsZWN0QWxsKCIubGVnZW5kIikKICAgICAgICB2YXIgbGVnZW5kID0gIGxlZ2VuZF9nLmFwcGVuZCgiZyIpCiAgICAgICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikKICAgICAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIDEwKQogICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAiZW5kIikKICAgICAgICAgICAgLnNlbGVjdEFsbCgiZyIpCiAgICAgICAgICAgIC8vIC5kYXRhKGRhdGFbMV0udmFsdWVzLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhdGU7IH0pKQogICAgICAgICAgICAuZGF0YShyYXRlTmFtZXMpCiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpCiAgICAgICAgICAgIC8vIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQiKQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24oZCxpKSB7IHJldHVybiAidHJhbnNsYXRlKDAsIiArIGkgKiAyMCArICIpIjsgfSkKICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwiMSIpOwoKICAgICAgICBsZWdlbmQuYXBwZW5kKCJyZWN0IikKICAgICAgICAgICAgLmF0dHIoIngiLCAwKQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCAxOCkKICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDE4KQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb2xvcihkKTsgfSk7CgogICAgICAgIGxlZ2VuZC5hcHBlbmQoInRleHQiKQogICAgICAgICAgICAuYXR0cigieCIsIDI1KQogICAgICAgICAgICAuYXR0cigieSIsIDkpCiAgICAgICAgICAgIC5hdHRyKCJkeSIsICIuMzVlbSIpCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmRfdGV4dCIpCiAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAic3RhcnQiKQogICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAvLyByZXR1cm4gZC50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgaWYoZC5sZW5ndGggPiAyNSl7CiAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc3Vic3RyaW5nKDAsMjUpLnRvVXBwZXJDYXNlKCkrJy4uLic7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIHJldHVybiBkLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICBkMy5zZWxlY3RBbGwoJy5sZWdlbmRfdGV4dCcpLmNhbGwoc2hvd19sb25nX2xhYmVscyk7CiAgICAgICAgZnVuY3Rpb24gc2hvd19sb25nX2xhYmVscyhzZWxlY3Rpb24pIHsKICAgICAgICAgICAgc2VsZWN0aW9uLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGQsaSkgeyAKICAgICAgICAgICAgLy8gdmFyIHRvb2x0aXAgPSAKICAgICAgICAgICAgLy8gZDMuc2VsZWN0KCIjc3RhY2tlZGJhcm5vbnRpbWUiKS5hcHBlbmQoImRpdiIpLmF0dHIoImNsYXNzIiwgInRvb2xUaXAiKQogICAgICAgICAgICAgICAgaWYoZC5sZW5ndGggPiAyNSl7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXAKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImxlZnQiLCBkMy5ldmVudC5wYWdlWCAtIDQwMCArICJweCIpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0b3AiLCBkMy5ldmVudC5wYWdlWSAtIDI5MCArICJweCIpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpCiAgICAgICAgICAgICAgICAgICAgLmh0bWwoZC50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHNlbGVjdGlvbi5vbigibW91c2VvdXQiLCBmdW5jdGlvbihkLGkpIHsKICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdEFsbCgiLnRvb2xUaXAiKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUoImRpc3BsYXkiLCAibm9uZSIpOyAvLyBoaWRlIHRvb2x0aXAgZm9yIHRoYXQgZWxlbWVudAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHNlbGVjdGlvbi5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgdG9vbHRpcAogICAgICAgICAgICAgICAgLnN0eWxlKCJ0b3AiLCBkMy5ldmVudC5sYXllclkgKyAxMDAgKyAicHgiKSAKICAgICAgICAgICAgICAgIC5zdHlsZSgibGVmdCIsIGQzLmV2ZW50LmxheWVyWCAtIDIxMCArICJweCIpOyAKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAKICAgICAgICBsZWdlbmQudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCkuZGVsYXkoZnVuY3Rpb24oZCxpKXsgcmV0dXJuIDEzMDAgKyAxMDAgKiBpOyB9KS5zdHlsZSgib3BhY2l0eSIsIjEiKTsKCiAgICAgICAgLy8gdmFyIGhvdmVyZGF0YSA9ICQoIiNTdHVkZW50Iik7CiAgICAgICAgLy8gaG92ZXJkYXRhLm1vdXNlb3ZlciAoZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJIZWxsbyIpCiAgICAgICAgLy8gICAgIGhvdmVyZGF0YS5hZGRDbGFzcygiYmFja2dyb3VuZC1jb2xvciIpCiAgICAgICAgLy8gfSk7CgogICAgZnVuY3Rpb24gZGlzcGxheSAoKSB7CiAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgdmFyIHh5ID0gcGFyc2VJbnQoZDMuc2VsZWN0KHRoaXMpLmF0dHIoIngiKSksCiAgICAgICAgICAgIG54ID0geHkgKyBkMy5ldmVudC5keCwKICAgICAgICAgICAgdyA9IHBhcnNlSW50KGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJ3aWR0aCIpKSwKICAgICAgICAgICAgZiwgbmYsIG5ld19kYXRhLCByZWN0czsKCiAgICAgICAgaWYgKCBueCA8IDAgfHwgbnggKyB3ID4gd2lkdGggKSByZXR1cm47CgogICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJ4IiwgbngpOwoKICAgICAgICBmID0gZGlzcGxheWVkKHh5KTsKICAgICAgICBuZiA9IGRpc3BsYXllZChueCk7CgogICAgICAgIGlmICggZiA9PT0gbmYgKSByZXR1cm47CgogICAgICAgIG5ld19kYXRhID0gZGF0YS5zbGljZShuZiwgbmYgKyBudW1CYXJzKTsKCiAgICAgICAgeDAuZG9tYWluKG5ld19kYXRhLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5jYXRlZ29yaWU7IH0pKTsKCiAgICAgICAgLy8geDAuZG9tYWluKGNhdGVnb3JpZXNOYW1lcyk7CiAgICAgICAgLy8geDEuZG9tYWluKHJhdGVOYW1lcykucmFuZ2VSb3VuZEJhbmRzKFswLCB4MC5yYW5nZUJhbmQoKV0pOyAKICAgICAgICAvLyBkMy5zZWxlY3RBbGwoIi54IGF4aXMiKS5yZW1vdmUoKTsKCiAgICAgICAgaWYobnVtQmFycyA+IDQgKXsKICAgICAgICAgICAgLy8gc3ZnLmFwcGVuZCgiZyIpCiAgICAgICAgICAgIC8vICAgICAuc3R5bGUoImZvbnQiLCAiMTBweCB0aW1lcyIpCiAgICAgICAgICAgIC8vICAgICAuYXR0cigiY2xhc3MiLCAieGdyb3VwZWQiKQogICAgICAgICAgICAvLyAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKQogICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCIueGdyb3VwZWQiKQogICAgICAgICAgICAvLyAgLnN0eWxlKCJmb250IiwgIjEwcHggdGltZXMiKQogICAgICAgICAgICAvLyBzdmcuYXBwZW5kKCJnIikKICAgICAgICAgICAgICAgIC8vIC5hdHRyKCJjbGFzcyIsICJ4Z3JvdXBlZCIpCiAgICAgICAgICAgICAgICAvLyAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpCiAgICAgICAgICAgIC5jYWxsKHhBeGlzKQogICAgICAgICAgICAuc2VsZWN0QWxsKCJ0ZXh0IikKICAgICAgICAgICAgLmF0dHIoInkiLCAwKQogICAgICAgICAgICAuYXR0cigieCIsIC0xMCkKICAgICAgICAgICAgLmF0dHIoImR5IiwgIi4zNWVtIikKICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJyb3RhdGUoLTcwKSIpCiAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAiZW5kIikgICAgICAgICAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gc3ZnLmFwcGVuZCgiZyIpCiAgICAgICAgICAgIC8vIC5hdHRyKCJjbGFzcyIsICJ4Z3JvdXBlZCIpCiAgICAgICAgICAgIC8vIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIGhlaWdodCArICIpIikKICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoIi54Z3JvdXBlZCIpCiAgICAgICAgICAgIC8vICAgIHN2Zy5hcHBlbmQoImciKQogICAgICAgICAgICAvLyAuYXR0cigiY2xhc3MiLCAieGdyb3VwZWQiKQogICAgICAgICAgICAvLyAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpCiAgICAgICAgICAgIC5jYWxsKHhBeGlzKQogICAgICAgICAgICAuc2VsZWN0QWxsKCIudGljayB0ZXh0IikKICAgICAgICAgICAgLmNhbGwod3JhcCwgMTApCiAgICAgICAgICAgIGZ1bmN0aW9uIHdyYXAodGV4dCwgd2lkdGgpIHsKICAgICAgICAgICAgdGV4dC5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciB0ZXh0ID0gZDMuc2VsZWN0KHRoaXMpLAogICAgICAgICAgICAgICAgICB3b3JkcyA9IHRleHQudGV4dCgpLnNwbGl0KC9ccysvKS5yZXZlcnNlKCksCiAgICAgICAgICAgICAgICAgIHdvcmQsCiAgICAgICAgICAgICAgICAgIGxpbmUgPSBbXSwKICAgICAgICAgICAgICAgICAgbGluZU51bWJlciA9IDAsCiAgICAgICAgICAgICAgICAvLyAgIGxpbmVIZWlnaHQgPSAwLjYsIC8vIGVtcwogICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0ID0gMS4xLCAvLyBlbXMKICAgICAgICAgICAgICAgICAgeSA9IHRleHQuYXR0cigieSIpLAogICAgICAgICAgICAgICAgICBkeSA9IHBhcnNlRmxvYXQodGV4dC5hdHRyKCJkeSIpKSwKICAgICAgICAgICAgICAgICAgdHNwYW4gPSB0ZXh0LnRleHQobnVsbCkuYXBwZW5kKCJ0c3BhbiIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgeSkuYXR0cigiZHkiLCBkeSArICJlbSIpOwogICAgICAgICAgICAgIHdoaWxlICh3b3JkID0gd29yZHMucG9wKCkpIHsKICAgICAgICAgICAgICAgIGxpbmUucHVzaCh3b3JkKTsKICAgICAgICAgICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKCIgIikpOwogICAgICAgICAgICAgICAgaWYgKHRzcGFuLm5vZGUoKS5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSA+IHdpZHRoKSB7CiAgICAgICAgICAgICAgICAgIGxpbmUucG9wKCk7CiAgICAgICAgICAgICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKCIgIikpOwogICAgICAgICAgICAgICAgICBsaW5lID0gW3dvcmRdOwogICAgICAgICAgICAgICAgICB0c3BhbiA9IHRleHQuYXBwZW5kKCJ0c3BhbiIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgeSkuYXR0cigiZHkiLCArK2xpbmVOdW1iZXIgKiBsaW5lSGVpZ2h0ICsgZHkgKyAiZW0iKS50ZXh0KHdvcmQpCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gZDMuc2VsZWN0QWxsKCIueGdyb3VwZWQiKS5yZW1vdmUoKTsKICAgICAgICBkMy5zZWxlY3RBbGwoIi5ncm91cCIpLnJlbW92ZSgpOwogICAgICAgIGQzLnNlbGVjdEFsbCgiLmJhci1wb3NpdGl2ZS1zdGFjayIpLnJlbW92ZSgpOwogICAgICAgIGQzLnNlbGVjdEFsbCgiLmciKS5yZW1vdmUoKTsKICAgICAgICAvLyByZWN0cyA9IHN2Zy5zZWxlY3RBbGwoIi5iYXItcG9zaXRpdmUtc3RhY2siKQogICAgICAgIC8vIC5kYXRhKG5ld19kYXRhLCBmdW5jdGlvbiAoZCkge3JldHVybiBkLmxhYmVsOyB9KTsKICAgICAgICAvLyAgIHJlY3RzLmF0dHIoIngiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4geChkLmRhdGEuU3RhdGUpOyB9KTsKCiAgICAgICAgICAgIC8vIHJlY3RzCiAgICAgICAgICAgIHZhciBzbGljZSA9IHN2Zy5zZWxlY3RBbGwoIi5zbGljZSIpCiAgICAgICAgICAgICAgICAuZGF0YShuZXdfZGF0YSkKICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwiZ3JvdXAiKQogICAgICAgICAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZyIpCiAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNhdGVnb3JpZSB9KQogICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsZnVuY3Rpb24oZCkgeyByZXR1cm4gInRyYW5zbGF0ZSgiICsgeDAoZC5jYXRlZ29yaWUpICsgIiwwKSI7IH0pCgogICAgICAgICAgICAKICAgICAgICAgICAgc2xpY2Uuc2VsZWN0QWxsKCJyZWN0IikKICAgICAgICAgICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudmFsdWVzOyB9KQogICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCJyZWN0IikKICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHgxLnJhbmdlQmFuZCgpKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIi5iYXItcG9zaXRpdmUtc3RhY2siKQogICAgICAgICAgICAgICAgLy8gLmF0dHIoImlkIiwgZ3VpZEdlbmVyYXRvcigpKQogICAgICAgICAgICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbihkKSB7IHJldHVybiB4MShkLnJhdGUpOyB9KQogICAgICAgICAgICAgICAgLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gY29sb3IoZC5yYXRlKSB9KQogICAgICAgICAgICAgICAgLy8gLmF0dHIoInkiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KDApOyB9KQogICAgICAgICAgICAgICAgLy8gLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGhlaWdodCAtIHkoMCk7IH0pCiAgICAgICAgICAgICAgICAuYXR0cigieSIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC52YWx1ZSk7IH0pCiAgICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gaGVpZ2h0IC0geShkLnZhbHVlKTsgfSkKICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGQpOwogICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zdHlsZSgiZmlsbCIsIGQzLnJnYihjb2xvcihkLnJhdGUpKS5icmlnaHRlcigxKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBkMy5zZWxlY3QodGhpcykuYXR0cignaWQnKTsKICAgICAgICAgICAgICAgICAgICB0b29sdGlwCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJsZWZ0IiwgZXZlbnQucGFnZVggLSAzMTUgKyAicHgiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidG9wIiwgZXZlbnQucGFnZVkgLSAxNzAgKyAicHgiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKQogICAgICAgICAgICAgICAgICAgIC5odG1sKCAiPGVtPiA8Yj4iICsgZC5jYXRlZ29yeSArICIgPC9iPiA8L2VtPiA8YnI+IiArIGQucmF0ZSArICI8YnI+Iisgdm0uY3VycmVuY3lfa2V5ICsgJyAnICArICgoTnVtYmVyLmlzSW50ZWdlcihkLnZhbHVlKSkgPyBkLnZhbHVlIDogIGQudmFsdWUudG9GaXhlZCgyKSkpOwogICAgICAgICAgICAgICAgICAgIC8vIC5odG1sKCBkLnJhdGUgKyAiPGJyPiIgICsgZC52YWx1ZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKCJkaXNwbGF5IiwgIm5vbmUiKTsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoImZpbGwiLCBjb2xvcihkLnJhdGUpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIC8vIHJlY3RzLmV4aXQgICAoKS5yZW1vdmUoKTsKICAgIH07CgogIH0KfQo="},{"version":3,"sources":["GroupedBarChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"GroupedBarChart.vue","sourceRoot":"src/portal/analytics/components","sourcesContent":["<template>\n<div style=\"display:flex\">\n  <div id=\"grouped_bar_chart\" >\n  </div>\n <div id=\"legend_div\"></div>\n\n  <!-- <svg width=\"700\" height=\"3000\" id=\"svg\" /> -->\n\n<!-- <svg id=\"newpie\">\n    <g id=\"canvas\">\n    <g id=\"art\" />\n    <g id=\"labels\" /></g>\n</svg> -->\n</div>\n</template>\n\n<script>\nconst d3 = require(\"d3-3\");\nexport default {\n    name: \"GroupedBar\",\n    props: {\n    data: Array,\n    xKey: String,\n    yKey: String,\n    primary_col: String,  \n    secondary_col: String,\n    currency_key: String\n\n  },\n  mounted () {\n      var vm = this;\n      var margin = {top: 20, right: 150, bottom: 200, left: 40},\n            width = 960 - margin.left - margin.right,\n            height = 710 - margin.top - margin.bottom;\n\n        var x0 = d3.scale.ordinal()\n            .rangeRoundBands([0, width], 0.1);\n\n        var x1 = d3.scale.ordinal();\n\n        var y = d3.scale.linear()\n            .range([height-80, 0]);\n\n        var xAxis = d3.svg.axis()\n            .scale(x0)\n            .tickSize(0)\n            .orient(\"bottom\");\n\n        var yAxis = d3.svg.axis()\n            .scale(y)\n            .orient(\"left\")\n            .tickFormat(d3.format(\"s\"))\n\n        // var color = d3.scale.ordinal()\n        //     .range([\"#ca0020\",\"#f4a582\",\"#d5d5d5\",\"#92c5de\",\"#0571b0\",\"#0519b0\"]);\n\n        // var color = d3.scale.ordinal()\n        //     .range([\"#5d62b5\", \"#29c3be\", \"#f1726e\", \"#fbc53f\", \"#62b58f\", \"#d0743c\", \"#ff8c00\",\"#ca0020\",\"#f4a582\",\"#d5d5d5\",\"#92c5de\",\"#0571b0\",\"#0519b0\"]);\n\n        // var color = d3.scale.ordinal()\n        //     .range([\"#3FBC11\",\"#FF9750\", \"#5d62b5\", \"#29c3be\", \"#f1726e\", \"#fbc53f\", \"#62b58f\", \"#d0743c\",\"#ca0020\",\"#f4a582\",\"#92c5de\",\"#0571b0\", \"#d3fe14\", \"#fec7f8\", \"#0b7b3e\", \"#0bf0e9\",'#E666B3', '#33991A', '#CC9999', '#B3B31A', '#00E680',\n        //     '#FF9AA2', '#FFB7B2', '#FFDAC1', '#B5EAD7', '#63d2a8', \"#225a4b\", \"#e5df73\", '#6666FF','#ff0000\t','#a2798f','#d7c6cf','#e88758','#b13a15','#6d3656','#fffa90','#a4ffaa','#a6cbff','#8500f9','#b077ba','\t#765284','#984b67','#9c624e','#feb8ff','#9be3bd','#775934','#008385','#6a2ca1','#e60e68','#ff6d01','#fee9d3'\n        // ]);\n\n        var color = d3.scale.ordinal()\n            .range([\"#FBB317\",\"#FF9750\",\"#3FBC11\",\"#00C7E6\",\"#EA3379\",\"#0165fc\",\"#41fdfe\",\"#24a0ed\",\"#1ac1dd\",\"#7df9ff\",\"#3f00ff\",\"#08ff08\",\"#aeff6e\",\"#56fca2\",\"#45cea2\",\"#06c2ac\",\"#fe6700\",\"#ff3503\",\"#d90166\",\"#be03fd\",\"#ad0afd\",\"#6600ff\",\"#d01c1f\",\"#f1172f\",\"#fff600\",\"#fcd116\",\"#cfff04\",\"#ffc324\",\"#f4c430\",\"#FE7D68\",\"#710193\",\n            \"#0492C2\",\"#9897A9\",\"#632A0D\",\"#9A794E\",\"#151E3D\",\"#59788D\",\"#1E456E\",\"#016064\",\"#48AAAD\",\"#7E7D9C\",\"#303150\",\"#609D9E\",\"#287E9E\",\"#E4A834\",\"#028910\",\n            \"#373737\",\"#6C626D\",\"#584D5B\",\"#4D4C5C\"]);\n        // var color = d3.scale.category10();\n\n        var svg = d3.select('#grouped_bar_chart').append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n              .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        // d3.json(\"data.json\", function(error, data) {\n\n        var data = [\n            {\n                \"categorie\": \"Student\", \n                \"values\": [\n                    {\n                        \"value\": 0, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 4, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 12, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 0, \n                        \"rate\": \"Tremendously\"\n                    },\n                    {\n                        \"value\": 10, \n                        \"rate\": \"Not so much\"\n                    }\n                ]\n            }, \n             {\n                \"categorie\": \"Student12345\", \n                \"values\": [\n                    {\n                        \"value\": 0, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 4, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 12, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 0, \n                        \"rate\": \"Tremendously\"\n                    },\n                    {\n                        \"value\": 10, \n                        \"rate\": \"Not so much\"\n                    }\n                ]\n            }, \n            {\n                \"categorie\": \"Liberal Profession\", \n                \"values\": [\n                    {\n                        \"value\": 1, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 21, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 13, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 18, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Tremendously\"\n                    },\n                    {\n                        \"value\": 20, \n                        \"rate\": \"Not so much\"\n                    }\n                ]\n            }, \n            {\n                \"categorie\": \"Salaried Staff\", \n                \"values\": [\n                    {\n                        \"value\": 3, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 22, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 15, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 3, \n                        \"rate\": \"Tremendously\"\n                    }\n                ]\n            }, \n            {\n                \"categorie\": \"Employee\", \n                \"values\": [\n                    {\n                        \"value\": 12, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 7, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 18, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 13, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Tremendously\"\n                    }\n                ]\n            }, \n            {\n                \"categorie\": \"Craftsman\", \n                \"values\": [\n                    {\n                        \"value\": 6, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 15, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 9, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 12, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 3, \n                        \"rate\": \"Tremendously\"\n                    }\n                ]\n            }, \n            {\n                \"categorie\": \"Inactive\", \n                \"values\": [\n                    {\n                        \"value\": 6, \n                        \"rate\": \"Not at all\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Not very much\"\n                    }, \n                    {\n                        \"value\": 6, \n                        \"rate\": \"Medium\"\n                    }, \n                    {\n                        \"value\": 2, \n                        \"rate\": \"Very much\"\n                    }, \n                    {\n                        \"value\": 3, \n                        \"rate\": \"Tremendously\"\n                    }\n                ]\n            }\n        ]\n\n        // var sampledata = [{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":4333,\"Outcome\":\"Impairment/Damage\"},{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":2502,\"Outcome\":\"Hospitalization - Initial or Prolonged\"},{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":369,\"Outcome\":\"Death\"},{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":122,\"Outcome\":\"Disability\"},{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":38,\"Outcome\":\"Life-Threatening\"},{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":4,\"Outcome\":\"Congenital Anomaly\"},{\"Drug Name\":\"HUMIRA\",\"Unique Patient Count\":2,\"Outcome\":\"Required Intervention to Prevent Permanent\"},{\"Drug Name\":\"XARELTO\",\"Unique Patient Count\":2580,\"Outcome\":\"Impairment/Damage\"},{\"Drug Name\":\"XARELTO\",\"Unique Patient Count\":1619,\"Outcome\":\"Hospitalization - Initial or Prolonged\"},{\"Drug Name\":\"XARELTO\",\"Unique Patient Count\":489,\"Outcome\":\"Death\"},{\"Drug Name\":\"XARELTO\",\"Unique Patient Count\":43,\"Outcome\":\"Life-Threatening\"},{\"Drug Name\":\"XARELTO\",\"Unique Patient Count\":27,\"Outcome\":\"Disability\"},{\"Drug Name\":\"XARELTO\",\"Unique Patient Count\":1,\"Outcome\":\"Congenital Anomaly\"},{\"Drug Name\":\"REVLIMID\",\"Unique Patient Count\":2165,\"Outcome\":\"Hospitalization - Initial or Prolonged\"},{\"Drug Name\":\"REVLIMID\",\"Unique Patient Count\":1604,\"Outcome\":\"Impairment/Damage\"},{\"Drug Name\":\"REVLIMID\",\"Unique Patient Count\":658,\"Outcome\":\"Death\"},{\"Drug Name\":\"REVLIMID\",\"Unique Patient Count\":25,\"Outcome\":\"Life-Threatening\"},{\"Drug Name\":\"REVLIMID\",\"Unique Patient Count\":20,\"Outcome\":\"Disability\"},{\"Drug Name\":\"REVLIMID\",\"Unique Patient Count\":5,\"Outcome\":\"Congenital Anomaly\"},{\"Drug Name\":\"ENBREL\",\"Unique Patient Count\":2090,\"Outcome\":\"Impairment/Damage\"},{\"Drug Name\":\"ENBREL\",\"Unique Patient Count\":443,\"Outcome\":\"Hospitalization - Initial or Prolonged\"},{\"Drug Name\":\"ENBREL\",\"Unique Patient Count\":58,\"Outcome\":\"Disability\"},{\"Drug Name\":\"ENBREL\",\"Unique Patient Count\":51,\"Outcome\":\"Death\"},{\"Drug Name\":\"ENBREL\",\"Unique Patient Count\":21,\"Outcome\":\"Life-Threatening\"},{\"Drug Name\":\"ENBREL\",\"Unique Patient Count\":1,\"Outcome\":\"Required Intervention to Prevent Permanent\"}]\n        // console.log(this.data);\n        var map = this.data.reduce((r, i) => ((r[i[vm.primary_col]] = r[i[vm.primary_col]] || []).push({\n            date : i[vm.secondary_col],\n            sales: i[vm.yKey]\n             // i\n        }), r), {});\n        var entries = Object.entries(map);\n        const second_data = [];\n        for(let i =0; i < entries.length; i++) {\n            second_data.push({\n            categorie : entries[i][0],\n            values: [],\n            })\n            for(let j =0 ; j < entries[i][1].length; j++) {\n            second_data[i].values.push({\n                rate: entries[i][1][j].date,\n                value: entries[i][1][j].sales,\n                category: entries[i][0]\n            })\n            }\n        }\n        data = [];\n        data = second_data;\n        // console.log(data);\n        var categoriesNames,rateNames       \n        var categoriesNamesFull = data.map(function(d) { return d.categorie; });\n        // var categoriesNames = data.map(function(d) { return d.categorie; });\n        // var rateNames = data[0].values.map(function(d) { return d.rate; });\n        // console.log(rateNames,categoriesNames);\n        var isScrollDisplayed =  false,\n        numBars = 4;\n        var marginOverview = {top: 30, right: 10, bottom: 20, left: 70};\n        var heightOverview = 80 - marginOverview.top - marginOverview.bottom;\n        if(categoriesNamesFull.length > 5 ) { isScrollDisplayed = true; }\n        categoriesNames = data.map(function(d) { return d.categorie; });\n        rateNames       = data[2].values.map(function(d) { return d.rate; });\n\n        // console.log(rateNames);\n        // for(let i = 0; i < data.length; i++){\n            \n        // }\n        let key_data_temp = [],\n        key_data_temp_length = [];\n        for(let i = 0; i < data.length; i++){\n            // console.log(data[i].values.map(function(d) { return d.rate; }))\n            // console.log(d3.keys(data[i].values))\n            key_data_temp.push(data[i].values.map(function(d) { return d.rate; }))\n            key_data_temp_length.push(d3.keys(data[i]).slice(1).length)\n        }\n        // console.log(key_data_temp);\n        let key_data_temp_2 = [];\n        for(let i =0; i < key_data_temp.length; i++){\n            for(let j = 0; j < key_data_temp[i].length; j++){\n                key_data_temp_2.push(key_data_temp[i][j])\n            }\n        }\n        var xyz = key_data_temp_2.reduce(function(a,b){\n        if(a.indexOf(b) < 0 ) a.push(b);\n        return a;\n        }, [])\n        // console.log(xyz, 'HERE FOR DISTINCT')\n        rateNames = xyz;\n        // console.log(isScrollDisplayed);\n        if(isScrollDisplayed) {\n            // categoriesNames = data.slice(0,numBars).map(function(d) { return d.categorie; });\n            // rateNames       = data[0].values.map(function(d) { return d.rate; });\n            x0.domain(categoriesNames.slice(0,numBars));\n            x1.domain(rateNames).rangeRoundBands([0, x0.rangeBand()]); \n        } else {\n            // categoriesNames = data.map(function(d) { return d.categorie; });\n            // rateNames = data[0].values.map(function(d) { return d.rate; });\n            x0.domain(categoriesNames);\n            x1.domain(rateNames).rangeRoundBands([0, x0.rangeBand()]); \n        }\n        y.domain([0, d3.max(data, function(categorie) { return d3.max(categorie.values, function(d) { return d.value; }); })]);\n\n        // if(data.length > 2) {\n        //     svg.append(\"g\")\n        //     .style(\"font-size\", \"12px\")\n        //     .attr(\"class\", \"xgrouped\")\n        //     .style('opacity','0')\n        //     .attr(\"transform\", \"translate(0,\" + height + \")\")\n        //     .call(xAxis)\n        //     d3.selectAll(\"text\")\n        //     .attr(\"y\", 0)\n        //     .attr(\"x\", -10)\n        //     .attr(\"dy\", \".35em\")\n        //     .attr(\"transform\", \"rotate(-70)\")\n        //     .style(\"text-anchor\", \"end\");  \n        // } else {\n            svg.append(\"g\")\n            .attr(\"class\", \"xgrouped\")\n            .style('opacity','0')\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            d3.selectAll(\".tick text\")\n            .call(wrap, 10)\n            function wrap(text, width) {\n            text.each(function() {\n              var text = d3.select(this),\n                  words = text.text().split(/\\s+/).reverse(),\n                  word,\n                  line = [],\n                  lineNumber = 0,\n                //   lineHeight = 0.6, // ems\n                  lineHeight = 1.1, // ems\n                  y = text.attr(\"y\"),\n                  dy = parseFloat(text.attr(\"dy\")),\n                  tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n              while (word = words.pop()) {\n                line.push(word);\n                tspan.text(line.join(\" \"));\n                if (tspan.node().getComputedTextLength() > width) {\n                  line.pop();\n                  tspan.text(line.join(\" \"));\n                  line = [word];\n                  tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word)\n              \n                }\n              }\n            });\n          }\n        // }\n\n        svg.append(\"g\")\n        // .attr(\"transform\", \"translate(0,30)\")\n            .attr(\"class\", \"y axis\")\n            .style('opacity','0')\n            .call(yAxis)\n        // .append(\"text\")\n        //     .attr(\"transform\", \"rotate(-90)\")\n        //     .attr(\"y\", 6)\n        //     .attr(\"dy\", \".71em\")\n        //     .style(\"text-anchor\", \"end\")\n        //     .style('font-weight','bold')\n        //     .text(\"Value\");\n\n        svg.select('.y').transition().duration(500).delay(function(d,i){ return 1300 + 100 * i; }).style('opacity','1');\n        svg.select('.xgrouped').transition().duration(100).delay(function(d,i){ return 1300 + 100 * i; }).style('opacity','1');\n        var tooltip = d3.select(\".card-body\").append(\"div\").attr(\"class\", \"toolTip\");\n\n        if(isScrollDisplayed) {\n\n            var slice = svg.selectAll(\".slice\")\n                .data(data.slice(0,numBars))\n                .enter()\n                .append(\"svg\")\n                .attr(\"class\",\"group\")\n                .append(\"g\")\n                .attr(\"class\", \"g\")\n                .attr(\"id\", function(d) { return d.categorie })\n                .attr(\"transform\",function(d) { return \"translate(\" + x0(d.categorie) + \",0)\"; })\n\n            slice.selectAll(\"rect\")\n                .data(function(d) { return d.values; })\n                .enter().append(\"rect\")\n                .attr(\"width\", x1.rangeBand())\n                .attr(\"class\", \".bar-positive-stack\")\n                // .attr(\"id\", guidGenerator())\n                .attr(\"x\", function(d) {  return x1(d.rate); })\n                .style(\"fill\", function(d) { return color(d.rate) })\n                .attr(\"y\", function(d) { return y(0); })\n                .attr(\"height\", function(d) { return  y(0); })\n                // .attr(\"y\", function(d) { return y(d.value); })\n                // .attr(\"height\", function(d) { return height - y(d.value); })\n                .on(\"mouseover\", function(d) {\n                    d3.select(this).style(\"fill\", d3.rgb(color(d.rate)).brighter(1));\n                    var x = d3.select(this).attr('id');\n                    tooltip\n                    .style(\"left\", event.pageX - 315 + \"px\")\n                    .style(\"top\", event.pageY - 170 + \"px\")\n                    .style(\"display\", \"inline-block\")\n                    .html( \"<em> <b>\" + d.category + \" </b> </em> <br>\" + d.rate + \"<br>\" + vm.currency_key + ' ' + ((Number.isInteger(d.value)) ? d.value :  d.value.toFixed(2)));\n                })\n                .on(\"mouseout\", function(d) {\n                    tooltip.style(\"display\", \"none\");\n                    d3.select(this).style(\"fill\", color(d.rate));\n                });\n\n            slice.selectAll(\"rect\")\n            .transition()\n            .delay(function (d) {return Math.random()*1000;})\n            .duration(1000)\n            .attr(\"y\", function(d) { if(d.value === 0){return 0;} else { return y(d.value);} })\n            .attr(\"height\", function(d) {  if(d.value === 0){return 0;} else {return height - y(d.value); }});\n\n            var xOverview = d3.scale.ordinal()\n                .domain(data.map(function (d) { return d.label; }))\n                .range([0, width], .2);\n            var yOverview = d3.scale.linear().range([heightOverview, 0]);\n            yOverview.domain(y.domain());\n\n            var displayed = d3.scale.quantize()\n                    .domain([0, width])\n                    .range(d3.range(data.length));\n                    svg.append(\"g\").append(\"rect\")\n                    .attr(\"transform\", \"translate(5, \" + (height+5) + \")\")\n                    .attr(\"class\", \"mover\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", 0)\n                    .attr(\"rx\",5)\n                    .attr(\"ry\",10)\n                    .attr(\"height\", 10)\n                    .attr(\"width\",Math.round(parseFloat(numBars * width)/data.length))\n                    .attr(\"pointer-events\", \"all\")\n                    .attr(\"cursor\", \"ew-resize\")\n                    .call(d3.behavior.drag().on(\"drag\", display));\n        }  else {\n                var slice = svg.selectAll(\".slice\")\n                .data(data)\n                .enter()\n                .append(\"svg\")\n                // .attr(\"\")\n                .append(\"g\")\n                .attr(\"class\", \"g\")\n                .attr(\"id\", function(d) { return d.categorie })\n                .attr(\"transform\",function(d) { return \"translate(\" + x0(d.categorie) + \",0)\"; })\n\n            slice.selectAll(\"rect\")\n                .data(function(d) { return d.values; })\n                .enter().append(\"rect\")\n                .attr(\"width\", x1.rangeBand())\n                // .attr(\"id\", guidGenerator())\n                .attr(\"x\", function(d) { return x1(d.rate); })\n                .style(\"fill\", function(d) { return color(d.rate) })\n                .attr(\"y\", function(d) { return y(0); })\n                .attr(\"height\", function(d) { return y(0); })\n                // .attr(\"y\", function(d) { return y(d.value); })\n                // .attr(\"height\", function(d) { return height - y(d.value); })\n                .on(\"mouseover\", function(d) {\n                    d3.select(this).style(\"fill\", d3.rgb(color(d.rate)).brighter(1));\n                    var x = d3.select(this).attr('id');\n                    // console.log(d)\n                    tooltip\n                    .style(\"left\", event.pageX - 315 + \"px\")\n                    .style(\"top\", event.pageY - 170 + \"px\")\n                    .style(\"display\", \"inline-block\")\n                    .html( \"<em> <b>\" + d.category + \" </b> </em> <br>\" + d.rate + \"<br>\"+ vm.currency_key + ' '  + ((Number.isInteger(d.value)) ? d.value :  d.value.toFixed(2)));\n                    // .html( d.rate + \"<br>\"  + d.value);\n                })\n                .on(\"mouseout\", function(d) {\n                    tooltip.style(\"display\", \"none\");\n                    d3.select(this).style(\"fill\", color(d.rate));\n                });\n        }\n        slice.selectAll(\"rect\")\n            .transition()\n            .delay(function (d) {return Math.random()*1000;})\n            .duration(1000)\n            .attr(\"y\", function(d) { return y(d.value); })\n            .attr(\"height\", function(d) { return height - y(d.value); });\n\n        // slice.selectAll(\"rect\")\n        // .transition()\n        // .delay((d,i)=> i * 150)\n        // .duration(800)\n        // .attr(\"y\", function(d) {return y(d.value); })\n        \n        //Legend\n        var legend_div = d3.select(\"#legend_div\").append(\"svg\").style(\"width\",\"200%\").style(\"height\",\"250%\");\n        var legend_g =  legend_div.append(\"g\").attr(\"transform\", \"translate(0,0)\");\n        // var legend = svg.selectAll(\".legend\")\n        var legend =  legend_g.append(\"g\")\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 10)\n            .attr(\"text-anchor\", \"end\")\n            .selectAll(\"g\")\n            // .data(data[1].values.map(function(d) { return d.rate; }))\n            .data(rateNames)\n            .enter().append(\"g\")\n            // .attr(\"class\", \"legend\")\n            .attr(\"transform\", function(d,i) { return \"translate(0,\" + i * 20 + \")\"; })\n            .style(\"opacity\",\"1\");\n\n        legend.append(\"rect\")\n            .attr(\"x\", 0)\n            .attr(\"width\", 18)\n            .attr(\"height\", 18)\n            .style(\"fill\", function(d) { return color(d); });\n\n        legend.append(\"text\")\n            .attr(\"x\", 25)\n            .attr(\"y\", 9)\n            .attr(\"dy\", \".35em\")\n            .attr(\"class\", \"legend_text\")\n            .style(\"text-anchor\", \"start\")\n            .text(function(d) {\n                // return d.toUpperCase();\n                if(d.length > 25){\n                 return d.substring(0,25).toUpperCase()+'...';\n                } else {\n                 return d.toUpperCase()\n                }\n            })\n        d3.selectAll('.legend_text').call(show_long_labels);\n        function show_long_labels(selection) {\n            selection.on('mouseenter', function (d,i) { \n            // var tooltip = \n            // d3.select(\"#stackedbarnontime\").append(\"div\").attr(\"class\", \"toolTip\")\n                if(d.length > 25){\n                  tooltip\n                    .style(\"left\", d3.event.pageX - 400 + \"px\")\n                    .style(\"top\", d3.event.pageY - 290 + \"px\")\n                    .style(\"display\", \"inline-block\")\n                    .html(d.toUpperCase());\n            }\n            });\n\n            selection.on(\"mouseout\", function(d,i) {\n                // d3.selectAll(\".toolTip\").remove();\n                tooltip.style(\"display\", \"none\"); // hide tooltip for that element\n            });\n\n            selection.on(\"mousemove\", function(d) {\n                tooltip\n                .style(\"top\", d3.event.layerY + 100 + \"px\") \n                .style(\"left\", d3.event.layerX - 210 + \"px\"); \n            });\n        }\n\n        \n        legend.transition().duration(500).delay(function(d,i){ return 1300 + 100 * i; }).style(\"opacity\",\"1\");\n\n        // var hoverdata = $(\"#Student\");\n        // hoverdata.mouseover (function() {\n        //     console.log(\"Hello\")\n        //     hoverdata.addClass(\"background-color\")\n        // });\n\n    function display () {\n     // debugger;\n        var xy = parseInt(d3.select(this).attr(\"x\")),\n            nx = xy + d3.event.dx,\n            w = parseInt(d3.select(this).attr(\"width\")),\n            f, nf, new_data, rects;\n\n        if ( nx < 0 || nx + w > width ) return;\n\n        d3.select(this).attr(\"x\", nx);\n\n        f = displayed(xy);\n        nf = displayed(nx);\n\n        if ( f === nf ) return;\n\n        new_data = data.slice(nf, nf + numBars);\n\n        x0.domain(new_data.map(function (d) { return d.categorie; }));\n\n        // x0.domain(categoriesNames);\n        // x1.domain(rateNames).rangeRoundBands([0, x0.rangeBand()]); \n        // d3.selectAll(\".x axis\").remove();\n\n        if(numBars > 4 ){\n            // svg.append(\"g\")\n            //     .style(\"font\", \"10px times\")\n            //     .attr(\"class\", \"xgrouped\")\n            //     .attr(\"transform\", \"translate(0,\" + height + \")\")\n            svg.selectAll(\".xgrouped\")\n            //  .style(\"font\", \"10px times\")\n            // svg.append(\"g\")\n                // .attr(\"class\", \"xgrouped\")\n                // .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", -10)\n            .attr(\"dy\", \".35em\")\n            .attr(\"transform\", \"rotate(-70)\")\n            .style(\"text-anchor\", \"end\")         \n            } else {\n            // svg.append(\"g\")\n            // .attr(\"class\", \"xgrouped\")\n            // .attr(\"transform\", \"translate(0,\" + height + \")\")\n             svg.selectAll(\".xgrouped\")\n            //    svg.append(\"g\")\n            // .attr(\"class\", \"xgrouped\")\n            // .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .selectAll(\".tick text\")\n            .call(wrap, 10)\n            function wrap(text, width) {\n            text.each(function() {\n              var text = d3.select(this),\n                  words = text.text().split(/\\s+/).reverse(),\n                  word,\n                  line = [],\n                  lineNumber = 0,\n                //   lineHeight = 0.6, // ems\n                  lineHeight = 1.1, // ems\n                  y = text.attr(\"y\"),\n                  dy = parseFloat(text.attr(\"dy\")),\n                  tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n              while (word = words.pop()) {\n                line.push(word);\n                tspan.text(line.join(\" \"));\n                if (tspan.node().getComputedTextLength() > width) {\n                  line.pop();\n                  tspan.text(line.join(\" \"));\n                  line = [word];\n                  tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word)\n              \n                }\n              }\n            });\n          }\n        }\n        // d3.selectAll(\".xgrouped\").remove();\n        d3.selectAll(\".group\").remove();\n        d3.selectAll(\".bar-positive-stack\").remove();\n        d3.selectAll(\".g\").remove();\n        // rects = svg.selectAll(\".bar-positive-stack\")\n        // .data(new_data, function (d) {return d.label; });\n        //   rects.attr(\"x\", function (d) { return x(d.data.State); });\n\n            // rects\n            var slice = svg.selectAll(\".slice\")\n                .data(new_data)\n                .enter()\n                .append(\"svg\")\n                .attr(\"class\",\"group\")\n                .append(\"g\")\n                .attr(\"class\", \"g\")\n                .attr(\"id\", function(d) { return d.categorie })\n                .attr(\"transform\",function(d) { return \"translate(\" + x0(d.categorie) + \",0)\"; })\n\n            \n            slice.selectAll(\"rect\")\n                .data(function(d) { return d.values; })\n                .enter().append(\"rect\")\n                .attr(\"width\", x1.rangeBand())\n                .attr(\"class\", \".bar-positive-stack\")\n                // .attr(\"id\", guidGenerator())\n                .attr(\"x\", function(d) { return x1(d.rate); })\n                .style(\"fill\", function(d) { return color(d.rate) })\n                // .attr(\"y\", function(d) { return y(0); })\n                // .attr(\"height\", function(d) { return height - y(0); })\n                .attr(\"y\", function(d) { return y(d.value); })\n                .attr(\"height\", function(d) { return height - y(d.value); })\n                .on(\"mouseover\", function(d) {\n                    // console.log(d);\n                    d3.select(this).style(\"fill\", d3.rgb(color(d.rate)).brighter(1));\n                    var x = d3.select(this).attr('id');\n                    tooltip\n                    .style(\"left\", event.pageX - 315 + \"px\")\n                    .style(\"top\", event.pageY - 170 + \"px\")\n                    .style(\"display\", \"inline-block\")\n                    .html( \"<em> <b>\" + d.category + \" </b> </em> <br>\" + d.rate + \"<br>\"+ vm.currency_key + ' '  + ((Number.isInteger(d.value)) ? d.value :  d.value.toFixed(2)));\n                    // .html( d.rate + \"<br>\"  + d.value);\n                })\n                .on(\"mouseout\", function(d) {\n                    tooltip.style(\"display\", \"none\");\n                    d3.select(this).style(\"fill\", color(d.rate));\n                });\n        // rects.exit   ().remove();\n    };\n\n  }\n}\n</script>\n<style>\n/* .xgrouped path{\n    display: none;\n}\n.background-color {\n    background-color: blue;\n} */\n</style>"]}]}