{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/components/TabulatorTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/components/TabulatorTable.vue","mtime":1643027096188},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUYWJ1bGF0b3IgZnJvbSAidGFidWxhdG9yLXRhYmxlcyI7CmNvbnN0IGQzID0gcmVxdWlyZSgiZDMtMyIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYWJ1bGF0b3JUYWJsZSIsCiAgcHJvcHM6IHsKICAgIGRhdGE6IEFycmF5LAogICAgeEtleTogU3RyaW5nLAogICAgeUtleTogU3RyaW5nLAogICAgY3VycmVuY3lfa2V5OiBTdHJpbmcsCiAgICBoZWFkaW5nOiBTdHJpbmcsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IHZtID0gdGhpczsKICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVuY3lfa2V5KTsKICAgIC8vZGVmaW5lIHNvbWUgc2FtcGxlIGRhdGEKICAgIHZhciB0YWJsZWRhdGEgPSBbCiAgICAgIHsgaWQ6IDEsIG5hbWU6ICJPbGkgQm9iIiwgYWdlOiAiMTIiLCBjb2w6ICJyZWQiLCBkb2I6ICIiIH0sCiAgICAgIHsgaWQ6IDIsIG5hbWU6ICJNYXJ5IE1heSIsIGFnZTogIjEiLCBjb2w6ICJibHVlIiwgZG9iOiAiMTQvMDUvMTk4MiIgfSwKICAgICAgewogICAgICAgIGlkOiAzLAogICAgICAgIG5hbWU6ICJDaHJpc3RpbmUgTG9ib3dza2kiLAogICAgICAgIGFnZTogIjQyIiwKICAgICAgICBjb2w6ICJncmVlbiIsCiAgICAgICAgZG9iOiAiMjIvMDUvMTk4MiIsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogNCwKICAgICAgICBuYW1lOiAiQnJlbmRvbiBQaGlsaXBzIiwKICAgICAgICBhZ2U6ICIxMjUiLAogICAgICAgIGNvbDogIm9yYW5nZSIsCiAgICAgICAgZG9iOiAiMDEvMDgvMTk4MCIsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogNSwKICAgICAgICBuYW1lOiAiTWFyZ3JldCBNYXJtYWp1a2UiLAogICAgICAgIGFnZTogIjE2IiwKICAgICAgICBjb2w6ICJ5ZWxsb3ciLAogICAgICAgIGRvYjogIjMxLzAxLzE5OTkiLAogICAgICB9LAogICAgXTsKICAgIHZhciBzdW1feXZhbCA9IDA7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICBzdW1feXZhbCA9IHN1bV95dmFsICsgdGhpcy5kYXRhW2ldW3RoaXMueUtleV07CiAgICB9CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLmRhdGFbaV0ucGVyY2VudCA9ICh0aGlzLmRhdGFbaV1bdGhpcy55S2V5XSAvIHN1bV95dmFsKSAqIDEwMDsKICAgIH0KCiAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgLy8gICB0aGlzLmRhdGFbaV1bdGhpcy55S2V5XSA9IE51bWJlcih0aGlzLmRhdGFbaV1bdGhpcy55S2V5XS50b0ZpeGVkKDIpKTsKICAgIC8vIH0KICAgIGxldCBjb2x1bW5zID0gWwogICAgICB7IHRpdGxlOiB0aGlzLnhLZXksIGZpZWxkOiB0aGlzLnhLZXkgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB0aGlzLnlLZXksCiAgICAgICAgZmllbGQ6IHRoaXMueUtleSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIChjZWxsLCBmb3JtYXR0ZXJQYXJhbXMsIG9uUmVuZGVyZWQpIHsKICAgICAgICAgIC8vY2VsbCAtIHRoZSBjZWxsIGNvbXBvbmVudAogICAgICAgICAgLy9mb3JtYXR0ZXJQYXJhbXMgLSBwYXJhbWV0ZXJzIHNldCBmb3IgdGhlIGNvbHVtbgogICAgICAgICAgLy9vblJlbmRlcmVkIC0gZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBmb3JtYXR0ZXIgaGFzIGJlZW4gcmVuZGVyZWQKICAgICAgICAgIHJldHVybiB2bS5jdXJyZW5jeV9rZXkgKyAnICcgKyBjZWxsLmdldFZhbHVlKCkudG9GaXhlZCgyKTsKICAgICAgICB9LAogICAgICAgIHRvb2x0aXAoY2VsbCkgewogICAgICAgICAgcmV0dXJuIGNlbGwuZ2V0RGF0YSgpLnBlcmNlbnQudG9GaXhlZCgyKSA9PSAiMC4wMCIKICAgICAgICAgICAgPyBgJHtjZWxsLmdldERhdGEoKS5wZXJjZW50fWAKICAgICAgICAgICAgOiBgJHtjZWxsLmdldERhdGEoKS5wZXJjZW50LnRvRml4ZWQoMil9JWA7CiAgICAgICAgfSwKICAgICAgfSwKICAgIF07CiAgICAvL2NyZWF0ZSBUYWJ1bGF0b3Igb24gRE9NIGVsZW1lbnQgd2l0aCBpZCAidGFidWxhdG9yLXRhYmxlIgogICAgdmFyIHRhYmxlID0gbmV3IFRhYnVsYXRvcigiI3RhYnVsYXRvci10YWJsZSIsIHsKICAgICAgbWF4SGVpZ2h0OiAiNTAwcHgiLAogICAgICBkYXRhOiB0aGlzLmRhdGEsIC8vYXNzaWduIGRhdGEgdG8gdGFibGUKICAgICAgbGF5b3V0OiAiZml0Q29sdW1ucyIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKQogICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICB0b29sdGlwR2VuZXJhdGlvbk1vZGU6ICJob3ZlciIsCiAgICB9KTsKCiAgICAvL3RyaWdnZXIgZG93bmxvYWQgb2YgZGF0YS5jc3YgZmlsZQogICAgLy8gY29uc29sZS5sb2codGhpcy5oZWFkaW5nKTsKICAgIC8vIGRvY3VtZW50CiAgICAvLyAgIC5nZXRFbGVtZW50QnlJZCgiZG93bmxvYWQtY3N2IikKICAgIC8vICAgLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgLy8gICAgIHRhYmxlLmRvd25sb2FkKCJjc3YiLCBgJHt2bS5oZWFkaW5nICsgbmV3IERhdGUoKX0uY3N2YCk7CiAgICAvLyAgIH0pOwogIH0sCn07Cg=="},{"version":3,"sources":["TabulatorTable.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabulatorTable.vue","sourceRoot":"src/portal/analytics/components","sourcesContent":["<template>\n  <div>\n    <div class=\"text-right\">\n      <!-- <button class=\"btn btn-primary mb-1\" id=\"download-csv\">Download As CSV</button> -->\n      <!-- <i class=\"fa fa-file-excel-o\"></i>\n      <i class=\"fas fa-file-excel\" aria-hidden=\"true\" id=\"download-csv\"></i>-->\n    </div>\n    <div id=\"tabulator-table\"></div>\n  </div>\n</template>\n\n<script>\nimport Tabulator from \"tabulator-tables\";\nconst d3 = require(\"d3-3\");\n\nexport default {\n  name: \"TabulatorTable\",\n  props: {\n    data: Array,\n    xKey: String,\n    yKey: String,\n    currency_key: String,\n    heading: String,\n  },\n  data() {\n    return {};\n  },\n  mounted() {\n    const vm = this;\n    console.log(this.currency_key);\n    //define some sample data\n    var tabledata = [\n      { id: 1, name: \"Oli Bob\", age: \"12\", col: \"red\", dob: \"\" },\n      { id: 2, name: \"Mary May\", age: \"1\", col: \"blue\", dob: \"14/05/1982\" },\n      {\n        id: 3,\n        name: \"Christine Lobowski\",\n        age: \"42\",\n        col: \"green\",\n        dob: \"22/05/1982\",\n      },\n      {\n        id: 4,\n        name: \"Brendon Philips\",\n        age: \"125\",\n        col: \"orange\",\n        dob: \"01/08/1980\",\n      },\n      {\n        id: 5,\n        name: \"Margret Marmajuke\",\n        age: \"16\",\n        col: \"yellow\",\n        dob: \"31/01/1999\",\n      },\n    ];\n    var sum_yval = 0;\n    for (let i = 0; i < this.data.length; i++) {\n      sum_yval = sum_yval + this.data[i][this.yKey];\n    }\n    for (let i = 0; i < this.data.length; i++) {\n      this.data[i].percent = (this.data[i][this.yKey] / sum_yval) * 100;\n    }\n\n    // for (let i = 0; i < this.data.length; i++) {\n    //   this.data[i][this.yKey] = Number(this.data[i][this.yKey].toFixed(2));\n    // }\n    let columns = [\n      { title: this.xKey, field: this.xKey },\n      {\n        title: this.yKey,\n        field: this.yKey,\n        formatter: function (cell, formatterParams, onRendered) {\n          //cell - the cell component\n          //formatterParams - parameters set for the column\n          //onRendered - function to call when the formatter has been rendered\n          return vm.currency_key + ' ' + cell.getValue().toFixed(2);\n        },\n        tooltip(cell) {\n          return cell.getData().percent.toFixed(2) == \"0.00\"\n            ? `${cell.getData().percent}`\n            : `${cell.getData().percent.toFixed(2)}%`;\n        },\n      },\n    ];\n    //create Tabulator on DOM element with id \"tabulator-table\"\n    var table = new Tabulator(\"#tabulator-table\", {\n      maxHeight: \"500px\",\n      data: this.data, //assign data to table\n      layout: \"fitColumns\", //fit columns to width of table (optional)\n      columns: columns,\n      tooltipGenerationMode: \"hover\",\n    });\n\n    //trigger download of data.csv file\n    // console.log(this.heading);\n    // document\n    //   .getElementById(\"download-csv\")\n    //   .addEventListener(\"click\", function () {\n    //     table.download(\"csv\", `${vm.heading + new Date()}.csv`);\n    //   });\n  },\n};\n</script>"]}]}