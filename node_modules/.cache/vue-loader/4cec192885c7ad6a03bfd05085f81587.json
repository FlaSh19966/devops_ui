{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/ResponseIntent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/ResponseIntent.vue","mtime":1660042032567},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3QsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd19zdXBlcmFkbWluX2RhdGE6IFtdLAogICAgICBhZGRfc3VwZXJhZG1pbl9kYXRhOiBbXSwKICAgICAgaW50ZW50bGlzdDogW10sCiAgICAgIHNvdXJjZTogIldlYiIsCiAgICAgIG9wdGlvbnM6IFtdLAogICAgICBjaGVja2VkX2xpc3Q6IFtdLAogICAgICBpbnRlbnRzOiAiIiwKICAgICAgcGFnZV9ubzogMSwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICB0b3RhbF9wYWdlczogbnVsbCwKICAgICAgbnVtYmVyX29mX3Jvd3M6IG51bGwsCiAgICAgIHJlc3BvbnNlOiAiIiwKICAgICAgYWRkX2VkaXQ6ICJmYWxzZSIsCiAgICAgIGZpbGVfbGFiZWw6ICJDaG9vc2UgZmlsZSIsCiAgICAgIGZpbGVfbGFiZWwyOiAiQ2hvb3NlIGZpbGUiLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBzcGlubmVyT246IGZhbHNlLAogICAgICBmaWxlX2NvbnRlbnQ6ICIiLAogICAgICBmaWxlX2NvbnRlbnQyOiAiIiwKICAgICAgaW1hZ2VfcmVzcG9uc2U6ICJObyIsCiAgICAgIHZpZGVvX3Jlc3BvbnNlOiAiTm8iLAogICAgICBmaWxlX3R5cGU6ICIiLAogICAgICBpbWFnZV91cmxzOiBbXSwKICAgICAgaW1hZ2VfdXJsOiAiIiwKICAgICAgbmFtZV9maWxlOiAiIiwKICAgICAgdGVtcF9maWxlX25hbWU6ICIiLAogICAgICBpbWFnZV9lZGl0OiBmYWxzZSwKICAgICAgcXVpbGw6ICIiLAogICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlLAogICAgICB2aWRlb19saW5rOiAiIiwKICAgICAgZW1iZF9saW5rOiAiIiwKICAgICAgdmlkZW9fdXJsOiBbXSwKICAgICAgc2VhcmNoX25hbWU6ICIiLAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgc3Bpbm5lck9uRmlsZURvd25sb2FkOiBmYWxzZSwKICAgICAgLy8gc2VsZWN0X2xpc3Q6IFsnUmVzcG9uc2UnLCdJbnRlbnQnLCdTb3VyY2VzJ10sCiAgICAgIC8vIHNlYXJjaF9ieTogJycsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICgKICAgICAgIXRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSAmJgogICAgICB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIKICAgICkgewogICAgICB0b2FzdHIud2FybmluZyh0aGlzLnRsdCgnc2VsZWN0X2NvbXBhbnlfbmFtZV9tc2cyJykpOwogICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfcm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSkgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgIH0KICAgIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgIGF4aW9zCiAgICAgIC5wb3N0KAogICAgICAgIGFwaV9jYWxscy5zaG93X2ludGVudF91cmwoKSwKICAgICAgICB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICBzaG93aW50ZW50OiAiVHJ1ZSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgfSwKICAgICAgICB9CiAgICAgICkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLmludGVudGxpc3QucHVzaCgKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVtpXS5yZXBsYWNlKHRoaXMuY29tcGFueWlkICsgIl8iLCAiIikKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHRoaXMuaW50ZW50cyA9IHRoaXMuaW50ZW50bGlzdFswXTsKICAgICAgfSkKICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgaWYgKAogICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICkgewogICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHZhciB2bSA9IHRoaXM7CiAgICAkKCIjc2VsZWN0YWxsIikuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICBpZiAoJCh0aGlzKS5pcygiOmNoZWNrZWQiKSkgewogICAgICAgIC8vICQoJ2RpdjppbnB1dCcpLnByb3AoJ2NoZWNrZWQnLHRydWUpOwogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgfQogICAgfSk7CiAgICAkKCdbZGF0YS10b2dnbGU9InRvb2x0aXAiXScpLnRvb2x0aXAoKTsKICAgIHZhciB2bSA9IHRoaXM7CiAgICAkKCIjZXhhbXBsZU1vZGFsQ2VudGVyIikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZtLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICB9KTsKCiAgICB0aGlzLnF1aWxsID0gbmV3IFF1aWxsKCIjZWRpdG9yIiwgewogICAgICBtb2R1bGVzOiB7CiAgICAgICAgdG9vbGJhcjogWwogICAgICAgICAgW3sgaGVhZGVyOiBbMSwgMiwgZmFsc2VdIH1dLAogICAgICAgICAgW3sgZm9udDogW10gfV0sCiAgICAgICAgICBbImJvbGQiLCAiaXRhbGljIiwgInVuZGVybGluZSJdLAogICAgICAgICAgWyJjb2RlLWJsb2NrIiwgImxpbmsiXSwKICAgICAgICAgIFt7IGFsaWduOiBbXSB9XSwKICAgICAgICAgIFt7IGNvbG9yOiBbXSB9LCB7IGJhY2tncm91bmQ6IFtdIH1dLAogICAgICAgICAgW3sgbGlzdDogIm9yZGVyZWQiIH0sIHsgbGlzdDogImJ1bGxldCIgfV0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgdGhlbWU6ICJzbm93IiwKICAgICAgcGxhY2Vob2xkZXI6ICJSZXNwb25zZSIsCiAgICB9KTsKICAgIHRoaXMucXVpbGwub24oInRleHQtY2hhbmdlIiwgKCkgPT4gewogICAgICB0aGlzLiRlbWl0KAogICAgICAgICJpbnB1dCIsCiAgICAgICAgdGhpcy5xdWlsbC5nZXRUZXh0KCkgPyB0aGlzLnF1aWxsLnJvb3QuaW5uZXJIVE1MIDogIiIKICAgICAgKTsKICAgICAgdGhpcy5yZXNwb25zZSA9IHRoaXMucXVpbGwuZ2V0VGV4dCgpID8gdGhpcy5xdWlsbC5yb290LmlubmVySFRNTCA6ICIiOwogICAgfSk7CiAgICBpZih0aGlzLiRyb3V0ZS5wYXJhbXMubW9kYWxfb3Blbl9zd2l0Y2hfdGFiKXsKICAgICAgJCgiI2V4YW1wbGVNb2RhbENlbnRlciIpLm1vZGFsKCJzaG93Iik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpIHsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLmxvYWRfcXVlc3Rpb25fcmVzcG9uc2VfdXJsKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIHJvbGU6IHRoaXMudXNlcl9yb2xlLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZWNvdW50OwogICAgICAgICAgdGhpcy51cGRhdGVfcW5zKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy5pbWFnZV91cmxzID0gcmVzcG9uc2UuZGF0YS5zaG93X2ludGVudF9maWVsZC5pbWFnZV91cmw7CiAgICAgICAgICB0aGlzLnZpZGVvX3VybHMgPSByZXNwb25zZS5kYXRhLnNob3dfaW50ZW50X2ZpZWxkLnZpZGVvX3VybDsKICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGFwaV9jYWxscy5zb3VyY2VfbGlzdF91cmwoKSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGRvd25sb2FkX2NzdigpIHsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy5xdWVzdGlvbl9yZXNwb25zZV9jc3YoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdmFyIGEgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgYS5ocmVmID0gcmVzcG9uc2UuZGF0YS5DU1ZfVVJMOwogICAgICAgICAgYS5kb3dubG9hZCA9IHRydWU7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgZW1iZWRkZWRfY2hhbmdlKCkgewogICAgICB2YXIgcmVnRXhwID0gL14uKih5b3V0dS5iZVwvfHZcL3x1XC9cd1wvfGVtYmVkXC98d2F0Y2hcP3Y9fFwmdj0pKFteI1wmXD9dKikuKi87CiAgICAgIHZhciBtYXRjaCA9IHRoaXMudmlkZW9fbGluay5tYXRjaChyZWdFeHApOwoKICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdLmxlbmd0aCA9PSAxMSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKG1hdGNoWzJdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gImVycm9yIjsKICAgICAgfQogICAgICB0aGlzLmVtYmRfbGluayA9ICJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8iICsgbWF0Y2hbMl07CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZW1iZF9saW5rKTsKICAgIH0sCiAgICBkb3dubG9hZF9zYW1wbGVfZmlsZSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5zcGlubmVyT25GaWxlRG93bmxvYWQgPSB0cnVlOwogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiBhcGlfY2FsbHMuZmlsZV9kb3dubG9hZCgpLAogICAgICAgIHJlc3BvbnNlVHlwZTogImJsb2IiLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHNhbXBsZV9maWxlOiAiVHJ1ZSIsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgfSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICB9LAogICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy8gc3dhbCgKICAgICAgICAgIC8vICAgIlBsZWFzZSBkb24ndCBlZGl0IHRoZSBmaWxlIG5hbWUiLAogICAgICAgICAgLy8gICAiWW91IGNsaWNrZWQgdGhlIGJ1dHRvbiEiLAogICAgICAgICAgLy8gICAiZXJyb3IiCiAgICAgICAgICAvLyApOwogICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtyZXNwb25zZS5kYXRhXSkpOwogICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbXBhbnluYW1lKQogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIiwgdGhpcy5jb21wYW55bmFtZSArICJJbnRlbnRGaWxlLmNzdiIpOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgICQoIiNmaWxlX3VwbG9hZCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbkZpbGVEb3dubG9hZCA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBmaWxlaW5wdXQoKSB7CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lOwogICAgICB2YXIgZmlsZV9uYW1lID0gdGhpcy5jb21wYW55bmFtZSArICJJbnRlbnRGaWxlLmNzdiI7CiAgICAgIGlmICh0aGlzLmZpbGVfbGFiZWwgIT0gZmlsZV9uYW1lKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGV4dDoKICAgICAgICAgICAgIlVzZXJzIG5lZWQgdG8gZG93bmxvYWQgdGhlIEludGVudCBGaWxlIGZyb20gJ1VwbG9hZCBDU1YgRmlsZXMnIHBvcC11cC4gQ2hhbmdlcyB0byB0aGlzIGZpbGUgd2lsbCBiZSBhY2NlcHRlZCBieSB0aGUgc3lzdGVtLiIsCiAgICAgICAgICB0aW1lcjozMDAwLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maWxlX2NvbnRlbnQgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIH0KICAgIH0sCiAgICBmaWxlaW5wdXQyKGV2ZW50KSB7CiAgICAgIGxldCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgdGhpcy5maWxlX2xhYmVsMiA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lOwogICAgICB0aGlzLmZpbGVfdHlwZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS50eXBlOwogICAgICAvLyBjb25zb2xlLmxvZyhmaWxlcykKICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQudGFyZ2V0LmZpbGVzWzBdKQogICAgICBpZiAodGhpcy5maWxlX2xhYmVsMiAhPSB0aGlzLnRlbXBfZmlsZV9uYW1lKSB7CiAgICAgICAgdGhpcy5pbWFnZV9lZGl0ID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5maWxlX3R5cGUgPT0gImltYWdlL3BuZyIpIHsKICAgICAgICB0aGlzLmNyZWF0ZUltYWdlKGZpbGVzLCB0aGlzLmZpbGVfdHlwZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5maWxlX3R5cGUgPT0gImltYWdlL2pwZWciKSB7CiAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlcywgdGhpcy5maWxlX3R5cGUpOwogICAgICB9IGVsc2UgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRleHQ6ICJVc2VycyBuZWVkIHRvIHVwbG9hZCBvbmx5IGpwZWcvcG5nIGZpbGVzIiwKICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5maWxlX2xhYmVsMiA9ICJDaG9vc2UgZmlsZSI7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVJbWFnZShmaWxlLCB0eXBlKSB7CiAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsKICAgICAgICB0aGlzLmZpbGVfY29udGVudDIgPSBlLnRhcmdldC5yZXN1bHQuc3BsaXQoImJhc2U2NCwiKVsxXTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9LAogICAgZmlsZV9zdWJtaXQoKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB1c2VyX2RldGFpbHMgPSB7CiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgfTsKICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeSh1c2VyX2RldGFpbHMpOwogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtqc29uXSwgewogICAgICAgIHR5cGU6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLmZpbGVfbGFiZWwgPT0gIkNob29zZSBmaWxlIikgewogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZmQuYXBwZW5kKAogICAgICAgICAgImZpbGUiLAogICAgICAgICAgdGhpcy5maWxlX2NvbnRlbnQsCiAgICAgICAgICB0aGlzLmNvbXBhbnluYW1lICsgIkludGVudEZpbGUuY3N2IgogICAgICAgICk7CiAgICAgICAgZmQuYXBwZW5kKCJqc29uIiwgYmxvYik7CiAgICAgICAgJCgiI2ZpbGVfdXBsb2FkIikubW9kYWwoImhpZGUiKTsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfZmlsZV91cmwoKSwgZmQsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiZmlsZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogIkZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIC8vICQoJyNmaWxlX3VwbG9hZCcpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQiLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAvLyAkKCcjZmlsZV91cGxvYWQnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dEdyb3VwRmlsZTAxIikudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAkKCIjZmlsZV91cGxvYWQiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0ZWRfcXVlc3Rpb25zKGluZGV4KSB7CiAgICAgIC8vIGRlYnVnZ2VyOwogICAgICBpZiAoaW5kZXggPT0gImFsbCIpIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YTsKICAgICAgICB9IGVsc2UgaWYgKCFldmVudC50YXJnZXQuY2hlY2tlZCkgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgIGxldCB2YWxfaW5kZXggPSB0aGlzLmNoZWNrZWRfbGlzdC5pbmRleE9mKAogICAgICAgICAgICB0aGlzLnNob3dfc3VwZXJhZG1pbl9kYXRhW2luZGV4XQogICAgICAgICAgKTsKICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YVtpbmRleF07CiAgICAgICAgICBpZiAodmFsX2luZGV4ID09IC0xKSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2godGVtcCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCA9PSBmYWxzZSkgewogICAgICAgICAgdmFyIHNlbGVjdGFsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzZWxlY3RhbGwiKTsKICAgICAgICAgIGlmIChzZWxlY3RhbGwuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIHNlbGVjdGFsbC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcigocXVlc3Rpb24pID0+IHsKICAgICAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLnF1ZXN0aW9uICE9PSBpbmRleDsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0ZW1wOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRlbGV0ZV9zZWxlY3RlZCgpIHsKICAgICAgLy8gZGVidWdnZXI7CiAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRleHQ6ICJObyByZXNwb25zZSBzZWxlY3RlZCEhIiwKICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHF1ZXN0aW9ubGlzdCA9IFtdLAogICAgICAgICAgcmVzcG9uc2VsaXN0ID0gW10sCiAgICAgICAgICBpbnRlbnRsaXN0ID0gW10sCiAgICAgICAgICBzb3VyY2VsaXN0ID0gW107CiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmNoZWNrZWRfbGlzdCkgewogICAgICAgICAgcXVlc3Rpb25saXN0LnB1c2godGhpcy5jaGVja2VkX2xpc3RbaV0ucXVlc3Rpb24pOwogICAgICAgICAgcmVzcG9uc2VsaXN0LnB1c2godGhpcy5jaGVja2VkX2xpc3RbaV0ucmVzcG9uc2UpOwogICAgICAgICAgc291cmNlbGlzdC5wdXNoKHRoaXMuY2hlY2tlZF9saXN0W2ldLnNvdXJjZSk7CiAgICAgICAgICBpbnRlbnRsaXN0LnB1c2godGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLmNoZWNrZWRfbGlzdFtpXS5pbnRlbnQpOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlbGV0ZV9xbnNfYXBpKHF1ZXN0aW9ubGlzdCwgcmVzcG9uc2VsaXN0LCBzb3VyY2VsaXN0LCBpbnRlbnRsaXN0KTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZV9xdWVzdGlvbihpbmRleCkgewogICAgICBsZXQgcXVlc3Rpb25saXN0ID0gW10sCiAgICAgICAgcmVzcG9uc2VsaXN0ID0gW10sCiAgICAgICAgaW50ZW50bGlzdCA9IFtdLAogICAgICAgIHNvdXJjZWxpc3QgPSBbXTsKICAgICAgcXVlc3Rpb25saXN0LnB1c2godGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YVtpbmRleF0ucXVlc3Rpb24pOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNob3dfc3VwZXJhZG1pbl9kYXRhW2luZGV4XS5xdWVzdGlvbik7CiAgICAgIHJlc3BvbnNlbGlzdC5wdXNoKHRoaXMuc2hvd19zdXBlcmFkbWluX2RhdGFbaW5kZXhdLnJlc3BvbnNlKTsKICAgICAgc291cmNlbGlzdC5wdXNoKHRoaXMuc2hvd19zdXBlcmFkbWluX2RhdGFbaW5kZXhdLnNvdXJjZSk7CiAgICAgIGludGVudGxpc3QucHVzaCgKICAgICAgICB0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuc2hvd19zdXBlcmFkbWluX2RhdGFbaW5kZXhdLmludGVudAogICAgICApOwogICAgICB0aGlzLmRlbGV0ZV9xbnNfYXBpKHF1ZXN0aW9ubGlzdCwgcmVzcG9uc2VsaXN0LCBzb3VyY2VsaXN0LCBpbnRlbnRsaXN0KTsKICAgIH0sCiAgICBjYWxsc2VhcmNoKCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLnNlYXJjaF9pbnRlbnQoKTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaF9pbnRlbnQoKSB7CiAgICAgIC8vIGlmKHRoaXMuc2VhcmNoX2J5IT0nJyl7CiAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9ICIiKSB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgYXBpX2NhbGxzLmFkZF9yZXNwb25zZV9pbnRlbnRfdXJsKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAgICAgIC8vIHNlYXJjaGJ5OiB0aGlzLnNlYXJjaF9ieSwKICAgICAgICAgICAgICBrZXk6IHRoaXMuc2VhcmNoX25hbWUsCiAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgcGFnZV9ubzogMSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wYWdlY291bnQgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgICAgICAgICB0aGlzLnNob3dfc3VwZXJhZG1pbl9kYXRhID0gW107CiAgICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEuUmVzcG9uc2VMaXN0Lmxlbmd0aDsKICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdlY291bnQ7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLlJlc3BvbnNlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLmRhdGEuUmVzcG9uc2VMaXN0W2ldLlJlc3BvbnNlLAogICAgICAgICAgICAgICAgICBzb3VyY2U6IHJlc3BvbnNlLmRhdGEuUmVzcG9uc2VMaXN0W2ldLlNvdXJjZSwKICAgICAgICAgICAgICAgICAgaW50ZW50OiByZXNwb25zZS5kYXRhLlJlc3BvbnNlTGlzdFtpXS5JbnRlbnQucmVwbGFjZSgKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBhbnlpZCArICJfIiwKICAgICAgICAgICAgICAgICAgICAiIgogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBzaG9ydDogcmVzcG9uc2UuZGF0YS5SZXNwb25zZUxpc3RbaV0uUmVzcG9uc2Uuc2xpY2UoCiAgICAgICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICA3MAogICAgICAgICAgICAgICAgICApLnJlcGxhY2UoLyg8KFtePl0rKT4pL2csICIiKSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiTm8gUmVzdWx0cyBGb3VuZCIpIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIk5vIFJlc3BvbnNlIEZvdW5kIik7CiAgICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAvLyB9LCAyNTAwKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIC8vIH0sIDI1MDApOwogICAgICAgICAgICAgIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRvYXN0ci5lcnJvcigiRW50ZXIgcHJvcGVyIGRhdGEgZm9yIHNlYXJjaGluZyIpOwogICAgICB9CiAgICAgIC8vIH1lbHNlewogICAgICAvLyAgIHRvYXN0ci5lcnJvcigiU2VsZWN0IGhlYWRlciBmb3Igc2VhcmNoaW5nIik7CiAgICAgIC8vIH0KICAgIH0sCiAgICBlbXB0eV92YXJpYWJsZSgpIHsKICAgICAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5yZXNwb25zZSA9ICIiOwogICAgICAvLyB0aGlzLiRlbWl0KAogICAgICAvLyAgICJpbnB1dCIsCiAgICAgIC8vICAgICIiCiAgICAgIC8vICk7CiAgICAgIHRoaXMucXVpbGwuc2V0VGV4dCgiIik7CiAgICAgIHRoaXMuc291cmNlID0gIldlYiI7CiAgICAgIHRoaXMuaW50ZW50cyA9IHRoaXMuaW50ZW50bGlzdFswXTsKICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgdGhpcy5pbWFnZV91cmwgPSAiIjsKICAgICAgdGhpcy5pbWFnZV9yZXNwb25zZSA9ICJObyI7CiAgICAgICh0aGlzLnZpZGVvX2xpbmsgPSAiIiksICh0aGlzLmVtYmRfbGluayA9ICIiKTsKICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgdGhpcy5maWxlX2NvbnRlbnQgPSAiIjsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0R3JvdXBGaWxlMDEiKS52YWx1ZSA9ICIiOwogICAgfSwKICAgIHRyYWluX2NvbnZlcnNhdGlvbl9tb2RlbCgpIHsKICAgICAgU3dhbCh7CiAgICAgICAgdGl0bGU6ICJBcmUgWW91IFN1cmU/IiwKICAgICAgICB0ZXh0OiAiWW91IHdhbnQgdG8gVHJhaW4gVGhlIE1vZGVsPyIsCiAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIiwKICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlLAogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMudHJhaW5fY29udmVyc2F0aW9uX21vZGVscygpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICAgICAgICBjb21wYW55X2RldGFpbHM6IHsKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDQwNDYpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKHJlc3BvbnNlLmRhdGEuTVNHKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDEwMzQpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihyZXNwb25zZS5kYXRhLk1TRyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50ZXJuYWwgU2VydmVyIEVycm9yIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBub3RpZnlfc3VwZXJhZG1pbigpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMuc2hvd19zdXBlcmFkbWluX2RhdGEubGVuZ3RoID49IDEwKSB7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMubm90aWZ5X3N1cGVyYWRtaW5fdXJsKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHN1YmplY3Q6ICJOb3RpZmljYXRpb24gdG8gdHJhaW4gdGhlIGJvdCIsCiAgICAgICAgICAgICAgYm9keToKICAgICAgICAgICAgICAgIHRoaXMuY29tcGFueW5hbWUgKwogICAgICAgICAgICAgICAgImhhcyByZXF1ZXN0ZWQgdG8gdHJhaW4gdGhlIG1vZGVsIHRvIGltcHJvdmUgaW50ZW50IGFjY3VyYWN5IiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5Nc2cgPT0gIkEgbWFpbCBoYXMgYmVlbiBzZW50IHRvIHlvdXIgZW1haWwiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlRoZSBNb2RlbCBoYXMgYmVlbiBtYXJrZWQgdG8gYmUgdHJhaW5lZC4iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRvYXN0ci5lcnJvcigiWW91IG11c3QgaGF2ZSBtaW5pbXVtIDEwIHF1ZXN0aW9ucyB0byB0cmFpbiB5b3VyIG1vZGVsIik7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVfcW5zX2FwaShxdWVzdGlvbmxpc3QsIHJlc3BvbnNlbGlzdCwgc291cmNlbGlzdCwgaW50ZW50bGlzdCkgewogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgZGVsZXRlISEiLAogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMubXVsdGlwbGVfZGVsZXRlX3VybCgpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHF1ZXN0aW9uc19saXN0OiBxdWVzdGlvbmxpc3QsCiAgICAgICAgICAgICAgICByZXNwb25zZV9saXN0OiByZXNwb25zZWxpc3QsCiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgIHNvdXJjZV9saXN0OiBzb3VyY2VsaXN0LAogICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGludGVudF9saXN0OiBpbnRlbnRsaXN0LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRGVsZXRlZCEiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHRleHQ6ICJZb3VyIHJlc3BvbnNlIGhhcyBiZWVuIGRlbGV0ZWQuIiwKICAgICAgICAgICAgICAgICAgdGltZXI6MjAwMCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIlF1ZXN0aW9ucyBub3QgZGVsZXRlZCEhIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVfcW5zKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YSA9IFtdOwogICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0KICAgICAgICBtZXNzYWdlLnNob3dfaW50ZW50X2ZpZWxkLmludGVudF9xdWVzdGlvbmxpc3QubGVuZ3RoOwogICAgICAvLyB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgICAgdmFyIHF1ZXN0aW9ubGlzdCwgcmVzcG9uc2VsaXN0LCBzb3VyY2VsaXN0OwogICAgICB2YXIgc2hvd19xdWVzdGlvbmxpc3QsCiAgICAgICAgc2hvd19yZXNwb25zZWxpc3QsCiAgICAgICAgc2hvd19zb3VyY2VsaXN0LAogICAgICAgIHNob3dfaW50ZW50bGlzdDsKICAgICAgLy8gc2hvd19pbWFnZWxpc3Q7CiAgICAgIC8vIGlmICh0aGlzLnVzZXJfcm9sZSA9PSAiU3VwZXJBZG1pbiIgfHwgdGhpcy51c2VyX3JvbGUgPT0gIkFkbWluIikgewogICAgICBzaG93X3F1ZXN0aW9ubGlzdCA9IG1lc3NhZ2Uuc2hvd19pbnRlbnRfZmllbGQuaW50ZW50X3F1ZXN0aW9ubGlzdDsKICAgICAgc2hvd19yZXNwb25zZWxpc3QgPSBtZXNzYWdlLnNob3dfaW50ZW50X2ZpZWxkLmludGVudF9yZXNwb25zZWxpc3Q7CiAgICAgIHNob3dfc291cmNlbGlzdCA9IG1lc3NhZ2Uuc2hvd19pbnRlbnRfZmllbGQuaW50ZW50X3NvdXJjZWxpc3Q7CiAgICAgIHNob3dfaW50ZW50bGlzdCA9IG1lc3NhZ2Uuc2hvd19pbnRlbnRfZmllbGQuaW50ZW50X2ludGVudGxpc3Q7CiAgICAgIC8vIHNob3dfaW1hZ2VsaXN0ID0gbWVzc2FnZS5zaG93X2ludGVudF9maWVsZC5pbWFnZV91cmw7CiAgICAgIGZvciAodmFyIGkgaW4gcXVlc3Rpb25saXN0KSB7CiAgICAgICAgdGhpcy5hZGRfc3VwZXJhZG1pbl9kYXRhLnB1c2goewogICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9ubGlzdFtpXSwKICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZWxpc3RbaV0sCiAgICAgICAgICBzb3VyY2U6IHNvdXJjZWxpc3RbaV0sCiAgICAgICAgICBpbnRlbnQ6ICIiLAogICAgICAgICAgLy8gaW1hZ2U6c2hvd19pbWFnZWxpc3RbaV0KICAgICAgICB9KTsKICAgICAgfQogICAgICBmb3IgKHZhciBpIGluIHNob3dfcXVlc3Rpb25saXN0KSB7CiAgICAgICAgdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YS5wdXNoKHsKICAgICAgICAgIHF1ZXN0aW9uOiBzaG93X3F1ZXN0aW9ubGlzdFtpXSwKICAgICAgICAgIHJlc3BvbnNlOiBzaG93X3Jlc3BvbnNlbGlzdFtpXSwKICAgICAgICAgIHNvdXJjZTogc2hvd19zb3VyY2VsaXN0W2ldLAogICAgICAgICAgaW50ZW50OiBzaG93X2ludGVudGxpc3RbaV0ucmVwbGFjZSh0aGlzLmNvbXBhbnlpZCArICJfIiwgIiIpLAogICAgICAgICAgc2hvcnQ6IHNob3dfcmVzcG9uc2VsaXN0W2ldLnNsaWNlKDAsIDcwKS5yZXBsYWNlKC8oPChbXj5dKyk+KS9nLCAiIiksCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gfQogICAgfSwKICAgIGVkaXRfcXVlc3Rpb24oaW5kZXgpIHsKICAgICAgdGhpcy5xdWlsbC5yb290LmlubmVySFRNTCA9IHRoaXMuc2hvd19zdXBlcmFkbWluX2RhdGFbaW5kZXhdLnJlc3BvbnNlOwogICAgICB0aGlzLnNvdXJjZSA9IHRoaXMuc2hvd19zdXBlcmFkbWluX2RhdGFbaW5kZXhdLnNvdXJjZTsKICAgICAgdGhpcy5pbnRlbnRzID0gdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YVtpbmRleF0uaW50ZW50OwogICAgICBpZiAodGhpcy5pbWFnZV91cmxzW2luZGV4XSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5pbWFnZV91cmwgPSB0aGlzLmltYWdlX3VybHNbaW5kZXhdOwogICAgICAgIHRoaXMuaW1hZ2VfcmVzcG9uc2UgPSAiWWVzIjsKICAgICAgICB0aGlzLm5hbWVfZmlsZSA9IHRoaXMuaW1hZ2VfdXJsc1tpbmRleF0uc3BsaXQoIi8iKTsKICAgICAgICB0aGlzLnRlbXBfZmlsZV9uYW1lID0gdGhpcy5uYW1lX2ZpbGVbdGhpcy5uYW1lX2ZpbGUubGVuZ3RoIC0gMV07CiAgICAgICAgdGhpcy5maWxlX2xhYmVsMiA9IHRoaXMudGVtcF9maWxlX25hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbWFnZV9yZXNwb25zZSA9ICJObyI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMudmlkZW9fdXJsW2luZGV4XSAhPSB1bmRlZmluZWQgJiYgdGhpcy52aWRlb191cmxbaW5kZXhdICE9ICIiKSB7CiAgICAgICAgdGhpcy52aWRlb19saW5rID0gdGhpcy52aWRlb191cmxzW2luZGV4XTsKICAgICAgICB0aGlzLnZpZGVvX3Jlc3BvbnNlID0gIlllcyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52aWRlb19yZXNwb25zZSA9ICJObyI7CiAgICAgIH0KICAgICAgdGhpcy5hZGRfZWRpdCA9ICJmYWxzZSI7CiAgICB9LAogICAgYWRkX2VkaXRfcXVlc3Rpb24oKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBleGlzdGluZ19pbnRlbnRzID0gdGhpcy5zaG93X3N1cGVyYWRtaW5fZGF0YS5maWx0ZXIoKHF1ZXN0aW9uKSA9PiB7CiAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLmludGVudCA9PSB0aGlzLmludGVudHM7CiAgICAgIH0pOwogICAgICBpZiAodGhpcy5hZGRfZWRpdCA9PSAidHJ1ZSIpIHsKICAgICAgICBpZiAodGhpcy5yZXNwb25zZSA9PSAiIikgewogICAgICAgICAgdG9hc3RyLndhcm5pbmcoIlBsZWFzZSBlbnRlciBhIHZhbGlkIHJlc3BvbnNlIik7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfb3B0aW9ucyA9PSB0cnVlKSB7CiAgICAgICAgICB0b2FzdHIud2FybmluZygiUGxlYXNlIHNlbGVjdCBhIHZhbGlkIG9wdGlvbiIpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbnRlbnRzID09IHRydWUpIHsKICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBpbnRlbnQiKTsKICAgICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nX2ludGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgdG9hc3RyLndhcm5pbmcoCiAgICAgICAgICAgICJUaGlzIGludGVudCBoYXMgYmVlbiBhbHJlYWR5IGFkZGVkLiBQbGVhc2UgdHJ5IHVzaW5nIGFub3RoZXIgaW50ZW50LiIKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZpbGVfbGFiZWwyID09ICJDaG9vc2UgZmlsZSIpIHsKICAgICAgICAgICQoIiNleGFtcGxlTW9kYWxDZW50ZXIiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgYXBpX2NhbGxzLmFkZF9yZXNwb25zZV9pbnRlbnRfdXJsKCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmVzcG9uc2U6IHRoaXMucmVzcG9uc2UsCiAgICAgICAgICAgICAgICBzb3VyY2U6IHRoaXMuc291cmNlLAogICAgICAgICAgICAgICAgaW50ZW50OiB0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuaW50ZW50cywKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogbnVsbCwKICAgICAgICAgICAgICAgIGZpbGVfZGF0YTogbnVsbCwKICAgICAgICAgICAgICAgIHZpZGVvX2xpbms6IHRoaXMuZW1iZF9saW5rLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgIHRoaXMucmVzcG9uc2UgPSAiIjsKICAgICAgICAgICAgICB0aGlzLnNvdXJjZSA9ICIiOwogICAgICAgICAgICAgIHRoaXMuaW50ZW50cyA9ICIiOwogICAgICAgICAgICAgIHZhciByZXNwb25zZV9hcGkgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIGlmIChyZXNwb25zZV9hcGkgPT0gIkFkZGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICAgICJBbGwgeW91ciBxdWVzdGlvbnMgYW5kIHJlc3BvbnNlcyBoYXZlIGJlZW4gYWRkZWQgc3VjY2Vzc2Z1bGx5ISEiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlLAogICAgICAgICAgICAgICAgICB0aW1lcjoyNTAwLAogICAgICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTXNnID09ICJJbnRlbnQgYWxyZWFkeSBleGlzdCIpIHsKICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICAgICJUaGlzIEludGVudCBpcyBhbHJlYWR5IHVzZWQsIGtpbmRseSB1c2UgYW55IG90aGVyIEludGVudCIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgICB9LCAxNTAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgiI2V4YW1wbGVNb2RhbENlbnRlciIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMuYWRkX3Jlc3BvbnNlX2ludGVudF91cmwoKSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXNwb25zZTogdGhpcy5yZXNwb25zZSwKICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5zb3VyY2UsCiAgICAgICAgICAgICAgICBpbnRlbnQ6IHRoaXMuY29tcGFueWlkICsgIl8iICsgdGhpcy5pbnRlbnRzLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgICAgZmlsZV9uYW1lOiB0aGlzLmZpbGVfbGFiZWwyLAogICAgICAgICAgICAgICAgZmlsZV9kYXRhOiB0aGlzLmZpbGVfY29udGVudDIsCiAgICAgICAgICAgICAgICB2aWRlb19saW5rOiB0aGlzLmVtYmRfbGluaywKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VfYXBpID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2VfYXBpID09ICJBZGRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgdGV4dDoKICAgICAgICAgICAgICAgICAgICAiQWxsIHlvdXIgcXVlc3Rpb25zIGFuZCByZXNwb25zZXMgaGF2ZSBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseSEhIiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lcjoyMDAwLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VfYXBpID09ICJEdXBsaWNhdGUgaW1hZ2UiKSB7CiAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgdGV4dDogIkZpbGVuYW1lIGFscmVhZHkgZXhpc3Qga2luZGx5IHJlbmFtZSB0aGUgZmlsZSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiSW50ZW50IGFscmVhZHkgZXhpc3QiKSB7CiAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgdGV4dDoKICAgICAgICAgICAgICAgICAgICAiVGhpcyBJbnRlbnQgaXMgYWxyZWFkeSB1c2VkLCBraW5kbHkgdXNlIGFueSBvdGhlciBJbnRlbnQiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjoyNTAwLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5yZXNwb25zZSA9ICIiOwogICAgICAgICAgdGhpcy5zb3VyY2UgPSAiIjsKICAgICAgICAgIHRoaXMuaW50ZW50cyA9ICIiOwogICAgICAgICAgdGhpcy5maWxlX2xhYmVsMiA9ICJDaG9vc2UgZmlsZSI7CiAgICAgICAgICB0aGlzLmZpbGVfY29udGVudDIgPSAiIjsKICAgICAgICAgIHRoaXMudmlkZW9fbGluayA9ICIiOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFkZF9lZGl0ID09ICJmYWxzZSIpIHsKICAgICAgICBpZiAodGhpcy5yZXNwb25zZSA9PSAiIikgewogICAgICAgICAgdG9hc3RyLndhcm5pbmcoIlBsZWFzZSBlbnRlciBhIHZhbGlkIHJlc3BvbnNlIik7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfb3B0aW9ucyA9PSB0cnVlKSB7CiAgICAgICAgICB0b2FzdHIud2FybmluZygiUGxlYXNlIHNlbGVjdCBhIHZhbGlkIG9wdGlvbiIpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbnRlbnRzID09IHRydWUpIHsKICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBpbnRlbnQiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgiI2V4YW1wbGVNb2RhbENlbnRlciIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMuZWRpdF9xdWVzdGlvbl91cmwoKSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpc0RlbGV0ZTogIkZhbHNlIiwKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB0aGlzLnJlc3BvbnNlLAogICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLnNvdXJjZSwKICAgICAgICAgICAgICAgIGludGVudDogdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLmludGVudHMsCiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICAgICAgICBvbGRfaW1hZ2VfbmFtZTogdGhpcy50ZW1wX2ZpbGVfbmFtZSwKICAgICAgICAgICAgICAgIG5ld19pbWFnZV9uYW1lOiB0aGlzLmZpbGVfbGFiZWwyLAogICAgICAgICAgICAgICAgaW1hZ2VfZWRpdDogdGhpcy5pbWFnZV9lZGl0LAogICAgICAgICAgICAgICAgaW1hZ2VfYmxvYjogdGhpcy5maWxlX2NvbnRlbnQyLAogICAgICAgICAgICAgICAgdmlkZW9fbGluazogdGhpcy5lbWJkX2xpbmssCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5Nc2cgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICAgIC8vIHRvYXN0ci5zdWNjZXNzKCJZb3VyIEluZm9ybWF0aW9uIFVwZGF0ZWQgU3VjY2Vzc2Z1bGx5ISEiKTsKICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICB0ZXh0OiAiWW91ciBJbmZvcm1hdGlvbiBVcGRhdGVkIFN1Y2Nlc3NmdWxseSEhIiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lcjoyMDAwLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICAgICAgLy8gJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gICAkKCIubW9kYWwtY29udGVudCIpLmNzcygiZGlzcGxheSIsICJub25lIik7CiAgICAgICAgICAgICAgICAvLyAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiRHVwbGljYXRlIGltYWdlIikgewogICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJGaWxlbmFtZSBhbHJlYWR5IGV4aXN0IGtpbmRseSByZW5hbWUgdGhlIGZpbGUiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjoyNTAwLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgICAgICAgJCgiI2ZpbGVfdXBsb2FkIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdXIgSW5mb3JtYXRpb24gaGFzIG5vdCBiZWVuIFVwZGF0ZWQhISIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHBhZ2luYXRpb25fY2xhc3MoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICAgIHJldHVybiAiIGFjdGl2ZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgc2V0cGFnaW5hdGlvbihwYWdlX25vKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheSA9IFtdOwogICAgICBpZiAodGhpcy50b3RhbF9wYWdlcyA8PSA3KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSAxKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnRvdGFsX3BhZ2VzIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vIDw9IDQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2Vfbm8gKyAzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID49IHRoaXMudG90YWxfcGFnZXMgLSA0KSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKICAgICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDQ7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKICAgICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDM7IGkgPD0gcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSk7CiAgICAgICAgfQogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09ICIiKSB7CiAgICAgICAgICBpZiAocGFnZSA9PSAiLi4ucyIpIHsKICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCgxICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgICAgfSBlbHNlIGlmIChwYWdlID09ICIuLi5sIikgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKHRoaXMudG90YWxfcGFnZXMgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgICAgfQogICAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgLy8gdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgIGFwaV9jYWxscy5sb2FkX3F1ZXN0aW9uX3Jlc3BvbnNlX3VybCgpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJvbGU6IHRoaXMudXNlcl9yb2xlLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZWNvdW50OwogICAgICAgICAgICAgIHRoaXMudXBkYXRlX3FucyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLmltYWdlX3VybHMgPSByZXNwb25zZS5kYXRhLnNob3dfaW50ZW50X2ZpZWxkLmltYWdlX3VybDsKICAgICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICAvLyB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgICAgaWYgKHBhZ2UgPT0gIi4uLnMiKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAiLi4ubCIpIHsKICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCh0aGlzLnRvdGFsX3BhZ2VzICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgIGFwaV9jYWxscy5hZGRfcmVzcG9uc2VfaW50ZW50X3VybCgpLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoX2J5LAogICAgICAgICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wYWdlY291bnQgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dfc3VwZXJhZG1pbl9kYXRhID0gW107CiAgICAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5SZXNwb25zZUxpc3QubGVuZ3RoOwogICAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZWNvdW50OwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLlJlc3BvbnNlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICB0aGlzLnNob3dfc3VwZXJhZG1pbl9kYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZS5kYXRhLlJlc3BvbnNlTGlzdFtpXS5SZXNwb25zZSwKICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHJlc3BvbnNlLmRhdGEuUmVzcG9uc2VMaXN0W2ldLlNvdXJjZSwKICAgICAgICAgICAgICAgICAgICBpbnRlbnQ6IHJlc3BvbnNlLmRhdGEuUmVzcG9uc2VMaXN0W2ldLkludGVudC5yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wYW55aWQgKyAiXyIsCiAgICAgICAgICAgICAgICAgICAgICAiIgogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgc2hvcnQ6IHJlc3BvbnNlLmRhdGEuUmVzcG9uc2VMaXN0W2ldLlJlc3BvbnNlLnNsaWNlKAogICAgICAgICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAgIDcwCiAgICAgICAgICAgICAgICAgICAgKS5yZXBsYWNlKC8oPChbXj5dKyk+KS9nLCAiIiksCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zZXRwYWdpbmF0aW9uKHRoaXMucGFnZV9ubyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50cm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ResponseIntent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResponseIntent.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Data Inputs","sourcesContent":["<template>\n  <!-- TODO Remove the company_id prefix for intents -->\n  <div class=\"dash-cont\">\n    <div class=\"spinner\" id=\"spinner\" v-show=\"spinnerOn\"></div>\n    <div class=\"container-fluid\">\n      <div class=\"card dash-card\">\n        <div\n          class=\"card-header d-block d-sm-flex flex-wrap justify-content-between\"\n        >\n          <h4 class=\"mb-sm-0\">Responses</h4>\n          <div class=\"card-act d-flex flex-wrap\">\n            <!-- for search -harsh -->\n            <input\n              class=\"form-control search-bar\"\n              id=\"search_bar\"\n              placeholder=\"Search here\"\n              v-on:keyup=\"callsearch\"\n              v-model=\"search_name\"\n            />\n            <a\n              href=\"#\"\n              class=\"darkblue-btn\"\n              @click=\"search_intent\"\n              id=\"search_btn\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                width=\"14\"\n                height=\"14\"\n              >\n                <path\n                  d=\"M13.809011327100071,12.965505435601472 L9.30910012117823,8.49330664854199 C10.007392079586584,7.596111589605521 10.38512817619458,6.499157170138106 10.38512817619458,5.345374656726532 c0,-1.3810948891881802 -0.5423458634784514,-2.676086605733705 -1.523073527148749,-3.6524965835014083 c-0.9807276636702976,-0.9764099777677033 -2.287209392305289,-1.5136937750578685 -3.6751296371814526,-1.5136937750578685 s-2.6944019735111544,0.5390058607430178 -3.6751296371814526,1.5136937750578685 C0.5293349766245179,2.667565987539975 -0.011278152465820316,3.9642797675383576 -0.011278152465820316,5.345374656726532 c0,1.3793728257353273 0.5423458634784514,2.6778086691865575 1.523073527148749,3.6524965835014083 C2.492523038353222,9.974281217995648 3.7972720326001044,10.51156501528581 5.18692501186438,10.51156501528581 c1.160932040033745,0 2.2629511108717475,-0.37540983272197437 3.165705727077092,-1.0676793407689171 l4.499911205921844,4.470476723606628 a0.1420842198250257,0.14120920313395363 0 0 0 0.20099718902076805,0 l0.7554721932159904,-0.7490976019910955 a0.1420842198250257,0.14120920313395363 0 0 0 0,-0.19975936053095905 zM7.931576282630728,8.073123166045836 C7.196896902072058,8.80155600660269 6.2231001759542055,9.20279679111746 5.18692501186438,9.20279679111746 s-2.0099718902076775,-0.4012407845147706 -2.744651270766347,-1.1296736250716286 C1.709327094927478,7.342968262036121 1.3055999824978375,6.37516860153268 1.3055999824978375,5.345374656726532 s0.4037271124296458,-1.99931566876244 1.1366737586002036,-2.727748509319298 C3.1769531216567026,1.8891933068503817 4.150749847774562,1.4879525223356067 5.18692501186438,1.4879525223356067 s2.0117046245957884,0.3995187210619175 2.744651270766347,1.1296736250716286 S9.06825004123093,4.315580711920385 9.06825004123093,5.345374656726532 s-0.4037271124296458,1.99931566876244 -1.1366737586002036,2.727748509319298 z\"\n                  fill=\"#fff\"\n                />\n              </svg>\n            </a>\n\n            <!-- <button type=\"submit\" class=\"darkblue-btn\" @click=\"notify_superadmin\">Train The Model</button> -->\n            <button class=\"darkblue-btn\" @click=\"train_conversation_model\">\n              Train The Model\n            </button>\n            <a\n              href=\"#\"\n              class=\"darkblue-btn\"\n              title=\"Upload Files\"\n              data-toggle=\"modal\"\n              data-target=\"#file_upload\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"14\"\n                height=\"14\"\n                viewBox=\"0 0 14 13.997\"\n              >\n                <path\n                  d=\"M8.6939946595428,-0.014074647685589529 H1.8307534193786577 a1.7158103100410358,1.38733287383954 0 0 0 -1.7158103100410358,1.38733287383954 v11.09866299071632 a1.7158103100410358,1.38733287383954 0 0 0 1.7158103100410358,1.38733287383954 h10.294861860246215 a1.7158103100410358,1.38733287383954 0 0 0 1.7158103100410358,-1.38733287383954 V4.147923973833031 l-5.147430930123107,-4.16199862151862 zm-0.42895257751025956,9.71133011687678 v2.08099931075931 h-2.5737154650615537 v-2.08099931075931 H3.5465637294196934 l3.4316206200820716,-2.77466574767908 l3.4316206200820716,2.77466574767908 h-2.1447628875512947 zM7.836089504522283,4.841590410752801 V1.0264250076940657 L12.554567857135131,4.841590410752801 H7.836089504522283 z\"\n                  id=\"svg_1\"\n                  class\n                  fill=\"#fff\"\n                />\n              </svg>\n            </a>\n            <a\n              href=\"#\"\n              class=\"darkblue-btn\"\n              @click=\"download_csv\"\n              title=\"Download CSV File\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                width=\"14\"\n                height=\"14\"\n              >\n                <path\n                  d=\"M8.124046569796448,3.7048888423811563 V-0.0004725085692590319 H0.8684480275323758 C0.385950724471816,-0.0004725085692590319 -0.0022237975393094665,0.29105224477757613 -0.0022237975393094665,0.6534147886572829 v12.641821079713173 c0,0.3623625438797103 0.3881745220111289,0.6538872972265442 0.8706718250716886,0.6538872972265442 h12.18940555100364 c0.4824973030605619,0 0.8706718250716886,-0.2915247533468346 0.8706718250716886,-0.6538872972265442 V4.358776139607697 H8.994718394868137 c-0.47886950378942883,0 -0.8706718250716886,-0.2942492837519449 -0.8706718250716886,-0.6538872972265442 zm2.773452542780442,5.758567464241761 l-3.497924057225508,2.6073755976908415 c-0.24124865153028063,0.18009145977781071 -0.6308742932498614,0.18009145977781071 -0.872122944780142,0 l-3.497924057225508,-2.6073755976908415 C2.661306427325829,9.189096094828278 2.9196057354304337,8.718024787784655 3.437655471348084,8.718024787784655 H5.802255036271947 v-2.1796243240884783 c0,-0.24084848781177734 0.2597504278130543,-0.4359248648176966 0.5804478833811269,-0.4359248648176966 h1.1608957667622521 c0.3206974555680725,0 0.5804478833811269,0.1950763770059196 0.5804478833811269,0.4359248648176966 v2.1796243240884783 h2.3645995649238625 c0.5180497359176551,0 0.7763490440222554,0.47107130704362293 0.4088529778565816,0.7454315188382611 zM13.674579454628462,2.86028441679687 L10.122963968190199,0.1902446197884852 c-0.16325096720094195,-0.12260386822997718 -0.38454672273999646,-0.1907171283577423 -0.6167258760924463,-0.1907171283577423 H9.284942336558702 v3.4873989185415644 h4.643583067049007 v-0.16619635471174685 c0,-0.1716454155219681 -0.09069498177830096,-0.33784177023371487 -0.2539459489792431,-0.46044563846369135 z\"\n                  fill=\"#fff\"\n                />\n              </svg>\n            </a>\n            <!-- <button type=\"submit\" class=\"darkblue-btn\" @click=\"download_csv\">Do</button> -->\n            <a\n              href=\"#\"\n              @click=\"add_edit = 'true'\"\n              class=\"darkblue-btn\"\n              data-toggle=\"modal\"\n              data-target=\"#exampleModalCenter\"\n              id=\"res_add_quesn_btn\"\n              title=\"Add Responses\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"14\"\n                height=\"13.997\"\n                viewBox=\"0 0 14 13.997\"\n              >\n                <path\n                  id=\"Union_13\"\n                  data-name=\"Union 13\"\n                  d=\"M-12684,2058v-5h-5a1,1,0,0,1-1-1,1,1,0,0,1,1-1h5v-5a1,1,0,0,1,1-1,1,1,0,0,1,1,1v5h5a1,1,0,0,1,1,1,1,1,0,0,1-1,1h-5v5a1,1,0,0,1-1,1A1,1,0,0,1-12684,2058Z\"\n                  transform=\"translate(12690.001 -2045.002)\"\n                  fill=\"#fff\"\n                />\n              </svg>\n            </a>\n            <a\n              href=\"javascript:void(0)\"\n              title=\"Delete\"\n              class=\"red-btn\"\n              @click=\"delete_selected\"\n              id=\"delete_response\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"14\"\n                height=\"14\"\n                viewBox=\"0 0 14 14\"\n              >\n                <path\n                  id=\"trash-can-outline\"\n                  d=\"M8.375,3v.778H4V5.333h.875V15.444A1.661,1.661,0,0,0,6.625,17h8.75a1.661,1.661,0,0,0,1.75-1.556V5.333H18V3.778H13.625V3H8.375M6.625,5.333h8.75V15.444H6.625V5.333m1.75,1.556v7h1.75v-7H8.375m3.5,0v7h1.75v-7Z\"\n                  transform=\"translate(-4 -3)\"\n                  fill=\"#fff\"\n                />\n              </svg>\n            </a>\n          </div>\n        </div>\n        <div class=\"card-body\" id=\"page\">\n          <div class=\"table-box\">\n            <div class=\"table-responsive\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\" style=\"width: 1%\">\n                      <div class=\"form-check checkbox checkbox-success\">\n                        <label class=\"form-check-label\">\n                          <input\n                            class=\"form-check-input\"\n                            id=\"selectall\"\n                            type=\"checkbox\"\n                            @change=\"selected_questions('all')\"\n                          />\n                          <span class=\"icn\"></span>\n                        </label>\n                      </div>\n                    </th>\n                    <th scope=\"col\" style=\"width: 1%\">ACTION</th>\n                    <th scope=\"col\">RESPONSE</th>\n                    <th scope=\"col\" style=\"width: 1%\">INTENT</th>\n                    <th scope=\"col\" style=\"width: 1%\">SOURCES</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"(row, index) in show_superadmin_data\"\n                    :key=\"index\"\n                    id=\"list-group\"\n                  >\n                    <th scope=\"row\">\n                      <div class=\"form-check checkbox checkbox-success\">\n                        <label class=\"form-check-label\">\n                          <input\n                            class=\"form-check-input\"\n                            type=\"checkbox\"\n                            @change=\"selected_questions(index)\"\n                          />\n                          <span class=\"icn\"></span>\n                        </label>\n                      </div>\n                    </th>\n                    <td class=\"action\">\n                      <a href=\"#\" @click=\"edit_question(index)\">\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          width=\"15.392\"\n                          height=\"15.392\"\n                          viewBox=\"0 0 15.392 15.392\"\n                          data-toggle=\"modal\"\n                          data-target=\"#exampleModalCenter\"\n                          id=\"edit_quesn_btn\"\n                        >\n                          <path\n                            id=\"square-edit-outline\"\n                            d=\"M4.71,3A1.7,1.7,0,0,0,3,4.71V16.682a1.71,1.71,0,0,0,1.71,1.71H16.682a1.71,1.71,0,0,0,1.71-1.71V10.7h-1.71v5.986H4.71V4.71H10.7V3H4.71m10.928.855a.591.591,0,0,0-.41.171L14.185,5.061,16.322,7.2l1.043-1.035a.578.578,0,0,0,0-.812L16.04,4.026a.571.571,0,0,0-.4-.171M13.578,5.668l-6.3,6.311v2.138H9.413l6.3-6.311Z\"\n                            transform=\"translate(-3 -3)\"\n                            fill=\"#9499ae\"\n                          />\n                        </svg>\n                      </a>\n                      <a\n                        href=\"#\"\n                        @click=\"delete_question(index)\"\n                        id=\"single_delete_question_id\"\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          width=\"13.682\"\n                          height=\"15.392\"\n                          viewBox=\"0 0 13.682 15.392\"\n                        >\n                          <path\n                            id=\"trash-can-outline\"\n                            d=\"M8.276,3v.855H4v1.71h.855V16.682a1.71,1.71,0,0,0,1.71,1.71h8.551a1.71,1.71,0,0,0,1.71-1.71V5.565h.855V3.855H13.406V3H8.276M6.565,5.565h8.551V16.682H6.565V5.565m1.71,1.71v7.7h1.71v-7.7H8.276m3.42,0v7.7h1.71v-7.7Z\"\n                            transform=\"translate(-4 -3)\"\n                            fill=\"#f23d3d\"\n                          />\n                        </svg>\n                      </a>\n                    </td>\n                    <!-- <td>{{row.question}}</td> -->\n                    <td\n                      data-toggle=\"tooltip\"\n                      data-placement=\"bottom\"\n                      :title=\"row.response\"\n                      v-html=\"row.short\"\n                    >\n                      {{ row.short }}\n                      <span v-show=\"row.short != row.response\">...</span>\n                    </td>\n                    <td>{{ row.intent }}</td>\n                    <td>{{ row.source }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div\n        class=\"modal fade dash-modal\"\n        id=\"file_upload\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"exampleModalCenterTitle\"\n        aria-hidden=\"true\"\n        data-backdrop=\"static\"\n        data-keyboard=\"false\"\n      >\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-body\">\n              <div class=\"modal-head d-flex align-items-center\">\n                <div class=\"head-icn\">\n                  <img src=\"/img/msg-blue.png\" alt />\n                </div>\n                <h3>Upload CSV Files</h3>\n              </div>\n              <button\n                type=\"button\"\n                class=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                @click=\"empty_variable\"\n              >\n                <img src=\"/img/close-icn.png\" alt />\n              </button>\n              <form @submit=\"file_submit\">\n                <div class=\"form-group\">\n                  <div class=\"custom-file\">\n                    <input\n                      type=\"file\"\n                      accept=\".csv\"\n                      class=\"custom-file-input\"\n                      @change=\"fileinput\"\n                      id=\"inputGroupFile01\"\n                      aria-describedby=\"inputGroupFileAddon01\"\n                    />\n                    <label\n                      style=\"font-weight: 400; line-height: 15px\"\n                      class=\"custom-file-label form-control\"\n                      for=\"file\"\n                      >{{ file_label }}</label\n                    >\n                  </div>\n                </div>\n                <div class=\"btn-wrap text-right\">\n                  <a href=\"#\" @click=\"download_sample_file\">\n                    Download Sample CSV File\n                    <i\n                      class=\"fa fa-spinner fa-spin\"\n                      v-show=\"spinnerOnFileDownload\"\n                    ></i>\n                  </a>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-link\"\n                    @click=\"empty_variable\"\n                    data-dismiss=\"modal\"\n                  >\n                    Cancel\n                  </button>\n                  <button type=\"submit\" class=\"darkblue-btn\">Submit</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"modal fade dash-modal\"\n        id=\"exampleModalCenter\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"exampleModalCenterTitle\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-body\">\n              <div class=\"modal-head d-flex align-items-center\">\n                <div class=\"head-icn\">\n                  <img src=\"/img/msg-blue.png\" alt />\n                </div>\n                <h3>Add Responses</h3>\n              </div>\n              <button\n                type=\"button\"\n                class=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                @click=\"empty_variable\"\n              >\n                <img src=\"/img/close-icn.png\" alt />\n              </button>\n              <form @submit=\"add_edit_question\">\n                <div class=\"form-group\">\n                  <span>Response with Image :</span>\n                  <div>\n                    <center>\n                      <div class=\"radio\" style=\"margin-bottom: 3%\">\n                        <label>\n                          <input\n                            type=\"radio\"\n                            v-model=\"image_response\"\n                            value=\"Yes\"\n                          />\n                          <span class=\"icn\"></span> Yes\n                        </label>\n                        <label>\n                          <input\n                            type=\"radio\"\n                            v-model=\"image_response\"\n                            value=\"No\"\n                          />\n                          <span class=\"icn\"></span> No\n                        </label>\n                      </div>\n                    </center>\n                    <div\n                      class=\"custom-file\"\n                      v-show=\"image_response == 'Yes'\"\n                      style=\"margin-bottom: 5%\"\n                    >\n                      <input\n                        type=\"file\"\n                        accept=\"image/x-png, image/gif, image/jpeg\"\n                        class=\"custom-file-input\"\n                        @change=\"fileinput2\"\n                        aria-describedby=\"inputGroupFileAddon01\"\n                      />\n                      <label\n                        style=\"font-weight: 400; line-height: 15px\"\n                        class=\"custom-file-label form-control\"\n                        for=\"file\"\n                        >{{ file_label2 }}</label\n                      >\n                    </div>\n                  </div>\n                  <div class=\"form-group\">\n                    <span>Response with Video :</span>\n                    <div>\n                      <center>\n                        <div class=\"radio\" style=\"margin-bottom: 3%\">\n                          <label>\n                            <input\n                              type=\"radio\"\n                              id=\"res_video_type\"\n                              v-model=\"video_response\"\n                              value=\"Yes\"\n                            />\n                            <span class=\"icn\" id=\"res_video_icn\"></span> Yes\n                          </label>\n                          <label>\n                            <input\n                              type=\"radio\"\n                              v-model=\"video_response\"\n                              value=\"No\"\n                            />\n                            <span class=\"icn\"></span> No\n                          </label>\n                        </div>\n                      </center>\n                    </div>\n                    <div\n                      v-show=\"video_response == 'Yes'\"\n                      style=\"margin-bottom: 5%\"\n                    >\n                      <input\n                        id=\"res_video_url\"\n                        type=\"url\"\n                        class=\"form-control\"\n                        placeholder=\"Enter only URL\"\n                        v-model=\"video_link\"\n                        @change=\"embedded_change\"\n                      />\n                    </div>\n                  </div>\n                  <div class=\"form-group\">\n                    <div id=\"editor\" style=\"height: 150px\"></div>\n                  </div>\n                </div>\n\n                <div class=\"form-group\">\n                  <label>Select Intent</label>\n                  <multiselect\n                    v-model=\"intents\"\n                    id=\"res_n_int_intent\"\n                    :disabled=\"add_edit == 'false'\"\n                    :options=\"intentlist\"\n                    :searchable=\"true\"\n                    :close-on-select=\"true\"\n                    :show-labels=\"false\"\n                    style=\"width: auto; border: none\"\n                  >\n                    <span>{{ intents }}</span>\n                  </multiselect>\n                </div>\n                <div class=\"form-group\">\n                  <label>Select Source</label>\n                  <select\n                    class=\"form-control\"\n                    v-model=\"source\"\n                    id=\"res_n_int_source\"\n                  >\n                    <option\n                      v-for=\"(option, index) in options\"\n                      :key=\"index\"\n                      :value=\"option\"\n                    >\n                      {{ option }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"btn-wrap text-right\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-link\"\n                    data-dismiss=\"modal\"\n                    @click=\"empty_variable\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    class=\"darkblue-btn\"\n                    id=\"res_n_int_save\"\n                  >\n                    Save\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"pagin-table\" style=\"margin-top: 2%; margin-bottom: 4%\">\n        <nav aria-label=\"Page navigation example\">\n          <ul class=\"pagination justify-content-center\">\n            <li class=\"page-item\">\n              <a class=\"page-link\" href=\"#\" @click=\"page_require(page_no - 1)\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"8.667\"\n                  height=\"15.204\"\n                  viewBox=\"0 0 8.667 15.204\"\n                >\n                  <g\n                    id=\"arrow-point-to-left\"\n                    transform=\"translate(105.806 15.204) rotate(180)\"\n                  >\n                    <path\n                      id=\"Path_1136\"\n                      data-name=\"Path 1136\"\n                      d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                      transform=\"translate(0 0)\"\n                      fill=\"#9499ae\"\n                    />\n                  </g>\n                </svg>\n              </a>\n            </li>\n            <li\n              :class=\"'page-item ' + pagination_class(page_number)\"\n              v-for=\"page_number in page_array\"\n              :key=\"page_number\"\n            >\n              <a\n                v-if=\"page_number == '...s' || page_number == '...l'\"\n                class=\"page-link\"\n                href=\"#\"\n                @click=\"page_require(page_number)\"\n                >...</a\n              >\n              <a\n                v-if=\"page_number != '...s' && page_number != '...l'\"\n                class=\"page-link\"\n                href=\"#\"\n                @click=\"page_require(page_number)\"\n                >{{ page_number }}</a\n              >\n            </li>\n\n            <li class=\"page-item\">\n              <a class=\"page-link\" href=\"#\" @click=\"page_require(page_no + 1)\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"8.667\"\n                  height=\"15.204\"\n                  viewBox=\"0 0 8.667 15.204\"\n                >\n                  <g id=\"arrow-point-to-right\" transform=\"translate(-97.139 0)\">\n                    <path\n                      id=\"Path_1136\"\n                      data-name=\"Path 1136\"\n                      d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                      transform=\"translate(0 0)\"\n                      fill=\"#9499ae\"\n                    />\n                  </g>\n                </svg>\n              </a>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport swal from \"sweetalert2\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { setTimeout } from \"timers\";\nimport api_calls from \"@/portal/api_calls\";\nimport Multiselect from \"vue-multiselect\";\nimport moment from \"moment\";\nexport default {\n  components: {\n    Multiselect,\n  },\n  data() {\n    return {\n      show_superadmin_data: [],\n      add_superadmin_data: [],\n      intentlist: [],\n      source: \"Web\",\n      options: [],\n      checked_list: [],\n      intents: \"\",\n      page_no: 1,\n      per_page: 20,\n      total_pages: null,\n      number_of_rows: null,\n      response: \"\",\n      add_edit: \"false\",\n      file_label: \"Choose file\",\n      file_label2: \"Choose file\",\n      companyname: null,\n      companyid: null,\n      spinnerOn: false,\n      file_content: \"\",\n      file_content2: \"\",\n      image_response: \"No\",\n      video_response: \"No\",\n      file_type: \"\",\n      image_urls: [],\n      image_url: \"\",\n      name_file: \"\",\n      temp_file_name: \"\",\n      image_edit: false,\n      quill: \"\",\n      user_role: this.$session.get(\"UserInformation\").role,\n      video_link: \"\",\n      embd_link: \"\",\n      video_url: [],\n      search_name: \"\",\n      page_array: [],\n      spinnerOnFileDownload: false,\n      // select_list: ['Response','Intent','Sources'],\n      // search_by: '',\n    };\n  },\n  created() {\n    if (\n      !this.$session.has(\"CompanyId\") &&\n      this.$session.get(\"UserInformation\").role == \"SuperAdmin\"\n    ) {\n      toastr.warning(this.tlt('select_company_name_msg2'));\n    } else if (this.user_role == \"SuperAdmin\") {\n      if (this.$session.has(\"CompanyId\")) {\n        this.companyid = this.$session.get(\"CompanyId\");\n        this.companyname = this.$session.get(\"CompanyName\");\n      } else {\n        this.companyid = this.$session.get(\"UserInformation\").company_id;\n        this.companyname = this.$session.get(\"UserInformation\").company_name;\n      }\n    } else {\n      this.companyid = this.$session.get(\"UserInformation\").company_id;\n      this.companyname = this.$session.get(\"UserInformation\").company_name;\n    }\n    this.load_questions_response();\n    axios\n      .post(\n        api_calls.show_intent_url(),\n        {\n          company_name: this.companyname,\n          company_id: this.companyid,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          subscription: this.$session.get(\"UserInformation\").subscription,\n          showintent: \"True\",\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n      )\n      .then((response) => {\n        for (var i in response.data) {\n          this.intentlist.push(\n            response.data[i].replace(this.companyid + \"_\", \"\")\n          );\n        }\n        this.intents = this.intentlist[0];\n      })\n      .catch((e) => {\n        if (\n          e.response.status === 410 ||\n          e.response.status === 440 ||\n          e.response.status === 409\n        ) {\n          this.$root.$emit(\"Session_Expired\", e.response.data);\n        }\n      });\n  },\n  mounted() {\n    var vm = this;\n    $(\"#selectall\").click(function () {\n      if ($(this).is(\":checked\")) {\n        // $('div:input').prop('checked',true);\n        $(\"input:checkbox\").prop(\"checked\", true);\n      } else {\n        vm.checked_list = [];\n        $(\"input:checkbox\").prop(\"checked\", false);\n      }\n    });\n    $('[data-toggle=\"tooltip\"]').tooltip();\n    var vm = this;\n    $(\"#exampleModalCenter\").on(\"hidden.bs.modal\", function (e) {\n      vm.empty_variable();\n    });\n\n    this.quill = new Quill(\"#editor\", {\n      modules: {\n        toolbar: [\n          [{ header: [1, 2, false] }],\n          [{ font: [] }],\n          [\"bold\", \"italic\", \"underline\"],\n          [\"code-block\", \"link\"],\n          [{ align: [] }],\n          [{ color: [] }, { background: [] }],\n          [{ list: \"ordered\" }, { list: \"bullet\" }],\n        ],\n      },\n      theme: \"snow\",\n      placeholder: \"Response\",\n    });\n    this.quill.on(\"text-change\", () => {\n      this.$emit(\n        \"input\",\n        this.quill.getText() ? this.quill.root.innerHTML : \"\"\n      );\n      this.response = this.quill.getText() ? this.quill.root.innerHTML : \"\";\n    });\n    if(this.$route.params.modal_open_switch_tab){\n      $(\"#exampleModalCenter\").modal(\"show\");\n    }\n  },\n  methods: {\n    load_questions_response() {\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.load_question_response_url(),\n          {\n            role: this.user_role,\n            company_name: this.companyname,\n            email: this.$session.get(\"UserInformation\").email,\n            company_id: this.companyid,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            page_no: this.page_no,\n            per_page: this.per_page,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.spinnerOn = false;\n          this.total_pages = response.data.pagecount;\n          this.update_qns(response.data);\n          this.image_urls = response.data.show_intent_field.image_url;\n          this.video_urls = response.data.show_intent_field.video_url;\n          this.setpagination(this.page_no);\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      axios\n        .get(api_calls.source_list_url(), {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        })\n        .then((response) => {\n          this.options = response.data;\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    download_csv() {\n      axios\n        .post(\n          api_calls.question_response_csv(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          var a = window.document.createElement(\"a\");\n          a.href = response.data.CSV_URL;\n          a.download = true;\n          document.body.appendChild(a);\n          a.click();\n          document.body.removeChild(a);\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    embedded_change() {\n      var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n      var match = this.video_link.match(regExp);\n\n      if (match && match[2].length == 11) {\n        // console.log(match[2]);\n      } else {\n        return \"error\";\n      }\n      this.embd_link = \"https://www.youtube.com/embed/\" + match[2];\n      // console.log(this.embd_link);\n    },\n    download_sample_file() {\n      event.preventDefault();\n      this.spinnerOnFileDownload = true;\n      axios({\n        method: \"post\",\n        url: api_calls.file_download(),\n        responseType: \"blob\",\n        data: {\n          sample_file: \"True\",\n          company_id: this.$session.get(\"UserInformation\").company_id,\n          company_name: this.$session.get(\"UserInformation\").company_name,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          email: this.$session.get(\"UserInformation\").email,\n        },\n        headers: {\n          Authorization: `Bearer ${this.$session.get(\"at\")}`,\n        },\n      })\n        .then((response) => {\n          // swal(\n          //   \"Please don't edit the file name\",\n          //   \"You clicked the button!\",\n          //   \"error\"\n          // );\n          var url = window.URL.createObjectURL(new Blob([response.data]));\n          var link = document.createElement(\"a\");\n          link.href = url;\n          // console.log(this.companyname)\n          link.setAttribute(\"download\", this.companyname + \"IntentFile.csv\");\n          document.body.appendChild(link);\n          link.click();\n          $(\"#file_upload\").modal(\"hide\");\n          this.spinnerOnFileDownload = false;\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    fileinput() {\n      this.file_label = event.target.files[0].name;\n      var file_name = this.companyname + \"IntentFile.csv\";\n      if (this.file_label != file_name) {\n        Swal({\n          type: \"error\",\n          text:\n            \"Users need to download the Intent File from 'Upload CSV Files' pop-up. Changes to this file will be accepted by the system.\",\n          timer:3000,\n        });\n        this.file_label = \"Choose file\";\n      } else {\n        this.file_content = event.target.files[0];\n      }\n    },\n    fileinput2(event) {\n      let files = event.target.files[0];\n      this.file_label2 = event.target.files[0].name;\n      this.file_type = event.target.files[0].type;\n      // console.log(files)\n      // console.log(event.target.files[0])\n      if (this.file_label2 != this.temp_file_name) {\n        this.image_edit = true;\n      }\n      if (this.file_type == \"image/png\") {\n        this.createImage(files, this.file_type);\n      } else if (this.file_type == \"image/jpeg\") {\n        this.createImage(files, this.file_type);\n      } else {\n        Swal({\n          type: \"error\",\n          text: \"Users need to upload only jpeg/png files\",\n          timer:2500,\n        });\n        this.file_label2 = \"Choose file\";\n      }\n    },\n    createImage(file, type) {\n      let reader = new FileReader();\n      reader.onload = (e) => {\n        this.file_content2 = e.target.result.split(\"base64,\")[1];\n      };\n      reader.readAsDataURL(file);\n    },\n    file_submit() {\n      event.preventDefault();\n      var user_details = {\n        email: this.$session.get(\"UserInformation\").email,\n        token: this.$session.get(\"UserInformation\").tokens,\n        company_name: this.companyname,\n        company_id: this.companyid,\n        license_key: this.$session.get(\"UserInformation\").license_key,\n      };\n      var json = JSON.stringify(user_details);\n      var blob = new Blob([json], {\n        type: \"application/json\",\n      });\n      if (this.file_label == \"Choose file\") {\n      } else {\n        const fd = new FormData();\n        fd.append(\n          \"file\",\n          this.file_content,\n          this.companyname + \"IntentFile.csv\"\n        );\n        fd.append(\"json\", blob);\n        $(\"#file_upload\").modal(\"hide\");\n        this.spinnerOn = true;\n        axios\n          .post(api_calls.upload_file_url(), fd, {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          })\n          .then((response) => {\n            this.spinnerOn = false;\n            if (response.data == \"file uploaded successfully\") {\n              swal({\n                title: \"File uploaded successfully\",\n                type: \"success\",\n                timer:2000,\n              }).then((result) => {\n                if (result.value) {\n                  // $('#file_upload').modal('hide');\n                  // this.$router.go();\n                  this.load_questions_response();\n                }\n              });\n            } else {\n              swal({\n                title: \"Some Error Occurred\",\n                type: \"error\",\n                timer:2000,\n              }).then((result) => {\n                // $('#file_upload').modal('hide');\n                this.file_label = \"Choose file\";\n                document.getElementById(\"inputGroupFile01\").value = \"\";\n                this.load_questions_response();\n              });\n            }\n            // $(\"#file_upload\").modal(\"hide\");\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    selected_questions(index) {\n      // debugger;\n      if (index == \"all\") {\n        if (event.target.checked) {\n          this.checked_list = this.show_superadmin_data;\n        } else if (!event.target.checked) {\n          this.checked_list = [];\n        }\n      } else {\n        if (event.target.checked == true) {\n          let val_index = this.checked_list.indexOf(\n            this.show_superadmin_data[index]\n          );\n          var temp = this.show_superadmin_data[index];\n          if (val_index == -1) {\n            this.checked_list.push(temp);\n          }\n        } else if (event.target.checked == false) {\n          var selectall = document.querySelector(\"#selectall\");\n          if (selectall.checked == true) {\n            selectall.checked = false;\n          }\n          var temp = this.checked_list.filter((question) => {\n            return question.question !== index;\n          });\n          this.checked_list = temp;\n        }\n      }\n    },\n    delete_selected() {\n      // debugger;\n      if (this.checked_list.length == 0) {\n        Swal({\n          type: \"error\",\n          text: \"No response selected!!\",\n          timer:2000,\n        });\n      } else {\n        let questionlist = [],\n          responselist = [],\n          intentlist = [],\n          sourcelist = [];\n        for (var i in this.checked_list) {\n          questionlist.push(this.checked_list[i].question);\n          responselist.push(this.checked_list[i].response);\n          sourcelist.push(this.checked_list[i].source);\n          intentlist.push(this.companyid + \"_\" + this.checked_list[i].intent);\n        }\n        this.delete_qns_api(questionlist, responselist, sourcelist, intentlist);\n      }\n    },\n    delete_question(index) {\n      let questionlist = [],\n        responselist = [],\n        intentlist = [],\n        sourcelist = [];\n      questionlist.push(this.show_superadmin_data[index].question);\n      // console.log(this.show_superadmin_data[index].question);\n      responselist.push(this.show_superadmin_data[index].response);\n      sourcelist.push(this.show_superadmin_data[index].source);\n      intentlist.push(\n        this.companyid + \"_\" + this.show_superadmin_data[index].intent\n      );\n      this.delete_qns_api(questionlist, responselist, sourcelist, intentlist);\n    },\n    callsearch() {\n      if (event.keyCode === 13) {\n        this.search_intent();\n      }\n    },\n    search_intent() {\n      // if(this.search_by!=''){\n      if (this.search_name != \"\") {\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.add_response_intent_url(),\n            {\n              company_id: this.$session.get(\"UserInformation\").company_id,\n              company_name: this.$session.get(\"UserInformation\").company_name,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              email: this.$session.get(\"UserInformation\").email,\n              token: this.$session.get(\"UserInformation\").tokens,\n              issearch: true,\n              // searchby: this.search_by,\n              key: this.search_name,\n              per_page: this.per_page,\n              page_no: 1,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.spinnerOn = false;\n            if (response.data.pagecount != undefined) {\n              this.page_no = 1;\n              this.show_superadmin_data = [];\n              this.number_of_rows = response.data.ResponseList.length;\n              this.total_pages = response.data.pagecount;\n              for (let i = 0; i < response.data.ResponseList.length; i++) {\n                this.show_superadmin_data.push({\n                  response: response.data.ResponseList[i].Response,\n                  source: response.data.ResponseList[i].Source,\n                  intent: response.data.ResponseList[i].Intent.replace(\n                    this.companyid + \"_\",\n                    \"\"\n                  ),\n                  short: response.data.ResponseList[i].Response.slice(\n                    0,\n                    70\n                  ).replace(/(<([^>]+)>)/g, \"\"),\n                });\n              }\n              this.setpagination(this.page_no);\n            } else if (response.data.MSG == \"No Results Found\") {\n              toastr.error(\"No Response Found\");\n              // setTimeout(() => {\n              //   this.$router.go();\n              // }, 2500);\n              this.load_questions_response();\n            } else {\n              toastr.error(\"Internal Server Error\");\n              // setTimeout(() => {\n              //   this.$router.go();\n              // }, 2500);\n              this.load_questions_response();\n            }\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        toastr.error(\"Enter proper data for searching\");\n      }\n      // }else{\n      //   toastr.error(\"Select header for searching\");\n      // }\n    },\n    empty_variable() {\n      // event.preventDefault();\n      this.response = \"\";\n      // this.$emit(\n      //   \"input\",\n      //    \"\"\n      // );\n      this.quill.setText(\"\");\n      this.source = \"Web\";\n      this.intents = this.intentlist[0];\n      this.file_label = \"Choose file\";\n      this.image_url = \"\";\n      this.image_response = \"No\";\n      (this.video_link = \"\"), (this.embd_link = \"\");\n      this.file_label = \"Choose file\";\n      this.file_content = \"\";\n      document.getElementById(\"inputGroupFile01\").value = \"\";\n    },\n    train_conversation_model() {\n      Swal({\n        title: \"Are You Sure?\",\n        text: \"You want to Train The Model?\",\n        type: \"question\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, Confirm!\",\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n      }).then((result) => {\n        if (result.value) {\n          axios\n            .post(\n              api_calls.train_conversation_models(),\n              {\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                subscription: this.$session.get(\"UserInformation\").subscription,\n                company_details: {\n                  company_name: this.companyname,\n                  company_id: this.companyid,\n                },\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              if (response.data.MSG_CODE === 4046) {\n                toastr.success(response.data.MSG);\n              } else if (response.data.MSG_CODE === 1034) {\n                toastr.error(response.data.MSG);\n              } else {\n                toastr.error(\"Internal Server Error\");\n              }\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      });\n    },\n    notify_superadmin() {\n      event.preventDefault();\n      if (this.show_superadmin_data.length >= 10) {\n        axios\n          .post(\n            api_calls.notify_superadmin_url(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              token: this.$session.get(\"UserInformation\").tokens,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              subject: \"Notification to train the bot\",\n              body:\n                this.companyname +\n                \"has requested to train the model to improve intent accuracy\",\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            if (response.data.Msg == \"A mail has been sent to your email\") {\n              toastr.success(\"The Model has been marked to be trained.\");\n            }\n          })\n          .catch((e) => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        toastr.error(\"You must have minimum 10 questions to train your model\");\n      }\n    },\n    delete_qns_api(questionlist, responselist, sourcelist, intentlist) {\n      Swal.fire({\n        title: \"Are you sure?\",\n        text: \"You won't be able to revert this!\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, delete!!\",\n      }).then((result) => {\n        if (result.value) {\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.multiple_delete_url(),\n              {\n                questions_list: questionlist,\n                response_list: responselist,\n                company_name: this.companyname,\n                company_id: this.companyid,\n                source_list: sourcelist,\n                token: this.$session.get(\"UserInformation\").tokens,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                subscription: this.$session.get(\"UserInformation\").subscription,\n                email: this.$session.get(\"UserInformation\").email,\n                intent_list: intentlist,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              if (response.data == \"Query Executed Successfully\") {\n                this.checked_list = [];\n                Swal({\n                  title: \"Deleted!\",\n                  type: \"success\",\n                  text: \"Your response has been deleted.\",\n                  timer:2000,\n                });\n                this.spinnerOn = true;\n                setTimeout(() => {\n                  $(\"input:checkbox\").prop(\"checked\", false);\n                  // this.$router.go();\n                  this.load_questions_response();\n                }, 2500);\n              } else {\n                toastr.error(\"Questions not deleted!!\");\n              }\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      });\n    },\n    update_qns(message) {\n      this.show_superadmin_data = [];\n      this.number_of_rows =\n        message.show_intent_field.intent_questionlist.length;\n      // this.total_pages = Math.ceil(this.number_of_rows / this.per_page);\n      var questionlist, responselist, sourcelist;\n      var show_questionlist,\n        show_responselist,\n        show_sourcelist,\n        show_intentlist;\n      // show_imagelist;\n      // if (this.user_role == \"SuperAdmin\" || this.user_role == \"Admin\") {\n      show_questionlist = message.show_intent_field.intent_questionlist;\n      show_responselist = message.show_intent_field.intent_responselist;\n      show_sourcelist = message.show_intent_field.intent_sourcelist;\n      show_intentlist = message.show_intent_field.intent_intentlist;\n      // show_imagelist = message.show_intent_field.image_url;\n      for (var i in questionlist) {\n        this.add_superadmin_data.push({\n          question: questionlist[i],\n          response: responselist[i],\n          source: sourcelist[i],\n          intent: \"\",\n          // image:show_imagelist[i]\n        });\n      }\n      for (var i in show_questionlist) {\n        this.show_superadmin_data.push({\n          question: show_questionlist[i],\n          response: show_responselist[i],\n          source: show_sourcelist[i],\n          intent: show_intentlist[i].replace(this.companyid + \"_\", \"\"),\n          short: show_responselist[i].slice(0, 70).replace(/(<([^>]+)>)/g, \"\"),\n        });\n      }\n      // }\n    },\n    edit_question(index) {\n      this.quill.root.innerHTML = this.show_superadmin_data[index].response;\n      this.source = this.show_superadmin_data[index].source;\n      this.intents = this.show_superadmin_data[index].intent;\n      if (this.image_urls[index] != null) {\n        this.image_url = this.image_urls[index];\n        this.image_response = \"Yes\";\n        this.name_file = this.image_urls[index].split(\"/\");\n        this.temp_file_name = this.name_file[this.name_file.length - 1];\n        this.file_label2 = this.temp_file_name;\n      } else {\n        this.image_response = \"No\";\n      }\n      if (this.video_url[index] != undefined && this.video_url[index] != \"\") {\n        this.video_link = this.video_urls[index];\n        this.video_response = \"Yes\";\n      } else {\n        this.video_response = \"No\";\n      }\n      this.add_edit = \"false\";\n    },\n    add_edit_question() {\n      event.preventDefault();\n      var existing_intents = this.show_superadmin_data.filter((question) => {\n        return question.intent == this.intents;\n      });\n      if (this.add_edit == \"true\") {\n        if (this.response == \"\") {\n          toastr.warning(\"Please enter a valid response\");\n        } else if (this.user_options == true) {\n          toastr.warning(\"Please select a valid option\");\n        } else if (this.intents == true) {\n          toastr.warning(\"Please enter a valid intent\");\n        } else if (existing_intents.length > 0) {\n          toastr.warning(\n            \"This intent has been already added. Please try using another intent.\"\n          );\n        } else if (this.file_label2 == \"Choose file\") {\n          $(\"#exampleModalCenter\").modal(\"hide\");\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.add_response_intent_url(),\n              {\n                response: this.response,\n                source: this.source,\n                intent: this.companyid + \"_\" + this.intents,\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                subscription: this.$session.get(\"UserInformation\").subscription,\n                file_name: null,\n                file_data: null,\n                video_link: this.embd_link,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.response = \"\";\n              this.source = \"\";\n              this.intents = \"\";\n              var response_api = response.data;\n              if (response_api == \"Added Successfully\") {\n                swal({\n                  text:\n                    \"All your questions and responses have been added successfully!!\",\n                  type: \"success\",\n                  allowOutsideClick: false,\n                  allowEscapeKey: false,\n                  timer:2500,\n                }).then((response) => {\n                  if (response.value) {\n                    this.load_questions_response();\n                    // this.$router.go();\n                  }\n                });\n              } else if (response.data.Msg == \"Intent already exist\") {\n                swal({\n                  text:\n                    \"This Intent is already used, kindly use any other Intent\",\n                  type: \"error\",\n                  timer:2500,\n                });\n                setTimeout(() => {\n                  this.load_questions_response();\n                  // this.$router.go();\n                  this.empty_variable();\n                }, 1500);\n              }\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        } else {\n          $(\"#exampleModalCenter\").modal(\"hide\");\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.add_response_intent_url(),\n              {\n                response: this.response,\n                source: this.source,\n                intent: this.companyid + \"_\" + this.intents,\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                subscription: this.$session.get(\"UserInformation\").subscription,\n                file_name: this.file_label2,\n                file_data: this.file_content2,\n                video_link: this.embd_link,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              var response_api = response.data;\n              if (response_api == \"Added Successfully\") {\n                swal({\n                  text:\n                    \"All your questions and responses have been added successfully!!\",\n                  type: \"success\",\n                  timer:2000,\n                });\n                setTimeout(() => {\n                  this.load_questions_response();\n                  // this.$router.go();\n                }, 1500);\n              } else if (response_api == \"Duplicate image\") {\n                swal({\n                  text: \"Filename already exist kindly rename the file\",\n                  type: \"error\",\n                  timer:2500,\n                });\n                setTimeout(() => {\n                  this.load_questions_response();\n                  // this.$router.go();\n                }, 1500);\n              } else if (response.data.Msg == \"Intent already exist\") {\n                swal({\n                  text:\n                    \"This Intent is already used, kindly use any other Intent\",\n                  type: \"error\",\n                  timer:2500,\n                });\n                setTimeout(() => {\n                  this.load_questions_response();\n                  // this.$router.go();\n                }, 1500);\n              }\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n          this.response = \"\";\n          this.source = \"\";\n          this.intents = \"\";\n          this.file_label2 = \"Choose file\";\n          this.file_content2 = \"\";\n          this.video_link = \"\";\n        }\n      } else if (this.add_edit == \"false\") {\n        if (this.response == \"\") {\n          toastr.warning(\"Please enter a valid response\");\n        } else if (this.user_options == true) {\n          toastr.warning(\"Please select a valid option\");\n        } else if (this.intents == true) {\n          toastr.warning(\"Please enter a valid intent\");\n        } else {\n          $(\"#exampleModalCenter\").modal(\"hide\");\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.edit_question_url(),\n              {\n                isDelete: \"False\",\n                response: this.response,\n                source: this.source,\n                intent: this.companyid + \"_\" + this.intents,\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                subscription: this.$session.get(\"UserInformation\").subscription,\n                old_image_name: this.temp_file_name,\n                new_image_name: this.file_label2,\n                image_edit: this.image_edit,\n                image_blob: this.file_content2,\n                video_link: this.embd_link,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.spinnerOn = false;\n              if (response.data.Msg == \"Query Executed Successfully\") {\n                // toastr.success(\"Your Information Updated Successfully!!\");\n                swal({\n                  text: \"Your Information Updated Successfully!!\",\n                  type: \"success\",\n                  timer:2000,\n                });\n                setTimeout(() => {\n                  this.load_questions_response();\n                  // this.$router.go();\n                }, 1500);\n                // $(document).ready(function () {\n                //   $(\".modal-content\").css(\"display\", \"none\");\n                //   location.reload();\n                // });\n              } else if (response.data.Msg == \"Duplicate image\") {\n                swal({\n                  text: \"Filename already exist kindly rename the file\",\n                  type: \"error\",\n                  timer:2500,\n                });\n                setTimeout(() => {\n                  // this.$router.go();\n                  this.load_questions_response();\n                  $(\"#file_upload\").modal(\"hide\");\n                }, 1500);\n              } else {\n                toastr.error(\"Your Information has not been Updated!!\");\n              }\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      }\n    },\n    pagination_class(index) {\n      if (index == this.page_no) {\n        return \" active\";\n      } else {\n        return \"\";\n      }\n    },\n    setpagination(page_no) {\n      this.page_array = [];\n      if (this.total_pages <= 7) {\n        for (let i = 0; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no == 1) {\n        for (let i = 0; i < 4; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no == this.total_pages) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = this.total_pages - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no <= 4) {\n        for (let i = 0; i < page_no + 3; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no >= this.total_pages - 4) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 3; i <= page_no + 3; i++) {\n          this.page_array.push(i);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      }\n    },\n    page_require(page) {\n      if (page == 0 || page == this.total_pages + 1) {\n        event.preventDefault();\n      } else {\n        if (this.search_name == \"\") {\n          if (page == \"...s\") {\n            this.page_no = Math.ceil((1 + this.page_no) / 2);\n          } else if (page == \"...l\") {\n            this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n          } else {\n            this.page_no = page;\n          }\n          $(\"input:checkbox\").prop(\"checked\", false);\n          // this.page_no = page;\n          axios\n            .post(\n              api_calls.load_question_response_url(),\n              {\n                role: this.user_role,\n                company_name: this.companyname,\n                email: this.$session.get(\"UserInformation\").email,\n                company_id: this.companyid,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                page_no: this.page_no,\n                per_page: this.per_page,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.total_pages = response.data.pagecount;\n              this.update_qns(response.data);\n              this.image_urls = response.data.show_intent_field.image_url;\n              this.setpagination(this.page_no);\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        } else {\n          this.spinnerOn = true;\n          $(\"input:checkbox\").prop(\"checked\", false);\n          // this.page_no = page;\n          if (page == \"...s\") {\n            this.page_no = Math.ceil((1 + this.page_no) / 2);\n          } else if (page == \"...l\") {\n            this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n          } else {\n            this.page_no = page;\n          }\n          axios\n            .post(\n              api_calls.add_response_intent_url(),\n              {\n                company_id: this.$session.get(\"UserInformation\").company_id,\n                company_name: this.$session.get(\"UserInformation\").company_name,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                email: this.$session.get(\"UserInformation\").email,\n                token: this.$session.get(\"UserInformation\").tokens,\n                issearch: true,\n                // searchby: this.search_by,\n                key: this.search_name,\n                per_page: this.per_page,\n                page_no: this.page_no,\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                },\n              }\n            )\n            .then((response) => {\n              this.spinnerOn = false;\n              if (response.data.pagecount != undefined) {\n                this.show_superadmin_data = [];\n                this.number_of_rows = response.data.ResponseList.length;\n                this.total_pages = response.data.pagecount;\n                for (let i = 0; i < response.data.ResponseList.length; i++) {\n                  this.show_superadmin_data.push({\n                    response: response.data.ResponseList[i].Response,\n                    source: response.data.ResponseList[i].Source,\n                    intent: response.data.ResponseList[i].Intent.replace(\n                      this.companyid + \"_\",\n                      \"\"\n                    ),\n                    short: response.data.ResponseList[i].Response.slice(\n                      0,\n                      70\n                    ).replace(/(<([^>]+)>)/g, \"\"),\n                  });\n                }\n                this.setpagination(this.page_no);\n              } else {\n                toastr.error(\"Intrnal Server Error\");\n              }\n            })\n            .catch((e) => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      }\n    },\n  },\n};\n</script>\n<style src=\"vue-multiselect/dist/vue-multiselect.min.css\">\n.multiselect {\n  width: auto;\n}\n.multiselect__tags {\n  border: none;\n}\n</style>\n"]}]}