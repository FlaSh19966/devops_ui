{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Layout/TopNavbar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Layout/TopNavbar.vue","mtime":1655807120961},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGJ1cyB9IGZyb20gIkAvcG9ydGFsL21haW4iOwppbXBvcnQgQ291bnRyaWVzIGZyb20gIkAvcG9ydGFsL2NvbXBvbmVudHMvQ291bnRyaWVzIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgZmluZ2VycHJpbnQgZnJvbSAiQC9wb3J0YWwvY29tcG9uZW50cy9maW5nZXJwcmludCI7CmltcG9ydCB7IHNldFRpbWVvdXQgfSBmcm9tICJ0aW1lcnMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IHsgc3RyaW5nVHlwZUFubm90YXRpb24gfSBmcm9tICJAYmFiZWwvdHlwZXMiOwppbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICJxdWVyeXN0cmluZyI7CmltcG9ydCB7IFNvY2tldCB9IGZyb20gInBob2VuaXgtc29ja2V0IjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBWdWVQaG9uZU51bWJlcklucHV0IGZyb20gJ3Z1ZS1waG9uZS1udW1iZXItaW5wdXQnOwppbXBvcnQgJ3Z1ZS1waG9uZS1udW1iZXItaW5wdXQvZGlzdC92dWUtcGhvbmUtbnVtYmVyLWlucHV0LmNzcyc7CmltcG9ydCBQYXNzd29yZFZhbGlkYXRvciBmcm9tICIuLi9QYWdlcy9QYXNzd29yZFZhbGlkYXRvci52dWUiOwppbXBvcnQgcGFnZV9ndWlkZSBmcm9tICJAL3BvcnRhbC9taXhpbnMvcGFnZV9ndWlkZS5qcyI7CmltcG9ydCBwYXRoIGZyb20gInBhdGgiOwoKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW3BhZ2VfZ3VpZGVdLAogIHByb3BzOiBbInRpdGxlIl0sCiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3QsCiAgICBWdWVQaG9uZU51bWJlcklucHV0LAogICAgUGFzc3dvcmRWYWxpZGF0b3IKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnRlbnRfZGF0YTogbnVsbCwKICAgICAgY2FsbGRhdGE6ICIiLAogICAgICBuZXdfcGFzc3dvcmQ6ICIiLAogICAgICBvbGRfcGFzc3dvcmQ6ICIiLAogICAgICBjb25maXJtX3Bhc3N3b3JkOiAiIiwKICAgICAgY29ycmVjdF9wYXNzd29yZDogZmFsc2UsCiAgICAgIGNvbXBhbnlfbmFtZTogbnVsbCwKICAgICAgY29tcGFueV9pZF9zZWxlY3RlZDogbnVsbCwKICAgICAgY29tcGFuaWVzOiBbXSwKICAgICAgY291bnRyeV9saXN0OiBudWxsLAogICAgICBjb21wYW55X2lkOiBbXSwKICAgICAgdXNlcl9jb21wYW55OiBudWxsLAogICAgICB0aWNrZXRzX2Jhcl9hY2Nlc3M6IGZhbHNlLAogICAgICBpbnZpdGVfY29tcGFueV9lbWFpbDogbnVsbCwKICAgICAgaW52aXRlX2NvbXBhbnlfbmFtZTogbnVsbCwKICAgICAgb2xkX2ZpbGVfbmFtZTogbnVsbCwKICAgICAgZmlsZV9sYWJlbDogIkNob29zZSBmaWxlIiwKICAgICAgaXNzdWU6ICIiLAogICAgICBpc3N1ZV9kZXNjcmlwdGlvbjogIiIsCiAgICAgIGltZ19maWxlOiAiIiwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgcGhvdG9faW1nX3VybDogIiIsCiAgICAgIGV4aXN0aW5nX2ZpbGVfbmFtZTogbnVsbCwKICAgICAgdXNlcl9jb3VudHJ5X25hbWU6IHsKICAgICAgICBjb2RlOiAiIiwKICAgICAgICBuYW1lOiAiIgogICAgICB9LAogICAgICB1c2VyX3Bob25lX251bWJlcjogdGhpcy4kc2Vzc2lvbi5oYXMoIlBob25lTnVtYmVyIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJQaG9uZU51bWJlciIpCiAgICAgICAgOiB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5waG9uZV9ubwogICAgICAgIDogIiIsCiAgICAgIHVzZXJfZmlyc3RfbmFtZTogdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJGaXJzdE5hbWUiKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJGaXJzdE5hbWUiKQogICAgICAgIDogdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZmlyc3RfbmFtZQogICAgICAgIDogIiIsCiAgICAgIHVzZXJfbGFzdF9uYW1lOiB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckxhc3ROYW1lIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VyTGFzdE5hbWUiKQogICAgICAgIDogdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGFzdF9uYW1lCiAgICAgICAgOiAiIiwKICAgICAgY29tcGFueV9zZWxlY3RlZDogdGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlOYW1lIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpCiAgICAgICAgOiAiU2VsZWN0IEEgQ29tcGFueSIsCiAgICAgIHVzZXJfY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUKICAgICAgICA6ICIiLAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwKICAgICAgICA6ICIiLAogICAgICB1c2VyX2NvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQKICAgICAgICA6ICIiLAogICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUKICAgICAgICA6ICIiLAogICAgICB1c2VyX3R5cGU6IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJlZ2lzdHJhdGlvbl90eXBlCiAgICAgICAgOiAiIiwKICAgICAgcGhvbmVfbnVtYmVyX3ZhbGlkaXR5OiAvXCtbMC05XXs5LDE0fSQvLAogICAgICByZWdfcHdkOiAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxkKSg/PS4qWyNAJCElKj8mXSlbQS1aYS16XGQjQCQhJSo/Jl17OCx9LywKICAgICAgcmVnX2VtYWlsOiAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICBub3RpZmljYXRpb25zOiBbXSwKICAgICAgdG9fc2hvd19ub3RpZmljYXRpb25zOiBmYWxzZSwKICAgICAgc29ja2V0OiBudWxsLAogICAgICBzY2hlZHVsZXJfY2hhbm5lbDogbnVsbCwKICAgICAgdHJhaW5pbmdfY2hhbm5lbDogbnVsbCwKICAgICAgcGhvbmVOdW1iZXI6IG51bGwsCiAgICAgIHRvdXJfZ3VpZGVfaWNvbjogcmVxdWlyZSgiQC9wb3J0YWwvYXNzZXRzL2ltZy9pbmZvX2ljb24uc3ZnIiksCiAgICAgIGRpc2FibGVfbmF2YmFyOmZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZhbGlkT2xkUGFzc3dvcmQoKSB7CiAgICAgIGlmICh0aGlzLnJlZ19wd2QudGVzdCh0aGlzLm9sZF9wYXNzd29yZCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIlBhc3N3b3JkIG11c3QgY29udGFpbiBtaW5pbXVtIDggY2hhcmFjdGVycywgYXRsZWFzdCAxIFVwcGVyQ2FzZSBBbHBoYWJldCwgMSBMb3dlckNhc2UgQWxwaGFiZXQsIDEgTnVtYmVyIGFuZCAxIFNwZWNpYWwgQ2hhcmFjdGVyIjsKICAgICAgfQogICAgfSwKICAgIHZhbGlkUGFzc3dvcmQoKSB7CiAgICAgIGlmICh0aGlzLnJlZ19wd2QudGVzdCh0aGlzLm5ld19wYXNzd29yZCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIlBhc3N3b3JkIG11c3QgY29udGFpbiBtaW5pbXVtIDggY2hhcmFjdGVycywgYXRsZWFzdCAxIFVwcGVyQ2FzZSBBbHBoYWJldCwgMSBMb3dlckNhc2UgQWxwaGFiZXQsIDEgTnVtYmVyIGFuZCAxIFNwZWNpYWwgQ2hhcmFjdGVyIjsKICAgICAgfQogICAgfSwKICAgIHZhbGlkQ29uZmlybVBhc3N3b3JkKCkgewogICAgICBpZiAodGhpcy5jb25maXJtX3Bhc3N3b3JkID09IHRoaXMubmV3X3Bhc3N3b3JkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJQYXNzd29yZHMgZG8gbm90IG1hdGNoIjsKICAgICAgfQogICAgfSwKICAgIC8vIHZhbGlkUGhvbmVOdW1iZXIoKSB7CiAgICAvLyAgIGlmICgKICAgIC8vICAgICB0aGlzLnBob25lX251bWJlcl92YWxpZGl0eS50ZXN0KAogICAgLy8gICAgICAgdGhpcy51c2VyX3Bob25lX251bWJlci5yZXBsYWNlKC9ccysvZywgIiIpCiAgICAvLyAgICAgKQogICAgLy8gICApIHsKICAgIC8vICAgICByZXR1cm4gdHJ1ZTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICByZXR1cm4gIlBsZWFzZSBlbnRlciBhIHZhbGlkIHBob25lIG51bWJlciBpbiB0aGUgZm9ybWF0OiArQ291bnRyeUNvZGUgTnVtYmVyIjsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIHVuc2Vlbl9ub3RpZmljYXRpb25zKCkgewogICAgICBsZXQgY291bnQgPSAwOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubm90aWZpY2F0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICghdGhpcy5ub3RpZmljYXRpb25zW2ldLmlzX2NsZWFyKSB7CiAgICAgICAgICBjb3VudCsrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gY291bnQ7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jb3VudHJ5X2xpc3QgPSBDb3VudHJpZXM7CiAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoInBob3RvX2ltZ191cmwiKSkgewogICAgICB0aGlzLnBob3RvX2ltZ191cmwgPSB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJwaG90b19pbWdfdXJsIikKICAgICAgICA6ICIiOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5waG90b19pbWdfdXJsID0gdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucGhvdG9faW1nX3VybAogICAgICAgIDogIiI7CiAgICB9CiAgICBpZiAoCiAgICAgIHRoaXMuJHNlc3Npb24uaGFzKCJjb3VudHJ5X25hbWUiKSAmJgogICAgICB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikKICAgICkgewogICAgICB0aGlzLnVzZXJfY291bnRyeV9uYW1lLmNvZGUgPSB0aGlzLiRzZXNzaW9uLmdldCgiY291bnRyeV9uYW1lIik7CiAgICAgIGxldCBzZWxlY3RfY291bnRyeSA9IHRoaXMuY291bnRyeV9saXN0LmZpbHRlcihjb3VudHJ5ID0+IHsKICAgICAgICByZXR1cm4gY291bnRyeS5jb2RlID09IHRoaXMudXNlcl9jb3VudHJ5X25hbWUuY29kZTsKICAgICAgfSk7CiAgICAgIHRoaXMudXNlcl9jb3VudHJ5X25hbWUubmFtZSA9IHNlbGVjdF9jb3VudHJ5WzBdLm5hbWU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnVzZXJfY291bnRyeV9uYW1lLmNvZGUgPSB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb3VudHJ5X25hbWUKICAgICAgICA6ICIiOwogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvdW50cnlfbmFtZSA9PSBudWxsKSB7CiAgICAgICAgdGhpcy51c2VyX2NvdW50cnlfbmFtZS5jb2RlID0gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMudXNlcl9jb3VudHJ5X25hbWUuY29kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IHNlbGVjdF9jb3VudHJ5ID0gdGhpcy5jb3VudHJ5X2xpc3QuZmlsdGVyKGNvdW50cnkgPT4gewogICAgICAgICAgcmV0dXJuIGNvdW50cnkuY29kZSA9PSB0aGlzLnVzZXJfY291bnRyeV9uYW1lLmNvZGU7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy51c2VyX2NvdW50cnlfbmFtZS5uYW1lID0gc2VsZWN0X2NvdW50cnlbMF0gPT09IHVuZGVmaW5lZCA/ICcnOnNlbGVjdF9jb3VudHJ5WzBdLm5hbWU7CiAgICAgIH0KICAgIH0KICAgIGlmICh0aGlzLnVzZXJfcm9sZSA9PSAiQWRtaW4iKSB7CiAgICAgIHRoaXMuY29tcGFueV9zZWxlY3RlZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZQogICAgICAgIDogIiI7CiAgICB9CiAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuY29tcGFueV9saXN0X3VybCgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuY29tcGFuaWVzID0gcmVzcG9uc2UuZGF0YVswXTsKICAgICAgICAgIHRoaXMuY29tcGFueV9pZCA9IHJlc3BvbnNlLmRhdGFbMV07CiAgICAgICAgfSk7CiAgICB9CiAgICBpZiAodGhpcy51c2VyX2ZpcnN0X25hbWUgPT0gbnVsbCB8fCB0aGlzLnVzZXJfZmlyc3RfbmFtZSA9PSAiIikgewogICAgICB0aGlzLnVzZXJfZmlyc3RfbmFtZSA9ICJGaXJzdCI7CiAgICAgIHRoaXMudXNlcl9sYXN0X25hbWUgPSAiTGFzdCI7CiAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJVc2VyRmlyc3ROYW1lIiwgdGhpcy51c2VyX2ZpcnN0X25hbWUpOwogICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckxhc3ROYW1lIiwgdGhpcy51c2VyX2xhc3RfbmFtZSk7CiAgICB9CiAgICB2YXIgbWVudXMgPSB0aGlzLiRzZXNzaW9uLmhhcygiQ2hhdGJvdE1lbnUiKQogICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpCiAgICAgIDogW107CiAgICB2YXIgdGlja2V0X2FjY2VzcyA9IG1lbnVzLmZpbHRlcihtZW51ID0+IHsKICAgICAgcmV0dXJuIG1lbnUubWFpbl9tZW51Lm5hbWUgPT0gIlRpY2tldHMiOwogICAgfSk7CiAgICBpZiAodGlja2V0X2FjY2Vzcy5sZW5ndGggPT0gMCkgewogICAgICB0aGlzLnRpY2tldHNfYmFyX2FjY2VzcyA9IGZhbHNlOwogICAgfSBlbHNlIGlmICh0aWNrZXRfYWNjZXNzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHRoaXMudGlja2V0c19iYXJfYWNjZXNzID0gdHJ1ZTsKICAgIH0KCiAgICB2YXIgbm90aWZpY2F0aW9uc19hY2Nlc3MgPSBmYWxzZTsKCiAgICBmb3IgKHZhciBpID0gMCwgbiA9IG1lbnVzLmxlbmd0aDsgaSA8IG47IGkgKz0gMSkgewogICAgICBmb3IgKGxldCBqID0gMCwgbCA9IG1lbnVzW2ldLnN1Yl9tZW51X2xpc3QubGVuZ3RoOyBqIDwgbDsgaiArPSAxKSB7CiAgICAgICAgaWYgKG1lbnVzW2ldLnN1Yl9tZW51X2xpc3Rbal0ubmFtZSA9PSAiU2NoZWR1bGVyIikgewogICAgICAgICAgbm90aWZpY2F0aW9uc19hY2Nlc3MgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB0aGlzLnNvY2tldCA9IG5ldyBTb2NrZXQoCiAgICAgIHByb2Nlc3MuZW52LlZVRV9BUFBfUFVTSF9OT1RJRklDQVRJT05TX1dFQlNPQ0tFVF9FTkRQT0lOVCwKICAgICAgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgbm90aWZpY2F0aW9uX3Rlc3Q6IHRydWUKICAgICAgICB9CiAgICAgIH0KICAgICk7CiAgICB0aGlzLnNvY2tldC5jb25uZWN0KCk7CiAgICBpZiAoQm9vbGVhbihub3RpZmljYXRpb25zX2FjY2VzcykpIHsKICAgICAgdGhpcy50b19zaG93X25vdGlmaWNhdGlvbnMgPSB0cnVlOwogICAgICAvL05vdGlmaWNhdGlvbgogICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsID0gdGhpcy5zb2NrZXQuY2hhbm5lbCgKICAgICAgICAibm90aWZpY2F0aW9uX2NoYW5uZWw6IiArIHRoaXMudXNlcl9jb21wYW55X2lkCiAgICAgICk7CiAgICAgIHRoaXMuc2NoZWR1bGVyX2NoYW5uZWwuam9pbigpOwogICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLm9uKCJzaG93X25vdGlmaWNhdGlvbnMiLCByZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmlzX3Jlc3BvbnNlKSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHJlc3BvbnNlLmRhdGEubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKHJlc3BvbnNlLmRhdGFbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLm9mZigic2hvd19ub3RpZmljYXRpb25zIik7CiAgICAgIH0pOwogICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLm9uKCJuZXdfbm90aWZpY2F0aW9uIiwgcmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuc2hvd19ub3RpZmljYXRpb25zKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy51bnNoaWZ0KHJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgICAgdGhpcy5zY2hlZHVsZXJfY2hhbm5lbC5wdXNoKCJzaG93X25vdGlmaWNhdGlvbnMiLCB7CiAgICAgICAgbmVlZF9ub3RpZmljYXRpb25zOiB0cnVlLAogICAgICAgIGVtYWlsX2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwKICAgICAgfSk7CiAgICB9CiAgICB0aGlzLnRyYWluaW5nX2NoYW5uZWwgPSB0aGlzLnNvY2tldC5jaGFubmVsKAogICAgICAidHJhaW5pbmdfbm90aWZpY2F0aW9uX2NoYW5uZWw6IiArIHRoaXMudXNlcl9jb21wYW55X2lkCiAgICApOwogICAgdGhpcy50cmFpbmluZ19jaGFubmVsLmpvaW4oKTsKICAgIHRoaXMudHJhaW5pbmdfY2hhbm5lbC5vbigic2hvd19ub3RpZmljYXRpb25zIiwgcmVzcG9uc2UgPT4gewogICAgICBpZiAocmVzcG9uc2UuaXNfcmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSByZXNwb25zZS5kYXRhLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnB1c2goewogICAgICAgICAgICBkYXRlOiBtb21lbnQocmVzcG9uc2UuZGF0YVtpXS5Jbml0aWF0ZWRPbiwgWyJZWVlZLU1NLUREIl0pLmZvcm1hdCgKICAgICAgICAgICAgICAiRG8gTU1NIFlZWVkiCiAgICAgICAgICAgICksCiAgICAgICAgICAgIC4uLnJlc3BvbnNlLmRhdGFbaV0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnRyYWluaW5nX2NoYW5uZWwub2ZmKCJzaG93X25vdGlmaWNhdGlvbnMiKTsKICAgIH0pOwogICAgdGhpcy50cmFpbmluZ19jaGFubmVsLm9uKCJuZXdfbm90aWZpY2F0aW9uIiwgcmVzcG9uc2UgPT4gewogICAgICB0aGlzLnNob3dfbm90aWZpY2F0aW9ucyhyZXNwb25zZS5kYXRhKTsKICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnVuc2hpZnQoewogICAgICAgIGRhdGU6IG1vbWVudChyZXNwb25zZS5kYXRhLkluaXRpYXRlZE9uLCBbIllZWVktTU0tREQiXSkuZm9ybWF0KAogICAgICAgICAgIkRvIE1NTSBZWVlZIgogICAgICAgICksCiAgICAgICAgLi4ucmVzcG9uc2UuZGF0YQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy50cmFpbmluZ19jaGFubmVsLnB1c2goInNob3dfbm90aWZpY2F0aW9ucyIsIHsKICAgICAgbmVlZF9ub3RpZmljYXRpb25zOiB0cnVlLAogICAgICBlbWFpbF9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsCiAgICB9KTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBidXMuJG9uKCJMYXlvdXRIZWxwRGF0YSIsIGRhdGFQZyA9PiB7CiAgICAgIHRoaXMuY2FsbGRhdGEgPSBkYXRhUGc7CiAgICB9KTsKICAgIC8vIGJ1cy4kb24oJ1RhYnNMYXlvdXRJbmZvJywoZGF0YUZvcnRhYnMpID0+IHsKICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YUZvcnRhYnMsImRhdGEgb2YgdGFiIHBhbmUiKTsKICAgIC8vICAgICAgICAgdGhpcy5jYWxsZGF0YSA9IGRhdGFGb3J0YWJzOwogICAgLy8gfSkKICAgIGJ1cy4kb24oInNlbmQgY29tcGFueSBhdHRyaWJ1dGVzIiwgKCkgPT4gewogICAgICBidXMuJGVtaXQoCiAgICAgICAgImNvbXBhbnkgbmFtZSBhbmQgY29tcGFueSBpZCIsCiAgICAgICAgdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgdGhpcy5jb21wYW55X2lkX3NlbGVjdGVkCiAgICAgICk7CiAgICB9KTsKCiAgICB0aGlzLiRyb290LiRvbigic2lnbl9vdXQiLCAoKSA9PiB7CiAgICAgIHRoaXMuc2lnbm91dF9hcGkoKTsKICAgIH0pOwogICAgJCgiLmRyb3Bkb3duLXRvZ2dsZSIpLmRyb3Bkb3duKCk7CiAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlNldHRpbmdUb3BuYXZiYXJEaXNhYmxlIikgPT0gdHJ1ZSkgewogICAgICB0aGlzLmRpc2FibGVfbmF2YmFyID0gdHJ1ZTsKICAgIH0KICAgIHRoaXMuJHJvb3QuJG9uKCJEYXNoYm9hcmRTaWRlYmFyRGlzYWJsZSIsIChkYXRhKSA9PiB7CiAgICAgIGlmKGRhdGE9PT10cnVlKXsKICAgICAgICB0aGlzLmRpc2FibGVfbmF2YmFyID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsaXN0ZW5fZGF0YSgpIHsKICAgICAgdGhpcy5jYWxsZGF0YSA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICAgIC8vdGhpcy5jb21wX25hbWUgPSB0aGlzLiRyb3V0ZS5uYW1lOwogICAgICAvLyBFbWl0dGluZyBhIGN1c3RvbS1ldmVudCB2aWEgdGhlIEV2ZW50IEJ1cwogICAgICBidXMuJGVtaXQoIkVtaXR0aW5nX2RhdGEiLCB0aGlzLmNhbGxkYXRhKTsKICAgIH0sCiAgICBjaGVja19wYXNzd29yZChjb3JyZWN0UGFzc3dvcmQpIHsKICAgICAgdGhpcy5jb3JyZWN0X3Bhc3N3b3JkID0gY29ycmVjdFBhc3N3b3JkOwogICAgfSwKICAgIGVkaXRJbWFnZShlKSB7CiAgICAgIGNvbnN0IGltYWdlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTsKICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgIHRoaXMucHJldmlld0ltYWdlID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgIGlmICh0aGlzLnBob3RvX2ltZ191cmwpIHsKICAgICAgICAgIHRoaXMuZXhpc3RpbmdfZmlsZV9uYW1lID0gdGhpcy5waG90b19pbWdfdXJsLnNwbGl0KCIvIilbNF07CiAgICAgICAgfQogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5lZGl0X3Byb2ZpbGVfdXJsKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICB1cGxvYWRfcGhvdG86ICJUcnVlIiwKICAgICAgICAgICAgICBwcm9maWxlX2ltYWdlOiB0aGlzLnByZXZpZXdJbWFnZS5zcGxpdCgiYmFzZTY0LCIpWzFdLAogICAgICAgICAgICAgIGZpbGVfbmFtZTogaW1hZ2UubmFtZSwKICAgICAgICAgICAgICBleGlzdGluZ19maWxlX25hbWU6IHRoaXMuZXhpc3RpbmdfZmlsZV9uYW1lCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5Nc2cgPT0gIlBob3RvIFVwbG9hZGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciBwaG90byBoYXMgYmVlbiB1cGxvYWRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicGhvdG9faW1nX3VybCIsIHJlc3BvbnNlLmRhdGEuSW1hZ2VVcmwpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEgPT0gIkR1cGxpY2F0ZSBpbWFnZSIpIHsKICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygKICAgICAgICAgICAgICAgICJUaGlzIGZpbGUgbmFtZSBhbHJlYWR5IGV4aXN0cy5QbGVhc2UgcmVuYW1lIHRoZSBmaWxlIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJFcnJvciBvY2N1cmVkIHdoaWxlIHVwbG9hZGluZyBmaWxlIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9OwogICAgfSwKICAgIGNyZWF0ZUltYWdlKGZpbGUsIHR5cGUpIHsKICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHsKICAgICAgICB0aGlzLmJsb2cuaW1nX2ZpbGUgPSBlLnRhcmdldC5yZXN1bHQuc3BsaXQoImJhc2U2NCwiKVsxXTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9LAogICAgcmFpc2VfdGlja2V0KCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PSAiVGlja2V0cyIpIHsKICAgICAgICAkKCIjdGlja2V0bW9kYWwiKS5tb2RhbCgic2hvdyIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJUaWNrZXRzIiwKICAgICAgICAgIHByb3BzOiB0cnVlLAogICAgICAgICAgcGFyYW1zOiB7IHJhaXNlX3RpY2tldDogIlRydWUiIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNsZWFyX2ZpZWxkcygpIHsKICAgICAgdGhpcy5pbWdfZmlsZSA9ICIiOwogICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICB0aGlzLmlzc3VlID0gIiI7CiAgICAgIHRoaXMuaXNzdWVfZGVzY3JpcHRpb24gPSAiIjsKICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIH0sCiAgICBlbWFpbF9jbGFzcygpIHsKICAgICAgaWYgKHRoaXMucmVnX2VtYWlsLnRlc3QodGhpcy5pbnZpdGVfY29tcGFueV9lbWFpbCkpIHsKICAgICAgICByZXR1cm4gImlzLXZhbGlkIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gImlzLWludmFsaWQiOwogICAgICB9CiAgICB9LAogICAgZWRpdF9wcm9maWxlX2FwaSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKCFCb29sZWFuKHRoaXMucGhvbmVOdW1iZXIpKSB7CiAgICAgICAgdG9hc3RyLndhcm5pbmcoIlBsZWFzZSBlbnRlciBhIHZhbGlkIFBob25lIE51bWJlciIpOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICh0aGlzLnBob25lTnVtYmVyLmlzVmFsaWQgIT0gdHJ1ZSkgewogICAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBQaG9uZSBOdW1iZXIiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMudXNlcl9jb3VudHJ5X25hbWUuY29kZSAhPSBudWxsICYmCiAgICAgICAgdGhpcy51c2VyX2ZpcnN0X25hbWUgIT0gIiIgJiYKICAgICAgICB0aGlzLnVzZXJfZmlyc3RfbmFtZSAhPSAiRiIgJiYKICAgICAgICB0aGlzLnVzZXJfbGFzdF9uYW1lICE9ICIiICYmCiAgICAgICAgdGhpcy51c2VyX2xhc3RfbmFtZSAhPSAiTCIKICAgICAgICAvL3RoaXMudmFsaWRQaG9uZU51bWJlciA9PT0gdHJ1ZQogICAgICApIHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMuZWRpdF9wcm9maWxlX3VybCgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBmaXJzdF9uYW1lOiB0aGlzLnVzZXJfZmlyc3RfbmFtZSwKICAgICAgICAgICAgICBsYXN0X25hbWU6IHRoaXMudXNlcl9sYXN0X25hbWUsCiAgICAgICAgICAgICAgY291bnRyeV9uYW1lOiB0aGlzLnVzZXJfY291bnRyeV9uYW1lLmNvZGUsCiAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiB0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlciwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJQcm9maWxlIFVwZGF0ZWQiKSB7CiAgICAgICAgICAgICAgLy8gU3dhbCh7CiAgICAgICAgICAgICAgLy8gICAgIHRpdGxlOiAiVXBkYXRlZCBTdWNjZXNzZnVsbHkhISIsCiAgICAgICAgICAgICAgLy8gICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAvLyAgICAgdGV4dDogIllvdXIgcHJvZmlsZSBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4iLAogICAgICAgICAgICAgIC8vICAgICB0aW1lcjoyMDAwLAogICAgICAgICAgICAgIC8vICAgfSk7CiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIllvdXIgcHJvZmlsZSBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4iKTsKICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckZpcnN0TmFtZSIsIHRoaXMudXNlcl9maXJzdF9uYW1lKTsKICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckxhc3ROYW1lIiwgdGhpcy51c2VyX2xhc3RfbmFtZSk7CiAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoImNvdW50cnlfbmFtZSIsIHRoaXMudXNlcl9jb3VudHJ5X25hbWUuY29kZSk7CiAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlBob25lTnVtYmVyIiwgdGhpcy5waG9uZU51bWJlci5mb3JtYXR0ZWROdW1iZXIpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJCgiI2VkaXRfcHJvZmlsZV9tb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBlbnRlciBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcyIpOwogICAgICB9CiAgICB9LAogICAgY29tcGFueV9jaGFuZ2VkKGNvbXBhbnkpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKGNvbXBhbnkgIT0gdGhpcy5jb21wYW55X3NlbGVjdGVkKSB7CiAgICAgICAgdGhpcy5jb21wYW55X3NlbGVjdGVkID0gY29tcGFueTsKICAgICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlOYW1lIikpIHsKICAgICAgICAgIHRoaXMuJHNlc3Npb24ucmVtb3ZlKCJDb21wYW55TmFtZSIpOwogICAgICAgIH0KICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiQ29tcGFueU5hbWUiLCB0aGlzLmNvbXBhbnlfc2VsZWN0ZWQpOwogICAgICAgIGlmICh0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikpIHsKICAgICAgICAgIHRoaXMuJHNlc3Npb24ucmVtb3ZlKCJDb21wYW55SWQiKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoCiAgICAgICAgICAiQ29tcGFueUlkIiwKICAgICAgICAgIHRoaXMuY29tcGFueV9pZFt0aGlzLmNvbXBhbmllcy5pbmRleE9mKHRoaXMuY29tcGFueV9zZWxlY3RlZCldCiAgICAgICAgKTsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgfSBlbHNlIHsKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdF9uZXdfcGFzc3dvcmQoKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGlmICgKICAgICAgICB0aGlzLm9sZF9wYXNzd29yZCAhPSAiIiAmJgogICAgICAgIHRoaXMuY29ycmVjdF9wYXNzd29yZCA9PSB0cnVlICYmCiAgICAgICAgdGhpcy52YWxpZENvbmZpcm1QYXNzd29yZCA9PSB0cnVlCiAgICAgICkgewogICAgICAgIFN3YWwoewogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICB0ZXh0OiAiUGxlYXNlIHdhaXQgd2hpbGUgd2Ugc3VibWl0IHlvdXIgZGV0YWlscyIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0eXBlOiAiaW5mbyIKICAgICAgICB9KTsKICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMubmV3X3Bhc3N3b3JkX3VybCgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIG9sZF9wYXNzd29yZDogdGhpcy5vbGRfcGFzc3dvcmQsCiAgICAgICAgICAgICAgbmV3X3Bhc3N3b3JkOiB0aGlzLm5ld19wYXNzd29yZCwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgZGF0ZTogZGF0ZQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlBhc3N3b3JkIEluY29ycmVjdCIpIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdXIgb2xkIHBhc3N3b3JkIGlzIGluY29ycmVjdCIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlBhc3N3b3JkIFJlc2V0IikgewogICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKAogICAgICAgICAgICAgICAgIllvdXIgcGFzc3dvcmQgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkuIE5vdyB5b3UgY2FuIGxvZ2luIHdpdGggdGhlIG5ldyBwYXNzd29yZCIKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICQoIiNjaGFuZ2VfcGFzc3dvcmRfbW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PT0gIlBhc3N3b3JkIElzIFNpbWlsYXIiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICAiWW91IGNhbm5vdCBzZXQgYSBwYXNzd29yZCB3aGljaCB3YXMgb25lIG9mIHlvdXIgb2xkIHBhc3N3b3Jkcy4gUGxlYXNlIFRyeSBBZ2FpbiIsCiAgICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09PSAiT0xEIFBBU1NXT1JEIERPRVNOJ1QgTUFUQ0giKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiWW91ciBvbGQgcGFzc3dvcmQgZG9lcyBub3QgbWF0Y2hlZC4gUGxlYXNlIFRyeSBBZ2FpbiIsCiAgICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogIlNvbWUgRXJyb3IgT2NjdXJyZWQuIFBsZWFzZSBUcnkgQWdhaW4iLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLm9sZF9wYXNzd29yZCA9ICIiOwogICAgICAgICAgICB0aGlzLm5ld19wYXNzd29yZCA9ICIiOwogICAgICAgICAgICB0aGlzLmNvbmZpcm1fcGFzc3dvcmQgPSAiIjsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIEVudGVyIGFsbCByZXF1aXJlZCBmaWVsZHMiKTsKICAgICAgfQogICAgfSwKICAgIHBhc3N3b3JkX3RvZ2dsZShpZCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICAgIGlmIChwYXNzd29yZC50eXBlID09ICJ0ZXh0IikgewogICAgICAgIHBhc3N3b3JkLnR5cGUgPSAicGFzc3dvcmQiOwogICAgICB9IGVsc2UgaWYgKHBhc3N3b3JkLnR5cGUgPT0gInBhc3N3b3JkIikgewogICAgICAgIHBhc3N3b3JkLnR5cGUgPSAidGV4dCI7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVfc3VwZXJhZG1pbihldnQpIHsKICAgICAgaWYgKGV2dCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5jb21wYW55X25hbWUgPSBldnQ7CiAgICAgICAgdGhpcy5jb21wYW55X2lkX3NlbGVjdGVkID0gdGhpcy5jb21wYW55X2lkW3RoaXMuY29tcGFuaWVzLmluZGV4T2YoZXZ0KV07CiAgICAgICAgYnVzLiRlbWl0KCJjb21wYW55IGF0dHJpYnV0ZXMgdXBkYXRlZCIsICJUcnVlIik7CiAgICAgIH0KICAgIH0sCiAgICBzZW5kX2ludml0ZSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMuaW52aXRlX2NvbXBhbnlfbmFtZSA9PSAiIikgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIGVudGVyIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzIik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWdfZW1haWwudGVzdCh0aGlzLmludml0ZV9jb21wYW55X2VtYWlsKSA9PSBmYWxzZSkgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5yZWZlcnJhbHNfdXJsKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBpbnZpdGVkX2NvbXBhbnlfbmFtZTogdGhpcy5pbnZpdGVfY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGludml0ZWRfY29tcGFueV9lbWFpbDogdGhpcy5pbnZpdGVfY29tcGFueV9lbWFpbAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgIGJ1cy4kZW1pdCgiaW52aXRlX3VwZGF0ZSIsICJsb2FkZXJfb24iKTsKICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkKCIjaW52aXRlX21vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgdGhpcy5pbnZpdGVfY29tcGFueV9uYW1lID0gIiI7CiAgICAgICAgICAgIHRoaXMuaW52aXRlX2NvbXBhbnlfZW1haWwgPSAiIjsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2lnbm91dF9hcGkoKSB7CiAgICAgIGJ1cy4kZW1pdCgiTG9nb3V0IGhhcyBiZWVuIGNsaWNrZWQiLCAiVHJ1ZSIpOwogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuY2xlYXJfYWNjZXNzX3Rva2VuX3VybCgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZXhlY3V0ZV9zaWdub3V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5leGVjdXRlX3NpZ25vdXQoKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBleGVjdXRlX3NpZ25vdXQoKSB7CiAgICAgIGxldCBpc19zdXBlcl9hZG1pbiA9IHRoaXMuJHNlc3Npb24uZ2V0KCJpc19zdXBlcl9hZG1pbiIpOwogICAgICBpZiAoaXNfc3VwZXJfYWRtaW4pIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5zdXBlcl9hZG1pbl9sb2dvdXQoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoInJ0Iil9YAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9PSAiU2lnbmVkIE91dCEiIHx8CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9PSAic2lnbiBvdXQiIHx8CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9PSAidG9rZW4gaW52YWxpZCIgfHwKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID09ICJJbnZhbGlkIENyZWRlbnRpYWxzIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnN1cGVyX2FkbWluX2JvdF9sb2dvdXQoKSwgewogICAgICAgICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgICAgICAgICAgICAgLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvX3Nob3dfbm90aWZpY2F0aW9ucykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyX2NoYW5uZWwubGVhdmUoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLnRyYWluaW5nX2NoYW5uZWwubGVhdmUoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiQ2xlYXJfUmVmcmVzaF9Ub2tlbl9JbnRlcnZhbCIsIHsKICAgICAgICAgICAgICAgICAgICBjbGVhcl9pbnRlcnZhbDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJMb2dnZWQgb3V0IiwgIlRydWUiKTsKICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJEaXNhYmxlIHRoZSBib3QgY2hhdCBub3ciLCAiVHJ1ZSIsICJMb2dnZWRvdXQiKTsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJMb2dpbiIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9fc2hvd19ub3RpZmljYXRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXJfY2hhbm5lbC5sZWF2ZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMudHJhaW5pbmdfY2hhbm5lbC5sZWF2ZSgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uZGVzdHJveSgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJDbGVhcl9SZWZyZXNoX1Rva2VuX0ludGVydmFsIiwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyX2ludGVydmFsOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBidXMuJGVtaXQoIkxvZ2dlZCBvdXQiLCAiVHJ1ZSIpOwogICAgICAgICAgICAgICAgICBidXMuJGVtaXQoIkRpc2FibGUgdGhlIGJvdCBjaGF0IG5vdyIsICJUcnVlIiwgIkxvZ2dlZG91dCIpOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkxvZ2luIgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucG9zdChhcGlfY2FsbHMuc3VwZXJfYWRtaW5fYm90X2xvZ291dCgpLCB7CiAgICAgICAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikKICAgICAgICAgICAgICAgICAgICAuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9fc2hvd19ub3RpZmljYXRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXJfY2hhbm5lbC5sZWF2ZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMudHJhaW5pbmdfY2hhbm5lbC5sZWF2ZSgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uZGVzdHJveSgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJDbGVhcl9SZWZyZXNoX1Rva2VuX0ludGVydmFsIiwgewogICAgICAgICAgICAgICAgICAgIGNsZWFyX2ludGVydmFsOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBidXMuJGVtaXQoIkxvZ2dlZCBvdXQiLCAiVHJ1ZSIpOwogICAgICAgICAgICAgICAgICBidXMuJGVtaXQoIkRpc2FibGUgdGhlIGJvdCBjaGF0IG5vdyIsICJUcnVlIiwgIkxvZ2dlZG91dCIpOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkxvZ2luIgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICBpZiAodGhpcy50b19zaG93X25vdGlmaWNhdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLmxlYXZlKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy50cmFpbmluZ19jaGFubmVsLmxlYXZlKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIkNsZWFyX1JlZnJlc2hfVG9rZW5fSW50ZXJ2YWwiLCB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJfaW50ZXJ2YWw6IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgiTG9nZ2VkIG91dCIsICJUcnVlIik7CiAgICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgiRGlzYWJsZSB0aGUgYm90IGNoYXQgbm93IiwgIlRydWUiLCAiTG9nZ2Vkb3V0Iik7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiTG9naW4iCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLnRvX3Nob3dfbm90aWZpY2F0aW9ucykgewogICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyX2NoYW5uZWwubGVhdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnRyYWluaW5nX2NoYW5uZWwubGVhdmUoKTsKICAgICAgICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpOwogICAgICAgICAgICB0aGlzLiRzZXNzaW9uLmRlc3Ryb3koKTsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgYnVzLiRlbWl0KCJMb2dnZWQgb3V0IiwgIlRydWUiKTsKICAgICAgICAgICAgYnVzLiRlbWl0KCJEaXNhYmxlIHRoZSBib3QgY2hhdCBub3ciLCAiVHJ1ZSIsICJMb2dnZWRvdXQiKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICJMb2dpbiIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5zaWdub3V0X3VybCgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgicnQiKX1gCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID09ICJTaWduZWQgT3V0ISIgfHwKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID09ICJzaWduIG91dCIgfHwKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID09ICJ0b2tlbiBpbnZhbGlkIiB8fAogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPT0gIkludmFsaWQgQ3JlZGVudGlhbHMiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmICh0aGlzLnRvX3Nob3dfbm90aWZpY2F0aW9ucykgewogICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXJfY2hhbm5lbC5sZWF2ZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnRyYWluaW5nX2NoYW5uZWwubGVhdmUoKTsKICAgICAgICAgICAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5kZXN0cm95KCk7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJDbGVhcl9SZWZyZXNoX1Rva2VuX0ludGVydmFsIiwgewogICAgICAgICAgICAgICAgY2xlYXJfaW50ZXJ2YWw6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBidXMuJGVtaXQoIkxvZ2dlZCBvdXQiLCAiVHJ1ZSIpOwogICAgICAgICAgICAgIGJ1cy4kZW1pdCgiRGlzYWJsZSB0aGUgYm90IGNoYXQgbm93IiwgIlRydWUiLCAiTG9nZ2Vkb3V0Iik7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogIkxvZ2luIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICBpZiAodGhpcy50b19zaG93X25vdGlmaWNhdGlvbnMpIHsKICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLmxlYXZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50cmFpbmluZ19jaGFubmVsLmxlYXZlKCk7CiAgICAgICAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5kZXN0cm95KCk7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGJ1cy4kZW1pdCgiTG9nZ2VkIG91dCIsICJUcnVlIik7CiAgICAgICAgICAgIGJ1cy4kZW1pdCgiRGlzYWJsZSB0aGUgYm90IGNoYXQgbm93IiwgIlRydWUiLCAiTG9nZ2Vkb3V0Iik7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAiTG9naW4iCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyB1cGRhdGVfbm90aWZpY2F0aW9uc19saXN0KCkgewogICAgLy8gICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLnB1c2goInNob3dfbm90aWZpY2F0aW9ucyIsIHsKICAgIC8vICAgICBuZWVkX25vdGlmaWNhdGlvbnM6IHRydWUsCiAgICAvLyAgICAgZW1haWxfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgfSk7CiAgICAvLyB9LAogICAgc2Vlbl9hbGxfbm90aWZpY2F0aW9ucygpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgbGV0IGxhc3RfaW5kZXggPSB0aGlzLm5vdGlmaWNhdGlvbnMubGVuZ3RoIC0gMTsKICAgICAgaWYgKGxhc3RfaW5kZXggPj0gMCkgewogICAgICAgIGlmICh0aGlzLnNjaGVkdWxlcl9jaGFubmVsKSB7CiAgICAgICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLnB1c2goIm5vdGlmaWNhdGlvbl9zZWVuIiwgewogICAgICAgICAgICByZXFfaWQ6IHRoaXMubm90aWZpY2F0aW9uc1tsYXN0X2luZGV4XS5pZAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnRyYWluaW5nX2NoYW5uZWwpIHsKICAgICAgICAgIHRoaXMudHJhaW5pbmdfY2hhbm5lbC5wdXNoKCJub3RpZmljYXRpb25fc2VlbiIsIHsKICAgICAgICAgICAgcmVxX2lkOiB0aGlzLm5vdGlmaWNhdGlvbnNbbGFzdF9pbmRleF0uaWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsZWFyX2FsbF9ub3RpZmljYXRpb25zKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgbGV0IHJlcV9saXN0X2NsZWFyZWQgPSBbXTsKICAgICAgbGV0IG5vdGlmaWNhdGlvbnNfdGVtcF9saXN0ID0gdGhpcy5ub3RpZmljYXRpb25zOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm90aWZpY2F0aW9uc190ZW1wX2xpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZiAodHlwZW9mIG5vdGlmaWNhdGlvbnNfdGVtcF9saXN0W2ldID09PSAib2JqZWN0IikgewogICAgICAgICAgaWYgKHRoaXMubm90aWZpY2F0aW9uc1tpXS5Ob3RpZmljYXRpb25pZCkgewogICAgICAgICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLnB1c2goIm5vdGlmaWNhdGlvbl9jbGVhcmVkIiwgewogICAgICAgICAgICAgIHJlcV9pZDogdGhpcy5ub3RpZmljYXRpb25zW2ldLmlkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy50cmFpbmluZ19jaGFubmVsLnB1c2goIm5vdGlmaWNhdGlvbl9jbGVhcmVkIiwgewogICAgICAgICAgICAgIHJlcV9pZDogdGhpcy5ub3RpZmljYXRpb25zW2ldLmlkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgcmVxX2xpc3RfY2xlYXJlZC5wdXNoKG5vdGlmaWNhdGlvbnNfdGVtcF9saXN0W2ldLmlkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IG5vdGlmaWNhdGlvbnNfdGVtcF9saXN0LmZpbHRlcigKICAgICAgICBub3RpZmljYXRpb24gPT4gcmVxX2xpc3RfY2xlYXJlZC5pbmNsdWRlcyhub3RpZmljYXRpb24uaWQpID09PSBmYWxzZQogICAgICApOwogICAgfSwKICAgIGNsZWFyX3NpbmdsZV9ub3RpZmljYXRpb24ocmVxX2lkLCBpbmRleCkgewogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgaWYgKHJlcV9pZCAhPT0gbnVsbCkgewogICAgICAgIGlmICh0aGlzLm5vdGlmaWNhdGlvbnNbaW5kZXhdLk5vdGlmaWNhdGlvbmlkKSB7CiAgICAgICAgICB0aGlzLnNjaGVkdWxlcl9jaGFubmVsLnB1c2goIm5vdGlmaWNhdGlvbl9jbGVhcmVkIiwgewogICAgICAgICAgICByZXFfaWQ6IHJlcV9pZAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHJhaW5pbmdfY2hhbm5lbC5wdXNoKCJub3RpZmljYXRpb25fY2xlYXJlZCIsIHsKICAgICAgICAgICAgcmVxX2lkOiByZXFfaWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIHNob3dfbm90aWZpY2F0aW9ucyhkYXRhKSB7CiAgICAgIGlmIChkYXRhICE9IDEpIHsKICAgICAgICBpZiAoZGF0YS5Ob3RpZmljYXRpb25pZCkgewogICAgICAgICAgdmFyIGRhdGU7CiAgICAgICAgICB2YXIgbW9udGhOYW1lcyA9IFsKICAgICAgICAgICAgIkphbiIsCiAgICAgICAgICAgICJGZWIiLAogICAgICAgICAgICAiTWFyIiwKICAgICAgICAgICAgIkFwciIsCiAgICAgICAgICAgICJNYXkiLAogICAgICAgICAgICAiSnVuIiwKICAgICAgICAgICAgIkp1bCIsCiAgICAgICAgICAgICJBdWciLAogICAgICAgICAgICAiU2VwIiwKICAgICAgICAgICAgIk9jdCIsCiAgICAgICAgICAgICJOb3YiLAogICAgICAgICAgICAiRGVjIgogICAgICAgICAgXTsKICAgICAgICAgIGRhdGUgPQogICAgICAgICAgICBkYXRhLnZpc2l0X2RhdGUuc3BsaXQoIiAiKVswXS5zcGxpdCgiLSIpWzJdICsKICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgbW9udGhOYW1lc1tkYXRhLnZpc2l0X2RhdGUuc3BsaXQoIiAiKVswXS5zcGxpdCgiLSIpWzFdIC0gMV0gKwogICAgICAgICAgICAiICIgKwogICAgICAgICAgICBkYXRhLnZpc2l0X2RhdGUuc3BsaXQoIiAiKVswXS5zcGxpdCgiLSIpWzBdOwogICAgICAgICAgdmFyIHRpbWU7CiAgICAgICAgICBkYXRhLnZpc2l0X3Nsb3Quc3BsaXQoIi0iKVswXTsKICAgICAgICAgIGlmIChkYXRhLnZpc2l0X3Nsb3Quc3BsaXQoIi0iKVswXS5zcGxpdCgiOiIpWzBdIDwgMTIpIHsKICAgICAgICAgICAgdGltZSA9CiAgICAgICAgICAgICAgTnVtYmVyKGRhdGEudmlzaXRfc2xvdC5zcGxpdCgiLSIpWzBdLnNwbGl0KCI6IilbMF0pICsgIjowMCBhbSI7CiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudmlzaXRfc2xvdC5zcGxpdCgiLSIpWzBdLnNwbGl0KCI6IilbMF0gPT0gMTIpIHsKICAgICAgICAgICAgdGltZSA9ICIxMjowMCBwbSI7CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICBkYXRhLnZpc2l0X3Nsb3Quc3BsaXQoIi0iKVswXS5zcGxpdCgiOiIpWzBdID4gMTIgJiYKICAgICAgICAgICAgZGF0YS52aXNpdF9zbG90LnNwbGl0KCItIilbMF0uc3BsaXQoIjoiKVswXSA8IDI0CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGltZSA9CiAgICAgICAgICAgICAgTnVtYmVyKGRhdGEudmlzaXRfc2xvdC5zcGxpdCgiLSIpWzBdLnNwbGl0KCI6IilbMF0pIC0KICAgICAgICAgICAgICAxMiArCiAgICAgICAgICAgICAgIjowMCBwbSI7CiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudmlzaXRfc2xvdC5zcGxpdCgiLSIpWzBdLnNwbGl0KCI6IilbMF0gPT0gMjQpIHsKICAgICAgICAgICAgdGltZSA9ICIxMjowMCBhbSI7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZGF0YS5Ob3RpZmljYXRpb25pZCA9PSAiQXBwb2ludG1lbnQgRGVsZXRlZCIpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKAogICAgICAgICAgICAgIGRhdGEudmlzaXRvcl9uYW1lICsKICAgICAgICAgICAgICAgICIgaGFzIGNhbmNlbGxlZCBhbiBhcHBvaW50bWVudCBzY2hlZHVsZWQgb24gIiArCiAgICAgICAgICAgICAgICBkYXRlICsKICAgICAgICAgICAgICAgICIgYXQgIiArCiAgICAgICAgICAgICAgICB0aW1lCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuTm90aWZpY2F0aW9uaWQgPT0gIkFwcG9pbnRtZW50IENvbmZpcm1lZCIpIHsKICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoCiAgICAgICAgICAgICAgZGF0YS52aXNpdG9yX25hbWUgKwogICAgICAgICAgICAgICAgIiBoYXMgY29uZmlybWVkIGFuIGFwcG9pbnRtZW50IHNjaGVkdWxlZCBvbiAiICsKICAgICAgICAgICAgICAgIGRhdGUgKwogICAgICAgICAgICAgICAgIiBhdCAiICsKICAgICAgICAgICAgICAgIHRpbWUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5Ob3RpZmljYXRpb25pZCA9PSAiQXBwb2ludG1lbnQgUmVzY2hlZHVsZWQiKSB7CiAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKAogICAgICAgICAgICAgIGRhdGEudmlzaXRvcl9uYW1lICsKICAgICAgICAgICAgICAgICIgaGFzIHJlY2hlZHVsZWQgYW4gYXBwb2ludG1lbnQgb24gIiArCiAgICAgICAgICAgICAgICBkYXRlICsKICAgICAgICAgICAgICAgICIgYXQgIiArCiAgICAgICAgICAgICAgICB0aW1lCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuTm90aWZpY2F0aW9uaWQgPT0gIkFwcG9pbnRtZW50IFNjaGVkdWxlZCIpIHsKICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoCiAgICAgICAgICAgICAgZGF0YS52aXNpdG9yX25hbWUgKwogICAgICAgICAgICAgICAgIiBoYXMgYmVlbiBzY2hlZHVsZWQgYW4gYXBwb2ludG1lbnQgb24gIiArCiAgICAgICAgICAgICAgICBkYXRlICsKICAgICAgICAgICAgICAgICIgYXQgIiArCiAgICAgICAgICAgICAgICB0aW1lCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLk1vZGVsVHlwZSA9PSAiSW50ZW50LERpYWxvZ3VlIikgewogICAgICAgICAgdmFyIGRhdGU7CiAgICAgICAgICBkYXRlID0gbW9tZW50KGRhdGEuSW5pdGlhdGVkT24sIFsiWVlZWS1NTS1ERCJdKS5mb3JtYXQoIkRvIE1NTSBZWVlZIik7CiAgICAgICAgICBpZiAoZGF0YS5UcmFpbmluZ1N0YXR1cyA9PSAiRmFpbGVkIikgewogICAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgICAgYFRoZSB0cmFpbmluZyBvZiBtb2RlbCBvbiAke2RhdGV9IGhhcyBmYWlsZWQuIEtpbmRseSBjb250YWN0IHRoZSBBZG1pbmlzdHJhdG9yIGZvciBmdXJ0aGVyIGRldGFpbHMuYAogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIGlmIChkYXRhLlRyYWluaW5nU3RhdHVzID09ICJDb21wbGV0ZWQiKSB7CiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKAogICAgICAgICAgICAgIGBUaGUgdHJhaW5pbmcgb2YgYSBuZXcgbW9kZWwgaW5pdGlhdGVkIG9uICR7ZGF0ZX0gaGFzIGJlZW4gY29tcGxldGVkIHN1Y2Nlc2Z1bGx5LmAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5UcmFpbmluZ1N0YXR1cyA9PSAiU3RhcnRlZCIpIHsKICAgICAgICAgICAgdG9hc3RyLmluZm8oCiAgICAgICAgICAgICAgYEEgbmV3IHJlcXVlc3QgZm9yIHRyYWluaW5nIG9mIG1vZGVsIGhhcyBiZWVuIGluaXRpYXRlZCBvbiAke2RhdGV9LmAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGRhdGEuTW9kZWxUeXBlKSB7CiAgICAgICAgICB2YXIgZGF0ZTsKICAgICAgICAgIGRhdGUgPSBtb21lbnQoZGF0YS5Jbml0aWF0ZWRPbiwgWyJZWVlZLU1NLUREIl0pLmZvcm1hdCgiRG8gTU1NIFlZWVkiKTsKICAgICAgICAgIGlmIChkYXRhLlRyYWluaW5nU3RhdHVzID09ICJGYWlsZWQiKSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigKICAgICAgICAgICAgICBgVGhlIHRyYWluaW5nIG9mICR7ZGF0YS5Nb2RlbFR5cGV9IG1vZGVsIG9uICR7ZGF0ZX0gaGFzIGZhaWxlZC4gS2luZGx5IGNvbnRhY3QgdGhlIEFkbWluaXN0cmF0b3IgZm9yIGZ1cnRoZXIgZGV0YWlscy5gCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuVHJhaW5pbmdTdGF0dXMgPT0gIkNvbXBsZXRlZCIpIHsKICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoCiAgICAgICAgICAgICAgYFRoZSB0cmFpbmluZyBvZiBhIG5ldyAke2RhdGEuTW9kZWxUeXBlfSBtb2RlbCBpbml0aWF0ZWQgb24gJHtkYXRlfSBoYXMgYmVlbiBjb21wbGV0ZWQgc3VjY2VzZnVsbHkuYAogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIGlmIChkYXRhLlRyYWluaW5nU3RhdHVzID09ICJTdGFydGVkIikgewogICAgICAgICAgICB0b2FzdHIuaW5mbygKICAgICAgICAgICAgICBgQSBuZXcgcmVxdWVzdCBmb3IgdHJhaW5pbmcgb2YgJHtkYXRhLk1vZGVsVHlwZX0gbW9kZWwgaGFzIGJlZW4gaW5pdGlhdGVkIG9uICR7ZGF0ZX0uYAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHN0YXJ0X3RvdXIoKSB7CiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoInNob3dfdG91cl9ndWlkZSIsIHRydWUpOwogICAgfSwKICAgIGdlbmVyYXRlX2VtYWlsX3dpemFyZChtb2RlbFR5cGUsIGluaXRpYXRlZE9uKSB7CiAgICAgIGxldCB1c2VybmFtZSA9IGAke3RoaXMudXNlcl9maXJzdF9uYW1lfSAke3RoaXMudXNlcl9sYXN0X25hbWV9YDsKICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgIGlmIChtb2RlbFR5cGUgPT0gIkludGVudCxEaWFsb2d1ZSIpIHsKICAgICAgICBhLmhyZWYgPSBgbWFpbHRvOmFkbWluQGNlbnNlLmFpP3N1YmplY3Q9Q2hhdGJvdCBtb2RlbCB0cmFpbmluZyBmYWlsZWQgb24gJHtpbml0aWF0ZWRPbn0uJmJvZHk9SGkgQ2Vuc2UgVGVhbSwlMEQlMEEsIFRoZSBjaGF0Ym90IG1vZGVsIHRyYWluaW5nIGhhcyBmYWlsZWQuIFRoZSBTeXN0ZW0gQWRtaW4gd2lsbCBsb29rIGludG8gdGhpcyBhbmQgZ2V0IGJhY2sgdG8geW91LiUwRCUwQVRoYW5rcywlMEQlMEEke3VzZXJuYW1lfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYS5ocmVmID0gYG1haWx0bzphZG1pbkBjZW5zZS5haT9zdWJqZWN0PSR7bW9kZWxUeXBlfSBtb2RlbCB0cmFpbmluZyBmYWlsZWQgb24gJHtpbml0aWF0ZWRPbn0uJmJvZHk9SGkgQ2Vuc2UgVGVhbSwlMEQlMEEsIFRoZSAke21vZGVsVHlwZX0gbW9kZWwgdHJhaW5pbmcgaGFzIGZhaWxlZC4gVGhlIFN5c3RlbSBBZG1pbiB3aWxsIGxvb2sgaW50byB0aGlzIGFuZCBnZXQgYmFjayB0byB5b3UuJTBEJTBBVGhhbmtzLCUwRCUwQSR7dXNlcm5hbWV9YDsKICAgICAgfQogICAgICBhLmNsaWNrKCk7CiAgICB9LAogICAgcGFnZV9yZWRpcmVjdCgpewogICAgICBpZih0aGlzLiRyb3V0ZXIuY3VycmVudFJvdXRlLm5hbWUgIT09ICdEYXNoYm9hcmQnKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnRGFzaGJvYXJkJyB9KTsKICAgICAgfQogICAgfSwKICAgIHRvcG5hdmJhcl9kaXNhYmxlKCl7CiAgICAgIGlmICh0aGlzLmRpc2FibGVfbmF2YmFyID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuICdwb2ludGVyLWV2ZW50czpub25lOycgICAgCiAgICAgIH1lbHNlewogICAgICAgIHJldHVybiAnJwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["TopNavbar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopNavbar.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Layout","sourcesContent":["<template>\n  <div id=\"top_navbar\">\n    <div\n      class=\"spinner\"\n      id=\"spinner\"\n      v-show=\"spinnerOn != undefined && spinnerOn == true\"\n    ></div>\n    <div class=\"dash-head\">\n      <nav class=\"navbar navbar-expand-md navbar-light\">\n        <!-- <a class=\"navbar-brand\" href=\"/bot/dashboard\"> -->\n        <a\n          class=\"navbar-brand\"\n          href=\"javascript: void(0)\"\n          :style=\"topnavbar_disable()\"\n          @click=\"page_redirect\"\n        >\n          <img src=\"/img/logo.png\" alt />\n        </a>\n        <ul class=\"nav nav-pills ml-auto\">\n          <!-- harsh -->\n          <span\n            style=\"cursor: pointer; padding-top: 0.45rem; color: white; \n            font-weight: bold; margin-top: 13px;\"\n            title=\"Start your guide\"\n            @click=\"listen_data\"\n            data-toggle=\"modal\"\n            data-target=\"#helpguide\"\n            :style=\"topnavbar_disable()\"\n            >Help</span\n          >\n          <!-- <li class=\"nav-item dropdown\"> -->\n            <!-- <img\n              :src=\"tour_guide_icon\"\n              style=\"cursor: pointer; padding-top: 0.45rem\"\n              title=\"Start your guide\"\n              data-toggle=\"modal\" data-target=\"#helpguide\"\n            /> -->\n          <!-- </li> -->\n          <!-- <div class=\"modal fade openmodel\" id=\"helpguide\" role=\"dialog\" data-backdrop=\"static\"> -->\n          \n          <li class=\"nav-item dropdown noti-drop\">\n            <a\n              class=\"nav-link dropdown-toggle\"\n              data-toggle=\"dropdown\"\n              href=\"#\"\n              role=\"button\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n              @click=\"seen_all_notifications\"\n              :style=\"topnavbar_disable()\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"17\"\n                height=\"20\"\n                viewBox=\"0 0 17 20\"\n              >\n                <path\n                  id=\"bell-outline\"\n                  d=\"M16,17H7V10.5a4.5,4.5,0,0,1,9,0M18,16V10.5a6.508,6.508,0,0,0-5-6.32V3.5a1.5,1.5,0,0,0-3,0v.68A6.5,6.5,0,0,0,5,10.5V16L3,18v1H20V18m-8.5,4a2,2,0,0,0,2-2h-4A2,2,0,0,0,11.5,22Z\"\n                  transform=\"translate(-3 -2)\"\n                  fill=\"#fff\"\n                />\n              </svg>\n              <span class=\"noti-icn\"></span>\n              <!-- <span class=\"badge\">3</span> -->\n              <span\n                class=\"badge\"\n                v-if=\"unseen_notifications > 0 && unseen_notifications < 10\"\n                >{{ unseen_notifications }}</span\n              >\n              <span class=\"badge\" v-if=\"unseen_notifications > 9\">9+</span>\n            </a>\n            <div class=\"dropdown-menu\">\n              <div class=\"noti-head\">Notifications</div>\n\n              <div\n                class=\"noti-body\"\n                style=\"max-height: 300px; overflow-x: auto\"\n              >\n                <div\n                  style=\"padding: 10px 15px; border-bottom: solid 1px #f1f1f3\"\n                  class=\"noti-blk pending\"\n                  v-for=\"(notification, notify) in notifications\"\n                  :key=\"notify\"\n                >\n                  <button\n                    type=\"button\"\n                    @click=\"\n                      clear_single_notification(\n                        notification != undefined ? notification.id : null,\n                        notify\n                      )\n                    \"\n                    class=\"close\"\n                    style=\"\n                      font-size: 0px;\n                      height: 11px;\n                      width: 11px;\n                      padding-top: 4px;\n                    \"\n                  >\n                    <img\n                      src=\"/img/close-icn.png\"\n                      alt\n                      style=\"height: 11px; width: 11px\"\n                    />\n                  </button>\n                  <template v-if=\"notification.Notificationid\">\n                    <p\n                      style=\"font-size: 13px; font-weight: 500; margin: 0 0 5px\"\n                    >\n                      {{ notification.Notificationid }}\n                    </p>\n                    <p\n                      style=\"\n                        font-size: 11px;\n                        font-weight: 400;\n                        margin: 0;\n                        color: #9499ae;\n                      \"\n                    >\n                      {{ notification.visitor_name }}\n                    </p>\n                  </template>\n                  <template\n                    v-else-if=\"notification.ModelType == 'Intent,Dialogue'\"\n                  >\n                    <p\n                      style=\"font-size: 13px; font-weight: 500; margin: 0 0 5px\"\n                    >\n                      <span v-if=\"notification.TrainingStatus == 'Completed'\">\n                        Your latest model has been trained on\n                        {{ notification.date }} succesfully.\n                      </span>\n                      <span v-if=\"notification.TrainingStatus == 'Started'\">\n                        A new model is being trained. The request was initiated\n                        on\n                        {{ notification.date }}.\n                      </span>\n                      <template v-if=\"notification.TrainingStatus == 'Failed'\">\n                        The training of model on\n                        {{ notification.date }} has failed.\n                        <a\n                          href=\"javascript:void(0)\"\n                          @click=\"\n                            generate_email_wizard(\n                              notification.ModelType,\n                              notification.InitiatedOn\n                            )\n                          \"\n                          >Click here to contact the Administrator</a\n                        >\n                      </template>\n                      <!--{{ notification.ModelType }} Model-->\n                    </p>\n                  </template>\n                  <template v-else-if=\"notification.ModelType\">\n                    <p\n                      style=\"font-size: 13px; font-weight: 500; margin: 0 0 5px\"\n                    >\n                      <span v-if=\"notification.TrainingStatus == 'Completed'\">\n                        Your latest {{ notification.ModelType }} model has been\n                        trained on {{ notification.date }} succesfully.\n                      </span>\n                      <span v-if=\"notification.TrainingStatus == 'Started'\">\n                        A new {{ notification.ModelType }} model is being\n                        trained. The request was initiated on\n                        {{ notification.date }}.\n                      </span>\n                      <template v-if=\"notification.TrainingStatus == 'Failed'\">\n                        The training of {{ notification.ModelType }} model on\n                        {{ notification.date }} has failed.\n                        <a\n                          href=\"javascript:void(0)\"\n                          @click=\"\n                            generate_email_wizard(\n                              notification.ModelType,\n                              notification.InitiatedOn\n                            )\n                          \"\n                          >Click here to contact the Administrator</a\n                        >\n                      </template>\n                      <!--{{ notification.ModelType }} Model-->\n                    </p>\n                  </template>\n                </div>\n                <!-- <div class=\"not-blk pending\">\n                  <h5>David Lee</h5>\n                  <p>Hey, I just read your message. How are you?</p>\n                </div>\n                <div class=\"not-blk pending\">\n                  <h5>Jonathan Chen</h5>\n                  <p>Are you available later today to chat?</p>\n                </div>\n                <div class=\"not-blk read\">\n                  <h5>Jackie Berry</h5>\n                  <p>I will be unavailable until after 5pm today. </p>\n                </div>\n                <div class=\"not-blk read\">\n                  <h5>Alex Johnson</h5>\n                  <p>How is your day?</p>\n                </div>\n                <div class=\"not-blk read\">\n                  <h5>Maria Cooper</h5>\n                  <p>What are you doing this weekend?</p>\n                </div> -->\n              </div>\n              <div class=\"noti-foot\">\n                <a\n                  href=\"#\"\n                  @click=\"clear_all_notifications\"\n                  v-if=\"notifications.length > 0\"\n                  >Clear all <span class=\"caret\"></span\n                ></a>\n              </div>\n            </div>\n          </li>\n          <li\n            class=\"nav-item dropdown user-drop\"\n            v-if=\"user_role == 'SuperAdmin'\"\n          >\n            <a\n              class=\"nav-link dropdown-toggle\"\n              data-toggle=\"dropdown\"\n              href=\"#\"\n              role=\"button\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"true\"\n            >\n              <span class=\"user-txt\" v-if=\"company_selected == ''\"\n                >Select A Company Name</span\n              >\n              <span class=\"user-txt\" v-else>{{ company_selected }}</span>\n            </a>\n            <div class=\"dropdown-menu\" style=\"min-height: auto\">\n              <div class=\"noti-body\">\n                <div\n                  class=\"not-blk pending\"\n                  v-for=\"(company, index) in companies\"\n                  :key=\"index\"\n                >\n                  <a href=\"#\" @click=\"company_changed(company)\">{{\n                    company\n                  }}</a>\n                </div>\n              </div>\n            </div>\n          </li>\n          <li class=\"nav-item\" v-show=\"user_type == 'Partner'\">\n            <a\n              class=\"nav-link\"\n              href=\"#\"\n              role=\"button\"\n              aria-haspopup=\"true\"\n              data-toggle=\"modal\"\n              data-target=\"#invite_modal\"\n              aria-expanded=\"true\"\n            >\n              <span class=\"user-txt\">Invite Link</span>\n            </a>\n          </li>\n          <li class=\"nav-item\" v-show=\"tickets_bar_access\">\n            <a\n              @click=\"raise_ticket\"\n              class=\"nav-link\"\n              href=\"#\"\n              role=\"button\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"true\"\n            >\n              <span class=\"user-txt\">Raise Ticket</span>\n            </a>\n          </li>\n          <li class=\"nav-item dropdown user-drop\">\n            <a\n              class=\"nav-link dropdown-toggle\"\n              data-toggle=\"dropdown\"\n              href=\"#\"\n              role=\"button\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"true\"\n              id=\"logout_dropdown\"\n            >\n              <span class=\"user-img text-center\"\n                >{{ user_first_name[0] }}{{ user_last_name[0] }}</span\n              >\n              <span\n                class=\"user-txt\"\n                v-show=\"user_first_name != null && user_last_name != null\"\n                >{{ user_first_name }} {{ user_last_name }}</span\n              >\n            </a>\n            <div class=\"dropdown-menu\">\n              <form class=\"user-form\">\n                <div class=\"user-avatar px-4 py-3\">\n                  <div\n                    class=\"avatar\"\n                    v-show=\"user_first_name != null && user_last_name != null\"\n                  >\n                    <img\n                      v-show=\"photo_img_url\"\n                      v-bind:src=\"photo_img_url\"\n                      alt\n                    />\n                    <span v-show=\"!photo_img_url\"\n                      >{{ user_first_name[0] }}{{ user_last_name[0] }}</span\n                    >\n                    <div class=\"user-over\">\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"20\"\n                        height=\"100\"\n                        viewBox=\"0 0 20 20\"\n                      >\n                        <path\n                          id=\"circle-edit-outline\"\n                          d=\"M12,2A10,10,0,1,0,22,12H20a8,8,0,1,1-8-8V2m6.78,1a.691.691,0,0,0-.48.2L17.08,4.41l2.5,2.5L20.8,5.7a.676.676,0,0,0,0-.95L19.25,3.2a.668.668,0,0,0-.47-.2M16.37,5.12,9,12.5V15h2.5l7.37-7.38Z\"\n                          transform=\"translate(-2 -40)\"\n                          fill=\"#fff\"\n                        />\n                      </svg>\n                    </div>\n                    <input\n                      type=\"file\"\n                      accept=\"image/\"\n                      class=\"user-update\"\n                      ref=\"myFiles\"\n                      @change=\"editImage\"\n                    />\n                  </div>\n                  <h3\n                    v-show=\"user_first_name != null && user_last_name != null\"\n                  >\n                    {{ user_first_name }} {{ user_last_name }}\n                    <a href=\"#\" style=\"margin: 0 0 10px; padding: 0 0 10px\">\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"15.392\"\n                        height=\"15.392\"\n                        viewBox=\"0 0 15.392 15.392\"\n                        data-toggle=\"modal\"\n                        data-target=\"#edit_profile_modal\"\n                      >\n                        <path\n                          id=\"square-edit-outline\"\n                          d=\"M4.71,3A1.7,1.7,0,0,0,3,4.71V16.682a1.71,1.71,0,0,0,1.71,1.71H16.682a1.71,1.71,0,0,0,1.71-1.71V10.7h-1.71v5.986H4.71V4.71H10.7V3H4.71m10.928.855a.591.591,0,0,0-.41.171L14.185,5.061,16.322,7.2l1.043-1.035a.578.578,0,0,0,0-.812L16.04,4.026a.571.571,0,0,0-.4-.171M13.578,5.668l-6.3,6.311v2.138H9.413l6.3-6.311Z\"\n                          transform=\"translate(-3 -3)\"\n                          fill=\"#9499ae\"\n                        />\n                      </svg>\n                    </a>\n                  </h3>\n                  <p>\n                    <span>{{tlt('user_profile_role_label')}}:</span>\n                    {{ user_role }}\n                  </p>\n                  <a\n                    href=\"#\"\n                    data-toggle=\"modal\"\n                    style=\"font-size: 15px\"\n                    data-target=\"#change_password_modal\"\n                    >{{tlt('change_pwd_btn_link')}}</a\n                  >\n                </div>\n                <div class=\"user-frm px-4 py-3\">\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_company_id_label')}}</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      v-model=\"user_company_id\"\n                      placeholder=\"Company ID\"\n                      disabled\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_company_name_label')}}</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      v-model=\"user_company_name\"\n                      placeholder=\"Company Name\"\n                      disabled\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_first_name_label')}}</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      v-model=\"user_first_name\"\n                      placeholder=\"First Name\"\n                      disabled\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_last_name_label')}}</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      v-model=\"user_last_name\"\n                      placeholder=\"Last Name\"\n                      disabled\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_email_label')}}</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      v-model=\"email\"\n                      disabled\n                      placeholder=\"Email\"\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_country_label')}}</label>\n                    <input\n                      type=\"country\"\n                      class=\"form-control\"\n                      v-model=\"user_country_name.name\"\n                      placeholder=\"Country\"\n                      disabled\n                    />\n                  </div>\n                  <div class=\"form-group\">\n                    <label>{{tlt('user_profile_ph_number_label')}}</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      v-model=\"user_phone_number\"\n                      placeholder=\"Phone-Number\"\n                      disabled\n                    />\n                  </div>\n                </div>\n                <div class=\"user-foot text-right px-4 py-3\">\n                  <a\n                    style=\"margin-top: -10px\"\n                    href=\"javascript:void(0)\"\n                    class=\"red-btn\"\n                    @click=\"signout_api\"\n                    id=\"logout_btn\"\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"14.733\"\n                      height=\"14.733\"\n                      viewBox=\"0 0 14.733 14.733\"\n                    >\n                      <path\n                        id=\"logout-variant\"\n                        d=\"M12.069,13.3l2.12-2.12H6.274V9.548h7.915l-2.12-2.12,1.162-1.154,4.093,4.093-4.093,4.093L12.069,13.3M16.1,3a1.637,1.637,0,0,1,1.637,1.637V8.459L16.1,6.822V4.637H4.637V16.1H16.1V13.911l1.637-1.637V16.1A1.637,1.637,0,0,1,16.1,17.733H4.637A1.637,1.637,0,0,1,3,16.1V4.637A1.631,1.631,0,0,1,4.637,3Z\"\n                        transform=\"translate(-3 -3)\"\n                        fill=\"#fff\"\n                      />\n                    </svg>\n                    {{tlt('user_profile_logout_btn')}}\n                  </a>\n                </div>\n              </form>\n            </div>\n          </li>\n        </ul>\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n      </nav>\n    </div>\n    <div\n        id=\"helpguide\"\n        class=\"modal fade openmodel\"\n        role=\"dialog\"\n        data-backdrop=\"static\"\n        data-keyboard=\"false\"\n      >\n        <div class=\"modal-dialog\" role=\"document\">\n          <div class=\"modal-content\" style=\"max-height:100%;\">\n            <!-- <div class=\"modal-header\">\n                  <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n                    <div v-html=\"calldata\"></div>\n                  </h5> -->\n            <button\n              type=\"button\"\n              class=\"close\"\n              style=\"font-size:2rem;\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <div v-html=\"calldata\"></div>\n            <!-- </div> -->\n            <!-- /{{ calldata }}  -->\n            <!-- <div class=\"modal-body\">\n                  \n                </div> -->\n            <div class=\"modal-footer\">\n              <button\n                type=\"button\"\n                class=\"btn btn-primary\"\n                data-dismiss=\"modal\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    <div\n      class=\"modal fade dash-modal\"\n      id=\"change_password_modal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"intentmodeltitle\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/msg-blue.png\" alt />\n              </div>\n              <h3>{{tlt('pwd_model_header')}}</h3>\n            </div>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n              @click=\"clear_fields\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <form @submit=\"submit_new_password\">\n              <div class=\"form-group\">\n                <label>{{tlt('pwd_model_old_pwd_label')}}</label>\n                <input\n                  v-model=\"old_password\"\n                  type=\"password\"\n                  id=\"old_password\"\n                  class=\"form-control pass\"\n                  placeholder=\"Old password\"\n                />\n                <!-- <div\n                  class=\"is-invalid\"\n                  style=\"color: red\"\n                  v-if=\"validOldPassword != true && old_password != ''\"\n                >\n                  {{ validOldPassword }}\n                </div> -->\n                <a\n                  href=\"#\"\n                  @click=\"password_toggle('old_password')\"\n                  class=\"view-pass\"\n                >\n                  <img src=\"/img/eye-icn.png\" alt />\n                </a>\n              </div>\n              <div class=\"form-group\">\n                <label>{{tlt('pwd_model_new_pwd_label')}}</label>\n                <input\n                  v-model=\"new_password\"\n                  type=\"password\"\n                  id=\"new_password\"\n                  class=\"form-control pass\"\n                  placeholder=\"New password\"\n                />\n                <!-- <div\n                  class=\"is-invalid\"\n                  style=\"color: red\"\n                  v-if=\"validPassword != true && new_password != ''\"\n                >\n                  {{ validPassword }}\n                </div> -->\n                <a\n                  href=\"#\"\n                  @click=\"password_toggle('new_password')\"\n                  class=\"view-pass\"\n                >\n                  <img src=\"/img/eye-icn.png\" alt />\n                </a>\n                <password-validator\n                  :testpassword=\"new_password\"\n                  @correctPassword=\"check_password\"\n                  style=\"padding: 0px\"\n                ></password-validator>\n              </div>\n              <div class=\"form-group\">\n                <label>{{tlt('pwd_model_confirm_pwd_label')}}</label>\n                <input\n                  v-model=\"confirm_password\"\n                  type=\"password\"\n                  class=\"form-control pass\"\n                  placeholder=\"Confirm password\"\n                  id=\"confirm_password\"\n                />\n                <div\n                  class=\"is-invalid\"\n                  style=\"color: red\"\n                  v-if=\"validConfirmPassword != true && confirm_password != ''\"\n                >\n                  {{ validConfirmPassword }}\n                </div>\n                <a\n                  href=\"#\"\n                  @click=\"password_toggle('confirm_password')\"\n                  class=\"view-pass\"\n                >\n                  <img src=\"/img/eye-icn.png\" alt />\n                </a>\n              </div>\n              <div class=\"btn-wrap text-right\">\n                <button type=\"button\" class=\"btn btn-link\" data-dismiss=\"modal\">\n                  {{tlt('pwd_model_cancel_btn')}}\n                </button>\n                <button type=\"submit\" class=\"darkblue-btn\">{{tlt('pwd_model_save_btn')}}</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"modal fade dash-modal\"\n      id=\"edit_profile_modal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"intentmodeltitle\"\n      aria-hidden=\"true\"\n      style=\"z-index: 10000\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/user-blue.png\" alt />\n              </div>\n              <h3>{{tlt('edit_model_header')}}</h3>\n            </div>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <form @submit=\"edit_profile_api\">\n              <div class=\"form-group\">\n                <label>{{tlt('edit_model_first_name_label')}}</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  v-model=\"user_first_name\"\n                  placeholder=\"Enter First Name\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <label>{{tlt('edit_model_last_name_label')}}</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  v-model=\"user_last_name\"\n                  placeholder=\"Enter Last Name\"\n                />\n              </div>\n              <div class=\"form-group\">\n                {{tlt('edit_model_country_label')}}\n                <multiselect\n                  v-model=\"user_country_name\"\n                  id=\"select_country_name\"\n                  :options=\"country_list\"\n                  :searchable=\"true\"\n                  placeholder=\"Select Country Name\"\n                  :close-on-select=\"true\"\n                  track-by=\"name\"\n                  label=\"name\"\n                ></multiselect>\n              </div>\n              <div class=\"form-group\">\n                <label>{{tlt('edit_model_ph_number_label')}}</label>\n                <!-- <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  v-model=\"user_phone_number\"\n                  placeholder=\"Enter Phone Number\"\n                />\n                <span\n                  style=\"color: red\"\n                  v-if=\"validPhoneNumber != true && user_phone_number != ''\"\n                  >{{ validPhoneNumber }}</span\n                > -->\n                <vue-phone-number-input\n                  style=\"margin-bottom: 1.1rem\"\n                  v-model=\"user_phone_number\"\n                  :no-use-browser-locale=\"true\"\n                  @update=\"phoneNumber = $event\"\n                >\n                </vue-phone-number-input>\n              </div>\n              <div class=\"btn-wrap text-right\">\n                <button type=\"button\" class=\"btn btn-link\" data-dismiss=\"modal\">\n                  {{tlt('edit_model_cancel_btn')}}\n                </button>\n                <button type=\"submit\" class=\"darkblue-btn\">{{tlt('edit_model_save_btn')}}</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"modal fade dash-modal\"\n      id=\"invite_modal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"intentmodeltitle\"\n      aria-hidden=\"true\"\n      style=\"z-index: 10000\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/user-blue.png\" alt />\n              </div>\n              <h3>Invite Company</h3>\n            </div>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <form @submit=\"send_invite\">\n              <div class=\"form-group\">\n                <label>Company Name</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  v-model=\"invite_company_name\"\n                  placeholder=\"Enter Company Name\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <label>Company Email</label>\n                <input\n                  type=\"email\"\n                  :class=\"'form-control is-valid' + email_class\"\n                  v-model=\"invite_company_email\"\n                  placeholder=\"Enter Company Email\"\n                />\n              </div>\n              <div class=\"btn-wrap text-right\">\n                <button type=\"button\" class=\"btn btn-link\" data-dismiss=\"modal\">\n                  Cancel\n                </button>\n                <button type=\"submit\" class=\"darkblue-btn\">Invite</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { bus } from \"@/portal/main\";\nimport Countries from \"@/portal/components/Countries\";\nimport api_calls from \"@/portal/api_calls\";\nimport fingerprint from \"@/portal/components/fingerprint\";\nimport { setTimeout } from \"timers\";\nimport Multiselect from \"vue-multiselect\";\nimport { stringTypeAnnotation } from \"@babel/types\";\nimport { stringify } from \"querystring\";\nimport { Socket } from \"phoenix-socket\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\nimport VuePhoneNumberInput from 'vue-phone-number-input';\nimport 'vue-phone-number-input/dist/vue-phone-number-input.css';\nimport PasswordValidator from \"../Pages/PasswordValidator.vue\";\nimport page_guide from \"@/portal/mixins/page_guide.js\";\nimport path from \"path\";\n\nexport default {\n  mixins: [page_guide],\n  props: [\"title\"],\n  components: {\n    Multiselect,\n    VuePhoneNumberInput,\n    PasswordValidator\n  },\n  data() {\n    return {\n      intent_data: null,\n      calldata: \"\",\n      new_password: \"\",\n      old_password: \"\",\n      confirm_password: \"\",\n      correct_password: false,\n      company_name: null,\n      company_id_selected: null,\n      companies: [],\n      country_list: null,\n      company_id: [],\n      user_company: null,\n      tickets_bar_access: false,\n      invite_company_email: null,\n      invite_company_name: null,\n      old_file_name: null,\n      file_label: \"Choose file\",\n      issue: \"\",\n      issue_description: \"\",\n      img_file: \"\",\n      spinnerOn: false,\n      photo_img_url: \"\",\n      existing_file_name: null,\n      user_country_name: {\n        code: \"\",\n        name: \"\"\n      },\n      user_phone_number: this.$session.has(\"PhoneNumber\")\n        ? this.$session.get(\"PhoneNumber\")\n        : this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").phone_no\n        : \"\",\n      user_first_name: this.$session.has(\"UserFirstName\")\n        ? this.$session.get(\"UserFirstName\")\n        : this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").first_name\n        : \"\",\n      user_last_name: this.$session.has(\"UserLastName\")\n        ? this.$session.get(\"UserLastName\")\n        : this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").last_name\n        : \"\",\n      company_selected: this.$session.has(\"CompanyName\")\n        ? this.$session.get(\"CompanyName\")\n        : \"Select A Company\",\n      user_company_name: this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").company_name\n        : \"\",\n      email: this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").email\n        : \"\",\n      user_company_id: this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").company_id\n        : \"\",\n      user_role: this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").role\n        : \"\",\n      user_type: this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").registration_type\n        : \"\",\n      phone_number_validity: /\\+[0-9]{9,14}$/,\n      reg_pwd: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[#@$!%*?&])[A-Za-z\\d#@$!%*?&]{8,}/,\n      reg_email: /^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$/,\n      notifications: [],\n      to_show_notifications: false,\n      socket: null,\n      scheduler_channel: null,\n      training_channel: null,\n      phoneNumber: null,\n      tour_guide_icon: require(\"@/portal/assets/img/info_icon.svg\"),\n      disable_navbar:false\n    };\n  },\n  computed: {\n    validOldPassword() {\n      if (this.reg_pwd.test(this.old_password)) {\n        return true;\n      } else {\n        return \"Password must contain minimum 8 characters, atleast 1 UpperCase Alphabet, 1 LowerCase Alphabet, 1 Number and 1 Special Character\";\n      }\n    },\n    validPassword() {\n      if (this.reg_pwd.test(this.new_password)) {\n        return true;\n      } else {\n        return \"Password must contain minimum 8 characters, atleast 1 UpperCase Alphabet, 1 LowerCase Alphabet, 1 Number and 1 Special Character\";\n      }\n    },\n    validConfirmPassword() {\n      if (this.confirm_password == this.new_password) {\n        return true;\n      } else {\n        return \"Passwords do not match\";\n      }\n    },\n    // validPhoneNumber() {\n    //   if (\n    //     this.phone_number_validity.test(\n    //       this.user_phone_number.replace(/\\s+/g, \"\")\n    //     )\n    //   ) {\n    //     return true;\n    //   } else {\n    //     return \"Please enter a valid phone number in the format: +CountryCode Number\";\n    //   }\n    // },\n    unseen_notifications() {\n      let count = 0;\n      for (let i = 0; i < this.notifications.length; i++) {\n        if (!this.notifications[i].is_clear) {\n          count++;\n        }\n      }\n      return count;\n    }\n  },\n  created() {\n    this.country_list = Countries;\n    if (this.$session.has(\"photo_img_url\")) {\n      this.photo_img_url = this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"photo_img_url\")\n        : \"\";\n    } else {\n      this.photo_img_url = this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").photo_img_url\n        : \"\";\n    }\n    if (\n      this.$session.has(\"country_name\") &&\n      this.$session.has(\"UserInformation\")\n    ) {\n      this.user_country_name.code = this.$session.get(\"country_name\");\n      let select_country = this.country_list.filter(country => {\n        return country.code == this.user_country_name.code;\n      });\n      this.user_country_name.name = select_country[0].name;\n    } else {\n      this.user_country_name.code = this.$session.has(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").country_name\n        : \"\";\n      if (this.$session.get(\"UserInformation\").country_name == null) {\n        this.user_country_name.code = \"\";\n      }\n      if (this.user_country_name.code.length > 0) {\n        let select_country = this.country_list.filter(country => {\n          return country.code == this.user_country_name.code;\n        });\n        this.user_country_name.name = select_country[0] === undefined ? '':select_country[0].name;\n      }\n    }\n    if (this.user_role == \"Admin\") {\n      this.company_selected = this.$session.get(\"UserInformation\")\n        ? this.$session.get(\"UserInformation\").company_name\n        : \"\";\n    }\n    if (this.$session.get(\"UserInformation\").role == \"SuperAdmin\") {\n      axios\n        .post(\n          api_calls.company_list_url(),\n          {\n            companyname: this.$session.get(\"UserInformation\").company_name,\n            companyid: this.$session.get(\"UserInformation\").company_id,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            email: this.$session.get(\"UserInformation\").email,\n            token: this.$session.get(\"UserInformation\").tokens\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          this.companies = response.data[0];\n          this.company_id = response.data[1];\n        });\n    }\n    if (this.user_first_name == null || this.user_first_name == \"\") {\n      this.user_first_name = \"First\";\n      this.user_last_name = \"Last\";\n      this.$session.set(\"UserFirstName\", this.user_first_name);\n      this.$session.set(\"UserLastName\", this.user_last_name);\n    }\n    var menus = this.$session.has(\"ChatbotMenu\")\n      ? this.$session.get(\"ChatbotMenu\")\n      : [];\n    var ticket_access = menus.filter(menu => {\n      return menu.main_menu.name == \"Tickets\";\n    });\n    if (ticket_access.length == 0) {\n      this.tickets_bar_access = false;\n    } else if (ticket_access.length == 1) {\n      this.tickets_bar_access = true;\n    }\n\n    var notifications_access = false;\n\n    for (var i = 0, n = menus.length; i < n; i += 1) {\n      for (let j = 0, l = menus[i].sub_menu_list.length; j < l; j += 1) {\n        if (menus[i].sub_menu_list[j].name == \"Scheduler\") {\n          notifications_access = true;\n          break;\n        }\n      }\n    }\n    this.socket = new Socket(\n      process.env.VUE_APP_PUSH_NOTIFICATIONS_WEBSOCKET_ENDPOINT,\n      {\n        params: {\n          notification_test: true\n        }\n      }\n    );\n    this.socket.connect();\n    if (Boolean(notifications_access)) {\n      this.to_show_notifications = true;\n      //Notification\n      this.scheduler_channel = this.socket.channel(\n        \"notification_channel:\" + this.user_company_id\n      );\n      this.scheduler_channel.join();\n      this.scheduler_channel.on(\"show_notifications\", response => {\n        if (response.is_response) {\n          for (let i = 0, n = response.data.length; i < n; i++) {\n            this.notifications.push(response.data[i]);\n          }\n        }\n        this.scheduler_channel.off(\"show_notifications\");\n      });\n      this.scheduler_channel.on(\"new_notification\", response => {\n        this.show_notifications(response.data);\n        this.notifications.unshift(response.data);\n      });\n      this.scheduler_channel.push(\"show_notifications\", {\n        need_notifications: true,\n        email_id: this.$session.get(\"UserInformation\").email\n      });\n    }\n    this.training_channel = this.socket.channel(\n      \"training_notification_channel:\" + this.user_company_id\n    );\n    this.training_channel.join();\n    this.training_channel.on(\"show_notifications\", response => {\n      if (response.is_response && response.data.length > 0) {\n        for (let i = 0, n = response.data.length; i < n; i++) {\n          this.notifications.push({\n            date: moment(response.data[i].InitiatedOn, [\"YYYY-MM-DD\"]).format(\n              \"Do MMM YYYY\"\n            ),\n            ...response.data[i]\n          });\n        }\n      }\n      this.training_channel.off(\"show_notifications\");\n    });\n    this.training_channel.on(\"new_notification\", response => {\n      this.show_notifications(response.data);\n      this.notifications.unshift({\n        date: moment(response.data.InitiatedOn, [\"YYYY-MM-DD\"]).format(\n          \"Do MMM YYYY\"\n        ),\n        ...response.data\n      });\n    });\n    this.training_channel.push(\"show_notifications\", {\n      need_notifications: true,\n      email_id: this.$session.get(\"UserInformation\").email\n    });\n  },\n  mounted() {\n    bus.$on(\"LayoutHelpData\", dataPg => {\n      this.calldata = dataPg;\n    });\n    // bus.$on('TabsLayoutInfo',(dataFortabs) => {\n    //         console.log(dataFortabs,\"data of tab pane\");\n    //         this.calldata = dataFortabs;\n    // })\n    bus.$on(\"send company attributes\", () => {\n      bus.$emit(\n        \"company name and company id\",\n        this.company_name,\n        this.company_id_selected\n      );\n    });\n\n    this.$root.$on(\"sign_out\", () => {\n      this.signout_api();\n    });\n    $(\".dropdown-toggle\").dropdown();\n    if (this.$session.get(\"SettingTopnavbarDisable\") == true) {\n      this.disable_navbar = true;\n    }\n    this.$root.$on(\"DashboardSidebarDisable\", (data) => {\n      if(data===true){\n        this.disable_navbar = true;\n      }\n    });\n  },\n  methods: {\n    listen_data() {\n      this.calldata = this.$route.path;\n      //this.comp_name = this.$route.name;\n      // Emitting a custom-event via the Event Bus\n      bus.$emit(\"Emitting_data\", this.calldata);\n    },\n    check_password(correctPassword) {\n      this.correct_password = correctPassword;\n    },\n    editImage(e) {\n      const image = e.target.files[0];\n      const reader = new FileReader();\n      reader.readAsDataURL(image);\n      reader.onload = e => {\n        this.previewImage = e.target.result;\n        if (this.photo_img_url) {\n          this.existing_file_name = this.photo_img_url.split(\"/\")[4];\n        }\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.edit_profile_url(),\n            {\n              companyname: this.$session.get(\"UserInformation\").company_name,\n              companyid: this.$session.get(\"UserInformation\").company_id,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              email: this.$session.get(\"UserInformation\").email,\n              token: this.$session.get(\"UserInformation\").tokens,\n              upload_photo: \"True\",\n              profile_image: this.previewImage.split(\"base64,\")[1],\n              file_name: image.name,\n              existing_file_name: this.existing_file_name\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            if (response.data.Msg == \"Photo Uploaded Successfully\") {\n              toastr.success(\"Your photo has been uploaded successfully\");\n              this.$session.set(\"photo_img_url\", response.data.ImageUrl);\n              setTimeout(() => {\n                this.$router.go();\n              }, 5000);\n            } else if (res.data == \"Duplicate image\") {\n              toastr.warning(\n                \"This file name already exists.Please rename the file\"\n              );\n            } else {\n              toastr.error(\"Error occured while uploading file\");\n            }\n          });\n      };\n    },\n    createImage(file, type) {\n      let reader = new FileReader();\n      reader.onload = e => {\n        this.blog.img_file = e.target.result.split(\"base64,\")[1];\n      };\n      reader.readAsDataURL(file);\n    },\n    raise_ticket() {\n      event.preventDefault();\n      if (this.$route.name == \"Tickets\") {\n        $(\"#ticketmodal\").modal(\"show\");\n      } else {\n        this.$router.push({\n          name: \"Tickets\",\n          props: true,\n          params: { raise_ticket: \"True\" }\n        });\n      }\n    },\n    clear_fields() {\n      this.img_file = \"\";\n      this.file_label = \"Choose file\";\n      this.issue = \"\";\n      this.issue_description = \"\";\n      this.spinnerOn = false;\n    },\n    email_class() {\n      if (this.reg_email.test(this.invite_company_email)) {\n        return \"is-valid\";\n      } else {\n        return \"is-invalid\";\n      }\n    },\n    edit_profile_api() {\n      event.preventDefault();\n      if (!Boolean(this.phoneNumber)) {\n        toastr.warning(\"Please enter a valid Phone Number\");\n        return;\n      } else if (this.phoneNumber.isValid != true) {\n        toastr.warning(\"Please enter a valid Phone Number\");\n        return;\n      }\n      if (\n        this.user_country_name.code != null &&\n        this.user_first_name != \"\" &&\n        this.user_first_name != \"F\" &&\n        this.user_last_name != \"\" &&\n        this.user_last_name != \"L\"\n        //this.validPhoneNumber === true\n      ) {\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.edit_profile_url(),\n            {\n              company_id: this.$session.get(\"UserInformation\").company_id,\n              company_name: this.$session.get(\"UserInformation\").company_name,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              first_name: this.user_first_name,\n              last_name: this.user_last_name,\n              country_name: this.user_country_name.code,\n              phone_number: this.phoneNumber.formattedNumber,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            if (response.data == \"Profile Updated\") {\n              // Swal({\n              //     title: \"Updated Successfully!!\",\n              //     type: \"success\",\n              //     text: \"Your profile has been updated successfully.\",\n              //     timer:2000,\n              //   });\n              toastr.success(\"Your profile has been updated successfully.\");\n              this.$session.set(\"UserFirstName\", this.user_first_name);\n              this.$session.set(\"UserLastName\", this.user_last_name);\n              this.$session.set(\"country_name\", this.user_country_name.code);\n              this.$session.set(\"PhoneNumber\", this.phoneNumber.formattedNumber);\n              setTimeout(() => {\n                this.$router.go();\n              }, 2500);\n            }\n            $(\"#edit_profile_modal\").modal(\"hide\");\n          });\n      } else {\n        toastr.error(\"Please enter all the required fields\");\n      }\n    },\n    company_changed(company) {\n      event.preventDefault();\n      if (company != this.company_selected) {\n        this.company_selected = company;\n        if (this.$session.has(\"CompanyName\")) {\n          this.$session.remove(\"CompanyName\");\n        }\n        this.$session.set(\"CompanyName\", this.company_selected);\n        if (this.$session.has(\"CompanyId\")) {\n          this.$session.remove(\"CompanyId\");\n        }\n        this.$session.set(\n          \"CompanyId\",\n          this.company_id[this.companies.indexOf(this.company_selected)]\n        );\n        this.$router.go();\n      } else {\n      }\n    },\n    submit_new_password() {\n      event.preventDefault();\n      if (\n        this.old_password != \"\" &&\n        this.correct_password == true &&\n        this.validConfirmPassword == true\n      ) {\n        Swal({\n          toast: true,\n          text: \"Please wait while we submit your details\",\n          showConfirmButton: false,\n          type: \"info\"\n        });\n        var date = new Date();\n        axios\n          .post(\n            api_calls.new_password_url(),\n            {\n              company_id: this.$session.get(\"UserInformation\").company_id,\n              company_name: this.$session.get(\"UserInformation\").company_name,\n              old_password: this.old_password,\n              new_password: this.new_password,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              date: date\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            if (response.data == \"Password Incorrect\") {\n              toastr.error(\"Your old password is incorrect\");\n            } else if (response.data == \"Password Reset\") {\n              toastr.success(\n                \"Your password has been updated successfully. Now you can login with the new password\"\n              );\n              $(\"#change_password_modal\").modal(\"hide\");\n              setTimeout(() => {\n                this.$router.go();\n              }, 200);\n            } else if (response.data.MSG === \"Password Is Similar\") {\n              Swal({\n                text:\n                  \"You cannot set a password which was one of your old passwords. Please Try Again\",\n                timer: 3000\n              });\n            } else if (response.data.MSG === \"OLD PASSWORD DOESN'T MATCH\") {\n              Swal({\n                text: \"Your old password does not matched. Please Try Again\",\n                timer: 3000\n              });\n            } else {\n              Swal({\n                text: \"Some Error Occurred. Please Try Again\",\n                timer: 2500\n              });\n            }\n            this.old_password = \"\";\n            this.new_password = \"\";\n            this.confirm_password = \"\";\n          });\n      } else {\n        toastr.error(\"Please Enter all required fields\");\n      }\n    },\n    password_toggle(id) {\n      event.preventDefault();\n      var password = document.getElementById(id);\n      if (password.type == \"text\") {\n        password.type = \"password\";\n      } else if (password.type == \"password\") {\n        password.type = \"text\";\n      }\n    },\n    update_superadmin(evt) {\n      if (evt !== undefined) {\n        this.company_name = evt;\n        this.company_id_selected = this.company_id[this.companies.indexOf(evt)];\n        bus.$emit(\"company attributes updated\", \"True\");\n      }\n    },\n    send_invite() {\n      event.preventDefault();\n      if (this.invite_company_name == \"\") {\n        toastr.error(\"Please enter all the required fields\");\n      } else if (this.reg_email.test(this.invite_company_email) == false) {\n        toastr.error(\"Please enter a valid email\");\n      } else {\n        axios\n          .post(\n            api_calls.referrals_url(),\n            {\n              companyname: this.$session.get(\"UserInformation\").company_name,\n              companyid: this.$session.get(\"UserInformation\").company_id,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              email: this.$session.get(\"UserInformation\").email,\n              invited_company_name: this.invite_company_name,\n              invited_company_email: this.invite_company_email\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            if (response.data == \"Email sent successfully\") {\n              bus.$emit(\"invite_update\", \"loader_on\");\n              toastr.success(response.data);\n            }\n            $(\"#invite_modal\").modal(\"hide\");\n            this.invite_company_name = \"\";\n            this.invite_company_email = \"\";\n          });\n      }\n    },\n    signout_api() {\n      bus.$emit(\"Logout has been clicked\", \"True\");\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.clear_access_token_url(),\n          {\n            companyname: this.$session.get(\"UserInformation\").company_name,\n            companyid: this.$session.get(\"UserInformation\").company_id,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            email: this.$session.get(\"UserInformation\").email,\n            token: this.$session.get(\"UserInformation\").tokens\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(() => {\n          this.execute_signout();\n        })\n        .catch(() => {\n          this.execute_signout();\n        });\n    },\n    execute_signout() {\n      let is_super_admin = this.$session.get(\"is_super_admin\");\n      if (is_super_admin) {\n        axios\n          .post(\n            api_calls.super_admin_logout(),\n            {\n              companyname: this.$session.get(\"UserInformation\").company_name,\n              companyid: this.$session.get(\"UserInformation\").company_id,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              email: this.$session.get(\"UserInformation\").email,\n              token: this.$session.get(\"UserInformation\").tokens\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"rt\")}`\n              }\n            }\n          )\n          .then(response => {\n            if (\n              response.data == \"Signed Out!\" ||\n              response.data == \"sign out\" ||\n              response.data == \"token invalid\" ||\n              response.data == \"Invalid Credentials\"\n            ) {\n              axios\n                .post(api_calls.super_admin_bot_logout(), {\n                  companyname: this.$session.get(\"UserInformation\")\n                    .company_name,\n                  companyid: this.$session.get(\"UserInformation\").company_id,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  username: this.$session.get(\"UserInformation\").email,\n                  token: this.$session.get(\"UserInformation\").tokens\n                })\n                .then(() => {\n                  if (this.to_show_notifications) {\n                    this.scheduler_channel.leave();\n                  }\n                  this.training_channel.leave();\n                  this.socket.disconnect();\n                  this.$session.destroy();\n                  this.spinnerOn = false;\n                  this.$root.$emit(\"Clear_Refresh_Token_Interval\", {\n                    clear_interval: true\n                  });\n                  bus.$emit(\"Logged out\", \"True\");\n                  bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n                  this.$router.push({\n                    name: \"Login\"\n                  });\n                })\n                .catch(() => {\n                  if (this.to_show_notifications) {\n                    this.scheduler_channel.leave();\n                  }\n                  this.training_channel.leave();\n                  this.socket.disconnect();\n                  this.$session.destroy();\n                  this.spinnerOn = false;\n                  this.$root.$emit(\"Clear_Refresh_Token_Interval\", {\n                    clear_interval: true\n                  });\n                  bus.$emit(\"Logged out\", \"True\");\n                  bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n                  this.$router.push({\n                    name: \"Login\"\n                  });\n                });\n            } else {\n              axios\n                .post(api_calls.super_admin_bot_logout(), {\n                  companyname: this.$session.get(\"UserInformation\")\n                    .company_name,\n                  companyid: this.$session.get(\"UserInformation\").company_id,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  username: this.$session.get(\"UserInformation\").email,\n                  token: this.$session.get(\"UserInformation\").tokens\n                })\n                .then(() => {\n                  if (this.to_show_notifications) {\n                    this.scheduler_channel.leave();\n                  }\n                  this.training_channel.leave();\n                  this.socket.disconnect();\n                  this.$session.destroy();\n                  this.spinnerOn = false;\n                  this.$root.$emit(\"Clear_Refresh_Token_Interval\", {\n                    clear_interval: true\n                  });\n                  bus.$emit(\"Logged out\", \"True\");\n                  bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n                  this.$router.push({\n                    name: \"Login\"\n                  });\n                })\n                .catch(() => {\n                  if (this.to_show_notifications) {\n                    this.scheduler_channel.leave();\n                  }\n                  this.training_channel.leave();\n                  this.socket.disconnect();\n                  this.$session.destroy();\n                  this.spinnerOn = false;\n                  this.$root.$emit(\"Clear_Refresh_Token_Interval\", {\n                    clear_interval: true\n                  });\n                  bus.$emit(\"Logged out\", \"True\");\n                  bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n                  this.$router.push({\n                    name: \"Login\"\n                  });\n                });\n              this.spinnerOn = false;\n            }\n          })\n          .catch(() => {\n            if (this.to_show_notifications) {\n              this.scheduler_channel.leave();\n            }\n            this.training_channel.leave();\n            this.socket.disconnect();\n            this.$session.destroy();\n            this.spinnerOn = false;\n            bus.$emit(\"Logged out\", \"True\");\n            bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n            this.$router.push({\n              name: \"Login\"\n            });\n          });\n      } else {\n        axios\n          .post(\n            api_calls.signout_url(),\n            {\n              companyname: this.$session.get(\"UserInformation\").company_name,\n              companyid: this.$session.get(\"UserInformation\").company_id,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              email: this.$session.get(\"UserInformation\").email,\n              token: this.$session.get(\"UserInformation\").tokens\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"rt\")}`\n              }\n            }\n          )\n          .then(response => {\n            if (\n              response.data == \"Signed Out!\" ||\n              response.data == \"sign out\" ||\n              response.data == \"token invalid\" ||\n              response.data == \"Invalid Credentials\"\n            ) {\n              if (this.to_show_notifications) {\n                this.scheduler_channel.leave();\n              }\n              this.training_channel.leave();\n              this.socket.disconnect();\n              this.$session.destroy();\n              this.spinnerOn = false;\n              this.$root.$emit(\"Clear_Refresh_Token_Interval\", {\n                clear_interval: true\n              });\n              bus.$emit(\"Logged out\", \"True\");\n              bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n              this.$router.push({\n                name: \"Login\"\n              });\n            } else {\n              this.spinnerOn = false;\n            }\n          })\n          .catch(() => {\n            if (this.to_show_notifications) {\n              this.scheduler_channel.leave();\n            }\n            this.training_channel.leave();\n            this.socket.disconnect();\n            this.$session.destroy();\n            this.spinnerOn = false;\n            bus.$emit(\"Logged out\", \"True\");\n            bus.$emit(\"Disable the bot chat now\", \"True\", \"Loggedout\");\n            this.$router.push({\n              name: \"Login\"\n            });\n          });\n      }\n    },\n    // update_notifications_list() {\n    //   this.scheduler_channel.push(\"show_notifications\", {\n    //     need_notifications: true,\n    //     email_id: this.$session.get(\"UserInformation\").email,\n    //   });\n    // },\n    seen_all_notifications() {\n      event.preventDefault();\n      let last_index = this.notifications.length - 1;\n      if (last_index >= 0) {\n        if (this.scheduler_channel) {\n          this.scheduler_channel.push(\"notification_seen\", {\n            req_id: this.notifications[last_index].id\n          });\n        }\n        if (this.training_channel) {\n          this.training_channel.push(\"notification_seen\", {\n            req_id: this.notifications[last_index].id\n          });\n        }\n      }\n    },\n    clear_all_notifications() {\n      event.preventDefault();\n      event.stopPropagation();\n      let req_list_cleared = [];\n      let notifications_temp_list = this.notifications;\n      for (var i = 0, len = notifications_temp_list.length; i < len; i++) {\n        if (typeof notifications_temp_list[i] === \"object\") {\n          if (this.notifications[i].Notificationid) {\n            this.scheduler_channel.push(\"notification_cleared\", {\n              req_id: this.notifications[i].id\n            });\n          } else {\n            this.training_channel.push(\"notification_cleared\", {\n              req_id: this.notifications[i].id\n            });\n          }\n          req_list_cleared.push(notifications_temp_list[i].id);\n        }\n      }\n\n      this.notifications = notifications_temp_list.filter(\n        notification => req_list_cleared.includes(notification.id) === false\n      );\n    },\n    clear_single_notification(req_id, index) {\n      event.stopPropagation();\n      if (req_id !== null) {\n        if (this.notifications[index].Notificationid) {\n          this.scheduler_channel.push(\"notification_cleared\", {\n            req_id: req_id\n          });\n        } else {\n          this.training_channel.push(\"notification_cleared\", {\n            req_id: req_id\n          });\n        }\n        this.notifications.splice(index, 1);\n      }\n    },\n    show_notifications(data) {\n      if (data != 1) {\n        if (data.Notificationid) {\n          var date;\n          var monthNames = [\n            \"Jan\",\n            \"Feb\",\n            \"Mar\",\n            \"Apr\",\n            \"May\",\n            \"Jun\",\n            \"Jul\",\n            \"Aug\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\"\n          ];\n          date =\n            data.visit_date.split(\" \")[0].split(\"-\")[2] +\n            \" \" +\n            monthNames[data.visit_date.split(\" \")[0].split(\"-\")[1] - 1] +\n            \" \" +\n            data.visit_date.split(\" \")[0].split(\"-\")[0];\n          var time;\n          data.visit_slot.split(\"-\")[0];\n          if (data.visit_slot.split(\"-\")[0].split(\":\")[0] < 12) {\n            time =\n              Number(data.visit_slot.split(\"-\")[0].split(\":\")[0]) + \":00 am\";\n          } else if (data.visit_slot.split(\"-\")[0].split(\":\")[0] == 12) {\n            time = \"12:00 pm\";\n          } else if (\n            data.visit_slot.split(\"-\")[0].split(\":\")[0] > 12 &&\n            data.visit_slot.split(\"-\")[0].split(\":\")[0] < 24\n          ) {\n            time =\n              Number(data.visit_slot.split(\"-\")[0].split(\":\")[0]) -\n              12 +\n              \":00 pm\";\n          } else if (data.visit_slot.split(\"-\")[0].split(\":\")[0] == 24) {\n            time = \"12:00 am\";\n          }\n          if (data.Notificationid == \"Appointment Deleted\") {\n            toastr.error(\n              data.visitor_name +\n                \" has cancelled an appointment scheduled on \" +\n                date +\n                \" at \" +\n                time\n            );\n          } else if (data.Notificationid == \"Appointment Confirmed\") {\n            toastr.success(\n              data.visitor_name +\n                \" has confirmed an appointment scheduled on \" +\n                date +\n                \" at \" +\n                time\n            );\n          } else if (data.Notificationid == \"Appointment Rescheduled\") {\n            toastr.warning(\n              data.visitor_name +\n                \" has recheduled an appointment on \" +\n                date +\n                \" at \" +\n                time\n            );\n          } else if (data.Notificationid == \"Appointment Scheduled\") {\n            toastr.success(\n              data.visitor_name +\n                \" has been scheduled an appointment on \" +\n                date +\n                \" at \" +\n                time\n            );\n          }\n        } else if (data.ModelType == \"Intent,Dialogue\") {\n          var date;\n          date = moment(data.InitiatedOn, [\"YYYY-MM-DD\"]).format(\"Do MMM YYYY\");\n          if (data.TrainingStatus == \"Failed\") {\n            toastr.error(\n              `The training of model on ${date} has failed. Kindly contact the Administrator for further details.`\n            );\n          } else if (data.TrainingStatus == \"Completed\") {\n            toastr.success(\n              `The training of a new model initiated on ${date} has been completed succesfully.`\n            );\n          } else if (data.TrainingStatus == \"Started\") {\n            toastr.info(\n              `A new request for training of model has been initiated on ${date}.`\n            );\n          }\n        } else if (data.ModelType) {\n          var date;\n          date = moment(data.InitiatedOn, [\"YYYY-MM-DD\"]).format(\"Do MMM YYYY\");\n          if (data.TrainingStatus == \"Failed\") {\n            toastr.error(\n              `The training of ${data.ModelType} model on ${date} has failed. Kindly contact the Administrator for further details.`\n            );\n          } else if (data.TrainingStatus == \"Completed\") {\n            toastr.success(\n              `The training of a new ${data.ModelType} model initiated on ${date} has been completed succesfully.`\n            );\n          } else if (data.TrainingStatus == \"Started\") {\n            toastr.info(\n              `A new request for training of ${data.ModelType} model has been initiated on ${date}.`\n            );\n          }\n        }\n      }\n    },\n    start_tour() {\n      this.$root.$emit(\"show_tour_guide\", true);\n    },\n    generate_email_wizard(modelType, initiatedOn) {\n      let username = `${this.user_first_name} ${this.user_last_name}`;\n      var a = document.createElement(\"a\");\n      if (modelType == \"Intent,Dialogue\") {\n        a.href = `mailto:admin@cense.ai?subject=Chatbot model training failed on ${initiatedOn}.&body=Hi Cense Team,%0D%0A, The chatbot model training has failed. The System Admin will look into this and get back to you.%0D%0AThanks,%0D%0A${username}`;\n      } else {\n        a.href = `mailto:admin@cense.ai?subject=${modelType} model training failed on ${initiatedOn}.&body=Hi Cense Team,%0D%0A, The ${modelType} model training has failed. The System Admin will look into this and get back to you.%0D%0AThanks,%0D%0A${username}`;\n      }\n      a.click();\n    },\n    page_redirect(){\n      if(this.$router.currentRoute.name !== 'Dashboard') {\n        this.$router.push({ name: 'Dashboard' });\n      }\n    },\n    topnavbar_disable(){\n      if (this.disable_navbar === true) {\n        return 'pointer-events:none;'    \n      }else{\n        return ''\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.modal-dialog {\n  max-width: 810px;\n}\n.openmodel.show {\n  padding-right: 0px !important;\n}\n.btn-primary {\n  margin-right: 1rem;\n  width: 10%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  color: #fff;\n  background: #3e4d92;\n  border: solid 1px #3e4d92;\n}\n.btn-secondary {\n  width: 14%;\n  color: #9499ae;\n  font-size: 14px;\n  /* cursor: pointer; */\n  border-color: #fff;\n  background-color: #fff;\n  text-decoration: none;\n}\n.btn-primary:hover {\n  border-color: #273679;\n  background-color: #273679;\n}\n.btn-secondary:hover {\n  color: black;\n}\nbutton.close {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  opacity: 0.5;\n}\n.dropdown-toggle .badge {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  /* padding: 5px 10px; */\n  border-radius: 50%;\n  background-color: red;\n  color: white;\n}\n.pass.form-control {\n  background-position: 8px 50% !important;\n  padding: 14px 8px 14px 50px;\n}\n.view-pass {\n  top: 40px;\n}\n</style>\n<style src=\"vue-multiselect/dist/vue-multiselect.min.css\"></style>\n"]}]}