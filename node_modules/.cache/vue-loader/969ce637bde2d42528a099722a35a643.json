{"remainingRequest":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Elixir/chatbot-portal/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue?vue&type=style&index=0&id=3d6865d0&scoped=true&lang=css&","dependencies":[{"path":"/home/vimalesh/Elixir/chatbot-portal/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue","mtime":1643027096176},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGFzaC1tb2RhbCAuYnRuLXdyYXAgLmRhcmtibHVlLWJ0biB7CiAgbWFyZ2luLWxlZnQ6IDBweDsKICBwYWRkaW5nOiA1cHggMjBweCAhaW1wb3J0YW50Owp9Ci5kYXJrYmx1ZS1idG4gewogIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7Cn0KLmJ0biB7CiAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OwogIHBhZGRpbmc6IDVweCAyMHB4ICFpbXBvcnRhbnQ7CiAgZm9udC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["ProductSettings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8iCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductSettings.vue","sourceRoot":"src/portal/Chatbot/Dashboard/ProductManagement","sourcesContent":["<template>\n  <div>\n    <div class=\"dash-cont\">\n    <div class=\"spinner\" id=\"spinner\" v-show=\"big_spinner\"></div>\n    <div class=\"container-fluid\">\n      <div class=\"card dash-card\">\n        <div class=\"table-box\">\n          <div class=\"table-responsive mb-0\">\n              <h4 class=\"mb-sm-6\" style=\"text-align: center;padding-top: 15px;\">\n                Store Settings\n              </h4>\n              <hr />\n              <div class=\"col-sm-12 d-flex\" \n              >\n                <div class=\"col-sm-6\" style=\"border-right: solid 1px #eaeaea\">\n                  <label\n                    class=\"mb-sm-6 mt-\"\n                    ><strong>Limit of products in Up-Sell</strong>\n                  </label>\n                  <input\n                    v-model.number=\"limit_up_sell\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter Value\"\n                    style=\"padding: 5px;\"\n                  />\n                  <hr style=\"margin-top: 1.13rem;\">\n                  <label class=\"mb-sm-6 mt-2\" style=\"margin-top: 0.4rem !important;\"\n                    ><strong>Limit of products in Cross-Sell</strong>\n                  </label>\n                  <input\n                    v-model.number=\"limit_cross_sell\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter Value\"\n                    style=\"padding: 5px;\"\n                  />\n                  <hr style=\"margin-top:2rem\">\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.5rem !important;\"\n                    ><strong>Inventory Level for Notification</strong>\n                  </label>\n                  <label\n                    >(Number below which if any of your products go,\n                    you will receive a notification for replenishment via\n                    mail)</label\n                  >\n                  <input\n                    v-model.number=\"inventory_level_notification\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter your inventory limit number\"\n                    style=\"padding: 5px;margin-bottom: 1rem !important\"\n                    min=\"0\"\n                  />\n                  <hr style=\"margin-top:1.9rem\">\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.3rem !important;\"\n                    ><strong>Contact Us Email</strong>\n                  </label><br/>\n                  <label>\n                    (Enter email-id where customers can reachout)\n                  </label>\n                  <input\n                    v-model.trim=\"contact_us_email\"\n                    type=\"email\"\n                    class=\"form-control\"\n                    placeholder=\"Enter the email-id\"\n                    style=\"padding: 5px;margin-bottom: 1rem !important\"\n                    required\n                  />\n                  <div\n                    class=\"is-invalid\"\n                    style=\"color:red; padding-bottom:15px;\"\n                    v-if=\"validEmail!=true && contact_us_email!=''\"\n                  >\n                    {{ validEmail }}\n                  </div>\n                  <hr style=\"margin-top:1.9rem\">\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.3rem !important;\"\n                    ><strong>Contact Us Phone Number</strong>\n                  </label><br/>\n                  <label>\n                    (Enter phone number where customers can reachout)\n                  </label>\n                  <vue-phone-number-input \n                    v-model=\"contact_us_phone_number\" \n                    :no-use-browser-locale=\"true\"\n                    @update=\"phoneNumber = $event\"\n                  >\n                  </vue-phone-number-input>\n                  <br/>\n                  <!-- <hr />\n                    <div>\n                    <hr />\n                      <h5 class=\"mb-sm-6 pt-3\">SMS Configuration</h5>\n                      <div class=\"form-group\">\n                        <form @submit=\"configure_product_settings('phone_no')\">\n                          <div class=\"form-group\">\n                            <label>Phone Number</label>\n                            <input\n                              v-model=\"phone_no_details\"\n                              type=\"text\"\n                              class=\"form-control\"\n                              placeholder=\"Enter the mobile number from where the sms will be sent\"\n                              style=\"width: 90%; padding: 5px\"\n                              :disabled=\"phone_no_disable==true\"\n                            />\n                          </div>\n                          <div\n                            class=\"is-invalid\"\n                            style=\"color:red; padding-bottom:15px;\"\n                            v-if=\"validPhoneNumber!=true && phone_no_details!=''\"\n                          >\n                            {{ validPhoneNumber }}\n                          </div>\n                          <div class=\"dash-modal\">\n                            <div class=\"btn-wrap text-right mt-0 py-0 border-top-0\">\n                              <button\n                                type=\"button\"\n                                class=\"btn btn-danger\"\n                                style=\"\"\n                                v-if=\"phone_no_disable==true\"\n                              >\n                                Remove\n                              </button>\n                              <button\n                                type=\"submit\"\n                                style=\"display: flex !important;\"\n                                class=\"darkblue-btn\"\n                                v-else\n                              >\n                                Save\n                              </button>\n                            </div>\n                          </div>\n                        </form>\n                      </div>\n                    </div> -->\n                </div>\n                <div class=\"col-sm-6\">\n                  <!-- <h5 class=\"mb-sm-6 mt-5 mb-0 py-0\">Shop Settings</h5> -->\n                  <div class=\"form-group mb-0\">\n                    <label\n                      class=\"col-sm-11\"\n                      style=\"width: 90%; padding: 0px;margin-top:4px\"\n                      ><strong>Allow Guest Users</strong>\n                    </label>\n                    <label class=\"switch col-sm-1\" style=\"margin-top:0px;\">\n                      <input\n                        type=\"checkbox\"\n                        v-model=\"email_required\"\n                        id=\"email_required_id\"\n                      />\n                      <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px;\"\n                      ></span>\n                    </label>\n                      \n                    <label class=\"col-sm-11\" style=\"padding:0px\">\n                      (If this checkbox is on, customers can see their order\n                      without providing password)</label\n                    >\n                  </div>\n                  <hr />\n                  <label\n                    class=\"mb-sm-6 mt-3\"\n                    style=\"margin-top: 0.3rem !important;\"\n                    ><strong>Shop Base Currency</strong></label\n                  >\n                  <div class=\"form-group mb-0\">\n                    <multiselect\n                      v-model=\"currency_code\"\n                      :options=\"currency_list\"\n                      :searchable=\"true\"\n                      :close-on-select=\"true\"\n                      :taggable=\"false\"\n                      :multiple=\"false\"\n                      placeholder=\"Select Shop Currency\"\n                      :max-height=\"200\"\n                      track-by=\"display_name\"\n                      label=\"display_name\"\n                      :allow-empty=\"false\"\n                    >\n                      <!-- <span>{{ currency_name}}</span> -->\n                    </multiselect>\n                  </div>\n                  <hr style=\"margin-top: 1.9rem !important;\" />\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.5rem !important;\"\n                    ><strong>Feedback Frequency </strong></label\n                  >\n                  <label style=\"    max-width: 80%;\"\n                    >(Frequency of how often feedback questions should be asked\n                    to the customers)</label\n                  >\n                  <input\n                    v-model.number=\"feedback_question_frequency\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter days in number\"\n                    style=\"padding: 5px;margin-bottom: 2rem !important\"\n                    min=\"0\"\n                  />\n                  <hr style=\"margin-top: 1.9rem !important;\" />\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.5rem !important;\"\n                    ><strong>Reviews & Ratings </strong></label\n                  >\n                  <br/>\n                  <label style=\"max-width: 80%;\"\n                    >(Turn your customer content into sales by collecting and leveraging reviews and ratings)</label\n                  >\n                  <!-- <div class=\"input-group mb-3\"> -->\n                    <input\n                      id=\"review_message_first_id\"\n                      v-model.trim=\"review_message_first\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"Enter review message\"\n                      style=\"padding: 5px !important; resize: none !important;\"\n                      required\n                    />\n                    <!-- <span class=\"input-group-text\">Product Name.</span> -->\n                  <!-- </div> -->\n                  <input\n                    v-model.trim=\"review_message_second\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"Enter review message\"\n                    style=\"padding: 5px;margin-bottom: 2rem !important; margin-top: 2rem !important\"\n                  />\n                  <hr />\n                  <div class=\"form-group mb-0\">\n                    <label\n                      class=\"col-sm-11\"\n                      style=\"width: 90%; padding: 0px;margin-top:4px\"\n                      ><strong>Display products on landing</strong>\n                    </label>\n                    <label class=\"switch col-sm-1\" style=\"margin-top:0px;\">\n                      <input\n                        type=\"checkbox\"\n                        v-model=\"is_display_products\"\n                        id=\"display_products_id\"\n                      />\n                      <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px;\"\n                      ></span>\n                    </label>\n                    <label class=\"col-sm-11\" style=\"padding:0px\">\n                      (If this checkbox is on, products would be shown in the start of conversation)</label\n                    >\n                    <label v-if=\"is_display_products === true\" class=\"col-sm-11\" style=\"padding:0px\">\n                      (Select what kind of products to be shown)</label\n                    >\n                    <div v-if=\"is_display_products === true\"\n                      class=\"radio\"\n                    >\n                              <div class=\"d-flex\">\n                                <label style=\"vertical-align: text-top\">\n                                  Latest\n                                  <input\n                                    type=\"radio\"\n                                    value=\"latest\"\n                                    v-model=\"display_products_type\"\n                                  />\n                                  <span class=\"icn\" id=\"display_product_type_id\"></span>\n                                </label>\n                              <!-- </div>\n                              <div> -->\n                                <label style=\"vertical-align: text-top\">\n                                  Random\n                                  <input\n                                    type=\"radio\"\n                                    value=\"random\"\n                                    v-model=\"display_products_type\"\n                                  />\n                                  <span class=\"icn\" id=\"display_product_type_id\"></span>\n                                </label>\n                              <!-- </div>\n                              <div> -->\n                                <label style=\"vertical-align: text-top\">\n                                  Best Selling\n                                  <input\n                                    type=\"radio\"\n                                    value=\"best_selling\"\n                                    v-model=\"display_products_type\"\n                                  />\n                                  <span class=\"icn\" id=\"display_product_type_id\"></span>\n                                </label>\n                              </div>\n                    </div>\n                  </div>\n                   <hr />\n                  <div class=\"form-group mb-0\">\n                    <label\n                      class=\"col-sm-11\"\n                      style=\"width: 90%; padding: 0px;margin-top:4px\"\n                      ><strong>Display banners on landing</strong>\n                    </label>\n                    <label class=\"switch col-sm-1\" style=\"margin-top:0px;\">\n                      <input\n                        type=\"checkbox\"\n                        v-model=\"is_display_banner_on_landing\"\n                        id=\"is_display_banner_on_landing_id\"\n                      />\n                      <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px;\"\n                      ></span>\n                    </label>\n                    <label class=\"col-sm-11\" style=\"padding:0px\">\n                      (If this checkbox is on, banners would be shown in the start of conversation)</label\n                    >\n                  </div>\n                </div>\n              </div>\n              <div class=\"dash-modal\">\n                <div class=\"col-sm-12\">\n              <hr style=\"margin: 0.6rem 1rem 1rem 1rem;\">\n              </div>\n                <div\n                  class=\"card-act btn-wrap text-right mt-0 pt-0 pb-3 border-top-0\"\n                  style=\"margin-left: 2rem;margin-bottom: 0.4rem\"\n                >\n                  <button\n                    type=\"submit\"\n                    style=\"display: text-center !important;\"\n                    class=\"darkblue-btn\"\n                    @click=\"configure_product_settings('email_required')\"\n                  >\n                    Save\n                  </button>\n                </div>\n              </div>\n              <hr />\n              <div class=\"col-sm-12 d-flex\">\n                <div class=\"col-sm-6\">\n                <div class=\"form-group\">\n                  <h5 class=\"mb-sm-6\">Mailer Configuration</h5>\n                    <form @submit.prevent=\"configure_product_settings('email')\">\n                      <div class=\"form-group\">\n                        <label><strong>Sender Email</strong></label>\n                           <label>   (Please enter your store's email address from which you want your customers to receive emails)</label>\n                        <input\n                          v-if=\"!disable_btn_expired\"\n                          v-model=\"email_details\"\n                          type=\"email\"\n                          class=\"form-control\"\n                          placeholder=\"Enter the email-id from where the mails will be sent\"\n                          style=\"padding: 5px\"\n                          :disabled=\"email_disable == true\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <p class=\"label1\" v-if=\"email_disable == true\">\n                          <strong>Verification Status:</strong>\n                          <span :style=\"verification_status == 'Success'?'color:#9acd32':'color:#d9534f'\"\n                          >\n                            {{ verification_status }}\n                          </span>&nbsp;\n                          <img\n                            title=\"Check Email Verification Status\"\n                            :src=\"reset_icon_path\"\n                            alt=\"\"\n                            style=\"float: inherit; cursor: pointer; padding-left: 5px;\"\n                            @click=\"load_product_settings()\"\n                          />\n                        </p>\n                      </div>\n                      <div class=\"dash-modal\">\n                        <div\n                          class=\"card-act btn-wrap text-right mt-0 pt-0 pb-3 border-top-0\"\n                        >\n                          <button\n                            type=\"button\"\n                            class=\"btn btn-danger\"\n                            style=\"display: text-center !important;\"\n                            v-if=\"email_disable == true\"\n                            @click=\"configure_product_settings('email_remove')\"\n                          >\n                            Remove\n                          </button>\n                          <button\n                            id=\"product_setting_email_save_btn\"\n                            type=\"submit\"\n                            style=\"display: text-center !important;\"\n                            class=\"darkblue-btn\"\n                            v-else\n                          >\n                            Save\n                          </button>\n                        </div>\n                      </div>\n                    </form>\n                  </div>\n                  </div>\n              </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\nimport currency from \"@/portal/components/Currency\";\nimport Multiselect from \"vue-multiselect\";\nimport { freeze_portal,show_subscription_expired_swal} from \"@/portal/mixins\";\nimport VuePhoneNumberInput from 'vue-phone-number-input';\nimport 'vue-phone-number-input/dist/vue-phone-number-input.css';\nexport default {\n  name: \"ProductSettingsPage\",\n  components: {\n    Multiselect,\n    VuePhoneNumberInput,\n  },\n  mixins: [freeze_portal ,show_subscription_expired_swal],\n  data() {\n    return {\n      phoneNumber: null,\n      contact_us_phone_number:null,\n      inventory_level_notification: 5,\n      currency_code: \"\",\n      currency_list: [],\n      feedback_question_frequency: 90,\n      phone_no_disable: false,\n      email_disable: false,\n      reset_icon_path: require(\"@/portal/assets/img/reset_icon.svg\"),\n      verification_status: null,\n      big_spinner: false,\n      companyid: null,\n      companyname: null,\n      is_display_products: false,\n      display_products_id: true,\n      display_products_type: null,\n      email_required: false,\n      phone_no_details: null,\n      email_details: null,\n      email_required_id: true,\n      phone_number_validity: /\\+[0-9]{9,14}$/,\n      email_validity: /^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$/,\n      limit_up_sell: 10,\n      limit_cross_sell: 10,\n      contact_us_email:'',\n      review_message_first:'',\n      review_message_second:'',\n      retail_web_framework: this.$session.get(\"retail_web_framework\"),\n      verify_product_settings: [],\n      verify_check: false,\n      is_display_banner_on_landing: false,\n      disable_btn_expired:false,\n    };\n  },\n  created() {\n    if (this.$session.get(\"UserInformation\").role == \"SuperAdmin\") {\n      this.companyid = this.$session.get(\"CompanyId\");\n      this.companyname = this.$session.get(\"CompanyName\");\n    } else {\n      this.companyid = this.$session.get(\"UserInformation\").company_id;\n      this.companyname = this.$session.get(\"UserInformation\").company_name;\n    }\n    this.load_product_settings();\n  },\n  mounted() {\n    setTimeout(() => {\n      this.freeze_portal();\n    }, 1000);\n    this.$root.$on(\"ProductSettingsPageDisabled\", (data) =>{\n      if(data===true){\n        this.disable_btn_expired = true;\n      }\n    })\n    this.retail_web_framework = this.$session.get(\"retail_web_framework\");\n    for (var i = 0; i < currency.length; i++) {\n      this.currency_list.push({\n        display_name:\n          currency[i].emoji +\n          \" \" +\n          currency[i].currency_code +\n          \" - \" +\n          currency[i].currency_name,\n        value: currency[i].currency_code\n      });\n    }\n    // this.unique();\n    this.freeze_portal();\n    $('[data-toggle=\"popover\"]').popover();\n    // load_product_settings();\n    this.$root.$emit('change_sidebar_main_menu', 'Store');\n  },\n  computed: {\n    validPhoneNumber() {\n      if (this.phone_no_details != null) {\n        if (\n          this.phone_number_validity.test(\n            this.phone_no_details.replace(/\\s+/g, \"\")\n          )\n        ) {\n          return true;\n        } else {\n          return \"Please enter a valid phone number in the format: +CountryCode Number\";\n        }\n      }\n    },\n    validEmail () {\n      if(this.contact_us_email != null){\n        if (this.email_validity.test(this.contact_us_email)) {\n          return true;\n        } else {\n          return \"Please enter a valid Email Address\";\n        }\n      }\n    },\n  },\n  watch: {\n    email_details() {\n      if (this.email_details == null || this.email_details == \"\") {\n        this.email_disable = false;\n      }\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    var check = false;\n    if (this.verify_check){\n      if (this.verify_product_settings.review_message_first == this.review_message_first &&\n        this.verify_product_settings.review_message_second == this.review_message_second &&\n        this.verify_product_settings.contact_help_email == this.contact_us_email &&\n        this.verify_product_settings.contact_us_phone_number == (this.contact_us_phone_number ? this.phoneNumber.formattedNumber : undefined) &&\n        this.verify_product_settings.order_retrieval_only_email_required == this.email_required &&\n        this.verify_product_settings.base_currency.value == this.currency_code.value &&\n        this.verify_product_settings.user_feedback_frequency == this.feedback_question_frequency &&\n        this.verify_product_settings.low_inventory_notification == this.inventory_level_notification &&\n        this.verify_product_settings.limit_up_sell == this.limit_up_sell &&\n        this.verify_product_settings.limit_cross_sell == this.limit_cross_sell &&\n        this.verify_product_settings.sender_email == this.email_details &&\n        this.verify_product_settings.display_products_on_landing == this.is_display_products &&\n        this.verify_product_settings.is_display_banner_on_landing == this.is_display_banner_on_landing &&\n        this.verify_product_settings.display_products_type == this.display_products_type\n        )\n        {\n          check = false;\n        }else{\n          check = true;\n        }\n    }\n    if (check) {\n      Swal({\n        title: \"Are you sure?\",\n        text: \"If you have made any changes in the product settings please save them first, else they will discarded!\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Save\",\n        cancelButtonText: \"Cancel\",\n      }).then((result) => {\n        if (result.value) {\n          this.configure_product_settings(\"email_required\");\n        }else{\n          next();\n        }\n      });\n    } else {\n      next();\n    }\n  },\n  methods: {\n    unique() {\n      let arr = this.currency_list;\n      var u = {},\n        a = [];\n      for (var i = 0, l = arr.length; i < l; ++i) {\n        if (!u.hasOwnProperty(arr[i])) {\n          a.push(arr[i]);\n          u[arr[i]] = 1;\n        }\n      }\n      this.currency_list = a;\n    },\n    email_verification_status() {\n      if (this.email_details != null && this.email_details != \"\") {\n        this.email_disable = true;\n        this.big_spinner = true;\n        axios\n          .post(\n            api_calls.product_settings(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              is_email_verification_status: true,\n              email_id: this.email_details\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.big_spinner = false;\n            if (\n              response.data != \"\" &&\n              response.data != null &&\n              response.data != \"Internal server Error\"\n            ) {\n              var status = response.data.verification_status;\n              this.verification_status =\n                status == \"Success\"\n                  ? \"Success\"\n                  : status == \"Pending\"\n                  ? \"Pending (Please Verify Your Email Address)\"\n                  : status +\n                    \"(The verification link has expired, kindly restart the process by removing the existing email-id.)\";\n            }\n          })\n          .catch(e => {\n            this.big_spinner = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    load_product_settings() {\n      this.email_details = null;\n      this.phone_no_details = null;\n      this.email_required = false;\n      this.currency_code = \"\";\n      this.feedback_question_frequency = 90;\n      this.inventory_level_notification = 5;\n      this.limit_up_sell = 10;\n      this.limit_cross_sell = 10;\n      this.big_spinner = true;\n      axios\n        .post(\n          api_calls.product_settings(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            is_get: true\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          this.big_spinner = false;\n          var webframework = this.retail_web_framework;\n          if (\n            response.data != \"\" &&\n            response.data != null &&\n            response.data != \"Internal server Error\"\n          ) {\n            this.verify_product_settings = response.data[webframework + '_details'];\n            this.review_message_first = \n              response.data[webframework + '_details'].review_message_first;\n            this.review_message_second = \n              response.data[webframework + '_details'].review_message_second;\n            this.contact_us_email = response.data[webframework + '_details'].contact_help_email;\n            this.contact_us_phone_number = response.data[webframework + '_details'].contact_us_phone_number;\n            this.email_details =\n              response.data[webframework + '_details'].sender_email;\n            this.phone_no_details =\n              response.data[webframework + '_details'].sender_phone_no;\n            this.email_required =\n              response.data[webframework + '_details'].order_retrieval_only_email_required;\n            this.currency_code =\n              response.data[webframework + '_details'].base_currency;\n            this.feedback_question_frequency =\n              response.data[webframework + '_details'].user_feedback_frequency;\n            this.inventory_level_notification =\n              response.data[webframework + '_details'].low_inventory_notification;\n            this.limit_up_sell = response.data[webframework + '_details'].limit_up_sell;\n            this.limit_cross_sell =\n              response.data[webframework + '_details'].limit_cross_sell;\n            this.is_display_products = \n              response.data[webframework + '_details'].display_products_on_landing;\n            this.is_display_banner_on_landing = \n              response.data[webframework + '_details'].is_display_banner_on_landing;\n            this.display_products_type = response.data[webframework + '_details'].display_products_type;\n            this.email_verification_status();\n            this.verify_check = true;\n          } else {\n            this.verify_check = false;\n            toastr.error(\"Internal Server Error\");\n          }\n        })\n        .catch(e => {\n          this.big_spinner = false;\n          this.verify_check = false;\n          toastr.error(\"Some Error Occurred.\");\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    configure_product_settings(value) {\n      event.preventDefault();\n      if (value == \"email\") {\n        if(this.disable_btn_expired){\n          this.show_subscription_expired_swal()\n          return false;\n        }\n        Swal.fire({\n          title: \"Are you sure?\",\n          text:\n            \"Please make sure you have entered a correct email address, you will receive an email with the verification link.\",\n          type: \"question\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Yes, Proceed!!\"\n        }).then(result => {\n          if (result.value) {\n            this.big_spinner = true;\n            axios\n              .post(\n                api_calls.product_settings(),\n                {\n                  company_name: this.companyname,\n                  company_id: this.companyid,\n                  email: this.$session.get(\"UserInformation\").email,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  token: this.$session.get(\"UserInformation\").tokens,\n                  is_email: true,\n                  email_id: this.email_details\n                },\n                {\n                  headers: {\n                    Authorization: `Bearer ${this.$session.get(\"at\")}`\n                  }\n                }\n              )\n              .then(response => {\n                this.big_spinner = false;\n                if (response.data == \"Query Executed Successfully\") {\n                  swal({\n                    text:\n                      \"Verification email sent to\" +\n                      \" \" +\n                      this.email_details +\n                      \". Kindly check your email. \\n You will receive an email from sender 'Amazon Web Services'. Please verify that link\",\n                    type: \"success\",\n                    title: \"Success\",\n                    allowOutsideClick: false,\n                    allowEscapeKey: false\n                  });\n                  this.email_disable = true;\n                  this.email_verification_status();\n                  this.load_product_settings();\n                } else {\n                  swal({\n                    text: \"Internal Server Error\",\n                    type: \"error\",\n                    timer: 2000\n                  });\n                }\n              })\n              .catch(e => {\n                this.big_spinner = false;\n                toastr.error(\"Some Error Occurred.\");\n                if (\n                  e.response.status === 410 ||\n                  e.response.status === 440 ||\n                  e.response.status === 409\n                ) {\n                  this.$root.$emit(\"Session_Expired\", e.response.data);\n                }\n              });\n          }\n        });\n      } else if (value == \"phone_no\") {\n        if (this.validPhoneNumber == true) {\n          this.big_spinner = true;\n          axios\n            .post(\n              api_calls.product_settings(),\n              {\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                is_phone_no: true,\n                phone_no: this.phone_no_details\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`\n                }\n              }\n            )\n            .then(response => {\n              this.big_spinner = false;\n              if (response.data == \"Query Executed Successfully\") {\n                swal({\n                  text: \"Phone number saved successfully\",\n                  type: \"success\",\n                  timer: 2000,\n                  title: \"Success\"\n                });\n                this.empty_variable();\n                this.load_product_settings();\n              } else {\n                swal({\n                  text: \"Internal Server Error\",\n                  type: \"error\",\n                  timer: 2000\n                });\n              }\n            })\n            .catch(e => {\n              this.big_spinner = false;\n              toastr.error(\"Some Error Occurred.\");\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        } else {\n          toastr.error(\n            \"Mobile number is invalid, please enter in format: + CountryCode Number\"\n          );\n        }\n      } else if (value == \"email_required\") {\n        if(this.validEmail != true){\n          swal({\n            text: \"Please enter a valid Email Address\",\n            type: \"warning\",\n            timer: 3000\n          });\n          return\n        }\n        if(!Boolean(this.phoneNumber)){\n          swal({\n            text: \"Please enter a valid Phone Number\",\n            type: \"warning\",\n            timer: 3000\n          });\n          return\n        }else if(this.phoneNumber.isValid != true){\n          swal({\n            text: \"Please enter a valid Phone Number\",\n            type: \"warning\",\n            timer: 3000\n          });\n          return\n        }\n        if (this.review_message_first === '' &&\n          this.review_message_second === ''){\n          swal({\n            text: \"Please enter a message for review and ratings\",\n            type: \"warning\",\n            timer: 3500\n          });\n          return\n        }\n        if(this.is_display_products === true && \n            (this.display_products_type === null || this.display_products_type === '')){\n          swal({\n            text: \"Please select display product type\",\n            type: \"warning\",\n            timer: 5000\n          });\n          return\n        }\n        if (\n          this.inventory_level_notification < 0 ||\n          this.feedback_question_frequency < 0\n        ) {\n          swal({\n            text: \"Numerical value can not be less then zero\",\n            type: \"warning\",\n            timer: 3000\n          });\n        } else if (\n          this.limit_up_sell == null ||\n          this.limit_up_sell <= 0 ||\n          this.limit_cross_sell == null ||\n          this.limit_cross_sell <= 0\n        ) {\n          swal({\n            text:\n              \"Up-sell and Cross-sell limit values cannot be less than zero\",\n            type: \"warning\",\n            timer: 3000\n          });\n        } else {\n          this.big_spinner = true;\n          axios\n            .post(\n              api_calls.product_settings(),\n              {\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                is_email_required: true,\n                email_required: {\n                  review_message_first:this.review_message_first,\n                  review_message_second:this.review_message_second,\n                  contact_help_email:this.contact_us_email,\n                  contact_us_phone_number:this.phoneNumber.formattedNumber,\n                  order_retrieval_only_email_required: this\n                    .email_required,\n                  base_currency: this.currency_code,\n                  user_feedback_frequency: this\n                    .feedback_question_frequency,\n                  low_inventory_notification: this\n                    .inventory_level_notification,\n                  limit_up_sell: this.limit_up_sell,\n                  limit_cross_sell: this.limit_cross_sell,\n                  display_products_on_landing: this.is_display_products,\n                  is_display_banner_on_landing: this.is_display_banner_on_landing,\n                  display_products_type: this.is_display_products? this.display_products_type: null,\n                  \"shop_settings_saved\": true\n                }\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`\n                }\n              }\n            )\n            .then(response => {\n              this.big_spinner = false;\n              if (response.data == \"Query Executed Successfully\") {\n                swal({\n                  text: \"Your changes have been saved successfully\",\n                  type: \"success\",\n                  timer: 4000\n                });\n                this.empty_variable();\n                this.load_product_settings();\n              } else {\n                swal({\n                  text: \"Internal Server Error\",\n                  type: \"error\",\n                  timer: 2000\n                });\n              }\n            })\n            .catch(e => {\n              this.big_spinner = false;\n              toastr.error(\"Some Error Occurred.\");\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      } else if (value == \"email_remove\") {\n        Swal.fire({\n          title: \"Are you sure?\",\n          text:\n            \"Once you remove the saved email address, you will have to add and verify the email again before you can send emails!\",\n          type: \"question\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Yes, Remove!!\"\n        }).then(result => {\n          if (result.value) {\n            this.big_spinner = true;\n            axios\n              .post(\n                api_calls.product_settings(),\n                {\n                  company_name: this.companyname,\n                  company_id: this.companyid,\n                  email: this.$session.get(\"UserInformation\").email,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  token: this.$session.get(\"UserInformation\").tokens,\n                  is_remove_email: true,\n                  email_id: this.email_details\n                },\n                {\n                  headers: {\n                    Authorization: `Bearer ${this.$session.get(\"at\")}`\n                  }\n                }\n              )\n              .then(response => {\n                this.big_spinner = false;\n                if (response.data == \"Query Executed Successfully\") {\n                  swal({\n                    text: \"Email Id has been removed successfully!\",\n                    type: \"success\",\n                    timer: 5000,\n                    title: \"Success\"\n                  });\n                  this.email_disable = false;\n                  this.email_details = null;\n                  this.empty_variable();\n                  this.load_product_settings();\n                } else {\n                  swal({\n                    text: \"Internal Server Error\",\n                    type: \"error\",\n                    timer: 2000\n                  });\n                }\n              })\n              .catch(e => {\n                this.big_spinner = false;\n                toastr.error(\"Some Error Occurred.\");\n                if (\n                  e.response.status === 410 ||\n                  e.response.status === 440 ||\n                  e.response.status === 409\n                ) {\n                  this.$root.$emit(\"Session_Expired\", e.response.data);\n                }\n              });\n          }\n        });\n      }\n    },\n    empty_variable() {\n      this.email_details = null;\n      this.email_required = false;\n      this.currency_code = \"\";\n      this.feedback_question_frequency = 90;\n      this.inventory_level_notification = 5;\n      this.phone_no_details = null;\n      this.limit_up_sell = 10;\n      this.limit_cross_sell = 10;\n    }\n  }\n};\n</script>\n<style scoped>\n.dash-modal .btn-wrap .darkblue-btn {\n  margin-left: 0px;\n  padding: 5px 20px !important;\n}\n.darkblue-btn {\n  display: block !important;\n}\n.btn {\n  display: flex !important;\n  padding: 5px 20px !important;\n  font-size: 14px !important;\n}\n</style>\n<style>\n.multiselect__tags {\n    min-height: 42px !important;\n}\n</style>"]}]}