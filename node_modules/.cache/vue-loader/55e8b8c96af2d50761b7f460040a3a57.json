{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue","mtime":1663910265474},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBjdXJyZW5jeSBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0N1cnJlbmN5IjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCB7IGZyZWV6ZV9wb3J0YWwsIHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCB9IGZyb20gIkAvcG9ydGFsL21peGlucyI7CmltcG9ydCBWdWVQaG9uZU51bWJlcklucHV0IGZyb20gInZ1ZS1waG9uZS1udW1iZXItaW5wdXQiOwppbXBvcnQgInZ1ZS1waG9uZS1udW1iZXItaW5wdXQvZGlzdC92dWUtcGhvbmUtbnVtYmVyLWlucHV0LmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZHVjdFNldHRpbmdzUGFnZSIsCiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3QsCiAgICBWdWVQaG9uZU51bWJlcklucHV0LAogIH0sCiAgbWl4aW5zOiBbZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGhvbmVOdW1iZXI6IG51bGwsCiAgICAgIGNvbnRhY3RfdXNfcGhvbmVfbnVtYmVyOiBudWxsLAogICAgICBpbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uOiA1LAogICAgICBjdXJyZW5jeV9jb2RlOiAiIiwKICAgICAgY3VycmVuY3lfbGlzdDogW10sCiAgICAgIGZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeTogOTAsCiAgICAgIHBob25lX25vX2Rpc2FibGU6IGZhbHNlLAogICAgICBlbWFpbF9kaXNhYmxlOiBmYWxzZSwKICAgICAgcmVzZXRfaWNvbl9wYXRoOiByZXF1aXJlKCJAL3BvcnRhbC9hc3NldHMvaW1nL3Jlc2V0X2ljb24uc3ZnIiksCiAgICAgIHZlcmlmaWNhdGlvbl9zdGF0dXM6IG51bGwsCiAgICAgIGJpZ19zcGlubmVyOiBmYWxzZSwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgaXNfZGlzcGxheV9wcm9kdWN0czogZmFsc2UsCiAgICAgIGRpc3BsYXlfcHJvZHVjdHNfaWQ6IHRydWUsCiAgICAgIGRpc3BsYXlfcHJvZHVjdHNfdHlwZTogbnVsbCwKICAgICAgb3JkZXJfbm90aWZpY2F0aW9uOiBmYWxzZSwKICAgICAgaXNfd2hhdHNhcHBfaW50ZWdyYXRlZDogZmFsc2UsCiAgICAgIGRpc3BsYXlfbm90aWZpY2F0aW9uX2VtYWlsOnRydWUsCiAgICAgIGRpc3BsYXlfbm90aWZpY2F0aW9uX3doYXRzYXBwOiBmYWxzZSwKICAgICAgZGlzcGxheV9ub3RpZmljYXRpb25fc3RhdHVzOiBbXSwKICAgICAgZW1haWxfcmVxdWlyZWQ6IGZhbHNlLAogICAgICBwaG9uZV9ub19kZXRhaWxzOiBudWxsLAogICAgICBlbWFpbF9kZXRhaWxzOiBudWxsLAogICAgICBlbWFpbF9yZXF1aXJlZF9pZDogdHJ1ZSwKICAgICAgcGhvbmVfbnVtYmVyX3ZhbGlkaXR5OiAvXCtbMC05XXs5LDE0fSQvLAogICAgICBlbWFpbF92YWxpZGl0eToKICAgICAgICAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICBsaW1pdF91cF9zZWxsOiAxMCwKICAgICAgbGltaXRfY3Jvc3Nfc2VsbDogMTAsCiAgICAgIGNvbnRhY3RfdXNfZW1haWw6ICIiLAogICAgICByZXZpZXdfbWVzc2FnZV9maXJzdDogIiIsCiAgICAgIHJldmlld19tZXNzYWdlX3NlY29uZDogIiIsCiAgICAgIHJldGFpbF93ZWJfZnJhbWV3b3JrOiB0aGlzLiRzZXNzaW9uLmdldCgicmV0YWlsX3dlYl9mcmFtZXdvcmsiKSwKICAgICAgaXNfd2hhdHNhcHBfc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgid2hhdHNhcHBfc3Vic2NyaXB0aW9uIiksCiAgICAgIHZlcmlmeV9wcm9kdWN0X3NldHRpbmdzOiBbXSwKICAgICAgdmVyaWZ5X2NoZWNrOiBmYWxzZSwKICAgICAgaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZzogZmFsc2UsCiAgICAgIGRpc2FibGVfYnRuX2V4cGlyZWQ6IGZhbHNlLAogICAgICB1bnN1YnNjcmliZV9saW5rOiBudWxsLAogICAgICB1bnN1YnNjcmliZV9saW5rX3R5cGU6ICJzdGFuZGFyZCIsCiAgICAgIHJlZ19ob3N0OgogICAgICAgIC9odHRwczpcL1wvWyh3d3dcLik/YS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIoWy1hLXpBLVowLTlAOiVfXCsufiM/JlwvXC89XSopL2ksCiAgICAgIHRyYWNraW5nX3VybDogbnVsbCwKICAgICAgdXJsX3BhcmFtZXRlcjogW10sCiAgICAgIG5ld190cmFja2luZ191cmw6IHt9LAogICAgICBnZXRfdHJhY2tpbmdfdXJsOiBmYWxzZSwKICAgICAgbWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZDogbnVsbCwKICAgICAgbWF4X25vdGlmaWNhdGlvbl9jb3VudDogbnVsbCwKICAgICAgYWJhbmRvbmVkX2VtYWlsX29wdGlvbjogJ1NlbGVjdCBub3RpZmljYXRpb24gcGVyaW9kJywKICAgICAgY2FydF9ub3RpZmljYXRpb25fbGlzdDogW10sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQogICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICB9LCAxMDAwKTsKICAgIHRoaXMuJHJvb3QuJG9uKCJQcm9kdWN0U2V0dGluZ3NQYWdlRGlzYWJsZWQiLCAoZGF0YSkgPT4gewogICAgICBpZiAoZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5yZXRhaWxfd2ViX2ZyYW1ld29yayA9IHRoaXMuJHNlc3Npb24uZ2V0KCJyZXRhaWxfd2ViX2ZyYW1ld29yayIpOwogICAgdGhpcy5pc193aGF0c2FwcF9pbnRlZ3JhdGVkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIndoYXRzYXBwX3N1YnNjcmlwdGlvbiIpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW5jeS5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLmN1cnJlbmN5X2xpc3QucHVzaCh7CiAgICAgICAgZGlzcGxheV9uYW1lOgogICAgICAgICAgY3VycmVuY3lbaV0uZW1vamkgKwogICAgICAgICAgIiAiICsKICAgICAgICAgIGN1cnJlbmN5W2ldLmN1cnJlbmN5X2NvZGUgKwogICAgICAgICAgIiAtICIgKwogICAgICAgICAgY3VycmVuY3lbaV0uY3VycmVuY3lfbmFtZSwKICAgICAgICB2YWx1ZTogY3VycmVuY3lbaV0uY3VycmVuY3lfY29kZSwKICAgICAgfSk7CiAgICB9CiAgICAvLyB0aGlzLnVuaXF1ZSgpOwogICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICAkKCdbZGF0YS10b2dnbGU9InBvcG92ZXIiXScpLnBvcG92ZXIoKTsKICAgIC8vIGxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgdGhpcy4kcm9vdC4kZW1pdCgiY2hhbmdlX3NpZGViYXJfbWFpbl9tZW51IiwgIlN0b3JlIik7CiAgfSwKICBjb21wdXRlZDogewogICAgdmFsaWRQaG9uZU51bWJlcigpIHsKICAgICAgaWYgKHRoaXMucGhvbmVfbm9fZGV0YWlscyAhPSBudWxsKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5waG9uZV9udW1iZXJfdmFsaWRpdHkudGVzdCgKICAgICAgICAgICAgdGhpcy5waG9uZV9ub19kZXRhaWxzLnJlcGxhY2UoL1xzKy9nLCAiIikKICAgICAgICAgICkKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3ZhbGlkX3BoX25vX21zZycpICsiQ291bnRyeUNvZGUgTnVtYmVyIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZEVtYWlsKCkgewogICAgICBpZiAodGhpcy5jb250YWN0X3VzX2VtYWlsICE9IG51bGwpIHsKICAgICAgICBpZiAodGhpcy5lbWFpbF92YWxpZGl0eS50ZXN0KHRoaXMuY29udGFjdF91c19lbWFpbCkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50bHQoInByb2R1Y3RfY29uZmlnX3ZhbGlkX2VtYWlsX2FkZHJlc3NfbXNnIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdmFsaWRVcmwoKSB7CiAgICAgIGlmICh0aGlzLmNvbnRhY3RfdXNfZW1haWwgIT0gbnVsbCkgewogICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlX2xpbmtfdHlwZSA9PT0gInN0YW5kYXJkIikgewogICAgICAgICAgdGhpcy51bnN1YnNjcmliZV9saW5rID0gbnVsbDsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWdfaG9zdC50ZXN0KHRoaXMudW5zdWJzY3JpYmVfbGluaykpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50bHQoInByb2R1Y3RfY29uZmlnX3ZhbGlkX3VybF9tc2ciKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgZW1haWxfZGV0YWlscygpIHsKICAgICAgaWYgKHRoaXMuZW1haWxfZGV0YWlscyA9PSBudWxsIHx8IHRoaXMuZW1haWxfZGV0YWlscyA9PSAiIikgewogICAgICAgIHRoaXMuZW1haWxfZGlzYWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCiAgYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIGNoZWNrID0gZmFsc2U7CiAgICBpZiAodGhpcy52ZXJpZnlfY2hlY2spIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MucmV2aWV3X21lc3NhZ2VfZmlyc3QgPT0KICAgICAgICAgIHRoaXMucmV2aWV3X21lc3NhZ2VfZmlyc3QgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLnJldmlld19tZXNzYWdlX3NlY29uZCA9PQogICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQgJiYKICAgICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MubWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZCA9PQogICAgICAgICAgdGhpcy5taW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkICYmCiAgICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLm1heF9ub3RpZmljYXRpb25fY291bnQgPT0KICAgICAgICAgIHRoaXMubWF4X25vdGlmaWNhdGlvbl9jb3VudCAmJgogICAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5hYmFuZG9uZWRfZW1haWxfb3B0aW9uID09CiAgICAgICAgICB0aGlzLmFiYW5kb25lZF9lbWFpbF9vcHRpb24gJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmNvbnRhY3RfaGVscF9lbWFpbCA9PQogICAgICAgICAgdGhpcy5jb250YWN0X3VzX2VtYWlsICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5jb250YWN0X3VzX3Bob25lX251bWJlciA9PQogICAgICAgICAgKHRoaXMuY29udGFjdF91c19waG9uZV9udW1iZXIKICAgICAgICAgICAgPyB0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlcgogICAgICAgICAgICA6IHVuZGVmaW5lZCkgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLm9yZGVyX3JldHJpZXZhbF9vbmx5X2VtYWlsX3JlcXVpcmVkID09CiAgICAgICAgICB0aGlzLmVtYWlsX3JlcXVpcmVkICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy51c2VyX2ZlZWRiYWNrX2ZyZXF1ZW5jeSA9PQogICAgICAgICAgdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3kgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmxvd19pbnZlbnRvcnlfbm90aWZpY2F0aW9uID09CiAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24gJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmxpbWl0X3VwX3NlbGwgPT0gdGhpcy5saW1pdF91cF9zZWxsICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5saW1pdF9jcm9zc19zZWxsID09CiAgICAgICAgICB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLnNlbmRlcl9lbWFpbCA9PSB0aGlzLmVtYWlsX2RldGFpbHMgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmRpc3BsYXlfcHJvZHVjdHNfb25fbGFuZGluZyA9PQogICAgICAgICAgdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5pc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nID09CiAgICAgICAgICB0aGlzLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmcgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmRpc3BsYXlfcHJvZHVjdHNfdHlwZSA9PQogICAgICAgICAgdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgICYmCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5jYXJ0X25vdGlmaWNhdGlvbl9saXN0ID09CiAgICAgICAgICB0aGlzLmNhcnRfbm90aWZpY2F0aW9uX2xpc3QKICAgICAgKSB7CiAgICAgICAgY2hlY2sgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGVjayA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIGlmIChjaGVjayAmJiAhdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkKSB7CiAgICAgIFN3YWwoewogICAgICAgIHRpdGxlOiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc3dhbF9tc2cnKSwKICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc3dhbF9hbGVydF9tc2cnKSwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc2F2ZV9tc2cnKSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfY2FuY2VsX21zZycpLAogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICB0aGlzLmNvbmZpZ3VyZV9wcm9kdWN0X3NldHRpbmdzKCJlbWFpbF9yZXF1aXJlZCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHVuaXF1ZSgpIHsKICAgICAgbGV0IGFyciA9IHRoaXMuY3VycmVuY3lfbGlzdDsKICAgICAgdmFyIHUgPSB7fSwKICAgICAgICBhID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7ICsraSkgewogICAgICAgIGlmICghdS5oYXNPd25Qcm9wZXJ0eShhcnJbaV0pKSB7CiAgICAgICAgICBhLnB1c2goYXJyW2ldKTsKICAgICAgICAgIHVbYXJyW2ldXSA9IDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuY3VycmVuY3lfbGlzdCA9IGE7CiAgICB9LAogICAgZW1haWxfdmVyaWZpY2F0aW9uX3N0YXR1cygpIHsKICAgICAgaWYgKHRoaXMuZW1haWxfZGV0YWlscyAhPSBudWxsICYmIHRoaXMuZW1haWxfZGV0YWlscyAhPSAiIikgewogICAgICAgIHRoaXMuZW1haWxfZGlzYWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBpc19lbWFpbF92ZXJpZmljYXRpb25fc3RhdHVzOiB0cnVlLAogICAgICAgICAgICAgIGVtYWlsX2lkOiB0aGlzLmVtYWlsX2RldGFpbHMsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLkVNQUlMX05PVF9DT05GSUdVUkVELk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgdGhpcy52ZXJpZmljYXRpb25fc3RhdHVzID0gdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3VwZGF0ZV9lbWFpbF9tc2cnKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLmRhdGEgIT0gbnVsbCl7CiAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHJlc3BvbnNlLmRhdGEuZGF0YS52ZXJpZmljYXRpb25fc3RhdHVzOwogICAgICAgICAgICAgIHRoaXMudmVyaWZpY2F0aW9uX3N0YXR1cyA9CiAgICAgICAgICAgICAgICBzdGF0dXMgPT0gIlN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgID8gIlN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgIDogc3RhdHVzID09ICJQZW5kaW5nIgogICAgICAgICAgICAgICAgICA/IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19wZW5kaW5nX2VtYWlsX21zZycpCiAgICAgICAgICAgICAgICAgIDogc3RhdHVzICsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfdmVyaWZpY2F0aW9uX21zZycpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGxvYWRfcHJvZHVjdF9zZXR0aW5ncygpIHsKICAgICAgdGhpcy5lbWFpbF9kZXRhaWxzID0gbnVsbDsKICAgICAgdGhpcy5waG9uZV9ub19kZXRhaWxzID0gbnVsbDsKICAgICAgdGhpcy5lbWFpbF9yZXF1aXJlZCA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbmN5X2NvZGUgPSAiIjsKICAgICAgdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3kgPSA5MDsKICAgICAgdGhpcy5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uID0gNTsKICAgICAgdGhpcy5saW1pdF91cF9zZWxsID0gMTA7CiAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA9IDEwOwogICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc19nZXQ6IHRydWUsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgbGV0IHdlYmZyYW1ld29yayA9IHRoaXMucmV0YWlsX3dlYl9mcmFtZXdvcms7CiAgICAgICAgICBpZih3ZWJmcmFtZXdvcmspewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSAKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl07CiAgICAgICAgICAgIHRoaXMucmV2aWV3X21lc3NhZ2VfZmlyc3QgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5yZXZpZXdfbWVzc2FnZV9maXJzdDsKICAgICAgICAgICAgdGhpcy5taW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0ubWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZDsKICAgICAgICAgICAgICB0aGlzLm1heF9ub3RpZmljYXRpb25fY291bnQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5tYXhfbm90aWZpY2F0aW9uX2NvdW50OwogICAgICAgICAgICAgIHRoaXMuYWJhbmRvbmVkX2VtYWlsX29wdGlvbiA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmFiYW5kb25lZF9lbWFpbF9vcHRpb247CiAgICAgICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5yZXZpZXdfbWVzc2FnZV9zZWNvbmQ7CiAgICAgICAgICAgIHRoaXMuY29udGFjdF91c19lbWFpbCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmNvbnRhY3RfaGVscF9lbWFpbDsKICAgICAgICAgICAgdGhpcy5jb250YWN0X3VzX3Bob25lX251bWJlciA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmNvbnRhY3RfdXNfcGhvbmVfbnVtYmVyOwogICAgICAgICAgICB0aGlzLmVtYWlsX2RldGFpbHMgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5zZW5kZXJfZW1haWw7CiAgICAgICAgICAgIHRoaXMucGhvbmVfbm9fZGV0YWlscyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLnNlbmRlcl9waG9uZV9ubzsKICAgICAgICAgICAgdGhpcy5lbWFpbF9yZXF1aXJlZCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhWwogICAgICAgICAgICAgICAgd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIgogICAgICAgICAgICAgIF0ub3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ7CiAgICAgICAgICAgIHRoaXMuY3VycmVuY3lfY29kZSA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmJhc2VfY3VycmVuY3k7CiAgICAgICAgICAgIHRoaXMub3JkZXJfbm90aWZpY2F0aW9uID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0ub3JkZXJfbm90aWZpY2F0aW9uID09IAogICAgICAgICAgICAgIHVuZGVmaW5lZCAKICAgICAgICAgICAgICA/IGZhbHNlIAogICAgICAgICAgICAgIDogcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLm9yZGVyX25vdGlmaWNhdGlvbjsKICAgICAgICAgICAgdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3kgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS51c2VyX2ZlZWRiYWNrX2ZyZXF1ZW5jeTsKICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbCiAgICAgICAgICAgICAgICB3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiCiAgICAgICAgICAgICAgXS5sb3dfaW52ZW50b3J5X25vdGlmaWNhdGlvbjsKICAgICAgICAgICAgdGhpcy5saW1pdF91cF9zZWxsID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0ubGltaXRfdXBfc2VsbDsKICAgICAgICAgICAgdGhpcy5saW1pdF9jcm9zc19zZWxsID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0ubGltaXRfY3Jvc3Nfc2VsbDsKICAgICAgICAgICAgdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbCiAgICAgICAgICAgICAgICB3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiCiAgICAgICAgICAgICAgXS5kaXNwbGF5X3Byb2R1Y3RzX29uX2xhbmRpbmc7CiAgICAgICAgICAgIHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhWwogICAgICAgICAgICAgICAgd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIgogICAgICAgICAgICAgIF0uaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZzsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5kaXNwbGF5X3Byb2R1Y3RzX3R5cGU7CiAgICAgICAgICAgIHRoaXMuY2FydF9ub3RpZmljYXRpb25fbGlzdCA9IAogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5jYXJ0X25vdGlmaWNhdGlvbl9saXN0OwogICAgICAgICAgICB0aGlzLnRyYWNraW5nX3VybCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLnNoaXBtZW50X3RyYWNraW5nX3VybCA9PT0KICAgICAgICAgICAgICB1bmRlZmluZWQKICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgOiByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uc2hpcG1lbnRfdHJhY2tpbmdfdXJsCiAgICAgICAgICAgICAgICAgICAgLnVybDsKICAgICAgICAgICAgdGhpcy51cmxfcGFyYW1ldGVyID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uc2hpcG1lbnRfdHJhY2tpbmdfdXJsID09PQogICAgICAgICAgICAgIHVuZGVmaW5lZAogICAgICAgICAgICAgICAgPyBbXQogICAgICAgICAgICAgICAgOiByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uc2hpcG1lbnRfdHJhY2tpbmdfdXJsCiAgICAgICAgICAgICAgICAgICAgLnBhcmFtczsKICAgICAgICAgICAgLy8gdGhpcy5nZXRfdHJhY2tpbmdfdXJsID0gQm9vbGVhbih0aGlzLnRyYWNraW5nX3VybCk7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fc3RhdHVzID0gICByZXNwb25zZS5kYXRhLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uYWJhbmRvbmVkX2NhcnRfbm90aWZpY2F0aW9uX2NoYW5uZWxzCiAgICAgICAgICAgIHRoaXMuZW1haWxfdmVyaWZpY2F0aW9uX3N0YXR1cygpOwogICAgICAgICAgICB0aGlzLnZlcmlmeV9jaGVjayA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnZlcmlmeV9jaGVjayA9IGZhbHNlOwogICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3N3YWxfaW50ZXJuYWxfc2VydmVyX21zZycpKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICggdGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl9zdGF0dXMgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fc3RhdHVzLmluY2x1ZGVzKCJlbWFpbCIpID8gdGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl9lbWFpbCA9IHRydWUgOiB0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX2VtYWlsID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fc3RhdHVzLmluY2x1ZGVzKCJ3aGF0c2FwcCIpID8gdGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl93aGF0c2FwcCA9IHRydWUgOiB0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX3doYXRzYXBwID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUgCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHM7CiAgICAgICAgICAgIHRoaXMucmV2aWV3X21lc3NhZ2VfZmlyc3QgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLnJldmlld19tZXNzYWdlX2ZpcnN0OwogICAgICAgICAgICB0aGlzLm1pbnV0ZXNfYWZ0ZXJfY2FydF9hYmFuZG9uZWQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLm1pbnV0ZXNfYWZ0ZXJfY2FydF9hYmFuZG9uZWQ7CiAgICAgICAgICAgICAgdGhpcy5tYXhfbm90aWZpY2F0aW9uX2NvdW50ID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGEuZGV0YWlscy5tYXhfbm90aWZpY2F0aW9uX2NvdW50OwogICAgICAgICAgICAgIHRoaXMuYWJhbmRvbmVkX2VtYWlsX29wdGlvbiA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuYWJhbmRvbmVkX2VtYWlsX29wdGlvbjsKICAgICAgICAgICAgICB0aGlzLnJldmlld19tZXNzYWdlX3NlY29uZCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMucmV2aWV3X21lc3NhZ2Vfc2Vjb25kOwogICAgICAgICAgICB0aGlzLmNvbnRhY3RfdXNfZW1haWwgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLmNvbnRhY3RfaGVscF9lbWFpbDsKICAgICAgICAgICAgdGhpcy5jb250YWN0X3VzX3Bob25lX251bWJlciA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuY29udGFjdF91c19waG9uZV9udW1iZXI7CiAgICAgICAgICAgIHRoaXMuZW1haWxfZGV0YWlscyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuc2VuZGVyX2VtYWlsOwogICAgICAgICAgICB0aGlzLnBob25lX25vX2RldGFpbHMgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLnNlbmRlcl9waG9uZV9ubzsKICAgICAgICAgICAgdGhpcy5lbWFpbF9yZXF1aXJlZCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMub3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ7CiAgICAgICAgICAgIHRoaXMuY3VycmVuY3lfY29kZSA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuYmFzZV9jdXJyZW5jeTsKICAgICAgICAgICAgdGhpcy5vcmRlcl9ub3RpZmljYXRpb24gPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLm9yZGVyX25vdGlmaWNhdGlvbiA9PSAKICAgICAgICAgICAgICB1bmRlZmluZWQgCiAgICAgICAgICAgICAgPyBmYWxzZSAKICAgICAgICAgICAgICA6IHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLm9yZGVyX25vdGlmaWNhdGlvbjsKICAgICAgICAgICAgdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3kgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLnVzZXJfZmVlZGJhY2tfZnJlcXVlbmN5OwogICAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24gPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLmxvd19pbnZlbnRvcnlfbm90aWZpY2F0aW9uOwogICAgICAgICAgICB0aGlzLmxpbWl0X3VwX3NlbGwgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLmxpbWl0X3VwX3NlbGw7CiAgICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMubGltaXRfY3Jvc3Nfc2VsbDsKICAgICAgICAgICAgdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGEuZGV0YWlscy5kaXNwbGF5X3Byb2R1Y3RzX29uX2xhbmRpbmc7CiAgICAgICAgICAgIHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZzsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLmRpc3BsYXlfcHJvZHVjdHNfdHlwZTsKICAgICAgICAgICAgdGhpcy5jYXJ0X25vdGlmaWNhdGlvbl9saXN0ID0gCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuY2FydF9ub3RpZmljYXRpb25fbGlzdDsKICAgICAgICAgICAgdGhpcy50cmFja2luZ191cmwgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLnNoaXBtZW50X3RyYWNraW5nX3VybCA9PT0KICAgICAgICAgICAgICB1bmRlZmluZWQKICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgOiByZXNwb25zZS5kYXRhLmRhdGEuZGV0YWlscy5zaGlwbWVudF90cmFja2luZ191cmwKICAgICAgICAgICAgICAgICAgICAudXJsOwogICAgICAgICAgICB0aGlzLnVybF9wYXJhbWV0ZXIgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kZXRhaWxzLnNoaXBtZW50X3RyYWNraW5nX3VybCA9PT0KICAgICAgICAgICAgICB1bmRlZmluZWQKICAgICAgICAgICAgICAgID8gW10KICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuZGF0YS5kYXRhLmRldGFpbHMuc2hpcG1lbnRfdHJhY2tpbmdfdXJsCiAgICAgICAgICAgICAgICAgICAgLnBhcmFtczsKICAgICAgICAgICAgLy8gdGhpcy5nZXRfdHJhY2tpbmdfdXJsID0gQm9vbGVhbih0aGlzLnRyYWNraW5nX3VybCk7CiAgICAgICAgICAgIHRoaXMuZW1haWxfdmVyaWZpY2F0aW9uX3N0YXR1cygpOwogICAgICAgICAgICB0aGlzLnZlcmlmeV9jaGVjayA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fc3RhdHVzID0gICByZXNwb25zZS5kYXRhLmRhdGEuZGV0YWlscy5hYmFuZG9uZWRfY2FydF9ub3RpZmljYXRpb25fY2hhbm5lbHMKICAgICAgICAgIH1lbHNlIGlmKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5OT19EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSApewogICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ25vX2RhdGFfdGV4dCcpLAogICAgICAgICAgICAgIHRpbWVyOjMwMDAsIAogICAgICAgICAgICAgIHRvYXN0OnRydWUsCiAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsICAgCiAgICAgICAgICB9KTsgCiAgICAgICAgICB9IAogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMudmVyaWZ5X2NoZWNrID0gZmFsc2U7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcih0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc3dhbF9pbnRlcm5hbF9zZXJ2ZXJfbXNnJykpOwogICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCB0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX3N0YXR1cyAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl9zdGF0dXMuaW5jbHVkZXMoImVtYWlsIikgPyB0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX2VtYWlsID0gdHJ1ZSA6IHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fZW1haWwgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl9zdGF0dXMuaW5jbHVkZXMoIndoYXRzYXBwIikgPyB0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX3doYXRzYXBwID0gdHJ1ZSA6IHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fd2hhdHNhcHAgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudmVyaWZ5X2NoZWNrID0gZmFsc2U7CiAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3N3YWxfZXJyb3Jfb2NjdXJyZWRfbXNnJykpOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgY29uZmlndXJlX3Byb2R1Y3Rfc2V0dGluZ3ModmFsdWUpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVfYnRuX2V4cGlyZWQpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGlmICh2YWx1ZSA9PSAiZW1haWwiKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3N3YWxfbXNnMScpLAogICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc3dhbF9hbGVydF9tc2cxJyksCiAgICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3N3YWxfY29uZmlybV9tc2cnKSwKICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgICAgaXNfZW1haWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZW1haWxfaWQ6IHRoaXMuZW1haWxfZGV0YWlscywKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuU1VDQ0VTU0ZVTF9EQl9RVUVSWS5NU0dfQ09ERSkgewogICAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgICAgdGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX2VtYWlsX3NlbmRfbXNnMScpICsKICAgICAgICAgICAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX2VtYWlsX3NlbmRfbXNnMicpICsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX2VtYWlsX3NlbmRfbXNnMycpLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19zd2FsX3N1Y2Nlc3NfbXNnJyksCiAgICAgICAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsX3ZlcmlmaWNhdGlvbl9zdGF0dXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3Byb2R1Y3Rfc2VydmVyX2Vycm9yX21zZycpLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19wcm9kdWN0X2Vycm9yX29jY3VycmVkX21zZycpKTsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAicGhvbmVfbm8iKSB7CiAgICAgICAgICBpZiAodGhpcy52YWxpZFBob25lTnVtYmVyID09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICBhcGlfY2FsbHMucHJvZHVjdF9zZXR0aW5ncygpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgICAgaXNfcGhvbmVfbm86IHRydWUsCiAgICAgICAgICAgICAgICAgIHBob25lX25vOiB0aGlzLnBob25lX25vX2RldGFpbHMsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5TVUNDRVNTRlVMX0RCX1FVRVJZLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19waG9uZV9udW1iZXJfbXNnJyksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfaW50ZXJuYWxfc2VydmVyX2FsZXJ0X21zZycpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3NvbWVfZXJyb3JfbXNnJykpOwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgICAgdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX21vYmlsZV9ub19hbGVydF9tc2cnKSArIiBDb3VudHJ5Q29kZSBOdW1iZXIiCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAiZW1haWxfcmVxdWlyZWQiKSB7CiAgICAgICAgICB0aGlzLmNyZWF0ZV90cmFja2luZ191cmwoKTsKICAgICAgICAgIGlmICh0aGlzLnZhbGlkRW1haWwgIT0gdHJ1ZSAmJiAhQm9vbGVhbih0aGlzLnBob25lTnVtYmVyKSkgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfdmFsaWRfZGV0YWlsX2FsZXJ0X21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGlmKCFCb29sZWFuKHRoaXMucGhvbmVOdW1iZXIpKXsKICAgICAgICAgIC8vICAgc3dhbCh7CiAgICAgICAgICAvLyAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIHZhbGlkIFBob25lIE51bWJlciIsCiAgICAgICAgICAvLyAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgLy8gICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgLy8gICByZXR1cm4KICAgICAgICAgIC8vIH1lbHNlCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5waG9uZU51bWJlcikgJiYKICAgICAgICAgICAgQm9vbGVhbih0aGlzLnBob25lTnVtYmVyLnBob25lTnVtYmVyKSAmJgogICAgICAgICAgICB0aGlzLnBob25lTnVtYmVyLmlzVmFsaWQgIT0gdHJ1ZQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19waG9uZV9ub19tc2cnKSwKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMucmV2aWV3X21lc3NhZ2VfZmlyc3QgPT09ICIiICYmCiAgICAgICAgICAgIHRoaXMucmV2aWV3X21lc3NhZ2Vfc2Vjb25kID09PSAiIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19yZXZpZXdfcmF0aW5nX2FsZXJ0X21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzID09PSB0cnVlICYmCiAgICAgICAgICAgICh0aGlzLmRpc3BsYXlfcHJvZHVjdHNfdHlwZSA9PT0gbnVsbCB8fAogICAgICAgICAgICAgIHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlID09PSAiIikKICAgICAgICAgICkgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfcHJvZHVjdF90eXBlX2FsZXJ0X21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogNTAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uIDwgMCB8fAogICAgICAgICAgICB0aGlzLmZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeSA8IDAKICAgICAgICAgICkgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfbnVtZXJpY192YWx1ZV9hbGVydF9tc2cnKSwKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuY3VycmVuY3lfY29kZSA9PSAiIiB8fCB0aGlzLmN1cnJlbmN5X2NvZGUgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19iYXNlX2N1cnJlbmN5X2FsZXJ0X21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA9PSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA8PSAwIHx8CiAgICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA9PSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA8PSAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3Vwc2VsbF9jcm9zc19hbGVydF9tc2cnKSwKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5jYXJ0X25vdGlmaWNhdGlvbl9saXN0ID0gW107CiAgICAgICAgICAgIGlmKHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fZW1haWwgPT0gdHJ1ZSAmJiB0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX3doYXRzYXBwID09IHRydWUpIHsKICAgICAgICAgICAgICB0aGlzLmNhcnRfbm90aWZpY2F0aW9uX2xpc3QucHVzaCgiZW1haWwiLCAid2hhdHNhcHAiKTsKICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl9lbWFpbCA9PSB0cnVlICYmIHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fd2hhdHNhcHAgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICB0aGlzLmNhcnRfbm90aWZpY2F0aW9uX2xpc3QucHVzaCgiZW1haWwiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmRpc3BsYXlfbm90aWZpY2F0aW9uX3doYXRzYXBwID09IHRydWUgJiYgdGhpcy5kaXNwbGF5X25vdGlmaWNhdGlvbl9lbWFpbCA9PSBmYWxzZSkgewogICAgICAgICAgICAgIHRoaXMuY2FydF9ub3RpZmljYXRpb25fbGlzdC5wdXNoKCJ3aGF0c2FwcCIpOwogICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy5jYXJ0X25vdGlmaWNhdGlvbl9saXN0LnB1c2goKTsKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheV9ub3RpZmljYXRpb25fc3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICBpc19lbWFpbF9yZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZW1haWxfcmVxdWlyZWQ6IHsKICAgICAgICAgICAgICAgICAgICByZXZpZXdfbWVzc2FnZV9maXJzdDogdGhpcy5yZXZpZXdfbWVzc2FnZV9maXJzdCwKICAgICAgICAgICAgICAgICAgICBtaW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkOiB0aGlzLm1pbnV0ZXNfYWZ0ZXJfY2FydF9hYmFuZG9uZWQsCiAgICAgICAgICAgICAgICAgICAgbWF4X25vdGlmaWNhdGlvbl9jb3VudDogdGhpcy5tYXhfbm90aWZpY2F0aW9uX2NvdW50LAogICAgICAgICAgICAgICAgICAgIGFiYW5kb25lZF9lbWFpbF9vcHRpb246IHRoaXMuYWJhbmRvbmVkX2VtYWlsX29wdGlvbiwKICAgICAgICAgICAgICAgICAgICBhYmFuZG9uZWRfY2FydF9ub3RpZmljYXRpb25fY2hhbm5lbHM6IHRoaXMuY2FydF9ub3RpZmljYXRpb25fbGlzdCwKICAgICAgICAgICAgICAgICAgICByZXZpZXdfbWVzc2FnZV9zZWNvbmQ6IHRoaXMucmV2aWV3X21lc3NhZ2Vfc2Vjb25kLAogICAgICAgICAgICAgICAgICAgIGNvbnRhY3RfaGVscF9lbWFpbDogdGhpcy5jb250YWN0X3VzX2VtYWlsLAogICAgICAgICAgICAgICAgICAgIGNvbnRhY3RfdXNfcGhvbmVfbnVtYmVyOgogICAgICAgICAgICAgICAgICAgICAgQm9vbGVhbih0aGlzLnBob25lTnVtYmVyKSAmJgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5waG9uZU51bWJlci5pc1ZhbGlkID09IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBob25lTnVtYmVyLmZvcm1hdHRlZE51bWJlcgogICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgb3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ6IHRoaXMuZW1haWxfcmVxdWlyZWQsCiAgICAgICAgICAgICAgICAgICAgb3JkZXJfbm90aWZpY2F0aW9uOiB0aGlzLmlzX3doYXRzYXBwX2ludGVncmF0ZWQgPyB0aGlzLm9yZGVyX25vdGlmaWNhdGlvbiA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGJhc2VfY3VycmVuY3k6IHRoaXMuY3VycmVuY3lfY29kZSwKICAgICAgICAgICAgICAgICAgICB1c2VyX2ZlZWRiYWNrX2ZyZXF1ZW5jeTogdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3ksCiAgICAgICAgICAgICAgICAgICAgbG93X2ludmVudG9yeV9ub3RpZmljYXRpb246CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24sCiAgICAgICAgICAgICAgICAgICAgbGltaXRfdXBfc2VsbDogdGhpcy5saW1pdF91cF9zZWxsLAogICAgICAgICAgICAgICAgICAgIGxpbWl0X2Nyb3NzX3NlbGw6IHRoaXMubGltaXRfY3Jvc3Nfc2VsbCwKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3Byb2R1Y3RzX29uX2xhbmRpbmc6IHRoaXMuaXNfZGlzcGxheV9wcm9kdWN0cywKICAgICAgICAgICAgICAgICAgICBpc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nOgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nLAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfcHJvZHVjdHNfdHlwZTogdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzCiAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlCiAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgc2hpcG1lbnRfdHJhY2tpbmdfdXJsOiB0aGlzLm5ld190cmFja2luZ191cmwsCiAgICAgICAgICAgICAgICAgICAgc2hvcF9zZXR0aW5nc19zYXZlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlNVQ0NFU1NGVUxfREJfUVVFUlkuTVNHX0NPREUpIHsKICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX2NoYW5nZXNfc2F2ZWRfbXNnJyksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiA0MDAwLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX2ludGVybmFsX3NlcnZlcl9tc2cyJyksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcih0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc29tZV9lcnJvcl9tc2cyJykpOwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAiZW1haWxfcmVtb3ZlIikgewogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19zd2FsX21zZzInKSwKICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3N3YWxfYWxlcnRfbXNnMicpLAogICAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19zd2FsX3JlbW92ZV9tc2cyJyksCiAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OgogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICAgIGlzX3JlbW92ZV9lbWFpbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlbWFpbF9pZDogdGhpcy5lbWFpbF9kZXRhaWxzLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5TVUNDRVNTRlVMX0RCX1FVRVJZLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfc3dhbF9jb25maXJtX21zZzInKSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiA1MDAwLAogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19zd2FsX3N1Y2Nlc3NfbGFiZWxfbXNnJyksCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF9kZXRhaWxzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19pbnRlcm5hbF9zZXJ2ZXJfbXNnMycpLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19zb21lX2Vycm9yX21zZzMnKSk7CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gInVuc3Vic2NyaWJlX3Byb21vdGlvbmFsX2VtYWlsIikgewogICAgICAgICAgaWYgKHRoaXMudmFsaWRVcmwgIT0gdHJ1ZSkgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgncHJvZHVjdF9jb25maWdfdmFsaWRfdXJsX21zZycpLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgIGlzX2VtYWlsX3JlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICBlbWFpbF9yZXF1aXJlZDogewogICAgICAgICAgICAgICAgICAgIHJldmlld19tZXNzYWdlX2ZpcnN0OiB0aGlzLnJldmlld19tZXNzYWdlX2ZpcnN0LAogICAgICAgICAgICAgICAgICAgIHJldmlld19tZXNzYWdlX3NlY29uZDogdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgbWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZDogdGhpcy5taW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkLAogICAgICAgICAgICAgICAgICAgIG1heF9ub3RpZmljYXRpb25fY291bnQ6IHRoaXMubWF4X25vdGlmaWNhdGlvbl9jb3VudCwKICAgICAgICAgICAgICAgICAgICBhYmFuZG9uZWRfZW1haWxfb3B0aW9uOiB0aGlzLmFiYW5kb25lZF9lbWFpbF9vcHRpb24sCiAgICAgICAgICAgICAgICAgICAgYWJhbmRvbmVkX2NhcnRfbm90aWZpY2F0aW9uX2NoYW5uZWxzOiB0aGlzLmNhcnRfbm90aWZpY2F0aW9uX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgY29udGFjdF9oZWxwX2VtYWlsOiB0aGlzLmNvbnRhY3RfdXNfZW1haWwsCiAgICAgICAgICAgICAgICAgICAgLy8gY29udGFjdF91c19waG9uZV9udW1iZXI6dGhpcy5waG9uZU51bWJlci5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgb3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ6IHRoaXMuZW1haWxfcmVxdWlyZWQsCiAgICAgICAgICAgICAgICAgICAgb3JkZXJfbm90aWZpY2F0aW9uOiB0aGlzLmlzX3doYXRzYXBwX2ludGVncmF0ZWQgPyB0aGlzLm9yZGVyX25vdGlmaWNhdGlvbiA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGJhc2VfY3VycmVuY3k6IHRoaXMuY3VycmVuY3lfY29kZSwKICAgICAgICAgICAgICAgICAgICB1c2VyX2ZlZWRiYWNrX2ZyZXF1ZW5jeTogdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3ksCiAgICAgICAgICAgICAgICAgICAgbG93X2ludmVudG9yeV9ub3RpZmljYXRpb246CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24sCiAgICAgICAgICAgICAgICAgICAgbGltaXRfdXBfc2VsbDogdGhpcy5saW1pdF91cF9zZWxsLAogICAgICAgICAgICAgICAgICAgIGxpbWl0X2Nyb3NzX3NlbGw6IHRoaXMubGltaXRfY3Jvc3Nfc2VsbCwKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3Byb2R1Y3RzX29uX2xhbmRpbmc6IHRoaXMuaXNfZGlzcGxheV9wcm9kdWN0cywKICAgICAgICAgICAgICAgICAgICBpc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nOgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nLAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfcHJvZHVjdHNfdHlwZTogdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzCiAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlCiAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgc2hvcF9zZXR0aW5nc19zYXZlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZV9saW5rOiB0aGlzLnVuc3Vic2NyaWJlX2xpbmssCiAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmVfbGlua190eXBlOiB0aGlzLnVuc3Vic2NyaWJlX2xpbmtfdHlwZSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlNVQ0NFU1NGVUxfREJfUVVFUlkuTVNHX0NPREUpIHsKICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX2NoYW5nZXNfc2F2ZWRfbXNnMicpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogNDAwMCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdwcm9kdWN0X2NvbmZpZ19pbnRlcm5hbF9zZXJ2ZXJfbXNnNCcpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ3Byb2R1Y3RfY29uZmlnX3NvbWVfZXJyb3JfbXNnNCcpKTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICB9CiAgICB9LAogICAgZW1wdHlfdmFyaWFibGUoKSB7CiAgICAgIHRoaXMuZW1haWxfZGV0YWlscyA9IG51bGw7CiAgICAgIHRoaXMuZW1haWxfcmVxdWlyZWQgPSBmYWxzZTsKICAgICAgdGhpcy5jdXJyZW5jeV9jb2RlID0gIiI7CiAgICAgIHRoaXMuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5ID0gOTA7CiAgICAgIHRoaXMuaW52ZW50b3J5X2xldmVsX25vdGlmaWNhdGlvbiA9IDU7CiAgICAgIHRoaXMucGhvbmVfbm9fZGV0YWlscyA9IG51bGw7CiAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA9IDEwOwogICAgICB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwgPSAxMDsKICAgICAgdGhpcy5vcmRlcl9ub3RpZmljYXRpb24gPSBmYWxzZTsKICAgIH0sCiAgICAvLyBhZGRfcGFyYW1ldGVyKCl7CiAgICAvLyAgIGxldCBuZXh0X2lkID1NYXRoLnJhbmRvbSgpOwogICAgLy8gICBpZiAoQm9vbGVhbih0aGlzLnRyYWNraW5nX3VybCkgKSB7CiAgICAvLyAgICAgdGhpcy51cmxfcGFyYW1ldGVyLnB1c2goewogICAgLy8gICAgIGtleTogbnVsbCwKICAgIC8vICAgICBpZDogbmV4dF9pZCwKICAgIC8vICAgICB2YWx1ZTogbnVsbAogICAgLy8gICB9CiAgICAvLyAgICkKICAgIC8vICAgfWVsc2V7CiAgICAvLyAgICAgc3dhbCh7CiAgICAvLyAgICAgICB0ZXh0OiAiQWRkICBTaGlwbWVudCB0cmFja2luZyBVUkwgIiwKICAgIC8vICAgICAgIHRvYXN0OiB0cnVlLAogICAgLy8gICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgIC8vICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgIC8vICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgIC8vICAgICAgIHRpbWVyOiAyNTAwLAogICAgLy8gICAgIH0pOwogICAgLy8gICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIGRlbGV0ZV9wYXJhbWV0ZXIoaW5kZXgpewogICAgLy8gICBpZigKICAgIC8vICAgICB0aGlzLnVybF9wYXJhbWV0ZXIubGVuZ3RoID09PSAwCiAgICAvLyAgICkgewogICAgLy8gICAgIHN3YWwoewogICAgLy8gICAgICAgdGV4dDogIkF0bGVhc3Qgb25lIHVybF9wYXJhbWV0ZXIgaXMgcmVxdWlyZWQgdG8gYWRkIGJ1dHRvbnMiLAogICAgLy8gICAgICAgdG9hc3Q6IHRydWUsCiAgICAvLyAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgLy8gICAgICAgdHlwZTogIndhcm5pbmciLAogICAgLy8gICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgLy8gICAgICAgdGltZXI6IDI1MDAsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIGxldCB0ZW1wX2luZGV4ID0gbnVsbDsKICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnVybF9wYXJhbWV0ZXIubGVuZ3RoOyBpKyspIHsKICAgIC8vICAgICBpZiAodGhpcy51cmxfcGFyYW1ldGVyW2ldLmlkID09IGluZGV4KSB7CiAgICAvLyAgICAgICB0ZW1wX2luZGV4ID0gaTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vICAgdGhpcy51cmxfcGFyYW1ldGVyLnNwbGljZSh0ZW1wX2luZGV4LCAxKTsKICAgIC8vIH0sCiAgICBjcmVhdGVfdHJhY2tpbmdfdXJsKCkgewogICAgICB0aGlzLm5ld190cmFja2luZ191cmxbInVybCJdID0gdGhpcy50cmFja2luZ191cmw7CiAgICAgIHRoaXMubmV3X3RyYWNraW5nX3VybFsicGFyYW1zIl0gPSB0aGlzLnVybF9wYXJhbWV0ZXI7CiAgICB9LAogIH0sCn07Cg=="},null]}