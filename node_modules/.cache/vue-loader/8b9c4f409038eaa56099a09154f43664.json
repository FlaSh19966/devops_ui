{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/End User Response/VerifyResponses.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/End User Response/VerifyResponses.vue","mtime":1659525100380},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCB7IHNldFRpbWVvdXQgfSBmcm9tICJ0aW1lcnMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IHVuYW5zd2VyZWRSZXNwb25zZXMgZnJvbSAiLi9WZXJpZnlSZXNwb25zZXNVbmFuc3dlcmVkLnZ1ZSI7CmltcG9ydCB1bmFuc3dlcmVkRmVlZGJhY2sgZnJvbSAiLi9WZXJpZnlSZXNwb25zZXNVc2VyRmVlZGJhY2sudnVlIjsKaW1wb3J0IHVuc2VhcmNoYWJsZVByb2R1Y3QgZnJvbSAiLi9WZXJpZnlSZXNwb25zZXNVbnNlYXJjaGFibGVQcm9kdWN0LnZ1ZSI7CmltcG9ydCB7IGZyZWV6ZV9wb3J0YWwsIHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCB9IGZyb20gIkAvcG9ydGFsL21peGlucyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlZlcmlmeVJlc3BvbnNlUGFnZSIsCiAgbWl4aW5zOiBbCiAgICBmcmVlemVfcG9ydGFsLAogICAgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsCiAgXSwKICBjb21wb25lbnRzOiB7CiAgICBNdWx0aXNlbGVjdCwKICAgIHVuYW5zd2VyZWRSZXNwb25zZXMsCiAgICB1bmFuc3dlcmVkRmVlZGJhY2ssCiAgICB1bnNlYXJjaGFibGVQcm9kdWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdW5hbnN3ZXJlZF9saXN0OiBbXSwKICAgICAgdXNlcl9yb2xlOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSwKICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIGludGVudF9saXN0OiBbXSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgaW50ZW50bGlzdDogIiIsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgcGFnZV9ubzogMSwKICAgICAgdG90YWxfcGFnZXM6IDAsCiAgICAgIHNob3dfbG9hZGVyOiBmYWxzZSwKICAgICAgbnVtYmVyX29mX3Jvd3M6IG51bGwsCiAgICAgIHNlYXJjaF9uYW1lOiAiIiwKICAgICAgcGFnZV9hcnJheTogW10sCiAgICAgIG9sZF9xdWVzdGlvbjogIiIsCiAgICAgIG9sZF9pbnRlbnQ6ICIiLAogICAgICBuZXdfaW50ZW50X2xpc3Q6IFtdLAogICAgICBvbGRfZGF0YTogeyBxdWVzdGlvbjogbnVsbCwgaW50ZW50OiBudWxsIH0sCiAgICAgIHRodW1ic19kb3duX2ljb246IHJlcXVpcmUoIkAvcG9ydGFsL2Fzc2V0cy9pbWcvR3JvdXAgNjEuc3ZnIiksCiAgICAgIHRodW1ic191cF9pY29uOiByZXF1aXJlKCJAL3BvcnRhbC9hc3NldHMvaW1nL0dyb3VwIDcxLnN2ZyIpLAogICAgICB2aWV3X2NvbXBvbmVudF9uYW1lOiAidXNlcl9yZXNwb25zZXMiLAogICAgICBpc1Zpc2libGVTZWFyY2hDbGVhcjogZmFsc2UsCiAgICAgIGludGVudF9tb2RlbF9pbnByb2dyZXNzOiBmYWxzZSwKICAgICAgd2FudF9zdGF0dXM6IHRydWUsCiAgICAgIGRpc2FibGVfYnRuX2V4cGlyZWQ6IGZhbHNlLAogICAgICBzaG93X3N5bmNfYnV0dG9uOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICB9LCAxMDAwKTsgICAKICAgIHRoaXMuJHJvb3QuJG9uKCJWZXJpZnlSZXNwb25zZVBhZ2VEaXNhYmxlZCIsIChkYXRhKSA9PnsKICAgICAgaWYoZGF0YT09PXRydWUpewogICAgICAgIHRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pCiAgICB2YXIgdm0gPSB0aGlzOwogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogICAgLy8gJCgiI3VuYW5zd2VyZWRfcXVlc3Rpb25zLXRhYiIpLmNsaWNrKCk7CiAgICAkKCIjdXNlcl9yZXNwb25zZXMtdGFiIikuY2xpY2soKTsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMubW9kYWxfb3Blbl9zd2l0Y2hfdGFiID09PSBmYWxzZSkgewogICAgICAvLyB0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPSAidXNlcl9yZXNwb25zZXMiOwogICAgICAvLyAkKCIjdXNlcl9yZXNwb25zZXMtdGFiIikuY2xpY2soKTsKICAgICAgJCgiI3VuYW5zd2VyZWRfcXVlc3Rpb25zLXRhYiIpLmNsaWNrKCk7CiAgICAgIHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9ICJ1bmFuc3dlcmVkX3F1ZXN0aW9ucyI7CiAgICAgIC8vICQoIiN1bnNlYXJjaGFibGVfcHJvZHVjdC10YWIiKS5jbGljaygpOwogICAgICAvLyB0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPSAidW5zZWFyY2hhYmxlX3Byb2R1Y3QiOwogICAgfQogICAgaWYodGhpcy4kcm91dGUucXVlcnkuc3dpdGNoID09PSAndHJ1ZScpewogICAgICB0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPSAidXNlcl9yZXNwb25zZXMiOwogICAgICAkKCIjdXNlcl9yZXNwb25zZXMtdGFiIikuY2xpY2soKTsKICAgICAgJCgiI3Vuc2VhcmNoYWJsZV9wcm9kdWN0LXRhYiIpLmNsaWNrKCk7CiAgICB9CiAgICB0aGlzLiRyb290LiRlbWl0KCdjaGFuZ2Vfc2lkZWJhcl9tYWluX21lbnUnLCAnVHJhaW5pbmcgSHViJyk7CiAgICB0aGlzLiRyb290LiRvbigic2VuZF9tb2RlbF9zdGF0dXMiLCBkYXRhID0+ewogICAgICBpZiAoZGF0YSA9PSB0cnVlKXsKICAgICAgICB0aGlzLmNoZWNrX2ludGVudF9tb2RlbF9zdGF0dXMoKTsKICAgICAgfQogICAgfSkKICAgIHRoaXMuJHJvb3QuJG9uKCJzaG93X3N5bmNfYnV0dG9uIiwgKGRhdGEpID0+IHsKICAgICAgaWYoZGF0YSA9PT0gdHJ1ZSl7CiAgICAgICAgdGhpcy5zaG93X3N5bmNfYnV0dG9uID10cnVlOwogICAgICB9CiAgICAgIH0pOwogICAgdGhpcy5jaGVja19pbnRlbnRfbW9kZWxfc3RhdHVzKCk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkX3ZlcmlmeV9yZXNwb25zZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgICAgY2xlYXJfc2VhcmNoX25hbWUoKXsKICAgICAgdGhpcy5zZWFyY2hfbmFtZSA9ICIiOwogICAgfSwKICAgIGNoZWNrX2ludGVudF9tb2RlbF9zdGF0dXMoKXsKICAgIHRoaXMubW9kZWxfc3RhdHVzID0gdGhpcy4kc2Vzc2lvbi5nZXQoIk1vZGVsU3RhdHVzIik7CiAgICBpZiAodGhpcy5tb2RlbF9zdGF0dXMgPT0gIk5vIEZhaWx1cmUiKXsKICAgIHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPSBmYWxzZTsKICAgIH0KICAgIGVsc2UgaWYgKEJvb2xlYW4odGhpcy5tb2RlbF9zdGF0dXMuaW50ZW50X21vZGVsKSA9PT0gdHJ1ZSkKICAgIHsKICAgICBpZih0aGlzLm1vZGVsX3N0YXR1cy5pbnRlbnRfbW9kZWwgPT0gIkluUHJvZ3Jlc3MiKXsKICAgICAgIHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPSB0cnVlOwogICAgIH0KICAgICBlbHNlewogICAgICAgdGhpcy5pbnRlbnRfbW9kZWxfaW5wcm9ncmVzcyA9IGZhbHNlOwogICAgIH0KICAgIH0KICAgIGVsc2V7CiAgICAgIHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPSBmYWxzZTsgCiAgICB9CiAgICB9LAogICAgc2hvd19tb2RlbF9wcm9ncmVzcyhpbmRleCl7CiAgICAgIGlmKHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPT0gdHJ1ZSl7CiAgICAgICAgIGlmIChpbmRleCA9PSAnc3R5bGUnKXsKICAgICAgICAgICAgcmV0dXJuICJjdXJzb3I6IG5vdC1hbGxvd2VkIjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYoaW5kZXggPT0gJ3RpdGxlJyl7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGx0KCd2ZXJpZnlfcmVzcG9uc2VfdHJhaW5pbmdfaW5fcHJvZ3Jlc3NfbXNnJyk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZXsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGxvYWRfdmVyaWZ5X3Jlc3BvbnNlcygpewogICAgdGhpcy5zaG93X2xvYWRlciA9IHRydWU7CiAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgdGhpcy5zZWFyY2hfbmFtZSA9ICIiOwogICAgaWYgKHRoaXMudXNlcl9yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpKSB7CiAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQogICAgaWYgKHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9PT0gInVuYW5zd2VyZWRfcXVlc3Rpb25zIikgewogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoImxvYWRfdmVyaWZ5X3Jlc3BvbnNlc191bmFuc3dlcmVkIiwgdHJ1ZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy52aWV3X2NvbXBvbmVudF9uYW1lID09PSAidXNlcl9yZXNwb25zZXMiKSB7CiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgibG9hZF92ZXJpZnlfcmVzcG9uc2VzX3VzZXJfZmVlZGJhY2siLCB0cnVlKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPT09ICJ1bnNlYXJjaGFibGVfcHJvZHVjdCIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJsb2FkX3ZlcmlmeV9yZXNwb25zZXNfdXNlcl9mZWVkYmFjayIsIHRydWUpOwogICAgICB9CiAgICAvLyBpZiAodGhpcy5jb21wYW55bmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAvLyAgIGF4aW9zCiAgICAvLyAgICAgLnBvc3QoCiAgICAvLyAgICAgICBhcGlfY2FsbHMuZ2V0X3VuYW5zd2VyZWRfdXJsKCksCiAgICAvLyAgICAgICB7CiAgICAvLyAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICBpc0RlbGV0ZTogIkZhbHNlIiwKICAgIC8vICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgIC8vICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubywKICAgIC8vICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICB9LAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKQogICAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGFbMF0ubGVuZ3RoOwogICAgLy8gICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGFbNF0ucGFnZWNvdW50OwogICAgLy8gICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgLy8gICAgICAgZm9yICh2YXIgaSBpbiBkYXRhWzBdKSB7CiAgICAvLyAgICAgICAgIGxldCB0ZW1wX2ludCA9ICIiOwogICAgLy8gICAgICAgICBpZiAoQm9vbGVhbihkYXRhWzJdW2ldKSkgewogICAgLy8gICAgICAgICAgIHRlbXBfaW50ID0gZGF0YVsyXVtpXS5yZXBsYWNlKHRoaXMuY29tcGFueWlkICsgIl8iLCAiIik7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgdGhpcy51bmFuc3dlcmVkX2xpc3QucHVzaCh7CiAgICAvLyAgICAgICAgICAgcXVlc3Rpb246IGRhdGFbMF1baV0sCiAgICAvLyAgICAgICAgICAgaW50ZW50OiB0ZW1wX2ludCwKICAgIC8vICAgICAgICAgICBzb3VyY2U6IGRhdGFbMV1baV0sCiAgICAvLyAgICAgICAgICAgdXNlcl9yZXNwb25zZTogZGF0YVsyXVtpXSwKICAgIC8vICAgICAgICAgICB1c2VyX2ZlZWRiYWNrOiBkYXRhWzNdW2ldLAogICAgLy8gICAgICAgICAgIGVkaXQ6IGZhbHNlLAogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgLy8gICAgICAgdGhpcy5zaG93X2xvYWRlciA9IGZhbHNlOwogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICBpZiAoCiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgICApIHsKICAgIC8vICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRvYXN0ci5lcnJvcihlLm1lc3NhZ2UpOwogICAgLy8gICAgICAgfQogICAgLy8gICAgICAgdGhpcy5zaG93X2xvYWRlciA9IGZhbHNlOwogICAgLy8gICAgIH0pOwogICAgLy8gfQogICAgLy8gYXhpb3MKICAgIC8vICAgLnBvc3QoCiAgICAvLyAgICAgYXBpX2NhbGxzLmdldF91bmFuc3dlcmVkX3VybCgpLAogICAgLy8gICAgIHsKICAgIC8vICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgIGlzRHJvcGRvd246ICJUcnVlIiwKICAgIC8vICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgfSwKICAgIC8vICAgICB7CiAgICAvLyAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICB9CiAgICAvLyAgICkKICAgIC8vICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhWzBdKSB7CiAgICAvLyAgICAgICB0aGlzLmludGVudF9saXN0LnB1c2goCiAgICAvLyAgICAgICAgIHJlc3BvbnNlLmRhdGFbMF1baV0ucmVwbGFjZSh0aGlzLmNvbXBhbnlpZCArICJfIiwgIiIpCiAgICAvLyAgICAgICApOwogICAgLy8gICAgICAgdGhpcy5uZXdfaW50ZW50X2xpc3QucHVzaCgKICAgIC8vICAgICAgICAgcmVzcG9uc2UuZGF0YVswXVtpXS5yZXBsYWNlKHRoaXMuY29tcGFueWlkICsgIl8iLCAiIikKICAgIC8vICAgICAgICk7CiAgICAvLyAgICAgfQogICAgLy8gICB9KQogICAgLy8gICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgKSB7CiAgICAvLyAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSk7CiAgICB9LAogICAgdHJhaW5faW50ZW50X21vZGVsKCkgewogICAgICBpZighdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkKXsKICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgLy8gaWYgKHRoaXMudW5hbnN3ZXJlZF9saXN0Lmxlbmd0aCA+PSAxKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3ZlcmlmeV9yZXNwX3N3YWxfYWxlcnRfbXNnJyksCiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgndmVyaWZ5X3Jlc3BfdHJhaW5fbW9kZWxfbXNnJyksCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgndmVyaWZ5X3Jlc3Bfc3dhbF9jb25maXJtX21zZycpLAogICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlLAogICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgYXBpX2NhbGxzLnRyYWluX2ludGVudF9tb2RlbCgpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikKICAgICAgICAgICAgICAgICAgICAuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgICAgZXBvY2hzOiAxMDAsCiAgICAgICAgICAgICAgICAgIHVwZGF0ZV9tb2RlbDogdHJ1ZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLndhbnRfc3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIndhbnRfbW9kZWxfc3RhdHVzIix0aGlzLndhbnRfc3RhdHVzKTsKICAgICAgICAgICAgICB0aGlzLmNoZWNrX2ludGVudF9tb2RlbF9zdGF0dXMoKTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuQ09SRV9NT0RFTF9JU19CRUlOR19UUkFJTkVELk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0cpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFTlRfTU9ERUxfQkVJTkdfVFJBSU5FRF9QUkVNSVVNLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0cpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuVFJBSU5JTkdfTElNSVRfRVhDRUVELk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHKTsKICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7fWVsc2V7CiAgICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICAgIH0KICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICB0b2FzdHIuZXJyb3IoIllvdSBtdXN0IGhhdmUgYXRsZWFzdCBvbmUgcXVlc3Rpb24gdG8gdHJhaW4geW91ciBtb2RlbCIpOwogICAgICAvLyB9CiAgICB9LAogICAgc2VhcmNoX3F1ZXN0aW9uKCkgewogICAgICBpZiAodGhpcy52aWV3X2NvbXBvbmVudF9uYW1lID09PSAidW5hbnN3ZXJlZF9xdWVzdGlvbnMiKSB7CiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgic2VhcmNoX3VuYW5zd2VyZWQiLCB0aGlzLnNlYXJjaF9uYW1lKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPT09ICJ1c2VyX3Jlc3BvbnNlcyIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJzZWFyY2hfdXNlcl9yZXNwb25zZXMiLCB0aGlzLnNlYXJjaF9uYW1lKTsKICAgICAgfWVsc2UgaWYgKHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9PT0gInVuc2VhcmNoYWJsZV9wcm9kdWN0IikgewogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoInNlYXJjaF91c2VyX3Jlc3BvbnNlcyIsIHRoaXMuc2VhcmNoX25hbWUpOwogICAgICB9CiAgICAgIC8vIGlmKHRoaXMuc2VhcmNoX2J5IT0nJyl7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJoZXkiKTsKICAgICAgLy8gaWYgKHRoaXMuc2VhcmNoX25hbWUgIT0gIiIpIHsKICAgICAgLy8gICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIC8vICAgYXhpb3MKICAgICAgLy8gICAgIC5wb3N0KAogICAgICAvLyAgICAgICBhcGlfY2FsbHMuZ2V0X3VuYW5zd2VyZWRfdXJsKCksCiAgICAgIC8vICAgICAgIHsKICAgICAgLy8gICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAvLyAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAvLyAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIC8vICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgLy8gICAgICAgICBpc3NlYXJjaDogdHJ1ZSwKICAgICAgLy8gICAgICAgICAvLyBzZWFyY2hieTogdGhpcy5zZWFyY2hfYnksCiAgICAgIC8vICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAvLyAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAvLyAgICAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIC8vICAgICAgIH0sCiAgICAgIC8vICAgICAgIHsKICAgICAgLy8gICAgICAgICBoZWFkZXJzOiB7CiAgICAgIC8vICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgLy8gICAgICAgICB9LAogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICApCiAgICAgIC8vICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgLy8gICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgLy8gICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJObyBRdWVzdGlvbnMgRm91bmQiKSB7CiAgICAgIC8vICAgICAgICAgdG9hc3RyLmVycm9yKCJObyBRdWVzdGlvbiBGb3VuZCIpOwogICAgICAvLyAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgIC8vICAgICAgICAgfSwgMjUwMCk7CiAgICAgIC8vICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YVs0XS5wYWdlY291bnQgIT0gdW5kZWZpbmVkKSB7CiAgICAgIC8vICAgICAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgLy8gICAgICAgICB0aGlzLnVuYW5zd2VyZWRfbGlzdCA9IFtdOwogICAgICAvLyAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhWzBdLmxlbmd0aDsKICAgICAgLy8gICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YVs0XS5wYWdlY291bnQ7CiAgICAgIC8vICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAvLyAgICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YVswXSkgewogICAgICAvLyAgICAgICAgICAgdGhpcy51bmFuc3dlcmVkX2xpc3QucHVzaCh7CiAgICAgIC8vICAgICAgICAgICAgIHF1ZXN0aW9uOiByZXNwb25zZS5kYXRhWzBdW2ldLAogICAgICAvLyAgICAgICAgICAgICBpbnRlbnQ6ICIiLAogICAgICAvLyAgICAgICAgICAgICBzb3VyY2U6IHJlc3BvbnNlLmRhdGFbMV1baV0sCiAgICAgIC8vICAgICAgICAgICAgIHVzZXJfcmVzcG9uc2U6IGRhdGFbMl1baV0sCiAgICAgIC8vICAgICAgICAgICAgIHVzZXJfZmVlZGJhY2s6IGRhdGFbM11baV0sCiAgICAgIC8vICAgICAgICAgICAgIGVkaXQ6IGZhbHNlLAogICAgICAvLyAgICAgICAgICAgfSk7CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIC8vIGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJObyBRdWVzdGlvbnMgRm91bmQiKSB7CiAgICAgIC8vICAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJObyBRdWVzdGlvbiBGb3VuZCIpOwogICAgICAvLyAgICAgICAvLyAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgICAgICAvLyAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgIC8vICAgICAgIC8vICAgfSwgMjUwMCk7CiAgICAgIC8vICAgICAgIC8vIH0KICAgICAgLy8gICAgICAgZWxzZSB7CiAgICAgIC8vICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgLy8gICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gICAgICAgICAvLyAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgIC8vICAgICAgICAgLy8gICB9LCAyNTAwKTsKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgfSkKICAgICAgLy8gICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAvLyAgICAgICBpZiAoCiAgICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgIC8vICAgICAgICkgewogICAgICAvLyAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0pOwogICAgICAvLyB9IGVsc2UgewogICAgICAvLyAgIHRvYXN0ci5lcnJvcigiRW50ZXIgcHJvcGVyIGRhdGEgZm9yIHNlYXJjaGluZyIpOwogICAgICAvLyB9CiAgICAgIC8vIH1lbHNlewogICAgICAvLyAgIHRvYXN0ci5lcnJvcigiU2VsZWN0IGhlYWRlciBmb3Igc2VhcmNoaW5nIik7CiAgICAgIC8vIH0KICAgIH0sCiAgICAvLyBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgIC8vICAgdGhpcy5wYWdlX2FycmF5ID0gW107CiAgICAvLyAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgLy8gICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgLy8gICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgLy8gICAgIH0KICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgLy8gICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgLy8gICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgLy8gICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgLy8gICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CiAgICAvLyAgICAgZm9yIChsZXQgaSA9IHRoaXMudG90YWxfcGFnZXMgLSA0OyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAvLyAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAvLyAgICAgfQogICAgLy8gICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPD0gNCkgewogICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZV9ubyArIDM7IGkrKykgewogICAgLy8gICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgLy8gICAgIH0KICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgLy8gICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgLy8gICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPj0gdGhpcy50b3RhbF9wYWdlcyAtIDQpIHsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgLy8gICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgLy8gICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgLy8gICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gMzsgaSA8PSBwYWdlX25vICsgMzsgaSsrKSB7CiAgICAvLyAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpKTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIHBhZ2VfcmVxdWlyZShwYWdlKSB7CiAgICAvLyAgIGlmIChwYWdlID09IDAgfHwgcGFnZSA9PSB0aGlzLnRvdGFsX3BhZ2VzICsgMSkgewogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgIC8vICAgICBpZiAocGFnZSA9PSAiLi4ucyIpIHsKICAgIC8vICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgIC8vICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIi4uLmwiKSB7CiAgICAvLyAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKHRoaXMudG90YWxfcGFnZXMgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAvLyAgICAgfQogICAgLy8gICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09ICIiKSB7CiAgICAvLyAgICAgICBheGlvcwogICAgLy8gICAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgICBhcGlfY2FsbHMuZ2V0X3VuYW5zd2VyZWRfdXJsKCksCiAgICAvLyAgICAgICAgICAgewogICAgLy8gICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAvLyAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgIC8vICAgICAgICAgICAgIGlzRGVsZXRlOiAiRmFsc2UiLAogICAgLy8gICAgICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgLy8gICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgICAgfSwKICAgIC8vICAgICAgICAgICB7CiAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICAgICAgfSwKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgICAgICAgdGhpcy51bmFuc3dlcmVkX2xpc3QgPSBbXTsKICAgIC8vICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGFbMF0pIHsKICAgIC8vICAgICAgICAgICAgIHRoaXMudW5hbnN3ZXJlZF9saXN0LnB1c2goewogICAgLy8gICAgICAgICAgICAgICBxdWVzdGlvbjogcmVzcG9uc2UuZGF0YVswXVtpXSwKICAgIC8vICAgICAgICAgICAgICAgaW50ZW50OiAiIiwKICAgIC8vICAgICAgICAgICAgICAgc291cmNlOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgLy8gICAgICAgICAgICAgICB1c2VyX3Jlc3BvbnNlOiByZXNwb25zZS5kYXRhWzJdW2ldLAogICAgLy8gICAgICAgICAgICAgICB1c2VyX2ZlZWRiYWNrOiByZXNwb25zZS5kYXRhWzNdW2ldLAogICAgLy8gICAgICAgICAgICAgICBlZGl0OiBmYWxzZSwKICAgIC8vICAgICAgICAgICAgIH0pOwogICAgLy8gICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgIC8vICAgICAgICAgfSkKICAgIC8vICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICAgICkgewogICAgLy8gICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICBheGlvcwogICAgLy8gICAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgICBhcGlfY2FsbHMuZ2V0X3VuYW5zd2VyZWRfdXJsKCksCiAgICAvLyAgICAgICAgICAgewogICAgLy8gICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgIC8vICAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgLy8gICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgIC8vICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgLy8gICAgICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoX2J5LAogICAgLy8gICAgICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgLy8gICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgICAgICBwYWdlX25vOiBwYWdlLAogICAgLy8gICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgICAgewogICAgLy8gICAgICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgIC8vICAgICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAvLyAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGFbNF0ucGFnZWNvdW50ICE9IHVuZGVmaW5lZCkgewogICAgLy8gICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgIC8vICAgICAgICAgICAgIHRoaXMudW5hbnN3ZXJlZF9saXN0ID0gW107CiAgICAvLyAgICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YVswXS5sZW5ndGg7CiAgICAvLyAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YVs0XS5wYWdlY291bnQ7CiAgICAvLyAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAvLyAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGFbMF0pIHsKICAgIC8vICAgICAgICAgICAgICAgdGhpcy51bmFuc3dlcmVkX2xpc3QucHVzaCh7CiAgICAvLyAgICAgICAgICAgICAgICAgcXVlc3Rpb246IHJlc3BvbnNlLmRhdGFbMF1baV0sCiAgICAvLyAgICAgICAgICAgICAgICAgaW50ZW50OiAiIiwKICAgIC8vICAgICAgICAgICAgICAgICBzb3VyY2U6IHJlc3BvbnNlLmRhdGFbMV1baV0sCiAgICAvLyAgICAgICAgICAgICAgICAgdXNlcl9yZXNwb25zZTogcmVzcG9uc2UuZGF0YVsyXVtpXSwKICAgIC8vICAgICAgICAgICAgICAgICB1c2VyX2ZlZWRiYWNrOiByZXNwb25zZS5kYXRhWzNdW2ldLAogICAgLy8gICAgICAgICAgICAgICAgIGVkaXQ6IGZhbHNlLAogICAgLy8gICAgICAgICAgICAgICB9KTsKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgLy8gICAgICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIkludGVybmFsIFNlcnZlciBFcnJvciIpOwogICAgLy8gICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAvLyAgICAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgLy8gICAgICAgICAgICAgLy8gfSwgMjUwMCk7CiAgICAvLyAgICAgICAgICAgICB0aGlzLmxvYWRfdmVyaWZ5X3Jlc3BvbnNlcygpOwogICAgLy8gICAgICAgICAgIH0KICAgIC8vICAgICAgICAgfSkKICAgIC8vICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICAgICkgewogICAgLy8gICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIHBhZ2VfY2hhbmdlKHBhZ2Vfbm8pIHsKICAgIC8vICAgYXhpb3MKICAgIC8vICAgICAucG9zdCgKICAgIC8vICAgICAgIGFwaV9jYWxscy5nZXRfdW5hbnN3ZXJlZF91cmwoKSwKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAvLyAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAvLyAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubywKICAgIC8vICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICB9LAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKQogICAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGFbM10ubnVtYmVyX29mX3Jvd3M7CiAgICAvLyAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgIC8vICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YVswXSkgewogICAgLy8gICAgICAgICB0aGlzLnVuYW5zd2VyZWRfbGlzdC5wdXNoKHsKICAgIC8vICAgICAgICAgICBxdWVzdGlvbjogcmVzcG9uc2UuZGF0YVswXVtpXSwKICAgIC8vICAgICAgICAgICBpbnRlbnQ6ICIiLAogICAgLy8gICAgICAgICAgIHNvdXJjZTogcmVzcG9uc2UuZGF0YVsxXVtpXSwKICAgIC8vICAgICAgICAgICB1c2VyX3Jlc3BvbnNlOiByZXNwb25zZS5kYXRhWzJdW2ldLAogICAgLy8gICAgICAgICAgIHVzZXJfZmVlZGJhY2s6IHJlc3BvbnNlLmRhdGFbM11baV0sCiAgICAvLyAgICAgICAgICAgZWRpdDogZmFsc2UsCiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICBpZiAoCiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgICApIHsKICAgIC8vICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICB9KTsKICAgIC8vIH0sCiAgICAvLyBxdWVzdGlvbl9zZWxlY3RlZCh2YWx1ZSkgewogICAgLy8gICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgIC8vICAgICBpZiAodmFsdWUgPT0gImFsbCIpIHsKICAgIC8vICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy51bmFuc3dlcmVkX2xpc3QpIHsKICAgIC8vICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0aGlzLnVuYW5zd2VyZWRfbGlzdFtpXSk7CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2godGhpcy51bmFuc3dlcmVkX2xpc3RbdmFsdWVdKTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0gZWxzZSBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAvLyAgICAgaWYgKHZhbHVlICE9ICJhbGwiKSB7CiAgICAvLyAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwogICAgLy8gICAgICAgaWYgKHNlbGVjdGFsbC5jaGVja2VkKSB7CiAgICAvLyAgICAgICAgIHNlbGVjdGFsbC5jaGVja2VkID0gZmFsc2U7CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICB2YXIgdGVtcCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcigocXVlc3Rpb24pID0+IHsKICAgIC8vICAgICAgICAgcmV0dXJuIHF1ZXN0aW9uLnF1ZXN0aW9uICE9PSB2YWx1ZTsKICAgIC8vICAgICAgIH0pOwogICAgLy8gICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0ZW1wOwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIGRlbGV0ZV9zaW5nbGUoaW5kZXgpIHsKICAgIC8vICAgbGV0IHF1ZXN0aW9ubGlzdCA9IFtdOwogICAgLy8gICBTd2FsLmZpcmUoewogICAgLy8gICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAvLyAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBEZWxldGUgdGhpcyBRdWVzdGlvbj8iLAogICAgLy8gICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAvLyAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgIC8vICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgIC8vICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgLy8gICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIsCiAgICAvLyAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdC52YWx1ZSk7CiAgICAvLyAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgLy8gICAgICAgLy8gY29uc29sZS5sb2coImRlbGV0ZWQiKTsKICAgIC8vICAgICAgIHF1ZXN0aW9ubGlzdC5wdXNoKHRoaXMudW5hbnN3ZXJlZF9saXN0W2luZGV4XS5xdWVzdGlvbik7CiAgICAvLyAgICAgICB0aGlzLmRlbGV0ZV9xdWVzdGlvbnNfYXBpKHF1ZXN0aW9ubGlzdCk7CiAgICAvLyAgICAgfQogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICBkZWxldGVfbXVsdGlwbGUoKSB7CiAgICAgIGlmICh0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPT09ICJ1bmFuc3dlcmVkX3F1ZXN0aW9ucyIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJkZWxldGVfbXVsdGlwbGVfdW5hbnN3ZXJlZCIsIHRydWUpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9PT0gInVzZXJfcmVzcG9uc2VzIikgewogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoImRlbGV0ZV9tdWx0aXBsZV91c2VyX3Jlc3BvbnNlcyIsIHRydWUpOwogICAgICB9CiAgICAgIC8vIGlmICh0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAvLyAgIFN3YWwuZmlyZSgiTm8gcXVlc3Rpb24gc2VsZWN0ZWQhIiwgIiIsICJlcnJvciIpOwogICAgICAvLyB9IGVsc2UgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgLy8gICBsZXQgcXVlc3Rpb25saXN0ID0gW107CiAgICAgIC8vICAgU3dhbC5maXJlKHsKICAgICAgLy8gICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgIC8vICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIERlbGV0ZSB0aGlzIFF1ZXN0aW9ucz8iLAogICAgICAvLyAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgLy8gICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgIC8vICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgLy8gICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgIC8vICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiLAogICAgICAvLyAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAvLyAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAvLyAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2hlY2tlZF9saXN0KSB7CiAgICAgIC8vICAgICAgICAgcXVlc3Rpb25saXN0LnB1c2godGhpcy5jaGVja2VkX2xpc3RbaV0ucXVlc3Rpb24pOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIHRoaXMuZGVsZXRlX3F1ZXN0aW9uc19hcGkocXVlc3Rpb25saXN0KTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KTsKICAgICAgLy8gfQogICAgfSwKICAgIC8vIGRlbGV0ZV9xdWVzdGlvbnNfYXBpKHF1ZXN0aW9ubGlzdCkgewogICAgLy8gICBheGlvcwogICAgLy8gICAgIC5wb3N0KAogICAgLy8gICAgICAgYXBpX2NhbGxzLmdldF91bmFuc3dlcmVkX3VybCgpLAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgICAgcXVlc3Rpb25saXN0OiBxdWVzdGlvbmxpc3QsCiAgICAvLyAgICAgICAgIGlzRGVsZXRlOiAiVHJ1ZSIsCiAgICAvLyAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICB9LAogICAgLy8gICAgICAgfQogICAgLy8gICAgICkKICAgIC8vICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJEZWxldGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2coImRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAvLyAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAvLyAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhWzJdLm51bWJlcl9vZl9yb3dzOwogICAgLy8gICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgIC8vICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIkRlbGV0ZWQgU3VjY2Vzc2Z1bGx5Iik7CiAgICAvLyAgICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgLy8gICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgLy8gICAgICAgICAvLyB9LCAxNTAwKTsKICAgIC8vICAgICAgICAgdGhpcy5sb2FkX3ZlcmlmeV9yZXNwb25zZXMoKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIHRoaXMuc2hvd19sb2FkZXIgPSBmYWxzZTsKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaCgoZSkgPT4gewogICAgLy8gICAgICAgaWYgKAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgKSB7CiAgICAvLyAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAvLyAgICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICB0b2FzdHIuZXJyb3IoZS5tZXNzYWdlKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIHRoaXMuc2hvd19sb2FkZXIgPSBmYWxzZTsKICAgIC8vICAgICB9KTsKICAgIC8vIH0sCiAgICAvLyBlZGl0X2l0ZW0oaW5kZXgpIHsKICAgIC8vICAgdGhpcy51bmFuc3dlcmVkX2xpc3RbaW5kZXhdLmVkaXQgPSAhdGhpcy51bmFuc3dlcmVkX2xpc3RbaW5kZXhdLmVkaXQ7CiAgICAvLyAgIHRoaXMub2xkX3F1ZXN0aW9uID0gdGhpcy51bmFuc3dlcmVkX2xpc3RbaW5kZXhdLnF1ZXN0aW9uOwogICAgLy8gICB0aGlzLm9sZF9pbnRlbnQgPSB0aGlzLnVuYW5zd2VyZWRfbGlzdFtpbmRleF0uaW50ZW50OwogICAgLy8gICB0aGlzLm9sZF9kYXRhLnF1ZXN0aW9uID0gdGhpcy5vbGRfcXVlc3Rpb247CiAgICAvLyAgIHRoaXMub2xkX2RhdGEuaW50ZW50ID0gdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLm9sZF9pbnRlbnQ7CiAgICAvLyAgIC8vIHRoaXMucXVlc3Rpb24gPSBxdWVzdGlvbi5xdWVzdGlvbjsKICAgIC8vICAgLy8gdGhpcy5pbnRlbnQgPSBxdWVzdGlvbi5pbnRlbnQ7CiAgICAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMub2xkX2RhdGEpOwogICAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLm9sZF9xdWVzdGlvbik7CiAgICAvLyB9LAogICAgYWRkX3F1ZXN0aW9ucygpIHsKICAgICAgaWYoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCl7CiAgICAgIGlmICh0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPT09ICJ1bmFuc3dlcmVkX3F1ZXN0aW9ucyIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJhZGRfcXVlc3Rpb25zX3VuYW5zd2VyZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPT09ICJ1c2VyX3Jlc3BvbnNlcyIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJhZGRfcXVlc3Rpb25zX3VzZXJfcmVzcG9uc2VzIiwgdHJ1ZSk7CiAgICAgIH19ZWxzZXsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICB9CiAgICAgIC8vIHRoaXMuc2hvd19sb2FkZXIgPSB0cnVlOwogICAgICAvLyB2YXIgcXVlc3Rpb25saXN0ID0gW107CiAgICAgIC8vIHZhciB0ZW1wX2xpc3QgPSBbXTsKICAgICAgLy8gdmFyIGVtcHR5ID0gdGhpcy51bmFuc3dlcmVkX2xpc3QuZmlsdGVyKCh1bmFuc3dlcmVkKSA9PiB7CiAgICAgIC8vICAgcmV0dXJuIHVuYW5zd2VyZWQuaW50ZW50ID09ICIiOwogICAgICAvLyB9KTsKICAgICAgLy8gZm9yICh2YXIgaSBpbiB0aGlzLnVuYW5zd2VyZWRfbGlzdCkgewogICAgICAvLyAgIGlmICh0aGlzLnVuYW5zd2VyZWRfbGlzdFtpXS5pbnRlbnQgIT0gIiIpIHsKICAgICAgLy8gICAgIHRlbXBfbGlzdC5wdXNoKAogICAgICAvLyAgICAgICB0aGlzLnVuYW5zd2VyZWRfbGlzdFtpXS5xdWVzdGlvbiwKICAgICAgLy8gICAgICAgdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLnVuYW5zd2VyZWRfbGlzdFtpXS5pbnRlbnQKICAgICAgLy8gICAgICk7CiAgICAgIC8vICAgICBxdWVzdGlvbmxpc3QucHVzaCh0ZW1wX2xpc3QpOwogICAgICAvLyAgIH0KICAgICAgLy8gICB0ZW1wX2xpc3QgPSBbXTsKICAgICAgLy8gfQogICAgICAvLyBpZiAocXVlc3Rpb25saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgLy8gICBheGlvcwogICAgICAvLyAgICAgLnBvc3QoCiAgICAgIC8vICAgICAgIGFwaV9jYWxscy5nZXRfdW5hbnN3ZXJlZF91cmwoKSwKICAgICAgLy8gICAgICAgewogICAgICAvLyAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAvLyAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgIC8vICAgICAgICAgaXNBZGQ6ICJUcnVlIiwKICAgICAgLy8gICAgICAgICBxdWVzdGlvbmludGVudDogcXVlc3Rpb25saXN0LAogICAgICAvLyAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgIC8vICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgLy8gICAgICAgfSwKICAgICAgLy8gICAgICAgewogICAgICAvLyAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgLy8gICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAvLyAgICAgICAgIH0sCiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICkKICAgICAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAvLyAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiQWRkZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAvLyAgICAgICAgIHN3YWwoewogICAgICAvLyAgICAgICAgICAgdGV4dDogIkFkZGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgIC8vICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgIC8vICAgICAgICAgfSk7CiAgICAgIC8vICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0pCiAgICAgIC8vICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgLy8gICAgICAgaWYgKAogICAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAvLyAgICAgICApIHsKICAgICAgLy8gICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICB9KTsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICB0b2FzdHIuZXJyb3IoIk5vIHF1ZXN0aW9uIHRvIGFkZC4gUGxlYXNlIGFkZCBzb21lIHF1ZXN0aW9ucy4iKTsKICAgICAgLy8gfQogICAgICAvLyB0aGlzLnNob3dfbG9hZGVyID0gZmFsc2U7CiAgICB9LAogICAgLy8gcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgLy8gICBpZiAoaW5kZXggPT0gdGhpcy5wYWdlX25vKSB7CiAgICAvLyAgICAgcmV0dXJuICIgYWN0aXZlIjsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICByZXR1cm4gIiI7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyBzdWJtaXRfcXVlc3Rpb24oKSB7CiAgICAvLyAgIC8vIGNvbnNvbGUubG9nKCJzdWJtaXQiKTsKICAgIC8vICAgLy8gY29uc29sZS5sb2coInF1ZXN0aW9uIiwgdGhpcy5vbGRfcXVlc3Rpb24pOwogICAgLy8gICAvLyBjb25zb2xlLmxvZygiaW50ZW50IiwgdGhpcy5vbGRfaW50ZW50KTsKICAgIC8vICAgLy8gY29uc29sZS5sb2coImludGVudCIsIHRoaXMuaXNlZGl0KTsKICAgIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIC8vICAgaWYgKHRoaXMub2xkX3F1ZXN0aW9uID09ICIiIHx8IHRoaXMub2xkX2ludGVudCA9PSAiIikgewogICAgLy8gICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIGVudGVyIGFsbCB0aGUgZmllbGRzLiIpOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHRoaXMuc2hvd19sb2FkZXIgPSB0cnVlOwogICAgLy8gICAgIGF4aW9zCiAgICAvLyAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgYXBpX2NhbGxzLmdldF91bmFuc3dlcmVkX3VybCgpLAogICAgLy8gICAgICAgICB7CiAgICAvLyAgICAgICAgICAgaXNfRWRpdDogIlRydWUiLAogICAgLy8gICAgICAgICAgIHF1ZXN0aW9uOiB0aGlzLm9sZF9xdWVzdGlvbiwKICAgIC8vICAgICAgICAgICBpbnRlbnQ6IHRoaXMuY29tcGFueWlkICsgIl8iICsgdGhpcy5vbGRfaW50ZW50LAogICAgLy8gICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgICAgb2xkX3F1ZXN0aW9uX2RhdGE6IHRoaXMub2xkX2RhdGEsCiAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgIC8vICAgICAgICAgfSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGhlYWRlcnM6IHsKICAgIC8vICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICkKICAgIC8vICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgICB0aGlzLnNob3dfbG9hZGVyID0gZmFsc2U7CiAgICAvLyAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAvLyAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgIC8vICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAvLyAgICAgICAgICAgU3dhbCh7CiAgICAvLyAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAvLyAgICAgICAgICAgICB0ZXh0OiAiWW91ciBxdWVzdGlvbiBoYXMgYmVlbiBlZGl0ZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIC8vICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAvLyAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAvLyAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAvLyAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpOwogICAgLy8gICAgICAgICAgICAgICB0aGlzLmxvYWRfdmVyaWZ5X3Jlc3BvbnNlcygpOwogICAgLy8gICAgICAgICAgICAgfQogICAgLy8gICAgICAgICAgIH0pOwogICAgLy8gICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXN0aW9uIEludGVudCBVcGRhdGVkIikgewogICAgLy8gICAgICAgICAgIFN3YWwoewogICAgLy8gICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgLy8gICAgICAgICAgICAgdGV4dDogIllvdXIgcXVlc3Rpb24gaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkiLAogICAgLy8gICAgICAgICAgICAgdGltZXI6MjAwMCwKICAgIC8vICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgIC8vICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgIC8vICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAvLyAgICAgICAgICAgICAgIHRoaXMubG9hZF92ZXJpZnlfcmVzcG9uc2VzKCk7CiAgICAvLyAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICAgfSk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50ZXJuYWwgU2VydmVyIEVycm9yIik7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgc3luX3Vuc2VhcmNoYWJsZV9wcm9kdWN0KCl7CiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoInN5bmNfdW5zZXJhY2hfcHJvZGN1dCIsIHRydWUpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZpZXdfY29tcG9uZW50X25hbWUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5zaG93X3N5bmNfYnV0dG9uID1mYWxzZTsKICAgICAgdGhpcy5zZWFyY2hfbmFtZSA9ICIiOwogICAgfSwKICAgIHNlYXJjaF9uYW1lKCl7CiAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09PSAiIil7CiAgICAgIHRoaXMubG9hZF92ZXJpZnlfcmVzcG9uc2VzKCk7CiAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSBmYWxzZTsKICAgICAgfQogICAgICBlbHNlIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9PSAiIil7CiAgICAgICAgdGhpcy5pc1Zpc2libGVTZWFyY2hDbGVhciA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},null]}