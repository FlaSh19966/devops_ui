{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/MessagingFrameworks.vue?vue&type=style&index=0&id=0cd84044&scoped=true&lang=css&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/MessagingFrameworks.vue","mtime":1655466542528},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmRlbGV0ZS1jYXJ0LWl0ZW0gewogIGN1cnNvcjogcG9pbnRlcjsKfQouZGVsZXRlLWNhcnQtaXRlbSBzdmcgOmhvdmVyIHsKICBjb2xvcjogI2YyM2QzZCAhaW1wb3J0YW50OwogIGZpbGw6ICNmMjNkM2QgIWltcG9ydGFudDsKfQouZmItY29ubmVjdC1idG4gewogIGJhY2tncm91bmQ6ICMwMDZjZmY7CiAgYm9yZGVyOiAxcHggc29saWQgIzAwNmNmZjsKICBjb2xvcjogI2ZmZjsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdHJhbnNpdGlvbjogYWxsIC4zczsKfQouZmItY29ubmVjdC1idG46YWN0aXZlIHsKICBvcGFjaXR5OiAuNSFpbXBvcnRhbnQ7Cn0KLmZiLWNvbm5lY3QtYnRuOmhvdmVyIHsKICBvcGFjaXR5OiAuOCFpbXBvcnRhbnQ7Cn0KLmZiLWJ1dHRvbiB7CiAgd2lkdGg6IDQ1JTsKICBkaXNwbGF5OiBmbGV4OwogIGJhY2tncm91bmQ6ICMzYjU5OTg7CiAgY29sb3I6ICNmZmY7CiAgcGFkZGluZzogMTBweCAyMHB4OwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IC4zczsKICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4zczsKICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOwogIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsKICBjdXJzb3I6IHBvaW50ZXI7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBhbGwgLjNzOwogIHRyYW5zaXRpb246IGFsbCAuM3M7Cn0KLmZiLWJ1dHRvbjphY3RpdmUgewogIG9wYWNpdHk6IC41IWltcG9ydGFudDsKfQouZmItYnV0dG9uOmhvdmVyIHsKICBvcGFjaXR5OiAuOCFpbXBvcnRhbnQ7Cn0KLmZiLWJ1dHRvbiAuaWNvbiB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogIHdpZHRoOiAxNXB4OwogIGhlaWdodDogMjVweDsKfQouZmItYnV0dG9uIC5pY29uIHN2ZyB7CiAgbWF4LXdpZHRoOiAxMDAlOwogIG1heC1oZWlnaHQ6IDEwMCU7CiAgLW8tb2JqZWN0LWZpdDogY29udGFpbjsKICBvYmplY3QtZml0OiBjb250YWluOwp9Ci5sb2dvdXQtYnV0dG9uIHsKICBtYXJnaW4tbGVmdDogYXV0bzsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIHBhZGRpbmc6IDEwcHggMjBweDsKICBib3JkZXItcmFkaXVzOiAyMHB4OwogIGJhY2tncm91bmQ6ICNmMGY0Zjc7CiAgY29sb3I6ICM5YmE2YjM7CiAgd2lkdGg6IDk2cHg7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47CiAgY3Vyc29yOiBwb2ludGVyOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIC4zczsKICB0cmFuc2l0aW9uOiBhbGwgLjNzOwp9Ci5sb2dvdXQtYnV0dG9uOmFjdGl2ZSB7CiAgb3BhY2l0eTogLjUhaW1wb3J0YW50Owp9Ci5sb2dvdXQtYnV0dG9uOmhvdmVyIHsKICBvcGFjaXR5OiAuOCFpbXBvcnRhbnQ7Cn0KLm1lc3Nlbmdlci1wYWdlcyB7CiAgd2lkdGg6IDEwMCU7CiAgYmFja2dyb3VuZDogI2Y3ZjdmODsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC8qIC13ZWJraXQtYm94LWFsaWduOiBjZW50ZXI7ICovCiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHBhZGRpbmc6IDEwcHggMTVweDsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQoudGhpcmQtcGFydHktbG9nbyB7CiAgd2lkdGg6IDE1MHB4OwogIGhlaWdodDogNzVweDsKICBvYmplY3QtZml0OiBjb250YWluOwp9Ci5tc2dfX3NwYW4gewogIHBhZGRpbmctbGVmdDogMXJlbTsKfQouY2FyZC1hY3QgLnJlZC1idG4gewogIGZvbnQtc2l6ZTogMTRweDsKICBjb2xvcjogI2ZmZjsKICBiYWNrZ3JvdW5kOiAjZjIzZDNkOwogIGJvcmRlcjogc29saWQgMXB4ICNmMjNkM2Q7CiAgcGFkZGluZzogNXB4IDIwcHg7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBsaW5lLWhlaWdodDogMjBweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGN1cnNvcjogcG9pbnRlcjsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnN3aXRjaCB7CiAgbWFyZ2luLWxlZnQ6IDFyZW07Cn0KLmNvbC1zbS0zewogIG1heC13aWR0aDogMjQlOwp9Ci5yb3cgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtd3JhcDogd3JhcDsKICAgIG1hcmdpbi1yaWdodDogLTJweDsKICAgIG1hcmdpbi1sZWZ0OiAxNXB4Owp9Cg=="},{"version":3,"sources":["MessagingFrameworks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MessagingFrameworks.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Integrations","sourcesContent":["<template>\n  <div class=\"\">\n    <div class=\"spinner\" id=\"spinner\" v-show=\"big_spinner\"></div>\n    <!-- <div class=\"container-fluid\"> -->\n      <!-- <div class=\"card dash-card\"> -->\n    <div\n      class=\"card-header d-block d-sm-flex flex-wrap justify-content-between\"\n    >\n      <div class=\"col-sm-12\">\n        <h4 class=\"mb-sm-0\">Messaging Frameworks</h4>\n      </div>\n    </div>\n    <!-- <div class=\"card-body container\"> -->\n    <div class=\"col-sm-12\">\n      <div class=\"row m-0 p-0\">\n        <div class=\"col-sm-3 p-3\" >\n          <div class=\"card border-1\" :style=\"Boolean(fb_saved_page_data.length) ? 'border: 1px solid #273679;border-radius:0.4rem;': null\">\n            <a\n              href=\"javascript:void(0)\"\n              class=\"mx-auto\"\n              data-toggle=\"modal\"\n              data-target=\"#messaging_framework_card_modal\"\n              @click=\"website_name = 'Messenger'\"\n            >\n              <img\n                :src=\"require('@/portal/assets/img/messenger-logo.png')\"\n                class=\"third-party-logo\"\n                style=\"height: 100px !important\"\n              />\n            </a>\n          </div>\n        </div>\n        <i class=\"fa fa-check-circle\" v-show=\"Boolean(fb_saved_page_data.length)\" aria-hidden=\"true\" \n        style=\"color: #273679; margin-left: -1.0rem; margin-top:4px;\"></i>\n        <div class=\"col-sm-3 p-3\" >\n          <div class=\"card border-1\" :style=\"Boolean(fb_saved_page_data.length) ? 'border: 1px solid #273679;border-radius:0.4rem;': null\">\n            <a\n              href=\"javascript:void(0)\"\n              class=\"mx-auto\"\n              data-toggle=\"modal\"\n              data-target=\"#messaging_framework_card_modal\"\n              @click=\"website_name = 'Whatsapp'\"\n            >\n              <img\n                :src=\"require('@/portal/assets/img/WhatsApp-Logo-PNG6.png')\"\n                class=\"third-party-logo\"\n                style=\"height: 100px !important\"\n              />\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"modal fade dash-modal\"\n      id=\"messaging_framework_card_modal\"\n      role=\"dialog\"\n      aria-labelledby=\"widget_code_modaltitle\"\n      data-keyboard=\"false\"\n      aria-hidden=\"true\"\n      data-backdrop=\"static\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <template v-if=\"website_name == 'Messenger'\">\n            <facebook-messenger></facebook-messenger>\n          </template>\n          <template v-if=\"website_name == 'Whatsapp'\">\n            <whats-app></whats-app>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\nimport FacebookMessenger from \"./Components/FacebookMessengerDetails.vue\";\nimport WhatsApp from \"./Components/WhatsappDetails.vue\";\n\nexport default {\n  name: \"MessagingFrameworks\",\n  components: {\n    FacebookMessenger,\n    WhatsApp\n  },\n  data() {\n    return {\n      big_spinner: false,\n      website_name: \"\",\n      widget_code: \"\",\n      company_name: this.$session.get(\"UserInformation\").company_name,\n      company_id: this.$session.get(\"UserInformation\").company_id,\n      fb_access_token: \"\",\n      fb_user_id: \"\",\n      user_access_token: null,\n      fb_page_data: [],\n      fb_saved_page_data: []\n      // fb_messaging_url_regex: /[(m.me)\\/?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/i,\n    };\n  },\n  watch: {\n    fb_page_enabled(newVal) {\n      // console.log(newVal);\n      // console.log(this[webs + \"_data\"].is_visible_on_bot);\n    },\n  },\n  mounted() {    \n    this.get_integration_details();\n    // this.checkLoginState();\n  },\n  methods: {\n    update_data() {\n      for(var i in this.fb_saved_page_data){\n        for(var j in this.fb_page_data){\n          if(this.fb_saved_page_data[i].fb_page_id == this.fb_page_data[j].id){\n            this.fb_page_data.splice(j, 1);\n          }\n        }\n      }\n    },\n    get_integration_details() {\n      this.big_spinner = true;\n      axios\n        .post(\n          api_calls.chatbot_integration_details(),\n          {\n            is_get: true,\n            company_name: this.company_name,\n            company_id: this.company_id,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then(({ data }) => {\n          this.big_spinner = false;\n          if (data.status === \"success\") {\n            this.fb_saved_page_data = [];\n            if (\n              Boolean(data.data.facebook_details.length)\n            ) {\n              for (var i in data.data.facebook_details) {\n                var temp = {};\n                temp = {\n                  fb_access_token: data.data.facebook_details[i].fb_access_token,\n                  fb_page_id:  data.data.facebook_details[i].fb_page_id,\n                  fb_page_name:  data.data.facebook_details[i].fb_page_name,\n                  fb_verify_token:  data.data.facebook_details[i].fb_verify_token,\n                  fb_page_enabled:  data.data.facebook_details[i].enabled,\n                }\n                this.fb_saved_page_data.push(temp);\n              }\n              // this.fb_saved_page_data.is_visible_on_bot === true ? this.fb_saved_page_data.is_integrated = true :\n              //                                                 this.fb_saved_page_data.is_integrated = false;\n            }\n            this.update_data();\n          }else if(data.msg == \"NO DATA AVAILABLE\") {   }\n        })\n        .catch((e) => {\n          this.big_spinner = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    page_connect_fb(page){\n      if(page != null) {\n        axios.post(api_calls.chatbot_integration_details(),{\n          // fb_verify_token : ,\n          company_name: this.company_name,\n          company_id: this.company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          fb_page_name: page.name,\n          fb_access_token : page.access_token,\n          fb_page_id : page.id,\n          fb_page_enabled: true,\n          is_save: true,\n          is_facebook: true, \n          is_messaging_platform: false\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n        )\n        .then((response) => {\n           if (response.data.msg == \"Query Executed Successfully\") {\n            Swal.fire({\n              title: \"Facebook Page Connected Successfully\",\n              type: \"success\",\n              timer: 2500,\n            });\n            var path = \"/\" + page.id + \"/subscribed_apps?access_token=\" + page.access_token;\n            // console.log(\"POST\", path);\n            FB.api(\n              path,\n              'POST',\n              {\"subscribed_fields\":\"messages\"},\n              function(response) {\n                  console.log(\"Subscription\", response);\n              }\n            );\n            this.get_integration_details();\n          } else if (response.data.msg == \"Internal Server Error\") {\n            Swal.fire({\n              title: \"Internal Server Error\",\n              type: \"error\",\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      }\n    },\n    edit_fb_page(index){\n      var vm = this;\n      this.fb_saved_page_data[index].fb_page_enabled == false ? this.fb_saved_page_data[index].fb_page_enabled = true : this.fb_saved_page_data[index].fb_page_enabled = false; \n      if(index != null) {\n        axios.post(api_calls.chatbot_integration_details(),{\n          company_name: this.company_name,\n          company_id: this.company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          fb_page_id : this.fb_saved_page_data[index].fb_page_id,\n          is_edit: true,\n          is_facebook: true,\n          fb_page_enabled: this.fb_saved_page_data[index].fb_page_enabled\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n        )\n        .then((response) => {\n          if (response.data.msg == \"Query Executed Successfully\") {\n            Swal.fire({\n              title: \"Facebook Page Edited Successfully\",\n              type: \"success\",\n              timer: 2500,\n            });\n            if(!Boolean(this.fb_saved_page_data[index].fb_page_enabled)) {\n              var path = \"/\" + vm.fb_saved_page_data[index].fb_page_id + \"/subscribed_apps?access_token=\" + vm.fb_saved_page_data[index].fb_access_token;\n              // console.log(\"Path\", path);\n              FB.api(\n                path,\n                'DELETE',\n                {},\n                function(response) {\n                    console.log(\"DELETE\", response);\n                }\n              );\n            } else {\n              var path = \"/\" + vm.fb_saved_page_data[index].fb_page_id + \"/subscribed_apps?access_token=\" + vm.fb_saved_page_data[index].fb_access_token;\n              // console.log(\"POST\", path);\n              FB.api(\n                path,\n                'POST',\n                {\"subscribed_fields\":\"messages\"},\n                function(response) {\n                    console.log(\"Subscription\", response);\n                }\n              );\n            }\n            this.get_integration_details();\n          } else if (response.data.msg == \"Facebook page id does not exists in db\") {\n            Swal.fire({\n              title: \"Facebook page id does not exists in db\",\n              type: \"warning\",\n              timer: 2500,\n            });\n          } else if (response.data.msg == \"Internal Server Error\") {\n            Swal.fire({\n              title: \"Internal Server Error\",\n              type: \"error\",\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      }\n    },\n    delete_fb_page(page){\n      if(page != null) {\n        axios.post(api_calls.chatbot_integration_details(),{\n          company_name: this.company_name,\n          company_id: this.company_id,\n          email: this.$session.get(\"UserInformation\").email,\n          license_key: this.$session.get(\"UserInformation\").license_key,\n          token: this.$session.get(\"UserInformation\").tokens,\n          fb_page_id : page.fb_page_id,\n          is_delete: true,\n          is_facebook: true, \n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.$session.get(\"at\")}`,\n          },\n        }\n        )\n        .then((response) => {\n          if (response.data.msg == \"Query Executed Successfully\") {\n            Swal.fire({\n              title: \"Facebook Page Deleted Successfully\",\n              type: \"success\",\n              timer: 2500,\n            });\n            var path = \"/\" + page.fb_page_id + \"/subscribed_apps?access_token=\" + page.fb_access_token;\n            // console.log(\"Path\", path);\n            FB.api(\n              path,\n              'DELETE',\n              {},\n              function(response) {\n                  console.log(\"DELETE\", response);\n              }\n            );\n            this.get_integration_details();\n          } else if (response.data.msg == \"Facebook page id does not exists in db\") {\n            Swal.fire({\n              title: \"Facebook page id does not exists in db\",\n              type: \"warning\",\n              timer: 2500,\n            });\n          } else if (response.msg == \"Internal Server Error\") {\n            Swal.fire({\n              title: \"Internal Server Error\",\n              type: \"error\",\n              timer: 2500,\n            });\n          }\n        })\n        .catch((e) => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      }\n    },\n    checkLoginState() {\n      var vm = this;\n      FB.getLoginStatus(function(response) {\n        vm.statusChangeCallback(response);\n      });\n    },\n    statusChangeCallback(response) {\n      if(response.status === \"connected\")\n      {\n        this.fb_access_token = response.authResponse.accessToken;\n        this.fb_user_id = response.authResponse.userID;\n        $(\"#login\").hide();\n        $(\"#logout\").show(); \n        this.fetchUserProfile();\n      }\n      else{\n          this.facebookLoginByDialog();\n      }\n    },\n    facebookLogout() {\n      var vm = this;\n      $(\"#logout\").hide();\n      $(\"#login\").show();\n      $(\"#status\").empty();\n      FB.logout(function(response) {\n        // vm.statusChangeCallback(response);\n      });\n      this.fb_page_data = [];\n      this.fb_access_token = \"\";\n      this.fb_user_id = \"\";\n      this.get_integration_details();\n    },\n    facebookLoginByDialog() {\n      var vm = this;\n      FB.login(function(response) {        \n          vm.statusChangeCallback(response);\n      }, {scope: 'public_profile,pages_manage_metadata,pages_show_list,pages_messaging,pages_read_engagement'});\n    },\n    fetchUserProfile() {\n      var vm = this;\n      var user_id = this.fb_user_id;\n      var access_token = this.fb_access_token;\n      var app_id = process.env.VUE_APP_FB_APP_ID;\n      var app_secret = process.env.VUE_APP_FB_APP_SECRET;\n      var client_token = process.env.VUE_APP_FB_CLIENT_TOKEN;\n\n      // FB.api('/me', function(response) {\n      //   console.log(JSON.stringify(response));\n      // });\n      \n      // FB.api('/me?fields=id,name,email,gender,birthday', function(response) {\n      //   console.log('Successful login for: ' + response.name);\n      // });\n\n      var path1 = '/oauth/access_token?grant_type=fb_exchange_token&client_id=' + app_id + '&client_secret=' + app_secret + '&fb_exchange_token=' + access_token;\n      FB.api(path1, function(response) {\n        // console.log(\"Path 1\", JSON.stringify(response));\n        vm.user_access_token = response.access_token;\n      })\n\n      setTimeout(() => {\n        var path2 = '/'+user_id+'?fields=id,name,email,picture&access_token='+this.user_access_token;\n        FB.api(path2, function(data) {\n          // console.log(\"Path 2\", JSON.stringify(data))\n        });\n\n        var path3 = '/'+user_id+'/accounts?fields=name,access_token&access_token='+this.user_access_token;\n        FB.api(path3, function(data) {\n          // console.log(\"Path 3\", JSON.stringify(data.data))\n          vm.fb_page_data = data.data;\n          vm.update_data();\n        }); \n      }, 2000);\n      \n    },\n    // testAPI() {\n    //   console.log('Welcome!  Fetching your information.... ');\n    //   FB.api('/me', function(response) {\n    //     console.log('Successful login for: ' + response.name);\n    //     console.log(response);\n    //   });\n    // }\n  },\n};\n</script>\n<style scoped>\n.delete-cart-item {\n  cursor: pointer;\n}\n.delete-cart-item svg :hover {\n  color: #f23d3d !important;\n  fill: #f23d3d !important;\n}\n.fb-connect-btn {\n  background: #006cff;\n  border: 1px solid #006cff;\n  color: #fff;\n  cursor: pointer;\n  transition: all .3s;\n}\n.fb-connect-btn:active {\n  opacity: .5!important;\n}\n.fb-connect-btn:hover {\n  opacity: .8!important;\n}\n.fb-button {\n  width: 45%;\n  display: flex;\n  background: #3b5998;\n  color: #fff;\n  padding: 10px 20px;\n  border-radius: 10px;\n  -webkit-transition: opacity .3s;\n  transition: opacity .3s;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-backface-visibility: hidden;\n  cursor: pointer;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.fb-button:active {\n  opacity: .5!important;\n}\n.fb-button:hover {\n  opacity: .8!important;\n}\n.fb-button .icon {\n  margin-right: 10px;\n  width: 15px;\n  height: 25px;\n}\n.fb-button .icon svg {\n  max-width: 100%;\n  max-height: 100%;\n  -o-object-fit: contain;\n  object-fit: contain;\n}\n.logout-button {\n  margin-left: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 20px;\n  border-radius: 20px;\n  background: #f0f4f7;\n  color: #9ba6b3;\n  width: 96px;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-backface-visibility: hidden;\n  cursor: pointer;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.logout-button:active {\n  opacity: .5!important;\n}\n.logout-button:hover {\n  opacity: .8!important;\n}\n.messenger-pages {\n  width: 100%;\n  background: #f7f7f8;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  /* -webkit-box-align: center; */\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 10px 15px;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n.third-party-logo {\n  width: 150px;\n  height: 75px;\n  object-fit: contain;\n}\n.msg__span {\n  padding-left: 1rem;\n}\n.card-act .red-btn {\n  font-size: 14px;\n  color: #fff;\n  background: #f23d3d;\n  border: solid 1px #f23d3d;\n  padding: 5px 20px;\n  font-weight: 400;\n  line-height: 20px;\n  display: inline-block;\n  border-radius: 4px;\n  cursor: pointer;\n  text-align: center;\n}\n.switch {\n  margin-left: 1rem;\n}\n.col-sm-3{\n  max-width: 24%;\n}\n.row {\n    display: flex;\n    flex-wrap: wrap;\n    margin-right: -2px;\n    margin-left: 15px;\n}\n</style>"]}]}