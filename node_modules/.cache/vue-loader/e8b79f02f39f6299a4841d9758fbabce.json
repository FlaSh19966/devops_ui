{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/End User Response/PortalUserChatHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/End User Response/PortalUserChatHistory.vue","mtime":1663910265466},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgQ29udGVudExvYWRlciB9IGZyb20gInZ1ZS1jb250ZW50LWxvYWRlciI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0LAogICAgQ29udGVudExvYWRlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG51bWJlcl9vZl9yb3dzOiAiIiwKICAgICAgdG90YWxfcGFnZXM6IDAsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAxNSwKICAgICAgdXNlcl9saXN0OiBbXSwKICAgICAgdXNlcl9yZXBseTogW10sCiAgICAgIGJvdF9yZXBseTogW10sCiAgICAgIGNoYXREZXRhaWxzOiBbXSwKICAgICAgYWN0aW9uX3N0YXRzOiBbXSwKICAgICAgdXNlcl9hY3Rpb25fc3RhdHM6IFtdLAogICAgICBjdXJyZW50X3VzZXI6ICIiLAogICAgICB0aW1lc3RhbXA6ICIiLAogICAgICBzZW5kZXJfaWQ6IFtdLAogICAgICBzZWxlY3RlZDogImdlbmVyYWxfY2hhdF9oaXN0b3J5IiwKICAgICAgc2VsZWN0ZWRfZGF0ZTogIiIsCiAgICAgIHNlbGVjdGVkX2luZGV4OiBudWxsLAogICAgICBjaGF0X2RhdGVzOiBbXSwKICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIGlzc2VhcmNoOiBmYWxzZSwKICAgICAgc2VhcmNoc3RyaW5nOiAiIiwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgdmlld19jb21wb25lbnRfbmFtZTogInBvcnRhbF91c2VyIiwKICAgICAgLy8gZmluZ2VycHJpbnRyZWdleDovXlswLTldezEwfSQvLAogICAgICBmaW5nZXJwcmludHJlZ2V4OiAvXlswLTktK1wvXHNdezksfSQvLAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgc2hvd19sb2FkZXI6IGZhbHNlLAogICAgICBpc19wb3J0YWxfdXNlcjogdHJ1ZSwKICAgICAgY29udGFjdF9oZWxwX2VtYWlsOiBudWxsLAogICAgICByZXRhaWxfd2ViX2ZyYW1ld29yazogdGhpcy4kc2Vzc2lvbi5nZXQoInJldGFpbF93ZWJfZnJhbWV3b3JrIiksCiAgICAgIGZpbHRlcl9jaGF0X2hpc3Rvcnk6IHRoaXMuJHNlc3Npb24uZ2V0KCJmaWx0ZXJfY2hhdF9oaXN0b3J5IikKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5yZXRhaWxfd2ViX2ZyYW1ld29yayA9IHRoaXMuJHNlc3Npb24uZ2V0KCJyZXRhaWxfd2ViX2ZyYW1ld29yayIpOwogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgICBpZiAoJCh0aGlzKS5pcygiOmNoZWNrZWQiKSkgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigic2VhcmNoX3BvcnRhbF91c2VyX2NoYXRfaGlzdG9yeSIsIGRhdGEgPT4gewogICAgICB0aGlzLnNlYXJjaHN0cmluZyA9IGRhdGE7CiAgICAgIHRoaXMuc2VhcmNoX2NoYXQoKTsKICAgICAgLy8gdGhpcy5zZWFyY2hfcXVlc3Rpb24oKTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oImxvYWRfcG9ydGFsX3VzZXJfY2hhdF9oaXN0b3J5IiwgZGF0YSA9PiB7CiAgICAgIHRoaXMubG9hZF9wb3J0YWxfdXNlcl9jaGF0X2hpc3RvcnkoKTsKICAgIH0pOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuJHJvb3QuJG9mZigic2VhcmNoX3BvcnRhbF91c2VyX2NoYXRfaGlzdG9yeSIpOwogICAgdGhpcy4kcm9vdC4kb2ZmKCJsb2FkX3BvcnRhbF91c2VyX2NoYXRfaGlzdG9yeSIpOwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICB0aGlzLmxvYWRfcG9ydGFsX3VzZXJfY2hhdF9oaXN0b3J5KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtYXRfZGF0ZV9pbl9sb2NhbF90aW1lem9uZShkYXRlKSB7CiAgICAgIHZhciB0ZXN0RGF0ZVV0YyA9IG1vbWVudC51dGMoZGF0ZSk7CiAgICAgIHZhciBsb2NhbERhdGUgPSBtb21lbnQodGVzdERhdGVVdGMpCiAgICAgICAgLmxvY2FsKCkKICAgICAgICAudG9EYXRlKCk7CiAgICAgIC8vIG5vdGU6IGRvIG5vdCBmb3JtYXQgdGltZSBiZWxvdyB0byBzaG93IGhvdXIgYW5kIG1pbnV0ZSBiZWNhdXNlICJWaWV3IENoYXQgSGlzdG9yeSIgc2hvdyBhbGwgbWVzc2FnZSBvZiB0aGF0IGRhdGUgbm90IHNwZWNpZmljIGhvdXItbWludXRlIHRpbWUuCiAgICAgIGxvY2FsRGF0ZSA9IG1vbWVudChsb2NhbERhdGUpLmZvcm1hdCgiZGRkIE1NTSBEIFlZWVkiKTsKICAgICAgcmV0dXJuIGxvY2FsRGF0ZS50b1N0cmluZygpOwogICAgfSwKICAgIG1lc3NhZ2luZ19wbGF0Zm9ybV9mb3JtYXRpbmcobWVzc2FnZSkgewogICAgICByZXR1cm4gIlBsZWFzZSBmZWVsIGZyZWUgdG8gcmVhY2hvdXQgdG8gdXMgYXQgOiIgKyBtZXNzYWdlOwogICAgfSwKICAgIG1lc3NhZ2luZ19wbGF0Zm9ybV9mb3JtYXRpbmdfbnVtYmVyKG1lc3NhZ2UpIHsKICAgICAgaWYgKG1lc3NhZ2UgIT0gbnVsbCkgewogICAgICAgIHJldHVybiAiIG9yIGNhbGwgdXMgYXQgOiIgKyBtZXNzYWdlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIGNvbmZ1c2lvbl9tZXNzYWdlX2Zvcm1hdGluZyhtZXNzYWdlKSB7CiAgICAgIHJldHVybiBtZXNzYWdlLnNwbGl0KCJ7ZW1haWx9Iikuam9pbih0aGlzLmNvbnRhY3RfaGVscF9lbWFpbCk7CiAgICB9LAogICAgbG9hZF9wcm9kdWN0X3NldHRpbmdzKCkgewogICAgICB0aGlzLnNob3dfbG9hZGVyID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc19nZXQ6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGxldCB3ZWJmcmFtZXdvcmsgPSB0aGlzLnJldGFpbF93ZWJfZnJhbWV3b3JrOwogICAgICAgICAgaWYoIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuTk9fREFUQV9BVkFJTEFCTEUuTVNHX0NPREUpewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICB0b2FzdDp0cnVlLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgIH1lbHNlIGlmKHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLk1TR19DT0RFKXsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB9KQogICAgICAgICAgfWVsc2UgaWYoIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUpewogICAgICAgICAgICBpZih3ZWJmcmFtZXdvcmspewogICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RfaGVscF9lbWFpbCA9IHJlc3BvbnNlLmRhdGEuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5jb250YWN0X2hlbHBfZW1haWw7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy5jb250YWN0X2hlbHBfZW1haWwgPSByZXNwb25zZS5kYXRhLmRhdGEuZGV0YWlscy5jb250YWN0X2hlbHBfZW1haWw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH1lbHNlewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgdGhpcy5zaG93X2xvYWRlciA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tfaW1hZ2VfdHlwZShpbWFnZSkgewogICAgICBpZiAodHlwZW9mIGltYWdlID09ICJzdHJpbmciKSB7CiAgICAgICAgcmV0dXJuIGltYWdlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpbWFnZSAhPSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gaW1hZ2Uuc3JjOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9hZF9wb3J0YWxfdXNlcl9jaGF0X2hpc3RvcnkoKSB7CiAgICAgIHRoaXMucGFnZV9ubyA9IDE7CiAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgIHRoaXMuc2VhcmNoc3RyaW5nID0gIiI7CiAgICAgIHRoaXMuYWN0aW9uX3N0YXRzID0gW107CiAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMgPSBbXTsKICAgICAgdGhpcy5zaG93X2xvYWRlciA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuYWN0aW9uX3N0YXRzX3VybCgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYodGhpcy5hcGlfc3RhdHVzX2NvZGUuQ09NUEFOWV9BQ1RJT05fU1RBVFMuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKXsKICAgICAgICAgICAgdGhpcy5hY3Rpb25fc3RhdHMgPSByZXNwb25zZS5kYXRhLmRhdGEuYWN0aW9uX3N0YXRzOwogICAgICAgICAgICB0aGlzLmFjdGlvbl9zdGF0cy5wdXNoKHsKICAgICAgICAgICAgICBIaXRzOiAxLAogICAgICAgICAgICAgIE5hbWU6ICJnZW5lcmFsX2NoYXRfaGlzdG9yeSIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6MjUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgdGhpcy5zaG93X2xvYWRlciA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIHRoaXMuc2hvd19sb2FkZXIgPSB0cnVlOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLmdlbmVyYWxfY2hhdF9oaXN0b3J5KCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc3Nob3c6IHRydWUsCiAgICAgICAgICAgIGlzX3BvcnRhbF91c2VyOiB0cnVlLAogICAgICAgICAgICBhY3Rpb246ICJnZW5lcmFsX2NoYXRfaGlzdG9yeSIsCiAgICAgICAgICAgIGZpbHRlcl9jaGF0X2hpc3Rvcnk6IHRoaXMuJHNlc3Npb24uZ2V0KCJmaWx0ZXJfY2hhdF9oaXN0b3J5IiksCiAgICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICBpc3NlYXJjaDogdGhpcy5pc3NlYXJjaAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5zaG93X2xvYWRlciA9IGZhbHNlOwogICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cyA9IFtdOwogICAgICAgICAgaWYodGhpcy5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKXsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coCiAgICAgICAgICAgIC8vICAgdGhpcy5maW5nZXJwcmludHJlZ2V4LnRlc3QocmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5faWQuVXNlcikKICAgICAgICAgICAgLy8gKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHRoaXMuZmluZ2VycHJpbnRyZWdleC50ZXN0KHJlc3BvbnNlLmRhdGEuZGF0YS5jaGF0SGlzdG9yeVtpXS5faWQuVXNlcikKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cy5wdXNoKHsKICAgICAgICAgICAgICAgIHVzZXJlbWFpbDogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLkVtYWlsLAogICAgICAgICAgICAgICAgdXNlcnBob25lbnVtYmVyOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uUGhvbmVOdW1iZXIsCiAgICAgICAgICAgICAgICB1c2VybmFtZTogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLlVzZXJOYW1lLAogICAgICAgICAgICAgICAgdXNlcmlkOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIsCiAgICAgICAgICAgICAgICBkYXRlOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uRGF0ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudXNlcl9hY3Rpb25fc3RhdHMsIHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAgICAgICAgICAgICB1c2VyZW1haWw6IHJlc3BvbnNlLmRhdGEuZGF0YS5jaGF0SGlzdG9yeVtpXS5faWQuVXNlciwKICAgICAgICAgICAgICAgIHVzZXJwaG9uZW51bWJlcjogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLlBob25lTnVtYmVyLAogICAgICAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlLmRhdGEuZGF0YS5jaGF0SGlzdG9yeVtpXS5Vc2VyTmFtZSwKICAgICAgICAgICAgICAgIHVzZXJpZDogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgICAgICAgICAgICAgZGF0ZTogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLkRhdGUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgICAgICAgICAvLyAgICAgdXNlcmVtYWlsIDogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5faWQuVXNlciwKICAgICAgICAgICAgLy8gICAgIHVzZXJwaG9uZW51bWJlciA6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uUGhvbmVOdW1iZXIsCiAgICAgICAgICAgIC8vICAgICB1c2VybmFtZSA6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYodGhpcy5hcGlfc3RhdHVzX2NvZGUuTk9fREFUQV9BVkFJTEFCTEUuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKXsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX2RhdGEgPT0gdW5kZWZpbmVkID8gMCA6IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9kYXRhOwogICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlID09IHVuZGVmaW5lZCA/IDAgOiByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy51c2VyX2FjdGlvbl9zdGF0cyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNob3dfbG9hZGVyID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgcGFnZV9yZXF1aXJlKHBhZ2Vfbm8pIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQgIT0gImdlbmVyYWxfY2hhdF9oaXN0b3J5IikgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudG90YWxfcGFnZXMsIHBhZ2Vfbm8pOwogICAgICAgIGlmIChwYWdlX25vID09IDAgfHwgcGFnZV9ubyA9PSB0aGlzLnRvdGFsX3BhZ2VzICsgMSkgewogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyB0aGlzLnBhZ2Vfbm8gPSBwYWdlX25vOwogICAgICAgICAgaWYgKHBhZ2UgPT0gIi4uLnMiKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAiLi4ubCIpIHsKICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCh0aGlzLnRvdGFsX3BhZ2VzICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgIGFwaV9jYWxscy5hY3Rpb25fdXNhZ2Vfc3RhdHNfdXJsKCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgLy8gYWN0aW9uOiB0aGlzLmFjdGlvbl9zdGF0c1tpbmRleF0uTmFtZSwKICAgICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5zZWxlY3RlZCwKICAgICAgICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAvLyB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIC8vIHRoaXMudXNlcl9saXN0ID0gW107CiAgICAgICAgICAgICAgLy8gZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhWzBdKSB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLmludGVudGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgLy8gICAgIGludGVudDogcmVzcG9uc2UuZGF0YVswXVtpXSwKICAgICAgICAgICAgICAvLyAgICAgZW1haWw6IHJlc3BvbnNlLmRhdGFbMV1baV0sCiAgICAgICAgICAgICAgLy8gICAgIGNyZWF0ZWQ6IHJlc3BvbnNlLmRhdGFbMl1baV0KICAgICAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHBhZ2Vfbm8gPT0gMCB8fCBwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMgKyAxKSB7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwYWdlX25vID09ICIuLi5zIikgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gIi4uLmwiKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2Vfbm87CiAgICAgICAgICB9CiAgICAgICAgICAvLyB0aGlzLnBhZ2Vfbm8gPSBwYWdlX25vOwogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgYXBpX2NhbGxzLmdlbmVyYWxfY2hhdF9oaXN0b3J5KCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgaXNzaG93OiB0cnVlLAogICAgICAgICAgICAgICAgaXNfcG9ydGFsX3VzZXI6IHRydWUsCiAgICAgICAgICAgICAgICBhY3Rpb246IHRoaXMuc2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBmaWx0ZXJfY2hhdF9oaXN0b3J5OiB0aGlzLiRzZXNzaW9uLmdldCgiZmlsdGVyX2NoYXRfaGlzdG9yeSIpLAogICAgICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICAgICAgaXNzZWFyY2g6IHRoaXMuaXNzZWFyY2gsCiAgICAgICAgICAgICAgICBpc19wb3J0YWxfdXNlcjogdHJ1ZQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzID0gW107CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgdGhpcy5maW5nZXJwcmludHJlZ2V4LnRlc3QoCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHVzZXJlbWFpbDogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLkVtYWlsLAogICAgICAgICAgICAgICAgICAgIHVzZXJwaG9uZW51bWJlcjogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLlBob25lTnVtYmVyLAogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXNlcmlkOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIsCiAgICAgICAgICAgICAgICAgICAgZGF0ZTogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLkRhdGUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHVzZXJlbWFpbDogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgICAgICAgICAgICAgICAgIHVzZXJwaG9uZW51bWJlcjogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLlBob25lTnVtYmVyLAogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXNlcmlkOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIsCiAgICAgICAgICAgICAgICAgICAgZGF0ZTogcmVzcG9uc2UuZGF0YS5kYXRhLmNoYXRIaXN0b3J5W2ldLkRhdGUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgICAgICAgICAgICAgLy8gICAgIHVzZXJlbWFpbCA6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIsCiAgICAgICAgICAgICAgICAvLyAgICAgdXNlcnBob25lbnVtYmVyIDogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5QaG9uZU51bWJlciwKICAgICAgICAgICAgICAgIC8vICAgICB1c2VybmFtZSA6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlOwogICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHBhZ2luYXRpb25fY2xhc3MoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICAgIHJldHVybiAiIGFjdGl2ZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgc2V0cGFnaW5hdGlvbihwYWdlX25vKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheSA9IFtdOwogICAgICBpZiAodGhpcy50b3RhbF9wYWdlcyA8PSA3KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSAxKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnRvdGFsX3BhZ2VzIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vIDw9IDQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2Vfbm8gKyAzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID49IHRoaXMudG90YWxfcGFnZXMgLSA0KSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKICAgICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDQ7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKICAgICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDM7IGkgPD0gcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSk7CiAgICAgICAgfQogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyB2aWV3X2FjdGlvbigpIHsKICAgIC8vICAgdmFyIGFjdGlvbl9uYW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgLy8gICB0aGlzLnNlbGVjdGVkID0gYWN0aW9uX25hbWU7CiAgICAvLyAgIHRoaXMuc2VhcmNoc3RyaW5nID0gIiI7CiAgICAvLyAgIGlmIChhY3Rpb25fbmFtZSAhPSAiZ2VuZXJhbF9jaGF0X2hpc3RvcnkiKSB7CiAgICAvLyAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgLy8gICAgIGF4aW9zCiAgICAvLyAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgYXBpX2NhbGxzLmFjdGlvbl91c2FnZV9zdGF0c191cmwoKSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICAgIGFjdGlvbjogYWN0aW9uX25hbWUsCiAgICAvLyAgICAgICAgICAgcGFnZV9ubzogMSwKICAgIC8vICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgIC8vICAgICAgICAgfSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGhlYWRlcnM6IHsKICAgIC8vICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICkKICAgIC8vICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgLy8gICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5udW1iZXJfb2Zfcm93czsKICAgIC8vICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IE1hdGguY2VpbCh0aGlzLm51bWJlcl9vZl9yb3dzIC8gdGhpcy5wZXJfcGFnZSk7CiAgICAvLyAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMgPSBbXTsKICAgIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhLnVzZXJzKSB7CiAgICAvLyAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudXNlcnNbaV0uYWN0aW9uX2hpdHMgIT0gMCkgewogICAgLy8gICAgICAgICAgICAgbGV0IGFjdGlvbl9oaXN0b3J5ID0gW107CiAgICAvLyAgICAgICAgICAgICBmb3IgKHZhciBqIGluIHJlc3BvbnNlLmRhdGEudXNlcnNbaV0uYWN0aW9uX2hpdHMpIHsKICAgIC8vICAgICAgICAgICAgICAgYWN0aW9uX2hpc3RvcnkucHVzaChyZXNwb25zZS5kYXRhLnVzZXJzW2ldLmFjdGlvbl9oaXRzW2pdKTsKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAvLyAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLnVzZXJzW2ldLnVzZXJuYW1lLAogICAgLy8gICAgICAgICAgICAgICBhY3Rpb25fbGlzdDogYWN0aW9uX2hpc3RvcnksCiAgICAvLyAgICAgICAgICAgICAgIHNlbmRlcl9pZDogcmVzcG9uc2UuZGF0YS51c2Vyc1tpXS5zZW5kZXJfaWQsCiAgICAvLyAgICAgICAgICAgICB9KTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAvLyAgICAgYXhpb3MKICAgIC8vICAgICAgIC5wb3N0KAogICAgLy8gICAgICAgICBhcGlfY2FsbHMuZ2VuZXJhbF9jaGF0X2hpc3RvcnkoKSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICAgIGlzc2hvdzogdHJ1ZSwKICAgIC8vICAgICAgICAgICBhY3Rpb246IGFjdGlvbl9uYW1lLAogICAgLy8gICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgLy8gICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgICAgaXNzZWFyY2g6IHRoaXMuaXNzZWFyY2gsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICAgIHsKICAgIC8vICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgIC8vICAgICAgICAgICB9LAogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICApCiAgICAvLyAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cyA9IFtdOwogICAgLy8gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnkubGVuZ3RoOyBpKyspIHsKICAgIC8vICAgICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgLy8gICAgICAgICAgICAgdXNlcmVtYWlsOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgLy8gICAgICAgICAgICAgdXNlcnBob25lbnVtYmVyOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLlBob25lTnVtYmVyLAogICAgLy8gICAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAvLyAgICAgICAgICAgfSk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIHNjcm9sbF9kaXYoKSB7CiAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYnV5LXByb2R1Y3RzIik7CiAgICAgIGlmIChldmVudC5kZWx0YVggPiBldmVudC5kZWx0YVkpIHsKICAgICAgICBkb2Muc2Nyb2xsTGVmdCArPSAxMDsKICAgICAgfSBlbHNlIGlmIChldmVudC5kZWx0YVggPCBldmVudC5kZWx0YVkpIHsKICAgICAgICBkb2Muc2Nyb2xsTGVmdCAtPSAxMDsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbF9jYXJkX2RpdigpIHsKICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tYWluLWNhcmQtY29udGFpbmVyIik7CiAgICAgIGlmIChldmVudC5kZWx0YVggPiBldmVudC5kZWx0YVkpIHsKICAgICAgICBkb2Muc2Nyb2xsTGVmdCArPSAxMDsKICAgICAgfSBlbHNlIGlmIChldmVudC5kZWx0YVggPCBldmVudC5kZWx0YVkpIHsKICAgICAgICBkb2Muc2Nyb2xsTGVmdCAtPSAxMDsKICAgICAgfQogICAgfSwKICAgIGNoZWNraW50ZW50KGluZGV4KSB7CiAgICAgIGlmICh0aGlzLmNoYXREZXRhaWxzW2luZGV4IC0gMV0gIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKHRoaXMuY2hhdERldGFpbHNbaW5kZXggLSAxXS5CT1RSZXNwb25zZVswXSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmICh0aGlzLmNoYXREZXRhaWxzW2luZGV4IC0gMV0uQk9UUmVzcG9uc2VbMF0uaW50ZW50ICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGNoYXRfZGF0ZShpbmRleCkgewogICAgICB0aGlzLmNoYXREZXRhaWxzID0gW107CiAgICAgIHRoaXMuc2VuZGVyX2lkID0gdGhpcy51c2VyX2FjdGlvbl9zdGF0c1tpbmRleF0udXNlcmlkOwogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuZ2VuZXJhbF9jaGF0X2hpc3RvcnkoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnNlbmRlcl9pZCwKICAgICAgICAgICAgaXNzaG93ZGF0ZXM6IHRydWUsCiAgICAgICAgICAgIGlzc2VhcmNoOiB0aGlzLmlzc2VhcmNoLAogICAgICAgICAgICBpc19wb3J0YWxfdXNlcjogdHJ1ZSwKICAgICAgICAgICAgc2VhcmNoc3RyaW5nOiB0aGlzLnNlYXJjaHN0cmluZwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIGlmKHRoaXMuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSl7CiAgICAgICAgICAgIHRoaXMuY2hhdF9kYXRlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5EYXRlczsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9kYXRlID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGEuRGF0ZXNbcmVzcG9uc2UuZGF0YS5kYXRhLkRhdGVzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICB0aGlzLmNoYXRfZGF0ZXMucmV2ZXJzZSgpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkX2luZGV4KTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9pbmRleCA9IGluZGV4OwogICAgICAgICAgICB0aGlzLmNoYXRfY29udmVyc2F0aW9uKGluZGV4KTsKICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5OT19EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgY2hhdF9jb252ZXJzYXRpb24oaW5kZXgsIGNoYXRfaW5kZXgpIHsKICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgsIGNoYXRfaW5kZXgpOwogICAgICBpZiAodGhpcy5zZWxlY3RlZCAhPSAiZ2VuZXJhbF9jaGF0X2hpc3RvcnkiKSB7CiAgICAgICAgdGhpcy5zZW5kZXJfaWQgPSB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzW2luZGV4XS51c2VyaWQ7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgYXBpX2NhbGxzLmNvbnZlcnNhdGlvbl9zdGF0c191cmwoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgc2VuZGVyX2lkOiB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzW2luZGV4XS5zZW5kZXJfaWQsCiAgICAgICAgICAgICAgYWN0aW9uX3RpbWVzdGFtcDogdGhpcy51c2VyX2FjdGlvbl9zdGF0c1tpbmRleF0uYWN0aW9uX2xpc3RbCiAgICAgICAgICAgICAgICBjaGF0X2luZGV4CiAgICAgICAgICAgICAgXS50aW1lc3RhbXAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudXNlcl9yZXBseSA9IFtdOwogICAgICAgICAgICB0aGlzLmJvdF9yZXBseSA9IFtdOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3VzZXIgPSByZXNwb25zZS5kYXRhLmRhdGEudXNlcl9jb252ZXJzYXRpb25zLnVzZXJuYW1lOwogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy5pbnRlcmFjdGlvbnMpIHsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy5pbnRlcmFjdGlvbnNbaV0udXNlciAhPQogICAgICAgICAgICAgICAgICB1bmRlZmluZWQKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB0aGlzLnVzZXJfcmVwbHkucHVzaCgKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGEudXNlcl9jb252ZXJzYXRpb25zLmludGVyYWN0aW9uc1tpXS51c2VyCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy5pbnRlcmFjdGlvbnNbaV0uYm90ICE9CiAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYm90X3JlcGx5LnB1c2goCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy5pbnRlcmFjdGlvbnNbaV0uYm90CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICQoIiNjb252ZXJzYXRpb25fbW9kZWwxIDppbnB1dCIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCJwb3J0YWxfdXNlcl9ub19jaGF0c19tc2ciKSk7CiAgICAgICAgICAgICAgJCgiI2NvbnZlcnNhdGlvbl9tb2RlbDEiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICQoIiNjb252ZXJzYXRpb25fbW9kZWwxIDppbnB1dCIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hhdERldGFpbHMgPSBbXTsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMuZ2VuZXJhbF9jaGF0X2hpc3RvcnkoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMuc2VuZGVyX2lkLAogICAgICAgICAgICAgIGlzc2hvd2NoYXRkZXRhaWxzOiB0cnVlLAogICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWRfZGF0ZSwKICAgICAgICAgICAgICBpc3NlYXJjaDogdGhpcy5pc3NlYXJjaCwKICAgICAgICAgICAgICBpc19wb3J0YWxfdXNlcjogdHJ1ZSwKICAgICAgICAgICAgICBzZWFyY2hzdHJpbmc6IHRoaXMuc2VhcmNoc3RyaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkX2luZGV4LCB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzKTsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy51c2VyX3JlcGx5ID0gW107CiAgICAgICAgICAgIHRoaXMuYm90X3JlcGx5ID0gW107CiAgICAgICAgICAgIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfdXNlciA9IHRoaXMudXNlcl9hY3Rpb25fc3RhdHNbCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkX2luZGV4CiAgICAgICAgICAgICAgXS51c2VyZW1haWw7CiAgICAgICAgICAgICAgdGhpcy5jaGF0RGV0YWlscyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5jaGF0RGV0YWlsczsKICAgICAgICAgICAgICBsZXQgb2ZmZXJzX2luZGV4ID0gbnVsbDsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hhdERldGFpbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgIGxldCBqID0gMDsKICAgICAgICAgICAgICAgICAgaiA8IHRoaXMuY2hhdERldGFpbHNbaV0uQk9UUmVzcG9uc2UubGVuZ3RoOwogICAgICAgICAgICAgICAgICBqKysKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0RGV0YWlsc1tpXS5CT1RSZXNwb25zZVtqXQogICAgICAgICAgICAgICAgICAgICAgLnNob3BpZnlfZmV0Y2hfY3VzdG9tZXJfaWQgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhdERldGFpbHNbaV0uQk9UUmVzcG9uc2Vbal0udGV4dCA9PSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0RGV0YWlsc1tpXS5Vc2VyUXVlcnkgPT09ICJQcm9tb3Rpb25hbCBvZmZlcnMiCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIG9mZmVyc19pbmRleCA9IGk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChvZmZlcnNfaW5kZXggIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGF0RGV0YWlsc1tvZmZlcnNfaW5kZXhdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb2ZmZXJzX2luZGV4ID0gbnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc3QgbmV3X2FyciA9IHRoaXMuY2hhdERldGFpbHMuZmlsdGVyKGEgPT4gYSk7CiAgICAgICAgICAgICAgdGhpcy5jaGF0RGV0YWlscyA9IG5ld19hcnI7CiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5OT19EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAvLyAgICQoIiNjb252ZXJzYXRpb25fbW9kZWwxIDppbnB1dCIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgIC8vICAgJCgiI2NvbnZlcnNhdGlvbl9tb2RlbDEgOmJ1dHRvbiIpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICAgICAgICAvLyB9LCA1MDApOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHByb2R1Y3RfdmFyaWF0aW9uKHByb2R1Y3RzX2xpc3QpIHsKICAgICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0c19saXN0KSB7CiAgICAgICAgcHJvZHVjdHNfbGlzdFtpXS5vcmRlcl9xdHkgPSAxOwogICAgICAgIHByb2R1Y3RzX2xpc3RbaV0uYnV5X3F0eSA9IDE7CiAgICAgICAgaWYgKAogICAgICAgICAgcHJvZHVjdHNfbGlzdFtpXS52YXJpYXRpb25zICYmCiAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnZhcmlhdGlvbnMubGVuZ3RoID4gMAogICAgICAgICkgewogICAgICAgICAgcHJvZHVjdHNfbGlzdFtpXS5pZCA9IHByb2R1Y3RzX2xpc3RbaV0udmFyaWF0aW9uc1swXS5pZDsKICAgICAgICAgIHByb2R1Y3RzX2xpc3RbaV0uaW1nX3VybCA9CiAgICAgICAgICAgIHByb2R1Y3RzX2xpc3RbaV0udmFyaWF0aW9uc1swXS5pbWdfdXJsID09PSBudWxsCiAgICAgICAgICAgICAgPyBwcm9kdWN0c19saXN0W2ldLmltZ191cmwKICAgICAgICAgICAgICA6IHByb2R1Y3RzX2xpc3RbaV0udmFyaWF0aW9uc1swXS5pbWdfdXJsIHx8CiAgICAgICAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnZhcmlhdGlvbnNbMF0uaW1hZ2U7CiAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnBlcm1hbGluayA9IHByb2R1Y3RzX2xpc3RbaV0udmFyaWF0aW9uc1swXS5wZXJtYWxpbms7CiAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnZhcmlhbnRfdGl0bGUgPQogICAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnZhcmlhdGlvbnNbMF0udmFyaWFudF90aXRsZTsKICAgICAgICAgIHByb2R1Y3RzX2xpc3RbaV0uc3RvY2tfcXVhbnRpdHkgPQogICAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnZhcmlhdGlvbnNbMF0uc3RvY2tfcXVhbnRpdHk7CiAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnN0b2NrX3N0YXR1cyA9CiAgICAgICAgICAgIHByb2R1Y3RzX2xpc3RbaV0udmFyaWF0aW9uc1swXS5zdG9ja19zdGF0dXM7CiAgICAgICAgICBwcm9kdWN0c19saXN0W2ldLnByaWNlID0gcHJvZHVjdHNfbGlzdFtpXS52YXJpYXRpb25zWzBdLnByaWNlOwogICAgICAgICAgcHJvZHVjdHNfbGlzdFtpXS5yZWd1bGFyX3ByaWNlID0KICAgICAgICAgICAgcHJvZHVjdHNfbGlzdFtpXS52YXJpYXRpb25zWzBdLnJlZ3VsYXJfcHJpY2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBwcm9kdWN0c19saXN0OwogICAgfSwKICAgIHNlYXJjaF9jaGF0KCkgewogICAgICBpZiAodGhpcy5zZWFyY2hzdHJpbmcgIT0gIiIpIHsKICAgICAgICAvLyB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgICAodGhpcy5pc3NlYXJjaCA9IHRydWUpLCAodGhpcy5zcGlubmVyT24gPSB0cnVlKTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5nZW5lcmFsX2NoYXRfaGlzdG9yeSgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBpc3Nob3c6IHRydWUsCiAgICAgICAgICAgICAgaXNfcG9ydGFsX3VzZXI6IHRydWUsCiAgICAgICAgICAgICAgYWN0aW9uOiAiZ2VuZXJhbF9jaGF0X2hpc3RvcnkiLAogICAgICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgaXNzZWFyY2g6IHRoaXMuaXNzZWFyY2gsCiAgICAgICAgICAgICAgaXNfcG9ydGFsX3VzZXI6IHRydWUsCiAgICAgICAgICAgICAgc2VhcmNoc3RyaW5nOiB0aGlzLnNlYXJjaHN0cmluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cyA9IFtdOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5NU0cgIT0gIk5vIFJlc3VsdHMgRm91bmQiICYmCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5NU0cgIT0gIkludGVybmFsIFNlcnZlciBFcnJvciIKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLmRhdGEuY2hhdEhpc3RvcnlbaV0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX3BhZ2U7CiAgICAgICAgICAgICAgdGhpcy5zZXRwYWdpbmF0aW9uKHRoaXMucGFnZV9ubyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIFJlc3VsdHMgRm91bmQiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCJwb3J0YWxfdXNlcl9ub19yZXN1bHRfZm91bmRfbXNnIikpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCJwb3J0YWxfdXNlcl9pbnRlcm5hbF9zZXJ2ZXJfbXNnMSIpKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfcG9ydGFsX3VzZXJfY2hhdF9oaXN0b3J5KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCJwb3J0YWxfdXNlcl9pbnRlcm5hbF9zZXJ2ZXJfbXNnMiIpKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRfcG9ydGFsX3VzZXJfY2hhdF9oaXN0b3J5KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdG9hc3RyLmVycm9yKHRoaXMudGx0KCJwb3J0YWxfdXNlcl9kYXRhX2Zvcl9zZWFyY2hfbXNnIikpOwogICAgICB9CiAgICB9LAogICAgY2xvc2VfbW9kYWwoKSB7CiAgICAgICQoIiNjb252ZXJzYXRpb25fbW9kZWwxIikubW9kYWwoImhpZGUiKTsKICAgIH0sCiAgICBjaGVja19ib3Rfb2ZmZXJzKGJvdF9yZXBvbnNlKSB7CiAgICAgIGxldCByZXN1bHRfYm90ID0gYm90X3JlcG9uc2UuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBCb29sZWFuKGl0ZW0ub2ZmZXJzKSA9PT0gdHJ1ZTsKICAgICAgfSk7CiAgICAgIGlmIChyZXN1bHRfYm90Lmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gImRpc3BsYXkgOmJsb2NrIjsKICAgICAgfQogICAgICByZXR1cm4gImRpc3BsYXkgOiBmbGV4IjsKICAgIH0sCiAgICB0cmltX2NhcmRfZGVzY3JpcHRpb24odGV4dCkgewogICAgICBpZiAodGV4dC5sZW5ndGggPiAxMDApIHsKICAgICAgICBsZXQgc3RyaW5nX3RleHQgPSB0ZXh0LnN1YnN0cmluZygwLCA4MCkgKyAiLi4uIjsKICAgICAgICByZXR1cm4gc3RyaW5nX3RleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuIHRleHQ7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["PortalUserChatHistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAimBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PortalUserChatHistory.vue","sourceRoot":"src/portal/Chatbot/Dashboard/End User Response","sourcesContent":["<template>\n  <div class=\"table-box\">\n    <div class=\"spinner\" id=\"spinner\" v-show=\"show_loader\"></div>\n    <div\n      v-if=\"selected != 'general_chat_history'\"\n      class=\"table-responsive\"\n      style=\"min-height: 349px\"\n    >\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <!-- <th scope=\"col\">\n                                    <div class=\"form-check checkbox checkbox-success\">\n                                        <label class=\"form-check-label\">\n                                            <input class=\"form-check-input checkbox-success\" type=\"checkbox\" id=\"selectall\">\n                                            <span class=\"icn\"></span>\n                                        </label>\n                                    </div>\n            </th>-->\n            <th scope=\"col\" style=\"width: 25%; text-align: center\">\n              USER NAME\n            </th>\n            <th scope=\"col\" style=\"width: 20%; text-align: center\">\n              NAME OF TASK\n            </th>\n            <th scope=\"col\" style=\"width: 20%; text-align: center\">\n              LAST INTERACTED ON\n            </th>\n            <th scope=\"col\" style=\"width: 20%; text-align: center\">\n              TIME\n            </th>\n          </tr>\n        </thead>\n        <tr\n          v-for=\"(user, index) in user_action_stats\"\n          :key=\"index\"\n          v-show=\"!show_loader\"\n        >\n          <template\n            v-if=\"\n              user.username != 'Bot User' &&\n                user.username != '' &&\n                Boolean(user.username)\n            \"\n          >\n            <td style=\"text-align: center\">\n              {{ user.username }}\n            </td>\n            <td>\n              <tr\n                v-for=\"(action, chat_index) in user.action_list\"\n                :key=\"chat_index\"\n              >\n                <td style=\"width: 50%; text-align: center\">\n                  <a\n                    href=\"javascript:void(0)\"\n                    data-toggle=\"modal\"\n                    data-target=\"#conversation_model\"\n                    @click=\"chat_conversation(index, chat_index)\"\n                    >{{ action.name }}</a\n                  >\n                </td>\n              </tr>\n            </td>\n\n            <td style=\"text-align: center\">\n              <tr\n                v-for=\"(action, chat_index) in user.action_list\"\n                :key=\"chat_index\"\n              >\n                <td style=\"width: 10%\">{{ action.date }}</td>\n              </tr>\n            </td>\n\n            <td style=\"text-align: center\">\n              <tr\n                v-for=\"(action, chat_index) in user.action_list\"\n                :key=\"chat_index\"\n              >\n                <td style=\"width: 10%\">{{ action.time }}</td>\n              </tr>\n            </td>\n          </template>\n        </tr>\n      </table>\n    </div>\n\n    <!-- for general_chat_history -->\n    <div\n      v-if=\"selected == 'general_chat_history'\"\n      class=\"table-responsive\"\n      style=\"min-height: 349px\"\n    >\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <!-- <th\n                    scope=\"col\"\n                    style=\"width: 20%; text-align: center\"\n                >\n                    USER NAME\n                </th> -->\n            <th scope=\"col\" style=\"width: 30%; text-align: center\">\n              {{ tlt(\"portal_user_unique_id\") }}\n            </th>\n            <!-- <th\n                    scope=\"col\"\n                    style=\"width: 20%; text-align: center\"\n                >\n                    PHONE NUMBER\n                </th> -->\n            <th scope=\"col\" style=\"width: 30%; text-align: center;\">\n              {{ tlt(\"portal_user_interacted\") }}\n            </th>\n            <th scope=\"col\" style=\"width: 40%; text-align: center\">\n              {{ tlt(\"portal_user_view_chat\") }}\n            </th>\n            <!-- <th scope=\"col\" style=\"width: 20%;text-align: center;\">NAME OF TASK</th>\n            <th scope=\"col\" style=\"width: 20%;text-align: center;\">DATE</th>\n            <th scope=\"col\" style=\"width: 20%;text-align: center;\">TIME</th>-->\n          </tr>\n        </thead>\n        <tr\n          v-for=\"(user, index) in user_action_stats\"\n          :key=\"index\"\n          v-show=\"!show_loader\"\n        >\n          <template>\n            <!-- <td class=\"text-center\">{{ user.username }}</td> -->\n            <td class=\"text-center\">{{ user.useremail }}</td>\n            <!-- <td class=\"text-center\">{{ user.userphonenumber }}</td> -->\n            <td class=\"text-center\">\n              {{ format_date_in_local_timezone(user.date) }}\n            </td>\n            <td style=\"width: 50%; text-align: center\">\n              <a\n                href=\"javascript:void(0)\"\n                data-toggle=\"modal\"\n                data-target=\"#conversation_model1\"\n                @click=\"chat_date(index)\"\n                style=\"text-align: center\"\n                >{{ tlt(\"view_chat_label\") }}</a\n              >\n            </td>\n          </template>\n        </tr>\n      </table>\n    </div>\n\n    <div class=\"pagin-table\" style=\"margin-top: 2%\">\n      <nav aria-label=\"Page navigation example\">\n        <ul class=\"pagination justify-content-center\">\n          <li class=\"page-item\">\n            <a\n              class=\"page-link\"\n              href=\"javascript:void(0)\"\n              @click=\"page_require(page_no - 1)\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"8.667\"\n                height=\"15.204\"\n                viewBox=\"0 0 8.667 15.204\"\n              >\n                <g\n                  id=\"arrow-point-to-left\"\n                  transform=\"translate(105.806 15.204) rotate(180)\"\n                >\n                  <path\n                    id=\"Path_1136\"\n                    data-name=\"Path 1136\"\n                    d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                    transform=\"translate(0 0)\"\n                    fill=\"#9499ae\"\n                  />\n                </g>\n              </svg>\n            </a>\n          </li>\n          <li\n            :class=\"'page-item ' + pagination_class(pageno)\"\n            v-for=\"pageno in page_array\"\n            :key=\"pageno\"\n          >\n            <a\n              v-if=\"pageno == '...s' || pageno == '...l'\"\n              class=\"page-link\"\n              href=\"javascript:void(0)\"\n              @click=\"page_require(pageno)\"\n              >...</a\n            >\n            <a\n              v-if=\"pageno != '...s' && pageno != '...l'\"\n              class=\"page-link\"\n              href=\"#\"\n              @click=\"page_require(pageno)\"\n              >{{ pageno }}</a\n            >\n          </li>\n          <li class=\"page-item\">\n            <a\n              class=\"page-link\"\n              href=\"javascript:void(0)\"\n              @click=\"page_require(page_no + 1)\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"8.667\"\n                height=\"15.204\"\n                viewBox=\"0 0 8.667 15.204\"\n              >\n                <g id=\"arrow-point-to-right\" transform=\"translate(-97.139 0)\">\n                  <path\n                    id=\"Path_1136\"\n                    data-name=\"Path 1136\"\n                    d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                    transform=\"translate(0 0)\"\n                    fill=\"#9499ae\"\n                  />\n                </g>\n              </svg>\n            </a>\n          </li>\n        </ul>\n      </nav>\n    </div>\n\n    <div\n      v-if=\"selected != 'general_chat_history'\"\n      class=\"modal fade dash-modal\"\n      id=\"conversation_model\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"conversation_model\"\n      aria-hidden=\"true\"\n      style=\"margin-left: -1%\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/user-blue.png\" alt />\n              </div>\n              <h3>{{ tlt(\"chat_history_header\") }}</h3>\n            </div>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <div>\n              <div v-for=\"(user, index) in user_reply\" :key=\"index\">\n                <span class=\"d-flex\">\n                  <h5>{{ current_user }}: &nbsp;</h5>\n                  <p>{{ user }}</p>\n                </span>\n                <span style=\"display: flex\">\n                  <h5>Bot: &nbsp;</h5>\n                  <p>{{ bot_reply[index] }}</p>\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div\n      v-if=\"selected == 'general_chat_history'\"\n      class=\"modal fade dash-modal\"\n      id=\"conversation_model1\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"conversation_model1\"\n      aria-hidden=\"true\"\n      style=\"margin-left: -1%\"\n    >\n      <div\n        class=\"modal-dialog modal-dialog-centered\"\n        role=\"document\"\n        style=\"max-width: 60%\"\n      >\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div class=\"modal-head d-flex align-items-center\">\n              <div class=\"head-icn\">\n                <img src=\"/img/user-blue.png\" alt />\n              </div>\n              <h3>{{ tlt(\"chat_history_header\") }}</h3>\n            </div>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n            <!-- <button type=\"button\" class=\"close\" data-dismiss=\"modal\" @click=\"close_modal\">&times;</button> -->\n            <div>\n              <!-- <div>\n                      <select\n                        id=\"select_coversation_date\"\n                        v-model=\"selected_date\"\n                        class=\"form-control\"\n                        @change=\"chat_conversation\"\n                      >\n                        <option\n                          v-for=\"(date, index) in chat_dates\"\n                          :key=\"index\"\n                          :value=\"date\"\n                        >\n                          {{ date }}\n                        </option>\n                      </select>\n                    </div> -->\n              <div class=\"form-group\">\n                <label>{{ tlt(\"time_range_label\") }}</label>\n                <multiselect\n                  v-model=\"selected_date\"\n                  id=\"select_coversation_date\"\n                  :options=\"chat_dates\"\n                  :searchable=\"true\"\n                  :close-on-select=\"true\"\n                  :show-labels=\"false\"\n                  :allow-empty=\"false\"\n                  @input=\"chat_conversation\"\n                  :placeholder=\"tlt('select_time')\"\n                  :disabled-selected=\"false\"\n                  :hide-selected=\"false\"\n                  :max-height=\"200\"\n                >\n                  <span>{{ selected_date }}</span>\n                </multiselect>\n                <div v-show=\"chatDetails.length == 0\">\n                  <content-loader\n                    viewBox=\"0 0 180 360\"\n                    :speed=\"5\"\n                    primaryColor=\"#f3f3f3\"\n                    secondaryColor=\"#ecebeb\"\n                  >\n                    <rect x=\"40\" y=\"3\" rx=\"4\" ry=\"4\" width=\"350\" height=\"14\" />\n                    <rect x=\"2\" y=\"3\" rx=\"4\" ry=\"4\" width=\"35\" height=\"14\" />\n                    <rect x=\"40\" y=\"23\" rx=\"4\" ry=\"4\" width=\"350\" height=\"14\" />\n                    <rect x=\"2\" y=\"23\" rx=\"4\" ry=\"4\" width=\"35\" height=\"14\" />\n                    <rect x=\"40\" y=\"45\" rx=\"4\" ry=\"4\" width=\"350\" height=\"14\" />\n                    <rect x=\"2\" y=\"45\" rx=\"4\" ry=\"4\" width=\"35\" height=\"14\" />\n                    <rect x=\"40\" y=\"66\" rx=\"4\" ry=\"4\" width=\"350\" height=\"14\" />\n                    <rect x=\"2\" y=\"66\" rx=\"4\" ry=\"4\" width=\"35\" height=\"14\" />\n                    <rect x=\"40\" y=\"88\" rx=\"4\" ry=\"4\" width=\"350\" height=\"14\" />\n                    <rect x=\"2\" y=\"88 \" rx=\"4\" ry=\"4\" width=\"35\" height=\"14\" />\n                    <rect\n                      x=\"40\"\n                      y=\"108\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"350\"\n                      height=\"14\"\n                    />\n                    <rect x=\"2\" y=\"108\" rx=\"4\" ry=\"4\" width=\"35\" height=\"14\" />\n                  </content-loader>\n                </div>\n              </div>\n              <p></p>\n              <div\n                style=\"text-align:justify\"\n                v-for=\"(user, index) in chatDetails\"\n                :key=\"index\"\n              >\n                <span\n                  v-if=\"user.UserQuery != ''\"\n                  class=\"py-0 my-0\"\n                  style=\"display: flex; height:0%;\"\n                >\n                  <h5\n                    class=\"py-0 mt-2 mb-0\"\n                    style=\"float:left;width:3%; height:0%;\"\n                  >\n                    Q:\n                  </h5>\n                  <p\n                    class=\"py-0 mb-0\"\n                    style=\"word-break: break-all; margin-top:11px;\"\n                  >\n                    {{ user.UserQuery }}\n                  </p>\n                </span>\n                <div v-if=\"user.UserQuery != '' || checkintent(index)\">\n                  <span\n                    v-for=\"(bot, index2) in user.BOTResponse\"\n                    :key=\"index2\"\n                    :style=\"check_bot_offers(user.BOTResponse)\"\n                  >\n                    <h5\n                      v-if=\"\n                        bot.img != undefined ||\n                          bot.text != undefined ||\n                          bot.products != undefined ||\n                          bot.offers != undefined ||\n                          bot.template == 'utter_default' ||\n                          bot.contact_us_email != undefined ||\n                          bot.contact_us_phone_number != undefined ||\n                          bot.buttons != undefined\n                      \"\n                      class=\"py-0 mt-0 mb-0\"\n                      style=\"float:left;width:3%;!important\"\n                    >\n                      A:\n                    </h5>\n                    <div\n                      v-if=\"Boolean(bot.buttons) === true && bot.text == ''\"\n                      style=\"width: max-content;\"\n                    >\n                      <strong\n                        v-if=\"\n                          Boolean(bot.buttons) === true &&\n                            bot.buttons.length > 0 &&\n                            bot.text == ''\n                        \"\n                        style=\"color: dimgray;\"\n                      >\n                        Options :</strong\n                      >\n                      <span\n                        v-for=\"(button, index3) in bot.buttons\"\n                        :key=\"index3\"\n                        style=\"border: 1px solid #cccccc; cursor: default; padding: 2px;\n                                      margin-right: 5px; background: #f2f2f2; border-radius: 5px;\"\n                      >\n                        <span class=\"p-0 mb-1\"> {{ button.title }}</span>\n                      </span>\n                    </div>\n                    <!-- <p style=\"margin-top:2px; margin-bottom:0px; width:100%\" \n                            v-if=\"bot.contact_us_email != undefined\"\n                          >Please feel free to reachout to us at : <span v-html=\"bot.contact_us_email\"></span></p> -->\n                    <p\n                      style=\"margin-top:2px; margin-bottom:0px; width:100%\"\n                      v-if=\"bot.contact_us_email != undefined\"\n                      v-html=\"\n                        messaging_platform_formating(bot.contact_us_email) +\n                          messaging_platform_formating_number(\n                            bot.contact_us_phone_number\n                          )\n                      \"\n                    ></p>\n                    <p\n                      style=\"margin-top:2px; margin-bottom:0px; width:100%\"\n                      v-if=\"bot.message != undefined\"\n                      v-html=\"confusion_message_formating(bot.message)\"\n                    ></p>\n                    <div>\n                      <p\n                        style=\"margin-top:2px; margin-bottom:0px; width:100%;\"\n                        v-if=\"bot.text != undefined && bot.text != ''\"\n                        v-html=\"bot.text\"\n                      ></p>\n                      <span v-if=\"bot.video != undefined && bot.video != ''\"\n                        ><a :href=\"bot.video\" target=\"blank\"\n                          >Attach Video</a\n                        ></span\n                      >\n                    </div>\n                    <div\n                      v-for=\"(offer, index4) in bot.offers\"\n                      :key=\"index4\"\n                      style=\"width:100%; margin-bottom:0px; padding-left:1.7rem\"\n                      class=\"pb-0\"\n                    >\n                      <span\n                        v-html=\"offer.offer\"\n                        v-if=\"bot.offers != undefined\"\n                      ></span>\n                    </div>\n                    <div\n                      style=\"float:left;width:100% \"\n                      v-if=\"bot.img != undefined && bot.img != ''\"\n                    >\n                      <img :src=\"bot.img\" />\n                    </div>\n                    <div\n                      style=\"height:140px; width:140px;position:relative\"\n                      v-if=\"bot.image != undefined && bot.image != ''\"\n                    >\n                      <img\n                        style=\"position:absolute;height:inherit\"\n                        :src=\"bot.image\"\n                      />\n                    </div>\n                    <!-- <p v-if=\"bot.intent!=undefined\" >{{bot.intent}}</p> -->\n                    <div\n                      class=\"buy-products\"\n                      style=\"display: flex; overflow: auto hidden; float:left;width:100% \"\n                      @mousewheel=\"scroll_div\"\n                      v-if=\"bot.products != undefined\"\n                    >\n                      <div\n                        class=\"image-container\"\n                        v-for=\"(product, index1) in product_variation(\n                          bot.products.products_list\n                        )\"\n                        :key=\"index1\"\n                      >\n                        <img\n                          v-if=\"product.img_url != null\"\n                          :src=\"check_image_type(product.img_url)\"\n                          class=\"center-block p-0 m-0\"\n                          style=\"height:140px; width:140px;\"\n                        />\n                        <img\n                          v-else\n                          src=\"/img/blank_product_image.png\"\n                          class=\"image-product-blank\"\n                          style=\"height:140px; width:140px; border: 1px solid;\"\n                          alt=\"No Product Image\"\n                        />\n                        <p class=\"p-0 mb-1\">{{ product.title }}</p>\n                        <p class=\"p-0 mb-1\">{{ product.price }}</p>\n                        <!-- <p class=\"buy-now\" @click=\"generate_payment(product.price)\">Buy Now</p> -->\n                      </div>\n                    </div>\n                    <div\n                      class=\"main-card-container\"\n                      @mousewheel=\"scroll_card_div\"\n                      v-if=\"bot.card != undefined\"\n                    >\n                      <div\n                        class=\"card-container\"\n                        style=\"\"\n                        v-for=\"(card, index5) in bot.card\"\n                        :key=\"index5\"\n                      >\n                        <span v-if=\"card.is_image == true\">\n                          <img\n                            v-if=\"card.image != ''\"\n                            :src=\"check_image_type(card.image)\"\n                            class=\"center-block p-0 m-0 carousel-card-img\"\n                          />\n                          <img\n                            v-else\n                            src=\"/img/blank_product_image.png\"\n                            class=\"image-product-blank image-box-card\"\n                            style=\"\"\n                            alt=\"No Product Image\"\n                          />\n                        </span>\n                        <span v-else>\n                          <video width=\"200\" height=\"160\" controls>\n                            <source\n                              v-if=\"card.video != ''\"\n                              :src=\"card.video\"\n                              type=\"video/mp4\"\n                              class=\"center-block p-0 m-0\"\n                              allow=\"autoplay\"\n                              accept=\"video/mp4,video/x-m4v,video/*\"\n                            />\n                            {{ tlt(\"video_tag_msg\") }}\n                          </video>\n                        </span>\n                        <h6 class=\"p-0 my-1 ml-1\">\n                          {{ card.title }}\n                        </h6>\n                        <p\n                          class=\"p-0 mb-1 ml-1\"\n                          style=\"width: 180px; text-align: left; font-size: 15px;\"\n                          :title=\"card.text.length > 100 ? card.text : ''\"\n                        >\n                          {{ trim_card_description(card.text) }}\n                        </p>\n                        <div\n                          class=\"card-button\"\n                          style=\"margin-left: 5px; margin-bottom: 5px;\"\n                          v-if=\"\n                            Boolean(card.buttons) === true &&\n                              card.buttons.length > 0\n                          \"\n                        >\n                          <span\n                            v-for=\"(cardbtn, index6) in card.buttons\"\n                            :key=\"index6\"\n                            style=\"cursor: default;\n                                        margin-right: 5px;\"\n                          >\n                            <span\n                              v-if=\"cardbtn.title != '' && cardbtn.value != ''\"\n                              class=\"p-0 mb-1 carousel-btn\"\n                            >\n                              {{ cardbtn.title }}\n                            </span>\n                            <span v-else> </span>\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </span>\n                </div>\n                <!-- Showing Products -->\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport api_calls from \"@/portal/api_calls\";\nimport Multiselect from \"vue-multiselect\";\nimport moment from \"moment\";\nimport { ContentLoader } from \"vue-content-loader\";\nimport Swal from \"sweetalert2\";\nexport default {\n  components: {\n    Multiselect,\n    ContentLoader\n  },\n  data() {\n    return {\n      number_of_rows: \"\",\n      total_pages: 0,\n      page_no: 1,\n      per_page: 15,\n      user_list: [],\n      user_reply: [],\n      bot_reply: [],\n      chatDetails: [],\n      action_stats: [],\n      user_action_stats: [],\n      current_user: \"\",\n      timestamp: \"\",\n      sender_id: [],\n      selected: \"general_chat_history\",\n      selected_date: \"\",\n      selected_index: null,\n      chat_dates: [],\n      companyname: this.$session.get(\"UserInformation\").company_name,\n      companyid: this.$session.get(\"UserInformation\").company_id,\n      issearch: false,\n      searchstring: \"\",\n      spinnerOn: false,\n      view_component_name: \"portal_user\",\n      // fingerprintregex:/^[0-9]{10}$/,\n      fingerprintregex: /^[0-9-+\\/\\s]{9,}$/,\n      page_array: [],\n      show_loader: false,\n      is_portal_user: true,\n      contact_help_email: null,\n      retail_web_framework: this.$session.get(\"retail_web_framework\"),\n      filter_chat_history: this.$session.get(\"filter_chat_history\")\n    };\n  },\n  mounted() {\n    this.retail_web_framework = this.$session.get(\"retail_web_framework\");\n    $(\"#selectall\").click(function() {\n      if ($(this).is(\":checked\")) {\n        $(\"input:checkbox\").prop(\"checked\", true);\n      } else {\n        $(\"input:checkbox\").prop(\"checked\", false);\n      }\n    });\n    this.$root.$on(\"search_portal_user_chat_history\", data => {\n      this.searchstring = data;\n      this.search_chat();\n      // this.search_question();\n    });\n    this.$root.$on(\"load_portal_user_chat_history\", data => {\n      this.load_portal_user_chat_history();\n    });\n  },\n  beforeDestroy() {\n    this.$root.$off(\"search_portal_user_chat_history\");\n    this.$root.$off(\"load_portal_user_chat_history\");\n  },\n  created() {\n    this.load_product_settings();\n    this.load_portal_user_chat_history();\n  },\n  methods: {\n    format_date_in_local_timezone(date) {\n      var testDateUtc = moment.utc(date);\n      var localDate = moment(testDateUtc)\n        .local()\n        .toDate();\n      // note: do not format time below to show hour and minute because \"View Chat History\" show all message of that date not specific hour-minute time.\n      localDate = moment(localDate).format(\"ddd MMM D YYYY\");\n      return localDate.toString();\n    },\n    messaging_platform_formating(message) {\n      return \"Please feel free to reachout to us at :\" + message;\n    },\n    messaging_platform_formating_number(message) {\n      if (message != null) {\n        return \" or call us at :\" + message;\n      } else {\n        return \"\";\n      }\n    },\n    confusion_message_formating(message) {\n      return message.split(\"{email}\").join(this.contact_help_email);\n    },\n    load_product_settings() {\n      this.show_loader = true;\n      axios\n        .post(\n          api_calls.product_settings(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            is_get: true\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          let webframework = this.retail_web_framework;\n          if( response.data.message.MSG_CODE === this.api_status_code.NO_DATA_AVAILABLE.MSG_CODE){\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              showCancelButton: false,\n              showConfirmButton: false,\n              type: \"info\",\n              toast:true,\n              timer:2500\n            })\n          }else if(response.data.message.MSG_CODE === this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE){\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              showCancelButton: false,\n              showConfirmButton: false,\n              type: \"error\",\n            })\n          }else if( response.data.message.MSG_CODE === this.api_status_code.DATA_AVAILABLE.MSG_CODE){\n            if(webframework){\n               this.contact_help_email = response.data.data[webframework + \"_details\"].contact_help_email;\n            }else{\n                this.contact_help_email = response.data.data.details.contact_help_email;\n            }\n          }else{\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              showCancelButton: false,\n              showConfirmButton: true,\n              type: \"error\"\n            })\n          }\n        })\n        .catch(e => {\n          this.show_loader = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    check_image_type(image) {\n      if (typeof image == \"string\") {\n        return image;\n      } else {\n        if (image != null) {\n          return image.src;\n        } else {\n          return \"\";\n        }\n      }\n    },\n    load_portal_user_chat_history() {\n      this.page_no = 1;\n      this.checked_list = [];\n      this.searchstring = \"\";\n      this.action_stats = [];\n      this.user_action_stats = [];\n      this.show_loader = true;\n      axios\n        .post(\n          api_calls.action_stats_url(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          if(this.api_status_code.COMPANY_ACTION_STATS.MSG_CODE == response.data.message.MSG_CODE){\n            this.action_stats = response.data.data.action_stats;\n            this.action_stats.push({\n              Hits: 1,\n              Name: \"general_chat_history\"\n            });\n          } else {\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              showCancelButton: false,\n              showConfirmButton: false,\n              type: \"error\",\n              timer:2500\n            })\n          }\n        })\n        .catch(e => {\n          this.show_loader = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n      this.show_loader = true;\n      axios\n        .post(\n          api_calls.general_chat_history(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            isshow: true,\n            is_portal_user: true,\n            action: \"general_chat_history\",\n            filter_chat_history: this.$session.get(\"filter_chat_history\"),\n            pageno: this.page_no,\n            perpage: this.per_page,\n            issearch: this.issearch\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          this.show_loader = false;\n          this.user_action_stats = [];\n          if(this.api_status_code.DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n            for (let i = 0; i < response.data.data.chatHistory.length; i++) {\n            // console.log(\n            //   this.fingerprintregex.test(response.data.chatHistory[i]._id.User)\n            // );\n            if (\n              this.fingerprintregex.test(response.data.data.chatHistory[i]._id.User)\n            ) {\n              this.user_action_stats.push({\n                useremail: response.data.data.chatHistory[i].Email,\n                userphonenumber: response.data.data.chatHistory[i].PhoneNumber,\n                username: response.data.data.chatHistory[i].UserName,\n                userid: response.data.data.chatHistory[i]._id.User,\n                date: response.data.data.chatHistory[i].Date\n              });\n              // console.log(this.user_action_stats, response.data.chatHistory[i]);\n            } else {\n              this.user_action_stats.push({\n                useremail: response.data.data.chatHistory[i]._id.User,\n                userphonenumber: response.data.data.chatHistory[i].PhoneNumber,\n                username: response.data.data.chatHistory[i].UserName,\n                userid: response.data.data.chatHistory[i]._id.User,\n                date: response.data.data.chatHistory[i].Date\n              });\n            }\n            // this.user_action_stats.push({\n            //     useremail : response.data.chatHistory[i]._id.User,\n            //     userphonenumber : response.data.chatHistory[i].PhoneNumber,\n            //     username : response.data.chatHistory[i].UserName,\n            // });\n            }\n          } else if(this.api_status_code.NO_DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n              Swal({\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                toast: true,\n                position: \"top-end\",\n                type: \"info\",\n                timer: 2500\n              })\n          }\n          else {\n          Swal({\n            title: response.data.message.MSG_CODE,\n            text: response.data.message.MSG,\n            showCancelButton: false,\n            showConfirmButton: false,\n            type: \"error\",\n            timer: 3000\n          })\n          }\n            this.number_of_rows = response.data.pagination.total_data == undefined ? 0 : response.data.pagination.total_data;\n          this.total_pages = response.data.pagination.total_page == undefined ? 0 : response.data.pagination.total_page;\n          this.setpagination(this.page_no);\n          // console.log(this.user_action_stats);\n        })\n        .catch(e => {\n          console.log(e)\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n          this.show_loader = false;\n        });\n    },\n    page_require(page_no) {\n      if (this.selected != \"general_chat_history\") {\n        // console.log(this.total_pages, page_no);\n        if (page_no == 0 || page_no == this.total_pages + 1) {\n        } else {\n          // this.page_no = page_no;\n          if (page == \"...s\") {\n            this.page_no = Math.ceil((1 + this.page_no) / 2);\n          } else if (page == \"...l\") {\n            this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n          } else {\n            this.page_no = page;\n          }\n          axios\n            .post(\n              api_calls.action_usage_stats_url(),\n              {\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                // action: this.action_stats[index].Name,\n                action: this.selected,\n                page_no: this.page_no,\n                per_page: this.per_page\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`\n                }\n              }\n            )\n            .then(response => {\n              // this.spinnerOn = false;\n              // this.user_list = [];\n              // for (var i in response.data[0]) {\n              //   this.intentlist.push({\n              //     intent: response.data[0][i],\n              //     email: response.data[1][i],\n              //     created: response.data[2][i]\n              //   });\n              // }\n            })\n            .catch(e => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      } else {\n        if (page_no == 0 || page_no == this.total_pages + 1) {\n        } else {\n          if (page_no == \"...s\") {\n            this.page_no = Math.ceil((1 + this.page_no) / 2);\n          } else if (page_no == \"...l\") {\n            this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n          } else {\n            this.page_no = page_no;\n          }\n          // this.page_no = page_no;\n          this.spinnerOn = true;\n          axios\n            .post(\n              api_calls.general_chat_history(),\n              {\n                company_name: this.companyname,\n                company_id: this.companyid,\n                email: this.$session.get(\"UserInformation\").email,\n                license_key: this.$session.get(\"UserInformation\").license_key,\n                token: this.$session.get(\"UserInformation\").tokens,\n                isshow: true,\n                is_portal_user: true,\n                action: this.selected,\n                filter_chat_history: this.$session.get(\"filter_chat_history\"),\n                pageno: this.page_no,\n                perpage: this.per_page,\n                issearch: this.issearch,\n                is_portal_user: true\n              },\n              {\n                headers: {\n                  Authorization: `Bearer ${this.$session.get(\"at\")}`\n                }\n              }\n            )\n            .then(response => {\n              this.spinnerOn = false;\n              this.user_action_stats = [];\n              for (let i = 0; i < response.data.data.chatHistory.length; i++) {\n                if (\n                  this.fingerprintregex.test(\n                    response.data.data.chatHistory[i]._id.User\n                  )\n                ) {\n                  this.user_action_stats.push({\n                    useremail: response.data.data.chatHistory[i].Email,\n                    userphonenumber: response.data.data.chatHistory[i].PhoneNumber,\n                    username: response.data.data.chatHistory[i].UserName,\n                    userid: response.data.data.chatHistory[i]._id.User,\n                    date: response.data.data.chatHistory[i].Date\n                  });\n                } else {\n                  this.user_action_stats.push({\n                    useremail: response.data.data.chatHistory[i]._id.User,\n                    userphonenumber: response.data.data.chatHistory[i].PhoneNumber,\n                    username: response.data.data.chatHistory[i].UserName,\n                    userid: response.data.data.chatHistory[i]._id.User,\n                    date: response.data.data.chatHistory[i].Date\n                  });\n                }\n                // this.user_action_stats.push({\n                //     useremail : response.data.chatHistory[i]._id.User,\n                //     userphonenumber : response.data.chatHistory[i].PhoneNumber,\n                //     username : response.data.chatHistory[i].UserName,\n                // });\n              }\n              this.total_pages = response.data.pagination.total_page;\n              this.setpagination(this.page_no);\n            })\n            .catch(e => {\n              if (\n                e.response.status === 410 ||\n                e.response.status === 440 ||\n                e.response.status === 409\n              ) {\n                this.$root.$emit(\"Session_Expired\", e.response.data);\n              }\n            });\n        }\n      }\n    },\n    pagination_class(index) {\n      if (index == this.page_no) {\n        return \" active\";\n      } else {\n        return \"\";\n      }\n    },\n    setpagination(page_no) {\n      this.page_array = [];\n      if (this.total_pages <= 7) {\n        for (let i = 0; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no == 1) {\n        for (let i = 0; i < 4; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no == this.total_pages) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = this.total_pages - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no <= 4) {\n        for (let i = 0; i < page_no + 3; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no >= this.total_pages - 4) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 3; i <= page_no + 3; i++) {\n          this.page_array.push(i);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      }\n    },\n    // view_action() {\n    //   var action_name = event.target.value;\n    //   this.selected = action_name;\n    //   this.searchstring = \"\";\n    //   if (action_name != \"general_chat_history\") {\n    //     this.spinnerOn = true;\n    //     axios\n    //       .post(\n    //         api_calls.action_usage_stats_url(),\n    //         {\n    //           companyname: this.companyname,\n    //           companyid: this.companyid,\n    //           email: this.$session.get(\"UserInformation\").email,\n    //           license_key: this.$session.get(\"UserInformation\").license_key,\n    //           token: this.$session.get(\"UserInformation\").tokens,\n    //           action: action_name,\n    //           page_no: 1,\n    //           per_page: this.per_page,\n    //         },\n    //         {\n    //           headers: {\n    //             Authorization: `Bearer ${this.$session.get(\"at\")}`,\n    //           },\n    //         }\n    //       )\n    //       .then((response) => {\n    //         this.spinnerOn = false;\n    //         this.number_of_rows = response.data.number_of_rows;\n    //         this.total_pages = Math.ceil(this.number_of_rows / this.per_page);\n    //         this.user_action_stats = [];\n    //         for (var i in response.data.users) {\n    //           if (response.data.users[i].action_hits != 0) {\n    //             let action_history = [];\n    //             for (var j in response.data.users[i].action_hits) {\n    //               action_history.push(response.data.users[i].action_hits[j]);\n    //             }\n    //             this.user_action_stats.push({\n    //               username: response.data.users[i].username,\n    //               action_list: action_history,\n    //               sender_id: response.data.users[i].sender_id,\n    //             });\n    //           }\n    //         }\n    //       })\n    //       .catch((e) => {\n    //         if (\n    //           e.response.status === 410 ||\n    //           e.response.status === 440 ||\n    //           e.response.status === 409\n    //         ) {\n    //           this.$root.$emit(\"Session_Expired\", e.response.data);\n    //         }\n    //       });\n    //   } else {\n    //     this.spinnerOn = true;\n    //     axios\n    //       .post(\n    //         api_calls.general_chat_history(),\n    //         {\n    //           companyname: this.companyname,\n    //           companyid: this.companyid,\n    //           email: this.$session.get(\"UserInformation\").email,\n    //           license_key: this.$session.get(\"UserInformation\").license_key,\n    //           token: this.$session.get(\"UserInformation\").tokens,\n    //           isshow: true,\n    //           action: action_name,\n    //           pageno: this.page_no,\n    //           perpage: this.per_page,\n    //           issearch: this.issearch,\n    //         },\n    //         {\n    //           headers: {\n    //             Authorization: `Bearer ${this.$session.get(\"at\")}`,\n    //           },\n    //         }\n    //       )\n    //       .then((response) => {\n    //         this.spinnerOn = false;\n    //         this.user_action_stats = [];\n    //         for (let i = 0; i < response.data.chatHistory.length; i++) {\n    //           this.user_action_stats.push({\n    //             useremail: response.data.chatHistory[i]._id.User,\n    //             userphonenumber: response.data.chatHistory[i].PhoneNumber,\n    //             username: response.data.chatHistory[i].UserName,\n    //           });\n    //         }\n    //       })\n    //       .catch((e) => {\n    //         if (\n    //           e.response.status === 410 ||\n    //           e.response.status === 440 ||\n    //           e.response.status === 409\n    //         ) {\n    //           this.$root.$emit(\"Session_Expired\", e.response.data);\n    //         }\n    //       });\n    //   }\n    // },\n    scroll_div() {\n      var doc = document.querySelector(\".buy-products\");\n      if (event.deltaX > event.deltaY) {\n        doc.scrollLeft += 10;\n      } else if (event.deltaX < event.deltaY) {\n        doc.scrollLeft -= 10;\n      }\n    },\n    scroll_card_div() {\n      var doc = document.querySelector(\".main-card-container\");\n      if (event.deltaX > event.deltaY) {\n        doc.scrollLeft += 10;\n      } else if (event.deltaX < event.deltaY) {\n        doc.scrollLeft -= 10;\n      }\n    },\n    checkintent(index) {\n      if (this.chatDetails[index - 1] != undefined) {\n        if (this.chatDetails[index - 1].BOTResponse[0] != undefined) {\n          if (this.chatDetails[index - 1].BOTResponse[0].intent != undefined) {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n    chat_date(index) {\n      this.chatDetails = [];\n      this.sender_id = this.user_action_stats[index].userid;\n      this.spinnerOn = true;\n      axios\n        .post(\n          api_calls.general_chat_history(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            username: this.sender_id,\n            isshowdates: true,\n            issearch: this.issearch,\n            is_portal_user: true,\n            searchstring: this.searchstring\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`\n            }\n          }\n        )\n        .then(response => {\n          this.spinnerOn = false;\n          if(this.api_status_code.DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n            this.chat_dates = response.data.data.Dates;\n            this.selected_date =\n              response.data.data.Dates[response.data.data.Dates.length - 1];\n            this.chat_dates.reverse();\n            // console.log(this.selected_index);\n            this.selected_index = index;\n            this.chat_conversation(index);\n          } else if(this.api_status_code.NO_DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              toast: true,\n              showCancelButton: false,\n              showConfirmButton: false,\n              type: \"info\",\n              timer: 2500\n            })\n          }\n          else {\n            Swal({\n              title: response.data.message.MSG_CODE,\n              text: response.data.message.MSG,\n              showCancelButton: false,\n              showConfirmButton: false,\n              type: \"error\",\n              timer: 2500\n            })\n          }\n        })\n        .catch(e => {\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    chat_conversation(index, chat_index) {\n      // console.log(index, chat_index);\n      if (this.selected != \"general_chat_history\") {\n        this.sender_id = this.user_action_stats[index].userid;\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.conversation_stats_url(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              sender_id: this.user_action_stats[index].sender_id,\n              action_timestamp: this.user_action_stats[index].action_list[\n                chat_index\n              ].timestamp\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            this.user_reply = [];\n            this.bot_reply = [];\n            if (response.data != null) {\n              this.current_user = response.data.data.user_conversations.username;\n              for (var i in response.data.data.user_conversations.interactions) {\n                if (\n                  response.data.data.user_conversations.interactions[i].user !=\n                  undefined\n                ) {\n                  this.user_reply.push(\n                    response.data.data.user_conversations.interactions[i].user\n                  );\n                } else if (\n                  response.data.user_conversations.interactions[i].bot !=\n                  undefined\n                ) {\n                  this.bot_reply.push(\n                    response.data.data.user_conversations.interactions[i].bot\n                  );\n                }\n              }\n              $(\"#conversation_model1 :input\").prop(\"disabled\", true);\n            } else {\n              toastr.error(this.tlt(\"portal_user_no_chats_msg\"));\n              $(\"#conversation_model1\").modal(\"hide\");\n            }\n            $(\"#conversation_model1 :input\").prop(\"disabled\", true);\n          })\n          .catch(e => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        this.chatDetails = [];\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.general_chat_history(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              username: this.sender_id,\n              isshowchatdetails: true,\n              date: this.selected_date,\n              issearch: this.issearch,\n              is_portal_user: true,\n              searchstring: this.searchstring\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            // console.log(this.selected_index, this.user_action_stats);\n            this.spinnerOn = false;\n            this.user_reply = [];\n            this.bot_reply = [];\n            if (this.api_status_code.DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE) {\n              this.current_user = this.user_action_stats[\n                this.selected_index\n              ].useremail;\n              this.chatDetails = response.data.data.chatDetails;\n              let offers_index = null;\n              for (var i = 0; i < this.chatDetails.length; i++) {\n                for (\n                  let j = 0;\n                  j < this.chatDetails[i].BOTResponse.length;\n                  j++\n                ) {\n                  if (\n                    this.chatDetails[i].BOTResponse[j]\n                      .shopify_fetch_customer_id == true &&\n                    this.chatDetails[i].BOTResponse[j].text == null &&\n                    this.chatDetails[i].UserQuery === \"Promotional offers\"\n                  ) {\n                    offers_index = i;\n                  }\n                }\n                if (offers_index != null) {\n                  delete this.chatDetails[offers_index];\n                }\n                offers_index = null;\n              }\n              const new_arr = this.chatDetails.filter(a => a);\n              this.chatDetails = new_arr;\n            } else if(this.api_status_code.NO_DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"info\",\n                timer: 2500\n              })\n            } else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\",\n                timer: 2500\n              })\n            }\n            // setTimeout(() => {\n            //   $(\"#conversation_model1 :input\").prop(\"disabled\", true);\n            //   $(\"#conversation_model1 :button\").prop(\"disabled\", false);\n            // }, 500);\n          })\n          .catch(e => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    product_variation(products_list) {\n      for (var i in products_list) {\n        products_list[i].order_qty = 1;\n        products_list[i].buy_qty = 1;\n        if (\n          products_list[i].variations &&\n          products_list[i].variations.length > 0\n        ) {\n          products_list[i].id = products_list[i].variations[0].id;\n          products_list[i].img_url =\n            products_list[i].variations[0].img_url === null\n              ? products_list[i].img_url\n              : products_list[i].variations[0].img_url ||\n                products_list[i].variations[0].image;\n          products_list[i].permalink = products_list[i].variations[0].permalink;\n          products_list[i].variant_title =\n            products_list[i].variations[0].variant_title;\n          products_list[i].stock_quantity =\n            products_list[i].variations[0].stock_quantity;\n          products_list[i].stock_status =\n            products_list[i].variations[0].stock_status;\n          products_list[i].price = products_list[i].variations[0].price;\n          products_list[i].regular_price =\n            products_list[i].variations[0].regular_price;\n        }\n      }\n      return products_list;\n    },\n    search_chat() {\n      if (this.searchstring != \"\") {\n        // this.spinnerOn = true;\n        this.page_no = 1;\n        (this.issearch = true), (this.spinnerOn = true);\n        axios\n          .post(\n            api_calls.general_chat_history(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              isshow: true,\n              is_portal_user: true,\n              action: \"general_chat_history\",\n              pageno: this.page_no,\n              perpage: this.per_page,\n              issearch: this.issearch,\n              is_portal_user: true,\n              searchstring: this.searchstring\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            this.user_action_stats = [];\n            if (\n              response.data.MSG != \"No Results Found\" &&\n              response.data.MSG != \"Internal Server Error\"\n            ) {\n              for (let i = 0; i < response.data.data.chatHistory.length; i++) {\n                this.user_action_stats.push({\n                  username: response.data.data.chatHistory[i]\n                });\n              }\n              this.total_pages = response.data.pagination.total_page;\n              this.setpagination(this.page_no);\n            } else if (response.data.MSG == \"No Results Found\") {\n              toastr.error(this.tlt(\"portal_user_no_result_found_msg\"));\n            } else if (response.data.MSG == \"Internal Server Error\") {\n              toastr.error(this.tlt(\"portal_user_internal_server_msg1\"));\n              this.load_portal_user_chat_history();\n            } else {\n              toastr.error(this.tlt(\"portal_user_internal_server_msg2\"));\n              this.load_portal_user_chat_history();\n            }\n          })\n          .catch(e => {\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      } else {\n        toastr.error(this.tlt(\"portal_user_data_for_search_msg\"));\n      }\n    },\n    close_modal() {\n      $(\"#conversation_model1\").modal(\"hide\");\n    },\n    check_bot_offers(bot_reponse) {\n      let result_bot = bot_reponse.filter(item => {\n        return Boolean(item.offers) === true;\n      });\n      if (result_bot.length > 0) {\n        return \"display :block\";\n      }\n      return \"display : flex\";\n    },\n    trim_card_description(text) {\n      if (text.length > 100) {\n        let string_text = text.substring(0, 80) + \"...\";\n        return string_text;\n      }\n      return text;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.carousel-card-img {\n  height: 160px;\n  width: 200px;\n  background-size: cover !important;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n}\n.image-box-card {\n  width: 200px;\n  height: 160px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n}\n.carousel-btn {\n  width: 95% !important;\n  font-size: 14px !important;\n  text-align: center !important;\n  background: #e4e6eb !important;\n  border: 1px solid #e4e6eb !important;\n  padding: 6px 15px !important;\n  font-weight: 550 !important;\n  line-height: 1.9vh !important;\n  display: inline-block !important;\n  border-radius: 5px !important;\n  margin-bottom: 0.5rem !important;\n  /* cursor: pointer!important; */\n}\n.main-card-container {\n  display: flex;\n  overflow: auto hidden;\n  float: left;\n  width: 100%;\n  margin-bottom: 5px;\n}\n.card-container {\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\n  background-color: #f0f2f5 !important;\n  margin-right: 0.5rem;\n  border-radius: 10px;\n  width: 200px;\n  margin-bottom: 10px;\n}\n.table td,\n.table th {\n  vertical-align: middle;\n}\n.view-pass {\n  position: initial;\n  right: 15px;\n  top: 15px;\n}\nimg {\n  max-width: 100%;\n  max-height: 100%;\n  /* height: 140px;\n  width: 140px; */\n}\n.image-container {\n  /* background: #fff;\n  border: #fff 1px solid;\n  border-radius: 5px 5px 5px 5px; */\n  margin: 5px;\n  /* height: 230px;\n  width: -webkit-fill-available; */\n}\n.image-container {\n  font-size: 15px;\n  text-align: center;\n}\n.search-bar {\n  height: 32px;\n}\n.darkblue-btn {\n  height: 32px;\n  margin-left: 10px;\n}\n</style>\n"]}]}