{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/TrainTestBot.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/TrainTestBot.vue","mtime":1663910265466},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgc3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJ2dWUtbXVsdGlzZWxlY3QiOwppbXBvcnQgeyBmcmVlemVfcG9ydGFsLHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCAsIGNsb3NlX21vZGFsfSBmcm9tICJAL3BvcnRhbC9taXhpbnMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUcmFpblRlc3RCb3RQYWdlIiwKICBtaXhpbnM6IFsKICAgIGZyZWV6ZV9wb3J0YWwsCiAgICBzaG93X3N1YnNjcmlwdGlvbl9leHBpcmVkX3N3YWwsCiAgICBjbG9zZV9tb2RhbAogIF0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRlcl9zdGF0dXM6IkZhaWx1cmUiLAogICAgICBzcGlubmVyT246IGZhbHNlLAogICAgICBxdWVzdGlvbnNfbGlzdDogW10sCiAgICAgIGludGVudF9saXN0OiBbXSwKICAgICAgY3VycmVudF9zZWxlY3RlZF9pbnRlbnQ6IG51bGwsCiAgICAgIHNlbGVjdGVkX3F1ZXN0aW9uX2luZGV4OiBudWxsLAogICAgICBjdXJyZW50X3NlbGVjdGVkX2ludGVudF9xdWVzdGlvbnM6IFtdLAogICAgICBzdGF0dXNfbGlzdDogWyJTdWNjZXNzIiwgIkZhaWx1cmUiXSwKICAgICAgc2VsZWN0ZWRfc3RhdHVzbGlzdDogWyJGYWlsdXJlIl0sCiAgICAgIGNvbXBhbnlfaWQ6IG51bGwsCiAgICAgIGNvbXBhbnlfbmFtZTogbnVsbCwKICAgICAgZmlsZV9sYWJlbDogIkNob29zZSBmaWxlIiwKICAgICAgZmlsZV9jb250ZW50OiAiIiwKICAgICAgcGFnZV9ubzogMSwKICAgICAgbnVtYmVyX29mX3Jvd3M6IDAsCiAgICAgIHRvdGFsX3BhZ2VzOiAxLAogICAgICBwZXJfcGFnZTogMjAsCiAgICAgIHBhZ2VfYXJyYXk6IFtdLAogICAgICBzaG93X25vX3F1ZXN0aW9uc19tZXNzYWdlOiBmYWxzZSwKICAgICAgaW50ZW50X21vZGVsX2lucHJvZ3Jlc3M6IGZhbHNlLAogICAgICB3YW50X3N0YXR1czogdHJ1ZSwKICAgICAgZnVsbHNjcmVlbjogZmFsc2UsCiAgICAgIGRpc2FibGVfYnRuX2V4cGlyZWQ6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICB0aGlzLmZyZWV6ZV9wb3J0YWwoKTsKICAgIH0sIDEwMDApOwogICAgCiAgICB0aGlzLiRyb290LiRvbigiVHJhaW5UZXN0Qm90UGFnZURpc2FibGVkIiwgKGRhdGEpID0+ewogICAgICBpZihkYXRhPT09dHJ1ZSl7CiAgICAgICAgdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkID0gdHJ1ZTsKICAgICAgfQogICAgfSkKCiAgICAvLyB0aGlzLmNvbXBhbnlfaWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKICAgIGlmICgKICAgICAgIXRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSAmJgogICAgICB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIKICAgICkgewogICAgICB0b2FzdHIud2FybmluZyh0aGlzLnRsdCgnc2VsZWN0X2NvbXBhbnlfbmFtZV9sYWJlbCcpKTsKICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3JvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIGlmICh0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikpIHsKICAgICAgICB0aGlzLmNvbXBhbnlfaWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgdGhpcy5jb21wYW55X25hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlfaWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKICAgICAgICB0aGlzLmNvbXBhbnlfbmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueV9pZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICB0aGlzLmNvbXBhbnlfbmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICB9CiAgICB2YXIgdm0gPSB0aGlzOwogICAgJCgiLmRyb3Bkb3duIikub24oImhpZGUuYnMuZHJvcGRvd24iLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy8gdmFyIHggPSAkKGV2ZW50LnJlbGF0ZWRUYXJnZXQpLnRleHQoKTsgLy8gR2V0IHRoZSB0ZXh0IG9mIHRoZSBlbGVtZW50CiAgICAgIC8vIGFsZXJ0KHgpOwogICAgICAvLyBjb25zb2xlLmxvZyh2bS5zZWxlY3RlZF9zdGF0dXNsaXN0KTsKICAgIH0pOwogICAgJCgiI215TW9kYWwiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgKCkgPT4gewogICAgICB2bS5jdXJyZW50X3NlbGVjdGVkX2ludGVudCA9IG51bGw7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJzZW5kX21vZGVsX3N0YXR1cyIsIGRhdGEgPT57CiAgICAgIGlmIChkYXRhID09IHRydWUpewogICAgICAgIHRoaXMuY2hlY2tfaW50ZW50X21vZGVsX3N0YXR1cygpOwogICAgICB9CiAgICB9KQogICAgdGhpcy5nZXRfaW50ZW50c19saXN0KCk7CiAgICB0aGlzLmluaXRpYWxpemVfcXVlc3Rpb25zX2Zvcl9pbnRlbnQoKTsKICAgIHRoaXMuZ2V0X3F1ZXN0aW9uc19saXN0KCk7CiAgICB0aGlzLmNoZWNrX2ludGVudF9tb2RlbF9zdGF0dXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoa19jYnhfY3JzcihpbmRleCl7CiAgICAgIGlmKHRoaXMuc2hvd19ub19xdWVzdGlvbnNfbWVzc2FnZSl7CiAgICAgICAgaWYoaW5kZXggPT0gJ3N0eWxlJyl7CiAgICAgICAgICByZXR1cm4gImN1cnNvcjogbm90LWFsbG93ZWQiOwogICAgICAgIH1lbHNlIGlmKGluZGV4ID09ICd0aXRsZScpewogICAgICAgICAgcmV0dXJuIHRoaXMudGx0KCd0cmFpbl9ib3Rfbm9fZmFpbHVyZV9kYXRhX21zZycpOwogICAgICAgIH0KICAgICAgfWVsc2V7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja19pbnRlbnRfbW9kZWxfc3RhdHVzKCl7CiAgICB0aGlzLm1vZGVsX3N0YXR1cyA9IHRoaXMuJHNlc3Npb24uZ2V0KCJNb2RlbFN0YXR1cyIpOwogICAgaWYgKHRoaXMubW9kZWxfc3RhdHVzID09ICJObyBGYWlsdXJlIil7CiAgICB0aGlzLmludGVudF9tb2RlbF9pbnByb2dyZXNzID0gZmFsc2U7CiAgICB9CiAgICBlbHNlIGlmIChCb29sZWFuKHRoaXMubW9kZWxfc3RhdHVzLmludGVudF9tb2RlbCkgPT09IHRydWUpewogICAgIGlmKHRoaXMubW9kZWxfc3RhdHVzLmludGVudF9tb2RlbCA9PSAiSW5Qcm9ncmVzcyIpewogICAgICAgdGhpcy5pbnRlbnRfbW9kZWxfaW5wcm9ncmVzcyA9IHRydWU7CiAgICAgfQogICAgIGVsc2V7CiAgICAgICB0aGlzLmludGVudF9tb2RlbF9pbnByb2dyZXNzID0gZmFsc2U7CiAgICAgfQogICAgfQogICAgZWxzZXsKICAgICAgdGhpcy5pbnRlbnRfbW9kZWxfaW5wcm9ncmVzcyA9IGZhbHNlOyAKICAgIH0KICAgIH0sCiAgICBzaG93X21vZGVsX3Byb2dyZXNzKGluZGV4KXsKICAgICAgaWYodGhpcy5pbnRlbnRfbW9kZWxfaW5wcm9ncmVzcyA9PSB0cnVlKXsKICAgICAgICAgaWYgKGluZGV4ID09ICdzdHlsZScpewogICAgICAgICAgICByZXR1cm4gImN1cnNvcjogbm90LWFsbG93ZWQiOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZihpbmRleCA9PSAndGl0bGUnKXsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy50bHQoJ3RyYWluX2JvdF90cmFpbmluZ19pbl9wcm9ncmVzc19tc2cnKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBlbHNlewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgZ2V0X3F1ZXN0aW9uc19saXN0KCkgewogICAgICB0aGlzLnNob3dfbm9fcXVlc3Rpb25zX21lc3NhZ2UgPSBmYWxzZTsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICB0aGlzLnF1ZXN0aW9uc19saXN0ID0gW107CiAgICAgIGF4aW9zCiAgICAgICAgLmdldChhcGlfY2FsbHMudGVzdF9pbnRlbnRfbW9kZWwoKSwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgICAgbmV3X3F1ZXN0aW9uX2RhdGE6IHRoaXMubmV3X3F1ZXN0aW9uX2RhdGEsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBzdGF0dXM6IHRoaXMuc2VsZWN0ZWRfc3RhdHVzbGlzdCwKICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICB9LAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAodGhpcy5hcGlfc3RhdHVzX2NvZGUuU1VDQ0VTU0ZVTF9EQl9RVUVSWV9NT0RFTFMuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5zaG93X25vX3F1ZXN0aW9uc19tZXNzYWdlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX3BhZ2U7CiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zX2xpc3QgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gU3dhbCh7CiAgICAgICAgICAgIC8vICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgLy8gICB0ZXh0OiB0aGlzLnRsdCgndHJhaW5fYm90X2ludGVybmFsX3NlcnZlcl9tc2cxJyksCiAgICAgICAgICAgIC8vICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbl9ib3RfaW50ZXJuYWxfc2VydmVyX21zZzInKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgb3Blbl9tb2RhbF9mb3JfaW50ZW50KGluZGV4KSB7CiAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnQgPSB0aGlzLnF1ZXN0aW9uc19saXN0W2luZGV4XS5FeHBlY3RlZEludGVudDsKICAgICAgdGhpcy5zZWxlY3RlZF9xdWVzdGlvbl9pbmRleCA9IGluZGV4OwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3NlbGVjdGVkX2ludGVudF9xdWVzdGlvbnNbCiAgICAgICAgICBpCiAgICAgICAgXS5pbnRlbnQgPSBgJHt0aGlzLmNvbXBhbnlfaWR9XyR7dGhpcy5jdXJyZW50X3NlbGVjdGVkX2ludGVudH1gOwogICAgICB9CiAgICAgIC8vICQoIiNteU1vZGFsIikubW9kYWwoInNob3ciKTsKICAgIH0sCiAgICBhZGRfcXVlc3Rpb24oKSB7CiAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zLnVuc2hpZnQoewogICAgICAgIHF1ZXN0aW9uOiBudWxsLAogICAgICAgIGludGVudDogYCR7dGhpcy5jb21wYW55X2lkfV8ke3RoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnR9YCwKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlX3F1ZXN0aW9uKGluZGV4KSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucy5sZW5ndGggPiAxKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3NlbGVjdGVkX2ludGVudF9xdWVzdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbl9ib3Rfb25lX3FzX3RvX2JlX2FkZGVkX21zZycpLAogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogInRvcC1yaWdodCIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldF9pbnRlbnRzX2xpc3QoKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuZ2V0X3VuYW5zd2VyZWRfdXJsKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgaXNEcm9wZG93bjogIlRydWUiLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEuZGF0YVswXSkgewogICAgICAgICAgICAgIHRoaXMuaW50ZW50X2xpc3QucHVzaCgKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVswXVtpXS5yZXBsYWNlKHRoaXMuY29tcGFueV9pZCArICJfIiwgIiIpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfWVsc2UgIGlmKHRoaXMuYXBpX3N0YXR1c19jb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICB0b2FzdHIuZXJyb3IodGhpcy50bHQoJ2FkZF9yb2xlX2ludGVybmFsX3NlcnZlcl9tc2czJykpOwogICAgICAgICAgfQogICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBzYXZlX3F1ZXN0aW9uc19mb3JfaW50ZW50KCkgewogICAgICBpZiAoQm9vbGVhbih0aGlzLnNlbGVjdGVkX3F1ZXN0aW9uX2luZGV4KSkgewogICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zLnB1c2goewogICAgICAgICAgcXVlc3Rpb246IHRoaXMucXVlc3Rpb25zX2xpc3RbdGhpcy5zZWxlY3RlZF9xdWVzdGlvbl9pbmRleF0uUXVlc3Rpb24sCiAgICAgICAgICBpbnRlbnQ6IGAke3RoaXMuY29tcGFueV9pZH1fJHt0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50fWAsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbGV0IHF1ZXN0aW9uc19saXN0ID0gdGhpcy5jdXJyZW50X3NlbGVjdGVkX2ludGVudF9xdWVzdGlvbnMuZmlsdGVyKAogICAgICAgIChxdWVzdGlvbikgPT4gewogICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocXVlc3Rpb24ucXVlc3Rpb24pOwogICAgICAgIH0KICAgICAgKTsKICAgICAgJCgiI215TW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuYWRkX3F1ZXN0aW9uX3VybCgpLAogICAgICAgICAgewogICAgICAgICAgICBlZGl0X2ludGVudDogZmFsc2UsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgICAgbmV3X3F1ZXN0aW9uX2RhdGE6IHF1ZXN0aW9uc19saXN0LAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmluaXRpYWxpemVfcXVlc3Rpb25zX2Zvcl9pbnRlbnQoKTsKICAgICAgICAgIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3RyYWluX2JvdF9pbnRlcm5hbF9zZXJ2ZXJfbXNnMycpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hcGlfc3RhdHVzX2NvZGUuU1VDQ0VTU0ZVTF9EQl9RVUVSWS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbl9ib3RfcXNfYWRkZWRfbXNnJyksCiAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfcXVlc3Rpb25zX2xpc3QoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5RVUVTVElPTl9FRElUX0ZBSUxFRC5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbl9ib3RfcXNfYWxyZWFkeV9leGlzdF9tc2cnKSwKICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLlFVRVNUSU9OX0VESVRfRkFJTEVELk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5FRElUX1FVRVNUSU9OX0lOVEVOVC5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbl9ib3RfaW50ZXJuYWxfc2VydmVyX21zZzUnKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jbG9zZV9tb2RhbCgndHJhaW50ZXN0X3NhdmVfYnRuJykKICAgIH0sCiAgICBpbml0aWFsaXplX3F1ZXN0aW9uc19mb3JfaW50ZW50KCkgewogICAgICB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucyA9IFsKICAgICAgICB7CiAgICAgICAgICBxdWVzdGlvbjogbnVsbCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHF1ZXN0aW9uOiBudWxsLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgcXVlc3Rpb246IG51bGwsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBxdWVzdGlvbjogbnVsbCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHF1ZXN0aW9uOiBudWxsLAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAogICAgZG93bmxvYWRfc2FtcGxlKCkgewogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLnF1ZXN0aW9uX2ludGVudF9jc3YoKSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAvLyB3aW5kb3cub3BlbihyZXNwb25zZS5kYXRhLkNTVl9VUkwsICJfYmxhbmsiKTsKICAgICAgICAgIGlmKHRoaXMuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSl7CiAgICAgICAgICAgIHZhciBhID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYS5ocmVmID0gcmVzcG9uc2UuZGF0YS5DU1ZfVVJMOwogICAgICAgICAgICBhLmRvd25sb2FkID0gdHJ1ZTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgICAgfSBlbHNlIGlmKHRoaXMuYXBpX3N0YXR1c19jb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBjbGVhcl9maWxlX2RldGFpbHMoKSB7CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgIHRoaXMuZmlsZV9jb250ZW50ID0gIiI7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dEdyb3VwRmlsZTAxIikudmFsdWUgPSAiIjsKICAgIH0sCiAgICBmaWxlaW5wdXQoKSB7CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lOwogICAgICAvLyB2YXIgZmlsZV9uYW1lID0gdGhpcy5jb21wYW55bmFtZSArICJJbnRlbnRGaWxlLmNzdiI7CiAgICAgIC8vIGlmICh0aGlzLmZpbGVfbGFiZWwgIT0gZmlsZV9uYW1lKSB7CiAgICAgIC8vICAgU3dhbCh7CiAgICAgIC8vICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAvLyAgICAgdGV4dDoKICAgICAgLy8gICAgICAgIlVzZXJzIG5lZWQgdG8gZG93bmxvYWQgdGhlIEludGVudCBGaWxlIGZyb20gJ1VwbG9hZCBDU1YgRmlsZXMnIHBvcC11cC4gQ2hhbmdlcyB0byB0aGlzIGZpbGUgd2lsbCBiZSBhY2NlcHRlZCBieSB0aGUgc3lzdGVtLiIsCiAgICAgIC8vICAgfSk7CiAgICAgIC8vICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgdGhpcy5maWxlX2NvbnRlbnQgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIC8vIH0KICAgIH0sCiAgICBmaWxlX3N1Ym1pdCgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHVzZXJfZGV0YWlscyA9IHsKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIH07CiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkodXNlcl9kZXRhaWxzKTsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbanNvbl0sIHsKICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgIH0pOwogICAgICBpZiAodGhpcy5maWxlX2xhYmVsID09ICJDaG9vc2UgZmlsZSIpIHsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZkLmFwcGVuZCgKICAgICAgICAgICJmaWxlIiwKICAgICAgICAgIHRoaXMuZmlsZV9jb250ZW50LAogICAgICAgICAgdGhpcy5jb21wYW55X25hbWUgKyAiUXVlc3Rpb25zRmlsZS5jc3YiCiAgICAgICAgKTsKICAgICAgICBmZC5hcHBlbmQoImpzb24iLCBibG9iKTsKICAgICAgICAkKCIjZmlsZV91cGxvYWQiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnRlc3RfaW50ZW50X21vZGVsKCksIGZkLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTXNnID09ICJSZXN1bHRzIHdvdWxkIGJlIGF2YWlsYWJsZSBzb29uIikgewogICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCd0cmFpbl9ib3RfZmlsZV9zdWJtaXRfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgLy8gJCgnI2ZpbGVfdXBsb2FkJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRsdCgndHJhaW5fYm90X2Vycm9yX29jY3VyX21zZzEnKSwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgIC8vICQoJyNmaWxlX3VwbG9hZCcpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0R3JvdXBGaWxlMDEiKS52YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vICQoIiNmaWxlX3VwbG9hZCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3RyYWluX2JvdF9lcnJvcl9vY2N1cl9tc2cyJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAvLyAkKCcjZmlsZV91cGxvYWQnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dEdyb3VwRmlsZTAxIikudmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCgxICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAiLi4ubCIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIHRoaXMuZ2V0X3F1ZXN0aW9uc19saXN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgICAgdGhpcy5wYWdlX2FycmF5ID0gW107CiAgICAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG90YWxfcGFnZXMgLSA0OyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPD0gNCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPj0gdGhpcy50b3RhbF9wYWdlcyAtIDQpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gMzsgaSA8PSBwYWdlX25vICsgMzsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZSgpIHsKICAgICAgLy8gdGhpcy4kZnVsbHNjcmVlbi50b2dnbGUoKGRvY3VtZW50LmJvZHkpLCB7CiAgICAgIHRoaXMuJGZ1bGxzY3JlZW4udG9nZ2xlKHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5kYXNoLWNvbnQiKSwgewogICAgICAgIHdyYXA6IGZhbHNlLAogICAgICAgIGNhbGxiYWNrOiB0aGlzLmZ1bGxzY3JlZW5DaGFuZ2UsCiAgICAgIH0pOwogICAgfSwKICAgIGZ1bGxzY3JlZW5DaGFuZ2UoZnVsbHNjcmVlbikgewogICAgICB0aGlzLmZ1bGxzY3JlZW4gPSBmdWxsc2NyZWVuOwogICAgfSwKICAgIHRyYWluX2FuZF90ZXN0X21vZGVsKCkgewogICAgICBpZighdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkKXsKICAgICAgU3dhbCh7CiAgICAgICAgdGl0bGU6IHRoaXMudGx0KCd0cmFpbl9ib3Rfc3dhbF9hbGVydF9tc2cnKSwKICAgICAgICB0ZXh0OiB0aGlzLnRsdCgndHJhaW5fYm90X3N3YWxfdHJhaW5fbW9kZWxfbXNnMicpLAogICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgndHJhaW5fYm90X3N3YWxfY29uZmlybV9tc2cnKSwKICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlLAogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICBhcGlfY2FsbHMudHJhaW5faW50ZW50X21vZGVsKCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0ZXN0X21vZGVsOiB0cnVlLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy53YW50X3N0YXR1cyA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgid2FudF9tb2RlbF9zdGF0dXMiLHRoaXMud2FudF9zdGF0dXMpOwogICAgICAgICAgICAgIHRoaXMuY2hlY2tfaW50ZW50X21vZGVsX3N0YXR1cygpOwogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gMjAwMDAwOTEpIHsKICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3RyYWluX2JvdF9yZXN1bHRfYXZhaWxfbXNnJyksCiAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEuTVNHLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAzNTAwLAogICAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAvLyAkKCcjZmlsZV91cGxvYWQnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAvLyBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TR19DT0RFID09PSAxMDM0KSB7CiAgICAgICAgICAgICAgLy8gICBzd2FsKHsKICAgICAgICAgICAgICAvLyAgICAgdGl0bGU6IHRoaXMudGx0KCd0cmFpbl9ib3RfbW9kZWxfZXJyb3Jfb2NjdXJfbXNnMScpLAogICAgICAgICAgICAgIC8vICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLk1TRywKICAgICAgICAgICAgICAvLyAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAvLyAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgICAgLy8gICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAvLyAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgIC8vICAgICAgIC8vICQoJyNmaWxlX3VwbG9hZCcpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgICAgICAgLy8gICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgLy8gICAgICAgLy8gdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgLy8gICB9KTsKICAgICAgICAgICAgICAvLyB9IAogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gJCgnI2ZpbGVfdXBsb2FkJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0R3JvdXBGaWxlMDEiKS52YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gJCgiI2ZpbGVfdXBsb2FkIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRsdCgndHJhaW5fYm90X21vZGVsX2Vycm9yX29jY3VyX21zZzMnKSwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgICAgLy8gJCgnI2ZpbGVfdXBsb2FkJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0R3JvdXBGaWxlMDEiKS52YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7fWVsc2V7CiAgICAgICAgdGhpcy5zaG93X3N1YnNjcmlwdGlvbl9leHBpcmVkX3N3YWwoKQogICAgICB9CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGZpbHRlcl9zdGF0dXMoKXsKICAgICAgaWYodGhpcy5maWx0ZXJfc3RhdHVzID09PSAgJ0ZhaWx1cmUnKXsKICAgICAgICB0aGlzLnNlbGVjdGVkX3N0YXR1c2xpc3QgPSBbIkZhaWx1cmUiXTsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5zZWxlY3RlZF9zdGF0dXNsaXN0ID0gWyJTdWNjZXNzIl07CiAgICAgIH0KICAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgdGhpcy5wZXJfcGFnZSA9IDIwOwogICAgfSwKICAgIHNlbGVjdGVkX3N0YXR1c2xpc3QobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbC5sZW5ndGggPT09IDApIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfc3RhdHVzbGlzdCA9IFsiU3VjY2VzcyIsICJGYWlsdXJlIl07CiAgICAgICAgICB0aGlzLmdldF9xdWVzdGlvbnNfbGlzdCgpOwogICAgICAgIH0sIDIwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRfcXVlc3Rpb25zX2xpc3QoKTsKICAgICAgfQogICAgfSwKICAgIGN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50KG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChCb29sZWFuKG9sZFZhbCkgJiYgQm9vbGVhbihuZXdWYWwpKSB7CiAgICAgICAgZm9yICgKICAgICAgICAgIGxldCBpID0gMCwgbiA9IHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zLmxlbmd0aDsKICAgICAgICAgIGkgPCBuOwogICAgICAgICAgaSsrCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9uc1sKICAgICAgICAgICAgaQogICAgICAgICAgXS5pbnRlbnQgPSBgJHt0aGlzLmNvbXBhbnlfaWR9XyR7dGhpcy5jdXJyZW50X3NlbGVjdGVkX2ludGVudH1gOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9LAp9Owo="},null]}