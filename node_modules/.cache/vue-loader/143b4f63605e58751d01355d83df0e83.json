{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/components/MultiLineChartAlternative.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/components/MultiLineChartAlternative.vue","mtime":1643027096188},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qKioqKioqKioqKioqKioqKioqKgogKiBUT09MVElQIENTUwogKi8KCi5udnRvb2x0aXAgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDEpOwogIHBhZGRpbmc6IDEwcHg7CiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKCiAgZm9udC1mYW1pbHk6IEFyaWFsOwogIGZvbnQtc2l6ZTogMTNweDsKCiAgdHJhbnNpdGlvbjogb3BhY2l0eSA1MDBtcyBsaW5lYXI7CiAgLW1vei10cmFuc2l0aW9uOiBvcGFjaXR5IDUwMG1zIGxpbmVhcjsKICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXMgbGluZWFyOwoKICB0cmFuc2l0aW9uLWRlbGF5OiA1MDBtczsKICAtbW96LXRyYW5zaXRpb24tZGVsYXk6IDUwMG1zOwogIC13ZWJraXQtdHJhbnNpdGlvbi1kZWxheTogNTAwbXM7CgogIC1tb3otYm94LXNoYWRvdzogNHB4IDRweCAxMnB4IHJnYmEoMCwwLDAsLjUpOwogIC13ZWJraXQtYm94LXNoYWRvdzogNHB4IDRweCAxMnB4IHJnYmEoMCwwLDAsLjUpOwogIGJveC1zaGFkb3c6IDRweCA0cHggMTJweCByZ2JhKDAsMCwwLC41KTsKCiAgLW1vei1ib3JkZXItcmFkaXVzOiAxNXB4OwogIGJvcmRlci1yYWRpdXMgOiAxNXB4OwogIHotaW5kZXg6IDEwMDA7Cn0KCi5udnRvb2x0aXAgaDMgewogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLm52dG9vbHRpcCBwIHsKICBtYXJnaW46IDA7CiAgcGFkZGluZzogMDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5udnRvb2x0aXAgc3BhbiB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG1hcmdpbjogMnB4IDA7Cn0KCgoKCgovKioqKioqKioqKgoqICBHZW5lcmFsIFNWRyBDU1MKKi8KCgovKiB0ZXh0IHsKICBmb250OiAxMnB4IHNhbnMtc2VyaWY7Cn0gKi8KCgoKLyoqKioqKioqKioKKiAgTGVnZW5kCiovCgoubGVnZW5kIC5zZXJpZXMgewogIGN1cnNvcjogcG9pbnRlcjsKfQoKLmxlZ2VuZCBjaXJjbGUgewogIHN0cm9rZS13aWR0aDogMnB4Owp9CgoubGVnZW5kIC5kaXNhYmxlZCBjaXJjbGUgewogIGZpbGwtb3BhY2l0eTogMDsKfQoKCgovKioqKioqKioqKgoqICBBeGVzCiovCgouYXhpcyBwYXRoIHsKICBmaWxsOiBub25lOwogIHN0cm9rZTogIzAwMDsKICBzdHJva2Utb3BhY2l0eTogLjc1OwogIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsKfQoKLmF4aXMgcGF0aC5kb21haW4gewogIHN0cm9rZS1vcGFjaXR5OiAuNzU7Cn0KCi5heGlzIGxpbmUgewogIGZpbGw6IG5vbmU7CiAgc3Ryb2tlOiAjMDAwOwogIHN0cm9rZS1vcGFjaXR5OiAuMjU7CiAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzOwp9CgouYXhpcyBsaW5lLnplcm8gewogIHN0cm9rZS1vcGFjaXR5OiAuNzU7Cn0KCgoKLyoqKioqKioqKioKKiAgTGluZSBjaGFydAoqLwoKLnBvaW50LXBhdGhzIHBhdGggewogIC8qCiAgZmlsbDogI2VlZTsKICBzdHJva2U6ICNhYWE7CiAgKi8KICBzdHJva2Utb3BhY2l0eTogMDsKICBmaWxsLW9wYWNpdHk6IDA7Cn0KCgoubGluZXMgcGF0aCB7CiAgZmlsbDogbm9uZTsKICBzdHJva2Utd2lkdGg6IDEuNXB4OwogIHN0cm9rZS1saW5lY2FwOiByb3VuZDsKCiAgdHJhbnNpdGlvbjogc3Ryb2tlLXdpZHRoIDI1MG1zIGxpbmVhcjsKICAtbW96LXRyYW5zaXRpb246IHN0cm9rZS13aWR0aCAyNTBtcyBsaW5lYXI7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBzdHJva2Utd2lkdGggMjUwbXMgbGluZWFyOwoKICB0cmFuc2l0aW9uLWRlbGF5OiAyNTBtczsKICAtbW96LXRyYW5zaXRpb24tZGVsYXk6IDI1MG1zOwogIC13ZWJraXQtdHJhbnNpdGlvbi1kZWxheTogMjUwbXM7Cn0KCi5saW5lLmhvdmVyIHBhdGggewogIHN0cm9rZS13aWR0aDogNnB4Owp9CgoubGluZXMgLnBvaW50IHsKICB0cmFuc2l0aW9uOiBzdHJva2Utd2lkdGggMjUwbXMgbGluZWFyOwogIC1tb3otdHJhbnNpdGlvbjogc3Ryb2tlLXdpZHRoIDI1MG1zIGxpbmVhcjsKICAtd2Via2l0LXRyYW5zaXRpb246IHN0cm9rZS13aWR0aCAyNTBtcyBsaW5lYXI7Cn0KCi5saW5lcyAucG9pbnQuaG92ZXIgewogIHN0cm9rZS13aWR0aDogMjBweDsKICBzdHJva2Utb3BhY2l0eTogLjU7Cn0KCg=="},{"version":3,"sources":["MultiLineChartAlternative.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAi8BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;;;AAGA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"MultiLineChartAlternative.vue","sourceRoot":"src/portal/analytics/components","sourcesContent":["<template>\n<div id=\"#chart\">\n<div id=\"test1\">\n  <svg></svg>\n</div>\n</div>\n</template>\n\n<script>\nimport * as d3 from \"d3-3\";\nexport default {\n  name: \"MultiLineChartAlternative\",\n  props : {\n    xKey: String,\n    yKey: String,\n    apiData: Array,\n    dateKey: String\n  },\n  // data : {\n\n  // },\n  mounted() {\n\n      setTimeout(() => {\n        resize_of_page();\n        resize_of_page();\n        resize_of_page();\n        resize_of_page();\n        resize_of_page();\n      }, 400);\n      // setTimeout(() => {\n      //   resize_of_page();\n      // }, 1200);\n      // setTimeout(() => {\n      //   resize_of_page();\n      // }, 1500);\n      // setTimeout(() => {\n      //   resize_of_page();\n      // }, 800);\n\n    // console.log(this.xKey,this.yKey,this.dateKey);\n    // console.log(this.apiData);\n   var api_data = \n        [\n            {\"SALES\":1340.450419999999,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 17 Mar 2016 10:18:47 GMT\",\"CATEGORY\":\"Stonefruits\",\"MONTH\":\"03\"},\n            {\"SALES\":170.90194000000005,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 17 Mar 2016 11:53:12 GMT\",\"CATEGORY\":\"Cucumbers\",\"MONTH\":\"03\"},\n            {\"SALES\":74.79999999999998,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 18 Mar 2016 12:13:55 GMT\",\"CATEGORY\":\"Sri Lankan Groceries\",\"MONTH\":\"03\"},\n            {\"SALES\":62.93936000000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 19 Mar 2016 19:42:10 GMT\",\"CATEGORY\":\"Veggies\",\"MONTH\":\"03\"},\n            {\"SALES\":218.4778800000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 20 Mar 2016 17:12:06 GMT\",\"CATEGORY\":\"Mushrooms\",\"MONTH\":\"03\"},\n            {\"SALES\":262.5995236363638,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 20 Mar 2016 17:34:22 GMT\",\"CATEGORY\":\"Tropical Fruits\",\"MONTH\":\"03\"},\n            {\"SALES\":69.59320000000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 20 Mar 2016 19:02:15 GMT\",\"CATEGORY\":\"Cabbages\",\"MONTH\":\"03\"},\n            {\"SALES\":671.8349600000005,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 23 Mar 2016 01:04:06 GMT\",\"CATEGORY\":\"Bananas\",\"MONTH\":\"03\"},\n            {\"SALES\":116.20128545454547,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 23 Mar 2016 01:35:13 GMT\",\"CATEGORY\":\"Nuts\",\"MONTH\":\"03\"},\n            {\"SALES\":295.2000000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 23 Mar 2016 04:31:17 GMT\",\"CATEGORY\":\"Avocadoes\",\"MONTH\":\"03\"},\n            {\"SALES\":47.5,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 03:13:07 GMT\",\"CATEGORY\":\"Herbs\",\"MONTH\":\"03\"},\n            {\"SALES\":169.20256000000003,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 04:12:32 GMT\",\"CATEGORY\":\"Pumpkins\",\"MONTH\":\"03\"},{\"SALES\":307.6499999999997,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 04:43:59 GMT\",\"CATEGORY\":\"Eggs\",\"MONTH\":\"03\"},{\"SALES\":975.1200545454553,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 24 Mar 2016 05:22:50 GMT\",\"CATEGORY\":\"Other Vegies\",\"MONTH\":\"03\"},{\"SALES\":112.4447,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 01:48:45 GMT\",\"CATEGORY\":\"Chillies\",\"MONTH\":\"03\"},{\"SALES\":597.0905363636365,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 03:28:03 GMT\",\"CATEGORY\":\"Citrus\",\"MONTH\":\"03\"},{\"SALES\":166.812,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 03:50:08 GMT\",\"CATEGORY\":\"carrots\",\"MONTH\":\"03\"},{\"SALES\":360.92106,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 25 Mar 2016 04:41:19 GMT\",\"CATEGORY\":\"capsicum\",\"MONTH\":\"03\"},{\"SALES\":57.88363636363637,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 26 Mar 2016 22:51:27 GMT\",\"CATEGORY\":\"Other Fruits\",\"MONTH\":\"03\"},{\"SALES\":884.4411199999997,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 26 Mar 2016 23:37:38 GMT\",\"CATEGORY\":\"Potatoes\",\"MONTH\":\"03\"},{\"SALES\":304.92546000000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 00:25:07 GMT\",\"CATEGORY\":\"Pears\",\"MONTH\":\"03\"},{\"SALES\":303.2260000000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 00:28:50 GMT\",\"CATEGORY\":\"Bunch Vegies\",\"MONTH\":\"03\"},{\"SALES\":620.6673999999997,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 01:08:03 GMT\",\"CATEGORY\":\"Tomatoes\",\"MONTH\":\"03\"},{\"SALES\":629.8516800000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 01:45:58 GMT\",\"CATEGORY\":\"Apples\",\"MONTH\":\"03\"},{\"SALES\":372.82099999999923,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 03:38:16 GMT\",\"CATEGORY\":\"Lettuces\",\"MONTH\":\"03\"},{\"SALES\":154.485,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 27 Mar 2016 23:08:40 GMT\",\"CATEGORY\":\"Multi buy\",\"MONTH\":\"03\"},{\"SALES\":387.9157999999999,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 28 Mar 2016 02:15:11 GMT\",\"CATEGORY\":\"Melons\",\"MONTH\":\"03\"},{\"SALES\":180.2172727272728,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 28 Mar 2016 22:59:34 GMT\",\"CATEGORY\":\"Olympian Products\",\"MONTH\":\"03\"},{\"SALES\":633.3682436363638,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 28 Mar 2016 23:57:28 GMT\",\"CATEGORY\":\"Onions\",\"MONTH\":\"03\"},{\"SALES\":854.30096,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 30 Mar 2016 03:02:09 GMT\",\"CATEGORY\":\"Grapes\",\"MONTH\":\"03\"},{\"SALES\":108.0,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 30 Mar 2016 04:15:59 GMT\",\"CATEGORY\":\"Flowers\",\"MONTH\":\"03\"},{\"SALES\":87.10741999999999,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 30 Mar 2016 21:40:15 GMT\",\"CATEGORY\":\"Root Vegies\",\"MONTH\":\"03\"},{\"SALES\":73.7,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 31 Mar 2016 00:23:50 GMT\",\"CATEGORY\":\"Cut Veggies\",\"MONTH\":\"03\"},{\"SALES\":216.50410000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 31 Mar 2016 01:27:43 GMT\",\"CATEGORY\":\"Asian Vegies\",\"MONTH\":\"03\"},{\"SALES\":167.87999999999997,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 31 Mar 2016 01:59:07 GMT\",\"CATEGORY\":\"Berries\",\"MONTH\":\"03\"},\n            {\"SALES\":602.2259454545458,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 00:26:23 GMT\",\"CATEGORY\":\"Citrus\",\"MONTH\":\"04\"},\n            {\"SALES\":964.0527800000008,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 00:41:01 GMT\",\"CATEGORY\":\"Other Vegies\",\"MONTH\":\"04\"},\n            {\"SALES\":107.87999999999998,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 04:50:24 GMT\",\"CATEGORY\":\"Cabbages\",\"MONTH\":\"04\"},\n            {\"SALES\":86.5556,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 04:50:24 GMT\",\"CATEGORY\":\"Root Vegies\",\"MONTH\":\"04\"},\n            {\"SALES\":675.9299000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 04:55:24 GMT\",\"CATEGORY\":\"Bananas\",\"MONTH\":\"04\"},\n            {\"SALES\":197.20808000000005,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 08:06:26 GMT\",\"CATEGORY\":\"Asian Vegies\",\"MONTH\":\"04\"},\n            {\"SALES\":108.0,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 01 Apr 2016 21:52:12 GMT\",\"CATEGORY\":\"Flowers\",\"MONTH\":\"04\"},\n            {\"SALES\":15.200000000000003,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 02 Apr 2016 00:22:14 GMT\",\"CATEGORY\":\"Sri Lankan Groceries\",\"MONTH\":\"04\"},\n            {\"SALES\":118.63200000000009,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 02 Apr 2016 00:22:14 GMT\",\"CATEGORY\":\"carrots\",\"MONTH\":\"04\"},\n            {\"SALES\":129.0,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:00:52 GMT\",\"CATEGORY\":\"Multi buy\",\"MONTH\":\"04\"},\n            {\"SALES\":174.17508000000004,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:00:52 GMT\",\"CATEGORY\":\"capsicum\",\"MONTH\":\"04\"},{\"SALES\":230.56272727272733,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:34:19 GMT\",\"CATEGORY\":\"Olympian Products\",\"MONTH\":\"04\"},{\"SALES\":96.84614727272728,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 00:37:49 GMT\",\"CATEGORY\":\"Nuts\",\"MONTH\":\"04\"},{\"SALES\":439.10896545454534,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 01:42:18 GMT\",\"CATEGORY\":\"Tomatoes\",\"MONTH\":\"04\"},{\"SALES\":512.0569200000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 02:44:59 GMT\",\"CATEGORY\":\"Grapes\",\"MONTH\":\"04\"},{\"SALES\":151.0479,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 02:53:00 GMT\",\"CATEGORY\":\"Pumpkins\",\"MONTH\":\"04\"},{\"SALES\":43.0,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 02:53:00 GMT\",\"CATEGORY\":\"Cut Veggies\",\"MONTH\":\"04\"},{\"SALES\":137.80607999999995,\"YEAR\":\"2016\",\"DATENEW\":\"Sun, 03 Apr 2016 06:09:50 GMT\",\"CATEGORY\":\"Cucumbers\",\"MONTH\":\"04\"},{\"SALES\":119.0145,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 04 Apr 2016 01:18:00 GMT\",\"CATEGORY\":\"Chillies\",\"MONTH\":\"04\"},{\"SALES\":276.1008799999999,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 04 Apr 2016 01:46:01 GMT\",\"CATEGORY\":\"Mushrooms\",\"MONTH\":\"04\"},{\"SALES\":202.88474000000008,\"YEAR\":\"2016\",\"DATENEW\":\"Mon, 04 Apr 2016 03:52:08 GMT\",\"CATEGORY\":\"Melons\",\"MONTH\":\"04\"},{\"SALES\":131.35276,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 01:46:42 GMT\",\"CATEGORY\":\"Tropical Fruits\",\"MONTH\":\"04\"},{\"SALES\":90.55818181818181,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 04:01:07 GMT\",\"CATEGORY\":\"Other Fruits\",\"MONTH\":\"04\"},{\"SALES\":187.63225999999992,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 04:49:26 GMT\",\"CATEGORY\":\"Pears\",\"MONTH\":\"04\"},{\"SALES\":496.3780800000003,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 05:00:29 GMT\",\"CATEGORY\":\"Onions\",\"MONTH\":\"04\"},{\"SALES\":20.44174,\"YEAR\":\"2016\",\"DATENEW\":\"Tue, 05 Apr 2016 22:36:34 GMT\",\"CATEGORY\":\"Veggies\",\"MONTH\":\"04\"},{\"SALES\":642.8219400000002,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 02:16:13 GMT\",\"CATEGORY\":\"Potatoes\",\"MONTH\":\"04\"},{\"SALES\":275.8000000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 03:26:52 GMT\",\"CATEGORY\":\"Avocadoes\",\"MONTH\":\"04\"},{\"SALES\":39.96,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 03:27:58 GMT\",\"CATEGORY\":\"Groceries-Dry Goods\",\"MONTH\":\"04\"},{\"SALES\":618.9657799999997,\"YEAR\":\"2016\",\"DATENEW\":\"Wed, 06 Apr 2016 04:47:53 GMT\",\"CATEGORY\":\"Stonefruits\",\"MONTH\":\"04\"},{\"SALES\":348.5120000000002,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 07 Apr 2016 02:45:13 GMT\",\"CATEGORY\":\"Lettuces\",\"MONTH\":\"04\"},{\"SALES\":293.10000000000025,\"YEAR\":\"2016\",\"DATENEW\":\"Thu, 07 Apr 2016 03:24:48 GMT\",\"CATEGORY\":\"Bunch Vegies\",\"MONTH\":\"04\"},{\"SALES\":227.34999999999985,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 08 Apr 2016 01:04:44 GMT\",\"CATEGORY\":\"Eggs\",\"MONTH\":\"04\"},{\"SALES\":138.97199999999998,\"YEAR\":\"2016\",\"DATENEW\":\"Fri, 08 Apr 2016 04:21:54 GMT\",\"CATEGORY\":\"Herbs\",\"MONTH\":\"04\"},{\"SALES\":502.37238000000025,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 09 Apr 2016 03:34:50 GMT\",\"CATEGORY\":\"Apples\",\"MONTH\":\"04\"},{\"SALES\":74.27000000000001,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 09 Apr 2016 04:22:37 GMT\",\"CATEGORY\":\"Berries\",\"MONTH\":\"04\"},{\"SALES\":2.0,\"YEAR\":\"2016\",\"DATENEW\":\"Sat, 09 Apr 2016 04:22:37 GMT\",\"CATEGORY\":\"Cut Fruits\",\"MONTH\":\"04\"}\n        ]\n\n    // var map = api_data.reduce((r, i) => (console.log(r),((r[i.CATEGORY] = r[i.CATEGORY] || []).push({\n    //   date : i.DATENEW,\n    //   sales: i.SALES\n    // }), r)), {});\n    // var entries = Object.entries(map);\n    // const second_data = [];\n    //   for(let i =0; i < entries.length; i++) {\n    //     second_data.push({\n    //       label : entries[i][0],\n    //       data: [],\n    //     })\n    //     for(let j =0 ; j < entries[i][1].length; j++) {\n    //       second_data[i].data.push({\n    //         date: entries[i][1][j].date,\n    //         sales: entries[i][1][j].sales\n    //       })\n    //     }\n    //   }\n    // console.log(\"second data\",second_data)\n\n    // const data = [];\n    //   for(let i =0; i < entries.length; i++) {\n    //     data.push({\n    //       label : entries[i][0],\n    //       data: [],\n    //     })\n    //     for(let j =0 ; j < entries[i][1].length; j++) {\n    //       data[i].data.push({\n    //         date: new Date(entries[i][1][j].date),\n    //         sales: entries[i][1][j].sales\n    //       })\n    //     }\n    //   }\n    // var vm =this;\n    // console.log(this.apiData);\n    var map = this.apiData.reduce((r, i) => ((r[i[this.xKey]] = r[i[this.xKey]] || []).push({\n      // date : i[\"MONTH\"]+\"/\"+\"01/\"+i[\"YEAR\"],\n      date : i[this.dateKey],\n      // date : i[\"MONTH\"],\n      sales: i[this.yKey]\n      // i\n    }), r), {});\n    var entries = Object.entries(map);\n    // console.log(entries);\n    const second_data = [];\n      for(let i =0; i < entries.length; i++) {\n        second_data.push({\n          label : entries[i][0],\n          data: [],\n        })\n        for(let j =0 ; j < entries[i][1].length; j++) {\n          second_data[i].data.push({\n            date: entries[i][1][j].date,\n            sales: entries[i][1][j].sales\n          })\n        }\n      }\n    // console.log(\"second data\",second_data)\n\n    const data = [];\n      for(let i =0; i < entries.length; i++) {\n        data.push({\n          label : entries[i][0],\n          data: [],\n        })\n        for(let j =0 ; j < entries[i][1].length; j++) {\n          data[i].data.push({\n            date: new Date(entries[i][1][j].date),\n            sales: entries[i][1][j].sales\n          })\n        }\n      }\n\n    // console.log(data[0].data[0].date, \"HI\",new Date(data[0].data[0].date));\n    // console.log(\"final data\",data,\"Hi\");\n\n\n    var margin = {top: 30, right: 10, bottom: 50, left: 60},\n      chart = d3LineWithLegend()\n                .xAxis.label(this.xKey)\n                .width(width(margin))\n                .height(height(margin))\n                .yAxis.label(this.yKey);\n\n\n  var svg = d3.select('#test1 svg')\n      .datum(generateData())\n\n  svg.transition().duration(0)\n      .attr('width', width(margin))\n      .attr('height', height(margin))\n      .call(chart);\n\n\n  chart.dispatch.on('showTooltip', function(e) {\n  var offset = $('#test1').offset(), // { left: 0, top: 0 }\n        left = e.pos[0] + offset.left,\n        top = e.pos[1] + offset.top,\n        // formatter = d3.time.format(\"%m/%d/%Y\")\n        formatter = d3.time.format(\"%a,%b/%d/%y\")\n        // console.log(e);\n    // TODO :  \n    var content = '<h3>' + e.series.label + '</h3>' +\n                  '<p>' +\n                  '<span class=\"value\">[' + e.point.sales.toFixed(2) + ', ' + formatter(e.point.date) + ']</span>' +\n                  '</p>';\n              \n\n    nvtooltip.show([left, top], content);\n  });\n\n  chart.dispatch.on('hideTooltip', function(e) {\n    nvtooltip.cleanup();\n  });\n\n\n\n\n  $(window).resize(function() {\n    resize_of_page();\n\n    });\n\n    function resize_of_page(){\n          var margin = chart.margin();\n    chart\n      .width(width(margin))\n      .height(height(margin));\n\n    d3.select('#test1 svg')\n      .attr('width', width(margin))\n      .attr('height', height(margin))\n      .call(chart);\n    }\n\n\n  function width(margin) {\n    var w = $(\".card-body\").width() - 40;\n\n    // return 500;\n    return ( (w - margin.left - margin.right - 20) < 0 ) ? margin.left + margin.right + 2 : w;\n  }\n\n  function height(margin) {\n    // var h = $(\".card-body\").height() - 20;\n    // var h = $(\".card-body\").height() - 20;\n    var h = 700 - 100;\n\n    return ( h - margin.top - margin.bottom - 20 < 0 ) ? \n              margin.top + margin.bottom + 2 : h;\n\n    // return 700\n  }\n\n\n  //data\n  function generateData() {\n    var sin = [],\n        sin2 = [],\n        cos = [],\n        cos2 = [],\n        sin3  = [],\n        sin4 = [],\n        sin5 = [],\n        sin6 = [],\n        cos2 = [],\n        r1 = Math.random(),\n        r2 = Math.random(),\n        r3 = Math.random(),\n        r4 = Math.random(),\n        r5 = Math.random(),\n        r6 = Math.random(),\n        r7 = Math.random()\n        // r4 = Math.random();\n\n    for (var i = 0; i < 100; i++) {\n      sin.push([ i, r1 * Math.sin( r2 +  i / (10 * (r4 + .5) ))]);\n      cos.push([ i, r2 * Math.cos( r3 + i / (10 * (r3 + .5) ))]);\n      sin2.push([ i, r3 * Math.sin( r3 + i / (10 * (r2 + .5) ))]);\n      sin3.push([ i, r4 * Math.sin( r4 + i / (10 * (r2 + .5) ))]);\n      sin4.push([ i, r5 * Math.sin( r5 + i / (10 * (r2 + .5) ))]);\n      sin5.push([ i, r6 * Math.sin( r6 + i / (10 * (r2 + .5) ))]);\n      sin6.push([ i, r7 * Math.sin( r7 + i / (10 * (r2 + .5) ))]);\n      cos2.push([ i, r4 * Math.cos( r4 + i / (10 * (r1 + .5) ))]);\n    }\n      // console.log(cos);\n\n    return data;\n\n    // return [\n    //   {\n    //     data: sin,\n    //     label: \"Sine Wave\"\n    //   },\n    //   {\n    //     data: cos,\n    //     label: \"Cosine Wave\"\n    //   },\n    //   {\n    //     data: sin2,\n    //     label: \"Sine2 Wave\"\n    //   },\n    //   {\n    //     data: cos2,\n    //     label: \"Cosine2 Wave\"\n    //   },\n    //   {\n    //     data: sin3,\n    //     label: \"Sine3 Wave\"\n    //   },\n    //   {\n    //     data: sin4,\n    //     label: \"Sine4 Wave\"\n    //   },\n    //   {\n    //     data: sin5,\n    //     label: \"Sine5 Wave\"\n    //   },\n    //   {\n    //     data: sin6,\n    //     label: \"Sine6 Wave\"\n    //   },\n\n    // ];\n    // console.log(data)\n  }\n\n  function d3Legend() {\n      var margin = {top: 5, right: 0, bottom: 5, left: 10},\n          width = 400,\n          height = 20,\n          color = d3.scale.category20().range(),\n          dispatch = d3.dispatch('legendClick', 'legendMouseover', 'legendMouseout');\n\n\n      function chart(selection) {\n        selection.each(function(data) {\n          // console.log(\"Function-chart\",data);\n          /**\n          *    Legend curently is setup to automaticaly expand vertically based on a max width.\n          *    Should implement legend where EITHER a maxWidth or a maxHeight is defined, then\n          *    the other dimension will automatically expand to fit, and anything that exceeds\n          *    that will automatically be clipped.\n          **/\n\n          var wrap = d3.select(this).selectAll('g.legend').data([data]);\n          var gEnter = wrap.enter().append('g').attr('class', 'legend').append('g');\n\n\n          var g = wrap.select('g')\n              .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n          var series = g.selectAll('.series')\n              .data(function(d) { return d });\n          var seriesEnter = series.enter().append('g').attr('class', 'series')\n              .on('click', function(d, i) {\n                // dispatch.legendClick(d, i);\n              })\n              .on('mouseover', function(d, i) {\n                dispatch.legendMouseover(d, i);\n              })\n              .on('mouseout', function(d, i) {\n                dispatch.legendMouseout(d, i);\n              });\n          seriesEnter.append('circle')\n              .style('fill', function(d, i){ return d.color || color[i % 10] })\n              .style('stroke', function(d, i){ return d.color || color[i % 10] })\n              .attr('r', 5);\n          seriesEnter.append('text')\n              .text(function(d) { return d.label })\n              .attr('text-anchor', 'start')\n              .attr('dy', '.32em')\n              .attr('dx', '8');\n          series.classed('disabled', function(d) { return d.disabled });\n          series.exit().remove();\n\n\n          var ypos = 5,\n              newxpos = 5,\n              maxwidth = 0,\n              xpos;\n          series\n              .attr('transform', function(d, i) {\n                var length = d3.select(this).select('text').node().getComputedTextLength() + 28;\n                xpos = newxpos;\n\n                //TODO: 1) Make sure dot + text of every series fits horizontally, or clip text to fix\n                //      2) Consider making columns in line so dots line up\n                //         --all labels same width? or just all in the same column?\n                //         --optional, or forced always?\n                if (width < margin.left + margin.right + xpos + length) {\n                  newxpos = xpos = 5;\n                  ypos += 20;\n                }\n\n                newxpos += length;\n                if (newxpos > maxwidth) maxwidth = newxpos;\n\n                return 'translate(' + xpos + ',' + ypos + ')';\n              });\n\n          //position legend as far right as possible within the total width\n          g.attr('transform', 'translate(' + (width - margin.right - maxwidth) + ',' + margin.top + ')');\n\n          height = margin.top + margin.bottom + ypos + 15;\n        });\n\n        return chart;\n      }\n\n      chart.dispatch = dispatch;\n\n      chart.margin = function(_) {\n        if (!arguments.length) return margin;\n        margin = _;\n        return chart;\n      };\n\n      chart.width = function(_) {\n        if (!arguments.length) return width;\n        width = _;\n        return chart;\n      };\n\n      chart.height = function(_) {\n        if (!arguments.length) return height;\n        height = _;\n        return chart;\n      };\n\n      chart.color = function(_) {\n        if (!arguments.length) return color;\n        color = _;\n        return chart;\n      };\n\n      return chart;\n  }\n\n\n  function d3Line() {\n  var margin = {top: 0, right: 0, bottom: 0, left: 0},\n      width = 960,\n      height = 500,\n      dotRadius = function() { return 2.5 },\n      color = d3.scale.category20().range(),\n      id = Math.floor(Math.random() * 10000), //Create semi-unique ID incase user doesn't select one\n      // x = d3.scale.linear(),\n      x = d3.time.scale(),\n      y = d3.scale.linear(),\n      dispatch = d3.dispatch(\"pointMouseover\", \"pointMouseout\"),\n      x0, y0;\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var seriesData = data.map(function(d) { return d.data });\n      // console.log(data);\n      // console.log(seriesData);\n      // console.log(domain(d3.extent(d3.merge(seriesData), function(d) {  return d.date } )));\n      x0 = x0 || x;\n      y0 = y0 || y;\n\n      //TODO: reconsider points {x: #, y: #} instead of [x,y]\n      //TODO: data accessors so above won't really matter, but need to decide for internal use\n\n      //add series data to each point for future ease of use\n      data = data.map(function(series, i) {\n        series.data = series.data.map(function(point) {\n          point.series = i;\n          return point;\n        });\n        return series;\n      });\n\n\n      // x   .domain(d3.extent(d3.merge(seriesData), function(d) { return d[0] } ))\n      x.domain(d3.extent(d3.merge(seriesData), function(d) {  return d.date } ))\n      // x   .domain(d3.extent(api_data, function(d) { return d.DATENEW; }))\n        // x.domain(api_data.map((d)=>{\n        // return d.DATENEW\n        // }))\n          .range([0, width - margin.left - margin.right]);\n\n      // y   .domain(d3.extent(d3.merge(seriesData), function(d) { return d[1] } ))\n      y.domain(d3.extent(d3.merge(seriesData), function(d) { return d.sales } ))\n          .range([height - margin.top - margin.bottom, 0]);\n\n      // var vertices = \"\";\n\n      var vertices = d3.merge(data.map(function(line, lineIndex) {\n            return line.data.map(function(point, pointIndex) {\n              var pointKey = line.label + '-' + point[0];\n              // console.log(point)\n              // return [x(point[0]), y(point[1]), lineIndex, pointIndex]; //adding series index to point because data is being flattened\n              return [x(point.date), y(point.sales), lineIndex, pointIndex]; //adding series index to point because data is being flattened\n            })\n          })\n      );\n      // console.log(\"verti\",vertices);\n\n\n      var wrap = d3.select(this).selectAll('g.d3line').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'd3line').append('g');\n\n      gEnter.append('g').attr('class', 'lines');\n      gEnter.append('g').attr('class', 'point-clips');\n      gEnter.append('g').attr('class', 'point-paths');\n\n\n      var g = wrap.select('g')\n          .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n\n      var voronoiClip =  gEnter.append('g').attr('class', 'voronoi-clip')\n        .append('clipPath')\n          .attr('id', 'voronoi-clip-path-' + id) //this id should probably be set on update, unless ID is always set before render\n        .append('rect');\n      wrap.select('.voronoi-clip rect')\n          .attr('x', -10)\n          .attr('y', -10)\n          .attr('width', width - margin.left - margin.right + 20)\n          .attr('height', height - margin.top - margin.bottom + 20);\n      wrap.select('.point-paths')\n          .attr('clip-path', 'url(#voronoi-clip-path-' + id + ')');\n\n\n      //var pointClips = wrap.select('.point-clips').selectAll('clipPath') // **BROWSER BUG** can't reselect camel cased elements\n      var pointClips = wrap.select('.point-clips').selectAll('.clip-path')\n          .data(vertices);\n      pointClips.enter().append('clipPath').attr('class', 'clip-path')\n        .append('circle')\n          .attr('r', 25);\n      pointClips.exit().remove();\n      pointClips\n          .attr('id', function(d, i) { return 'clip-' + id + '-' + d[2] + '-' + d[3] })\n          .attr('transform', function(d) { return 'translate(' + d[0] + ',' + d[1] + ')' });\n\n\n      var voronoi = d3.geom.voronoi(vertices).map(function(d,i) {\n          return { 'data': d, 'series': vertices[i][2], 'point': vertices[i][3] }\n      });\n      // console.log(\"voro\",voronoi);\n\n      //TODO: Add very small amount of noise to prevent duplicates\n      var pointPaths = wrap.select('.point-paths').selectAll('path')\n          .data(voronoi);\n      pointPaths.enter().append('path')\n          .attr('class', function(d,i) { return 'path-' + i; });\n      pointPaths.exit().remove();\n      pointPaths\n          .attr('clip-path', function(d) { return 'url(#clip-' + id + '-' + d.series + '-' + d.point + ')'; })\n          .attr('d', function(d) { return 'M' + d.data.join(',') + 'Z'; })\n          .on('mouseover', function(d) {\n            dispatch.pointMouseover({\n              point: data[d.series].data[d.point],\n              series: data[d.series],\n              // pos: [x(data[d.series].data[d.point][0]) + margin.left, y(data[d.series].data[d.point][1]) + margin.top],\n              pos: [x(data[d.series].data[d.point].date) + margin.left, y(data[d.series].data[d.point].sales) + margin.top],\n              pointIndex: d.point,\n              seriesIndex: d.series\n            });\n          })\n          .on('mouseout', function(d) {\n            dispatch.pointMouseout({\n              point: d,\n              series: data[d.series],\n              pointIndex: d.point,\n              seriesIndex: d.series\n            });\n          });\n\n\n      dispatch.on('pointMouseover.point', function(d) { \n        wrap.select('.line-' + d.seriesIndex + ' .point-' + d.pointIndex)\n          .classed('hover', true);\n      });\n\n      dispatch.on('pointMouseout.point', function(d) { \n        wrap.select('.line-' + d.seriesIndex + ' .point-' + d.pointIndex)\n          .classed('hover', false);\n      });\n\n\n\n      var lines = wrap.select('.lines').selectAll('.line')\n          .data(function(d) { return d }, function(d) { return d.label });\n      lines.enter().append('g')\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6);\n      d3.transition(lines.exit())\n          .style('stroke-opacity', 1e-6)\n          .style('fill-opacity', 1e-6)\n          .remove();\n      lines.attr('class', function(d,i) { return 'line line-' + i })\n          .classed('hover', function(d) { return d.hover })\n          .style('fill', function(d,i) { return color[i % 10] })\n          .style('stroke', function(d,i) { return color[i % 10] })\n      d3.transition(lines)\n          .style('stroke-opacity', 1)\n          .style('fill-opacity', .5);\n\n\n      var paths = lines.selectAll('path')\n          .data(function(d, i) { return [d.data] });\n      paths.enter().append('path')\n          .attr('d', d3.svg.line()\n            // .x(function(d) { return x0(d[0]) })\n            // .y(function(d) { return y0(d[1]) })\n             .x(function(d) { return x0(d.date) })\n            .y(function(d) { return y0(d.sales) })\n          );\n      paths.exit().remove();\n      d3.transition(paths)\n          .attr('d', d3.svg.line()\n            // .x(function(d) { return x(d[0]) })\n            // .y(function(d) { return y(d[1]) })\n             .x(function(d) { return x(d.date) })\n            .y(function(d) { return y(d.sales) })\n          );\n\n\n      var points = lines.selectAll('circle.point')\n          .data(function(d) { return d.data });\n      points.enter().append('circle')\n          // .attr('cx', function(d) { return x0(d[0]) })\n          // .attr('cy', function(d) { return y0(d[1]) });\n          .attr('cx', function(d) { return x0(d.date) })\n          .attr('cy', function(d) { return y0(d.sales) });\n      points.exit().remove();\n      points.attr('class', function(d,i) { return 'point point-' + i });\n      d3.transition(points)\n          // .attr('cx', function(d) { return x(d[0]) })\n          // .attr('cy', function(d) { return y(d[1]) })\n          .attr('cx', function(d) { return x(d.date) })\n          .attr('cy', function(d) { return y(d.sales) })\n          .attr('r', dotRadius());\n\n    });\n\n    x0 = x;\n    y0 = y;\n\n    return chart;\n  }\n\n\n\n  chart.dispatch = dispatch;\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.dotRadius = function(_) {\n    if (!arguments.length) return dotRadius;\n    dotRadius = d3.functor(_);\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = _;\n    return chart;\n  };\n\n  chart.id = function(_) {\n    if (!arguments.length) return id;\n    id = _;\n    return chart;\n  };\n\n\n  return chart;\n}\n\nfunction d3LineWithLegend() {\n  var margin = {top: 30, right: 40, bottom: 40, left: 60},\n      width = 960,\n      height = 500,\n      dotRadius = function() { return 2.5 },\n      xAxisLabelText = false,\n      yAxisLabelText = false,\n      color = d3.scale.category20().range(),\n      dispatch = d3.dispatch('showTooltip', 'hideTooltip');\n\n  var \n      x = d3.time.scale(),\n  // x = d3.scale.linear(),\n      y = d3.scale.linear(),\n      xAxis = d3.svg.axis().scale(x).orient('bottom'),\n      yAxis = d3.svg.axis().scale(y).orient('left'),\n      legend = d3Legend().height(30).color(color),\n      lines = d3Line();\n\n\n  function chart(selection) {\n    selection.each(function(data) {\n      var series = data.filter(function(d) { return !d.disabled })\n            .map(function(d) { return d.data });\n\n      x   .domain(d3.extent(d3.merge(series), function(d) { return d.date } ))\n          .range([0, width - margin.left - margin.right]);\n\n      y   .domain(d3.extent(d3.merge(series), function(d) { return d.sales } ))\n          .range([height - margin.top - margin.bottom, 0]);\n\n      lines\n        .width(width - margin.left - margin.right)\n        .height(height - margin.top - margin.bottom)\n        .color(data.map(function(d,i) {\n          return d.color || color[i % 10];\n        }).filter(function(d,i) { return !data[i].disabled }))\n\n      xAxis\n        .ticks( width / 100 )\n        .tickSize(-(height - margin.top - margin.bottom), 0);\n      yAxis\n        .ticks( height / 36 )\n        .tickSize(-(width - margin.right - margin.left), 0)\n         .tickFormat(d3.format(\"s\"))\n\n      var wrap = d3.select(this).selectAll('g.wrap').data([data]);\n      var gEnter = wrap.enter().append('g').attr('class', 'wrap d3lineWithLegend').append('g');\n\n      gEnter.append('g').attr('class', 'legendWrap');\n      gEnter.append('g').attr('class', 'x axis');\n      gEnter.append('g').attr('class', 'y axis');\n      gEnter.append('g').attr('class', 'linesWrap');\n\n\n      legend.dispatch.on('legendClick', function(d, i) { \n        d.disabled = !d.disabled;\n\n        if (!data.filter(function(d) { return !d.disabled }).length) {\n          data.forEach(function(d) {\n            d.disabled = false;\n          });\n        }\n        // console.log(selection);\n        // selection.transition().call(chart)\n        // selection.transition()\n      });\n\n\n      legend.dispatch.on('legendMouseover', function(d, i) {\n        d.hover = true;\n        selection.transition().call(chart)\n      });\n\n      legend.dispatch.on('legendMouseout', function(d, i) {\n        d.hover = false;\n        selection.transition().call(chart)\n        // selection.transition().duration(2000).call(chart)\n      });\n\n\n      lines.dispatch.on('pointMouseover.tooltip', function(e) {\n        dispatch.showTooltip({\n          point: e.point,\n          series: e.series,\n          pos: [e.pos[0] + margin.left, e.pos[1] + margin.top],\n          seriesIndex: e.seriesIndex,\n          pointIndex: e.pointIndex\n        });\n      });\n\n      lines.dispatch.on('pointMouseout.tooltip', function(e) {\n        dispatch.hideTooltip(e);\n      });\n\n\n\n\n      legend\n          .color(color)\n          .width(width / 2 - margin.right);\n\n      wrap.select('.legendWrap')\n          .datum(data)\n          .attr('transform', 'translate(' + (width/2 - margin.left) + ',' + (-legend.height()) +')')\n          .call(legend);\n\n\n      //TODO: maybe margins should be adjusted based on what components are used: axes, axis labels, legend\n      // margin.top = legend.height();  //need to re-render to see update\n      margin.top = legend.height();  //need to re-render to see update\n\n      var g = wrap.select('g')\n          .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n\n\n      var linesWrap = wrap.select('.linesWrap')\n          .datum(data.filter(function(d) { return !d.disabled }));\n\n      d3.transition(linesWrap).call(lines);\n\n\n\n      var xAxisLabel = g.select('.x.axis').selectAll('text.axislabel')\n          .data([xAxisLabelText || null]);\n      xAxisLabel.enter().append('text').attr('class', 'axislabel')\n          .attr('text-anchor', 'middle')\n          .attr('x', x.range()[1] / 2)\n          .attr('y', margin.bottom - 5);\n      xAxisLabel.exit().remove();\n      xAxisLabel.text(function(d) { return d });\n\n      g.select('.x.axis')\n          .attr('transform', 'translate(0,' + y.range()[0] + ')')\n          .call(xAxis)\n        .selectAll('line.tick')\n        .filter(function(d) { return !d })\n          .classed('zero', true);\n\n\n      var yAxisLabel = g.select('.y.axis').selectAll('text.axislabel')\n          .data([yAxisLabelText || null]);\n      yAxisLabel.enter().append('text').attr('class', 'axislabel')\n          .attr('transform', 'rotate(-90)')\n          .attr('text-anchor', 'middle')\n          .attr('y', 20 - margin.left);\n      yAxisLabel.exit().remove();\n      yAxisLabel\n          .attr('x', -y.range()[0] / 2)\n          .text(function(d) { return d });\n\n      g.select('.y.axis')\n          .call(yAxis)\n        .selectAll('line.tick')\n        .filter(function(d) { return !d })\n          .classed('zero', true);\n    });\n\n    return chart;\n  }\n\n  chart.dispatch = dispatch;\n\n  chart.margin = function(_) {\n    if (!arguments.length) return margin;\n    margin = _;\n    return chart;\n  };\n\n  chart.width = function(_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function(_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.color = function(_) {\n    if (!arguments.length) return color;\n    color = _;\n    return chart;\n  };\n\n  chart.dotRadius = function(_) {\n    if (!arguments.length) return dotRadius;\n    dotRadius = d3.functor(_);\n    lines.dotRadius = d3.functor(_);\n    return chart;\n  };\n\n  //TODO: consider directly exposing both axes\n  //chart.xAxis = xAxis;\n\n  //Expose the x-axis' tickFormat method.\n  chart.xAxis = {};\n  d3.rebind(chart.xAxis, xAxis, 'tickFormat');\n\n  chart.xAxis.label = function(_) {\n    if (!arguments.length) return xAxisLabelText;\n    xAxisLabelText = _;\n    return chart;\n  }\n\n  // Expose the y-axis' tickFormat method.\n  //chart.yAxis = yAxis;\n\n  chart.yAxis = {};\n  d3.rebind(chart.yAxis, yAxis, 'tickFormat');\n\n  chart.yAxis.label = function(_) {\n    if (!arguments.length) return yAxisLabelText;\n    yAxisLabelText = _;\n    return chart;\n  }\n\n  return chart;\n}\n(function($) {\n\n  var nvtooltip = window.nvtooltip = {};\n\n  nvtooltip.show = function(pos, content, gravity, dist) {\n    var container = $('<div class=\"nvtooltip\">');\n\n    gravity = gravity || 's';\n    dist = dist || 20;\n\n    container\n      .html(content)\n      .css({left: -1000, top: -1000, opacity: 0})\n      .appendTo('body');\n\n    var height = container.height() + parseInt(container.css('padding-top'))  + parseInt(container.css('padding-bottom')),\n        width = container.width() + parseInt(container.css('padding-left'))  + parseInt(container.css('padding-right')),\n        // windowWidth = $(\".card-body\").width(),\n        // windowHeight = $(\".card-body\").height(),\n         windowWidth = $(window).width(),\n        windowHeight = $(window).height(),\n        scrollTop = $('body').scrollTop(),  //TODO: also adjust horizontal scroll\n        left, top;\n\n\n    //TODO: implement other gravities\n    switch (gravity) {\n      case 'e':\n      case 'w':\n      case 'n':\n        left = pos[0] - (width / 2);\n        top = pos[1] + dist;\n        if (left < 0) left = 5;\n        if (left + width > windowWidth) left = windowWidth - width - 5;\n        if (scrollTop + windowHeight < top + height) top = pos[1] - height - dist;\n        break;\n      case 's':\n        left = pos[0] - (width / 2);\n        top = pos[1] - height - dist;\n        if (left < 0) left = 5;\n        if (left + width > windowWidth) left = windowWidth - width - 5;\n        if (scrollTop > top) top = pos[1] + dist;\n        break;\n    }\n\n    container\n        .css({\n          left: left,\n          top: top,\n          opacity: 1\n        });\n  };\n\n  nvtooltip.cleanup = function() {\n    var tooltips = $('.nvtooltip');\n\n    // remove right away, but delay the show with css\n    tooltips.css({\n        'transition-delay': '0 !important',\n        '-moz-transition-delay': '0 !important',\n        '-webkit-transition-delay': '0 !important'\n    });\n\n    tooltips.css('opacity',0);\n\n    setTimeout(function() {\n      tooltips.remove()\n    }, 500);\n  };\n\n})(jQuery);\n\n  }\n};\n</script>\n\n<style>\n\n/********************\n * TOOLTIP CSS\n */\n\n.nvtooltip {\n  position: absolute;\n  background-color: rgba(255,255,255,1);\n  padding: 10px;\n  border: 1px solid #ddd;\n\n  font-family: Arial;\n  font-size: 13px;\n\n  transition: opacity 500ms linear;\n  -moz-transition: opacity 500ms linear;\n  -webkit-transition: opacity 500ms linear;\n\n  transition-delay: 500ms;\n  -moz-transition-delay: 500ms;\n  -webkit-transition-delay: 500ms;\n\n  -moz-box-shadow: 4px 4px 12px rgba(0,0,0,.5);\n  -webkit-box-shadow: 4px 4px 12px rgba(0,0,0,.5);\n  box-shadow: 4px 4px 12px rgba(0,0,0,.5);\n\n  -moz-border-radius: 15px;\n  border-radius : 15px;\n  z-index: 1000;\n}\n\n.nvtooltip h3 {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.nvtooltip p {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.nvtooltip span {\n  display: inline-block;\n  margin: 2px 0;\n}\n\n\n\n\n\n/**********\n*  General SVG CSS\n*/\n\n\n/* text {\n  font: 12px sans-serif;\n} */\n\n\n\n/**********\n*  Legend\n*/\n\n.legend .series {\n  cursor: pointer;\n}\n\n.legend circle {\n  stroke-width: 2px;\n}\n\n.legend .disabled circle {\n  fill-opacity: 0;\n}\n\n\n\n/**********\n*  Axes\n*/\n\n.axis path {\n  fill: none;\n  stroke: #000;\n  stroke-opacity: .75;\n  shape-rendering: crispEdges;\n}\n\n.axis path.domain {\n  stroke-opacity: .75;\n}\n\n.axis line {\n  fill: none;\n  stroke: #000;\n  stroke-opacity: .25;\n  shape-rendering: crispEdges;\n}\n\n.axis line.zero {\n  stroke-opacity: .75;\n}\n\n\n\n/**********\n*  Line chart\n*/\n\n.point-paths path {\n  /*\n  fill: #eee;\n  stroke: #aaa;\n  */\n  stroke-opacity: 0;\n  fill-opacity: 0;\n}\n\n\n.lines path {\n  fill: none;\n  stroke-width: 1.5px;\n  stroke-linecap: round;\n\n  transition: stroke-width 250ms linear;\n  -moz-transition: stroke-width 250ms linear;\n  -webkit-transition: stroke-width 250ms linear;\n\n  transition-delay: 250ms;\n  -moz-transition-delay: 250ms;\n  -webkit-transition-delay: 250ms;\n}\n\n.line.hover path {\n  stroke-width: 6px;\n}\n\n.lines .point {\n  transition: stroke-width 250ms linear;\n  -moz-transition: stroke-width 250ms linear;\n  -webkit-transition: stroke-width 250ms linear;\n}\n\n.lines .point.hover {\n  stroke-width: 20px;\n  stroke-opacity: .5;\n}\n\n</style>"]}]}