{"remainingRequest":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Elixir/chatbot-portal/src/portal/analytics/components/NewPieChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Elixir/chatbot-portal/src/portal/analytics/components/NewPieChart.vue","mtime":1643027096188},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGQzID0gcmVxdWlyZSgiZDMtMyIpOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiTmV3UGllIiwKICAgIHByb3BzOiB7CiAgICBkYXRhOiBBcnJheSwKICAgIHhLZXk6IFN0cmluZywKICAgIHlLZXk6IFN0cmluZywKICAgIGN1cnJlbmN5X2tleTogU3RyaW5nLAogIH0sCiAgbW91bnRlZCAoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICB0aGlzLmRhdGEuc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBiW3ZtLnlLZXldIC0gYVt2bS55S2V5XTsKICAgICAgICAgfSk7CgogICAgICAgIHZhciBzdW1feXZhbCA9IDAKICAgICAgICBmb3IoIGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzdW1feXZhbCA9IHN1bV95dmFsICsgIHRoaXMuZGF0YVtpXVt0aGlzLnlLZXldCiAgICAgICAgfQogICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspewogICAgICAgICAgICB0aGlzLmRhdGFbaV0ucGVyY2VudCA9ICgodGhpcy5kYXRhW2ldW3RoaXMueUtleV0gLyBzdW1feXZhbCkgKiAxMDApCiAgICAgICAgfQogICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoIiNuZXdwaWUiKTsKICAgICAgICB2YXIgY2FudmFzID0gZDMuc2VsZWN0KCIjY2FudmFzIik7CiAgICAgICAgdmFyIGFydCA9IGQzLnNlbGVjdCgiI2FydCIpOwogICAgICAgIHZhciBsYWJlbHMgPSBkMy5zZWxlY3QoIiNsYWJlbHMiKTsKCiAgICAgICAgLy8gQ3JlYXRlIHRoZSBwaWUgbGF5b3V0IGZ1bmN0aW9uLgogICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgY29udmVuaWVuY2UKICAgICAgICAvLyBkYXRhIHRvIG91ciBleGlzdGluZyBkYXRhLCBsaWtlIAogICAgICAgIC8vIHRoZSBzdGFydCBhbmdsZSBhbmQgZW5kIGFuZ2xlCiAgICAgICAgLy8gZm9yIGVhY2ggZGF0YSBlbGVtZW50LgogICAgICAgIHZhciBqaHdfcGllID0gZDMubGF5b3V0LnBpZSgpCiAgICAgICAgamh3X3BpZS52YWx1ZShmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAvLyBUZWxscyB0aGUgbGF5b3V0IGZ1bmN0aW9uIHdoYXQKICAgICAgICAgICAgLy8gcHJvcGVydHkgb2Ygb3VyIGRhdGEgb2JqZWN0IHRvCiAgICAgICAgICAgIC8vIHVzZSBhcyB0aGUgdmFsdWUuCiAgICAgICAgICAgIHJldHVybiBkW3ZtLnlLZXldOwogICAgICAgIH0pOwoKICAgICAgICAvLyBTdG9yZSBvdXIgY2hhcnQgZGltZW5zaW9ucwogICAgICAgIHZhciBjRGltID0gewogICAgICAgICAgICAgICAgaGVpZ2h0OiA1MDAsCiAgICAgICAgICAgICAgICB3aWR0aDogOTAwLAogICAgICAgICAgICAgICAgaW5uZXJSYWRpdXM6IDAsCiAgICAgICAgICAgICAgICBvdXRlclJhZGl1czogMTUwLAogICAgICAgICAgICAgICAgbGFiZWxSYWRpdXM6IDE3NQogICAgICAgICAgICB9CgogICAgICAgIC8vIFNldCB0aGUgc2l6ZSBvZiBvdXIgU1ZHIGVsZW1lbnQKICAgICAgICBzdmcuYXR0cih7CiAgICAgICAgICAgIGhlaWdodDogY0RpbS5oZWlnaHQsCiAgICAgICAgICAgIHdpZHRoOiBjRGltLndpZHRoCiAgICAgICAgfSk7CgogICAgICAgIC8vIFRoaXMgdHJhbnNsYXRlIHByb3BlcnR5IG1vdmVzIHRoZSBvcmlnaW4gb2YgdGhlIGdyb3VwJ3MgY29vcmRpbmF0ZQogICAgICAgIC8vIHNwYWNlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIFNWRyBlbGVtZW50LCBzYXZpbmcgdXMgdHJhbnNsYXRpbmcgZXZlcnkKICAgICAgICAvLyBjb29yZGluYXRlIGluZGl2aWR1YWxseS4gCiAgICAgICAgY2FudmFzLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIChjRGltLndpZHRoIC8gMi4xKSArICIsIiArIChjRGltLndpZHRoIC8gMy40KSArICIpIik7CgogICAgICAgIHZhciBwaWVkX2RhdGEgPSBqaHdfcGllKHRoaXMuZGF0YSk7CgogICAgICAgIC8vIFRoZSBwaWVkX2FyYyBmdW5jdGlvbiB3ZSBtYWtlIGhlcmUgd2lsbCBjYWxjdWxhdGUgdGhlIHBhdGgKICAgICAgICAvLyBpbmZvcm1hdGlvbiBmb3IgZWFjaCB3ZWRnZSBiYXNlZCBvbiB0aGUgZGF0YSBzZXQuIFRoaXMgaXMgCiAgICAgICAgLy8gdXNlZCBpbiB0aGUgImQiIGF0dHJpYnV0ZS4KICAgICAgICB2YXIgcGllZF9hcmMgPSBkMy5zdmcuYXJjKCkKICAgICAgICAgICAgICAgIC5pbm5lclJhZGl1cygwKQogICAgICAgICAgICAgICAgLm91dGVyUmFkaXVzKDE1MCkKICAgICAgICAgICAgICAgIC5wYWRBbmdsZSgwLjApCiAgICAgICAgICAgICAgICAuY29ybmVyUmFkaXVzKDApCgogICAgICAgIC8vIFRoaXMgaXMgYW4gb3JkaW5hbCBzY2FsZSB0aGF0IHJldHVybnMgMTAgcHJlZGVmaW5lZCBjb2xvcnMuCiAgICAgICAgLy8gSXQgaXMgcGFydCBvZiBkMyBjb3JlLgogICAgICAgIC8vIHZhciBwaWVkX2NvbG9ycyA9IGQzLnNjYWxlLmNhdGVnb3J5MjAoKTsKICAgICAgICAvLyB2YXIgcGllZF9jb2xvcnMgPSAgIGQzLnNjYWxlLm9yZGluYWwoKQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFsiIzAwQzdFNiIsIiMzRkJDMTEiLCAiI0VBMzM3OSIsICIjRkJCMzE3IiwgIiM1ZDYyYjUiLCAiIzI5YzNiZSIsICIjZjE3MjZlIiwgICIjNjJiNThmIiwgIiNkMDc0M2MiLCIjY2EwMDIwIiwiI2Y0YTU4MiIsIiM5MmM1ZGUiLCIjMDU3MWIwIiwgIiNkM2ZlMTQiLCAiI2ZlYzdmOCIsICIjMGI3YjNlIiwgIiMwYmYwZTkiLCcjRTY2NkIzJywgJyMzMzk5MUEnLCAnI0NDOTk5OScsICcjQjNCMzFBJywgJyMwMEU2ODAnLAogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgJyNGRjlBQTInLCAnI0ZGQjdCMicsICcjRkZEQUMxJywgJyNCNUVBRDcnLCAnIzYzZDJhOCcsICIjMjI1YTRiIiwgIiNlNWRmNzMiLCAnIzY2NjZGRicsJyNmZjAwMDAJJywnI2EyNzk4ZicsJyNkN2M2Y2YnLCcjZTg4NzU4JywnI2IxM2ExNScsJyM2ZDM2NTYnLCcjZmZmYTkwJywnI2E0ZmZhYScsJyNhNmNiZmYnLCcjODUwMGY5JywnI2IwNzdiYScsJwkjNzY1Mjg0JywnIzk4NGI2NycsJyM5YzYyNGUnLCcjZmViOGZmJywnIzliZTNiZCcsJyM3NzU5MzQnLCcjMDA4Mzg1JywnIzZhMmNhMScsJyNlNjBlNjgnLCcjZmY2ZDAxJywnI2ZlZTlkMycKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICB2YXIgcGllZF9jb2xvcnMgPSAgIGQzLnNjYWxlLm9yZGluYWwoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFsiI0ZCQjMxNyIsIiNGRjk3NTAiLCIjM0ZCQzExIiwiIzAwQzdFNiIsIiNFQTMzNzkiLCIjMDE2NWZjIiwiIzQxZmRmZSIsIiMyNGEwZWQiLCIjMWFjMWRkIiwiIzdkZjlmZiIsIiMzZjAwZmYiLCIjMDhmZjA4IiwiI2FlZmY2ZSIsIiM1NmZjYTIiLCIjNDVjZWEyIiwiIzA2YzJhYyIsIiNmZTY3MDAiLCIjZmYzNTAzIiwiI2Q5MDE2NiIsIiNiZTAzZmQiLCIjYWQwYWZkIiwiIzY2MDBmZiIsIiNkMDFjMWYiLCIjZjExNzJmIiwiI2ZmZjYwMCIsIiNmY2QxMTYiLCIjY2ZmZjA0IiwiI2ZmYzMyNCIsIiNmNGM0MzAiLCIjRkU3RDY4IiwiIzcxMDE5MyIsCiAgICAgICAgICAgICIjMDQ5MkMyIiwiIzk4OTdBOSIsIiM2MzJBMEQiLCIjOUE3OTRFIiwiIzE1MUUzRCIsIiM1OTc4OEQiLCIjMUU0NTZFIiwiIzAxNjA2NCIsIiM0OEFBQUQiLCIjN0U3RDlDIiwiIzMwMzE1MCIsIiM2MDlEOUUiLCIjMjg3RTlFIiwiI0U0QTgzNCIsIiMwMjg5MTAiLAogICAgICAgICAgICAiIzM3MzczNyIsIiM2QzYyNkQiLCIjNTg0RDVCIiwiIzRENEM1QyJdKTsKCiAgICAgICAgLy8gTGV0J3Mgc3RhcnQgZHJhd2luZyB0aGUgYXJjcy4KICAgICAgICB2YXIgZW50ZXJpbmdBcmNzID0gYXJ0LnNlbGVjdEFsbCgiLndlZGdlIikuZGF0YShwaWVkX2RhdGEpLmVudGVyKCk7CiAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgZW50ZXJpbmdBcmNzLmFwcGVuZCgicGF0aCIpCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJ3ZWRnZSIpCiAgICAgICAgICAgIC5hdHRyKCJpZCIsIGZ1bmN0aW9uKGQsIGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAgaTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLy8gLmF0dHIoImQiLCBwaWVkX2FyYykKICAgICAgICAgICAgLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBpZWRfY29sb3JzKGkpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kZWxheShmdW5jdGlvbihkLGkpIHsKICAgICAgICAgICAgcmV0dXJuIGkgKjE1MDsgfSkKICAgICAgICAgICAgLmR1cmF0aW9uKDM4MDApCiAgICAgICAgCS5hdHRyVHdlZW4oJ2QnLCBmdW5jdGlvbihkKSB7CgkJICAgIHZhciBpID0gZDMuaW50ZXJwb2xhdGUoZC5zdGFydEFuZ2xlKzAuMSwgZC5lbmRBbmdsZSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBkLmVuZEFuZ2xlID0gaSh0KTsgCiAgICAgICAgICAgICAgICByZXR1cm4gcGllZF9hcmMoZCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmF0dHIoImQiLCBwaWVkX2FyYykKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGQzLnNlbGVjdEFsbCgicGF0aCIpCiAgICAgICAgICAgIC8vIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgLy8gLmVhc2UoImJvdW5jZSIpCiAgICAgICAgICAgIC8vIC5kdXJhdGlvbigyMDAwKQogICAgICAgICAgICAvLyAuYXR0clR3ZWVuKCJkIiwgdHdlZW5QaWUpCiAgICAgICAgICAgIC8vIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgLy8gLmR1cmF0aW9uKGZ1bmN0aW9uKGQsIGkpIHsKICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gaSAqIDEwMDsKICAgICAgICAgICAgLy8gICAgIH0pLmR1cmF0aW9uKDQyMDApCiAgICAgICAgICAgIC8vICAgICAuYXR0clR3ZWVuKCdkJywgZnVuY3Rpb24oZCkgeyAgIAogICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCJoZXUiKQogICAgICAgICAgICAvLyAgICAgdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZShkLnN0YXJ0QW5nbGUrMC4xLCBkLmVuZEFuZ2xlKTsKICAgICAgICAgICAgLy8gICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIC8vICAgICAgICAgZC5lbmRBbmdsZSA9IGkodCk7CiAgICAgICAgICAgIC8vICAgICByZXR1cm4gcGllZF9hcmMoZCk7CiAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICAvLyBmdW5jdGlvbiB0d2VlblBpZShiKSB7CiAgICAgICAgLy8gICAgIHZhciBpID0gZDMuaW50ZXJwb2xhdGUoe3N0YXJ0QW5nbGU6IDEuMSpNYXRoLlBJLCBlbmRBbmdsZTogMS4xKk1hdGguUEl9LCBiKTsKICAgICAgICAvLyAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsgcmV0dXJuIHBpZWRfYXJjKGkodCkpOyB9OwogICAgICAgIC8vIH0KICAgICAgICAvLyBmdW5jdGlvbiB0d2VlblBpZShiKSB7CiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJoZXlsbyIpCiAgICAgICAgLy8gdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZSh7c3RhcnRBbmdsZTogMCwgZW5kQW5nbGU6IDB9LCBiKTsKICAgICAgICAvLyByZXR1cm4gZnVuY3Rpb24odCkgeyByZXR1cm4gcGllZF9hcmMoaSh0KSk7IH07CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBOb3cgd2UnbGwgZHJhdyBvdXIgbGFiZWwgbGluZXMsIGV0Yy4KICAgICAgICB2YXIgdG9vbHRpcCA9IAogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIjY2hhcnQiKS5hcHBlbmQoImRpdiIpLmF0dHIoImNsYXNzIiwgInRvb2xUaXAiKQoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgCiAgICAgICAgdmFyIGVudGVyaW5nTGFiZWxzID0gbGFiZWxzLnNlbGVjdEFsbCgiLmxhYmVsIikuZGF0YShwaWVkX2RhdGEpLmVudGVyKCk7CiAgICAgICAgdmFyIGxhYmVsR3JvdXBzID0gZW50ZXJpbmdMYWJlbHMuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCAibGFiZWwiKTsKICAgICAgICBsYWJlbEdyb3Vwcy5hcHBlbmQoImNpcmNsZSIpLmF0dHIoewogICAgICAgICAgICB4OiAwLAogICAgICAgICAgICB5OiAwLAogICAgICAgICAgICByOiAyLAogICAgICAgICAgICBmaWxsOiAiIzAwMCIsCiAgICAgICAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgdmFyIGNlbnRyb2lkID0gcGllZF9hcmMuY2VudHJvaWQoZCk7CiAgICAgICAgICAgICAgICByZXR1cm4gInRyYW5zbGF0ZSgiICsgcGllZF9hcmMuY2VudHJvaWQoZCkgKyAiKSI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnY2xhc3MnOiAibGFiZWwtY2lyY2xlIgogICAgICAgIH0pOwoKICAgICAgICAvLyAiV2hlbiBhbSBJIGV2ZXIgZ29pbmcgdG8gdXNlIHRoaXM/IiBJIHNhaWQgaW4gCiAgICAgICAgLy8gMTB0aCBncmFkZSB0cmlnLgogICAgICAgIHZhciB0ZXh0TGluZXMgPSBsYWJlbEdyb3Vwcy5hcHBlbmQoImxpbmUiKS5hdHRyKHsKICAgICAgICAgICAgeDE6IGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgICAgICAvLyByZXR1cm4gcGllZF9hcmMuY2VudHJvaWQoZClbMF07CiAgICAgICAgICAgICAgICB2YXIgY2VudHJvaWQgPSBwaWVkX2FyYy5jZW50cm9pZChkKTsKICAgICAgICAgICAgICAgIHZhciBtaWRBbmdsZSA9IE1hdGguYXRhbjIoY2VudHJvaWRbMV0sIGNlbnRyb2lkWzBdKTsKICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5jb3MobWlkQW5nbGUpICogY0RpbS5vdXRlclJhZGl1czsKICAgICAgICAgICAgICAgIHJldHVybiB4OwogICAgICAgICAgICB9LAogICAgICAgICAgICB5MTogZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgICAgIC8vIHJldHVybiBwaWVkX2FyYy5jZW50cm9pZChkKVsxXTsKICAgICAgICAgICAgICAgIHZhciBjZW50cm9pZCA9IHBpZWRfYXJjLmNlbnRyb2lkKGQpOwogICAgICAgICAgICAgICAgdmFyIG1pZEFuZ2xlID0gTWF0aC5hdGFuMihjZW50cm9pZFsxXSwgY2VudHJvaWRbMF0pOwogICAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnNpbihtaWRBbmdsZSkgKiBjRGltLm91dGVyUmFkaXVzOwogICAgICAgICAgICAgICAgcmV0dXJuIHk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHgyOiBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAgICAgdmFyIGNlbnRyb2lkID0gcGllZF9hcmMuY2VudHJvaWQoZCk7CiAgICAgICAgICAgICAgICB2YXIgbWlkQW5nbGUgPSBNYXRoLmF0YW4yKGNlbnRyb2lkWzFdLCBjZW50cm9pZFswXSk7CiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGguY29zKG1pZEFuZ2xlKSAqIGNEaW0ubGFiZWxSYWRpdXM7CiAgICAgICAgICAgICAgICByZXR1cm4geDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeTI6IGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgICAgICB2YXIgY2VudHJvaWQgPSBwaWVkX2FyYy5jZW50cm9pZChkKTsKICAgICAgICAgICAgICAgIHZhciBtaWRBbmdsZSA9IE1hdGguYXRhbjIoY2VudHJvaWRbMV0sIGNlbnRyb2lkWzBdKTsKICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnNpbihtaWRBbmdsZSkgKiBjRGltLmxhYmVsUmFkaXVzOwogICAgICAgICAgICAgICAgcmV0dXJuIHk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnY2xhc3MnOiAibGFiZWwtbGluZSIKICAgICAgICB9KTsKCiAgICAgICAgdmFyIHRleHRMYWJlbHMgPSBsYWJlbEdyb3Vwcy5hcHBlbmQoInRleHQiKS5hdHRyKHsKICAgICAgICAgICAgeDogZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgICAgIHZhciBjZW50cm9pZCA9IHBpZWRfYXJjLmNlbnRyb2lkKGQpOwogICAgICAgICAgICAgICAgdmFyIG1pZEFuZ2xlID0gTWF0aC5hdGFuMihjZW50cm9pZFsxXSwgY2VudHJvaWRbMF0pOwogICAgICAgICAgICAgICAgdmFyIHggPSBNYXRoLmNvcyhtaWRBbmdsZSkgKiBjRGltLmxhYmVsUmFkaXVzOwogICAgICAgICAgICAgICAgdmFyIHNpZ24gPSAoeCA+IDApID8gMSA6IC0xCiAgICAgICAgICAgICAgICB2YXIgbGFiZWxYID0geCArICg1ICogc2lnbikKICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbFg7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHk6IGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgICAgICB2YXIgY2VudHJvaWQgPSBwaWVkX2FyYy5jZW50cm9pZChkKTsKICAgICAgICAgICAgICAgIHZhciBtaWRBbmdsZSA9IE1hdGguYXRhbjIoY2VudHJvaWRbMV0sIGNlbnRyb2lkWzBdKTsKICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5zaW4obWlkQW5nbGUpICogY0RpbS5sYWJlbFJhZGl1czsKICAgICAgICAgICAgICAgIHJldHVybiB5OwogICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgICAgIHZhciBjZW50cm9pZCA9IHBpZWRfYXJjLmNlbnRyb2lkKGQpOwogICAgICAgICAgICAgICAgdmFyIG1pZEFuZ2xlID0gTWF0aC5hdGFuMihjZW50cm9pZFsxXSwgY2VudHJvaWRbMF0pOwogICAgICAgICAgICAgICAgdmFyIHggPSBNYXRoLmNvcyhtaWRBbmdsZSkgKiBjRGltLmxhYmVsUmFkaXVzOwogICAgICAgICAgICAgICAgcmV0dXJuICh4ID4gMCkgPyAic3RhcnQiIDogImVuZCI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbGFiZWwtdGV4dCcKICAgICAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIGlmKGQuZGF0YVt2bS54S2V5XS5sZW5ndGggPiAxNSl7CiAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhW3ZtLnhLZXldLnN1YnN0cmluZygwLDE1KSsnLi4uKCcrIGQuZGF0YS5wZXJjZW50LnRvRml4ZWQoMikrJyUpJzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYCR7ZC5kYXRhW3ZtLnhLZXldfSAoJHtkLmRhdGEucGVyY2VudC50b0ZpeGVkKDIpfSAlKSBgCiAgICAgICAgfSk7CiAgICAgICAgZDMuc2VsZWN0QWxsKCcubGFiZWwgdGV4dCcpLmNhbGwoc2hvd19sb25nX2xhYmVscyk7CiAgICAgICAgZnVuY3Rpb24gc2hvd19sb25nX2xhYmVscyhzZWxlY3Rpb24pIHsKICAgICAgICAgICAgc2VsZWN0aW9uLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGQsaSkgeyAKICAgICAgICAgICAgICAgIGlmKGQuZGF0YVt2bS54S2V5XS5sZW5ndGggPiAxNSl7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXAKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImxlZnQiLCBkMy5ldmVudC5wYWdlWCAtIDQwICsgInB4IikKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInRvcCIsIGQzLmV2ZW50LnBhZ2VZIC0gNzAgKyAicHgiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKQogICAgICAgICAgICAgICAgICAgIC5odG1sKGAke2QuZGF0YVt2bS54S2V5XX0gKCR7ZC5kYXRhLnBlcmNlbnQudG9GaXhlZCgyKX0gJSkgYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZWxlY3Rpb24ub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oZCxpKSB7CiAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKCJkaXNwbGF5IiwgIm5vbmUiKTsgLy8gaGlkZSB0b29sdGlwIGZvciB0aGF0IGVsZW1lbnQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZWxlY3Rpb24ub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgIHRvb2x0aXAKICAgICAgICAgICAgICAgIC5zdHlsZSgidG9wIiwgZDMuZXZlbnQubGF5ZXJZICsgMTAgKyAicHgiKSAKICAgICAgICAgICAgICAgIC5zdHlsZSgibGVmdCIsIGQzLmV2ZW50LmxheWVyWCArIDEwICsgInB4Iik7IAogICAgICAgICAgICB9KTsKICAgICAgICB9CgoKICAgICAgICB2YXIgYWxwaGEgPSAwLjU7CiAgICAgICAgdmFyIHNwYWNpbmcgPSAxMjsKCiAgICAgICAgZnVuY3Rpb24gcmVsYXgoKSB7CiAgICAgICAgICAgIHZhciBhZ2FpbiA9IGZhbHNlOwogICAgICAgICAgICB0ZXh0TGFiZWxzLmVhY2goZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgdmFyICBhID0gdGhpczsKICAgICAgICAgICAgdmFyICAgZGEgPSBkMy5zZWxlY3QoYSk7CiAgICAgICAgICAgIHZhciAgeTEgPSBkYS5hdHRyKCJ5Iik7CiAgICAgICAgICAgICAgICB0ZXh0TGFiZWxzLmVhY2goZnVuY3Rpb24gKGQsIGopIHsKICAgICAgICAgICAgICAgIHZhciAgYiA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgLy8gYSAmIGIgYXJlIHRoZSBzYW1lIGVsZW1lbnQgYW5kIGRvbid0IGNvbGxpZGUuCiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPT0gYikgcmV0dXJuOwogICAgICAgICAgICAgICAgdmFyIGRiID0gZDMuc2VsZWN0KGIpOwogICAgICAgICAgICAgICAgICAgIC8vIGEgJiBiIGFyZSBvbiBvcHBvc2l0ZSBzaWRlcyBvZiB0aGUgY2hhcnQgYW5kCiAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgY29sbGlkZQogICAgICAgICAgICAgICAgICAgIGlmIChkYS5hdHRyKCJ0ZXh0LWFuY2hvciIpICE9IGRiLmF0dHIoInRleHQtYW5jaG9yIikpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAvLyBOb3cgbGV0J3MgY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlc2UgZWxlbWVudHMuIAogICAgICAgICAgICAgICAgdmFyICB5MiA9IGRiLmF0dHIoInkiKTsKICAgICAgICAgICAgICAgIHZhciAgIGRlbHRhWSA9IHkxIC0geTI7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNwYWNpbmcgaXMgZ3JlYXRlciB0aGFuIG91ciBzcGVjaWZpZWQgc3BhY2luZywKICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGV5IGRvbid0IGNvbGxpZGUuCiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWSkgPiBzcGFjaW5nKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGxhYmVscyBjb2xsaWRlLCB3ZSdsbCBwdXNoIGVhY2ggCiAgICAgICAgICAgICAgICAgICAgLy8gb2YgdGhlIHR3byBsYWJlbHMgdXAgYW5kIGRvd24gYSBsaXR0bGUgYml0LgogICAgICAgICAgICAgICAgICAgIGFnYWluID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciAgc2lnbiA9IGRlbHRhWSA+IDAgPyAxIDogLTE7CiAgICAgICAgICAgICAgICB2YXIgIGFkanVzdCA9IHNpZ24gKiBhbHBoYTsKICAgICAgICAgICAgICAgICAgICBkYS5hdHRyKCJ5IiwreTEgKyBhZGp1c3QpOwogICAgICAgICAgICAgICAgICAgIGRiLmF0dHIoInkiLCt5MiAtIGFkanVzdCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIEFkanVzdCBvdXIgbGluZSBsZWFkZXJzIGhlcmUKICAgICAgICAgICAgLy8gc28gdGhhdCB0aGV5IGZvbGxvdyB0aGUgbGFiZWxzLiAKICAgICAgICAgICAgaWYoYWdhaW4pIHsKICAgICAgICAgICAgdmFyIGxhYmVsRWxlbWVudHMgPSB0ZXh0TGFiZWxzWzBdOwogICAgICAgICAgICAgICAgdGV4dExpbmVzLmF0dHIoInkyIixmdW5jdGlvbihkLGkpIHsKICAgICAgICAgICAgICAgIHZhciAgbGFiZWxGb3JMaW5lID0gZDMuc2VsZWN0KGxhYmVsRWxlbWVudHNbaV0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbEZvckxpbmUuYXR0cigieSIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlbGF4LDMwKQogICAgICAgICAgICB9CgogICAgICAgICAgICAKICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIud2VkZ2UiKS5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgdmFyIHggPSBkMy5zZWxlY3QodGhpcykuYXR0cignaWQnKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHgsdm0uZGF0YVt4XSk7CiAgICAgICAgICAgICAgICB0b29sdGlwCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJsZWZ0IiwgZDMuZXZlbnQucGFnZVggLSA0MCArICJweCIpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0b3AiLCBkMy5ldmVudC5wYWdlWSAtIDcwICsgInB4IikKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIikKICAgICAgICAgICAgICAgICAgICAuaHRtbCgodm0uZGF0YVt4XVt2bS54S2V5XSkgKyAiPGJyPiIgICsgdm0uY3VycmVuY3lfa2V5ICsgJyAnICsgKChOdW1iZXIuaXNJbnRlZ2VyKHZtLmRhdGFbeF1bdm0ueUtleV0pKSA/ICh2bS5kYXRhW3hdW3ZtLnlLZXldKSA6ICh2bS5kYXRhW3hdW3ZtLnlLZXldKS50b0ZpeGVkKDIpKSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIud2VkZ2UiKS5vbigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUoImRpc3BsYXkiLCAibm9uZSIpOyAvLyBoaWRlIHRvb2x0aXAgZm9yIHRoYXQgZWxlbWVudAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLndlZGdlIikub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgIHRvb2x0aXAKICAgICAgICAgICAgICAgIC5zdHlsZSgidG9wIiwgZDMuZXZlbnQubGF5ZXJZICsgMTAgKyAicHgiKSAKICAgICAgICAgICAgICAgIC5zdHlsZSgibGVmdCIsIGQzLmV2ZW50LmxheWVyWCArIDEwICsgInB4Iik7IAogICAgICAgICAgICB9KTsKCiAgICAgICAgfQoKICAgICAgICByZWxheCgpOwogICAgICAgIH0sIDE0MDApOwoKICAgIH0KfQo="},{"version":3,"sources":["NewPieChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA","file":"NewPieChart.vue","sourceRoot":"src/portal/analytics/components","sourcesContent":["<template>\n  <div id=\"chart\">\n  <!-- <svg width=\"700\" height=\"3000\" id=\"svg\" /> -->\n\n<svg id=\"newpie\">\n    <g id=\"canvas\">\n        <g id=\"art\" />\n        <g id=\"labels\" /></g>\n</svg>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3-3\");\nexport default {\n    name: \"NewPie\",\n    props: {\n    data: Array,\n    xKey: String,\n    yKey: String,\n    currency_key: String,\n  },\n  mounted () {\n        var vm = this;\n        this.data.sort(function(a, b) {\n            return b[vm.yKey] - a[vm.yKey];\n         });\n\n        var sum_yval = 0\n        for( let i = 0; i < this.data.length; i++) {\n            sum_yval = sum_yval +  this.data[i][this.yKey]\n        }\n        for(let i = 0; i < this.data.length; i++){\n            this.data[i].percent = ((this.data[i][this.yKey] / sum_yval) * 100)\n        }\n        var svg = d3.select(\"#newpie\");\n        var canvas = d3.select(\"#canvas\");\n        var art = d3.select(\"#art\");\n        var labels = d3.select(\"#labels\");\n\n        // Create the pie layout function.\n        // This function will add convenience\n        // data to our existing data, like \n        // the start angle and end angle\n        // for each data element.\n        var jhw_pie = d3.layout.pie()\n        jhw_pie.value(function (d, i) {\n            // Tells the layout function what\n            // property of our data object to\n            // use as the value.\n            return d[vm.yKey];\n        });\n\n        // Store our chart dimensions\n        var cDim = {\n                height: 500,\n                width: 900,\n                innerRadius: 0,\n                outerRadius: 150,\n                labelRadius: 175\n            }\n\n        // Set the size of our SVG element\n        svg.attr({\n            height: cDim.height,\n            width: cDim.width\n        });\n\n        // This translate property moves the origin of the group's coordinate\n        // space to the center of the SVG element, saving us translating every\n        // coordinate individually. \n        canvas.attr(\"transform\", \"translate(\" + (cDim.width / 2.1) + \",\" + (cDim.width / 3.4) + \")\");\n\n        var pied_data = jhw_pie(this.data);\n\n        // The pied_arc function we make here will calculate the path\n        // information for each wedge based on the data set. This is \n        // used in the \"d\" attribute.\n        var pied_arc = d3.svg.arc()\n                .innerRadius(0)\n                .outerRadius(150)\n                .padAngle(0.0)\n                .cornerRadius(0)\n\n        // This is an ordinal scale that returns 10 predefined colors.\n        // It is part of d3 core.\n        // var pied_colors = d3.scale.category20();\n        // var pied_colors =   d3.scale.ordinal()\n        //                     .range([\"#00C7E6\",\"#3FBC11\", \"#EA3379\", \"#FBB317\", \"#5d62b5\", \"#29c3be\", \"#f1726e\",  \"#62b58f\", \"#d0743c\",\"#ca0020\",\"#f4a582\",\"#92c5de\",\"#0571b0\", \"#d3fe14\", \"#fec7f8\", \"#0b7b3e\", \"#0bf0e9\",'#E666B3', '#33991A', '#CC9999', '#B3B31A', '#00E680',\n        //                     '#FF9AA2', '#FFB7B2', '#FFDAC1', '#B5EAD7', '#63d2a8', \"#225a4b\", \"#e5df73\", '#6666FF','#ff0000\t','#a2798f','#d7c6cf','#e88758','#b13a15','#6d3656','#fffa90','#a4ffaa','#a6cbff','#8500f9','#b077ba','\t#765284','#984b67','#9c624e','#feb8ff','#9be3bd','#775934','#008385','#6a2ca1','#e60e68','#ff6d01','#fee9d3'\n        //                     ]);\n         var pied_colors =   d3.scale.ordinal()\n                            .range([\"#FBB317\",\"#FF9750\",\"#3FBC11\",\"#00C7E6\",\"#EA3379\",\"#0165fc\",\"#41fdfe\",\"#24a0ed\",\"#1ac1dd\",\"#7df9ff\",\"#3f00ff\",\"#08ff08\",\"#aeff6e\",\"#56fca2\",\"#45cea2\",\"#06c2ac\",\"#fe6700\",\"#ff3503\",\"#d90166\",\"#be03fd\",\"#ad0afd\",\"#6600ff\",\"#d01c1f\",\"#f1172f\",\"#fff600\",\"#fcd116\",\"#cfff04\",\"#ffc324\",\"#f4c430\",\"#FE7D68\",\"#710193\",\n            \"#0492C2\",\"#9897A9\",\"#632A0D\",\"#9A794E\",\"#151E3D\",\"#59788D\",\"#1E456E\",\"#016064\",\"#48AAAD\",\"#7E7D9C\",\"#303150\",\"#609D9E\",\"#287E9E\",\"#E4A834\",\"#028910\",\n            \"#373737\",\"#6C626D\",\"#584D5B\",\"#4D4C5C\"]);\n\n        // Let's start drawing the arcs.\n        var enteringArcs = art.selectAll(\".wedge\").data(pied_data).enter();\n        // debugger;\n        enteringArcs.append(\"path\")\n            .attr(\"class\", \"wedge\")\n            .attr(\"id\", function(d, i) {\n                return  i;\n            })\n            // .attr(\"d\", pied_arc)\n            .attr(\"fill\", function (d, i) {\n                return pied_colors(i);\n            })\n            .transition()\n            .delay(function(d,i) {\n            return i *150; })\n            .duration(3800)\n        \t.attrTween('d', function(d) {\n\t\t    var i = d3.interpolate(d.startAngle+0.1, d.endAngle);\n            return function(t) {\n                d.endAngle = i(t); \n                return pied_arc(d)\n                }\n            })\n            .attr(\"d\", pied_arc)\n            \n            // d3.selectAll(\"path\")\n            // .transition()\n            // .ease(\"bounce\")\n            // .duration(2000)\n            // .attrTween(\"d\", tweenPie)\n            // .transition()\n            // .duration(function(d, i) {\n            //         return i * 100;\n            //     }).duration(4200)\n            //     .attrTween('d', function(d) {   \n            //         console.log(\"heu\")\n            //     var i = d3.interpolate(d.startAngle+0.1, d.endAngle);\n            //     return function(t) {\n            //         d.endAngle = i(t);\n            //     return pied_arc(d);\n            //     }\n            // });\n\n        // function tweenPie(b) {\n        //     var i = d3.interpolate({startAngle: 1.1*Math.PI, endAngle: 1.1*Math.PI}, b);\n        //     return function(t) { return pied_arc(i(t)); };\n        // }\n        // function tweenPie(b) {\n        //     console.log(\"heylo\")\n        // var i = d3.interpolate({startAngle: 0, endAngle: 0}, b);\n        // return function(t) { return pied_arc(i(t)); };\n        // }\n\n        // Now we'll draw our label lines, etc.\n        var tooltip = \n                d3.select(\"#chart\").append(\"div\").attr(\"class\", \"toolTip\")\n\n        setTimeout(() => {\n            \n        var enteringLabels = labels.selectAll(\".label\").data(pied_data).enter();\n        var labelGroups = enteringLabels.append(\"g\").attr(\"class\", \"label\");\n        labelGroups.append(\"circle\").attr({\n            x: 0,\n            y: 0,\n            r: 2,\n            fill: \"#000\",\n            transform: function (d, i) {\n            var centroid = pied_arc.centroid(d);\n                return \"translate(\" + pied_arc.centroid(d) + \")\";\n            },\n                'class': \"label-circle\"\n        });\n\n        // \"When am I ever going to use this?\" I said in \n        // 10th grade trig.\n        var textLines = labelGroups.append(\"line\").attr({\n            x1: function (d, i) {\n                // return pied_arc.centroid(d)[0];\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n                var x = Math.cos(midAngle) * cDim.outerRadius;\n                return x;\n            },\n            y1: function (d, i) {\n                // return pied_arc.centroid(d)[1];\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n                var y = Math.sin(midAngle) * cDim.outerRadius;\n                return y;\n            },\n            x2: function (d, i) {\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n                var x = Math.cos(midAngle) * cDim.labelRadius;\n                return x;\n            },\n            y2: function (d, i) {\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n            var y = Math.sin(midAngle) * cDim.labelRadius;\n                return y;\n            },\n                'class': \"label-line\"\n        });\n\n        var textLabels = labelGroups.append(\"text\").attr({\n            x: function (d, i) {\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n                var x = Math.cos(midAngle) * cDim.labelRadius;\n                var sign = (x > 0) ? 1 : -1\n                var labelX = x + (5 * sign)\n                return labelX;\n            },\n            y: function (d, i) {\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n                var y = Math.sin(midAngle) * cDim.labelRadius;\n                return y;\n            },\n                'text-anchor': function (d, i) {\n                var centroid = pied_arc.centroid(d);\n                var midAngle = Math.atan2(centroid[1], centroid[0]);\n                var x = Math.cos(midAngle) * cDim.labelRadius;\n                return (x > 0) ? \"start\" : \"end\";\n            },\n                'class': 'label-text'\n        }).text(function (d) {\n            if(d.data[vm.xKey].length > 15){\n                return d.data[vm.xKey].substring(0,15)+'...('+ d.data.percent.toFixed(2)+'%)';\n            }\n            return `${d.data[vm.xKey]} (${d.data.percent.toFixed(2)} %) `\n        });\n        d3.selectAll('.label text').call(show_long_labels);\n        function show_long_labels(selection) {\n            selection.on('mouseenter', function (d,i) { \n                if(d.data[vm.xKey].length > 15){\n                  tooltip\n                    .style(\"left\", d3.event.pageX - 40 + \"px\")\n                    .style(\"top\", d3.event.pageY - 70 + \"px\")\n                    .style(\"display\", \"inline-block\")\n                    .html(`${d.data[vm.xKey]} (${d.data.percent.toFixed(2)} %) `);\n            }\n            });\n\n            selection.on(\"mouseout\", function(d,i) {\n                tooltip.style(\"display\", \"none\"); // hide tooltip for that element\n            });\n\n            selection.on(\"mousemove\", function(d) {\n                tooltip\n                .style(\"top\", d3.event.layerY + 10 + \"px\") \n                .style(\"left\", d3.event.layerX + 10 + \"px\"); \n            });\n        }\n\n\n        var alpha = 0.5;\n        var spacing = 12;\n\n        function relax() {\n            var again = false;\n            textLabels.each(function (d, i) {\n            var  a = this;\n            var   da = d3.select(a);\n            var  y1 = da.attr(\"y\");\n                textLabels.each(function (d, j) {\n                var  b = this;\n                    // a & b are the same element and don't collide.\n                    if (a == b) return;\n                var db = d3.select(b);\n                    // a & b are on opposite sides of the chart and\n                    // don't collide\n                    if (da.attr(\"text-anchor\") != db.attr(\"text-anchor\")) return;\n                    // Now let's calculate the distance between\n                    // these elements. \n                var  y2 = db.attr(\"y\");\n                var   deltaY = y1 - y2;\n                    \n                    // Our spacing is greater than our specified spacing,\n                    // so they don't collide.\n                    if (Math.abs(deltaY) > spacing) return;\n                    \n                    // If the labels collide, we'll push each \n                    // of the two labels up and down a little bit.\n                    again = true;\n                var  sign = deltaY > 0 ? 1 : -1;\n                var  adjust = sign * alpha;\n                    da.attr(\"y\",+y1 + adjust);\n                    db.attr(\"y\",+y2 - adjust);\n                });\n            });\n            // Adjust our line leaders here\n            // so that they follow the labels. \n            if(again) {\n            var labelElements = textLabels[0];\n                textLines.attr(\"y2\",function(d,i) {\n                var  labelForLine = d3.select(labelElements[i]);\n                    return labelForLine.attr(\"y\");\n                });\n                setTimeout(relax,30)\n            }\n\n            \n            d3.selectAll(\".wedge\").on(\"mouseover\", function(d) {\n                var x = d3.select(this).attr('id');\n                // console.log(x,vm.data[x]);\n                tooltip\n                    .style(\"left\", d3.event.pageX - 40 + \"px\")\n                    .style(\"top\", d3.event.pageY - 70 + \"px\")\n                    .style(\"display\", \"inline-block\")\n                    .html((vm.data[x][vm.xKey]) + \"<br>\"  + vm.currency_key + ' ' + ((Number.isInteger(vm.data[x][vm.yKey])) ? (vm.data[x][vm.yKey]) : (vm.data[x][vm.yKey]).toFixed(2)));\n            });\n\n            d3.selectAll(\".wedge\").on(\"mouseout\", function() {\n                tooltip.style(\"display\", \"none\"); // hide tooltip for that element\n            });\n\n            d3.selectAll(\".wedge\").on(\"mousemove\", function(d) {\n                tooltip\n                .style(\"top\", d3.event.layerY + 10 + \"px\") \n                .style(\"left\", d3.event.layerX + 10 + \"px\"); \n            });\n\n        }\n\n        relax();\n        }, 1400);\n\n    }\n}\n</script>\n<style>\n/* .label-text {\n    font-size: 12px;\n    fill: #393939;\n}\n.label-line {\n    stroke-width: 1;\n    stroke: #393939;\n}\n.label circle {\n    display: none;\n} */\n</style>"]}]}