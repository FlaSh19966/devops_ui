{"remainingRequest":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Elixir/chatbot-portal/src/portal/Chatbot/Dashboard/ActionForm.vue?vue&type=style&index=0&id=16f7efef&lang=scss&scoped=true&","dependencies":[{"path":"/home/vimalesh/Elixir/chatbot-portal/src/portal/Chatbot/Dashboard/ActionForm.vue","mtime":1643027096144},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Elixir/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNhcHAgewogIGZvbnQtZmFtaWx5OiAiQXZlbmlyIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogIzJjM2U1MDsKICBtYXJnaW46IDA7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBoZWlnaHQ6IDgwMHB4OwogIC50b29sLXdyYXBwZXIgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogIH0KfQoubm9kZS1tYWluID4gLm5vZGUtdHlwZSB7CiAgYmFja2dyb3VuZDogIzI5Mzk3OCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["ActionForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ActionForm.vue","sourceRoot":"src/portal/Chatbot/Dashboard","sourcesContent":["<template>\n  <div>\n    <div class=\"dash-cont\">\n      <div class=\"container-fluid\" id=\"dashboard-chart\">\n        <div class=\"card dash-card\">\n          <div class=\"card-header d-flex flex-wrap justify-content-between\">\n            <h4 class=\"mab-3 mb-md-0\">Action Form Creator</h4>\n            <div class=\"card-act d-flex flex-wrap\">\n              <div class=\"form-group mb-0\">\n                <select v-model=\"newNodeType\" class=\"form-control\">\n                  <option v-for=\"(item, index) in nodeCategory\" :key=\"index\" :value=\"index\">{{item}}</option>\n                </select>\n              </div>\n              <div class=\"form-group mb-0\">\n                <input\n                  class=\"form-control\"\n                  type=\"text\"\n                  v-model=\"newNodeValue\"\n                  placeholder=\"Enter node value\"\n                >\n              </div>\n              <button type=\"submit\" @click=\"addNode\" class=\"darkblue-btn\">Add</button>\n              <button type=\"submit\" @click=\"submit_template\" class=\"darkblue-btn\">Submit</button>\n            </div>\n          </div>\n          <div class=\"card-body\">\n            <simple-flowchart\n              :scene.sync=\"scene\"\n              @nodeClick=\"nodeClick\"\n              @nodeDelete=\"nodeDelete\"\n              @linkBreak=\"linkBreak\"\n              @linkAdded=\"linkAdded\"\n              @canvasClick=\"canvasClick\"\n              :height=\"800\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- <div id=\"app\">\n    <h1>simple flowchart</h1>\n    <div class=\"tool-wrapper\">\n    </div>\n  </div>-->\n</template>\n\n<script>\nimport SimpleFlowchart from \"vue-simple-flowchart\";\nimport \"vue-simple-flowchart/dist/vue-flowchart.css\";\nimport axios from \"axios\";\nimport api_calls from \"@/portal/api_calls\";\nexport default {\n  name: \"app\",\n  components: {\n    SimpleFlowchart\n  },\n  data() {\n    return {\n      data_set: [],\n      scene: {\n        centerX: 1024,\n        centerY: 140,\n        scale: 1,\n        nodes: [],\n        links: []\n      },\n      level_count: 0,\n      newNodeType: 0,\n      newNodeValue: \"\",\n      nodeCategory: [\"Prompt\", \"Button\", \"Hyperlink\", \"Video\", \"Text\", \"User Reply\"]\n    };\n  },\n  methods: {\n    data_management(node, parent_label, parent_type) {\n      var level_count = this.nodes_level_count(node[0].id);\n      if (this.data_set.length <= level_count) {\n        this.data_set.push([]);\n      }\n      var isExists = this.data_set[level_count].filter(required_node => {\n        return required_node.label == node[0].label;\n      });\n      if (isExists.length == 0) {\n        this.data_set[level_count].push({\n          label: node[0].label,\n          type: node[0].type,\n          parent_label: parent_label,\n          parent_type: parent_type\n        });\n      }\n    },\n    data_filter(start_index, label, type) {},\n    nodes_level_count(to) {\n      var local_to = to;\n      var branch;\n      var level_count = 0;\n      for (var i in this.scene.links) {\n        branch = this.scene.links.filter(link => {\n          return link.to == local_to;\n        });\n        if (branch.length >= 1) {\n          level_count += 1;\n          local_to = branch[0].from;\n        } else {\n        }\n      }\n      return level_count;\n    },\n    canvasClick(e) {\n      // console.log(\"canvas Click, event:\", e);\n    },\n    addNode() {\n      if (this.newNodeValue == \"\") {\n        toastr.error(\"Please enter a value.\");\n      } else {\n        let maxID = Math.max(\n          0,\n          ...this.scene.nodes.map(link => {\n            return link.id;\n          })\n        );\n        this.scene.nodes.push({\n          id: maxID + 1,\n          x: -400,\n          y: 50,\n          type: this.nodeCategory[this.newNodeType],\n          label: this.newNodeValue ? this.newNodeValue : `test${maxID + 1}`\n        });\n        this.newNodeValue = \"\";\n      }\n    },\n    nodeClick(id) {\n      // console.log(\"node click\", id);\n    },\n    nodeDelete(id) {\n      // console.log(\"node delete\", id);\n    },\n    submit_template() {\n      if (this.data_set.length == 0) {\n        toastr.error(\"Please create a valid tree.\");\n      } else {\n        axios\n          .post(api_calls.submit_closed_form_url(), {\n            companyid: this.$session.get(\"UserInformation\").company_id,\n            companyname: this.$session.get(\"UserInformation\").company_name,\n            email: this.$session.get(\"UserInformation\").email,\n            token: this.$session.get(\"UserInformation\").tokens,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            tree: this.data_set\n          })\n          .then(response => {\n            this.data_set = [];\n            if (response.data == \"Query Executed Successfully\") {\n            }\n          });\n      }\n    },\n    linkBreak(id) {\n      var child_node = this.scene.nodes.filter(node => {\n        return node.id == id.to;\n      });\n      var children_count = this.scene.links.filter(link => {\n        return link.from == id.to;\n      });\n      var level_count = this.nodes_level_count(id.to);\n      if (\n        child_node[0].type !== \"Prompt\" &&\n        level_count == 0 &&\n        children_count.length > 0\n      ) {\n        toastr.error(\"Only prompts can be root nodes.\");\n        this.scene.links.push(id);\n      } else {\n        this.data_filter(level_count, child_node[0].label, child_node[0].type);\n      }\n    },\n    linkAdded(link) {\n      var node = this.scene.nodes.filter(node => {\n        return node.id == link.from;\n      });\n      var node_link = this.scene.links.filter(temp_link => {\n        return temp_link.to == node[0].id;\n      });\n      if (node[0].type != \"Prompt\" && node_link.length == 0) {\n        toastr.error(\"Only prompts can be root nodes.\");\n        this.scene.links = this.scene.links.filter(temp_link => {\n          return temp_link.from != link.from;\n        });\n      } else {\n        var parent_node = this.scene.nodes.filter(node => {\n          return node.id == link.from;\n        });\n        var child_node = this.scene.nodes.filter(node => {\n          return node.id == link.to;\n        });\n        this.data_management(parent_node, \"Root\", \"Root\");\n        this.data_management(\n          child_node,\n          parent_node[0].label,\n          parent_node[0].type\n        );\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin: 0;\n  overflow: hidden;\n  height: 800px;\n  .tool-wrapper {\n    position: relative;\n  }\n}\n.node-main > .node-type {\n  background: #293978 !important;\n}\n</style>\n"]}]}