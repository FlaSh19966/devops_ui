{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Customer Support/SuperAdminTicketDashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Customer Support/SuperAdminTicketDashboard.vue","mtime":1660042032563},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IGNsb3NlX21vZGFsfSBmcm9tICJAL3BvcnRhbC9taXhpbnMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgICBtaXhpbnM6IFsKICAgIGNsb3NlX21vZGFsCiAgXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGVuY2lsX3N2ZzoKICAgICAgICAnIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUuNTQ2IiBoZWlnaHQ9IjE1LjQ2MSIgdmlld0JveD0iMCAwIDE1LjU0NiAxNS40NjEiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiM5ZTllOWU7fTwvc3R5bGU+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDcuODg4IC0zNTYuNzY5KSI+PHBhdGggY2xhc3M9ImEiIGQ9Ik03NTkuNDE2LDM1Ni43NjlhMi4zNTgsMi4zNTgsMCwwLDEsMS43NzcuNjYyYy41MzQuNTEzLDEuMDcyLDEuMDI1LDEuNTY3LDEuNTc1YTIuMywyLjMsMCwwLDEtLjA3MSwzLjMyNWMtMi43MzYsMi43Ni01LjQ5NCw1LjUtOC4yMzgsOC4yNTFhMS4zODEsMS4zODEsMCwwLDEtLjc1OC4yODhjLS43MTkuMTc0LTEuNDI5LjM3OS0yLjE0NC41NzItLjkzMi4yNTEtMS44NjIuNS0yLjc5NS43NTEtLjYuMTU4LS45ODktLjIxMy0uODMyLS44MDdxLjY4OS0yLjU5NSwxLjQwNi01LjE4MmExLjE2NCwxLjE2NCwwLDAsMSwuMjg5LS40ODdxNC4wOTEtNC4xMDcsOC4yLTguMkEyLjI2NSwyLjI2NSwwLDAsMSw3NTkuNDE2LDM1Ni43NjlabS0xLjk4OSwyLjk1Ni02LjU0LDYuNTM4LDMuMDI1LDMuMDI0LDYuNTM4LTYuNTM3Wm00LjAyMywyLjE2NWMuMTE4LS4xMzUuMjI1LS4yNjkuMzQzLS4zOTJhMS4xMzQsMS4xMzQsMCwwLDAsMC0xLjczNGMtLjQ2LS40NjYtLjkyNi0uOTI1LTEuMzg4LTEuMzlhMS4xNjYsMS4xNjYsMCwwLDAtLjg2MS0uMzY4Yy0uNTc4LDAtLjg4MS40LTEuMjE0Ljc2Wm0tMTIuMDg0LDguODYzLDMuMi0uODYzLTIuMzM3LTIuMzMxWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCkiLz48cGF0aCBjbGFzcz0iYSIgZD0iTTgxMy45NDIsNDIyLjZsLS43ODktLjgsMy44MjEtMy44MTkuNzg0LjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTkuNjQ4IC01NS45NDcpIi8+PC9nPjwvc3ZnPicsCiAgICAgIGZpbHRlcl9zdGF0dXM6ICdBbGxUaWNrZXRzJywKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgcGFnZV9ubzogMSwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICB0b3RhbF9wYWdlczogbnVsbCwKICAgICAgbnVtYmVyX29mX3Jvd3M6IG51bGwsCiAgICAgIHRpY2tldHNfbGlzdDogW10sCiAgICAgIHNvcnRfc3RhdHVzOiAnQWxsJywKICAgICAgY29tcGFueV9saXN0OiBbXSwKICAgICAgcGFnZV9hcnJheTogW10sCiAgICAgIFVzZXJfY29tbWVudHM6IFtdLAogICAgICBjb21tZW50c19saXN0OiBbXSwKICAgICAgY29tbWVudF9pdGVtX2xpc3Q6IFtdLAogICAgICB0aWNrZXRfbnVtYmVyOiAiIiwKICAgICAgY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyOiAiIiwKICAgICAgdGlja2V0X2Rlc2NyaXB0aW9uOiAiIiwKICAgICAgbmV3X3RpY2tldF9jb21tZW50OiAiIiwKICAgICAgY3VycmVudF9pbWFnZV91cmw6ICIiLAogICAgICAvLyBjdXJyZW50X2ltYWdlX25hbWU6ICIiLAogICAgICBjdXJyZW50X2ltYWdlX25hbWVfaW5fY29tbWVudDoiIiwKICAgICAgaW1hZ2VzX2luX2N1cnJlbnRfY29tbWVudDogIiIsCiAgICAgIG5ld19pbWFnZV9uYW1lOiAiIiwKICAgICAgbmV3X2ltYWdlX2ZpbGU6ICIiLAogICAgICBpbWFnZV9maWxlOiAiIiwKICAgICAgc2VuZF9zb2x1dGlvbl90ZXh0OiAiIiwKICAgICAgdGlja2V0X2lzc3VlX25hbWU6ICIiLAogICAgICB0aWNrZXRfc3RhdHVzOiAiIiwKICAgICAgdGlja2V0X3NvbHV0aW9uOiAiIiwKICAgICAgaXNfc3RhdHVzOiBudWxsLAogICAgICBjdXJyZW50X3N0YXR1czogIiIsCiAgICAgIGlzX3N0YXR1c19jbG9zZWQ6IGZhbHNlLAogICAgICBzZWFyY2hfa2V5OiAiIiwKICAgICAgaXNFZGl0VGlja2V0U3RhdHVzOiBmYWxzZSwKICAgICAgaXNfRWRpdF9TdGF0dXM6IGZhbHNlLAogICAgICBjdXJyZW50X3RpY2tldF9zdGF0dXM6ICIiLAogICAgICBjb21wYW55X3RpY2tldHNfbGlzdDogW10sCiAgICAgIHNvcnRfY29tcGFueV9zdGF0dXM6ICdBbGwnLAogICAgICBpc19jb2xsYXBzZTogZmFsc2UsCiAgICAgIHNlbmRfYnlfY29tcGFueTogZmFsc2UsCiAgICAgIHJlcV9jb21wX2lkOiAiIiwKICAgICAgcmVxX2NvbXBfbmFtZTogIiIsCiAgICAgIHRpY2tldF9jb21wYW55X2lkOiIiLAogICAgICB0aWNrZXRfY29tcGFueV9uYW1lOiIiLAogICAgICBpc1Zpc2libGVTZWFyY2hDbGVhcjogZmFsc2UsCiAgICAgIGlzX3N1cGVyX2FkbWluOiBmYWxzZSwKICAgICAgaXNfZGV2ZWxvcGVyOiBmYWxzZSwKICAgICAgZGV2ZWxvcGVyc19saXN0OiBbXSwKICAgICAgYXNzaWduZWRfZGV2ZWxvcGVyOiAiIiwKICAgICAgbmV3X2ludGVybmFsX2NvbW1lbnQ6ICIiLAogICAgICBpc19pbnRlcm5hbF9jb21tZW50OiBmYWxzZSwKICAgICAgaW50ZXJuYWxfY29tbWVudHNfbGlzdDogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNfc2VuZF9idG5fZW5hYmxlKCkgewogICAgICBpZiAoQm9vbGVhbih0aGlzLnNlbmRfc29sdXRpb25fdGV4dCB8fCB0aGlzLm5ld19pbWFnZV9uYW1lIHx8IHRoaXMubmV3X3RpY2tldF9jb21tZW50IHx8IHRoaXMubmV3X2ludGVybmFsX2NvbW1lbnQpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaXNfcmVvcGVuX2J0bl9lbmFibGUoKSB7CiAgICAgIGlmIChCb29sZWFuKHRoaXMubmV3X3RpY2tldF9jb21tZW50IHx8IHRoaXMubmV3X2ltYWdlX25hbWUpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICgKICAgICAgIXRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSAmJgogICAgICB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIKICAgICkgewogICAgICB0b2FzdHIud2FybmluZyh0aGlzLnRsdCgnc2VsZWN0X2NvbXBhbnlfbmFtZV9tc2cyJykpOwogICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfcm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSkgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgIH0KICAgIHRoaXMuZ2V0X3RpY2tldF9kZXRhaWxzKCk7CiAgfSwKICB3YXRjaDogewogICAgZmlsdGVyX3N0YXR1cygpewogICAgICB0aGlzLnBhZ2Vfbm8gPSAxOwogICAgICB0aGlzLnBlcl9wYWdlID0gMjA7CiAgICAgIHRoaXMuaXNfY29sbGFwc2UgPSBmYWxzZTsKICAgICAgaWYodGhpcy5maWx0ZXJfc3RhdHVzID09PSAgJ0FsbFRpY2tldHMnKXsKICAgICAgICB0aGlzLmdldF90aWNrZXRfZGV0YWlscygpOyAgCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuZ2V0X2NvbXBhbnlfbGlzdCgpOwogICAgICB9CiAgICB9LAogIH0sCiAgbWV0aG9kcyA6IHsKICAgIHN3aXRjaF90b19pbnRlcm5hbF9jb21tZW50cygpIHsKICAgICAgaWYgKCF0aGlzLmlzX2ludGVybmFsX2NvbW1lbnQpIHsKICAgICAgICB0aGlzLmlzX2ludGVybmFsX2NvbW1lbnQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNfaW50ZXJuYWxfY29tbWVudCA9IGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0sCiAgICBjaGVja19jb2xsYXBzZShpbmRleCkgewogICAgICBpZiAoJCgnI2NvbGxhcHNlRXhhbXBsZV9fJyArIGluZGV4KS5pcygnLmNvbGxhcHNlLnNob3cnKSA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmlzX2NvbGxhcHNlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzX2NvbGxhcHNlID0gZmFsc2U7CiAgICAgICAgdGhpcy5zb3J0X2NvbXBhbnlfc3RhdHVzID0gJ0FsbCc7CiAgICAgIH0KICAgIH0sCiAgICB0cmltX3RpY2tldF9pc3N1ZSh2YWwxKSB7CiAgICAgIGlmICh2YWwxLmxlbmd0aCA+IDUwKSB7CiAgICAgICAgbGV0IHN0cjEgPSB2YWwxLnN1YnN0cmluZygwLCA1MCkgKyAiLi4uLiI7CiAgICAgICAgcmV0dXJuIHN0cjE7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbDE7CiAgICB9LAogICAgdHJpbV90aWNrZXRfZGVzY3JpcHRpb24oZGVzX25hbWUpewogICAgICBpZihkZXNfbmFtZS5sZW5ndGggPiA2MCl7CiAgICAgICAgbGV0IHRpY2tldF9kZXNfbmFtZSA9IGRlc19uYW1lLnN1YnN0cmluZygwLDUwKSArICIuLi4iOwogICAgICAgIHJldHVybiB0aWNrZXRfZGVzX25hbWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGRlc19uYW1lOwogICAgfSwKICAgIGRhdGVfZm9ybWF0aW5nKHN1Yl9kYXRlKSB7CiAgICAgIHJldHVybiBtb21lbnQoc3ViX2RhdGUpLmZvcm1hdCgiRCBNTU0gWVlZWSBISDptbSBhIik7CiAgICB9LAogICAgZm9ybWF0X2RhdGUoZGF0ZSkgewogICAgICBpZihkYXRlID09IG51bGwpIHsKICAgICAgICByZXR1cm4gIk4vQSIKICAgICAgfQogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiRG8gTU1NIFlZWVkiKTsKICAgIH0sCiAgICBlZGl0X3RpY2tldF9zdGF0dXMoKSB7CiAgICAgIGlmICghdGhpcy5pc0VkaXRUaWNrZXRTdGF0dXMpIHsKICAgICAgICB0aGlzLmlzRWRpdFRpY2tldFN0YXR1cyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0VkaXRUaWNrZXRTdGF0dXMgPSBmYWxzZTsKICAgICAgICAvLyB0aGlzLmxvYWRfaW50ZW50KCk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfSwKICAgIGVkaXRfYXNzaWduX3N0YXR1cygpIHsKICAgICAgaWYgKCF0aGlzLmlzX0VkaXRfU3RhdHVzKSB7CiAgICAgICAgdGhpcy5pc19FZGl0X1N0YXR1cyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc19FZGl0X1N0YXR1cyA9IGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0sCiAgICBzYXZlX3RpY2tldF9zdGF0dXMoKSB7CgogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRfdGlja2V0X3N0YXR1cyA9PT0gIiIpIHsKICAgICAgICB0aGlzLmN1cnJlbnRfdGlja2V0X3N0YXR1cyA9IHRoaXMuY3VycmVudF9zdGF0dXM7CgogICAgICB9CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICBhcGlfY2FsbHMuc3VwcG9ydF90aWNrZXQoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICBpc19lZGl0OiB0cnVlLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICByZXNwb25zZTogewogICAgICAgICAgICAgICAgdGlja2V0X251bWJlcjogdGhpcy5jdXJyZW50X3NlbGVjdGVkX3RpY2tldF9udW1iZXIsCiAgICAgICAgICAgICAgICB1cGRhdGVfc3RhdHVzOiB0aGlzLmN1cnJlbnRfdGlja2V0X3N0YXR1cywKICAgICAgICAgICAgICAgIHNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgdGlja2V0X2NvbXBhbnlfaWQ6IHRoaXMudGlja2V0X2NvbXBhbnlfaWQgPT0gIiIgPyB0aGlzLnJlcV9jb21wX2lkIDogdGhpcy50aWNrZXRfY29tcGFueV9pZCwKICAgICAgICAgICAgICAgIHRpY2tldF9jb21wYW55X25hbWU6dGhpcy50aWNrZXRfY29tcGFueV9uYW1lID09ICIiID8gdGhpcy5yZXFfY29tcF9uYW1lIDogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgYXNzaWduX3RvOnRoaXMuYXNzaWduZWRfZGV2ZWxvcGVyIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgICAgICAvLyBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLlRJQ0tFVF9VUERBVEVELk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9zdGF0dXNfdXBkYXRlZCcpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgaWYgKHRoaXMuc2VuZF9ieV9jb21wYW55ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldF9jb21wYW55X3RpY2tldHModGhpcy5yZXFfY29tcF9uYW1lLCB0aGlzLnJlcV9jb21wX2lkKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5VTlNVQ0NFU1NGVUxfREJfT1BFUkFUSU9OLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSl7CiAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgaWYgKHRoaXMuc2VuZF9ieV9jb21wYW55ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldF9jb21wYW55X3RpY2tldHModGhpcy5yZXFfY29tcF9uYW1lLCB0aGlzLnJlcV9jb21wX2lkKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5hcGlfc3RhdHVzX2NvZGUuVU5TVUNDRVNTRlVMX0RCX1FVRVJZLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSl7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICh0aGlzLnNlbmRfYnlfY29tcGFueSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfY29tcGFueV90aWNrZXRzKHRoaXMucmVxX2NvbXBfbmFtZSwgdGhpcy5yZXFfY29tcF9pZCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0X3RpY2tldF9kZXRhaWxzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICAkKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICAgIC8vJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgICAvL3RoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAgIGlmICh0aGlzLnNlbmRfYnlfY29tcGFueSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfY29tcGFueV90aWNrZXRzKHRoaXMucmVxX2NvbXBfbmFtZSwgdGhpcy5yZXFfY29tcF9pZCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0X3RpY2tldF9kZXRhaWxzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9pbnRlcm5hbF9zZXJ2ZXIyJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICAgIHRoaXMuY2xvc2VfbW9kYWwoJ3Jlc19uX2ludF9zYXZlJykKICAgICAgICAgIAogICAgfSwKICAgIG9wZW5fY29tbWVudF9tb2RlbChpbmRleCwga2V5KSB7CiAgICAgIGlmIChrZXkgPT09IG51bGwpIHsKICAgICAgICB0aGlzLmNvbW1lbnRzX2xpc3QgPSBbXTsKICAgICAgICB0aGlzLmludGVybmFsX2NvbW1lbnRzX2xpc3QgPSBbXTsKICAgICAgICB0aGlzLmNvbW1lbnRzX2xpc3QgPSBCb29sZWFuKHRoaXMudGlja2V0c19saXN0W2luZGV4XS5Db21tZW50cykKICAgICAgICAgID8gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLkNvbW1lbnRzCiAgICAgICAgICA6IFtdOwogICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyID0gdGhpcy50aWNrZXRzX2xpc3RbCiAgICAgICAgICBpbmRleAogICAgICAgIF0uVGlja2V0TnVtYmVyOwogICAgICAgIHRoaXMudGlja2V0X2NvbXBhbnlfaWQgPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uQ29tcGFueUlkOwogICAgICAgIHRoaXMudGlja2V0X2NvbXBhbnlfbmFtZSA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5Db21wYW55TmFtZTsKICAgICAgICB0aGlzLnRpY2tldF9kZXNjcmlwdGlvbiA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5EZXNjcmlwdGlvbjsKICAgICAgICB0aGlzLnRpY2tldF9pc3N1ZV9uYW1lID0gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLlRpY2tldElzc3VlOwogICAgICAgIHRoaXMudGlja2V0X3N0YXR1cyA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5DdXJyZW50U3RhdHVzOwogICAgICAgIHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdCA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5JbnRlcm5hbENvbW1lbnRzOwogICAgICAgIHRoaXMuYXNzaWduZWRfZGV2ZWxvcGVyID0gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLkFzc2lnbmVkVG87CiAgICAgICAgaWYgKHRoaXMudGlja2V0c19saXN0W2luZGV4XS5Tb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLnRpY2tldF9zb2x1dGlvbiA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5Tb2x1dGlvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy50aWNrZXRfc29sdXRpb24gPSAiIjsKICAgICAgICB9CiAgICAgICAgaWYodGhpcy50aWNrZXRfc3RhdHVzID09PSAiQ2xvc2VkIikKICAgICAgICB7CiAgICAgICAgICB0aGlzLmlzX3N0YXR1c19jbG9zZWQgPSB0cnVlOwogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy5pc19zdGF0dXNfY2xvc2VkID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuY3VycmVudF9zdGF0dXMgPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uQ3VycmVudFN0YXR1czsKICAgICAgICB0aGlzLnNlbmRfYnlfY29tcGFueSA9IGZhbHNlOwogICAgICB9ICAKICAgICAgZWxzZSBpZiAoa2V5ID09PSAnQ29tcGFueV90aWNrZXRzJykgewogICAgICAgIHRoaXMuY29tbWVudHNfbGlzdCA9IFtdOwogICAgICAgIHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdCA9IFtdOwogICAgICAgIHRoaXMuY29tbWVudHNfbGlzdCA9IEJvb2xlYW4odGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uQ29tbWVudHMpCiAgICAgICAgICA/IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkNvbW1lbnRzCiAgICAgICAgICA6IFtdOwogICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFsKICAgICAgICAgIGluZGV4CiAgICAgICAgXS5UaWNrZXROdW1iZXI7CiAgICAgICAgdGhpcy50aWNrZXRfZGVzY3JpcHRpb24gPSB0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0W2luZGV4XS5EZXNjcmlwdGlvbjsKICAgICAgICB0aGlzLnRpY2tldF9pc3N1ZV9uYW1lID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uVGlja2V0SXNzdWU7CiAgICAgICAgdGhpcy50aWNrZXRfc3RhdHVzID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uQ3VycmVudFN0YXR1czsKICAgICAgICB0aGlzLmFzc2lnbmVkX2RldmVsb3BlciA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkFzc2lnbmVkVG87CiAgICAgICAgdGhpcy5pbnRlcm5hbF9jb21tZW50c19saXN0ID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uSW50ZXJuYWxDb21tZW50czsKICAgICAgICB0aGlzLnJlcV9jb21wX2lkID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uQ29tcGFueUlkOwogICAgICAgIHRoaXMucmVxX2NvbXBfbmFtZSA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkNvbXBhbnlOYW1lOwogICAgICAgIGlmICh0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0W2luZGV4XS5Tb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLnRpY2tldF9zb2x1dGlvbiA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLlNvbHV0aW9uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnRpY2tldF9zb2x1dGlvbiA9ICIiOwogICAgICAgIH0KICAgICAgICBpZih0aGlzLnRpY2tldF9zdGF0dXMgPT09ICJDbG9zZWQiKQogICAgICAgIHsKICAgICAgICAgIHRoaXMuaXNfc3RhdHVzX2Nsb3NlZCA9IHRydWU7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLmlzX3N0YXR1c19jbG9zZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jdXJyZW50X3N0YXR1cyA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkN1cnJlbnRTdGF0dXM7CiAgICAgICAgdGhpcy5zZW5kX2J5X2NvbXBhbnkgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZ2V0X3RpY2tldF9kZXRhaWxzKCkgewogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgIC5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgZmlsdGVyX2J5OiB0aGlzLnNvcnRfc3RhdHVzLAogICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8KICAgICAgfSwKICAgICAgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgIHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyMycpCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKXsKICAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfZGF0YTsKICAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgIHRoaXMudGlja2V0c19saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLlRpY2tldDsKICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgdGhpcy5pc19kZXZlbG9wZXIgPSByZXNwb25zZS5kYXRhLmRhdGEuSXNEZXZlbG9wZXIgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgIHRoaXMuZGV2ZWxvcGVyc19saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLkRldmVsb3BlcnNMaXN0OwogICAgICAgICAgdGhpcy5pc19zdXBlcl9hZG1pbiA9IHJlc3BvbnNlLmRhdGEuZGF0YS5Jc1N1cGVyQWRtaW4gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLk5PX0VYSVNUSU5HX1RJQ0tFVC5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIHRoaXMudGlja2V0c19saXN0ID0gW107CiAgICAgICAgfSAgZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyNCcpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBzZW5kX3NvbHV0aW9uKCl7CiAgICAgIGlmKHRoaXMuc2VuZF9zb2x1dGlvbl90ZXh0ICE9ICIiICYmIHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzID09PSAnQ2xvc2VkJyl7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgYXBpX2NhbGxzLnN1cHBvcnRfdGlja2V0KCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgaXNfZWRpdDogdHJ1ZSwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IHsKICAgICAgICAgICAgICAgIHRpY2tldF9udW1iZXI6IHRoaXMuY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyLAogICAgICAgICAgICAgICAgc29sdXRpb246IHRoaXMuc2VuZF9zb2x1dGlvbl90ZXh0LAogICAgICAgICAgICAgICAgdXBkYXRlX3N0YXR1czogdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMsCiAgICAgICAgICAgICAgICB0aWNrZXRfY29tcGFueV9pZDogdGhpcy50aWNrZXRfY29tcGFueV9pZCA9PSAiIiA/IHRoaXMucmVxX2NvbXBfaWQgOiB0aGlzLnRpY2tldF9jb21wYW55X2lkLAogICAgICAgICAgICAgICAgdGlja2V0X2NvbXBhbnlfbmFtZTp0aGlzLnRpY2tldF9jb21wYW55X25hbWUgPT0gIiIgPyB0aGlzLnJlcV9jb21wX2lkIDogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgICAgICAvLyBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLlRJQ0tFVF9VUERBVEVELk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9zdGF0dXNfdXBkYXRlZDEnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSkudGhlbihyZXN1bHQgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VuZF9ieV9jb21wYW55ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldF9jb21wYW55X3RpY2tldHModGhpcy5yZXFfY29tcF9uYW1lLCB0aGlzLnJlcV9jb21wX2lkKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5JTUdfRFVQTElDQVRFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDoKICAgICAgICAgICAgICAgICAgdGhpcy50bHQoJ2FkbWluX3RpY2tldF9pbWdfYWxyZWFkeV9mb3VuZCcpLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRpbWVyOiAzMDAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5hcGlfc3RhdHVzX2NvZGUuVU5TVUNDRVNTRlVMX0RCX09QRVJBVElPTi5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0ZXh0OgogICAgICAgICAgICAgICAgICB0aGlzLnRsdCgnYWRtaW5fdGlja2V0X2Vycm9yX29jY3VycmVkMycpLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRpbWVyOiAzMDAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5VTlNVQ0NFU1NGVUxfREJfUVVFUlkuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKXsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAgICAgLy90aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRtaW5fdGlja2V0X2ludGVybmFsX3NlcnZlcjYnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jbG9zZV9tb2RhbCgnYnRuX3NlbmRfaWQnKQogICAgICB9ZWxzZXsKICAgICAgfQoKICAgIH0sCiAgICBvcGVuX2ltYWdlX21vZGVsKGluZGV4KSB7CiAgICAgIGlmICghdGhpcy5pc19pbnRlcm5hbF9jb21tZW50ICYmIHRoaXMuY29tbWVudHNfbGlzdFtpbmRleF0uaW1hZ2VfdXJsICE9IG51bGwpIHsKICAgICAgICB0aGlzLmltYWdlc19pbl9jdXJyZW50X2NvbW1lbnQgPSB0aGlzLmNvbW1lbnRzX2xpc3RbaW5kZXhdLmltYWdlX3VybDsKICAgICAgICB0aGlzLmN1cnJlbnRfaW1hZ2VfbmFtZV9pbl9jb21tZW50ID0gdGhpcy5jb21tZW50c19saXN0W2luZGV4XS5pbWFnZV9uYW1lOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNfaW50ZXJuYWxfY29tbWVudCAmJiB0aGlzLmludGVybmFsX2NvbW1lbnRzX2xpc3RbaW5kZXhdLmltYWdlX3VybCAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5pbWFnZXNfaW5fY3VycmVudF9jb21tZW50ID0gdGhpcy5pbnRlcm5hbF9jb21tZW50c19saXN0W2luZGV4XS5pbWFnZV91cmw7CiAgICAgICAgdGhpcy5jdXJyZW50X2ltYWdlX25hbWVfaW5fY29tbWVudCA9IHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdFtpbmRleF0uaW1hZ2VfbmFtZTsKICAgICAgfQogICAgfSwKICAgIFVwbG9hZF9pbWFnZV9maWxlKGV2ZW50KSB7CiAgICAgIGxldCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgaWYgKGZpbGVzLnNpemUgPiAyMDk3MTUyKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRtaW5fdGlja2V0X3VwbG9hZF9pbWcnKSwKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMTAwMDAsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubmV3X2ltYWdlX25hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTsKICAgICAgdGhpcy5uZXdfaW1hZ2VfZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS50eXBlOwoKICAgICAgaWYgKHRoaXMubmV3X2ltYWdlX25hbWUgIT0gdGhpcy5jdXJyZW50X2ltYWdlX25hbWVfaW5fY29tbWVudCkgewogICAgICB9CiAgICAgIGlmICh0aGlzLm5ld19pbWFnZV9maWxlID09ICJpbWFnZS9wbmciKSB7CiAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlcywgdGhpcy5uZXdfaW1hZ2VfZmlsZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5uZXdfaW1hZ2VfZmlsZSA9PSAiaW1hZ2UvanBlZyIpIHsKICAgICAgICB0aGlzLmNyZWF0ZUltYWdlKGZpbGVzLCB0aGlzLm5ld19pbWFnZV9maWxlKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm5ld19pbWFnZV9maWxlID09ICJpbWFnZS9qcGciKSB7CiAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlcywgdGhpcy5uZXdfaW1hZ2VfZmlsZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9zZWxlY3RfaW1nX3R5cGUnKSwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVJbWFnZShmaWxlLCB0eXBlKSB7CiAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7CiAgICAgICAgdGhpcy5pbWFnZV9maWxlID0gZS50YXJnZXQucmVzdWx0LnNwbGl0KCJiYXNlNjQsIilbMV07CiAgICAgIH07CiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgfSwKICAgIHNlbmRfaW50ZXJuYWxfdGlja2V0X2NvbW1lbnRzKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5uZXdfaW50ZXJuYWxfY29tbWVudCAhPSAiIiB8fAogICAgICAgICh0aGlzLm5ld19pbWFnZV9uYW1lICE9ICIiICYmIHRoaXMubmV3X2ltYWdlX2ZpbGUgIT0gIiIpCiAgICAgICkgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9hZGRpbmdfeW91cl9jb21tZW50JyksCiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIGlzX2VkaXQ6IHRydWUsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIHJlc3BvbnNlOiB7CiAgICAgICAgICAgICAgICB0aWNrZXRfbnVtYmVyOiB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfdGlja2V0X251bWJlciwKICAgICAgICAgICAgICAgIHVwZGF0ZV9zdGF0dXM6IHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzID8gdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMgOiBudWxsLAogICAgICAgICAgICAgICAgbmV3X2ludGVybmFsX2NvbW1lbnQ6IHRoaXMubmV3X2ludGVybmFsX2NvbW1lbnQgPyB0aGlzLm5ld19pbnRlcm5hbF9jb21tZW50IDogbnVsbCwKICAgICAgICAgICAgICAgIHRpY2tldF9pbWdfbmFtZTogdGhpcy5uZXdfaW1hZ2VfbmFtZSA/IHRoaXMubmV3X2ltYWdlX25hbWUgOiBudWxsLAogICAgICAgICAgICAgICAgdGlja2V0X2ltZ19maWxlOiB0aGlzLmltYWdlX2ZpbGUgPyB0aGlzLmltYWdlX2ZpbGUgOiBudWxsLAogICAgICAgICAgICAgICAgdGlja2V0X2NvbXBhbnlfaWQ6IHRoaXMudGlja2V0X2NvbXBhbnlfaWQgPT0gIiIgPyB0aGlzLnJlcV9jb21wX2lkIDogdGhpcy50aWNrZXRfY29tcGFueV9pZCwKICAgICAgICAgICAgICAgIHRpY2tldF9jb21wYW55X25hbWU6dGhpcy50aWNrZXRfY29tcGFueV9uYW1lID09ICIiID8gdGhpcy5yZXFfY29tcF9uYW1lIDogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgICAgICAvLyBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLlRJQ0tFVF9VUERBVEVELk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9jb21tZW50c19hZGRlZCcpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAgIAogICAgICAgICAgICAgIC8vICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpOwogICAgICAgICAgICAgIC8vICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VuZF9ieV9jb21wYW55ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldF9jb21wYW55X3RpY2tldHModGhpcy5yZXFfY29tcF9uYW1lLCB0aGlzLnJlcV9jb21wX2lkKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hcGlfc3RhdHVzX2NvZGUuSU1HX0RVUExJQ0FURS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICAgIHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW1nX2FscmVhZHlfZm91bmQxJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5VTlNVQ0NFU1NGVUxfREJfUVVFUlkuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKXsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8kKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICAvL3RoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRtaW5fdGlja2V0X2ludGVybmFsX3NlcnZlcjgnKSwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jbG9zZV9tb2RhbCgnYnRuX3NlbmRfaWQnKQogICAgICB9CiAgICB9LAogICAgc2VuZF90aWNrZXRfY29tbWVudHMoKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLm5ld190aWNrZXRfY29tbWVudCAhPSAiIiB8fAogICAgICAgICh0aGlzLm5ld19pbWFnZV9uYW1lICE9ICIiICYmIHRoaXMubmV3X2ltYWdlX2ZpbGUgIT0gIiIpCiAgICAgICkgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9hZGRpbmdfeW91cl9jb21tZW50JyksCiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIGlzX2VkaXQ6IHRydWUsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIHJlc3BvbnNlOiB7CiAgICAgICAgICAgICAgICB0aWNrZXRfbnVtYmVyOiB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfdGlja2V0X251bWJlciwKICAgICAgICAgICAgICAgIHVwZGF0ZV9zdGF0dXM6IHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzID8gdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMgOiBudWxsLAogICAgICAgICAgICAgICAgbmV3X2NvbW1lbnQ6IHRoaXMubmV3X3RpY2tldF9jb21tZW50CiAgICAgICAgICAgICAgICAgID8gdGhpcy5uZXdfdGlja2V0X2NvbW1lbnQKICAgICAgICAgICAgICAgICAgOiBudWxsLAogICAgICAgICAgICAgICAgdGlja2V0X2ltZ19uYW1lOiB0aGlzLm5ld19pbWFnZV9uYW1lID8gdGhpcy5uZXdfaW1hZ2VfbmFtZSA6IG51bGwsCiAgICAgICAgICAgICAgICB0aWNrZXRfaW1nX2ZpbGU6IHRoaXMuaW1hZ2VfZmlsZSA/IHRoaXMuaW1hZ2VfZmlsZSA6IG51bGwsCiAgICAgICAgICAgICAgICB0aWNrZXRfY29tcGFueV9pZDogdGhpcy50aWNrZXRfY29tcGFueV9pZCA9PSAiIiA/IHRoaXMucmVxX2NvbXBfaWQgOiB0aGlzLnRpY2tldF9jb21wYW55X2lkLAogICAgICAgICAgICAgICAgdGlja2V0X2NvbXBhbnlfbmFtZTp0aGlzLnRpY2tldF9jb21wYW55X25hbWUgPT0gIiIgPyB0aGlzLnJlcV9jb21wX25hbWUgOiB0aGlzLnRpY2tldF9jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgICAgIC8vIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICBpZiAodGhpcy5hcGlfc3RhdHVzX2NvZGUuVElDS0VUX1VQREFURUQuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRtaW5fdGlja2V0X2NvbW1lbnRzX2FkZGVkJyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgLy8gJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7CiAgICAgICAgICAgICAgLy8gJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZW5kX2J5X2NvbXBhbnkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0X2NvbXBhbnlfdGlja2V0cyh0aGlzLnJlcV9jb21wX25hbWUsIHRoaXMucmVxX2NvbXBfaWQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldF90aWNrZXRfZGV0YWlscygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5JTUdfRFVQTElDQVRFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDoKICAgICAgICAgICAgICAgICAgdGhpcy50bHQoJ2FkbWluX3RpY2tldF9pbWdfYWxyZWFkeV9mb3VuZDEnKSwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuYXBpX3N0YXR1c19jb2RlLlVOU1VDQ0VTU0ZVTF9EQl9RVUVSWS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdhZG1pbl90aWNrZXRfZXJyb3Jfb2NjdXJyZWQ1JyksCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAgIC8vdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyOCcpLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNsb3NlX21vZGFsKCdidG5fc2VuZF9pZCcpCiAgICAgIH0KICAgIH0sCiAgICBlbXB0eV92YXJpYWJsZSgpIHsKICAgICAgdGhpcy5jb21tZW50c19saXN0ID0gWyIiXTsKICAgICAgdGhpcy5pbnRlcm5hbF9jb21tZW50c19saXN0ID0gWyIiXQogICAgICB0aGlzLmNvbW1lbnRfaXRlbV9saXN0ID0gWyIiXTsKICAgICAgdGhpcy5uZXdfdGlja2V0X2NvbW1lbnQgPSAiIjsKICAgICAgdGhpcy5uZXdfaW50ZXJuYWxfY29tbWVudCA9ICIiOwogICAgICB0aGlzLnNlbmRfc29sdXRpb25fdGV4dCA9ICIiOwogICAgICB0aGlzLm5ld19pbWFnZV9uYW1lID0gIiI7CiAgICAgIHRoaXMubmV3X2ltYWdlX2ZpbGUgPSAiIjsKICAgICAgdGhpcy5maWxlX2NvbnRlbnQyID0gIiI7CiAgICAgIHRoaXMuaXNFZGl0VGlja2V0U3RhdHVzID0gZmFsc2U7CiAgICAgIHRoaXMuaXNfRWRpdF9TdGF0dXMgPSBmYWxzZTsKICAgICAgdGhpcy5hc3NpZ25lZF9kZXZlbG9wZXIgPSAiIjsKICAgICAgdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMgPSAiIjsKICAgICAgdGhpcy50aWNrZXRfY29tcGFueV9pZCA9ICcnOwogICAgICB0aGlzLnRpY2tldF9jb21wYW55X25hbWUgPSAnJzsKICAgIH0sCiAgICBnZXRfY29tcGFueV9saXN0KCkgewogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zCiAgICAgIC5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgc29ydF9ieV9jb21wYW55OiB0cnVlLAogICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8KICAgICAgfSwKICAgICAgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgIHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyOScpCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSBpZih0aGlzLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpewogICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9kYXRhOwogICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlOwogICAgICAgICAgdGhpcy5jb21wYW55X2xpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEuUmVzcG9uc2VMaXN0OwogICAgICAgICAgdGhpcy5zZXRwYWdpbmF0aW9uKHRoaXMucGFnZV9ubyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9pbnRlcm5hbF9zZXJ2ZXJfbXNnMScpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRfY29tcGFueV90aWNrZXRzKGtleTEsIGtleTIpIHsKICAgICAgdGhpcy5yZXFfY29tcF9uYW1lID0ga2V5MTsKICAgICAgdGhpcy5yZXFfY29tcF9pZCA9IGtleTI7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgLnBvc3QoYXBpX2NhbGxzLnN1cHBvcnRfdGlja2V0KCksIHsKICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICBmaWx0ZXJfYnk6IHRoaXMuc29ydF9jb21wYW55X3N0YXR1cywKICAgICAgICByZXFfY29tcGFueV9uYW1lOiBrZXkxLAogICAgICAgIHJlcV9jb21wYW55X2lkOiBrZXkyLAogICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8KICAgICAgfSwKICAgICAgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIGlmICh0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgIHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyX21zZzInKQogICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgLy8gdGhpcy5yZXFfY29tcF9pZCA9ICIiOwogICAgICAgICAgLy8gdGhpcy5yZXFfY29tcF9uYW1lID0gIiI7CiAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX2RhdGE7CiAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX3BhZ2U7CiAgICAgICAgICB0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLlRpY2tldDsKICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5hcGlfc3RhdHVzX2NvZGUuTk9fRVhJU1RJTkdfVElDS0VULk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdCA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyX21zZzMnKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgcGFnZV9yZXF1aXJlKHBhZ2UpIHsKICAgICAgaWYgKHBhZ2UgPT0gMCB8fCBwYWdlID09IHRoaXMudG90YWxfcGFnZXMgKyAxKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocGFnZSA9PSAiLi4ucyIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIi4uLmwiKSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKHRoaXMudG90YWxfcGFnZXMgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBpZiAodGhpcy5maWx0ZXJfc3RhdHVzID09PSAnQWxsVGlja2V0cycpewogICAgICAgICAgdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICB9IGVsc2UgaWYodGhpcy5pc19jb2xsYXBzZSkgewogICAgICAgICAgdGhpcy5nZXRfY29tcGFueV90aWNrZXRzKHRoaXMucmVxX2NvbXBfbmFtZSwgdGhpcy5yZXFfY29tcF9pZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZ2V0X2NvbXBhbnlfbGlzdCgpOyAKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgICAgdGhpcy5wYWdlX2FycmF5ID0gW107CiAgICAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG90YWxfcGFnZXMgLSA0OyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPD0gNCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZV9ubyArIDM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPj0gdGhpcy50b3RhbF9wYWdlcyAtIDQpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgICAgIGZvciAobGV0IGkgPSBwYWdlX25vIC0gMzsgaSA8PSBwYWdlX25vICsgMzsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["SuperAdminTicketDashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAu4BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SuperAdminTicketDashboard.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Customer Support","sourcesContent":["<template>\n  <div>\n    <div class=\"spinner\" id=\"spinner\" v-show=\"spinnerOn\"></div>\n    <div class=\"dash-cont\">\n      <div class=\"container-fluid\">\n        <div class=\"card dash-card\">\n          <div class=\"card-header d-block d-sm-flex flex-wrap\">\n            <h4 class=\"mb-sm-0\">{{tlt('admin_ticket_tickets_page_title')}}</h4>\n            <div class=\"radio\"\n              style=\"margin-left: 1.5rem;margin-top: 2px;\">\n              <label>\n                <input\n                  type=\"radio\"\n                  v-model=\"filter_status\"\n                  value=\"AllTickets\"\n                  id=\"filter_status_success\"\n                />\n                <span class=\"icn\" id=\"filter_portal_user_radio\"></span>\n                {{tlt('admin_ticket_all_ticket_label')}}\n              </label>\n              <label>\n                <input\n                  type=\"radio\"\n                  v-model=\"filter_status\"\n                  value=\"CompanyTickets\"\n                  id=\"filter_status_failure\"\n                />\n                <span class=\"icn\"></span> {{tlt('admin_ticket_company_label')}}\n              </label>\n            </div>\n            <div class=\"form-group\" v-if=\"filter_status === 'AllTickets'\"\n              style=\"margin-left: auto;\">\n                <select\n                  @change=\"get_ticket_details\"\n                  v-model=\"sort_status\"\n                  class=\"form-control\"\n                  style=\"height: 34px; padding: 5px;\"\n                  id=\"select_status\"\n                >\n                  <option disabled value=''>{{tlt('status_label')}}</option>\n                  <option value=\"All\">{{tlt('admin_ticket_dropdown_all_label')}}</option>\n                  <option value=\"Open\">{{tlt('admin_ticket_dropdown_open_label')}}</option>\n                  <option value=\"Closed\">{{tlt('admin_ticket_dropdown_closed')}}</option>\n                </select>\n            </div>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"table-box\">\n              <div class=\"table-responsive\" v-show=\"Boolean(tickets_list.length > 0\n              || tickets_list.length != undefined)\">\n                <table class=\"table\" v-if=\"filter_status === 'AllTickets'\">\n                  <thead>\n                    <tr>\n                      <th scope=\"col\">#</th>\n                      <th scope=\"col\">{{tlt('admin_ticket_company_name_label')}}</th>\n                      <th scope=\"col\">{{tlt('admin_ticket_issue_name_label')}}</th>\n                      <th scope=\"col\">{{tlt('admin_ticket_created_date_label')}}</th>\n                      <th scope=\"col\">{{tlt('admin_ticket_status_label')}}</th>\n                      <th scope=\"col\">{{tlt('admin_ticket_details_label')}}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"(ticket, index) in tickets_list\" :key=\"index\">\n                      <td>{{index+1}}</td>\n                      <td>{{ticket.CompanyName}}</td>\n                      <td\n                      :title=\"ticket.TicketIssue\" \n                      style=\"cursor: pointer;\">\n                        {{trim_ticket_issue(ticket.TicketIssue)}}\n                      </td>\n                      <td class=\"text-center\">{{format_date(ticket.CreatedDate)}}</td>\n                      <td\n                        class=\"text-center\"\n                        :style=\"ticket.CurrentStatus === 'Open' ? \n                        'color: #ff1a1a; font-weight: bold;':\n                        'color: #064; font-weight: bold;'\">\n                        {{ticket.CurrentStatus}}\n                      </td>\n                      <td class=\"text-center\" style=\"cursor: pointer;\">\n                        <a\n                          class=\"view-model\"\n                          href=\"#\"\n                          data-toggle=\"modal\"\n                          data-target=\"#ticketModelDetails\"\n                          @click=\"open_comment_model(index, null)\"\n                        >{{tlt('view_label')}}\n                        </a>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n                <table class=\"table\" v-if=\"filter_status === 'CompanyTickets'\">\n                  <thead>\n                    <tr>\n                      <th scope=\"col\">#</th>\n                      <th scope=\"col\">{{tlt('company_level_company_name_label')}}</th>\n                      <th scope=\"col\" v-show=\"!is_collapse\">{{tlt('company_level_open_label')}}</th>\n                      <th scope=\"col\" v-show=\"!is_collapse\">{{tlt('company_level_closed')}}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"(item, index) in company_list\" :key=\"index\">\n                      <td>{{index+1}}</td>\n                      <td style=\"text-align: -webkit-center;\">\n                        <tr class=\"d-block text-center\">\n                          <a\n                            class=\"btn btn-primaryy border-0\"\n                            data-toggle=\"collapse\"\n                            :href=\"'#collapseExample__' + index\"\n                            role=\"button\"\n                            style=\"color: #273679;\"\n                            aria-expanded=\"false\"\n                            :aria-controls=\"'collapseExample__' + index\"\n                            @click=\"check_collapse(index), get_company_tickets(item.CompanyName, item.CompanyId)\"\n                          >\n                            {{item.CompanyName}}</a> \n                        </tr>\n                        <tr :id=\"'collapseExample__' + index\"\n                         class=\"collapse\"\n                         data-parent=\"table\">\n                          <div>\n                            <div class=\"table-box\">\n                              <select\n                                v-show=\"is_collapse\"\n                                @change=\"get_company_tickets(item.CompanyName, item.CompanyId)\"\n                                v-model=\"sort_company_status\"\n                                class=\"form-control\"\n                                style=\"height: 34px; padding: 5px;margin: 3px 0px;\n                                  width: 90px;margin-left: auto;margin-bottom: 0.5rem;\"\n                                id=\"select_status\"\n                              >\n                                <option disabled value=''>Status</option>\n                                <option value=\"All\">{{tlt('company_level_dropdown_all_label')}}</option>\n                                <option value=\"Open\">{{tlt('company_level_dropdown_open_label')}}</option>\n                                <option value=\"Closed\">{{tlt('company_level_dropdown_closed')}}</option>\n                              </select>\n                              <div class=\"table-responsive\" v-show=\"Boolean(company_tickets_list.length > 0\n                                || company_tickets_list.length != undefined)\">\n                                <table class=\"table\">\n                                  <thead>\n                                    <tr>\n                                      <th scope=\"col\">#</th>\n                                      <th scope=\"col\">{{tlt('company_level_t_number_label')}}</th>\n                                      <th scope=\"col\">{{tlt('company_level_t_issue_label')}}</th>\n                                      <th scope=\"col\">{{tlt('company_level_t_date_label')}}</th>\n                                      <th scope=\"col\">{{tlt('company_level_t_status_label')}}</th>\n                                      <th scope=\"col\">{{tlt('company_level_t_details_label')}}</th>\n                                    </tr>\n                                  </thead>\n                                  <tbody>\n                                    <tr v-for=\"(ticket, index1) in company_tickets_list\" :key=\"index1\">\n                                      <td>{{index1+1}}</td>\n                                      <td>{{ticket.TicketNumber}}</td>\n                                      <td\n                                      :title=\"ticket.TicketIssue\" \n                                      style=\"cursor: pointer;\">\n                                        {{trim_ticket_issue(ticket.TicketIssue)}}\n                                      </td>\n                                      <td class=\"text-center\">{{format_date(ticket.CreatedDate)}}</td>\n                                      <td\n                                        class=\"text-center\"\n                                        :style=\"ticket.CurrentStatus === 'Open' ? \n                                        'color: #ff1a1a; font-weight: bold;':\n                                        'color: #064; font-weight: bold;'\">\n                                        {{ticket.CurrentStatus}}\n                                      </td>\n                                      <td class=\"text-center\" style=\"cursor: pointer;\">\n                                        <a\n                                          class=\"view-model\"\n                                          href=\"#\"\n                                          data-toggle=\"modal\"\n                                          data-target=\"#ticketModelDetails\"\n                                          @click=\"open_comment_model(index1, 'Company_tickets')\"\n                                        >{{tlt('view_label')}}\n                                        </a>\n                                      </td>\n                                    </tr>\n                                  </tbody>\n                                </table>\n                              </div>\n                              <div v-show=\"Boolean(company_tickets_list.length === 0) && !spinnerOn\">\n                                <p class=\"text-center\">\n                                  <strong>\n                                    {{tlt('company_level_no_tickets_label')}}.</strong\n                                  >\n                                </p>\n                              </div> \n                            </div>\n                            <div v-if=\"company_tickets_list.length !== 0\" class=\"pagin-table\" style=\"margin-top: 2%; margin-bottom: 4%\">\n                              <nav aria-label=\"Page navigation example\">\n                                <ul class=\"pagination justify-content-center\">\n                                  <li class=\"page-item\">\n                                    <a\n                                      class=\"page-link\"\n                                      href=\"#\"\n                                      @click=\"page_require(page_no - 1)\"\n                                    >\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        width=\"8.667\"\n                                        height=\"15.204\"\n                                        viewBox=\"0 0 8.667 15.204\"\n                                      >\n                                        <g\n                                          id=\"arrow-point-to-left\"\n                                          transform=\"translate(105.806 15.204) rotate(180)\"\n                                        >\n                                          <path\n                                            id=\"Path_1136\"\n                                            data-name=\"Path 1136\"\n                                            d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                                            transform=\"translate(0 0)\"\n                                            fill=\"#9499ae\"\n                                          />\n                                        </g>\n                                      </svg>\n                                    </a>\n                                  </li>\n                                  <li\n                                    class=\"page-item\"\n                                    :class=\"{ active: page === page_no }\"\n                                    v-for=\"(page, index) in page_array\"\n                                    :key=\"index\"\n                                  >\n                                    <a\n                                      v-if=\"page == '...s' || page == '...l'\"\n                                      class=\"page-link\"\n                                      href=\"#\"\n                                      @click=\"page_require(page)\"\n                                      >...</a\n                                    >\n                                    <a\n                                      v-if=\"page != '...s' && page != '...l'\"\n                                      class=\"page-link\"\n                                      href=\"#\"\n                                      @click=\"page_require(page)\"\n                                      >{{ page }}</a\n                                    >\n                                    <!-- <a class=\"page-link\" href=\"#\" @click=\"page_require(page)\">{{page}}</a> -->\n                                  </li>\n\n                                  <li class=\"page-item\">\n                                    <a\n                                      class=\"page-link\"\n                                      href=\"#\"\n                                      @click=\"page_require(page_no + 1)\"\n                                    >\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        width=\"8.667\"\n                                        height=\"15.204\"\n                                        viewBox=\"0 0 8.667 15.204\"\n                                      >\n                                        <g\n                                          id=\"arrow-point-to-right\"\n                                          transform=\"translate(-97.139 0)\"\n                                        >\n                                          <path\n                                            id=\"Path_1136\"\n                                            data-name=\"Path 1136\"\n                                            d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                                            transform=\"translate(0 0)\"\n                                            fill=\"#9499ae\"\n                                          />\n                                        </g>\n                                      </svg>\n                                    </a>\n                                  </li>\n                                </ul>\n                              </nav>\n                            </div>\n                          </div> \n                        </tr>\n                      </td>\n                      <td v-show=\"!is_collapse\">{{item.Open}}</td>\n                      <td v-show=\"!is_collapse\">{{item.Closed}}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div v-show=\"Boolean(tickets_list.length === 0) && !spinnerOn\">\n                <p class=\"text-center\">\n                  <strong>\n                    {{tlt('admin_ticket_no_tickets_label')}}.</strong\n                  >\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"pagin-table\" style=\"margin-top: 2%; margin-bottom: 4%\">\n          <nav aria-label=\"Page navigation example\">\n            <ul class=\"pagination justify-content-center\">\n              <li class=\"page-item\">\n                <a\n                  class=\"page-link\"\n                  href=\"#\"\n                  @click=\"page_require(page_no - 1)\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"8.667\"\n                    height=\"15.204\"\n                    viewBox=\"0 0 8.667 15.204\"\n                  >\n                    <g\n                      id=\"arrow-point-to-left\"\n                      transform=\"translate(105.806 15.204) rotate(180)\"\n                    >\n                      <path\n                        id=\"Path_1136\"\n                        data-name=\"Path 1136\"\n                        d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                        transform=\"translate(0 0)\"\n                        fill=\"#9499ae\"\n                      />\n                    </g>\n                  </svg>\n                </a>\n              </li>\n              <li\n                class=\"page-item\"\n                :class=\"{ active: page === page_no }\"\n                v-for=\"(page, index) in page_array\"\n                :key=\"index\"\n              >\n                <a\n                  v-if=\"page == '...s' || page == '...l'\"\n                  class=\"page-link\"\n                  href=\"#\"\n                  @click=\"page_require(page)\"\n                  >...</a\n                >\n                <a\n                  v-if=\"page != '...s' && page != '...l'\"\n                  class=\"page-link\"\n                  href=\"#\"\n                  @click=\"page_require(page)\"\n                  >{{ page }}</a\n                >\n                <!-- <a class=\"page-link\" href=\"#\" @click=\"page_require(page)\">{{page}}</a> -->\n              </li>\n\n              <li class=\"page-item\">\n                <a\n                  class=\"page-link\"\n                  href=\"#\"\n                  @click=\"page_require(page_no + 1)\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"8.667\"\n                    height=\"15.204\"\n                    viewBox=\"0 0 8.667 15.204\"\n                  >\n                    <g\n                      id=\"arrow-point-to-right\"\n                      transform=\"translate(-97.139 0)\"\n                    >\n                      <path\n                        id=\"Path_1136\"\n                        data-name=\"Path 1136\"\n                        d=\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\"\n                        transform=\"translate(0 0)\"\n                        fill=\"#9499ae\"\n                      />\n                    </g>\n                  </svg>\n                </a>\n              </li>\n            </ul>\n          </nav>\n        </div>\n        <div\n          class=\"modal fade dash-modal\"\n          id=\"ticketModelDetails\"\n          tabindex=\"-1\"\n          role=\"dialog\"\n          data-backdrop=\"static\"\n        >\n      <div\n        class=\"modal-dialog modal-lg\"\n        role=\"document\"\n      >\n        <div class=\"modal-content\" style=\"width: 135%; margin-left: -17%\">\n          <div class=\"modal-header modal-head d-flex align-items-center\"\n          style=\"margin: 0rem;\">\n              <div class=\"head-icn\">\n                <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"info-circle\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"\n                 class=\"svg-inline--fa fa-info-circle fa-w-16 fa-3x\">\n                 <path fill=\"currentColor\" d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z\"\n                class=\"\" style=\"color: #273679;\"></path></svg>\n              </div>\n            <h3 class=\"modal-title\">{{tlt('admin_ticket_model_details_label')}}</h3>\n            <button\n              type=\"button\"\n              class=\"close\"\n              @click=\"empty_variable\"\n              data-dismiss=\"modal\"\n              style=\"padding-top: 1px;\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n          </div>\n          <div class=\"modal-body py-2 px-3\" style=\"width: 808px\">\n           <div class=\"form-group\">\n            <div class=\"row\" style=\"margin-left: 0px; margin-right: 0px;\">\n              <div class=\"col-md-4 pl-2\" style=\"font-weight: bold;\">\n                {{tlt('admin_ticket_model_number_label')}}  :\n              </div>\n              <div class=\"col-md-8\">\n                {{current_selected_ticket_number}}\n              </div>\n              <div class=\"col-md-4 pl-2\" style=\"font-weight: bold;padding-top:5px;padding-bottom:5px;\">\n                {{tlt('admin_ticket_model_issue_label')}}  :\n              </div>\n              <div class=\"col-md-8\" :title=\"ticket_issue_name\" style=\"padding-top:5px;padding-bottom:5px;cursor: pointer;\">\n                {{ticket_issue_name}}\n              </div>\n              <div class=\"col-md-4 pl-2\" style=\"font-weight: bold;\">\n                {{tlt('admin_ticket_model_desc_label')}}  :\n              </div>\n              <div class=\"col-md-8\"\n              :title=\"ticket_description\" style=\"cursor: pointer;\">\n                {{trim_ticket_description(ticket_description)}}\n              </div>\n              <div class=\"col-md-4 pl-2\" style=\"font-weight: bold;padding-top:5px;\">\n                {{tlt('admin_ticket_model_status_label')}} :\n              </div>\n              <div class=\"col-md-8 d-flex mb-2\">\n              <div\n                v-if=\"!isEditTicketStatus\"\n                :style=\"ticket_status === 'Open' ? \n                'color: #ff1a1a; border-radius: 4px;padding-top:5px;': \n                'color: #064; border-radius: 4px;padding-top:5px;'\" \n              >\n                <b>{{ticket_status}}</b>\n              </div>\n              <div v-if=\"isEditTicketStatus\">\n                <select\n                  v-model=\"current_ticket_status\"\n                  class=\"form-control\"\n                  style=\"height: 34px; padding: 5px;\"\n                  id=\"select_status\"\n                >\n                  <option disabled value=''>Status</option>\n                  <option value=\"Open\">{{tlt('open_status')}}</option>\n                  <option value=\"Closed\">{{tlt('close_status')}}</option>\n                </select>\n              </div>\n              <div style=\"margin-top: 3px;margin-left: 2rem;\">\n                <span\n                  @click=\"edit_ticket_status\"\n                  v-html=\"pencil_svg\"\n                  title=\"Edit Status\"\n                  class=\"ml-auto mr-2 mt-2\"\n                  style=\"cursor: pointer;\"\n                  v-if=\"is_super_admin\"\n                ></span>\n              </div>\n              <button\n                v-if=\"isEditTicketStatus\"\n                type=\"submit\"\n                class=\"darkblue-btn\"\n                id=\"save_btn res_n_int_save\"\n                style=\"margin-left: 1rem;height: 32px;padding-top: 5px;\"\n                @click=\"save_ticket_status()\"\n              >\n                {{tlt('save_btn')}}\n              </button>\n              </div>\n              <div class=\"col-md-4 pl-2\" style=\"font-weight: bold;padding-top:5px;\">\n                Assignee :\n              </div>\n              <div class=\"col-md-8 d-flex\">\n              <div\n                v-if=\"!is_Edit_Status\"\n              >\n                <b>{{assigned_developer}}</b>\n              </div>\n              <div v-if=\"is_Edit_Status || assigned_developer == undefined\">\n                <select\n                  v-model=\"assigned_developer\"\n                  class=\"form-control\"\n                  style=\"height: 34px; padding: 5px;\"\n                  id=\"select_status\"\n                  placeholder=\"Assign a Developer\"\n                >\n                  <option disabled selected value=''>Assign a Developer</option>\n                  <option v-for=\"(dev, index) in developers_list\"\n                    :value=\"dev\"\n                    :key=\"index\">{{dev}}</option>\n                </select>\n              </div>\n              <div style=\"margin-left: 2rem;\">\n                <span\n                  @click=\"edit_assign_status\"\n                  v-html=\"pencil_svg\"\n                  title=\"Edit Status\"\n                  class=\"ml-auto mr-2 mt-2\"\n                  style=\"cursor: pointer;\"\n                  v-if=\"is_super_admin\"\n                ></span>\n              </div>\n              <button\n                v-if=\"is_Edit_Status || assigned_developer  && is_super_admin\"\n                type=\"submit\"\n                class=\"darkblue-btn\"\n                id=\"save_btn res_n_int_save\"\n                data-dismiss=\"modal\"\n\n                style=\"margin-left: 1rem;height: 32px;padding-top: 5px;\"\n                @click=\"save_ticket_status()\"\n              >\n                {{tlt('save_btn')}}\n              </button>\n              </div>\n            </div>\n            </div>\n            <!-- <p>Some text in the modal.</p> -->\n            <!-- @change=\"fileinput_csv\" -->\n            <div v-if=\"current_ticket_status === 'Closed' && isEditTicketStatus\">\n              <div class=\"form-group\" style=\"margin-bottom: 4px;\">\n                <h6 style=\"margin-left: 0.5rem;font-size: 1.2rem;\">{{tlt('add_solution_label')}}</h6>\n              </div>\n              <div\n              class=\"text-right card-act\"\n              style=\"display: flex; margin-top: 0px; margin-bottom: 8px;padding: 15px 0 0;\"\n              >\n                <input\n                  type=\"text\"\n                  class=\"form-control input-comment-section\"\n                  v-model.trim=\"send_solution_text\"\n                  placeholder=\"Add your solution....\"\n                />\n                  <button \n                    type=\"button\"\n                    class=\"darkblue-btn\"\n                    id=\"btn_send_id\"\n                    :disabled=\"is_send_btn_enable == false\"\n                    @click=\"send_solution\"\n                    style=\"margin-left: 10px; height: 38px;\"\n                    :style=\"\n                      is_send_btn_enable\n                        ? ''\n                        : 'background: rgb(187, 187, 187) !important;border: 1px solid rgb(229, 229, 229) !important;'\n                    \"\n                  >{{tlt('admin_ticket_solution_label')}}</button>\n               </div>\n            </div>\n            <!-- <div class=\"row\" style=\"margin-left: 0rem;\" v-if=\"!isEditTicketStatus && ticket_solution !== ''\">\n              <div class=\"col-md-4\" style=\"margin-bottom: 4px;font-weight: bold;padding-top:5px;\">\n               Solution :\n              </div>\n              <div class=\"col-md-8\" style=\"padding-top:5px;padding-bottom:5px;padding-left: 12px;\">\n                {{ticket_solution}}\n              </div>\n            </div> -->\n            <div class=\"form-group d-flex\" style=\"margin-bottom: 4px;margin-top: 1rem;\">\n              <h6 v-if=\"!is_internal_comment\" style=\"margin-left: 0.5rem;font-size: 1.2rem;\">{{tlt('admin_ticket_model_comments_label')}}</h6>\n              <h6 v-else style=\"margin-left: 0.5rem;font-size: 1.2rem;\">Internal Comments</h6>\n              <p v-if=\"!is_internal_comment\" class=\"ml-auto\" style=\"cursor: pointer\" @click=\"switch_to_internal_comments()\">switch to internal comments</p>\n              <p v-else class=\"ml-auto\" style=\"cursor: pointer\" @click=\"switch_to_internal_comments()\">switch to customer comments</p>\n            </div>\n            <div class=\"form-group\" style=\"margin-bottom: 4px\">\n              <div class=\"form-group mx-0 my-0 px-0 py-0\">\n                <div\n                  v-if=\"(comments_list.length != 0) && !is_internal_comment\"\n                  class=\"chat-body ScrollStyle\"\n                  style=\"height: 65vh; overflow-y: auto\"\n                >\n                  <div\n                    class=\"chat-inner\"\n                    style=\"position: relative;\"\n                    v-for=\"(comment, index) in comments_list\"\n                    :key=\"index\"\n                  >\n                    <div\n                      v-if=\"comment.IsSuperAdmin === true\"\n                    >\n                      <div class=\"d-flex\">\n                        <i\n                          class=\"fas fa-user-circle mr-3 fa-2x\"\n                          style=\"color: darkgrey !important;\"\n                        ></i>\n                        <label\n                          style=\"text-align: justify !important; margin-top: 4px !important;\"\n                        >\n                          <strong><b>{{tlt('admin_ticket_cense_team_label')}}</b></strong>\n                        </label>\n                      </div>\n                      <div class=\"custom-button-box ml-5\">\n                        <p style=\"color: #404040; margin-bottom: 0px;\">\n                          {{ comment.Comment }}\n                        </p>\n                        <span\n                          class=\"img-container\"\n                          v-if=\"comment.image_url != null\"\n                        >\n                          <a\n                            href=\"#\"\n                            data-toggle=\"modal\"\n                            data-target=\"#viewImageModal\"\n                            @click=\"open_image_model(index)\"\n                          >\n                            {{tlt('admin_ticket_attached_img')}}</a\n                          >\n                        </span>\n                        <!-- <span\n                          style=\"display: block; font-size: 12px; color:#808080;\"\n                          ><strong>admin </strong></span\n                        > -->\n                        <label class=\"form-text text-muted comment-box_date\"\n                        style=\"font-size: 12px; margin-top: 6px;\">{{ date_formating(comment.Date) }}\n                        </label>\n                      </div>\n                      <!-- <img v-if=\"comment.image_url != null\" :src=\"comment.image_url\" class=\"center-block p-0 m-0\" style=\"height:140px; width:140px;\"/> -->\n                    </div>\n                    <div v-else>\n                      <div class=\"d-flex\">\n                        <i\n                          class=\"fas fa-user-circle mr-3 fa-2x\"\n                          style=\"color: darkgrey !important;\"\n                        ></i>\n                        <label\n                          style=\"text-align: justify !important; margin-top: 4px !important;\"\n                        >\n                          <strong><b>{{comment.Email}}</b></strong>\n                        </label>\n                      </div>\n                      <div class=\"custom-button-box ml-5\">\n                        <p style=\"color: #404040; margin-bottom: 0px;\">\n                          {{ comment.Comment }}\n                        </p>\n                        <span\n                          class=\"img-container\"\n                          v-if=\"comment.image_url != null\"\n                        >\n                          <a\n                            href=\"#\"\n                            data-toggle=\"modal\"\n                            data-target=\"#viewImageModal\"\n                            style=\"font-size: 15px;\"\n                            @click=\"open_image_model(index)\"\n                          >\n                            {{tlt('admin_ticket_attached_img')}}</a\n                          >\n                        </span>\n                        <!-- <span\n                          style=\"display: block; font-size: 12px; color:#808080;\"\n                          ><strong> {{ comment.Email }} </strong></span\n                        > -->\n                        <label class=\"form-text text-muted comment-box_date\"\n                                style=\"font-size: 12px; margin-top: 6px;\">\n                          {{ date_formating(comment.Date) }}\n                        </label>\n                      </div>\n                      <!-- <img v-if=\"comment.image_url != null\" :src=\"comment.image_url\" class=\"center-block p-0 m-0\" style=\"height:140px; width:140px;\"/> -->\n                    </div>\n                    <!-- <p>{{ Comment.IsSuperAdmin }}</p> -->\n                  </div>\n                </div>\n                <div v-else-if=\"internal_comments_list != undefined && is_internal_comment\"\n                  class=\"chat-body ScrollStyle\"\n                  style=\"height: 65vh; overflow-y: auto\"\n                >\n                  <div\n                    class=\"chat-inner\"\n                    style=\"position: relative;\"\n                    v-for=\"(comment, index) in internal_comments_list\"\n                    :key=\"index\"\n                  >\n                    <div\n                      v-if=\"comment.IsSuperAdmin === true\"\n                    >\n                      <div class=\"d-flex\">\n                        <i\n                          class=\"fas fa-user-circle mr-3 fa-2x\"\n                          style=\"color: darkgrey !important;\"\n                        ></i>\n                        <label\n                          style=\"text-align: justify !important; margin-top: 4px !important;\"\n                        >\n                          <strong><b>{{tlt('admin_ticket_cense_team_label')}}</b></strong>\n                        </label>\n                      </div>\n                      <div class=\"custom-button-box ml-5\">\n                        <p style=\"color: #404040; margin-bottom: 0px;\">\n                          {{ comment.Comment }}\n                        </p>\n                        <span\n                          class=\"img-container\"\n                          v-if=\"comment.image_url != null\"\n                        >\n                          <a\n                            href=\"#\"\n                            data-toggle=\"modal\"\n                            data-target=\"#viewImageModal\"\n                            @click=\"open_image_model(index)\"\n                          >\n                            {{tlt('admin_ticket_attached_img')}}</a\n                          >\n                        </span>\n                        <!-- <span\n                          style=\"display: block; font-size: 12px; color:#808080;\"\n                          ><strong>admin </strong></span\n                        > -->\n                        <label class=\"form-text text-muted comment-box_date\"\n                        style=\"font-size: 12px; margin-top: 6px;\">{{ date_formating(comment.Date) }}\n                        </label>\n                      </div>\n                      <!-- <img v-if=\"comment.image_url != null\" :src=\"comment.image_url\" class=\"center-block p-0 m-0\" style=\"height:140px; width:140px;\"/> -->\n                    </div>\n                    <div v-else>\n                      <div class=\"d-flex\">\n                        <i\n                          class=\"fas fa-user-circle mr-3 fa-2x\"\n                          style=\"color: darkgrey !important;\"\n                        ></i>\n                        <label\n                          style=\"text-align: justify !important; margin-top: 4px !important;\"\n                        >\n                          <strong><b>{{comment.Email}}</b></strong>\n                        </label>\n                      </div>\n                      <div class=\"custom-button-box ml-5\">\n                        <p style=\"color: #404040; margin-bottom: 0px;\">\n                          {{ comment.Comment }}\n                        </p>\n                        <span\n                          class=\"img-container\"\n                          v-if=\"comment.image_url != null\"\n                        >\n                          <a\n                            href=\"#\"\n                            data-toggle=\"modal\"\n                            data-target=\"#viewImageModal\"\n                            style=\"font-size: 15px;\"\n                            @click=\"open_image_model(index)\"\n                          >\n                            {{tlt('admin_ticket_attached_img')}}</a\n                          >\n                        </span>\n                        <!-- <span\n                          style=\"display: block; font-size: 12px; color:#808080;\"\n                          ><strong> {{ comment.Email }} </strong></span\n                        > -->\n                        <label class=\"form-text text-muted comment-box_date\"\n                                style=\"font-size: 12px; margin-top: 6px;\">\n                          {{ date_formating(comment.Date) }}\n                        </label>\n                      </div>\n                      <!-- <img v-if=\"comment.image_url != null\" :src=\"comment.image_url\" class=\"center-block p-0 m-0\" style=\"height:140px; width:140px;\"/> -->\n                    </div>\n                    <!-- <p>{{ Comment.IsSuperAdmin }}</p> -->\n                  </div>\n                </div>\n                <div style=\"padding-left: 10px; margin: 8px 0px;\"\n                v-else>\n                  <p>{{tlt('admin_ticket_model_no_comments_label')}} ...</p>\n                </div>\n              </div>\n            </div>\n            <div\n              class=\"text-right card-act\"\n              style=\"display: flex; margin-top: 0px; margin-bottom: 8px; border-top: solid 1px #EAEAEA; padding: 15px 0 0;\"\n            >\n              <input\n                type=\"text\"\n                v-if=\"is_internal_comment\"\n                class=\"form-control input-comment-section\"\n                v-model=\"new_internal_comment\"\n                placeholder=\"Type your comment here ...\"\n              />\n              <input\n                type=\"text\"\n                v-else\n                :disabled=\"!is_super_admin\"\n                class=\"form-control input-comment-section\"\n                v-model=\"new_ticket_comment\"\n                placeholder=\"Type your comment here ...\"\n              />\n              <label for=\"files\" class=\"btn\" style=\"padding: 0px;\" :style=\"!is_super_admin ? 'display: none' : ''\">\n                <!-- src=\"/img/icons8_attachfile.png\" -->\n                <!-- class=\"img_icon_comment\" -->\n                <i\n                  id=\"image_file\"\n                  class=\"fa fa-paperclip img_icon_comment\" aria-hidden=\"true\"\n                  :title=\"new_image_name === '' ? 'Upload New Image' : new_image_name\"\n                  style=\"cursor: pointer;\"                  \n                  :style=\"new_image_name ?\n                   'color: #4000ff !important; font-size: 20px;'\n                    : ''\n                \"\n                  alt=\"attachment\"\n                  width=\"18px;\"\n                  height=\"18px;\">\n              </i></label>\n              <!-- :disabled=\"is_send_btn_enable == false\" -->\n              <!-- :style=\"new_image_name ? 'border: 0.5px solid blue; color: green;':''\" -->\n              <input\n                type=\"file\"\n                id=\"files\"\n                accept=\"image/png, image/jpg, image/jpeg\"\n                @change=\"Upload_image_file\"\n                \n                style=\"display: none;\"\n              />\n              <!-- <button\n                      type=\"button\"\n                      class=\"btn btn-link\"\n                      data-dismiss=\"modal\"\n                    >\n                      Cancel\n                    </button> -->\n              <button \n                type=\"button\"\n                class=\"darkblue-btn\"\n                id=\"btn_send_id\"\n                :disabled=\"is_send_btn_enable == false\"\n                @click=\"is_internal_comment == true ? send_internal_ticket_comments() : send_ticket_comments()\"\n                style=\"margin-left: 10px; height: 38px;\"\n                :style=\"\n                  is_send_btn_enable\n                    ? ''\n                    : 'background: rgb(187, 187, 187) !important;border: 1px solid rgb(229, 229, 229) !important;'\n                \"\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  style=\"fill: #fff; margin-top: -2px;\"\n                  width=\"40\"\n                  height=\"25\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\" />\n                  <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n                </svg>\n              </button>\n            </div>\n            <div\n                class=\"image_name\"\n                :disabled=\"is_send_btn_enable == false\"\n                :style=\"\n                  is_send_btn_enable\n                    ? ''\n                    : 'background: rgb(187, 187, 187) !important;border: 1px solid rgb(229, 229, 229) !important;'\n                \"\n                v-if=\"new_image_name != ''\"\n              >\n                <!-- style=\"bottom: 0px; margin-left: 16px;\" -->\n                <!-- {{ new_image_name }} -->\n            </div>\n            <div class=\"user_img\" style=\"margin-top: 4px;\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      id=\"viewImageModal\"\n      class=\"modal fade dash-modal\"\n      role=\"dialog\"\n      data-backdrop=\"static\"\n      data-keyboard=\"false\"\n    >\n      <div class=\"modal-dialog\">\n        <!-- Modal content-->\n        <div class=\"modal-content\" \n        style=\"margin-left: auto; margin-right: auto;\">\n          <div class=\"modal-header\" style=\"justify-content: center; padding: 0.5rem;\">\n            <h5 class=\"modal-title\">\n              {{tlt('img_label')}}\n            </h5>\n            <button\n              type=\"button\"\n              class=\"close close-img-btn\"\n              style=\"top: 11px; right: 12px;\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <img src=\"/img/close-icn.png\" alt />\n            </button>\n          </div>\n          <div\n            class=\"modal-body\"\n          >\n            <img\n              v-if=\"images_in_current_comment != ''\"\n              :src=\"images_in_current_comment\"\n              class=\"center-block p-0 m-0\"\n              style=\"height:auto; width:100%;\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport api_calls from \"@/portal/api_calls\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\nimport { close_modal} from \"@/portal/mixins\";\n\nexport default {\n      mixins: [\n    close_modal\n  ],\n  data() {\n    return {\n      pencil_svg:\n        ' <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.546\" height=\"15.461\" viewBox=\"0 0 15.546 15.461\"><defs><style>.a{fill:#9e9e9e;}</style></defs><g transform=\"translate(-747.888 -356.769)\"><path class=\"a\" d=\"M759.416,356.769a2.358,2.358,0,0,1,1.777.662c.534.513,1.072,1.025,1.567,1.575a2.3,2.3,0,0,1-.071,3.325c-2.736,2.76-5.494,5.5-8.238,8.251a1.381,1.381,0,0,1-.758.288c-.719.174-1.429.379-2.144.572-.932.251-1.862.5-2.795.751-.6.158-.989-.213-.832-.807q.689-2.595,1.406-5.182a1.164,1.164,0,0,1,.289-.487q4.091-4.107,8.2-8.2A2.265,2.265,0,0,1,759.416,356.769Zm-1.989,2.956-6.54,6.538,3.025,3.024,6.538-6.537Zm4.023,2.165c.118-.135.225-.269.343-.392a1.134,1.134,0,0,0,0-1.734c-.46-.466-.926-.925-1.388-1.39a1.166,1.166,0,0,0-.861-.368c-.578,0-.881.4-1.214.76Zm-12.084,8.863,3.2-.863-2.337-2.331Z\" transform=\"translate(0)\"/><path class=\"a\" d=\"M813.942,422.6l-.789-.8,3.821-3.819.784.8Z\" transform=\"translate(-59.648 -55.947)\"/></g></svg>',\n      filter_status: 'AllTickets',\n      spinnerOn: false,\n      page_no: 1,\n      per_page: 20,\n      total_pages: null,\n      number_of_rows: null,\n      tickets_list: [],\n      sort_status: 'All',\n      company_list: [],\n      page_array: [],\n      User_comments: [],\n      comments_list: [],\n      comment_item_list: [],\n      ticket_number: \"\",\n      current_selected_ticket_number: \"\",\n      ticket_description: \"\",\n      new_ticket_comment: \"\",\n      current_image_url: \"\",\n      // current_image_name: \"\",\n      current_image_name_in_comment:\"\",\n      images_in_current_comment: \"\",\n      new_image_name: \"\",\n      new_image_file: \"\",\n      image_file: \"\",\n      send_solution_text: \"\",\n      ticket_issue_name: \"\",\n      ticket_status: \"\",\n      ticket_solution: \"\",\n      is_status: null,\n      current_status: \"\",\n      is_status_closed: false,\n      search_key: \"\",\n      isEditTicketStatus: false,\n      is_Edit_Status: false,\n      current_ticket_status: \"\",\n      company_tickets_list: [],\n      sort_company_status: 'All',\n      is_collapse: false,\n      send_by_company: false,\n      req_comp_id: \"\",\n      req_comp_name: \"\",\n      ticket_company_id:\"\",\n      ticket_company_name:\"\",\n      isVisibleSearchClear: false,\n      is_super_admin: false,\n      is_developer: false,\n      developers_list: [],\n      assigned_developer: \"\",\n      new_internal_comment: \"\",\n      is_internal_comment: false,\n      internal_comments_list: []\n    };\n  },\n  computed: {\n    is_send_btn_enable() {\n      if (Boolean(this.send_solution_text || this.new_image_name || this.new_ticket_comment || this.new_internal_comment)) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    is_reopen_btn_enable() {\n      if (Boolean(this.new_ticket_comment || this.new_image_name)) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n  created() {\n    if (\n      !this.$session.has(\"CompanyId\") &&\n      this.$session.get(\"UserInformation\").role == \"SuperAdmin\"\n    ) {\n      toastr.warning(this.tlt('select_company_name_msg2'));\n    } else if (this.user_role == \"SuperAdmin\") {\n      if (this.$session.has(\"CompanyId\")) {\n        this.companyid = this.$session.get(\"CompanyId\");\n        this.companyname = this.$session.get(\"CompanyName\");\n      } else {\n        this.companyid = this.$session.get(\"UserInformation\").company_id;\n        this.companyname = this.$session.get(\"UserInformation\").company_name;\n      }\n    } else {\n      this.companyid = this.$session.get(\"UserInformation\").company_id;\n      this.companyname = this.$session.get(\"UserInformation\").company_name;\n    }\n    this.get_ticket_details();\n  },\n  watch: {\n    filter_status(){\n      this.page_no = 1;\n      this.per_page = 20;\n      this.is_collapse = false;\n      if(this.filter_status ===  'AllTickets'){\n        this.get_ticket_details();  \n      }else{\n        this.get_company_list();\n      }\n    },\n  },\n  methods : {\n    switch_to_internal_comments() {\n      if (!this.is_internal_comment) {\n        this.is_internal_comment = true;\n      } else {\n        this.is_internal_comment = false;\n      }\n      return;\n    },\n    check_collapse(index) {\n      if ($('#collapseExample__' + index).is('.collapse.show') === false) {\n        this.is_collapse = true;\n      } else {\n        this.is_collapse = false;\n        this.sort_company_status = 'All';\n      }\n    },\n    trim_ticket_issue(val1) {\n      if (val1.length > 50) {\n        let str1 = val1.substring(0, 50) + \"....\";\n        return str1;\n      }\n      return val1;\n    },\n    trim_ticket_description(des_name){\n      if(des_name.length > 60){\n        let ticket_des_name = des_name.substring(0,50) + \"...\";\n        return ticket_des_name;\n      }\n      return des_name;\n    },\n    date_formating(sub_date) {\n      return moment(sub_date).format(\"D MMM YYYY HH:mm a\");\n    },\n    format_date(date) {\n      if(date == null) {\n        return \"N/A\"\n      }\n      return moment(date).format(\"Do MMM YYYY\");\n    },\n    edit_ticket_status() {\n      if (!this.isEditTicketStatus) {\n        this.isEditTicketStatus = true;\n      } else {\n        this.isEditTicketStatus = false;\n        // this.load_intent();\n      }\n      return;\n    },\n    edit_assign_status() {\n      if (!this.is_Edit_Status) {\n        this.is_Edit_Status = true;\n      } else {\n        this.is_Edit_Status = false;\n      }\n      return;\n    },\n    save_ticket_status() {\n\n      this.spinnerOn = true;\n      if (this.current_ticket_status === \"\") {\n        this.current_ticket_status = this.current_status;\n\n      }\n        axios\n          .post(\n            api_calls.support_ticket(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              is_edit: true,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              response: {\n                ticket_number: this.current_selected_ticket_number,\n                update_status: this.current_ticket_status,\n                solution: null,\n                ticket_company_id: this.ticket_company_id == \"\" ? this.req_comp_id : this.ticket_company_id,\n                ticket_company_name:this.ticket_company_name == \"\" ? this.req_comp_name : this.ticket_company_name,\n                assign_to:this.assigned_developer \n              }\n              // pageno: this.page_no,\n              // perpage: this.per_page,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            if (this.api_status_code.TICKET_UPDATED.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                type: \"success\",\n                text: this.tlt('admin_ticket_status_updated'),\n                timer: 2500\n              });\n              this.empty_variable();\n              $(\"#ticketModelDetails\").modal(\"hide\");\n              if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n            } else if(this.api_status_code.UNSUCCESSFUL_DB_OPERATION.MSG_CODE == response.data.message.MSG_CODE){\n                Swal({\n                text: response.data.message.MSG,\n                type: \"error\",\n                timer: 3000,\n              });\n              $(\"#ticketModelDetails\").modal(\"hide\");\n              if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n              this.empty_variable();\n            } else if(this.api_status_code.UNSUCCESSFUL_DB_QUERY.MSG_CODE == response.data.message.MSG_CODE){\n              Swal({\n                type: \"error\",\n                text: response.data.message.MSG,\n                timer: 2500,\n              });\n              if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n              this.empty_variable();\n              $(\"#ticketModelDetails\").modal(\"hide\");\n                //$(\"#ticketModelDetails\").modal(\"hide\");\n                //this.empty_variable();\n            } else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\"\n              })\n               this.empty_variable();\n              $(\"#ticketModelDetails\").modal(\"hide\");\n              if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n            }\n          })\n          .catch(e => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            } else {\n              Swal({\n                type: \"error\",\n                text: this.tlt('admin_ticket_internal_server2'),\n                timer: 2500\n              });\n            }\n          });\n          \n              this.close_modal('res_n_int_save')\n          \n    },\n    open_comment_model(index, key) {\n      if (key === null) {\n        this.comments_list = [];\n        this.internal_comments_list = [];\n        this.comments_list = Boolean(this.tickets_list[index].Comments)\n          ? this.tickets_list[index].Comments\n          : [];\n        this.current_selected_ticket_number = this.tickets_list[\n          index\n        ].TicketNumber;\n        this.ticket_company_id = this.tickets_list[index].CompanyId;\n        this.ticket_company_name = this.tickets_list[index].CompanyName;\n        this.ticket_description = this.tickets_list[index].Description;\n        this.ticket_issue_name = this.tickets_list[index].TicketIssue;\n        this.ticket_status = this.tickets_list[index].CurrentStatus;\n        this.internal_comments_list = this.tickets_list[index].InternalComments;\n        this.assigned_developer = this.tickets_list[index].AssignedTo;\n        if (this.tickets_list[index].Solution !== undefined) {\n          this.ticket_solution = this.tickets_list[index].Solution;\n        } else {\n          this.ticket_solution = \"\";\n        }\n        if(this.ticket_status === \"Closed\")\n        {\n          this.is_status_closed = true;\n        }else{\n          this.is_status_closed = false;\n        }\n        this.current_status = this.tickets_list[index].CurrentStatus;\n        this.send_by_company = false;\n      }  \n      else if (key === 'Company_tickets') {\n        this.comments_list = [];\n        this.internal_comments_list = [];\n        this.comments_list = Boolean(this.company_tickets_list[index].Comments)\n          ? this.company_tickets_list[index].Comments\n          : [];\n        this.current_selected_ticket_number = this.company_tickets_list[\n          index\n        ].TicketNumber;\n        this.ticket_description = this.company_tickets_list[index].Description;\n        this.ticket_issue_name = this.company_tickets_list[index].TicketIssue;\n        this.ticket_status = this.company_tickets_list[index].CurrentStatus;\n        this.assigned_developer = this.company_tickets_list[index].AssignedTo;\n        this.internal_comments_list = this.company_tickets_list[index].InternalComments;\n        this.req_comp_id = this.company_tickets_list[index].CompanyId;\n        this.req_comp_name = this.company_tickets_list[index].CompanyName;\n        if (this.company_tickets_list[index].Solution !== undefined) {\n          this.ticket_solution = this.company_tickets_list[index].Solution;\n        } else {\n          this.ticket_solution = \"\";\n        }\n        if(this.ticket_status === \"Closed\")\n        {\n          this.is_status_closed = true;\n        }else{\n          this.is_status_closed = false;\n        }\n        this.current_status = this.company_tickets_list[index].CurrentStatus;\n        this.send_by_company = true;\n      }\n    },\n    get_ticket_details() {\n      this.spinnerOn = true;\n      axios\n      .post(api_calls.support_ticket(), {\n        company_name: this.companyname,\n        company_id: this.companyid,\n        email: this.$session.get(\"UserInformation\").email,\n        filter_by: this.sort_status,\n        is_get: true,\n        per_page: this.per_page,\n        page_no: this.page_no\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${this.$session.get(\"at\")}`,\n        },\n      })\n      .then(response => {\n        this.spinnerOn = false;\n        if (this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE == response.data.message.MSG_CODE) {\n          toastr.error(\n            this.tlt('admin_ticket_internal_server3')\n          );\n        } else if (this.api_status_code.DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n          this.number_of_rows = response.data.pagination.total_data;\n          this.total_pages = response.data.pagination.total_page;\n          this.tickets_list = response.data.data.Ticket;\n          this.setpagination(this.page_no);\n          this.is_developer = response.data.data.IsDeveloper === undefined ? false : true;\n          this.developers_list = response.data.data.DevelopersList;\n          this.is_super_admin = response.data.data.IsSuperAdmin === undefined ? false : true;\n        } else if (this.api_status_code.NO_EXISTING_TICKET.MSG_CODE == response.data.message.MSG_CODE) {\n          this.tickets_list = [];\n        }  else {\n          Swal({\n            title: response.data.message.MSG_CODE,\n            text: response.data.message.MSG,\n            showCancelButton: false,\n            showConfirmButton: false,\n            type: \"error\"\n          })\n        }\n      })\n      .catch((e) => {\n          // console.log(e);\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          } else {\n            Swal({\n              type: \"error\",\n              text: this.tlt('admin_ticket_internal_server4'),\n              timer: 2500,\n            });\n          }\n        });\n    },\n    send_solution(){\n      if(this.send_solution_text != \"\" && this.current_ticket_status === 'Closed'){\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.support_ticket(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              is_edit: true,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              response: {\n                ticket_number: this.current_selected_ticket_number,\n                solution: this.send_solution_text,\n                update_status: this.current_ticket_status,\n                ticket_company_id: this.ticket_company_id == \"\" ? this.req_comp_id : this.ticket_company_id,\n                ticket_company_name:this.ticket_company_name == \"\" ? this.req_comp_id : this.ticket_company_name,\n              }\n              // pageno: this.page_no,\n              // perpage: this.per_page,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            if (this.api_status_code.TICKET_UPDATED.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                type: \"success\",\n                text: this.tlt('admin_ticket_status_updated1'),\n                timer: 2500\n              }).then(result => {\n                if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n                $(\"#ticketModelDetails\").modal(\"hide\");\n                this.empty_variable();\n              });\n            } else if (this.api_status_code.IMG_DUPLICATE.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                text:\n                  this.tlt('admin_ticket_img_already_found'),\n                type: \"error\",\n                timer: 3000,\n              });\n            } else if(this.api_status_code.UNSUCCESSFUL_DB_OPERATION.MSG_CODE == response.data.message.MSG_CODE){\n                Swal({\n                text:\n                  this.tlt('admin_ticket_error_occurred3'),\n                type: \"error\",\n                timer: 3000,\n              });\n                this.empty_variable();\n                $(\"#ticketModelDetails\").modal(\"hide\");\n            } else if(this.api_status_code.UNSUCCESSFUL_DB_QUERY.MSG_CODE == response.data.message.MSG_CODE){\n              Swal({\n                type: \"error\",\n                text: response.data.message.MSG,\n                timer: 2500,\n              });\n                //$(\"#ticketModelDetails\").modal(\"hide\");\n                //this.empty_variable();\n            } else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\"\n              })\n            }\n          })\n          .catch(e => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            } else {\n              $(\"#ticketModelDetails\").modal(\"hide\");\n              Swal({\n                type: \"error\",\n                text: this.tlt('admin_ticket_internal_server6'),\n                timer: 2500\n              });\n            }\n          });\n          this.close_modal('btn_send_id')\n      }else{\n      }\n\n    },\n    open_image_model(index) {\n      if (!this.is_internal_comment && this.comments_list[index].image_url != null) {\n        this.images_in_current_comment = this.comments_list[index].image_url;\n        this.current_image_name_in_comment = this.comments_list[index].image_name;\n      } else if (this.is_internal_comment && this.internal_comments_list[index].image_url != null) {\n        this.images_in_current_comment = this.internal_comments_list[index].image_url;\n        this.current_image_name_in_comment = this.internal_comments_list[index].image_name;\n      }\n    },\n    Upload_image_file(event) {\n      let files = event.target.files[0];\n      if (files.size > 2097152) {\n        Swal({\n          text: this.tlt('admin_ticket_upload_img'),\n          toast: true,\n          position: \"top-end\",\n          type: \"error\",\n          showConfirmButton: false,\n          timer: 10000,\n        });\n        return;\n      }\n      this.new_image_name = event.target.files[0].name;\n      this.new_image_file = event.target.files[0].type;\n\n      if (this.new_image_name != this.current_image_name_in_comment) {\n      }\n      if (this.new_image_file == \"image/png\") {\n        this.createImage(files, this.new_image_file);\n      } else if (this.new_image_file == \"image/jpeg\") {\n        this.createImage(files, this.new_image_file);\n      } else if (this.new_image_file == \"image/jpg\") {\n        this.createImage(files, this.new_image_file);\n      } else {\n        Swal({\n          type: \"error\",\n          text: this.tlt('admin_ticket_select_img_type'),\n          timer: 2500\n        });\n      }\n    },\n    createImage(file, type) {\n      let reader = new FileReader();\n      reader.onload = e => {\n        this.image_file = e.target.result.split(\"base64,\")[1];\n      };\n      reader.readAsDataURL(file);\n    },\n    send_internal_ticket_comments() {\n      if (\n        this.new_internal_comment != \"\" ||\n        (this.new_image_name != \"\" && this.new_image_file != \"\")\n      ) {\n        Swal({\n          text: this.tlt('admin_ticket_adding_your_comment'),\n          type: \"info\",\n          toast: true,\n          showConfirmButton: false\n        });\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.support_ticket(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              is_edit: true,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              response: {\n                ticket_number: this.current_selected_ticket_number,\n                update_status: this.current_ticket_status ? this.current_ticket_status : null,\n                new_internal_comment: this.new_internal_comment ? this.new_internal_comment : null,\n                ticket_img_name: this.new_image_name ? this.new_image_name : null,\n                ticket_img_file: this.image_file ? this.image_file : null,\n                ticket_company_id: this.ticket_company_id == \"\" ? this.req_comp_id : this.ticket_company_id,\n                ticket_company_name:this.ticket_company_name == \"\" ? this.req_comp_name : this.ticket_company_name,\n              }\n              // pageno: this.page_no,\n              // perpage: this.per_page,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            if (this.api_status_code.TICKET_UPDATED.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                type: \"success\",\n                text: this.tlt('admin_ticket_comments_added'),\n                timer: 2500\n              }).then(result => {\n                this.empty_variable();\n               $(\"#ticketModelDetails\").modal(\"hide\");\n              \n              // $('body').removeClass('modal-open');\n              // $('.modal-backdrop').remove();\n                if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n              });\n            } else if (this.api_status_code.IMG_DUPLICATE.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                text:\n                  this.tlt('admin_ticket_img_already_found1'),\n                type: \"error\",\n                timer: 3000,\n              });\n            } else if(this.api_status_code.UNSUCCESSFUL_DB_QUERY.MSG_CODE == response.data.message.MSG_CODE){\n              Swal({\n                type: \"error\",\n                text: response.data.message.MSG,\n                timer: 2500,\n              });\n              //$(\"#ticketModelDetails\").modal(\"hide\");\n              //this.empty_variable();\n            }\n             else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\"\n              })\n            }\n          })\n          .catch(e => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            } else {\n              $(\"#ticketModelDetails\").modal(\"hide\");\n              Swal({\n                type: \"error\",\n                text: this.tlt('admin_ticket_internal_server8'),\n                timer: 2500\n              });\n            }\n          });\n          this.close_modal('btn_send_id')\n      }\n    },\n    send_ticket_comments() {\n      if (\n        this.new_ticket_comment != \"\" ||\n        (this.new_image_name != \"\" && this.new_image_file != \"\")\n      ) {\n        Swal({\n          text: this.tlt('admin_ticket_adding_your_comment'),\n          type: \"info\",\n          toast: true,\n          showConfirmButton: false\n        });\n        this.spinnerOn = true;\n        axios\n          .post(\n            api_calls.support_ticket(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              is_edit: true,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              response: {\n                ticket_number: this.current_selected_ticket_number,\n                update_status: this.current_ticket_status ? this.current_ticket_status : null,\n                new_comment: this.new_ticket_comment\n                  ? this.new_ticket_comment\n                  : null,\n                ticket_img_name: this.new_image_name ? this.new_image_name : null,\n                ticket_img_file: this.image_file ? this.image_file : null,\n                ticket_company_id: this.ticket_company_id == \"\" ? this.req_comp_id : this.ticket_company_id,\n                ticket_company_name:this.ticket_company_name == \"\" ? this.req_comp_name : this.ticket_company_name,\n              }\n              // pageno: this.page_no,\n              // perpage: this.per_page,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`\n              }\n            }\n          )\n          .then(response => {\n            this.spinnerOn = false;\n            if (this.api_status_code.TICKET_UPDATED.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                type: \"success\",\n                text: this.tlt('admin_ticket_comments_added'),\n                timer: 2500\n              }).then(result => {\n                this.empty_variable();\n               $(\"#ticketModelDetails\").modal(\"hide\");\n              \n              // $('body').removeClass('modal-open');\n              // $('.modal-backdrop').remove();\n                if (this.send_by_company === true) {\n                this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n              } else {\n                this.get_ticket_details();\n              }\n              });\n            } else if (this.api_status_code.IMG_DUPLICATE.MSG_CODE == response.data.message.MSG_CODE) {\n              Swal({\n                text:\n                  this.tlt('admin_ticket_img_already_found1'),\n                type: \"error\",\n                timer: 3000,\n              });\n            } else if(this.api_status_code.UNSUCCESSFUL_DB_QUERY.MSG_CODE == response.data.message.MSG_CODE){\n              Swal({\n                type: \"error\",\n                text: this.tlt('admin_ticket_error_occurred5'),\n                timer: 2500,\n              });\n              //$(\"#ticketModelDetails\").modal(\"hide\");\n              //this.empty_variable();\n            }\n             else {\n              Swal({\n                title: response.data.message.MSG_CODE,\n                text: response.data.message.MSG,\n                showCancelButton: false,\n                showConfirmButton: false,\n                type: \"error\"\n              })\n            }\n          })\n          .catch(e => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            } else {\n              $(\"#ticketModelDetails\").modal(\"hide\");\n              Swal({\n                type: \"error\",\n                text: this.tlt('admin_ticket_internal_server8'),\n                timer: 2500\n              });\n            }\n          });\n          this.close_modal('btn_send_id')\n      }\n    },\n    empty_variable() {\n      this.comments_list = [\"\"];\n      this.internal_comments_list = [\"\"]\n      this.comment_item_list = [\"\"];\n      this.new_ticket_comment = \"\";\n      this.new_internal_comment = \"\";\n      this.send_solution_text = \"\";\n      this.new_image_name = \"\";\n      this.new_image_file = \"\";\n      this.file_content2 = \"\";\n      this.isEditTicketStatus = false;\n      this.is_Edit_Status = false;\n      this.assigned_developer = \"\";\n      this.current_ticket_status = \"\";\n      this.ticket_company_id = '';\n      this.ticket_company_name = '';\n    },\n    get_company_list() {\n      this.spinnerOn = true;\n      axios\n      .post(api_calls.support_ticket(), {\n        company_name: this.companyname,\n        company_id: this.companyid,\n        email: this.$session.get(\"UserInformation\").email,\n        sort_by_company: true,\n        is_get: true,\n        per_page: this.per_page,\n        page_no: this.page_no\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${this.$session.get(\"at\")}`,\n        },\n      })\n      .then(response => {\n        this.spinnerOn = false;\n        if (this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE == response.data.message.MSG_CODE) {\n          toastr.error(\n            this.tlt('admin_ticket_internal_server9')\n          );\n        } else if(this.api_status_code.DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE){\n          this.number_of_rows = response.data.pagination.total_data;\n          this.total_pages = response.data.pagination.total_page;\n          this.company_list = response.data.data.ResponseList;\n          this.setpagination(this.page_no);\n        } else {\n          Swal({\n            title: response.data.message.MSG_CODE,\n            text: response.data.message.MSG,\n            showCancelButton: false,\n            showConfirmButton: false,\n            type: \"error\"\n          })\n        }\n      })\n      .catch((e) => {\n          // console.log(e);\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          } else {\n            Swal({\n              type: \"error\",\n              text: this.tlt('admin_ticket_internal_server_msg1'),\n              timer: 2500,\n            });\n          }\n        });\n    },\n    get_company_tickets(key1, key2) {\n      this.req_comp_name = key1;\n      this.req_comp_id = key2;\n      this.spinnerOn = true;\n      axios\n      .post(api_calls.support_ticket(), {\n        company_name: this.companyname,\n        company_id: this.companyid,\n        email: this.$session.get(\"UserInformation\").email,\n        filter_by: this.sort_company_status,\n        req_company_name: key1,\n        req_company_id: key2,\n        is_get: true,\n        per_page: this.per_page,\n        page_no: this.page_no\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${this.$session.get(\"at\")}`,\n        },\n      })\n      .then(response => {\n        this.spinnerOn = false;\n        if (this.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE == response.data.message.MSG_CODE) {\n          toastr.error(\n            this.tlt('admin_ticket_internal_server_msg2')\n          );\n        } else if (this.api_status_code.DATA_AVAILABLE.MSG_CODE == response.data.message.MSG_CODE) {\n          // this.req_comp_id = \"\";\n          // this.req_comp_name = \"\";\n          this.number_of_rows = response.data.pagination.total_data;\n          this.total_pages = response.data.pagination.total_page;\n          this.company_tickets_list = response.data.data.Ticket;\n          this.setpagination(this.page_no);\n        } else if (this.api_status_code.NO_EXISTING_TICKET.MSG_CODE == response.data.message.MSG_CODE) {\n          this.company_tickets_list = [];\n        } else {\n          Swal({\n            title: response.data.message.MSG_CODE,\n            text: response.data.message.MSG,\n            showCancelButton: false,\n            showConfirmButton: false,\n            type: \"error\"\n          })\n        }\n      })\n      .catch((e) => {\n          // console.log(e);\n          this.spinnerOn = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          } else {\n            Swal({\n              type: \"error\",\n              text: this.tlt('admin_ticket_internal_server_msg3'),\n              timer: 2500,\n            });\n          }\n        });\n    },\n    page_require(page) {\n      if (page == 0 || page == this.total_pages + 1) {\n        event.preventDefault();\n      } else {\n        if (page == \"...s\") {\n          this.page_no = Math.ceil((1 + this.page_no) / 2);\n        } else if (page == \"...l\") {\n          this.page_no = Math.ceil((this.total_pages + this.page_no) / 2);\n        } else {\n          this.page_no = page;\n        }\n        this.spinnerOn = true;\n        if (this.filter_status === 'AllTickets'){\n          this.get_ticket_details();\n        } else if(this.is_collapse) {\n          this.get_company_tickets(this.req_comp_name, this.req_comp_id);\n        } else {\n          this.get_company_list(); \n        }\n      }\n    },\n    setpagination(page_no) {\n      this.page_array = [];\n      if (this.total_pages <= 7) {\n        for (let i = 0; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no == 1) {\n        for (let i = 0; i < 4; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no == this.total_pages) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = this.total_pages - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else if (page_no <= 4) {\n        for (let i = 0; i < page_no + 3; i++) {\n          this.page_array.push(i + 1);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      } else if (page_no >= this.total_pages - 4) {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 4; i < this.total_pages; i++) {\n          this.page_array.push(i + 1);\n        }\n      } else {\n        this.page_array.push(1);\n        this.page_array.push(\"...s\");\n        for (let i = page_no - 3; i <= page_no + 3; i++) {\n          this.page_array.push(i);\n        }\n        this.page_array.push(\"...l\");\n        this.page_array.push(this.total_pages);\n      }\n    },\n  },\n}\n</script>\n\n<style>\n.radio label {\n    margin-bottom: 0.3rem !important;\n}\ni[aria-expanded=\"true\"] {\n  color: #192765;\n  text-align: center;\n}\n.dash-modal .close {\n  top: 0px !important;\n  position: inherit !important;\n}\ni:hover {\n  color: #192765;\n}\n.table thead th {\n  vertical-align: bottom;\n  border-bottom: 0px;\n}\n.comment-box_date{\n  position: absolute;\n  margin-top: 6px;\n  top: 4px;\n  right: 2rem;\n}\n.img_icon_comment {\n  cursor: pointer;\n  position: relative;\n  right: 34px;\n  top: 5px;\n  margin-right: -22px;\n  transform: rotate(136deg);\n}\n.status_in_comment b{\n  /* padding: 2px 10px 2px; */\n  border-radius: 4px;\n}\n.ScrollStyle {\n  /* height: 200px; */\n  min-height: 0px;\n  max-height: 250px;\n  overflow-y: auto;\n  /* border: 1px solid #e3e2e5; */\n}\n.ScrollStyle thead th {\n  top: 0;\n  position: sticky;\n}\n.ScrollStyle::-webkit-scrollbar {\n  max-height: 10px;\n  width: 7px;\n  height: 12px;\n  border-radius: 10px;\n  overflow-x: hidden;\n}\n.ScrollStyle::-webkit-scrollbar-track {\n  background: #ffffff;\n  border-radius: 10px;\n}\n.ScrollStyle::-webkit-scrollbar-thumb {\n  background: #27397b;\n  border-radius: 10px;\n}\n.ScrollStyle::-webkit-scrollbar-thumb:hover {\n  background: #19295f;\n  border-radius: 10px;\n}\n.card-act .darkblue-btn{\n  font-size: 14px;\n    color: #fff;\n    background: #273679;\n    border: solid 1px #273679;\n    padding: 5px 15px;\n    font-weight: 400;\n    line-height: 20px;\n    display: inline-block;\n    border-radius: 4px;\n    cursor: pointer;\n    height: 32px;\n    /* margin-top: 1px; */\n}\n</style>"]}]}