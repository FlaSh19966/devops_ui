{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Dashboard.vue","mtime":1645594423483},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGJ1cyB9IGZyb20gIkAvcG9ydGFsL21haW4iOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBSZXF1ZXN0Q2hhcnQgZnJvbSAiQC9wb3J0YWwvY29tcG9uZW50cy9SZXF1ZXN0Q2hhcnQudnVlIjsKaW1wb3J0IEFyZWFDaGFydCBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0FyZWFDaGFydC52dWUiOwppbXBvcnQgQmlsbGluZ0NoYXJ0IGZyb20gIkAvcG9ydGFsL2NvbXBvbmVudHMvQmlsbGluZ0NoYXJ0LnZ1ZSI7CmltcG9ydCBzd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJzsKLy9pbXBvcnQgcGFnZV9ndWlkZSBmcm9tICJAL3BvcnRhbC9taXhpbnMvcGFnZWd1aWRlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIC8vbWl4aW5zOiBbcGFnZV9ndWlkZV0sCiAgcHJvcHM6IHt9LAogIGNvbXBvbmVudHM6IHsKICAgIFJlcXVlc3RDaGFydCwKICAgIEFyZWFDaGFydCwKICAgIEJpbGxpbmdDaGFydCwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAoCiAgICAgICF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikgJiYKICAgICAgdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgJiYKICAgICAgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iCiAgICApIHsKICAgICAgdG9hc3RyLndhcm5pbmcoIlBsZWFzZSBzZWxlY3QgYSBjb21wYW55IG5hbWUgZnJvbSB0aGUgZHJvcGRvd24iKTsKICAgIH0KICAgIGlmICh0aGlzLnVzZXJfcm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSkgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikKICAgICAgICA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkCiAgICAgICAgOiAiIjsKICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKQogICAgICAgID8gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZQogICAgICAgIDogIiI7CiAgICB9CiAgICAvLyBheGlvcwogICAgLy8gICAucG9zdCgKICAgIC8vICAgICBhcGlfY2FsbHMuYmlsbGluZ191c2FnZV91cmwoKSwKICAgIC8vICAgICB7CiAgICAvLyAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICBsb2FkX2RhdGFfYnk6ICJMYXN0IDcgZGF5cyIsCiAgICAvLyAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgIH0sCiAgICAvLyAgICAgewogICAgLy8gICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgIC8vICAgICAgIH0sCiAgICAvLyAgICAgfQogICAgLy8gICApCiAgICAvLyAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgIHRoaXMuU2Vjb25kX2NoYXJ0LmxhYmVscyA9IFtdOwogICAgLy8gICAgIHRoaXMuU2Vjb25kX2NoYXJ0LkNhbGxDb3VudCA9IFtdOwogICAgLy8gICAgIHRoaXMuU2Vjb25kX2NoYXJ0Lk1zZ0V4Y2hhbmdlID0gW107CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbiA9IFtdOwogICAgLy8gICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJObyBEYXRhIGF2YWlsYWJsZSIpIHsKICAgIC8vICAgICAgIGJ1cy4kZW1pdCgKICAgIC8vICAgICAgICAgImNoYXJ0IGlzIHVwZGF0ZWQiLAogICAgLy8gICAgICAgICAiVHJ1ZSIsCiAgICAvLyAgICAgICAgIFtdLAogICAgLy8gICAgICAgICBbXSwKICAgIC8vICAgICAgICAgW10sCiAgICAvLyAgICAgICAgIFtdLAogICAgLy8gICAgICAgICB0aGlzLmJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWUKICAgIC8vICAgICAgICk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YSkgewogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5sYWJlbHMucHVzaChpKTsKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50LnB1c2gocmVzcG9uc2UuZGF0YVtpXS5DYWxsQ291bnQpOwogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5Nc2dFeGNoYW5nZS5wdXNoKHJlc3BvbnNlLmRhdGFbaV0uTXNnRXhjaGFuZ2UpOwogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5UYXNrRXhlY3V0aW9uLnB1c2goCiAgICAvLyAgICAgICAgICAgcmVzcG9uc2UuZGF0YVtpXS5UYXNrRXhlY3V0aW9uCiAgICAvLyAgICAgICAgICk7CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBidXMuJGVtaXQoCiAgICAvLyAgICAgICAgICJiaWxsaW5nIGNoYXJ0IGlzIHVwZGF0ZWQiLAogICAgLy8gICAgICAgICAiVHJ1ZSIsCiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LkNhbGxDb3VudCwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuTXNnRXhjaGFuZ2UsCiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LlRhc2tFeGVjdXRpb24sCiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LmxhYmVscywKICAgIC8vICAgICAgICAgdGhpcy5iYXJfY2hhcnQyX2Ryb3Bkb3duX3ZhbHVlCiAgICAvLyAgICAgICApOwogICAgLy8gICAgIH0KICAgIC8vICAgfSkKICAgIC8vICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgaWYgKAogICAgLy8gICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICkgewogICAgLy8gICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0pOwogICAgYXhpb3MKICAgICAgLnBvc3QoCiAgICAgICAgYXBpX2NhbGxzLmRhc2hib2FyZF9jaGFydF91cmwoKSwKICAgICAgICB7CiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBsb2FkX2RhdGFfYnk6ICJMYXN0IDcgZGF5cyIsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgIH0sCiAgICAgICAgfQogICAgICApCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudXBkYXRlX2NoYXJ0X2RhdGEocmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgIGF4aW9zCiAgICAgIC5wb3N0KAogICAgICAgIGFwaV9jYWxscy5kYXNoYm9hcmRfYm90X2RldGFpbHNfY291bnQoKSwKICAgICAgICB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICBpc19nZXQ6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgfSwKICAgICAgICB9CiAgICAgICkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpKSB7CiAgICAgICAgICB0aGlzLnBlcm1pc3Npb25fbGlzdC5wdXNoKAogICAgICAgICAgICB0aGlzLiRzZXNzaW9uLmdldCgiQ2hhdGJvdE1lbnUiKVtpXS5tYWluX21lbnUubmFtZQogICAgICAgICAgKTsKICAgICAgICAgIGZvciAodmFyIGogaW4gdGhpcy4kc2Vzc2lvbi5nZXQoIkNoYXRib3RNZW51IilbaV0uc3ViX21lbnVfbGlzdCkgewogICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25fbGlzdC5wdXNoKAogICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpW2ldLnN1Yl9tZW51X2xpc3Rbal0ubmFtZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5TdGF0dXMgPT09ICJTdWNjZXNzIikgewogICAgICAgICAgbGV0IHRlbXBfbGlzdCA9IFtdOwogICAgICAgICAgLy8gdHJ5IHsKICAgICAgICAgIC8vICAgbGV0IHRyYWluaW5nX2RhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEuZmlsdGVyKCh4KSA9PiB4LmVudGl0eSA9PT0gIlRyYWluaW5nIik7CiAgICAgICAgICAvLyAgIGlmICgKICAgICAgICAgICAgICAKICAgICAgICAgIC8vICAgICAgIHRyYWluaW5nX2RhdGEubGVuZ3RoID09PSAxCiAgICAgICAgICAvLyAgICkgewogICAgICAgICAgLy8gICAgIHRoaXMuZGlzcGxheV9saXN0LnB1c2godHJhaW5pbmdfZGF0YVswXSkKICAgICAgICAgIC8vICAgfQogICAgICAgICAgLy8gfSBjYXRjaCAoZXJyb3IpIHt9CiAgICAgICAgICAvLyB0cnkgewogICAgICAgICAgLy8gICBsZXQgc3lub255bXNfZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5maWx0ZXIoKHgpID0+IHguZW50aXR5ID09PSAiU3lub255bXMiKTsKICAgICAgICAgIC8vICAgaWYgKAogICAgICAgICAgICAgIAogICAgICAgICAgLy8gICAgICAgc3lub255bXNfZGF0YS5sZW5ndGggPT09IDEKICAgICAgICAgIC8vICAgKSB7CiAgICAgICAgICAvLyAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaChzeW5vbnltc19kYXRhWzBdKQogICAgICAgICAgLy8gICB9CiAgICAgICAgICAvLyB9IGNhdGNoIChlcnJvcikge30KICAgICAgICAgIHZhciB2ZXJpZnlfYm90X3Jlc3BvbnNlID0gZmFsc2UsCiAgICAgICAgICBzdG9yZV9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgZm9yICh2YXIgbiBpbiB0aGlzLnBlcm1pc3Npb25fbGlzdCkgewogICAgICAgICAgICBpZiAodGhpcy5wZXJtaXNzaW9uX2xpc3Rbbl0gPT0gIlZlcmlmeSBCb3QgUmVzcG9uc2UiKSB7CiAgICAgICAgICAgICAgdmVyaWZ5X2JvdF9yZXNwb25zZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5wZXJtaXNzaW9uX2xpc3Rbbl0gPT09ICJTdG9yZSIpewogICAgICAgICAgICAgIHN0b3JlX3NldHRpbmdzID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhLmRhdGEpIHsKICAgICAgICAgICAgbGV0IHB1c2hlZCA9IGZhbHNlOwogICAgICAgICAgICBmb3IgKHZhciBqIGluIHRoaXMucGVybWlzc2lvbl9saXN0KSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkgPT0gdGhpcy5wZXJtaXNzaW9uX2xpc3Rbal0pIHsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5saXN0X2JlbG9uZyA9IHRoaXMubGlzdF9ncm91cF9keW5hbWljX3R5cGUocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSkKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKTsKICAgICAgICAgICAgICAgIHB1c2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHZlcmlmeV9ib3RfcmVzcG9uc2UgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PSAiVmVyaWZ5IFJlc3BvbnNlcyBVbmFuc3dlcmVkIgogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5saXN0X2JlbG9uZyA9IHRoaXMubGlzdF9ncm91cF9keW5hbWljX3R5cGUocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSkKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKTsKICAgICAgICAgICAgICAgIHZlcmlmeV9ib3RfcmVzcG9uc2UgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgc3RvcmVfc2V0dGluZ3MgPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PSAiUHJvZHVjdHMiCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBwdXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmxpc3RfYmVsb25nID0gdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KQogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pOwogICAgICAgICAgICAgICAgc3RvcmVfc2V0dGluZ3MgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIXB1c2hlZCl7CiAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PT0gIlRyYWluaW5nIil7CiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0ubGlzdF9iZWxvbmcgPSB0aGlzLmxpc3RfZ3JvdXBfZHluYW1pY190eXBlKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkpCiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlfbGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YVtpXSkKICAgICAgICAgICAgICAgIHB1c2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCFwdXNoZWQpewogICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkgPT09ICJTeW5vbnltcyIpewogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmxpc3RfYmVsb25nID0gdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KQogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pCiAgICAgICAgICAgICAgICBwdXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZighcHVzaGVkKXsKICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09PSAiQWNjb3VudHMiKXsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5saXN0X2JlbG9uZyA9IHRoaXMubGlzdF9ncm91cF9keW5hbWljX3R5cGUocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSkKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKQogICAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmRpc3BsYXlfbGlzdC5zb3J0KChhLGIpID0+IChhLmxpc3RfYmVsb25nID4gYi5saXN0X2JlbG9uZykgPyAxIDogLTEgKQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICBpZiAoCiAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgfSwKICB1cGRhdGVkKCkgewogICAgYnVzLiRvbigiY29tcGFueSBhdHRyaWJ1dGVzIHVwZGF0ZWQiLCAoZGF0YSkgPT4gewogICAgICBpZiAoZGF0YSA9PSAiVHJ1ZSIpIHsKICAgICAgICBidXMuJGVtaXQoInNlbmQgY29tcGFueSBhdHRyaWJ1dGVzIik7CiAgICAgIH0KICAgIH0pOwogICAgYnVzLiRvbigiY29tcGFueSBuYW1lIGFuZCBjb21wYW55IGlkIiwgKGRhdGExLCBkYXRhMikgPT4gewogICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgIH0pOwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBiYXJfY2hhcnRfZHJvcGRvd25fdmFsdWU6ICJMYXN0IDcgZGF5cyIsCiAgICAgIGJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWU6ICJMYXN0IDcgZGF5cyIsCiAgICAgIGNvbXBhbnluYW1lOiBudWxsLAogICAgICBjb21wYW55aWQ6IG51bGwsCiAgICAgIHBlcm1pc3Npb25fbGlzdDogW10sCiAgICAgIEFQSV9kYXRhOiB7CiAgICAgICAgbGFiZWxzOiBbXSwKICAgICAgICBTdWNjZXNzZnVsOiBbXSwKICAgICAgICBUb3RhbDogW10sCiAgICAgICAgVW5zdWNjZXNzZnVsOiBbXSwKICAgICAgICB4QXhpc0xhYmVsOiAiIiwKICAgICAgfSwKICAgICAgU2Vjb25kX2NoYXJ0OiB7CiAgICAgICAgbGFiZWxzOiBbXSwKICAgICAgICBDYWxsQ291bnQ6IFtdLAogICAgICAgIE1zZ0V4Y2hhbmdlOiBbXSwKICAgICAgICBUYXNrRXhlY3V0aW9uOiBbXSwKICAgICAgfSwKICAgICAgQ29uY3VycmVudF9Vc2Vyc19EYXRhOiB7CiAgICAgICAgbGFiZWxzOiBbXSwKICAgICAgICBkYXRhOiBbXSwKICAgICAgfSwKICAgICAgY29uY3VycmVudF91c2Vyc19tb250aDogIiIsCiAgICAgIHVzZXJfcm9sZTogdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpCiAgICAgICAgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZQogICAgICAgIDogIiIsCiAgICAgIGludGVudF9jb3VudDogNTMsCiAgICAgIGludGVudF9jb3VudF9kaXNwbGF5OiAwLAogICAgICBkaXNwbGF5X2xpc3Q6IFtdLAogICAgICBwcmltYXJ5X2l0ZW1fZW50aXRpZXNfbGlzdDogWyJJbnRlbnRzIiwgIlF1ZXN0aW9ucyIsICJSZXNwb25zZXMiLCAiVHJhaW5pbmciXSwKICAgICAgZGFuZ2VyX2l0ZW1fZW50aXRpZXNfbGlzdDogWwogICAgICAgICJWZXJpZnkgUmVzcG9uc2VzIFVuYW5zd2VyZWQiLAogICAgICAgICJWZXJpZnkgQm90IFJlc3BvbnNlIiwKICAgICAgICAiUHJvZHVjdHMiLAogICAgICAgICJTeW5vbnltcyIsCiAgICAgICAgIkFjY291bnRzIgogICAgICBdLAogICAgICBpbmZvX2l0ZW1fZW50aXRpZXNfbGlzdDogW10sCiAgICAgIHN1Y2Nlc3NfaXRlbV9pbmZvX2xpc3Q6IFsiQ2hlY2sgQm90IFJlc3BvbnNlIiwiQm90IENvbmZpZ3VyYXRpb24iXSwKICAgICAgaXRlbV9saXN0X29yZGVyOiBbImRhbmdlcl9pdGVtX2VudGl0aWVzX2xpc3QiLCAic3VjY2Vzc19pdGVtX2luZm9fbGlzdCIsICJwcmltYXJ5X2l0ZW1fZW50aXRpZXNfbGlzdCJdLAogICAgICBzcGlubmVyT246IGZhbHNlLAogICAgICAvL3RvdXJfZ3VpZGVfaWNvbjogcmVxdWlyZSgiQC9wb3J0YWwvYXNzZXRzL2ltZy9pbmZvX2ljb24uc3ZnIiksCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8gZ3JhcGhfMl9iYXJfY2hhcnRfZHJvcGRvd24oKSB7CiAgICAvLyAgIHRoaXMuYmFyX2NoYXJ0Ml9kcm9wZG93bl92YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5iYXJfY2hhcnQyX2Ryb3Bkb3duX3ZhbHVlKQogICAgLy8gICBheGlvcwogICAgLy8gICAgIC5wb3N0KAogICAgLy8gICAgICAgYXBpX2NhbGxzLmJpbGxpbmdfdXNhZ2VfdXJsKCksCiAgICAvLyAgICAgICB7CiAgICAvLyAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgLy8gICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgbG9hZF9kYXRhX2J5OiB0aGlzLmJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWUsCiAgICAvLyAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICB9LAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKQogICAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzID0gW107CiAgICAvLyAgICAgICB0aGlzLlNlY29uZF9jaGFydC5DYWxsQ291bnQgPSBbXTsKICAgIC8vICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0Lk1zZ0V4Y2hhbmdlID0gW107CiAgICAvLyAgICAgICB0aGlzLlNlY29uZF9jaGFydC5UYXNrRXhlY3V0aW9uID0gW107CiAgICAvLyAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiTm8gRGF0YSBhdmFpbGFibGUiKSB7CiAgICAvLyAgICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEpIHsKICAgIC8vICAgICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5sYWJlbHMucHVzaChpKTsKICAgIC8vICAgICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5DYWxsQ291bnQucHVzaChyZXNwb25zZS5kYXRhW2ldLkNhbGxDb3VudCk7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuTXNnRXhjaGFuZ2UucHVzaChyZXNwb25zZS5kYXRhW2ldLk1zZ0V4Y2hhbmdlKTsKICAgIC8vICAgICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5UYXNrRXhlY3V0aW9uLnB1c2goCiAgICAvLyAgICAgICAgICAgICByZXNwb25zZS5kYXRhW2ldLlRhc2tFeGVjdXRpb24KICAgIC8vICAgICAgICAgICApOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgfSkKICAgIC8vICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgIGlmICgKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgIC8vICAgICAgICkgewogICAgLy8gICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIGJhcl9jaGFydF9kcm9wZG93bigpIHsKICAgICAgdGhpcy5iYXJfY2hhcnRfZHJvcGRvd25fdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoCiAgICAgICAgICBhcGlfY2FsbHMuZGFzaGJvYXJkX2NoYXJ0X3VybCgpLAogICAgICAgICAgewogICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIGxvYWRfZGF0YV9ieTogdGhpcy5iYXJfY2hhcnRfZHJvcGRvd25fdmFsdWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy51cGRhdGVfY2hhcnRfZGF0YShyZXNwb25zZS5kYXRhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlX2NoYXJ0X2RhdGEobWVzc2FnZSkgewogICAgICB0aGlzLkFQSV9kYXRhLmxhYmVscyA9IFtdOwogICAgICB0aGlzLkFQSV9kYXRhLlN1Y2Nlc3NmdWwgPSBbXTsKICAgICAgdGhpcy5BUElfZGF0YS5Ub3RhbCA9IFtdOwogICAgICB0aGlzLkFQSV9kYXRhLlVuc3VjY2Vzc2Z1bCA9IFtdOwogICAgICBpZiAobWVzc2FnZSA9PSAiTm8gRGF0YSBhdmFpbGFibGUiKSB7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiBtZXNzYWdlKSB7CiAgICAgICAgICB0aGlzLkFQSV9kYXRhLmxhYmVscy5wdXNoKGkpOwogICAgICAgICAgdGhpcy5BUElfZGF0YS5TdWNjZXNzZnVsLnB1c2gobWVzc2FnZVtpXS5TdWNjZXNzZnVsKTsKICAgICAgICAgIHRoaXMuQVBJX2RhdGEuVG90YWwucHVzaChtZXNzYWdlW2ldLlRvdGFsKTsKICAgICAgICAgIHRoaXMuQVBJX2RhdGEuVW5zdWNjZXNzZnVsLnB1c2gobWVzc2FnZVtpXS5VbnN1Y2Nlc3NmdWwpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdvX3RvX3BhZ2UocGFnZV9uYW1lKSB7CiAgICAgIGlmIChwYWdlX25hbWUgPT0gIlZlcmlmeSBSZXNwb25zZXMgVW5hbnN3ZXJlZCIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiVmVyaWZ5IEJvdCBSZXNwb25zZSIsCiAgICAgICAgICBwYXJhbXM6IHsgbW9kYWxfb3Blbl9zd2l0Y2hfdGFiOiBmYWxzZSB9LAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYocGFnZV9uYW1lID09ICJTeW5vbnltcyIpewogICAgICAgIHN3YWwoewogICAgICAgICAgdGl0bGU6ICJBcmUgWW91IFN1cmU/IiwKICAgICAgICAgIHRleHQ6ICJZb3Ugd2FudCB0byBUcmFpbiBUaGUgTW9kZWw/IiwKICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIiwKICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZSwKICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgYXBpX2NhbGxzLnRyYWluX2ludGVudF9uZXJfbW9kZWwoKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICAgICAgdXBkYXRlX21vZGVsOiB0cnVlLAogICAgICAgICAgICAgICAgICB1cGRhdGVfbW9kZWxfc3RhdHVzOiB0cnVlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIndhbnRfbW9kZWxfc3RhdHVzIix0cnVlKTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TR19DT0RFID09PSA0MDQ2KSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKHJlc3BvbnNlLmRhdGEuTVNHKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0dfQ09ERSA9PT0gMTAzNCkgewogICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IocmVzcG9uc2UuZGF0YS5NU0cpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJTb21lIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLiIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHBhZ2VfbmFtZSA9PSAiUHJvZHVjdHMiKXsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiL2JvdC9zdG9yZS1jb25maWd1cmF0aW9uIiwKICAgICAgICB9KTsKICAgICAgfSAKICAgICAgZWxzZSBpZiAocGFnZV9uYW1lPT0iQWNjb3VudHMiKXsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnU2V0dGluZ3MnLHBhcmFtczp7U3Vic2NyaXB0aW9uOnRydWV9CiAgICAgICAgfSkKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiBwYWdlX25hbWUsCiAgICAgICAgICBwYXJhbXM6IHsgbW9kYWxfb3Blbl9zd2l0Y2hfdGFiOiB0cnVlIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpbnRlbnRzX2NvdW50X2Z1bmN0aW9uKCkgewogICAgICBsZXQgc3RhcnRUaW1lc3RhbXAgPSBudWxsOwogICAgICBsZXQgZHVyYXRpb24gPSAyMDAwOwogICAgICBsZXQgZW5kID0gdGhpcy5pbnRlbnRfY291bnQ7CiAgICAgIGxldCBzdGFydCA9IDA7CiAgICAgIGNvbnN0IHN0ZXAgPSAodGltZXN0YW1wKSA9PiB7CiAgICAgICAgaWYgKCFzdGFydFRpbWVzdGFtcCkgc3RhcnRUaW1lc3RhbXAgPSB0aW1lc3RhbXA7CiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbigodGltZXN0YW1wIC0gc3RhcnRUaW1lc3RhbXApIC8gZHVyYXRpb24sIDEpOwogICAgICAgIHRoaXMuaW50ZW50X2NvdW50X2Rpc3BsYXkgPSBNYXRoLmZsb29yKAogICAgICAgICAgcHJvZ3Jlc3MgKiAoZW5kIC0gc3RhcnQpICsgc3RhcnQKICAgICAgICApOwogICAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHsKICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7CiAgICAgICAgfQogICAgICB9OwogICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApOwogICAgfSwKICAgIGxpc3RfZ3JvdXBfZHluYW1pY19jbGFzcyhyb3cpIHsKICAgICAgaWYgKHRoaXMucHJpbWFyeV9pdGVtX2VudGl0aWVzX2xpc3QuaW5jbHVkZXMocm93KSkgewogICAgICAgIHJldHVybiAibGlzdC1ncm91cC1pdGVtLXByaW1hcnkiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGFuZ2VyX2l0ZW1fZW50aXRpZXNfbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJsaXN0LWdyb3VwLWl0ZW0tZGFuZ2VyIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm9faXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImxpc3QtZ3JvdXAtaXRlbS1pbmZvIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLnN1Y2Nlc3NfaXRlbV9pbmZvX2xpc3QuaW5jbHVkZXMocm93KSkgewogICAgICAgIHJldHVybiAibGlzdC1ncm91cC1pdGVtLXN1Y2Nlc3MiOwogICAgICB9CiAgICB9LAogICAgbGlzdF9ncm91cF9keW5hbWljX3R5cGUocm93KSB7CiAgICAgIC8qKiAgCiAgICAgICAgKiBAcGFyYW0tIHJvdyBkZXRlcm1pbmVzIHdoaWNoIGxpc3QgZ3JvdSBwaXQgYmVsb25ncyB0by4KICAgICAgICAqIEByZXR1cm5zLSB0aGUgcmVzcGVjdGl2ZSBsaXN0IGl0ZW0gY29sb3VyIHByZWZpeGVkIHdpdGggYWxwaGFiZXQgZm9yIGVhc3kgc29ydGluZyBhcyBwZXIgb3VyIHJlcXVpcmVtZW50CiAgICAgICovCiAgICAgIGlmICh0aGlzLnByaW1hcnlfaXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImQtcHJpbWFyeSI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYW5nZXJfaXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImEtZGFuZ2VyIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm9faXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImItaW5mbyI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdWNjZXNzX2l0ZW1faW5mb19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImMtc3VjY2VzcyI7CiAgICAgIH0KICAgIH0sCiAgICBkaXNwbGF5X2xpc3RfZHluYW1pY19jbGFzcygpIHsKICAgICAgaWYgKHRoaXMuZGlzcGxheV9saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gInBhZGRpbmc6IDIwcHggMjVweDsiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAicGFkZGluZzogMTBweCAyNXB4OyI7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},null]}