{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue","mtime":1643027096144},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBTY3JpcHQgfSBmcm9tICJ2bSI7CmltcG9ydCB7IHRydW5jYXRlIH0gZnJvbSAiZnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1fbGlzdDogW10sCiAgICAgIGNoZWNrZWRfbGlzdDogW10sCiAgICAgIGZpbGVfbGFiZWw6IG51bGwsCiAgICAgIGFkZF9lZGl0OiB0cnVlLAogICAgICBkZWxldGVfbGlzdDogW10sCiAgICAgIHRyYXZlbDogWzAsIDEsIDJdLAogICAgICBlZGl0X2luZGV4OiBudWxsLAogICAgICBkb2NfaWQ6ICIiLAogICAgICBvbGRfZmlsZV9uYW1lOiAiIiwKICAgICAgcHJvZHVjdF9uYW1lOiAiIiwKICAgICAgY3N2ZmlsZTogIiIsCiAgICAgIGNzdmZpbGVuYW1lOiAiQ2hvb3NlIENTViBGaWxlIiwKICAgICAgZWRpdHByb2R1Y3RuYW1lOiBmYWxzZSwKICAgICAgZWRpdGNzdmZpbGU6IGZhbHNlLAogICAgICBwYWdlX25vOiAxLAogICAgICBwZXJfcGFnZTogMTAwLAogICAgICB0b3RhbF9wYWdlczogMCwKICAgICAgcGFnZV9hcnJheTogW10sCiAgICAgIG51bWJlcl9vZl9yb3dzOiAwLAogICAgICBuZXdfcHJvZHVjdDoge30sCiAgICAgIGlzZWRpdHByb2R1Y3RpZDogZmFsc2UsCiAgICAgIGlzZWRpdGNhdGVnb3J5bmFtZTogZmFsc2UsCiAgICAgIHZpZXd1cmw6IG51bGwsCiAgICAgIGNvbF9saXN0OiBbXSwKICAgICAgY29sX2xlbmd0aDogMCwKICAgICAgaXNvazogZmFsc2UsCiAgICAgIGNvbF9rZXk6IFtdLAogICAgICAvLyBzZWFyY2hfYnk6ICcnLAogICAgICBzZWFyY2hfbmFtZTogIiIsCiAgICAgIHNlbGVjdF9saXN0OiBbXSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBheGlvcwogICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBpc2dldGNzdjogdHJ1ZSwKICAgICAgICBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlCiAgICAgIH0sewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAoCiAgICAgICAgICByZXNwb25zZS5kYXRhLk1TRyA9PSAiTm8gUHJvZHVjdHMgQWRkZWQgWWV0IiB8fAogICAgICAgICAgcmVzcG9uc2UuZGF0YSA9PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiB8fAogICAgICAgICAgcmVzcG9uc2UuZGF0YS5jc3ZmaWxlLmxlbmd0aCA9PSAwCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLmZvcmRlZmF1bHQoKTsKICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuY3N2ZmlsZS5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuaXRlbUxpc3QocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyB2YXIgdm0gPSB0aGlzOwogICAgLy8gJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uKCkgewogICAgLy8gICBpZiAoJCh0aGlzKS5pcygiOmNoZWNrZWQiKSkgewogICAgLy8gICAgIC8vICQoJ2RpdjppbnB1dCcpLnByb3AoJ2NoZWNrZWQnLHRydWUpOwogICAgLy8gICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgLy8gICAgIGNvbnNvbGUubG9nKCJoZWVleSIpOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgLy8gICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgIC8vICAgICBjb25zb2xlLmxvZygiaGVlZXkyIik7CiAgICAvLyAgIH0KICAgIC8vIH0pOwogIH0sCiAgLy8gY2hlY2tBbGwoZWxlKSB7CiAgLy8gICAgICB2YXIgY2hlY2tib3hlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpOwogIC8vICAgICAgaWYgKGVsZS5jaGVja2VkKSB7CiAgLy8gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja2JveGVzLmxlbmd0aDsgaSsrKSB7CiAgLy8gICAgICAgICAgICAgIGlmIChjaGVja2JveGVzW2ldLnR5cGUgPT0gJ2NoZWNrYm94JykgewogIC8vICAgICAgICAgICAgICAgICAgY2hlY2tib3hlc1tpXS5jaGVja2VkID0gdHJ1ZTsKICAvLyAgICAgICAgICAgICAgfQogIC8vICAgICAgICAgIH0KICAvLyAgICAgIH0gZWxzZSB7CiAgLy8gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGVja2JveGVzLmxlbmd0aDsgaSsrKSB7CiAgLy8gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpCiAgLy8gICAgICAgICAgICAgIGlmIChjaGVja2JveGVzW2ldLnR5cGUgPT0gJ2NoZWNrYm94JykgewogIC8vICAgICAgICAgICAgICAgICAgY2hlY2tib3hlc1tpXS5jaGVja2VkID0gZmFsc2U7CiAgLy8gICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICB9CiAgLy8gICAgICB9CiAgLy8gIH0sCiAgbWV0aG9kczogewogICAgbWFrZV90cnVlKCkgewogICAgICB0aGlzLmlzb2sgPSB0cnVlOwogICAgfSwKICAgIGRvd25sb2FkX3NhbXBsZV9maWxlKCkgewogICAgICBsZXQgc2FtcGxlX2Nzdl9maWxlX3VybCA9ICIiOwogICAgICB3aW5kb3cub3BlbihzYW1wbGVfY3N2X2ZpbGVfdXJsLCAiX2JsYW5rIik7CiAgICB9LAogICAgZm9yZGVmYXVsdCgpIHsKICAgICAgKHRoaXMubmV3X3Byb2R1Y3RbIkNhdGVnb3J5SWQiXSA9IG51bGwpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJDYXRlZ29yeU5hbWUiXSA9ICIiKSwKICAgICAgICAodGhpcy5uZXdfcHJvZHVjdFsiUHJvZHVjdElkIl0gPSBudWxsKSwKICAgICAgICAodGhpcy5uZXdfcHJvZHVjdFsiUHJvZHVjdE5hbWUiXSA9ICIiKSwKICAgICAgICAodGhpcy5uZXdfcHJvZHVjdFsiUHJvZHVjdFVybCJdID0gIiIpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJQcm9kdWN0SW1hZ2VVcmwiXSA9ICIiKSwKICAgICAgICAodGhpcy5uZXdfcHJvZHVjdFsiUXVhbnRpdHkiXSA9IG51bGwpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJVbml0UHJpY2UiXSA9IG51bGwpLAogICAgICAgICh0aGlzLm5ld19wcm9kdWN0WyJXZWlnaHQiXSA9IG51bGwpLAogICAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiQ0FURUdPUlkgSUQiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIkNhdGVnb3J5SWQiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJDQVRFR09SWSBOQU1FIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJDYXRlZ29yeU5hbWUiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJQUk9EVUNUIElEIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJQcm9kdWN0SWQiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJQUk9EVUNUIE5BTUUiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlByb2R1Y3ROYW1lIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiUFJPRFVDVCBVUkwiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlByb2R1Y3RVcmwiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJQUk9EVUNUIElNQUdFIFVSTCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUHJvZHVjdEltYWdlVXJsIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiUVVBTlRJVFkiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlF1YW50aXR5Iik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiVU5JVCBQUklDRSIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiVW5pdFByaWNlIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiV0VJR0hUIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJXZWlnaHQiKTsKICAgICAgdGhpcy5jb2xfbGVuZ3RoID0gOTsKICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgIH0sCiAgICBkb3dubG9hZF9jc3YoKSB7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc2Rvd25sb2FkOiB0cnVlCiAgICAgICAgfSx7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgIT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgd2luZG93Lm9wZW4ocmVzcG9uc2UuZGF0YS5maWxlZG93bmxvYWR1cmwsICJfYmxhbmsiKTsKICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAgICAgIlRyeSBVcGxvYWRpbmcgRmlsZS9Qcm9kdWN0IiwKICAgICAgICAgICAgICAiRXJyb3IgT2NjdXJlZCBXaGlsZSBEb3dubG9hZGluZyBGaWxlIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaF9wcm9kdWN0KCkgewogICAgICAvLyBpZih0aGlzLnNlYXJjaF9ieSE9JycpewogICAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSAhPSAiIikgewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgaXNzZWFyY2g6IHRydWUsCiAgICAgICAgICAgIC8vIHNlYXJjaGJ5OiB0aGlzLnNlYXJjaF9ieSwKICAgICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICBwYWdlbm86IHRoaXMucGFnZV9ubwogICAgICAgICAgfSx7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyAhPSAiTk8gUFJPRFVDVFMgRk9VTkQiKSB7CiAgICAgICAgICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLml0ZW1fbGlzdCA9IFtdOwogICAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucHJvZHVjdHMubGVuZ3RoOwogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pdGVtX2xpc3QucHVzaChyZXNwb25zZS5kYXRhLnByb2R1Y3RzW2ldKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2goZmFsc2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLml0ZW1fbGlzdCk7CiAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEuUGFnZUNvdW50OwogICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiTm8gTWF0Y2ggRm91bmQiKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIkVudGVyIHByb3BlciBkYXRhIGZvciBzZWFyY2hpbmciKTsKICAgICAgfQogICAgICAvLyB9ZWxzZXsKICAgICAgLy8gICB0b2FzdHIuZXJyb3IoIlNlbGVjdCBoZWFkZXIgZm9yIHNlYXJjaGluZyIpOwogICAgICAvLyB9CiAgICB9LAogICAgY2hhbmdlX2lkKCkgewogICAgICB0aGlzLmlzZWRpdHByb2R1Y3RpZCA9IHRydWU7CiAgICB9LAogICAgdmlldyhpbmRleCkgewogICAgICB0aGlzLnZpZXd1cmwgPSB0aGlzLml0ZW1fbGlzdFtpbmRleF1bIlByb2R1Y3RJbWFnZVVybCJdOwogICAgfSwKICAgIGl0ZW1MaXN0KG1lc3NhZ2UpIHsKICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IG1lc3NhZ2UuY3N2ZmlsZS5sZW5ndGg7CiAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBtZXNzYWdlLlBhZ2VDb3VudDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmNzdmZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLml0ZW1fbGlzdC5wdXNoKG1lc3NhZ2UuY3N2ZmlsZVtpXSk7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbbWVzc2FnZS5maWVsZHNbaV0ucmVwbGFjZSgiICIsICIiKS5yZXBsYWNlKCIgIiwgIiIpXSA9CiAgICAgICAgICAiIjsKICAgICAgICB0aGlzLmNvbF9saXN0LnB1c2gobWVzc2FnZS5maWVsZHNbaV0pOwogICAgICAgIGlmICgKICAgICAgICAgIG1lc3NhZ2UuZmllbGRzW2ldICE9ICJQcm9kdWN0IFVybCIgJiYKICAgICAgICAgIG1lc3NhZ2UuZmllbGRzW2ldICE9ICJQcm9kdWN0IEltYWdlIFVybCIKICAgICAgICApIHsKICAgICAgICAgIHRoaXMuc2VsZWN0X2xpc3QucHVzaChtZXNzYWdlLmZpZWxkc1tpXSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY29sX2tleS5wdXNoKG1lc3NhZ2UuZmllbGRzW2ldLnJlcGxhY2UoIiAiLCAiIikucmVwbGFjZSgiICIsICIiKSk7CiAgICAgIH0KICAgICAgdGhpcy5jb2xfbGVuZ3RoID0gbWVzc2FnZS5maWVsZHMubGVuZ3RoOwogICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgIH0sCiAgICBkZWxldGVfcHJvZHVjdChpbmRleCkgewogICAgICB0aGlzLmNoZWNrX2xpc3RfYXJyYXkoaW5kZXgpOwogICAgICB0aGlzLmRlbGV0ZV9tdWx0aXBsZV9wcm9kdWN0KCk7CiAgICB9LAogICAgZGVsZXRlX211bHRpcGxlX3Byb2R1Y3QoKSB7CiAgICAgIHZhciBsZW4gPSB0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jaGVja2VkX2xpc3RbaV0pIHsKICAgICAgICAgIHRoaXMuZGVsZXRlX2xpc3QucHVzaCh7CiAgICAgICAgICAgIGlkOiB0aGlzLml0ZW1fbGlzdFtpXS5Eb2N1bWVudElkCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6Ik5vIHByb2R1Y3Qgc2VsZWN0ZWQhIiwKICAgICAgICAgIHRleHQ6IiIsCiAgICAgICAgICB0eXBlOiJlcnJvciIsCiAgICAgICAgICB0aW1lcjoyMDAwLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICBkb2NpZHM6IHRoaXMuZGVsZXRlX2xpc3QsCiAgICAgICAgICAgICAgICBpc2RlbGV0ZTogdHJ1ZQogICAgICAgICAgICAgIH0sewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIlByb2R1Y3RzIERlbGV0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiJEZWxldGVkISIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDoiWW91ciBwcm9kdWN0cyBoYXZlIGJlZW4gZGVsZXRlZC4iLAogICAgICAgICAgICAgICAgICAgIHR5cGU6InN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IkVycm9yISEiLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IkVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgZmlsZSIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRGaWxlKGUpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgdGhpcy5jc3ZmaWxlbmFtZSA9IGZpbGUubmFtZTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHsKICAgICAgICB0aGlzLmNzdmZpbGUgPSByZWFkZXIucmVzdWx0OwogICAgICB9OwogICAgICB0aGlzLmVkaXRjc3ZmaWxlID0gdHJ1ZTsKICAgIH0sCiAgICBjaGVja19saXN0X2FycmF5KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PSAiYWxsIikgewogICAgICAgIHZhciByb2xlX2xlbmd0aCA9IHRoaXMubnVtYmVyX29mX3Jvd3M7CiAgICAgICAgdmFyIGNoZWNrZWRib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W3R5cGU9Y2hlY2tib3hdIik7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb2xlX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdFtpXSA9ICF0aGlzLmNoZWNrZWRfbGlzdFtpXTsKICAgICAgICB9CiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcm9sZV9sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGNoZWNrZWRib3hlc1tpXS5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgY2hlY2tlZGJveGVzW2ldLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoZWNrZWRib3hlc1tpXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3RbaW5kZXhdID0gIXRoaXMuY2hlY2tlZF9saXN0W2luZGV4XTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyhyb2xlX2xlbmd0aCxjaGVja2VkYm94ZXMsdGhpcy5jaGVja2VkX2xpc3QpOwogICAgfSwKICAgIGVkaXRfaXRlbShpbmRleCkgewogICAgICB0aGlzLm5ld19wcm9kdWN0ID0ge307CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xfbGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV0gPSB0aGlzLml0ZW1fbGlzdFtpbmRleF1bCiAgICAgICAgICB0aGlzLmNvbF9rZXlbaV0KICAgICAgICBdOwogICAgICB9CiAgICAgIHRoaXMuZG9jX2lkID0gdGhpcy5pdGVtX2xpc3RbaW5kZXhdLkRvY3VtZW50SWQ7CiAgICAgIHRoaXMuYWRkX2VkaXQgPSBmYWxzZTsKICAgIH0sCiAgICBhZGRfY3N2ZmlsZSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMuY3N2ZmlsZW5hbWUgPT0gIiIpIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBzZWxlY3QgY3N2IGZpbGUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgY3N2ZmlsZW5hbWU6IHRoaXMuY3N2ZmlsZW5hbWUsCiAgICAgICAgICAgIGNzdmZpbGVkYXRhOiB0aGlzLmNzdmZpbGUuc3BsaXQoImJhc2U2NCwiKVsxXSwKICAgICAgICAgICAgaXN1cGxvYWQ6IHRydWUKICAgICAgICAgIH0sewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiRmlsZSBVcGxvYWRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIllvdXIgZmlsZSBoYXMgYmVlbiB1cGxvYWRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTWlzc2luZ19WYWx1ZXMpIHsKICAgICAgICAgICAgICB2YXIgbXNnID0gIiI7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLk1pc3NpbmdfVmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBtc2cgPSBtc2cuY29uY2F0KHJlc3BvbnNlLmRhdGEuTWlzc2luZ19WYWx1ZXNbaV0sICI8YnI+Iik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiTWlzc2luZyBWYWx1ZXMgSW4gQWJvdmUgQ29sdW1ucyIsIG1zZyk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIkVycm9yIG9jY3VyZWQgd2hpbGUgdXBsb2FkaW5nIGZpbGUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRfaXRlbSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMuYWRkX2VkaXQpIHsKICAgICAgICBsZXQgaXNmaWxsZWQgPSB0cnVlOwogICAgICAgIGxldCBpOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbF9sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV0gPT0gIiIgfHwKICAgICAgICAgICAgdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dID09IG51bGwKICAgICAgICAgICkgewogICAgICAgICAgICBpc2ZpbGxlZCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaXNmaWxsZWQpIHsKICAgICAgICAgIGxldCB4OwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY29sX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHggPSB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV07CiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoeCkpKSB7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dID0gTnVtYmVyKAogICAgICAgICAgICAgICAgdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgcHJvZHVjdGRldGFpbHM6IHRoaXMubmV3X3Byb2R1Y3QsCiAgICAgICAgICAgICAgaXNhZGRwcm9kdWN0OiB0cnVlCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIlByb2R1Y3QgQWRkZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlRoZSBwcm9kdWN0IGhhcyBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiRXJyb3Igb2NjdXJlZCB3aGlsZSBhZGRpbmcgcHJvZHVjdCIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIEZpbGwgQWxsIEZpZWxkcyIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHJ1ZSkgewogICAgICAgICAgbGV0IHg7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHggPSB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV07CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHgpOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgaXNOYU4oTnVtYmVyKHgpKSB8fAogICAgICAgICAgICAgIHggPT0gdHJ1ZSB8fAogICAgICAgICAgICAgIHggPT0gZmFsc2UgfHwKICAgICAgICAgICAgICB4ID09ICIiIHx8CiAgICAgICAgICAgICAgeCA9PSBudWxsCiAgICAgICAgICAgICkgewogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9IE51bWJlcigKICAgICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIHByb2R1Y3RkZXRhaWxzOiB0aGlzLm5ld19wcm9kdWN0LAogICAgICAgICAgICAgIGRvY2lkOiB0aGlzLmRvY19pZCwKICAgICAgICAgICAgICBpc2VkaXRwcm9kdWN0aWQ6IHRoaXMuaXNlZGl0cHJvZHVjdGlkLAogICAgICAgICAgICAgIGlzZWRpdDogdHJ1ZQogICAgICAgICAgICB9LHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJDaGFuZ2VzIEFwcGxpZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlRoZSBwcm9kdWN0IGhhcyBiZWVuIGVkaXRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIkVycm9yIG9jY3VyZWQgd2hpbGUgZWRpdGluZyBwcm9kdWN0Iik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMubmV3X3Byb2R1Y3QgPSB7fTsKICAgICAgdGhpcy5lZGl0cHJvZHVjdGlkID0gZmFsc2U7CiAgICB9LAogICAgcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgICBpZiAoaW5kZXggPT0gdGhpcy5wYWdlX25vKSB7CiAgICAgICAgcmV0dXJuICIgYWN0aXZlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBjYWxsc2VhcmNoKCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLnNlYXJjaF9wcm9kdWN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgICAgdGhpcy5wYWdlX2FycmF5ID0gW107CiAgICAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICBmb3IgKGxldCBpID0gdGhpcy50b3RhbF9wYWdlcyAtIDQ7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA8PSA0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlX25vICsgMzsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPj0gdGhpcy50b3RhbF9wYWdlcyAtIDQpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDM7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgZm9yIChsZXQgaSA9IHBhZ2Vfbm8gLSAzOyBpIDw9IHBhZ2Vfbm8gKyAzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfSwKICAgIHBhZ2VfcmVxdWlyZShwYWdlKSB7CiAgICAgIGlmIChwYWdlID09IDAgfHwgcGFnZSA9PSB0aGlzLnRvdGFsX3BhZ2VzICsgMSkgewogICAgICB9IGVsc2UgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9ICIiKSB7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBpc3NlYXJjaDogdHJ1ZSwKICAgICAgICAgICAgICAvLyBzZWFyY2hieTogdGhpcy5zZWFyY2hfYnksCiAgICAgICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8KICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuaXRlbV9saXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLmNvbF9saXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAgICAgICB0aGlzLmNvbF9rZXkgPSBbXTsKICAgICAgICAgICAgICB0aGlzLmNvbF9sZW5ndGggPSAwOwogICAgICAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RzLmxlbmd0aDsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuaXRlbV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5wcm9kdWN0c1tpXSk7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdC5wdXNoKGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEuUGFnZUNvdW50OwogICAgICAgICAgICAgIHRoaXMuc2V0cGFnaW5hdGlvbih0aGlzLnBhZ2Vfbm8pOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgaXNnZXRjc3Y6IHRydWUsCiAgICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgICAgICB9LHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIFByb2R1Y3RzIEFkZGVkIFlldCIgfHwKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIgfHwKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuY3N2ZmlsZS5sZW5ndGggPT0gMAogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy5mb3JkZWZhdWx0KCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLmNzdmZpbGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1fbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5jb2xfbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5jb2xfa2V5ID0gW107CiAgICAgICAgICAgICAgICB0aGlzLmNvbF9sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgdGhpcy5pdGVtTGlzdChyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsK"},null]}