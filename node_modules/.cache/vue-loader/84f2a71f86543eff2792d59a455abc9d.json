{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/Components/WhatsappDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/Components/WhatsappDetails.vue","mtime":1655466542524},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZXNzYWdpbmdGcmFtZXdvcmtzIiwKICBjb21wb25lbnRzOiB7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYmlnX3NwaW5uZXI6IGZhbHNlLAogICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICBmYl9hY2Nlc3NfdG9rZW46ICIiLAogICAgICBmYl91c2VyX2lkOiAiIiwKICAgICAgdXNlcl9hY2Nlc3NfdG9rZW46IG51bGwsCiAgICAgIHdoYXRzYXBwX2J1c2luZXNzX2lkc19kYXRhOiBbXSwKICAgICAgd2hhdHNhcHBfYnVzaW5lc3NfaWRzOiBbXSwKICAgICAgd2FiYV9pZDogbnVsbAogICAgICAvLyBmYl9tZXNzYWdpbmdfdXJsX3JlZ2V4OiAvWyhtLm1lKVwvP2EtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fVwuW2Etel17Miw2fVxiKFstYS16QS1aMC05QDolX1wrLn4jPyYvLz1dKikvaSwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmJfcGFnZV9lbmFibGVkKG5ld1ZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhuZXdWYWwpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzW3dlYnMgKyAiX2RhdGEiXS5pc192aXNpYmxlX29uX2JvdCk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsgICAKICAgIHRoaXMuZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKTsKICAgIHZhciB0ZW1wID0gewogICAgICAgICJhcHBfaWQiOiAiNDE0MzExMDA3NDA4MDE0IiwKICAgICAgICAidHlwZSI6ICJVU0VSIiwKICAgICAgICAiYXBwbGljYXRpb24iOiAiQ2Vuc2UgQUkiLAogICAgICAgICJkYXRhX2FjY2Vzc19leHBpcmVzX2F0IjogMTY2MzIyNDEyMSwKICAgICAgICAiZXhwaXJlc19hdCI6IDE2NTU0NTI4MDAsCiAgICAgICAgImlzX3ZhbGlkIjogdHJ1ZSwKICAgICAgICAic2NvcGVzIjogWwogICAgICAgICAgICAicGFnZXNfc2hvd19saXN0IiwKICAgICAgICAgICAgImJ1c2luZXNzX21hbmFnZW1lbnQiLAogICAgICAgICAgICAicGFnZXNfbWVzc2FnaW5nIiwKICAgICAgICAgICAgInBhZ2VzX3JlYWRfZW5nYWdlbWVudCIsCiAgICAgICAgICAgICJwYWdlc19tYW5hZ2VfbWV0YWRhdGEiLAogICAgICAgICAgICAid2hhdHNhcHBfYnVzaW5lc3NfbWVzc2FnaW5nIiwKICAgICAgICAgICAgInB1YmxpY19wcm9maWxlIgogICAgICAgIF0sCiAgICAgICAgImdyYW51bGFyX3Njb3BlcyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInNjb3BlIjogInBhZ2VzX3Nob3dfbGlzdCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInNjb3BlIjogImJ1c2luZXNzX21hbmFnZW1lbnQiLAogICAgICAgICAgICAgICAgInRhcmdldF9pZHMiOiBbCiAgICAgICAgICAgICAgICAgICAgIjExODU1NzQzMDIyNjI4NzIiCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJzY29wZSI6ICJwYWdlc19tZXNzYWdpbmciCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJzY29wZSI6ICJwYWdlc19yZWFkX2VuZ2FnZW1lbnQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJzY29wZSI6ICJwYWdlc19tYW5hZ2VfbWV0YWRhdGEiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJzY29wZSI6ICJ3aGF0c2FwcF9idXNpbmVzc19tZXNzYWdpbmciLAogICAgICAgICAgICAgICAgInRhcmdldF9pZHMiOiBbCiAgICAgICAgICAgICAgICAgICAgIjEwOTEyMzc0ODQ4NTAyNyIKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgInVzZXJfaWQiOiAiMTE4NzA5Njc0MTkxMjYwIgogICAgICB9CiAgICAvLyB0aGlzLmNoZWNrTG9naW5TdGF0ZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKSB7CiAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICBheGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgYXBpX2NhbGxzLmNoYXRib3RfaW50ZWdyYXRpb25fZGV0YWlscygpLAogICAgICAgICAgewogICAgICAgICAgICBpc19nZXQ6IHRydWUsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgY29uc29sZS5sb2coIkdldCBpbnRlZ3JhdGlvbiBkZXRhaWxzIiwgZGF0YSk7CiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICJzdWNjZXNzIikgewogICAgICAgICAgICB0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YSA9IFtdOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgQm9vbGVhbihkYXRhLmRhdGEuZmFjZWJvb2tfZGV0YWlscy5sZW5ndGgpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YS5kYXRhLmZhY2Vib29rX2RldGFpbHMpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wID0ge307CiAgICAgICAgICAgICAgICB0ZW1wID0gewogICAgICAgICAgICAgICAgICBmYl9hY2Nlc3NfdG9rZW46IGRhdGEuZGF0YS5mYWNlYm9va19kZXRhaWxzW2ldLmZiX2FjY2Vzc190b2tlbiwKICAgICAgICAgICAgICAgICAgZmJfcGFnZV9pZDogIGRhdGEuZGF0YS5mYWNlYm9va19kZXRhaWxzW2ldLmZiX3BhZ2VfaWQsCiAgICAgICAgICAgICAgICAgIGZiX3BhZ2VfbmFtZTogIGRhdGEuZGF0YS5mYWNlYm9va19kZXRhaWxzW2ldLmZiX3BhZ2VfbmFtZSwKICAgICAgICAgICAgICAgICAgZmJfdmVyaWZ5X3Rva2VuOiAgZGF0YS5kYXRhLmZhY2Vib29rX2RldGFpbHNbaV0uZmJfdmVyaWZ5X3Rva2VuLAogICAgICAgICAgICAgICAgICBmYl9wYWdlX2VuYWJsZWQ6ICBkYXRhLmRhdGEuZmFjZWJvb2tfZGV0YWlsc1tpXS5lbmFibGVkLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGEucHVzaCh0ZW1wKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPT09IHRydWUgPyB0aGlzLmZiX3NhdmVkX3BhZ2VfZGF0YS5pc19pbnRlZ3JhdGVkID0gdHJ1ZSA6CiAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYl9zYXZlZF9wYWdlX2RhdGEuaXNfaW50ZWdyYXRlZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudXBkYXRlX2RhdGEoKTsKICAgICAgICAgIH1lbHNlIGlmKGRhdGEubXNnID09ICJOTyBEQVRBIEFWQUlMQUJMRSIpIHsgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrTG9naW5TdGF0ZSgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgRkIuZ2V0TG9naW5TdGF0dXMoZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICB2bS5zdGF0dXNDaGFuZ2VDYWxsYmFjayhyZXNwb25zZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHN0YXR1c0NoYW5nZUNhbGxiYWNrKHJlc3BvbnNlKSB7CiAgICAgIGNvbnNvbGUubG9nKCJXaGF0c2FwcCBMT0dJTjEiLCByZXNwb25zZSk7CiAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PT0gImNvbm5lY3RlZCIpCiAgICAgIHsKICAgICAgICB0aGlzLmZiX2FjY2Vzc190b2tlbiA9IHJlc3BvbnNlLmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbjsKICAgICAgICB0aGlzLmZiX3VzZXJfaWQgPSByZXNwb25zZS5hdXRoUmVzcG9uc2UudXNlcklEOwogICAgICAgICQoIiNsb2dpbiIpLmhpZGUoKTsKICAgICAgICAkKCIjbG9nb3V0Iikuc2hvdygpOyAKICAgICAgICB0aGlzLmZldGNoVXNlclByb2ZpbGUoKTsKICAgICAgfQogICAgICBlbHNlewogICAgICAgICAgdGhpcy5mYWNlYm9va0xvZ2luQnlEaWFsb2coKTsKICAgICAgfQogICAgfSwKICAgIGZhY2Vib29rTG9nb3V0KCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAkKCIjbG9nb3V0IikuaGlkZSgpOwogICAgICAkKCIjbG9naW4iKS5zaG93KCk7CiAgICAgICQoIiNzdGF0dXMiKS5lbXB0eSgpOwogICAgICBGQi5sb2dvdXQoZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAvLyB2bS5zdGF0dXNDaGFuZ2VDYWxsYmFjayhyZXNwb25zZSk7CiAgICAgIH0pOwogICAgICB0aGlzLmZiX3BhZ2VfZGF0YSA9IFtdOwogICAgICB0aGlzLmZiX2FjY2Vzc190b2tlbiA9ICIiOwogICAgICB0aGlzLmZiX3VzZXJfaWQgPSAiIjsKICAgICAgdGhpcy5nZXRfaW50ZWdyYXRpb25fZGV0YWlscygpOwogICAgICB0aGlzLndoYXRzYXBwX2J1c2luZXNzX2lkcyA9IFtdOwogICAgICB0aGlzLndoYXRzYXBwX2J1c2luZXNzX2lkc19kYXRhID0gW107CiAgICB9LAogICAgZmFjZWJvb2tMb2dpbkJ5RGlhbG9nKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBGQi5sb2dpbihmdW5jdGlvbihyZXNwb25zZSkgeyAgICAgICAgCiAgICAgICAgICB2bS5zdGF0dXNDaGFuZ2VDYWxsYmFjayhyZXNwb25zZSk7CiAgICAgIH0sIHtzY29wZTogJ3B1YmxpY19wcm9maWxlLHdoYXRzYXBwX2J1c2luZXNzX21hbmFnZW1lbnQsYnVzaW5lc3NfbWFuYWdlbWVudCx3aGF0c2FwcF9idXNpbmVzc19tZXNzYWdpbmcnLAogICAgICAgICAgLy8gZXh0cmFzOiB7CiAgICAgICAgICAvLyAgIGZlYXR1cmU6ICd3aGF0c2FwcF9lbWJlZGRlZF9zaWdudXAnLAogICAgICAgICAgLy8gfQogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXRfZGV0YWlscygpewogICAgICBjb25zb2xlLmxvZygid2hhdHNhcHBfYnVzaW5lc3NfaWRzX2RhdGEiLCB0aGlzLndoYXRzYXBwX2J1c2luZXNzX2lkc19kYXRhKTsKICAgICAgLy8gU2F2ZSBBUEkgY2FsbAogICAgICBjb25zb2xlLmxvZygiY29taW5nIGhlcmUiLCBCb29sZWFuKHRoaXMud2hhdHNhcHBfYnVzaW5lc3NfaWRzX2RhdGEpKTsgIAogICAgICBpZihCb29sZWFuKHRoaXMud2hhdHNhcHBfYnVzaW5lc3NfaWRzX2RhdGEpKSB7CiAgICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5jaGF0Ym90X2ludGVncmF0aW9uX2RldGFpbHMoKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICB3YV9pc190aGlyZF9wYXJ0eTogZmFsc2UsCiAgICAgICAgICAgICAgd2hhdHNhcHBfYnVzaW5lc3NfZGV0YWlsczogdGhpcy53aGF0c2FwcF9idXNpbmVzc19pZHNfZGF0YVswXSwKICAgICAgICAgICAgICBpc19tZXNzYWdpbmdfcGxhdGZvcm06IGZhbHNlLAogICAgICAgICAgICAgIGlzX3doYXRzYXBwOiB0cnVlLAogICAgICAgICAgICAgIGlzX3NhdmU6IHRydWUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coIlNBVkUgV0hBVFNBUFAgREVUQUlMUyIscmVzcG9uc2UpOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICJTdWNjZXNzIikgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIldoYXRzYXBwIEludGVncmF0aW9uIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1zZyA9PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIkludGVybmFsIFNlcnZlciBFcnJvciIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwKICAgIGZldGNoVXNlclByb2ZpbGUoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBhY2Nlc3NfdG9rZW4gPSB0aGlzLmZiX2FjY2Vzc190b2tlbjsKICAgICAgdmFyIGZiX3dwX3N5c3RlbV9hY2Nlc3NfdG9rZW4gPSBwcm9jZXNzLmVudi5WVUVfQVBQX0ZCX1dQX1NZU1RFTV9BQ0NFU1NfVE9LRU47CiAgICAgIHZhciB0ZW1wX3dhYmEgPSBudWxsOwogICAgICB2YXIgcGF0aDEgPSAnL2RlYnVnX3Rva2VuP2lucHV0X3Rva2VuPScgKyBhY2Nlc3NfdG9rZW4gKyAnJmFjY2Vzc190b2tlbj0nICsgZmJfd3Bfc3lzdGVtX2FjY2Vzc190b2tlbjsKICAgICAgRkIuYXBpKHBhdGgxLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coIlBhdGggMSIsIGRhdGEuZGF0YSk7CiAgICAgICAgdGVtcF93YWJhID0gZGF0YS5kYXRhOwogICAgICAgIGZvciAodmFyIGkgaW4gdGVtcF93YWJhLmdyYW51bGFyX3Njb3Blcyl7CiAgICAgICAgICBpZiAodGVtcF93YWJhLmdyYW51bGFyX3Njb3Blc1tpXS5zY29wZSA9PSAid2hhdHNhcHBfYnVzaW5lc3NfbWFuYWdlbWVudCIpIHsKICAgICAgICAgICAgdm0ud2hhdHNhcHBfYnVzaW5lc3NfaWRzID0gdGVtcF93YWJhLmdyYW51bGFyX3Njb3Blc1tpXS50YXJnZXRfaWRzCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBmb3IodmFyIGkgaW4gdm0ud2hhdHNhcHBfYnVzaW5lc3NfaWRzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTE9PUCBpbiB3YWJhIGlkcyIsIHZtLndoYXRzYXBwX2J1c2luZXNzX2lkc1tpXSk7CiAgICAgICAgICB2YXIgd2FiYV9pZCA9IHZtLndoYXRzYXBwX2J1c2luZXNzX2lkc1tpXTsKICAgICAgICAgIHZhciBwYXRoMiA9ICcvJyArIHdhYmFfaWQgKyAnL3Bob25lX251bWJlcnM/YWNjZXNzX3Rva2VuPScgKyBhY2Nlc3NfdG9rZW47CiAgICAgICAgICBGQi5hcGkocGF0aDIsIGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIlBhdGggMiIsIGRhdGEpCiAgICAgICAgICAgIHZtLndoYXRzYXBwX2J1c2luZXNzX2lkc19kYXRhLnB1c2goewogICAgICAgICAgICAgIFt3YWJhX2lkXTogZGF0YS5kYXRhWzBdCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHZtLnN1Ym1pdF9kZXRhaWxzKCk7CiAgICAgICAgICB9KTsgCiAgICAgICAgfQogICAgICB9LCAyMDAwKTsgICAKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["WhatsappDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WhatsappDetails.vue","sourceRoot":"src/portal/Chatbot/Dashboard/Integrations/Components","sourcesContent":["<template>\n  <div>\n    <div class=\"modal-body\">\n        <div class=\"modal-head d-flex align-items-center\">\n        <h3>WhatsApp Settings</h3>\n        </div>\n        <button\n        type=\"button\"\n        class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"Close\"\n        >\n        <img src=\"/img/close-icn.png\" alt />\n        </button>\n        <div>\n        <div>\n            <h4>Connect your Facebook account</h4>\n            <div class=\"d-flex\">\n            <div id=\"login\" class=\"fb-button\" @click=\"checkLoginState()\">\n            <div class=\"icon\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 118 222\">\n                <path id=\"f\" d=\"M75.41,220.31V120.5h33.5l5-38.9H75.41V56.78c0-11.26,3.13-18.93,19.27-18.93h20.6V3a275.33,275.33,0,0,0-30-1.53c-29.7,0-50,18.13-50,51.41V81.61H1.66v38.9H35.24v99.8Z\" style=\"fill: #fff\"></path>\n                </svg>\n            </div> \n            <span>Connect with Whatsapp</span>\n            </div>\n            <div style=\"display:none;\" @click=\"facebookLogout()\" id=\"logout\" class=\"logout-button\"><span>Log Out</span></div>\n            </div>\n        \n        </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\n\nexport default {\n  name: \"MessagingFrameworks\",\n  components: {\n  },\n  data() {\n    return {\n      big_spinner: false,\n      company_name: this.$session.get(\"UserInformation\").company_name,\n      company_id: this.$session.get(\"UserInformation\").company_id,\n      fb_access_token: \"\",\n      fb_user_id: \"\",\n      user_access_token: null,\n      whatsapp_business_ids_data: [],\n      whatsapp_business_ids: [],\n      waba_id: null\n      // fb_messaging_url_regex: /[(m.me)\\/?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/i,\n    };\n  },\n  watch: {\n    fb_page_enabled(newVal) {\n      // console.log(newVal);\n      // console.log(this[webs + \"_data\"].is_visible_on_bot);\n    },\n  },\n  mounted() {   \n    this.get_integration_details();\n    var temp = {\n        \"app_id\": \"414311007408014\",\n        \"type\": \"USER\",\n        \"application\": \"Cense AI\",\n        \"data_access_expires_at\": 1663224121,\n        \"expires_at\": 1655452800,\n        \"is_valid\": true,\n        \"scopes\": [\n            \"pages_show_list\",\n            \"business_management\",\n            \"pages_messaging\",\n            \"pages_read_engagement\",\n            \"pages_manage_metadata\",\n            \"whatsapp_business_messaging\",\n            \"public_profile\"\n        ],\n        \"granular_scopes\": [\n            {\n                \"scope\": \"pages_show_list\"\n            },\n            {\n                \"scope\": \"business_management\",\n                \"target_ids\": [\n                    \"1185574302262872\"\n                ]\n            },\n            {\n                \"scope\": \"pages_messaging\"\n            },\n            {\n                \"scope\": \"pages_read_engagement\"\n            },\n            {\n                \"scope\": \"pages_manage_metadata\"\n            },\n            {\n                \"scope\": \"whatsapp_business_messaging\",\n                \"target_ids\": [\n                    \"109123748485027\"\n                ]\n            }\n        ],\n        \"user_id\": \"118709674191260\"\n      }\n    // this.checkLoginState();\n  },\n  methods: {\n    get_integration_details() {\n      this.big_spinner = true;\n      axios\n        .post(\n          api_calls.chatbot_integration_details(),\n          {\n            is_get: true,\n            company_name: this.company_name,\n            company_id: this.company_id,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then(({ data }) => {\n          this.big_spinner = false;\n          console.log(\"Get integration details\", data);\n          if (data.status === \"success\") {\n            this.fb_saved_page_data = [];\n            if (\n              Boolean(data.data.facebook_details.length)\n            ) {\n              for (var i in data.data.facebook_details) {\n                var temp = {};\n                temp = {\n                  fb_access_token: data.data.facebook_details[i].fb_access_token,\n                  fb_page_id:  data.data.facebook_details[i].fb_page_id,\n                  fb_page_name:  data.data.facebook_details[i].fb_page_name,\n                  fb_verify_token:  data.data.facebook_details[i].fb_verify_token,\n                  fb_page_enabled:  data.data.facebook_details[i].enabled,\n                }\n                this.fb_saved_page_data.push(temp);\n              }\n              // this.fb_saved_page_data.is_visible_on_bot === true ? this.fb_saved_page_data.is_integrated = true :\n              //                                                 this.fb_saved_page_data.is_integrated = false;\n            }\n            this.update_data();\n          }else if(data.msg == \"NO DATA AVAILABLE\") {   }\n        })\n        .catch((e) => {\n          this.big_spinner = false;\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    checkLoginState() {\n      var vm = this;\n      FB.getLoginStatus(function(response) {\n        vm.statusChangeCallback(response);\n      });\n    },\n    statusChangeCallback(response) {\n      console.log(\"Whatsapp LOGIN1\", response);\n      if(response.status === \"connected\")\n      {\n        this.fb_access_token = response.authResponse.accessToken;\n        this.fb_user_id = response.authResponse.userID;\n        $(\"#login\").hide();\n        $(\"#logout\").show(); \n        this.fetchUserProfile();\n      }\n      else{\n          this.facebookLoginByDialog();\n      }\n    },\n    facebookLogout() {\n      var vm = this;\n      $(\"#logout\").hide();\n      $(\"#login\").show();\n      $(\"#status\").empty();\n      FB.logout(function(response) {\n        // vm.statusChangeCallback(response);\n      });\n      this.fb_page_data = [];\n      this.fb_access_token = \"\";\n      this.fb_user_id = \"\";\n      this.get_integration_details();\n      this.whatsapp_business_ids = [];\n      this.whatsapp_business_ids_data = [];\n    },\n    facebookLoginByDialog() {\n      var vm = this;\n      FB.login(function(response) {        \n          vm.statusChangeCallback(response);\n      }, {scope: 'public_profile,whatsapp_business_management,business_management,whatsapp_business_messaging',\n          // extras: {\n          //   feature: 'whatsapp_embedded_signup',\n          // }\n      });\n    },\n    submit_details(){\n      console.log(\"whatsapp_business_ids_data\", this.whatsapp_business_ids_data);\n      // Save API call\n      console.log(\"coming here\", Boolean(this.whatsapp_business_ids_data));  \n      if(Boolean(this.whatsapp_business_ids_data)) {\n          axios\n          .post(\n            api_calls.chatbot_integration_details(),\n            {\n              company_name: this.$session.get(\"UserInformation\").company_name,\n              company_id: this.$session.get(\"UserInformation\").company_id,\n              wa_is_third_party: false,\n              whatsapp_business_details: this.whatsapp_business_ids_data[0],\n              is_messaging_platform: false,\n              is_whatsapp: true,\n              is_save: true,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            console.log(\"SAVE WHATSAPP DETAILS\",response);\n            if (response.data.status === \"Success\") {\n              Swal.fire({\n                title: \"Whatsapp Integration Successfully\",\n                type: \"success\",\n                timer: 2500,\n              });\n            } else if (response.data.msg == \"Internal Server Error\") {\n              Swal.fire({\n                title: \"Internal Server Error\",\n                type: \"error\",\n                timer: 2500,\n              });\n            }else {\n              Swal.fire({\n                title: \"Some Error Occurred, Please Try Again!\",\n                type: \"error\",\n              });\n            }\n          })\n          .catch((e) => {\n            this.spinnerOn = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n        }\n    },\n    fetchUserProfile() {\n      var vm = this;\n      var access_token = this.fb_access_token;\n      var fb_wp_system_access_token = process.env.VUE_APP_FB_WP_SYSTEM_ACCESS_TOKEN;\n      var temp_waba = null;\n      var path1 = '/debug_token?input_token=' + access_token + '&access_token=' + fb_wp_system_access_token;\n      FB.api(path1, function(data) {\n        console.log(\"Path 1\", data.data);\n        temp_waba = data.data;\n        for (var i in temp_waba.granular_scopes){\n          if (temp_waba.granular_scopes[i].scope == \"whatsapp_business_management\") {\n            vm.whatsapp_business_ids = temp_waba.granular_scopes[i].target_ids\n          }\n        }\n      })\n      setTimeout(() => {\n        for(var i in vm.whatsapp_business_ids) {\n          console.log(\"LOOP in waba ids\", vm.whatsapp_business_ids[i]);\n          var waba_id = vm.whatsapp_business_ids[i];\n          var path2 = '/' + waba_id + '/phone_numbers?access_token=' + access_token;\n          FB.api(path2, function(data) {\n            console.log(\"Path 2\", data)\n            vm.whatsapp_business_ids_data.push({\n              [waba_id]: data.data[0]\n            })\n            vm.submit_details();\n          }); \n        }\n      }, 2000);   \n    },\n  },\n};\n</script>\n<style scoped>\n.delete-cart-item {\n  cursor: pointer;\n}\n.delete-cart-item svg :hover {\n  color: #f23d3d !important;\n  fill: #f23d3d !important;\n}\n.fb-connect-btn {\n  background: #006cff;\n  border: 1px solid #006cff;\n  color: #fff;\n  cursor: pointer;\n  transition: all .3s;\n}\n.fb-connect-btn:active {\n  opacity: .5!important;\n}\n.fb-connect-btn:hover {\n  opacity: .8!important;\n}\n.fb-button {\n  width: 45%;\n  display: flex;\n  background: #25D366;\n  color: #fff;\n  padding: 10px 20px;\n  border-radius: 10px;\n  -webkit-transition: opacity .3s;\n  transition: opacity .3s;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-backface-visibility: hidden;\n  cursor: pointer;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.fb-button:active {\n  opacity: .5!important;\n}\n.fb-button:hover {\n  opacity: .8!important;\n}\n.fb-button .icon {\n  margin-right: 10px;\n  width: 15px;\n  height: 25px;\n}\n.fb-button .icon svg {\n  max-width: 100%;\n  max-height: 100%;\n  -o-object-fit: contain;\n  object-fit: contain;\n}\n.logout-button {\n  margin-left: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 20px;\n  border-radius: 20px;\n  background: #f0f4f7;\n  color: #9ba6b3;\n  width: 96px;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-backface-visibility: hidden;\n  cursor: pointer;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.logout-button:active {\n  opacity: .5!important;\n}\n.logout-button:hover {\n  opacity: .8!important;\n}\n.messenger-pages {\n  width: 100%;\n  background: #f7f7f8;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  /* -webkit-box-align: center; */\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 10px 15px;\n  border-radius: 4px;\n  margin-bottom: 10px;\n}\n.third-party-logo {\n  width: 150px;\n  height: 75px;\n  object-fit: contain;\n}\n.msg__span {\n  padding-left: 1rem;\n}\n.card-act .red-btn {\n  font-size: 14px;\n  color: #fff;\n  background: #f23d3d;\n  border: solid 1px #f23d3d;\n  padding: 5px 20px;\n  font-weight: 400;\n  line-height: 20px;\n  display: inline-block;\n  border-radius: 4px;\n  cursor: pointer;\n  text-align: center;\n}\n.switch {\n  margin-left: 1rem;\n}\n.col-sm-3{\n  max-width: 24%;\n}\n.row {\n    display: flex;\n    flex-wrap: wrap;\n    margin-right: -2px;\n    margin-left: 15px;\n}\n</style>"]}]}