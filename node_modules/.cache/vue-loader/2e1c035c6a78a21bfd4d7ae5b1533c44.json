{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/ProductManagement/ProductSettings.vue","mtime":1655466542528},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBjdXJyZW5jeSBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL0N1cnJlbmN5IjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCB7IGZyZWV6ZV9wb3J0YWwsIHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCB9IGZyb20gIkAvcG9ydGFsL21peGlucyI7CmltcG9ydCBWdWVQaG9uZU51bWJlcklucHV0IGZyb20gInZ1ZS1waG9uZS1udW1iZXItaW5wdXQiOwppbXBvcnQgInZ1ZS1waG9uZS1udW1iZXItaW5wdXQvZGlzdC92dWUtcGhvbmUtbnVtYmVyLWlucHV0LmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZHVjdFNldHRpbmdzUGFnZSIsCiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3QsCiAgICBWdWVQaG9uZU51bWJlcklucHV0LAogIH0sCiAgbWl4aW5zOiBbZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGhvbmVOdW1iZXI6IG51bGwsCiAgICAgIGNvbnRhY3RfdXNfcGhvbmVfbnVtYmVyOiBudWxsLAogICAgICBpbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uOiA1LAogICAgICBjdXJyZW5jeV9jb2RlOiAiIiwKICAgICAgY3VycmVuY3lfbGlzdDogW10sCiAgICAgIGZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeTogOTAsCiAgICAgIHBob25lX25vX2Rpc2FibGU6IGZhbHNlLAogICAgICBlbWFpbF9kaXNhYmxlOiBmYWxzZSwKICAgICAgcmVzZXRfaWNvbl9wYXRoOiByZXF1aXJlKCJAL3BvcnRhbC9hc3NldHMvaW1nL3Jlc2V0X2ljb24uc3ZnIiksCiAgICAgIHZlcmlmaWNhdGlvbl9zdGF0dXM6IG51bGwsCiAgICAgIGJpZ19zcGlubmVyOiBmYWxzZSwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgaXNfZGlzcGxheV9wcm9kdWN0czogZmFsc2UsCiAgICAgIGRpc3BsYXlfcHJvZHVjdHNfaWQ6IHRydWUsCiAgICAgIGRpc3BsYXlfcHJvZHVjdHNfdHlwZTogbnVsbCwKICAgICAgZW1haWxfcmVxdWlyZWQ6IGZhbHNlLAogICAgICBwaG9uZV9ub19kZXRhaWxzOiBudWxsLAogICAgICBlbWFpbF9kZXRhaWxzOiBudWxsLAogICAgICBlbWFpbF9yZXF1aXJlZF9pZDogdHJ1ZSwKICAgICAgcGhvbmVfbnVtYmVyX3ZhbGlkaXR5OiAvXCtbMC05XXs5LDE0fSQvLAogICAgICBlbWFpbF92YWxpZGl0eToKICAgICAgICAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICBsaW1pdF91cF9zZWxsOiAxMCwKICAgICAgbGltaXRfY3Jvc3Nfc2VsbDogMTAsCiAgICAgIGNvbnRhY3RfdXNfZW1haWw6ICIiLAogICAgICByZXZpZXdfbWVzc2FnZV9maXJzdDogIiIsCiAgICAgIHJldmlld19tZXNzYWdlX3NlY29uZDogIiIsCiAgICAgIHJldGFpbF93ZWJfZnJhbWV3b3JrOiB0aGlzLiRzZXNzaW9uLmdldCgicmV0YWlsX3dlYl9mcmFtZXdvcmsiKSwKICAgICAgdmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3M6IFtdLAogICAgICB2ZXJpZnlfY2hlY2s6IGZhbHNlLAogICAgICBpc19kaXNwbGF5X2Jhbm5lcl9vbl9sYW5kaW5nOiBmYWxzZSwKICAgICAgZGlzYWJsZV9idG5fZXhwaXJlZDogZmFsc2UsCiAgICAgIHVuc3Vic2NyaWJlX2xpbms6IG51bGwsCiAgICAgIHVuc3Vic2NyaWJlX2xpbmtfdHlwZTogInN0YW5kYXJkIiwKICAgICAgcmVnX2hvc3Q6CiAgICAgICAgL2h0dHBzOlwvXC9bKHd3d1wuKT9hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYihbLWEtekEtWjAtOUA6JV9cKy5+Iz8mXC9cLz1dKikvaSwKICAgICAgdHJhY2tpbmdfdXJsOiBudWxsLAogICAgICB1cmxfcGFyYW1ldGVyOiBbXSwKICAgICAgbmV3X3RyYWNraW5nX3VybDoge30sCiAgICAgIGdldF90cmFja2luZ191cmw6IGZhbHNlLAogICAgICBtaW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkOiBudWxsLAogICAgICBtYXhfbm90aWZpY2F0aW9uX2NvdW50OiBudWxsLAogICAgICBhYmFuZG9uZWRfZW1haWxfb3B0aW9uOiAnJywKCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQogICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICB9LCAxMDAwKTsKICAgIHRoaXMuJHJvb3QuJG9uKCJQcm9kdWN0U2V0dGluZ3NQYWdlRGlzYWJsZWQiLCAoZGF0YSkgPT4gewogICAgICBpZiAoZGF0YSA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5yZXRhaWxfd2ViX2ZyYW1ld29yayA9IHRoaXMuJHNlc3Npb24uZ2V0KCJyZXRhaWxfd2ViX2ZyYW1ld29yayIpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW5jeS5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLmN1cnJlbmN5X2xpc3QucHVzaCh7CiAgICAgICAgZGlzcGxheV9uYW1lOgogICAgICAgICAgY3VycmVuY3lbaV0uZW1vamkgKwogICAgICAgICAgIiAiICsKICAgICAgICAgIGN1cnJlbmN5W2ldLmN1cnJlbmN5X2NvZGUgKwogICAgICAgICAgIiAtICIgKwogICAgICAgICAgY3VycmVuY3lbaV0uY3VycmVuY3lfbmFtZSwKICAgICAgICB2YWx1ZTogY3VycmVuY3lbaV0uY3VycmVuY3lfY29kZSwKICAgICAgfSk7CiAgICB9CiAgICAvLyB0aGlzLnVuaXF1ZSgpOwogICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICAkKCdbZGF0YS10b2dnbGU9InBvcG92ZXIiXScpLnBvcG92ZXIoKTsKICAgIC8vIGxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgdGhpcy4kcm9vdC4kZW1pdCgiY2hhbmdlX3NpZGViYXJfbWFpbl9tZW51IiwgIlN0b3JlIik7CiAgfSwKICBjb21wdXRlZDogewogICAgdmFsaWRQaG9uZU51bWJlcigpIHsKICAgICAgaWYgKHRoaXMucGhvbmVfbm9fZGV0YWlscyAhPSBudWxsKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5waG9uZV9udW1iZXJfdmFsaWRpdHkudGVzdCgKICAgICAgICAgICAgdGhpcy5waG9uZV9ub19kZXRhaWxzLnJlcGxhY2UoL1xzKy9nLCAiIikKICAgICAgICAgICkKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gIlBsZWFzZSBlbnRlciBhIHZhbGlkIHBob25lIG51bWJlciBpbiB0aGUgZm9ybWF0OiArQ291bnRyeUNvZGUgTnVtYmVyIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZEVtYWlsKCkgewogICAgICBpZiAodGhpcy5jb250YWN0X3VzX2VtYWlsICE9IG51bGwpIHsKICAgICAgICBpZiAodGhpcy5lbWFpbF92YWxpZGl0eS50ZXN0KHRoaXMuY29udGFjdF91c19lbWFpbCkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gIlBsZWFzZSBlbnRlciBhIHZhbGlkIEVtYWlsIEFkZHJlc3MiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHZhbGlkVXJsKCkgewogICAgICBpZiAodGhpcy5jb250YWN0X3VzX2VtYWlsICE9IG51bGwpIHsKICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZV9saW5rX3R5cGUgPT09ICJzdGFuZGFyZCIpIHsKICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVfbGluayA9IG51bGw7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVnX2hvc3QudGVzdCh0aGlzLnVuc3Vic2NyaWJlX2xpbmspKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBVcmwiOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBlbWFpbF9kZXRhaWxzKCkgewogICAgICBpZiAodGhpcy5lbWFpbF9kZXRhaWxzID09IG51bGwgfHwgdGhpcy5lbWFpbF9kZXRhaWxzID09ICIiKSB7CiAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgfSwKICBiZWZvcmVSb3V0ZUxlYXZlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgY2hlY2sgPSBmYWxzZTsKICAgIGlmICh0aGlzLnZlcmlmeV9jaGVjaykgewogICAgICBpZiAoCiAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5yZXZpZXdfbWVzc2FnZV9maXJzdCA9PQogICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9maXJzdCAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MucmV2aWV3X21lc3NhZ2Vfc2Vjb25kID09CiAgICAgICAgICB0aGlzLnJldmlld19tZXNzYWdlX3NlY29uZCAmJgogICAgICAgICAgdGhpcy52ZXJpZnlfcHJvZHVjdF9zZXR0aW5ncy5taW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkID09CiAgICAgICAgICB0aGlzLm1pbnV0ZXNfYWZ0ZXJfY2FydF9hYmFuZG9uZWQgJiYKICAgICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MubWF4X25vdGlmaWNhdGlvbl9jb3VudCA9PQogICAgICAgICAgdGhpcy5tYXhfbm90aWZpY2F0aW9uX2NvdW50ICYmCiAgICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmFiYW5kb25lZF9lbWFpbF9vcHRpb24gPT0KICAgICAgICAgIHRoaXMuYWJhbmRvbmVkX2VtYWlsX29wdGlvbiAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MuY29udGFjdF9oZWxwX2VtYWlsID09CiAgICAgICAgICB0aGlzLmNvbnRhY3RfdXNfZW1haWwgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmNvbnRhY3RfdXNfcGhvbmVfbnVtYmVyID09CiAgICAgICAgICAodGhpcy5jb250YWN0X3VzX3Bob25lX251bWJlcgogICAgICAgICAgICA/IHRoaXMucGhvbmVOdW1iZXIuZm9ybWF0dGVkTnVtYmVyCiAgICAgICAgICAgIDogdW5kZWZpbmVkKSAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3Mub3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQgPT0KICAgICAgICAgIHRoaXMuZW1haWxfcmVxdWlyZWQgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLnVzZXJfZmVlZGJhY2tfZnJlcXVlbmN5ID09CiAgICAgICAgICB0aGlzLmZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeSAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MubG93X2ludmVudG9yeV9ub3RpZmljYXRpb24gPT0KICAgICAgICAgIHRoaXMuaW52ZW50b3J5X2xldmVsX25vdGlmaWNhdGlvbiAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MubGltaXRfdXBfc2VsbCA9PSB0aGlzLmxpbWl0X3VwX3NlbGwgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmxpbWl0X2Nyb3NzX3NlbGwgPT0KICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3Muc2VuZGVyX2VtYWlsID09IHRoaXMuZW1haWxfZGV0YWlscyAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MuZGlzcGxheV9wcm9kdWN0c19vbl9sYW5kaW5nID09CiAgICAgICAgICB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMgJiYKICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmcgPT0KICAgICAgICAgIHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZyAmJgogICAgICAgIHRoaXMudmVyaWZ5X3Byb2R1Y3Rfc2V0dGluZ3MuZGlzcGxheV9wcm9kdWN0c190eXBlID09CiAgICAgICAgICB0aGlzLmRpc3BsYXlfcHJvZHVjdHNfdHlwZQogICAgICApIHsKICAgICAgICBjaGVjayA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGNoZWNrID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgaWYgKGNoZWNrICYmICF0aGlzLmRpc2FibGVfYnRuX2V4cGlyZWQpIHsKICAgICAgU3dhbCh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiSWYgeW91IGhhdmUgbWFkZSBhbnkgY2hhbmdlcyBpbiB0aGUgcHJvZHVjdCBzZXR0aW5ncyBwbGVhc2Ugc2F2ZSB0aGVtIGZpcnN0LCBlbHNlIHRoZXkgd2lsbCBkaXNjYXJkZWQhIiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiU2F2ZSIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIkNhbmNlbCIsCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIHRoaXMuY29uZmlndXJlX3Byb2R1Y3Rfc2V0dGluZ3MoImVtYWlsX3JlcXVpcmVkIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5leHQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdW5pcXVlKCkgewogICAgICBsZXQgYXJyID0gdGhpcy5jdXJyZW5jeV9saXN0OwogICAgICB2YXIgdSA9IHt9LAogICAgICAgIGEgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgICAgaWYgKCF1Lmhhc093blByb3BlcnR5KGFycltpXSkpIHsKICAgICAgICAgIGEucHVzaChhcnJbaV0pOwogICAgICAgICAgdVthcnJbaV1dID0gMTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW5jeV9saXN0ID0gYTsKICAgIH0sCiAgICBlbWFpbF92ZXJpZmljYXRpb25fc3RhdHVzKCkgewogICAgICBpZiAodGhpcy5lbWFpbF9kZXRhaWxzICE9IG51bGwgJiYgdGhpcy5lbWFpbF9kZXRhaWxzICE9ICIiKSB7CiAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzX2VtYWlsX3ZlcmlmaWNhdGlvbl9zdGF0dXM6IHRydWUsCiAgICAgICAgICAgICAgZW1haWxfaWQ6IHRoaXMuZW1haWxfZGV0YWlscywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhICE9ICIiICYmCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSAhPSBudWxsICYmCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSAhPSAiSW50ZXJuYWwgc2VydmVyIEVycm9yIgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gcmVzcG9uc2UuZGF0YS52ZXJpZmljYXRpb25fc3RhdHVzOwogICAgICAgICAgICAgIHRoaXMudmVyaWZpY2F0aW9uX3N0YXR1cyA9CiAgICAgICAgICAgICAgICBzdGF0dXMgPT0gIlN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgID8gIlN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgIDogc3RhdHVzID09ICJQZW5kaW5nIgogICAgICAgICAgICAgICAgICA/ICJQZW5kaW5nIChQbGVhc2UgVmVyaWZ5IFlvdXIgRW1haWwgQWRkcmVzcykiCiAgICAgICAgICAgICAgICAgIDogc3RhdHVzICsKICAgICAgICAgICAgICAgICAgICAiKFRoZSB2ZXJpZmljYXRpb24gbGluayBoYXMgZXhwaXJlZCwga2luZGx5IHJlc3RhcnQgdGhlIHByb2Nlc3MgYnkgcmVtb3ZpbmcgdGhlIGV4aXN0aW5nIGVtYWlsLWlkLikiOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGxvYWRfcHJvZHVjdF9zZXR0aW5ncygpIHsKICAgICAgdGhpcy5lbWFpbF9kZXRhaWxzID0gbnVsbDsKICAgICAgdGhpcy5waG9uZV9ub19kZXRhaWxzID0gbnVsbDsKICAgICAgdGhpcy5lbWFpbF9yZXF1aXJlZCA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbmN5X2NvZGUgPSAiIjsKICAgICAgdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3kgPSA5MDsKICAgICAgdGhpcy5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uID0gNTsKICAgICAgdGhpcy5saW1pdF91cF9zZWxsID0gMTA7CiAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA9IDEwOwogICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgKICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc19nZXQ6IHRydWUsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgdmFyIHdlYmZyYW1ld29yayA9IHRoaXMucmV0YWlsX3dlYl9mcmFtZXdvcms7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gIiIgJiYKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSAhPSBudWxsICYmCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgIT0gIkludGVybmFsIHNlcnZlciBFcnJvciIgJiYKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5tc2cgIT09ICJOTyBEQVRBIEFWQUlMQUJMRSIKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnZlcmlmeV9wcm9kdWN0X3NldHRpbmdzID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdOwogICAgICAgICAgICB0aGlzLnJldmlld19tZXNzYWdlX2ZpcnN0ID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLnJldmlld19tZXNzYWdlX2ZpcnN0OwogICAgICAgICAgICB0aGlzLm1pbnV0ZXNfYWZ0ZXJfY2FydF9hYmFuZG9uZWQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0ubWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZDsKICAgICAgICAgICAgICB0aGlzLm1heF9ub3RpZmljYXRpb25fY291bnQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0ubWF4X25vdGlmaWNhdGlvbl9jb3VudDsKICAgICAgICAgICAgICB0aGlzLmFiYW5kb25lZF9lbWFpbF9vcHRpb24gPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uYWJhbmRvbmVkX2VtYWlsX29wdGlvbjsKICAgICAgICAgICAgICB0aGlzLnJldmlld19tZXNzYWdlX3NlY29uZCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5yZXZpZXdfbWVzc2FnZV9zZWNvbmQ7CiAgICAgICAgICAgIHRoaXMuY29udGFjdF91c19lbWFpbCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5jb250YWN0X2hlbHBfZW1haWw7CiAgICAgICAgICAgIHRoaXMuY29udGFjdF91c19waG9uZV9udW1iZXIgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uY29udGFjdF91c19waG9uZV9udW1iZXI7CiAgICAgICAgICAgIHRoaXMuZW1haWxfZGV0YWlscyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5zZW5kZXJfZW1haWw7CiAgICAgICAgICAgIHRoaXMucGhvbmVfbm9fZGV0YWlscyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5zZW5kZXJfcGhvbmVfbm87CiAgICAgICAgICAgIHRoaXMuZW1haWxfcmVxdWlyZWQgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbCiAgICAgICAgICAgICAgICB3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiCiAgICAgICAgICAgICAgXS5vcmRlcl9yZXRyaWV2YWxfb25seV9lbWFpbF9yZXF1aXJlZDsKICAgICAgICAgICAgdGhpcy5jdXJyZW5jeV9jb2RlID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmJhc2VfY3VycmVuY3k7CiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5ID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLnVzZXJfZmVlZGJhY2tfZnJlcXVlbmN5OwogICAgICAgICAgICB0aGlzLmludmVudG9yeV9sZXZlbF9ub3RpZmljYXRpb24gPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbCiAgICAgICAgICAgICAgICB3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiCiAgICAgICAgICAgICAgXS5sb3dfaW52ZW50b3J5X25vdGlmaWNhdGlvbjsKICAgICAgICAgICAgdGhpcy5saW1pdF91cF9zZWxsID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmxpbWl0X3VwX3NlbGw7CiAgICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5saW1pdF9jcm9zc19zZWxsOwogICAgICAgICAgICB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbCiAgICAgICAgICAgICAgICB3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiCiAgICAgICAgICAgICAgXS5kaXNwbGF5X3Byb2R1Y3RzX29uX2xhbmRpbmc7CiAgICAgICAgICAgIHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZyA9CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVsKICAgICAgICAgICAgICAgIHdlYmZyYW1ld29yayArICJfZGV0YWlscyIKICAgICAgICAgICAgICBdLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmc7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLmRpc3BsYXlfcHJvZHVjdHNfdHlwZTsKICAgICAgICAgICAgdGhpcy50cmFja2luZ191cmwgPQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uc2hpcG1lbnRfdHJhY2tpbmdfdXJsID09PQogICAgICAgICAgICAgIHVuZGVmaW5lZAogICAgICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmRhdGFbd2ViZnJhbWV3b3JrICsgIl9kZXRhaWxzIl0uc2hpcG1lbnRfdHJhY2tpbmdfdXJsCiAgICAgICAgICAgICAgICAgICAgLnVybDsKICAgICAgICAgICAgdGhpcy51cmxfcGFyYW1ldGVyID0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhW3dlYmZyYW1ld29yayArICJfZGV0YWlscyJdLnNoaXBtZW50X3RyYWNraW5nX3VybCA9PT0KICAgICAgICAgICAgICB1bmRlZmluZWQKICAgICAgICAgICAgICAgID8gW10KICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuZGF0YVt3ZWJmcmFtZXdvcmsgKyAiX2RldGFpbHMiXS5zaGlwbWVudF90cmFja2luZ191cmwKICAgICAgICAgICAgICAgICAgICAucGFyYW1zOwogICAgICAgICAgICAvLyB0aGlzLmdldF90cmFja2luZ191cmwgPSBCb29sZWFuKHRoaXMudHJhY2tpbmdfdXJsKTsKICAgICAgICAgICAgdGhpcy5lbWFpbF92ZXJpZmljYXRpb25fc3RhdHVzKCk7CiAgICAgICAgICAgIHRoaXMudmVyaWZ5X2NoZWNrID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMudmVyaWZ5X2NoZWNrID0gZmFsc2U7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50ZXJuYWwgU2VydmVyIEVycm9yIik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudmVyaWZ5X2NoZWNrID0gZmFsc2U7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIlNvbWUgRXJyb3IgT2NjdXJyZWQuIik7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBjb25maWd1cmVfcHJvZHVjdF9zZXR0aW5ncyh2YWx1ZSkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgaWYgKHZhbHVlID09ICJlbWFpbCIpIHsKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgbWFrZSBzdXJlIHlvdSBoYXZlIGVudGVyZWQgYSBjb3JyZWN0IGVtYWlsIGFkZHJlc3MsIHlvdSB3aWxsIHJlY2VpdmUgYW4gZW1haWwgd2l0aCB0aGUgdmVyaWZpY2F0aW9uIGxpbmsuIiwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBQcm9jZWVkISEiLAogICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICAgIGFwaV9jYWxscy5wcm9kdWN0X3NldHRpbmdzKCksCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgICBsaWNlbnNlX2tleToKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICAgICAgICBpc19lbWFpbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlbWFpbF9pZDogdGhpcy5lbWFpbF9kZXRhaWxzLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICJWZXJpZmljYXRpb24gZW1haWwgc2VudCB0byIgKwogICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsX2RldGFpbHMgKwogICAgICAgICAgICAgICAgICAgICAgICAiLiBLaW5kbHkgY2hlY2sgeW91ciBlbWFpbC4gXG4gWW91IHdpbGwgcmVjZWl2ZSBhbiBlbWFpbCBmcm9tIHNlbmRlciAnQW1hem9uIFdlYiBTZXJ2aWNlcycuIFBsZWFzZSB2ZXJpZnkgdGhhdCBsaW5rIiwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbF9kaXNhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsX3ZlcmlmaWNhdGlvbl9zdGF0dXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgICAgdGV4dDogIkludGVybmFsIFNlcnZlciBFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIlNvbWUgRXJyb3IgT2NjdXJyZWQuIik7CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gInBob25lX25vIikgewogICAgICAgICAgaWYgKHRoaXMudmFsaWRQaG9uZU51bWJlciA9PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgIGlzX3Bob25lX25vOiB0cnVlLAogICAgICAgICAgICAgICAgICBwaG9uZV9ubzogdGhpcy5waG9uZV9ub19kZXRhaWxzLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICJQaG9uZSBudW1iZXIgc2F2ZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkX3Byb2R1Y3Rfc2V0dGluZ3MoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIlNvbWUgRXJyb3IgT2NjdXJyZWQuIik7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigKICAgICAgICAgICAgICAiTW9iaWxlIG51bWJlciBpcyBpbnZhbGlkLCBwbGVhc2UgZW50ZXIgaW4gZm9ybWF0OiArIENvdW50cnlDb2RlIE51bWJlciIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICJlbWFpbF9yZXF1aXJlZCIpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlX3RyYWNraW5nX3VybCgpOwogICAgICAgICAgaWYgKHRoaXMudmFsaWRFbWFpbCAhPSB0cnVlICYmICFCb29sZWFuKHRoaXMucGhvbmVOdW1iZXIpKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBvciBwaG9uZSBudW1iZXIiLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGlmKCFCb29sZWFuKHRoaXMucGhvbmVOdW1iZXIpKXsKICAgICAgICAgIC8vICAgc3dhbCh7CiAgICAgICAgICAvLyAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIHZhbGlkIFBob25lIE51bWJlciIsCiAgICAgICAgICAvLyAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgLy8gICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgLy8gICByZXR1cm4KICAgICAgICAgIC8vIH1lbHNlCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5waG9uZU51bWJlcikgJiYKICAgICAgICAgICAgQm9vbGVhbih0aGlzLnBob25lTnVtYmVyLnBob25lTnVtYmVyKSAmJgogICAgICAgICAgICB0aGlzLnBob25lTnVtYmVyLmlzVmFsaWQgIT0gdHJ1ZQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBQaG9uZSBOdW1iZXIiLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9maXJzdCA9PT0gIiIgJiYKICAgICAgICAgICAgdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQgPT09ICIiCiAgICAgICAgICApIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIG1lc3NhZ2UgZm9yIHJldmlldyBhbmQgcmF0aW5ncyIsCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIHRpbWVyOiAzNTAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMgPT09IHRydWUgJiYKICAgICAgICAgICAgKHRoaXMuZGlzcGxheV9wcm9kdWN0c190eXBlID09PSBudWxsIHx8CiAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUgPT09ICIiKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6ICJQbGVhc2Ugc2VsZWN0IGRpc3BsYXkgcHJvZHVjdCB0eXBlIiwKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGltZXI6IDUwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5X2xldmVsX25vdGlmaWNhdGlvbiA8IDAgfHwKICAgICAgICAgICAgdGhpcy5mZWVkYmFja19xdWVzdGlvbl9mcmVxdWVuY3kgPCAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogIk51bWVyaWNhbCB2YWx1ZSBjYW4gbm90IGJlIGxlc3MgdGhlbiB6ZXJvIiwKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuY3VycmVuY3lfY29kZSA9PSAiIiB8fCB0aGlzLmN1cnJlbmN5X2NvZGUgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgU2VsZWN0IEJhc2UgQ3VycmVuY3kiLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA9PSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA8PSAwIHx8CiAgICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA9PSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMubGltaXRfY3Jvc3Nfc2VsbCA8PSAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogIlVwLXNlbGwgYW5kIENyb3NzLXNlbGwgbGltaXQgdmFsdWVzIGNhbm5vdCBiZSBsZXNzIHRoYW4gemVybyIsCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIHRpbWVyOiAzMDAwLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgIGlzX2VtYWlsX3JlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICBlbWFpbF9yZXF1aXJlZDogewogICAgICAgICAgICAgICAgICAgIHJldmlld19tZXNzYWdlX2ZpcnN0OiB0aGlzLnJldmlld19tZXNzYWdlX2ZpcnN0LAogICAgICAgICAgICAgICAgICAgIG1pbnV0ZXNfYWZ0ZXJfY2FydF9hYmFuZG9uZWQ6IHRoaXMubWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZCwKICAgICAgICAgICAgICAgICAgICBtYXhfbm90aWZpY2F0aW9uX2NvdW50OiB0aGlzLm1heF9ub3RpZmljYXRpb25fY291bnQsCiAgICAgICAgICAgICAgICAgICAgYWJhbmRvbmVkX2VtYWlsX29wdGlvbjogdGhpcy5hYmFuZG9uZWRfZW1haWxfb3B0aW9uLAogICAgICAgICAgICAgICAgICAgIHJldmlld19tZXNzYWdlX3NlY29uZDogdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgY29udGFjdF9oZWxwX2VtYWlsOiB0aGlzLmNvbnRhY3RfdXNfZW1haWwsCiAgICAgICAgICAgICAgICAgICAgY29udGFjdF91c19waG9uZV9udW1iZXI6CiAgICAgICAgICAgICAgICAgICAgICBCb29sZWFuKHRoaXMucGhvbmVOdW1iZXIpICYmCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBob25lTnVtYmVyLmlzVmFsaWQgPT0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGhvbmVOdW1iZXIuZm9ybWF0dGVkTnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBvcmRlcl9yZXRyaWV2YWxfb25seV9lbWFpbF9yZXF1aXJlZDogdGhpcy5lbWFpbF9yZXF1aXJlZCwKICAgICAgICAgICAgICAgICAgICBiYXNlX2N1cnJlbmN5OiB0aGlzLmN1cnJlbmN5X2NvZGUsCiAgICAgICAgICAgICAgICAgICAgdXNlcl9mZWVkYmFja19mcmVxdWVuY3k6IHRoaXMuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5LAogICAgICAgICAgICAgICAgICAgIGxvd19pbnZlbnRvcnlfbm90aWZpY2F0aW9uOgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnlfbGV2ZWxfbm90aWZpY2F0aW9uLAogICAgICAgICAgICAgICAgICAgIGxpbWl0X3VwX3NlbGw6IHRoaXMubGltaXRfdXBfc2VsbCwKICAgICAgICAgICAgICAgICAgICBsaW1pdF9jcm9zc19zZWxsOiB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwsCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9wcm9kdWN0c19vbl9sYW5kaW5nOiB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMsCiAgICAgICAgICAgICAgICAgICAgaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZzoKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNfZGlzcGxheV9iYW5uZXJfb25fbGFuZGluZywKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3Byb2R1Y3RzX3R5cGU6IHRoaXMuaXNfZGlzcGxheV9wcm9kdWN0cwogICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRpc3BsYXlfcHJvZHVjdHNfdHlwZQogICAgICAgICAgICAgICAgICAgICAgOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHNoaXBtZW50X3RyYWNraW5nX3VybDogdGhpcy5uZXdfdHJhY2tpbmdfdXJsLAogICAgICAgICAgICAgICAgICAgIHNob3Bfc2V0dGluZ3Nfc2F2ZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogIllvdXIgY2hhbmdlcyBoYXZlIGJlZW4gc2F2ZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDQwMDAsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB0aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLiIpOwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAiZW1haWxfcmVtb3ZlIikgewogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICAgICAgdGV4dDogIk9uY2UgeW91IHJlbW92ZSB0aGUgc2F2ZWQgZW1haWwgYWRkcmVzcywgeW91IHdpbGwgaGF2ZSB0byBhZGQgYW5kIHZlcmlmeSB0aGUgZW1haWwgYWdhaW4gYmVmb3JlIHlvdSBjYW4gc2VuZCBlbWFpbHMhIiwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBSZW1vdmUhISIsCiAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OgogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgICAgIGlzX3JlbW92ZV9lbWFpbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlbWFpbF9pZDogdGhpcy5lbWFpbF9kZXRhaWxzLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJFbWFpbCBJZCBoYXMgYmVlbiByZW1vdmVkIHN1Y2Nlc3NmdWxseSEiLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgdGltZXI6IDUwMDAsCiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZW1haWxfZGlzYWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZW1haWxfZGV0YWlscyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZF9wcm9kdWN0X3NldHRpbmdzKCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4iKTsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAidW5zdWJzY3JpYmVfcHJvbW90aW9uYWxfZW1haWwiKSB7CiAgICAgICAgICBpZiAodGhpcy52YWxpZFVybCAhPSB0cnVlKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBVcmwiLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSB0cnVlOwogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgYXBpX2NhbGxzLnByb2R1Y3Rfc2V0dGluZ3MoKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgIGlzX2VtYWlsX3JlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICBlbWFpbF9yZXF1aXJlZDogewogICAgICAgICAgICAgICAgICAgIHJldmlld19tZXNzYWdlX2ZpcnN0OiB0aGlzLnJldmlld19tZXNzYWdlX2ZpcnN0LAogICAgICAgICAgICAgICAgICAgIHJldmlld19tZXNzYWdlX3NlY29uZDogdGhpcy5yZXZpZXdfbWVzc2FnZV9zZWNvbmQsCiAgICAgICAgICAgICAgICAgICAgbWludXRlc19hZnRlcl9jYXJ0X2FiYW5kb25lZDogdGhpcy5taW51dGVzX2FmdGVyX2NhcnRfYWJhbmRvbmVkLAogICAgICAgICAgICAgICAgICAgIG1heF9ub3RpZmljYXRpb25fY291bnQ6IHRoaXMubWF4X25vdGlmaWNhdGlvbl9jb3VudCwKICAgICAgICAgICAgICAgICAgICBhYmFuZG9uZWRfZW1haWxfb3B0aW9uOiB0aGlzLmFiYW5kb25lZF9lbWFpbF9vcHRpb24sCiAgICAgICAgICAgICAgICAgICAgY29udGFjdF9oZWxwX2VtYWlsOiB0aGlzLmNvbnRhY3RfdXNfZW1haWwsCiAgICAgICAgICAgICAgICAgICAgLy8gY29udGFjdF91c19waG9uZV9udW1iZXI6dGhpcy5waG9uZU51bWJlci5mb3JtYXR0ZWROdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgb3JkZXJfcmV0cmlldmFsX29ubHlfZW1haWxfcmVxdWlyZWQ6IHRoaXMuZW1haWxfcmVxdWlyZWQsCiAgICAgICAgICAgICAgICAgICAgYmFzZV9jdXJyZW5jeTogdGhpcy5jdXJyZW5jeV9jb2RlLAogICAgICAgICAgICAgICAgICAgIHVzZXJfZmVlZGJhY2tfZnJlcXVlbmN5OiB0aGlzLmZlZWRiYWNrX3F1ZXN0aW9uX2ZyZXF1ZW5jeSwKICAgICAgICAgICAgICAgICAgICBsb3dfaW52ZW50b3J5X25vdGlmaWNhdGlvbjoKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5X2xldmVsX25vdGlmaWNhdGlvbiwKICAgICAgICAgICAgICAgICAgICBsaW1pdF91cF9zZWxsOiB0aGlzLmxpbWl0X3VwX3NlbGwsCiAgICAgICAgICAgICAgICAgICAgbGltaXRfY3Jvc3Nfc2VsbDogdGhpcy5saW1pdF9jcm9zc19zZWxsLAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfcHJvZHVjdHNfb25fbGFuZGluZzogdGhpcy5pc19kaXNwbGF5X3Byb2R1Y3RzLAogICAgICAgICAgICAgICAgICAgIGlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmc6CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzX2Rpc3BsYXlfYmFubmVyX29uX2xhbmRpbmcsCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9wcm9kdWN0c190eXBlOiB0aGlzLmlzX2Rpc3BsYXlfcHJvZHVjdHMKICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5kaXNwbGF5X3Byb2R1Y3RzX3R5cGUKICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBzaG9wX3NldHRpbmdzX3NhdmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlX2xpbms6IHRoaXMudW5zdWJzY3JpYmVfbGluaywKICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZV9saW5rX3R5cGU6IHRoaXMudW5zdWJzY3JpYmVfbGlua190eXBlLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICJZb3VyIGNoYW5nZXMgaGF2ZSBiZWVuIHNhdmVkIHN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiA0MDAwLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRfcHJvZHVjdF9zZXR0aW5ncygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogIkludGVybmFsIFNlcnZlciBFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4iKTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICB9CiAgICB9LAogICAgZW1wdHlfdmFyaWFibGUoKSB7CiAgICAgIHRoaXMuZW1haWxfZGV0YWlscyA9IG51bGw7CiAgICAgIHRoaXMuZW1haWxfcmVxdWlyZWQgPSBmYWxzZTsKICAgICAgdGhpcy5jdXJyZW5jeV9jb2RlID0gIiI7CiAgICAgIHRoaXMuZmVlZGJhY2tfcXVlc3Rpb25fZnJlcXVlbmN5ID0gOTA7CiAgICAgIHRoaXMuaW52ZW50b3J5X2xldmVsX25vdGlmaWNhdGlvbiA9IDU7CiAgICAgIHRoaXMucGhvbmVfbm9fZGV0YWlscyA9IG51bGw7CiAgICAgIHRoaXMubGltaXRfdXBfc2VsbCA9IDEwOwogICAgICB0aGlzLmxpbWl0X2Nyb3NzX3NlbGwgPSAxMDsKICAgIH0sCiAgICAvLyBhZGRfcGFyYW1ldGVyKCl7CiAgICAvLyAgIGxldCBuZXh0X2lkID1NYXRoLnJhbmRvbSgpOwogICAgLy8gICBpZiAoQm9vbGVhbih0aGlzLnRyYWNraW5nX3VybCkgKSB7CiAgICAvLyAgICAgdGhpcy51cmxfcGFyYW1ldGVyLnB1c2goewogICAgLy8gICAgIGtleTogbnVsbCwKICAgIC8vICAgICBpZDogbmV4dF9pZCwKICAgIC8vICAgICB2YWx1ZTogbnVsbAogICAgLy8gICB9CiAgICAvLyAgICkKICAgIC8vICAgfWVsc2V7CiAgICAvLyAgICAgc3dhbCh7CiAgICAvLyAgICAgICB0ZXh0OiAiQWRkICBTaGlwbWVudCB0cmFja2luZyBVUkwgIiwKICAgIC8vICAgICAgIHRvYXN0OiB0cnVlLAogICAgLy8gICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgIC8vICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgIC8vICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgIC8vICAgICAgIHRpbWVyOiAyNTAwLAogICAgLy8gICAgIH0pOwogICAgLy8gICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIGRlbGV0ZV9wYXJhbWV0ZXIoaW5kZXgpewogICAgLy8gICBpZigKICAgIC8vICAgICB0aGlzLnVybF9wYXJhbWV0ZXIubGVuZ3RoID09PSAwCiAgICAvLyAgICkgewogICAgLy8gICAgIHN3YWwoewogICAgLy8gICAgICAgdGV4dDogIkF0bGVhc3Qgb25lIHVybF9wYXJhbWV0ZXIgaXMgcmVxdWlyZWQgdG8gYWRkIGJ1dHRvbnMiLAogICAgLy8gICAgICAgdG9hc3Q6IHRydWUsCiAgICAvLyAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgLy8gICAgICAgdHlwZTogIndhcm5pbmciLAogICAgLy8gICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgLy8gICAgICAgdGltZXI6IDI1MDAsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIGxldCB0ZW1wX2luZGV4ID0gbnVsbDsKICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnVybF9wYXJhbWV0ZXIubGVuZ3RoOyBpKyspIHsKICAgIC8vICAgICBpZiAodGhpcy51cmxfcGFyYW1ldGVyW2ldLmlkID09IGluZGV4KSB7CiAgICAvLyAgICAgICB0ZW1wX2luZGV4ID0gaTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vICAgdGhpcy51cmxfcGFyYW1ldGVyLnNwbGljZSh0ZW1wX2luZGV4LCAxKTsKICAgIC8vIH0sCiAgICBjcmVhdGVfdHJhY2tpbmdfdXJsKCkgewogICAgICB0aGlzLm5ld190cmFja2luZ191cmxbInVybCJdID0gdGhpcy50cmFja2luZ191cmw7CiAgICAgIHRoaXMubmV3X3RyYWNraW5nX3VybFsicGFyYW1zIl0gPSB0aGlzLnVybF9wYXJhbWV0ZXI7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["ProductSettings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductSettings.vue","sourceRoot":"src/portal/Chatbot/Dashboard/ProductManagement","sourcesContent":["<template>\n  <div>\n    <div class=\"dash-cont\">\n      <div class=\"spinner\" id=\"spinner\" v-show=\"big_spinner\"></div>\n      <div class=\"container-fluid\">\n        <div class=\"card dash-card\">\n          <div class=\"table-box\">\n            <div class=\"table-responsive mb-0\">\n              <h4 class=\"mb-sm-6\" style=\"text-align: center; padding-top: 15px\">\n                Store Configuration\n              </h4>\n              <hr />\n              <div class=\"col-sm-12 d-flex\">\n                <div class=\"col-sm-6\" style=\"border-right: solid 1px #eaeaea\">\n                  <label class=\"mb-sm-6 mt-\"\n                    ><strong>Limit of products in Up-Sell</strong>\n                  </label>\n                  <input\n                    v-model.number=\"limit_up_sell\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter Value\"\n                    style=\"padding: 5px\"\n                  />\n                  <hr style=\"margin-top: 1.13rem\" />\n                  <label\n                    class=\"mb-sm-6 mt-2\"\n                    style=\"margin-top: 0.4rem !important\"\n                    ><strong>Limit of products in Cross-Sell</strong>\n                  </label>\n                  <input\n                    v-model.number=\"limit_cross_sell\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter Value\"\n                    style=\"padding: 5px\"\n                  />\n                  <hr style=\"margin-top: 2rem\" />\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.5rem !important\"\n                    ><strong>Inventory Level for Notification</strong>\n                  </label>\n                  <label\n                    >(Number below which if any of your products go, you will\n                    receive a notification for replenishment via mail)</label\n                  >\n                  <input\n                    v-model.number=\"inventory_level_notification\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter your inventory limit number\"\n                    style=\"padding: 5px; margin-bottom: 1rem !important\"\n                    min=\"0\"\n                  />\n                  <hr style=\"margin-top: 1.9rem\" />\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.3rem !important\"\n                    ><strong>Contact Us Email</strong> </label\n                  ><br />\n                  <label> (Enter email-id where customers can reachout) </label>\n                  <input\n                    v-model.trim=\"contact_us_email\"\n                    type=\"email\"\n                    class=\"form-control\"\n                    placeholder=\"Enter the email-id\"\n                    style=\"padding: 5px; margin-bottom: 1rem !important\"\n                    required\n                  />\n                  <div\n                    class=\"is-invalid\"\n                    style=\"color: red; padding-bottom: 15px\"\n                    v-if=\"validEmail != true && contact_us_email != ''\"\n                  >\n                    {{ validEmail }}\n                  </div>\n                  <hr style=\"margin-top: 1.9rem\" />\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.3rem !important\"\n                    ><strong>Contact Us Phone Number</strong> </label\n                  ><br />\n                  <label>\n                    (Enter phone number where customers can reachout)\n                  </label>\n                  <vue-phone-number-input\n                    v-model=\"contact_us_phone_number\"\n                    :no-use-browser-locale=\"true\"\n                    @update=\"phoneNumber = $event\"\n                  >\n                  </vue-phone-number-input>\n                  <hr style=\"margin-top: 1rem\" />\n                  <label\n                    class=\"mb-sm-6 mt-4\"\n                    style=\"margin-top: 0.3rem !important\"\n                    ><strong>Shipment tracking URL</strong>\n                  </label>\n                  <i\n                    aria-hidden=\"true\"\n                    title=\"Enter URL for track shipment and enter tracking_id inside {} as show in\n                     example\"\n                    class=\"fa fa-info-circle\"\n                    style=\"font-size: 16px; margin-left: 5px\"\n                  ></i>\n                  <br />\n                  <label>\n                    (Enter URL where customers can track shipment)\n                  </label>\n                  <input\n                    v-model=\"tracking_url\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"eg: https://shiprocket.co/tracking/{tracking_id}\"\n                    style=\"padding: 5px\"\n                  />\n                  <!-- <div\n                     class=\"form-group\"\n                    style=\"display: flex; cursor: pointer; margin: 8px 0 12px;\"\n                    v-for=\"para in url_parameter\"\n                    :key=\"para.id\"\n                  >\n                    <input\n                      v-model=\"para.key\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"Enter key\"\n                      style=\"padding: 5px; margin-right:5px\"\n                    />\n                    <input\n                      v-model=\"para.value\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"Enter value\"\n                      style=\"padding: 5px; margin-left:5px\"\n                    />\n                  <i\n                    style=\"\n                      font-size: 16px;\n                      cursor: pointer;\n                      margin-top: 0.6rem;\n                    \"\n                    @click=\"delete_parameter(para.id)\"\n                    class=\"fa ml-auto pl-2\"\n                    title=\"Delete Parameter\"\n                    >&#xf1f8;</i                      \n                  >\n                  </div> -->\n                  <!-- <p class=\"label1 mb-0\" style=\"padding-left: 5px;\">\n                    Add url parameter\n                      <button\n                        type=\"button\"\n                        style=\"\n                          cursor: pointer;\n                          border: none;\n                          background: transparent url('@portal/assets/img/plus.png')\n                          0% 0% no-repeat padding-box;\n                        \"\n                        @click=\"add_parameter\"\n                      >\n                      <img src=\"/img/black_plus.png\" alt=\"\" />\n                      </button>\n                  </p> -->\n                  <!-- <hr />\n                    <div>\n                    <hr />\n                      <h5 class=\"mb-sm-6 pt-3\">SMS Configuration</h5>\n                      <div class=\"form-group\">\n                        <form @submit=\"configure_product_settings('phone_no')\">\n                          <div class=\"form-group\">\n                            <label>Phone Number</label>\n                            <input\n                              v-model=\"phone_no_details\"\n                              type=\"text\"\n                              class=\"form-control\"\n                              placeholder=\"Enter the mobile number from where the sms will be sent\"\n                              style=\"width: 90%; padding: 5px\"\n                              :disabled=\"phone_no_disable==true\"\n                            />\n                          </div>\n                          <div\n                            class=\"is-invalid\"\n                            style=\"color:red; padding-bottom:15px;\"\n                            v-if=\"validPhoneNumber!=true && phone_no_details!=''\"\n                          >\n                            {{ validPhoneNumber }}\n                          </div>\n                          <div class=\"dash-modal\">\n                            <div class=\"btn-wrap text-right mt-0 py-0 border-top-0\">\n                              <button\n                                type=\"button\"\n                                class=\"btn btn-danger\"\n                                style=\"\"\n                                v-if=\"phone_no_disable==true\"\n                              >\n                                Remove\n                              </button>\n                              <button\n                                type=\"submit\"\n                                style=\"display: flex !important;\"\n                                class=\"darkblue-btn\"\n                                v-else\n                              >\n                                Save\n                              </button>\n                            </div>\n                          </div>\n                        </form>\n                      </div>\n                    </div> -->\n                </div>\n                <div class=\"col-sm-6\">\n                  <div class=\"form-group mb-0\">\n                    <label\n                      class=\"col-sm-11\"\n                      style=\"width: 90%; padding: 0px; margin-bottom: 4px !important\"\n                      ><strong>Allow Guest Users</strong>\n                    </label>\n                    <label class=\"switch col-sm-1 m-0\">\n                      <input\n                        type=\"checkbox\"\n                        v-model=\"email_required\"\n                        id=\"email_required_id\"\n                      />\n                      <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px\"\n                      ></span>\n                    </label>\n                    <label class=\"col-sm-11 m-0\" style=\"padding: 0px\">\n                      (If this checkbox is on, customers can see their order\n                      without providing password)</label\n                    >\n                  </div>\n                  <hr />\n                  <label\n                    class=\"mb-sm-6 m-0 mb-2\"\n                    ><strong>Shop Base Currency</strong></label\n                  >\n                  <div class=\"form-group mb-0\">\n                    <multiselect\n                      v-model=\"currency_code\"\n                      :options=\"currency_list\"\n                      :searchable=\"true\"\n                      :close-on-select=\"true\"\n                      :taggable=\"false\"\n                      :multiple=\"false\"\n                      placeholder=\"Select Shop Currency\"\n                      :max-height=\"200\"\n                      track-by=\"display_name\"\n                      label=\"display_name\"\n                      :allow-empty=\"false\"\n                    >\n                    </multiselect>\n                  </div>\n                  <hr />\n                  <label\n                    class=\"mb-sm-6 m-0\"\n                    ><strong>Feedback Frequency </strong></label\n                  >\n                  <label style=\"max-width: 80%\"\n                    >(Frequency of how often feedback questions should be asked\n                    to the customers)</label\n                  >\n                  <input\n                    v-model.number=\"feedback_question_frequency\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    placeholder=\"Enter days in number\"\n                    style=\"padding: 5px;\"\n                    min=\"0\"\n                  />\n                  <hr />\n                  <label\n                    class=\"mb-sm-6 m-0\"\n                    ><strong>Reviews & Ratings </strong></label\n                  >\n                  <br />\n                  <label style=\"max-width: 80%\"\n                    >(Turn your customer content into sales by collecting and\n                    leveraging reviews and ratings)</label\n                  >\n                  <input\n                    id=\"review_message_first_id\"\n                    v-model.trim=\"review_message_first\"\n                    type=\"text\"\n                    class=\"form-control mb-3\"\n                    placeholder=\"Enter review message\"\n                    style=\"padding: 5px !important;\"\n                    required\n                  />\n                  <input\n                    v-model.trim=\"review_message_second\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"Enter review message\"\n                    style=\"padding: 5px;\"\n                  />\n                  <hr />\n                  <label\n                    class=\"mb-sm-6 m-0 mb-1\"\n                    ><strong>Cart abandoned </strong></label\n                  >\n                  <input\n                    id=\"minutes_after_cart_abandoned_id\"\n                    v-model.number=\"minutes_after_cart_abandoned\"\n                    type=\"number\"\n                    class=\"form-control mb-3\"\n                    placeholder=\"Enter a minutes after the cart is considered to be abandoned.\"\n                    style=\"padding: 5px !important;\"\n                    min=\"0\"\n                    required\n                  />\n                  <input\n                    v-model.number=\"max_notification_count\"\n                    type=\"number\"\n                    class=\"form-control mb-3\"\n                    placeholder=\"Enter maximum notification count\"\n                    style=\"padding: 5px;\"\n                    min=\"0\"\n                  />\n                  <div class=\"card-act\">\n                    <select\n                      class=\"form-control\"\n                      style=\"height: 42px !important;\"\n                      id=\"abandoned_email_option_id\"\n                      v-model=\"abandoned_email_option\"\n                    >\n                      <option disabled selected value=\"\">Select notification period</option>\n                      <option value=\"daily\">Daily</option>\n                      <option value=\"weekly\">weekly</option>\n                    </select>\n                  </div>\n                  <hr />\n                  <div class=\"form-group mb-0\">\n                    <label\n                      class=\"col-sm-11\"\n                      style=\"width: 90%; padding: 0px; margin-bottom: 4px\"\n                      ><strong>Display products on bot launch</strong>\n                    </label>\n                    <label class=\"switch col-sm-1 m-0\">\n                      <input\n                        type=\"checkbox\"\n                        v-model=\"is_display_products\"\n                        id=\"display_products_id\"\n                      />\n                      <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px\"\n                      ></span>\n                    </label>\n                    <label class=\"col-sm-11 m-0 p-0\">\n                      (If this checkbox is on, products would be shown at the\n                      start of conversation)</label\n                    >\n                    <label\n                      v-if=\"is_display_products === true\"\n                      class=\"col-sm-11 p-0\"\n                    >\n                      (Select what kind of products to be shown)</label\n                    >\n                    <div v-if=\"is_display_products === true\" class=\"radio\">\n                      <div class=\"d-flex\">\n                        <label style=\"vertical-align: text-top\">\n                          Latest\n                          <input\n                            type=\"radio\"\n                            value=\"latest\"\n                            v-model=\"display_products_type\"\n                          />\n                          <span class=\"icn\" id=\"display_product_type_id\"></span>\n                        </label>\n                        <label style=\"vertical-align: text-top\">\n                          Random\n                          <input\n                            type=\"radio\"\n                            value=\"random\"\n                            v-model=\"display_products_type\"\n                          />\n                          <span class=\"icn\" id=\"display_product_type_id\"></span>\n                        </label>\n                        <label style=\"vertical-align: text-top\">\n                          Best Selling\n                          <input\n                            type=\"radio\"\n                            value=\"best_selling\"\n                            v-model=\"display_products_type\"\n                          />\n                          <span class=\"icn\" id=\"display_product_type_id\"></span>\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n                  <hr />\n                  <div class=\"form-group mb-0\">\n                    <label\n                      class=\"col-sm-11\"\n                      style=\"width: 90%; padding: 0px; margin-bottom: 4px\"\n                      ><strong>Display banners on bot launch</strong>\n                    </label>\n                    <label class=\"switch col-sm-1 m-0\">\n                      <input\n                        type=\"checkbox\"\n                        v-model=\"is_display_banner_on_landing\"\n                        id=\"is_display_banner_on_landing_id\"\n                      />\n                      <span\n                        class=\"slider round\"\n                        style=\"border-radius: 50px\"\n                      ></span>\n                    </label>\n                    <label class=\"col-sm-11 p-0 m-0\">\n                      (If this checkbox is on, banners would be shown at the\n                      start of conversation)</label\n                    >\n                  </div>\n                </div>\n              </div>\n              <div class=\"dash-modal\">\n                <div class=\"col-sm-12\">\n                  <hr style=\"margin: 0.6rem 1rem 1rem 1rem\" />\n                </div>\n                <div\n                  class=\"\n                    card-act\n                    btn-wrap\n                    text-right\n                    mt-0\n                    pt-0\n                    pb-3\n                    border-top-0\n                  \"\n                  style=\"margin-left: 2rem; margin-bottom: 0.4rem\"\n                >\n                  <button\n                    type=\"submit\"\n                    style=\"display: text-center !important\"\n                    class=\"darkblue-btn\"\n                    @click=\"configure_product_settings('email_required')\"\n                  >\n                    Save\n                  </button>\n                </div>\n              </div>\n              <hr style=\"border: 1px solid #959ca3 !important\" />\n              <h5 class=\"mb-sm-6 ml-4 pl-1\">Mailer Configuration</h5>\n              <hr />\n              <div class=\"col-sm-12 d-flex\">\n                <div class=\"col-sm-6\">\n                  <div class=\"form-group\">\n                    <form @submit.prevent=\"configure_product_settings('email')\">\n                      <div class=\"form-group\">\n                        <label><strong>Sender Email</strong></label>\n                        <label>\n                          (Please enter your store's email address from which\n                          you want your customers to receive emails)</label\n                        >\n                        <input\n                          v-model=\"email_details\"\n                          type=\"email\"\n                          class=\"form-control mt-2\"\n                          placeholder=\"Enter the email-id from where the mails will be sent\"\n                          style=\"padding: 5px\"\n                          :disabled=\"\n                            email_disable == true || disable_btn_expired\n                          \"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <p class=\"label1\" v-if=\"email_disable == true\">\n                          <strong>Verification Status:</strong>\n                          <span\n                            :style=\"\n                              verification_status == 'Success'\n                                ? 'color:#9acd32'\n                                : 'color:#d9534f'\n                            \"\n                          >\n                            {{ verification_status }} </span\n                          >&nbsp;\n                          <img\n                            title=\"Check Email Verification Status\"\n                            :src=\"reset_icon_path\"\n                            alt=\"\"\n                            style=\"\n                              float: inherit;\n                              cursor: pointer;\n                              padding-left: 5px;\n                            \"\n                            @click=\"load_product_settings()\"\n                          />\n                        </p>\n                      </div>\n                      <div class=\"dash-modal\">\n                        <div\n                          class=\"\n                            card-act\n                            btn-wrap\n                            text-right\n                            mt-0\n                            pt-0\n                            pb-3\n                            border-top-0\n                          \"\n                        >\n                          <button\n                            id=\"product_setting_email_remove_btn\"\n                            type=\"button\"\n                            class=\"btn btn-danger\"\n                            style=\"display: text-center !important\"\n                            v-if=\"email_disable == true\"\n                            @click=\"configure_product_settings('email_remove')\"\n                          >\n                            Remove\n                          </button>\n                          <button\n                            id=\"product_setting_email_save_btn\"\n                            type=\"submit\"\n                            style=\"display: text-center !important\"\n                            class=\"darkblue-btn\"\n                            v-else\n                          >\n                            Save\n                          </button>\n                        </div>\n                      </div>\n                    </form>\n                  </div>\n                </div>\n                <div class=\"col-sm-6\">\n                  <div\n                    class=\"form-group\"\n                    v-if=\"\n                      email_disable == true && verification_status == 'Success'\n                    \"\n                  >\n                    <div class=\"d-flex\">\n                      <label class=\"mb-0 mt-1\"\n                        ><strong>Unsubscribe Link</strong\n                        ><label\n                          ><strong>(Marketing Email)</strong></label\n                        ></label\n                      >\n                      <div class=\"radio ml-3\">\n                        <label\n                          style=\"vertical-align: text-top; font-size: 17px\"\n                        >\n                          Cense link\n                          <input\n                            type=\"radio\"\n                            value=\"standard\"\n                            v-model=\"unsubscribe_link_type\"\n                          />\n                          <span class=\"icn\" id=\"display_product_type_id\"></span>\n                        </label>\n                        <label\n                          style=\"vertical-align: text-top; font-size: 17px\"\n                        >\n                          Store Link\n                          <input\n                            type=\"radio\"\n                            value=\"custom\"\n                            v-model=\"unsubscribe_link_type\"\n                          />\n                          <span class=\"icn\" id=\"display_product_type_id\"></span>\n                        </label>\n                      </div>\n                    </div>\n                    <div class=\"mt-1\">\n                      <label v-if=\"unsubscribe_link_type === 'standard'\"\n                        >(In this case, customer will be redirected to a Cense\n                        AI url from where they can unsubscribe to marketing\n                        emails.)</label\n                      >\n                      <label v-else\n                        >(In this case, customer will be redirected to a url of\n                        your store to continue unsubscribing from marketing\n                        emails. Please provide a url for the same. )</label\n                      >\n                    </div>\n                    <input\n                      v-if=\"unsubscribe_link_type !== 'standard'\"\n                      type=\"email\"\n                      class=\"form-control mt-1\"\n                      v-model=\"unsubscribe_link\"\n                      placeholder=\"Enter your website url\"\n                      style=\"padding: 5px\"\n                      :disabled=\"disable_btn_expired\"\n                      required\n                    />\n                    <div class=\"dash-modal\">\n                      <div\n                        class=\"\n                          card-act\n                          btn-wrap\n                          text-right\n                          mt-2\n                          pt-0\n                          border-top-0\n                        \"\n                      >\n                        <button\n                          id=\"product_setting_promotional_email_save_btn\"\n                          type=\"submit\"\n                          style=\"display: text-center !important\"\n                          class=\"darkblue-btn mt-3\"\n                          @click=\"\n                            configure_product_settings(\n                              'unsubscribe_promotional_email'\n                            )\n                          \"\n                        >\n                          Save\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport Swal from \"sweetalert2\";\nimport api_calls from \"@/portal/api_calls\";\nimport currency from \"@/portal/components/Currency\";\nimport Multiselect from \"vue-multiselect\";\nimport { freeze_portal, show_subscription_expired_swal } from \"@/portal/mixins\";\nimport VuePhoneNumberInput from \"vue-phone-number-input\";\nimport \"vue-phone-number-input/dist/vue-phone-number-input.css\";\nexport default {\n  name: \"ProductSettingsPage\",\n  components: {\n    Multiselect,\n    VuePhoneNumberInput,\n  },\n  mixins: [freeze_portal, show_subscription_expired_swal],\n  data() {\n    return {\n      phoneNumber: null,\n      contact_us_phone_number: null,\n      inventory_level_notification: 5,\n      currency_code: \"\",\n      currency_list: [],\n      feedback_question_frequency: 90,\n      phone_no_disable: false,\n      email_disable: false,\n      reset_icon_path: require(\"@/portal/assets/img/reset_icon.svg\"),\n      verification_status: null,\n      big_spinner: false,\n      companyid: null,\n      companyname: null,\n      is_display_products: false,\n      display_products_id: true,\n      display_products_type: null,\n      email_required: false,\n      phone_no_details: null,\n      email_details: null,\n      email_required_id: true,\n      phone_number_validity: /\\+[0-9]{9,14}$/,\n      email_validity:\n        /^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$/,\n      limit_up_sell: 10,\n      limit_cross_sell: 10,\n      contact_us_email: \"\",\n      review_message_first: \"\",\n      review_message_second: \"\",\n      retail_web_framework: this.$session.get(\"retail_web_framework\"),\n      verify_product_settings: [],\n      verify_check: false,\n      is_display_banner_on_landing: false,\n      disable_btn_expired: false,\n      unsubscribe_link: null,\n      unsubscribe_link_type: \"standard\",\n      reg_host:\n        /https:\\/\\/[(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)/i,\n      tracking_url: null,\n      url_parameter: [],\n      new_tracking_url: {},\n      get_tracking_url: false,\n      minutes_after_cart_abandoned: null,\n      max_notification_count: null,\n      abandoned_email_option: '',\n\n    };\n  },\n  created() {\n    if (this.$session.get(\"UserInformation\").role == \"SuperAdmin\") {\n      this.companyid = this.$session.get(\"CompanyId\");\n      this.companyname = this.$session.get(\"CompanyName\");\n    } else {\n      this.companyid = this.$session.get(\"UserInformation\").company_id;\n      this.companyname = this.$session.get(\"UserInformation\").company_name;\n    }\n    this.load_product_settings();\n  },\n  mounted() {\n    setTimeout(() => {\n      this.freeze_portal();\n    }, 1000);\n    this.$root.$on(\"ProductSettingsPageDisabled\", (data) => {\n      if (data === true) {\n        this.disable_btn_expired = true;\n      }\n    });\n    this.retail_web_framework = this.$session.get(\"retail_web_framework\");\n    for (var i = 0; i < currency.length; i++) {\n      this.currency_list.push({\n        display_name:\n          currency[i].emoji +\n          \" \" +\n          currency[i].currency_code +\n          \" - \" +\n          currency[i].currency_name,\n        value: currency[i].currency_code,\n      });\n    }\n    // this.unique();\n    this.freeze_portal();\n    $('[data-toggle=\"popover\"]').popover();\n    // load_product_settings();\n    this.$root.$emit(\"change_sidebar_main_menu\", \"Store\");\n  },\n  computed: {\n    validPhoneNumber() {\n      if (this.phone_no_details != null) {\n        if (\n          this.phone_number_validity.test(\n            this.phone_no_details.replace(/\\s+/g, \"\")\n          )\n        ) {\n          return true;\n        } else {\n          return \"Please enter a valid phone number in the format: +CountryCode Number\";\n        }\n      }\n    },\n    validEmail() {\n      if (this.contact_us_email != null) {\n        if (this.email_validity.test(this.contact_us_email)) {\n          return true;\n        } else {\n          return \"Please enter a valid Email Address\";\n        }\n      }\n    },\n    validUrl() {\n      if (this.contact_us_email != null) {\n        if (this.unsubscribe_link_type === \"standard\") {\n          this.unsubscribe_link = null;\n          return true;\n        } else if (this.reg_host.test(this.unsubscribe_link)) {\n          return true;\n        } else {\n          return \"Please enter a valid Url\";\n        }\n      }\n    },\n  },\n  watch: {\n    email_details() {\n      if (this.email_details == null || this.email_details == \"\") {\n        this.email_disable = false;\n      }\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    var check = false;\n    if (this.verify_check) {\n      if (\n        this.verify_product_settings.review_message_first ==\n          this.review_message_first &&\n        this.verify_product_settings.review_message_second ==\n          this.review_message_second &&\n          this.verify_product_settings.minutes_after_cart_abandoned ==\n          this.minutes_after_cart_abandoned &&\n          this.verify_product_settings.max_notification_count ==\n          this.max_notification_count &&\n          this.verify_product_settings.abandoned_email_option ==\n          this.abandoned_email_option &&\n        this.verify_product_settings.contact_help_email ==\n          this.contact_us_email &&\n        this.verify_product_settings.contact_us_phone_number ==\n          (this.contact_us_phone_number\n            ? this.phoneNumber.formattedNumber\n            : undefined) &&\n        this.verify_product_settings.order_retrieval_only_email_required ==\n          this.email_required &&\n        this.verify_product_settings.user_feedback_frequency ==\n          this.feedback_question_frequency &&\n        this.verify_product_settings.low_inventory_notification ==\n          this.inventory_level_notification &&\n        this.verify_product_settings.limit_up_sell == this.limit_up_sell &&\n        this.verify_product_settings.limit_cross_sell ==\n          this.limit_cross_sell &&\n        this.verify_product_settings.sender_email == this.email_details &&\n        this.verify_product_settings.display_products_on_landing ==\n          this.is_display_products &&\n        this.verify_product_settings.is_display_banner_on_landing ==\n          this.is_display_banner_on_landing &&\n        this.verify_product_settings.display_products_type ==\n          this.display_products_type\n      ) {\n        check = false;\n      } else {\n        check = true;\n      }\n    }\n    if (check && !this.disable_btn_expired) {\n      Swal({\n        title: \"Are you sure?\",\n        text: \"If you have made any changes in the product settings please save them first, else they will discarded!\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Save\",\n        cancelButtonText: \"Cancel\",\n      }).then((result) => {\n        if (result.value) {\n          this.configure_product_settings(\"email_required\");\n        } else {\n          next();\n        }\n      });\n    } else {\n      next();\n    }\n  },\n  methods: {\n    unique() {\n      let arr = this.currency_list;\n      var u = {},\n        a = [];\n      for (var i = 0, l = arr.length; i < l; ++i) {\n        if (!u.hasOwnProperty(arr[i])) {\n          a.push(arr[i]);\n          u[arr[i]] = 1;\n        }\n      }\n      this.currency_list = a;\n    },\n    email_verification_status() {\n      if (this.email_details != null && this.email_details != \"\") {\n        this.email_disable = true;\n        this.big_spinner = true;\n        axios\n          .post(\n            api_calls.product_settings(),\n            {\n              company_name: this.companyname,\n              company_id: this.companyid,\n              email: this.$session.get(\"UserInformation\").email,\n              license_key: this.$session.get(\"UserInformation\").license_key,\n              token: this.$session.get(\"UserInformation\").tokens,\n              is_email_verification_status: true,\n              email_id: this.email_details,\n            },\n            {\n              headers: {\n                Authorization: `Bearer ${this.$session.get(\"at\")}`,\n              },\n            }\n          )\n          .then((response) => {\n            this.big_spinner = false;\n            if (\n              response.data != \"\" &&\n              response.data != null &&\n              response.data != \"Internal server Error\"\n            ) {\n              var status = response.data.verification_status;\n              this.verification_status =\n                status == \"Success\"\n                  ? \"Success\"\n                  : status == \"Pending\"\n                  ? \"Pending (Please Verify Your Email Address)\"\n                  : status +\n                    \"(The verification link has expired, kindly restart the process by removing the existing email-id.)\";\n            }\n          })\n          .catch((e) => {\n            this.big_spinner = false;\n            if (\n              e.response.status === 410 ||\n              e.response.status === 440 ||\n              e.response.status === 409\n            ) {\n              this.$root.$emit(\"Session_Expired\", e.response.data);\n            }\n          });\n      }\n    },\n    load_product_settings() {\n      this.email_details = null;\n      this.phone_no_details = null;\n      this.email_required = false;\n      this.currency_code = \"\";\n      this.feedback_question_frequency = 90;\n      this.inventory_level_notification = 5;\n      this.limit_up_sell = 10;\n      this.limit_cross_sell = 10;\n      this.big_spinner = true;\n      axios\n        .post(\n          api_calls.product_settings(),\n          {\n            company_name: this.companyname,\n            company_id: this.companyid,\n            email: this.$session.get(\"UserInformation\").email,\n            license_key: this.$session.get(\"UserInformation\").license_key,\n            token: this.$session.get(\"UserInformation\").tokens,\n            is_get: true,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${this.$session.get(\"at\")}`,\n            },\n          }\n        )\n        .then((response) => {\n          this.big_spinner = false;\n          var webframework = this.retail_web_framework;\n          if (\n            response.data != \"\" &&\n            response.data != null &&\n            response.data != \"Internal server Error\" &&\n            response.data.msg !== \"NO DATA AVAILABLE\"\n          ) {\n            this.verify_product_settings =\n              response.data[webframework + \"_details\"];\n            this.review_message_first =\n              response.data[webframework + \"_details\"].review_message_first;\n            this.minutes_after_cart_abandoned =\n              response.data[webframework + \"_details\"].minutes_after_cart_abandoned;\n              this.max_notification_count =\n              response.data[webframework + \"_details\"].max_notification_count;\n              this.abandoned_email_option =\n              response.data[webframework + \"_details\"].abandoned_email_option;\n              this.review_message_second =\n              response.data[webframework + \"_details\"].review_message_second;\n            this.contact_us_email =\n              response.data[webframework + \"_details\"].contact_help_email;\n            this.contact_us_phone_number =\n              response.data[webframework + \"_details\"].contact_us_phone_number;\n            this.email_details =\n              response.data[webframework + \"_details\"].sender_email;\n            this.phone_no_details =\n              response.data[webframework + \"_details\"].sender_phone_no;\n            this.email_required =\n              response.data[\n                webframework + \"_details\"\n              ].order_retrieval_only_email_required;\n            this.currency_code =\n              response.data[webframework + \"_details\"].base_currency;\n            this.feedback_question_frequency =\n              response.data[webframework + \"_details\"].user_feedback_frequency;\n            this.inventory_level_notification =\n              response.data[\n                webframework + \"_details\"\n              ].low_inventory_notification;\n            this.limit_up_sell =\n              response.data[webframework + \"_details\"].limit_up_sell;\n            this.limit_cross_sell =\n              response.data[webframework + \"_details\"].limit_cross_sell;\n            this.is_display_products =\n              response.data[\n                webframework + \"_details\"\n              ].display_products_on_landing;\n            this.is_display_banner_on_landing =\n              response.data[\n                webframework + \"_details\"\n              ].is_display_banner_on_landing;\n            this.display_products_type =\n              response.data[webframework + \"_details\"].display_products_type;\n            this.tracking_url =\n              response.data[webframework + \"_details\"].shipment_tracking_url ===\n              undefined\n                ? null\n                : response.data[webframework + \"_details\"].shipment_tracking_url\n                    .url;\n            this.url_parameter =\n              response.data[webframework + \"_details\"].shipment_tracking_url ===\n              undefined\n                ? []\n                : response.data[webframework + \"_details\"].shipment_tracking_url\n                    .params;\n            // this.get_tracking_url = Boolean(this.tracking_url);\n            this.email_verification_status();\n            this.verify_check = true;\n          } else {\n            this.verify_check = false;\n            toastr.error(\"Internal Server Error\");\n          }\n        })\n        .catch((e) => {\n          this.big_spinner = false;\n          this.verify_check = false;\n          toastr.error(\"Some Error Occurred.\");\n          if (\n            e.response.status === 410 ||\n            e.response.status === 440 ||\n            e.response.status === 409\n          ) {\n            this.$root.$emit(\"Session_Expired\", e.response.data);\n          }\n        });\n    },\n    configure_product_settings(value) {\n      if (!this.disable_btn_expired) {\n        event.preventDefault();\n        if (value == \"email\") {\n          Swal.fire({\n            title: \"Are you sure?\",\n            text: \"Please make sure you have entered a correct email address, you will receive an email with the verification link.\",\n            type: \"question\",\n            showCancelButton: true,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: \"Yes, Proceed!!\",\n          }).then((result) => {\n            if (result.value) {\n              this.big_spinner = true;\n              axios\n                .post(\n                  api_calls.product_settings(),\n                  {\n                    company_name: this.companyname,\n                    company_id: this.companyid,\n                    email: this.$session.get(\"UserInformation\").email,\n                    license_key:\n                      this.$session.get(\"UserInformation\").license_key,\n                    token: this.$session.get(\"UserInformation\").tokens,\n                    is_email: true,\n                    email_id: this.email_details,\n                  },\n                  {\n                    headers: {\n                      Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                    },\n                  }\n                )\n                .then((response) => {\n                  this.big_spinner = false;\n                  if (response.data == \"Query Executed Successfully\") {\n                    swal({\n                      text:\n                        \"Verification email sent to\" +\n                        \" \" +\n                        this.email_details +\n                        \". Kindly check your email. \\n You will receive an email from sender 'Amazon Web Services'. Please verify that link\",\n                      type: \"success\",\n                      title: \"Success\",\n                      allowOutsideClick: false,\n                      allowEscapeKey: false,\n                    });\n                    this.email_disable = true;\n                    this.email_verification_status();\n                    this.load_product_settings();\n                  } else {\n                    swal({\n                      text: \"Internal Server Error\",\n                      type: \"error\",\n                      timer: 2000,\n                    });\n                  }\n                })\n                .catch((e) => {\n                  this.big_spinner = false;\n                  toastr.error(\"Some Error Occurred.\");\n                  if (\n                    e.response.status === 410 ||\n                    e.response.status === 440 ||\n                    e.response.status === 409\n                  ) {\n                    this.$root.$emit(\"Session_Expired\", e.response.data);\n                  }\n                });\n            }\n          });\n        } else if (value == \"phone_no\") {\n          if (this.validPhoneNumber == true) {\n            this.big_spinner = true;\n            axios\n              .post(\n                api_calls.product_settings(),\n                {\n                  company_name: this.companyname,\n                  company_id: this.companyid,\n                  email: this.$session.get(\"UserInformation\").email,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  token: this.$session.get(\"UserInformation\").tokens,\n                  is_phone_no: true,\n                  phone_no: this.phone_no_details,\n                },\n                {\n                  headers: {\n                    Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                  },\n                }\n              )\n              .then((response) => {\n                this.big_spinner = false;\n                if (response.data == \"Query Executed Successfully\") {\n                  swal({\n                    text: \"Phone number saved successfully\",\n                    type: \"success\",\n                    timer: 2000,\n                    title: \"Success\",\n                  });\n                  this.empty_variable();\n                  this.load_product_settings();\n                } else {\n                  swal({\n                    text: \"Internal Server Error\",\n                    type: \"error\",\n                    timer: 2000,\n                  });\n                }\n              })\n              .catch((e) => {\n                this.big_spinner = false;\n                toastr.error(\"Some Error Occurred.\");\n                if (\n                  e.response.status === 410 ||\n                  e.response.status === 440 ||\n                  e.response.status === 409\n                ) {\n                  this.$root.$emit(\"Session_Expired\", e.response.data);\n                }\n              });\n          } else {\n            toastr.error(\n              \"Mobile number is invalid, please enter in format: + CountryCode Number\"\n            );\n          }\n        } else if (value == \"email_required\") {\n          this.create_tracking_url();\n          if (this.validEmail != true && !Boolean(this.phoneNumber)) {\n            swal({\n              text: \"Please enter a valid email or phone number\",\n              type: \"warning\",\n              timer: 3000,\n            });\n            return;\n          }\n          // if(!Boolean(this.phoneNumber)){\n          //   swal({\n          //     text: \"Please enter a valid Phone Number\",\n          //     type: \"warning\",\n          //     timer: 3000\n          //   });\n          //   return\n          // }else\n          if (\n            Boolean(this.phoneNumber) &&\n            Boolean(this.phoneNumber.phoneNumber) &&\n            this.phoneNumber.isValid != true\n          ) {\n            swal({\n              text: \"Please enter a valid Phone Number\",\n              type: \"warning\",\n              timer: 3000,\n            });\n            return;\n          }\n          if (\n            this.review_message_first === \"\" &&\n            this.review_message_second === \"\"\n          ) {\n            swal({\n              text: \"Please enter a message for review and ratings\",\n              type: \"warning\",\n              timer: 3500,\n            });\n            return;\n          }\n          if (\n            this.is_display_products === true &&\n            (this.display_products_type === null ||\n              this.display_products_type === \"\")\n          ) {\n            swal({\n              text: \"Please select display product type\",\n              type: \"warning\",\n              timer: 5000,\n            });\n            return;\n          }\n          if (\n            this.inventory_level_notification < 0 ||\n            this.feedback_question_frequency < 0\n          ) {\n            swal({\n              text: \"Numerical value can not be less then zero\",\n              type: \"warning\",\n              timer: 3000,\n            });\n          }\n          if (this.currency_code == \"\" || this.currency_code == undefined) {\n            swal({\n              text: \"Please Select Base Currency\",\n              type: \"warning\",\n              timer: 3000,\n            });\n            return;\n          } else if (\n            this.limit_up_sell == null ||\n            this.limit_up_sell <= 0 ||\n            this.limit_cross_sell == null ||\n            this.limit_cross_sell <= 0\n          ) {\n            swal({\n              text: \"Up-sell and Cross-sell limit values cannot be less than zero\",\n              type: \"warning\",\n              timer: 3000,\n            });\n          } else {\n            this.big_spinner = true;\n            axios\n              .post(\n                api_calls.product_settings(),\n                {\n                  company_name: this.companyname,\n                  company_id: this.companyid,\n                  email: this.$session.get(\"UserInformation\").email,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  token: this.$session.get(\"UserInformation\").tokens,\n                  is_email_required: true,\n                  email_required: {\n                    review_message_first: this.review_message_first,\n                    minutes_after_cart_abandoned: this.minutes_after_cart_abandoned,\n                    max_notification_count: this.max_notification_count,\n                    abandoned_email_option: this.abandoned_email_option,\n                    review_message_second: this.review_message_second,\n                    contact_help_email: this.contact_us_email,\n                    contact_us_phone_number:\n                      Boolean(this.phoneNumber) &&\n                      this.phoneNumber.isValid == true\n                        ? this.phoneNumber.formattedNumber\n                        : null,\n                    order_retrieval_only_email_required: this.email_required,\n                    base_currency: this.currency_code,\n                    user_feedback_frequency: this.feedback_question_frequency,\n                    low_inventory_notification:\n                      this.inventory_level_notification,\n                    limit_up_sell: this.limit_up_sell,\n                    limit_cross_sell: this.limit_cross_sell,\n                    display_products_on_landing: this.is_display_products,\n                    is_display_banner_on_landing:\n                      this.is_display_banner_on_landing,\n                    display_products_type: this.is_display_products\n                      ? this.display_products_type\n                      : null,\n                    shipment_tracking_url: this.new_tracking_url,\n                    shop_settings_saved: true,\n                  },\n                },\n                {\n                  headers: {\n                    Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                  },\n                }\n              )\n              .then((response) => {\n                this.big_spinner = false;\n                if (response.data == \"Query Executed Successfully\") {\n                  swal({\n                    text: \"Your changes have been saved successfully\",\n                    type: \"success\",\n                    timer: 4000,\n                  });\n                  this.empty_variable();\n                  this.load_product_settings();\n                } else {\n                  swal({\n                    text: \"Internal Server Error\",\n                    type: \"error\",\n                    timer: 2000,\n                  });\n                }\n              })\n              .catch((e) => {\n                this.big_spinner = false;\n                toastr.error(\"Some Error Occurred.\");\n                if (\n                  e.response.status === 410 ||\n                  e.response.status === 440 ||\n                  e.response.status === 409\n                ) {\n                  this.$root.$emit(\"Session_Expired\", e.response.data);\n                }\n              });\n          }\n        } else if (value == \"email_remove\") {\n          Swal.fire({\n            title: \"Are you sure?\",\n            text: \"Once you remove the saved email address, you will have to add and verify the email again before you can send emails!\",\n            type: \"question\",\n            showCancelButton: true,\n            confirmButtonColor: \"#3085d6\",\n            cancelButtonColor: \"#d33\",\n            confirmButtonText: \"Yes, Remove!!\",\n          }).then((result) => {\n            if (result.value) {\n              this.big_spinner = true;\n              axios\n                .post(\n                  api_calls.product_settings(),\n                  {\n                    company_name: this.companyname,\n                    company_id: this.companyid,\n                    email: this.$session.get(\"UserInformation\").email,\n                    license_key:\n                      this.$session.get(\"UserInformation\").license_key,\n                    token: this.$session.get(\"UserInformation\").tokens,\n                    is_remove_email: true,\n                    email_id: this.email_details,\n                  },\n                  {\n                    headers: {\n                      Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                    },\n                  }\n                )\n                .then((response) => {\n                  this.big_spinner = false;\n                  if (response.data == \"Query Executed Successfully\") {\n                    swal({\n                      text: \"Email Id has been removed successfully!\",\n                      type: \"success\",\n                      timer: 5000,\n                      title: \"Success\",\n                    });\n                    this.email_disable = false;\n                    this.email_details = null;\n                    this.empty_variable();\n                    this.load_product_settings();\n                  } else {\n                    swal({\n                      text: \"Internal Server Error\",\n                      type: \"error\",\n                      timer: 2000,\n                    });\n                  }\n                })\n                .catch((e) => {\n                  this.big_spinner = false;\n                  toastr.error(\"Some Error Occurred.\");\n                  if (\n                    e.response.status === 410 ||\n                    e.response.status === 440 ||\n                    e.response.status === 409\n                  ) {\n                    this.$root.$emit(\"Session_Expired\", e.response.data);\n                  }\n                });\n            }\n          });\n        } else if (value == \"unsubscribe_promotional_email\") {\n          if (this.validUrl != true) {\n            swal({\n              text: \"Please enter a valid Url\",\n              type: \"warning\",\n              timer: 3000,\n            });\n            return;\n          } else {\n            this.big_spinner = true;\n            axios\n              .post(\n                api_calls.product_settings(),\n                {\n                  company_name: this.companyname,\n                  company_id: this.companyid,\n                  email: this.$session.get(\"UserInformation\").email,\n                  license_key: this.$session.get(\"UserInformation\").license_key,\n                  token: this.$session.get(\"UserInformation\").tokens,\n                  is_email_required: true,\n                  email_required: {\n                    review_message_first: this.review_message_first,\n                    review_message_second: this.review_message_second,\n                    minutes_after_cart_abandoned: this.minutes_after_cart_abandoned,\n                    max_notification_count: this.max_notification_count,\n                    abandoned_email_option: this.abandoned_email_option,\n                    contact_help_email: this.contact_us_email,\n                    // contact_us_phone_number:this.phoneNumber.formattedNumber,\n                    order_retrieval_only_email_required: this.email_required,\n                    base_currency: this.currency_code,\n                    user_feedback_frequency: this.feedback_question_frequency,\n                    low_inventory_notification:\n                      this.inventory_level_notification,\n                    limit_up_sell: this.limit_up_sell,\n                    limit_cross_sell: this.limit_cross_sell,\n                    display_products_on_landing: this.is_display_products,\n                    is_display_banner_on_landing:\n                      this.is_display_banner_on_landing,\n                    display_products_type: this.is_display_products\n                      ? this.display_products_type\n                      : null,\n                    shop_settings_saved: true,\n                    unsubscribe_link: this.unsubscribe_link,\n                    unsubscribe_link_type: this.unsubscribe_link_type,\n                  },\n                },\n                {\n                  headers: {\n                    Authorization: `Bearer ${this.$session.get(\"at\")}`,\n                  },\n                }\n              )\n              .then((response) => {\n                this.big_spinner = false;\n                if (response.data == \"Query Executed Successfully\") {\n                  swal({\n                    text: \"Your changes have been saved successfully\",\n                    type: \"success\",\n                    timer: 4000,\n                  });\n                  this.empty_variable();\n                  this.load_product_settings();\n                } else {\n                  swal({\n                    text: \"Internal Server Error\",\n                    type: \"error\",\n                    timer: 2000,\n                  });\n                }\n              })\n              .catch((e) => {\n                this.big_spinner = false;\n                toastr.error(\"Some Error Occurred.\");\n                if (\n                  e.response.status === 410 ||\n                  e.response.status === 440 ||\n                  e.response.status === 409\n                ) {\n                  this.$root.$emit(\"Session_Expired\", e.response.data);\n                }\n              });\n          }\n        }\n      } else {\n        this.show_subscription_expired_swal();\n      }\n    },\n    empty_variable() {\n      this.email_details = null;\n      this.email_required = false;\n      this.currency_code = \"\";\n      this.feedback_question_frequency = 90;\n      this.inventory_level_notification = 5;\n      this.phone_no_details = null;\n      this.limit_up_sell = 10;\n      this.limit_cross_sell = 10;\n    },\n    // add_parameter(){\n    //   let next_id =Math.random();\n    //   if (Boolean(this.tracking_url) ) {\n    //     this.url_parameter.push({\n    //     key: null,\n    //     id: next_id,\n    //     value: null\n    //   }\n    //   )\n    //   }else{\n    //     swal({\n    //       text: \"Add  Shipment tracking URL \",\n    //       toast: true,\n    //       position: \"top-end\",\n    //       type: \"warning\",\n    //       showConfirmButton: false,\n    //       timer: 2500,\n    //     });\n    //     return;\n    //   }\n    // },\n    // delete_parameter(index){\n    //   if(\n    //     this.url_parameter.length === 0\n    //   ) {\n    //     swal({\n    //       text: \"Atleast one url_parameter is required to add buttons\",\n    //       toast: true,\n    //       position: \"top-end\",\n    //       type: \"warning\",\n    //       showConfirmButton: false,\n    //       timer: 2500,\n    //     });\n    //     return;\n    //   }\n    //   let temp_index = null;\n    //   for (let i = 0; i < this.url_parameter.length; i++) {\n    //     if (this.url_parameter[i].id == index) {\n    //       temp_index = i;\n    //     }\n    //   }\n    //   this.url_parameter.splice(temp_index, 1);\n    // },\n    create_tracking_url() {\n      this.new_tracking_url[\"url\"] = this.tracking_url;\n      this.new_tracking_url[\"params\"] = this.url_parameter;\n    },\n  },\n};\n</script>\n<style scoped>\n.dash-modal .btn-wrap .darkblue-btn {\n  margin-left: 0px;\n  padding: 5px 20px !important;\n}\n.darkblue-btn {\n  display: block !important;\n}\n.btn {\n  display: flex !important;\n  padding: 5px 20px !important;\n  font-size: 14px !important;\n}\n</style>\n<style>\n.multiselect__tags {\n  min-height: 42px !important;\n}\n</style>"]}]}