{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/analytics/AnalyticsConfigV2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/analytics/AnalyticsConfigV2.vue","mtime":1643027096184},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgc3dhbCBmcm9tICdzd2VldGFsZXJ0Mic7CgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBbmFseXRpY3NDb25maWdWMiIsCiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3QsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgY29sdW1uczogW10sCiAgICAgIG1ldHJpY3M6IFtdLAogICAgICBmaWxlX2xhYmVsOiAiQ2hvb3NlIGZpbGUiLAogICAgICBpc19maWxlX3VwbG9hZGVkOiBmYWxzZSwKICAgICAgbmV3Y29sdW1uczogW10sCiAgICAgIGlzY29sdW1uc25hbWVjaGFuZ2VkOiBmYWxzZSwKICAgICAgb2JqZWN0X25hbWU6ICIiLAogICAgICBtZXRyaWNzZGF0YTogW10sCiAgICAgIGlzbWV0cmljc3NhdmVkOiBmYWxzZSwKICAgICAgZGF0YXNldF9uYW1lOiAiIiwKICAgICAgZmlsZTogbnVsbCwKICAgICAgbmV3Y29sdW1uc2NvbXBsZXRlOiBbXSwKICAgICAgY29sdW1uX2RldGFpbHM6IHt9LAogICAgICBpc19kYXRhc2V0X2VkaXRhYmxlOiBmYWxzZSwKICAgICAgZGF0YXNldHM6W10sCiAgICAgIHNob3dfZGF0YXNldF9zZXR0aW5nczogZmFsc2UsCiAgICAgIC8vIGNvdW50cnlfY29kZXM6WyJBRk4iLCJFVVIiLCJBTEwiLCJEWkQiLCJVU0QiLCJFVVIiLCJBT0EiLCJYQ0QiLCJYQ0QiLCJBUlMiLCJBTUQiLCJBV0ciLCJBVUQiLCJFVVIiLCJBWk4iLCJCU0QiLCJCSEQiLCJCRFQiLCJCQkQiLCJCWU4iLCJFVVIiLCJCWkQiLCJYT0YiLCJCTUQiLCJJTlIiLCJCVE4iLCJCT0IiLCJCT1YiLCJVU0QiLCJCQU0iLCJCV1AiLCJOT0siLCJCUkwiLCJVU0QiLCJCTkQiLCJCR04iLCJYT0YiLCJCSUYiLCJDVkUiLCJLSFIiLCJYQUYiLCJDQUQiLCJLWUQiLCJYQUYiLCJYQUYiLCJDTFAiLCJDTEYiLCJDTlkiLCJBVUQiLCJBVUQiLCJDT1AiLCJDT1UiLCJLTUYiLCJDREYiLCJYQUYiLCJOWkQiLCJDUkMiLCJYT0YiLCJIUksiLCJDVVAiLCJDVUMiLCJBTkciLCJFVVIiLCJDWksiLCJES0siLCJESkYiLCJYQ0QiLCJET1AiLCJVU0QiLCJFR1AiLCJTVkMiLCJVU0QiLCJYQUYiLCJFUk4iLCJFVVIiLCJFVEIiLCJFVVIiLCJGS1AiLCJES0siLCJGSkQiLCJFVVIiLCJFVVIiLCJFVVIiLCJYUEYiLCJFVVIiLCJYQUYiLCJHTUQiLCJHRUwiLCJFVVIiLCJHSFMiLCJHSVAiLCJFVVIiLCJES0siLCJYQ0QiLCJFVVIiLCJVU0QiLCJHVFEiLCJHQlAiLCJHTkYiLCJYT0YiLCJHWUQiLCJIVEciLCJVU0QiLCJBVUQiLCJFVVIiLCJITkwiLCJIS0QiLCJIVUYiLCJJU0siLCJJTlIiLCJJRFIiLCJYRFIiLCJJUlIiLCJJUUQiLCJFVVIiLCJHQlAiLCJJTFMiLCJFVVIiLCJKTUQiLCJKUFkiLCJHQlAiLCJKT0QiLCJLWlQiLCJLRVMiLCJBVUQiLCJLUFciLCJLUlciLCJLV0QiLCJLR1MiLCJMQUsiLCJFVVIiLCJMQlAiLCJMU0wiLCJaQVIiLCJMUkQiLCJMWUQiLCJDSEYiLCJFVVIiLCJFVVIiLCJNT1AiLCJNS0QiLCJNR0EiLCJNV0siLCJNWVIiLCJNVlIiLCJYT0YiLCJFVVIiLCJVU0QiLCJFVVIiLCJNUk8iLCJNVVIiLCJFVVIiLCJYVUEiLCJNWE4iLCJNWFYiLCJVU0QiLCJNREwiLCJFVVIiLCJNTlQiLCJFVVIiLCJYQ0QiLCJNQUQiLCJNWk4iLCJNTUsiLCJOQUQiLCJaQVIiLCJBVUQiLCJOUFIiLCJFVVIiLCJYUEYiLCJOWkQiLCJOSU8iLCJYT0YiLCJOR04iLCJOWkQiLCJBVUQiLCJVU0QiLCJOT0siLCJPTVIiLCJQS1IiLCJVU0QiLCIiLCJQQUIiLCJVU0QiLCJQR0siLCJQWUciLCJQRU4iLCJQSFAiLCJOWkQiLCJQTE4iLCJFVVIiLCJVU0QiLCJRQVIiLCJFVVIiLCJST04iLCJSVUIiLCJSV0YiLCJFVVIiLCJTSFAiLCJYQ0QiLCJYQ0QiLCJFVVIiLCJFVVIiLCJYQ0QiLCJXU1QiLCJFVVIiLCJTVEQiLCJTQVIiLCJYT0YiLCJSU0QiLCJTQ1IiLCJTTEwiLCJTR0QiLCJBTkciLCJYU1UiLCJFVVIiLCJFVVIiLCJTQkQiLCJTT1MiLCJaQVIiLCIiLCJTU1AiLCJFVVIiLCJMS1IiLCJTREciLCJTUkQiLCJOT0siLCJTWkwiLCJTRUsiLCJDSEYiLCJDSEUiLCJDSFciLCJTWVAiLCJUV0QiLCJUSlMiLCJUWlMiLCJUSEIiLCJVU0QiLCJYT0YiLCJOWkQiLCJUT1AiLCJUVEQiLCJUTkQiLCJUUlkiLCJUTVQiLCJVU0QiLCJBVUQiLCJVR1giLCJVQUgiLCJBRUQiLCJHQlAiLCJVU0QiLCJVU0QiLCJVU04iLCJVWVUiLCJVWUkiLCJVWlMiLCJWVVYiLCJWRUYiLCJWTkQiLCJVU0QiLCJVU0QiLCJYUEYiLCJNQUQiLCJZRVIiLCJaTVciLCJaV0wiLCJYQkEiLCJYQkIiLCJYQkMiLCJYQkQiLCJYVFMiLCJYWFgiLCJYQVUiLCJYUEQiLCJYUFQiLCJYQUciLCJBRkEiLCJGSU0iLCJBTEsiLCJBRFAiLCJFU1AiLCJGUkYiLCJBT0siLCJBT04iLCJBT1IiLCJBUkEiLCJBUlAiLCJBUlkiLCJSVVIiLCJBVFMiLCJBWU0iLCJBWk0iLCJSVVIiLCJCWVIiLCJCWUIiLCJSVVIiLCJCRUMiLCJCRUYiLCJCRUwiLCJCT1AiLCJCQUQiLCJCUkIiLCJCUkMiLCJCUkUiLCJCUk4iLCJCUlIiLCJCR0oiLCJCR0siLCJCR0wiLCJCVUsiLCJDTlgiLCJIUkQiLCJIUksiLCJDWVAiLCJDU0oiLCJDU0siLCJFQ1MiLCJFQ1YiLCJHUUUiLCJFRUsiLCJYRVUiLCJGSU0iLCJGUkYiLCJGUkYiLCJGUkYiLCJHRUsiLCJSVVIiLCJERE0iLCJERU0iLCJHSEMiLCJHSFAiLCJHUkQiLCJGUkYiLCJHTkUiLCJHTlMiLCJHV0UiLCJHV1AiLCJJVEwiLCJJU0oiLCJJRVAiLCJJTFAiLCJJTFIiLCJJVEwiLCJSVVIiLCJSVVIiLCJMQUoiLCJMVkwiLCJMVlIiLCJMU00iLCJaQUwiLCJMVEwiLCJMVFQiLCJMVUMiLCJMVUYiLCJMVUwiLCJNR0YiLCJNV0siLCJNVlEiLCJNTEYiLCJNVEwiLCJNVFAiLCJGUkYiLCJGUkYiLCJNWFAiLCJSVVIiLCJGUkYiLCJNWkUiLCJNWk0iLCJOTEciLCJBTkciLCJOSUMiLCJQRU4iLCJQRUgiLCJQRUkiLCJQRVMiLCJQTFoiLCJQVEUiLCJGUkYiLCJST0siLCJST04iLCJST0wiLCJSVVIiLCJGUkYiLCJGUkYiLCJGUkYiLCJJVEwiLCJDU0QiLCJFVVIiLCJTS0siLCJTSVQiLCJaQUwiLCJTREciLCJSSEQiLCJFU0EiLCJFU0IiLCJFU1AiLCJTREQiLCJTRFAiLCJTUkciLCJDSEMiLCJSVVIiLCJUSlIiLCJJRFIiLCJUUEUiLCJUUkwiLCJUUlkiLCJSVVIiLCJUTU0iLCJVR1MiLCJVR1ciLCJVQUsiLCJTVVIiLCJVU1MiLCJVWU4iLCJVWVAiLCJSVVIiLCJWRUIiLCJWRUYiLCJWRUYiLCJWTkMiLCJZREQiLCJZVUQiLCJZVU0iLCJZVU4iLCJaUk4iLCJaUloiLCJaTUsiLCJaV0MiLCJaV0QiLCJaV0QiLCJaV04iLCJaV1IiLCJYRk8iLCJYUkUiLCJYRlUiXSwgCiAgICAgIGNvdW50cnlfaXNvX2NvZGU6IG51bGwsCiAgICAgIGN1cnJlbmN5X2Zvcm1hdF9tb2RhbDogJycsCiAgICAgIGlzX2NvdW50cnlfY29kZXNfZHJvcGRvd25fZGlzYWJsZWQ6IHRydWUsCiAgICAgIGN1cnJlbnRfY29sdW1uX2luZGV4OiBudWxsLAogICAgICBhZ2dyZWdhdGlvbl9vcHRpb25zOiBbbnVsbCwgIlNVTSIsIkFWRyJdLAogICAgICBzYW1wbGU6ICIiLAogICAgICBjb3VudHJ5X2NvZGVzOiBbIkFMTCIsIkFGTiIsIkFSUyIsIkFXRyIsIkFVRCIsIkFaTiIsIkJTRCIsIkJCRCIsIkJZUiIsIkJaRCIsIkJNRCIsIkJPQiIsIkJBTSIsIkJXUCIsIkJHTiIsIkJSTCIsIkJORCIsIktIUiIsIkNBRCIsIktZRCIsIkNMUCIsIkNOWSIsIkNPUCIsIkNSQyIsIkhSSyIsIkNVUCIsIkNaSyIsIkRLSyIsIkRPUCIsIkVHUCIsIlNWQyIsIkVFSyIsIkVVUiIsIkZLUCIsIkZKRCIsIkdFTCIsIkdIQyIsIkdJUCIsIkdUUSIsIkdHUCIsIkdZRCIsIkhOTCIsIkhLRCIsIkhVRiIsIklTSyIsIklOUiIsIklEUiIsIklSUiIsIklNUCIsIklMUyIsIkpNRCIsIkpQWSIsIkpFUCIsIktaVCIsIktQVyIsIktSVyIsIktHUyIsIkxBSyIsIkxWTCIsIkxCUCIsIkxSRCIsIkxUTCIsIk1LRCIsIk1ZUiIsIk1VUiIsIk1YTiIsIk1OVCIsIk1aTiIsIk5BRCIsIk5QUiIsIkFORyIsIk5aRCIsIk5JTyIsIk5HTiIsIk5PSyIsIk9NUiIsIlBLUiIsIlBBQiIsIlBZRyIsIlBFTiIsIlBIUCIsIlBMTiIsIlFBUiIsIlJPTiIsIlJVQiIsIlNIUCIsIlNBUiIsIlJTRCIsIlNDUiIsIlNHRCIsIlNCRCIsIlNPUyIsIlpBUiIsIkxLUiIsIlNFSyIsIkNIRiIsIlNSRCIsIlNZUCIsIlRXRCIsIlRIQiIsIlRURCIsIlRSTCIsIlRWRCIsIlVBSCIsIkdCUCIsIlVTRCIsIlVZVSIsIlVaUyIsIlZFRiIsIlZORCIsIllFUiIsIlpXRCJdLAogICAgICBtZXRyaWNfb3BlcmF0aW9uX29wdGlvbnM6IFsnU1VNJywgJ0FWRycsICdDT1VOVCcsICdOVU5JUVVFJ10sCiAgICAgIG9sZF93b3Jrc2hlZXRfZGV0YWlsczoge30sCiAgICAgIHBvc3RncmVzX2ljb25fcGF0aDogcmVxdWlyZSgnQC9wb3J0YWwvYXNzZXRzL2ltZy9wb3N0Z3Jlc19pY29uLnBuZycpLAogICAgICAvLyBteXNxbF9pY29uX3BhdGg6IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvbXlzcWxfaWNvbi5wbmcnKSwKICAgICAgbXlzcWxfaWNvbl9wYXRoOiByZXF1aXJlKCdAL3BvcnRhbC9hc3NldHMvaW1nL2xvZ28tbXlzcWwucG5nJyksCiAgICAgIHNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nczogZmFsc2UsCiAgICAgIGRhdGFiYXNlX2RhdGFzZXRfaWQ6IG51bGwsCiAgICAgIGRhdGFiYXNlX2RhdGFzZXRfbmFtZTogbnVsbCwKICAgICAgZGF0YWJhc2Vfc2NoZW1hX25hbWU6IG51bGwsCiAgICAgIGRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmc6IG51bGwsCiAgICAgIGRhdGFiYXNlX2hvc3Q6IG51bGwsCiAgICAgIGRhdGFiYXNlX3BvcnQ6IG51bGwsCiAgICAgIGRhdGFiYXNlX3VzZXJuYW1lOiBudWxsLAogICAgICBkYXRhYmFzZV9wYXNzd29yZDogbnVsbCwKICAgICAgZGF0YWJhc2VfZGJfbmFtZTogbnVsbCwKICAgICAgc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzX2RldGFpbHM6IGZhbHNlLAogICAgICBjdXJyZW50X2RhdGFzZXRfZGF0YWJhc2VfaWNvbjogbnVsbCwKICAgICAgaXNTaG93aW5nX3Rlc3Q6IGZhbHNlLAogICAgICBzaG93X2RhdGFiYXNlX29wdGlvbnM6IHRydWUsCiAgICAgIGRhdGFiYXNlX2RhdGFzZXRfY29ubmVjdGlvbl90eXBlOiAnSkRCQycsCgogICAgICAKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRfZGF0YXNldF9saXN0KCk7CiAgICAvLyB0aGlzLnBvc3RncmVzX2ljb25fcGF0aCA9IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvcG9zdGdyZXNfaWNvbi5wbmcnKQogIH0sCiAgbWV0aG9kczogewogICAgb3Blbl9zZXR0aW5nc19mb3JfZGF0YXNldChpbmRleCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KTsKICAgICAgaWYoaW5kZXggPT09IG51bGwpewogICAgICAgICAgdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YXNldHNbaW5kZXhdKQogICAgICAgICAgdGhpcy5vbGRfd29ya3NoZWV0X2RldGFpbHMgPSB0aGlzLmRhdGFzZXRzW2luZGV4XS5vbGRfd29ya3NoZWV0X2RldGFpbHM7CiAgICAgICAgICB0aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUgPSB0cnVlOwogICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gdGhpcy5kYXRhc2V0c1tpbmRleF0uZmlsZV9uYW1lOwogICAgICAgICAgJCgiI2lucHV0R3JvdXBGaWxlMDEiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgJCgiI2RhdGFzZXRfbmFtZSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICB0aGlzLmRhdGFzZXRfbmFtZSA9IHRoaXMuZGF0YXNldHNbaW5kZXhdLmRhdGFfbmFtZTsKICAgICAgICAgICQoIiN1cGxvYWRfZmlsZSIpLmhpZGUoKTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YV9zb3VyY2VzWzBdLndvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9kZXRhaWxzKTsKCgogICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9yZW5hbWVfbWFwKSkgewogICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZToga2V5LAogICAgICAgICAgICAgICAgICBuZXduYW1lOiB2YWx1ZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IHRydWU7CiAgICAgICAgICB2YXIgbWV0cmljc19sZW4gPSB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzLmxlbmd0aDsgCiAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbWV0cmljc19sZW4gOyBpKyspIHsKICAgICAgICAgICAgICB0aGlzLm1ldHJpY3MucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLm1ldHJpY3NbaV0ubmFtZSwKICAgICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzW2ldLmNvbHVtbiwKICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzW2ldLm9wZXJhdGlvbiwKICAgICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1ldHJpY3MpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1ldHJpY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB0aGlzLm1ldHJpY3NkYXRhLnB1c2goewogICAgICAgICAgICAgIG5hbWU6IHRoaXMubWV0cmljc1tpXS5uYW1lLAogICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5tZXRyaWNzW2ldLmNvbHVtbiwKICAgICAgICAgICAgICBvcGVyYXRpb246IHRoaXMubWV0cmljc1tpXS5vcGVyYXRpb24sCiAgICAgICAgICAgICAgLy8gb246IFt0aGlzLm1ldHJpY3NbaV0uY29sdW1uMSwgdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjJdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgb2JqZWN0ID0gdGhpcy5jb2x1bW5zLnJlZHVjZSgKICAgICAgICAgICAgICAob2JqLCBpdGVtKSA9PiBPYmplY3QuYXNzaWduKG9iaiwgeyBbaXRlbS5uYW1lXTogaXRlbS5uZXduYW1lIH0pLAogICAgICAgICAgICAgIHt9CiAgICAgICAgICApOwoKICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5jb2x1bW5fZGV0YWlscykpIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBpZih0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSA9PT0ga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZS5jdXJyZW5jeV9mb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zW2ldLmRhdGFfdHlwZSA9IHZhbHVlLmRhdGF0eXBlOyAKICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jb2x1bW5zW2ldLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBuZXduYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZSA6IHZhbHVlLmRhdGF0eXBlLAogICAgICAgICAgICAgICAgICAgICAgY29sdW1uX3R5cGU6IHZhbHVlLmNvbHVtbl90eXBlLAogICAgICAgICAgICAgICAgICAgICAgYWRkaXRpdmU6IHZhbHVlLmFkZGl0aXZlLAogICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb246ICgodmFsdWUuYWdncmVnYXRpb24gPT09IG51bGwpID8gdmFsdWUuYWdncmVnYXRpb24gPSAiTm9uZSIgOiB2YWx1ZS5hZ2dyZWdhdGlvbiA9IHZhbHVlLmFnZ3JlZ2F0aW9uICksCiAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46dmFsdWUuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgICAgbmxwX3NlYXJjaF9lbmFibGVkOiB2YWx1ZS5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgICAgICAgICBzeW5vbnltczogKHZhbHVlLnN5bm9ueW1zID8gdW5kZWZpbmVkIDogIiIgKSwKICAgICAgICAgICAgICAgICAgICAgIGluZGV4X3R5cGU6IHZhbHVlLmluZGV4X3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlfY2F0ZWdvcnk6dmFsdWUuZW50aXR5X2NhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lfZm9ybWF0OiAoKHZhbHVlLmN1cnJlbmN5X2Zvcm1hdCA9PT0gdW5kZWZpbmVkKSA/IG51bGwgOiB2YWx1ZS5jdXJyZW5jeV9mb3JtYXQpCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyBicmVhazsKICAgICAgICAgICAgICB9IAogICAgICAgICAgfSAgCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlKTsKCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cKICAgICAgICAgIHZhciBhcnJheSA9IHt9OyAKICAgICAgICAgIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHt9OwogICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlLmxlbmd0aDsgaSsrKXsKICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV07CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wLmN1cnJlbmN5X2Zvcm1hdCkKICAgICAgICAgIC8vIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLywvZywgJz4+Jyk7CiAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsc1t0ZW1wLm5ld25hbWVdID0gewogICAgICAgICAgICAgICJkYXRhdHlwZSI6IGAke3RlbXAuZGF0YV90eXBlfWAsCiAgICAgICAgICAgICAgImNvbHVtbl90eXBlIjogYCR7dGVtcC5jb2x1bW5fdHlwZX1gLAogICAgICAgICAgICAgICJhZGRpdGl2ZSI6IHRlbXAuYWRkaXRpdmUsCiAgICAgICAgICAgICAgImFnZ3JlZ2F0aW9uIjogdGVtcC5hZ2dyZWdhdGlvbiwKICAgICAgICAgICAgICAiaGlkZGVuIiA6IHRlbXAuaGlkZGVuLAogICAgICAgICAgICAgICJubHBfc2VhcmNoX2VuYWJsZWQiOiB0ZW1wLm5scF9zZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgICAiaW5kZXhfdHlwZSI6IGAke3RlbXAuaW5kZXhfdHlwZX1gLAogICAgICAgICAgICAgICJzeW5vbnltcyI6IGAke3RlbXAuc3lub255bXN9YCwKICAgICAgICAgICAgICAiZW50aXR5X2NhdGVnb3J5IjpgJHt0ZW1wLmVudGl0eV9jYXRlZ29yeX1gLAogICAgICAgICAgICAgICJjdXJyZW5jeV9mb3JtYXQiOnRlbXAuY3VycmVuY3lfZm9ybWF0CiAgICAgICAgICAgICAgfQogICAgICAgICAgLy8gdGVtcC5zeW5vbnltcyA9IHRlbXAuc3lub255bXMucmVwbGFjZSgvPj4gL2csICcsJyk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh3b3Jrc2hlZXRfZGV0YWlscyk7CiAgICAgICAgICB0aGlzLmNvbHVtbl9kZXRhaWxzID0gT2JqZWN0LmFzc2lnbih3b3Jrc2hlZXRfZGV0YWlscyk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZSx0aGlzLmNvbHVtbl9kZXRhaWxzKTsKICAgICAgICAgIHRoaXMubmV3Y29sdW1ucyA9IG9iamVjdDsKICAgICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSB0cnVlOwogICAgICAgICAgdGhpcy5pc21ldHJpY3NzYXZlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAkKCIjaW5wdXRHcm91cEZpbGUwMSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAkKCIjZGF0YXNldF9uYW1lIikucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAKICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlVVVJRCgpIHsKICAgICAgLy8gUHVibGljIERvbWFpbi9NSVQKICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgLy9UaW1lc3RhbXAKICAgICAgdmFyIGQyID0KICAgICAgICAgIChwZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZS5ub3cgJiYgcGVyZm9ybWFuY2Uubm93KCkgKiAxMDAwKSB8fCAwOyAvL1RpbWUgaW4gbWljcm9zZWNvbmRzIHNpbmNlIHBhZ2UtbG9hZCBvciAwIGlmIHVuc3VwcG9ydGVkCiAgICAgIHJldHVybiAieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Ii5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKAogICAgICAgICAgYwogICAgICApIHsKICAgICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2OyAvL3JhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxNgogICAgICAgICAgaWYgKGQgPiAwKSB7CiAgICAgICAgICAvL1VzZSB0aW1lc3RhbXAgdW50aWwgZGVwbGV0ZWQKICAgICAgICAgIHIgPSAoZCArIHIpICUgMTYgfCAwOwogICAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL1VzZSBtaWNyb3NlY29uZHMgc2luY2UgcGFnZS1sb2FkIGlmIHN1cHBvcnRlZAogICAgICAgICAgciA9IChkMiArIHIpICUgMTYgfCAwOwogICAgICAgICAgZDIgPSBNYXRoLmZsb29yKGQyIC8gMTYpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIChjID09PSAieCIgPyByIDogKHIgJiAweDMpIHwgMHg4KS50b1N0cmluZygxNik7CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXR2YWx1ZShpbmRleCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLmRpc2FibGVkID0gIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dCIgKyBpbmRleCkuZGlzYWJsZWQ7CiAgICB9LAogICAgZ2V0RmlsZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgbGV0IGZpbGVuYW1lID0gIiI7CiAgICAgIGxldCBmaWxlZGF0YSA9ICIiOwogICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IGZpbGUubmFtZTsKICAgICAgLy8gY29uc29sZS5sb2coZmlsZSk7CiAgICAgIGlmIChmaWxlLnR5cGUgIT0gInRleHQvY3N2IikgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGV4dDogIk9ubHkgQ1NWIGZpbGVzIGNhbiBiZSB1cGxvYWRlZC4iLAogICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB9CiAgICB9LAogICAgYWRkbWV0cmljdmFsdWUoKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMubWV0cmljcy5wdXNoKHsKICAgICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgICBvcGVyYXRpb246ICJTVU0iLAogICAgICAgICAgY29sdW1uOiBudWxsLAogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVoZWFkZXIodmFsdWVpbmRleCkgewogICAgICB0aGlzLm1ldHJpY3Muc3BsaWNlKHZhbHVlaW5kZXgsIDEpOwogICAgfSwKICAgIGVkaXRjb2x1bW5zKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdmFsaWRhdGlvbl9zdWNjZXNzID0gdHJ1ZTsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmKHRoaXMuY29sdW1uc1tpXS5uZXduYW1lID09PSAnJyB8fCB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyl7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdSBjYW5ub3Qgc2V0IGNvbHVtbiBuYW1lcyBFbXB0eSIpOwogICAgICAgICAgdmFsaWRhdGlvbl9zdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYodmFsaWRhdGlvbl9zdWNjZXNzKXsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIEVkaXQgdGhlIENvbHVtbnM/IiwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnMpCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscyk7CiAgICAgICAgICAgIC8vIHRoaXMubmV3Y29sdW1ucyA9IHRoaXMuY29sdW1ucwogICAgICAgICAgICB2YXIgbmV3Y29sdW1uc2RhdGEgPSBbXTsKICAgICAgICAgICAgaWYoIXRoaXMuaXNfZGF0YXNldF9lZGl0YWJsZSl7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnNbaV0pCiAgICAgICAgICAgICAgICAgICAgbmV3Y29sdW1uc2RhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jb2x1bW5zW2ldLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgbmV3bmFtZTogdGhpcy5jb2x1bW5zW2ldLm5ld25hbWUsCiAgICAgICAgICAgICAgICAgICAgZGF0YV90eXBlIDogdGhpcy5jb2x1bW5zW2ldLmRhdGFfdHlwZSwKICAgICAgICAgICAgICAgICAgICBjb2x1bW5fdHlwZTogIk1ldHJpYyIsCiAgICAgICAgICAgICAgICAgICAgYWRkaXRpdmU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uOiAiTm9uZSIsCiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOmZhbHNlLAogICAgICAgICAgICAgICAgICAgIG5scF9zZWFyY2hfZW5hYmxlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc3lub255bXM6ICIiLAogICAgICAgICAgICAgICAgICAgIGluZGV4X3R5cGU6ICJERUZBVUxUIiwKICAgICAgICAgICAgICAgICAgICBlbnRpdHlfY2F0ZWdvcnk6ICJQRVJTT04iLAogICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Zvcm1hdDogIk5vbmUiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKGxldCBba2V5LHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmNvbHVtbl9kZXRhaWxzKSl7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhrZXksIHZhbHVlKQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uc1tpXS5uYW1lID09PSBrZXkpewogICAgICAgICAgICAgICAgICBuZXdjb2x1bW5zZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmFtZSwKICAgICAgICAgICAgICAgICAgICBuZXduYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSwKICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGUgOiB0aGlzLmNvbHVtbnNbaV0uZGF0YV90eXBlLAogICAgICAgICAgICAgICAgICAgIGNvbHVtbl90eXBlOiB2YWx1ZS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAgICAgICBhZGRpdGl2ZTogdmFsdWUuYWRkaXRpdmUsCiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb246IHZhbHVlLmFnZ3JlZ2F0aW9uLAogICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdmFsdWUuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgIG5scF9zZWFyY2hfZW5hYmxlZDogdmFsdWUubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAgICAgICAgIHN5bm9ueW1zOiB2YWx1ZS5zeW5vbnltcywKICAgICAgICAgICAgICAgICAgICBpbmRleF90eXBlOiB2YWx1ZS5pbmRleF90eXBlLAogICAgICAgICAgICAgICAgICAgIGVudGl0eV9jYXRlZ29yeTogdmFsdWUuZW50aXR5X2NhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Zvcm1hdDogdmFsdWUuY3VycmVuY3lfZm9ybWF0IAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAvLyAgIG5ld2NvbHVtbnNkYXRhLnB1c2goewogICAgICAgICAgICAgICAgLy8gICAgIG5hbWU6IHRoaXMuY29sdW1uc1tpXS5uYW1lLAogICAgICAgICAgICAgICAgLy8gICAgIG5ld25hbWU6IHRoaXMuY29sdW1uc1tpXS5uZXduYW1lLAogICAgICAgICAgICAgICAgLy8gICAgIGRhdGFfdHlwZSA6IHRoaXMuY29sdW1uc1tpXS5kYXRhX3R5cGUsCiAgICAgICAgICAgICAgICAvLyAgICAgY29sdW1uX3R5cGU6IHRoaXMuY29sdW1uc1tpXS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAgIC8vICAgICBhZGRpdGl2ZTogdGhpcy5jb2x1bW5zW2ldLmFkZGl0aXZlLAogICAgICAgICAgICAgICAgLy8gICAgIGFnZ3JlZ2F0aW9uOiB0aGlzLmNvbHVtbnNbaV0uYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgICAvLyAgICAgaGlkZGVuOiB0aGlzLmNvbHVtbnNbaV0uaGlkZGVuLAogICAgICAgICAgICAgICAgLy8gICAgIG5scF9zZWFyY2hfZW5hYmxlZDogdGhpcy5jb2x1bW5zW2ldLm5scF9zZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgICAgIC8vICAgICBzeW5vbnltczogdGhpcy5jb2x1bW5zW2ldLnN5bm9ueW1zLAogICAgICAgICAgICAgICAgLy8gICAgIGluZGV4X3R5cGU6IHRoaXMuY29sdW1uc1tpXS5pbmRleF90eXBlLAogICAgICAgICAgICAgICAgLy8gICAgIGVudGl0eV9jYXRlZ29yeTogdGhpcy5jb2x1bW5zW2ldLmVudGl0eV9jYXRlZ29yeSwKICAgICAgICAgICAgICAgIC8vICAgICBjdXJyZW5jeV9mb3JtYXQ6IHRoaXMuY29sdW1uc1tpXS5jdXJyZW5jeV9mb3JtYXQgCiAgICAgICAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2NvbHVtbnNkYXRhKTsKICAgICAgICAgICAgdmFyIG9iamVjdCA9IG5ld2NvbHVtbnNkYXRhLnJlZHVjZSgKICAgICAgICAgICAgICAgIChvYmosIGl0ZW0pID0+IE9iamVjdC5hc3NpZ24ob2JqLCB7IFtpdGVtLm5hbWVdOiBpdGVtLm5ld25hbWUgfSksCiAgICAgICAgICAgICAgICB7fQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmplY3QpOwogICAgICAgICAgICB0aGlzLm5ld2NvbHVtbnMgPSBvYmplY3Q7CiAgICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlID0gbmV3Y29sdW1uc2RhdGE7CiAgICAgICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRtZXRyaWNzKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdmFsaWRhdGlvbl9zdWNjZXNzID0gdHJ1ZSwKICAgICAgbWV0cmljc19uYW1lX2xpc3QgPSBbXQogICAgICAvLyBjb25zb2xlLmxvZyhtZXRyaWNzX25hbWVfbGlzdCkKICAgICAgLy8gZm9yKGxldCBpID0gMDtpIDwgdGhpcy5tZXRyaWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgaWYoKHRoaXMubWV0cmljc1tpXS5uYW1lID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0ubmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyApIHx8ICh0aGlzLm1ldHJpY3NbaV0uY29sdW1uID09PSBudWxsKSB8fCAodGhpcy5tZXRyaWNzW2ldLm9wZXJhdGlvbiA9PT0gbnVsbCkpewogICAgICAvLyAgIG1ldHJpY3NfbmFtZV9saXN0LnB1c2godGhpcy5tZXRyaWNzW2ldLm5hbWUpCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIGZvcihsZXQgaSA9IDA7aSA8IHRoaXMubWV0cmljcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWV0cmljc1tpXSk7CiAgICAgICAgaWYoKHRoaXMubWV0cmljc1tpXS5uYW1lID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0ubmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyApIHx8ICh0aGlzLm1ldHJpY3NbaV0uY29sdW1uID09PSBudWxsKSB8fCAodGhpcy5tZXRyaWNzW2ldLm9wZXJhdGlvbiA9PT0gbnVsbCkpewogICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgRmlsbCBpbiBhbGwgdGhlIHZhbHVlcyBmb3IgdGhlIG1ldHJpY3MiKTsKICAgICAgICAgIHZhbGlkYXRpb25fc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgLy8gYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8vIGVsc2V7CiAgICAgICAgLy8gICBtZXRyaWNzX25hbWVfbGlzdC5wdXNoKHRoaXMubWV0cmljc1tpXS5uYW1lKTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY29uc29sZS5sb2cobWV0cmljc19uYW1lX2xpc3QpCiAgICAgICAgLy8gaWYobWV0cmljc19uYW1lX2xpc3QubGVuZ3RoID4gMSAmJiB2YWxpZGF0aW9uX3N1Y2Nlc3MgPT09IHRydWUgJiYgbWV0cmljc19uYW1lX2xpc3QuaW5jbHVkZXModGhpcy5tZXRyaWNzW2ldLm5hbWUpKXsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGkpOwogICAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJUd28gbWV0cmljIG5hbWVzIGNhbm5vdCBiZSBzYW1lIik7CiAgICAgICAgLy8gICB2YWxpZGF0aW9uX3N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAvLyAgIC8vIGJyZWFrOwogICAgICAgIC8vIH0KICAgICAgfQogICAgICBpZih2YWxpZGF0aW9uX3N1Y2Nlc3MpewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICAgIHRleHQ6ICIgWW91IHdhbnQgdG8gYWRkIHRoZXNlIG1ldHJpY3M/IiwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5tZXRyaWNzZGF0YSA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWV0cmljcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5tZXRyaWNzZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubWV0cmljc1tpXS5uYW1lLAogICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLm1ldHJpY3NbaV0uY29sdW1uLAogICAgICAgICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLm1ldHJpY3NbaV0ub3BlcmF0aW9uLAogICAgICAgICAgICAgICAgLy8gb246IFt0aGlzLm1ldHJpY3NbaV0uY29sdW1uMSwgdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjJdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmlzbWV0cmljc3NhdmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1ldHJpY3NkYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGZpbmFsc2F2ZSgpIHsKICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIsCiAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UKICAgICAgfSkudGhlbihyZXN1bHQgPT4gewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGlmKCF0aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUpewogICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJpX3Byb2Nlc3NfZGF0YSgpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBvYmplY3RfbmFtZTogdGhpcy5vYmplY3RfbmFtZSwKICAgICAgICAgIGNvbHVtbl9yZW5hbWVfbWFwcGluZzogdGhpcy5uZXdjb2x1bW5zLAogICAgICAgICAgZGF0YXNldF9uYW1lOiB0aGlzLmRhdGFzZXRfbmFtZSwKICAgICAgICAgIG1ldHJpY3M6IHRoaXMubWV0cmljc2RhdGEsCiAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsczogdGhpcy5jb2x1bW5fZGV0YWlscywKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJEYXRhIFByb2Nlc3NlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgdGltZXI6MjAwMCwKCiAgICAgICAgICAgICAgfSkudGhlbihyZXN1bHRfc3VjY2VzcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXN1bHRfc3VjY2Vzcy52YWx1ZSl7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC8vIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgIC8vIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CiAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHRoaXMuY29sdW1uX2RldGFpbHM7CiAgICAgICAgICAvLyB2YXIgY29sdW1uX3JlbmFtZV9tYXAgPSB0aGlzLm5ld2NvbHVtbnM7CiAgICAgICAgICAvLyB2YXIgbWV0cmljcyA9IHRoaXMubWV0cmljc2RhdGEKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1uX2RldGFpbHMpCiAgICAgICAgICB2YXIgd29ya3NoZWV0X2RldGFpbHMgPSB7fTsKICAgICAgICAgIHdvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9kZXRhaWxzID0gdGhpcy5jb2x1bW5fZGV0YWlsczsKICAgICAgICAgIHdvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9yZW5hbWVfbWFwID0gdGhpcy5uZXdjb2x1bW5zOwogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHMubWV0cmljcyA9IHRoaXMubWV0cmljc2RhdGE7CiAgICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJpX2RhdGFfc2hlZXRfZGV0YWlscygpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBkYXRhc2V0X25hbWU6IHRoaXMuZGF0YXNldF9uYW1lLAogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHM6IHdvcmtzaGVldF9kZXRhaWxzLAogICAgICAgICAgb2xkX3dvcmtzaGVldF9kZXRhaWxzOiB0aGlzLm9sZF93b3Jrc2hlZXRfZGV0YWlscwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICJXT1JLU0hFRVQgREVUQUlMUyBVUERBVEVEIil7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJEYXRhIFVwZGF0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlCiAgICAgICAgICAgICAgfSkudGhlbihyZXN1bHRfc3VjY2VzcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXN1bHRfc3VjY2Vzcy52YWx1ZSl7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjoyNTAwLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiEiLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBsb2FkZmlsZSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhc2V0X25hbWUpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpbGUpOwogICAgICBsZXQgZmlsZW5hbWUgPSAiIjsKICAgICAgbGV0IGZpbGVkYXRhID0gIiI7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIGZpbGVuYW1lID0gdGhpcy5maWxlLm5hbWU7CiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZSk7CiAgICAgIHJlYWRlci5vbmxvYWRzdGFydCA9ICgpID0+IHsKICAgICAgICAgIC8vIHRoaXMuJHJvb3QuJGVtaXQoJ3Nob3dfbG9hZGVyJywgdHJ1ZSk7CiAgICAgIH07CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAvLyB0aGlzLiRyb290LiRlbWl0KCdzaG93X2xvYWRlcicsIHRydWUpOwogICAgICAgICAgZmlsZWRhdGEgPSByZWFkZXIucmVzdWx0LnNwbGl0KCJiYXNlNjQsIilbMV07CiAgICAgIH07CiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7CiAgICAgICAgICB2YXIgeCA9IGZpbGVkYXRhLnNwbGl0KCJiYXNlNjQsIilbMV07CiAgICAgICAgICB2YXIgdGVtcF91dWlkID0gIiI7CiAgICAgICAgICB0ZW1wX3V1aWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpOwogICAgICAgICAgdmFyIHVzZXJfZGV0YWlscyA9IHsKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGlkZW1wb3RlbmN5X2tleTogdGVtcF91dWlkLAogICAgICAgICAgZGF0YXNldF9uYW1lOiB0aGlzLmRhdGFzZXRfbmFtZQogICAgICAgICAgfTsKICAgICAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkodXNlcl9kZXRhaWxzKTsKICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2pzb25dLCB7CiAgICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgIGZkLmFwcGVuZCgiZmlsZSIsIHRoaXMuZmlsZSwgZmlsZW5hbWUpOwogICAgICAgICAgZmQuYXBwZW5kKCJqc29uIiwgYmxvYik7CiAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmZCk7CiAgICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoYXBpX2NhbGxzLmJpX3VwbG9hZF9maWxlKCksIGZkKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICAgIGkgPCByZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5jb2x1bW5zLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgaSsrCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uc1tpXSwKICAgICAgICAgICAgICAgICAgbmV3bmFtZTogcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uc1tpXSwKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPSAwOyBrPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBrICsrKXsKICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5kYXRhX3R5cGVzKSkgewogICAgICAgICAgICAgICAgICAgICAgaWYoa2V5ID09IHRoaXMuY29sdW1uc1trXS5uYW1lKXsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1trXS5kYXRhX3R5cGUgPSAgdmFsdWUKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnMpOwogICAgICAgICAgICAgIC8vICAgdGhpcy5jb2x1bW5zID0gcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uczsKICAgICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy5vYmplY3RfbmFtZSA9IHJlc3BvbnNlLmRhdGEuZmlsZV9kZXRhaWxzLm9iamVjdF9uYW1lOwogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRmlsZSBVcGxvYWRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOjIwMDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyAhPSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgLy8gJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIC8vIH0sIDEwMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyLCJ3RWVlZWUiKTsKICAgICAgICAgIH0pOwogICAgICB9OwogICAgfSwKICAgIHNhdmVfY29sdW1uX2RhdGEoKXsgCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlKTsKICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZS5sZW5ndGg7IGkrKyl7CiAgICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMpCiAgICAgIC8vICAgaWYodGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMgIT0gIiIgfHwgdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMuc3BsaXQoJyAnKS5qb2luKCcnKSAhPSAiIiB8fHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2ldLnN5bm9ueW1zICE9IHVuZGVmaW5lZCApewogICAgICAvLyAgICAgY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMpCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBhZGQgdGhlc2Ugd29ya3NoZWV0IGRldGFpbHM/IiwKICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIgogICAgICB9KQogICAgICAudGhlbihyZXN1bHQgPT4gewogICAgICAgIGlmKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgdmFyIGFycmF5ID0ge307IAogICAgICAgICAgdmFyIHdvcmtzaGVldF9kZXRhaWxzID0ge307CiAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUubGVuZ3RoOyBpKyspewogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpXTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXApOwogICAgICAgICAgKCh0ZW1wLmFnZ3JlZ2F0aW9uID09PSAiTm9uZSIpPyB0ZW1wLmFnZ3JlZ2F0aW9uID0gbnVsbCA6IHRlbXAuYWdncmVnYXRpb24gPSB0ZW1wLmFnZ3JlZ2F0aW9uKQogICAgICAgICAgaWYgKHRlbXAuc3lub255bXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB0ZW1wLnN5bm9ueW1zID0gdGVtcC5zeW5vbnltcy5yZXBsYWNlKC8sL2csICc+PicpOwogICAgICAgICAgfQogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHNbdGVtcC5uZXduYW1lXSA9IHsKICAgICAgICAgICAgICAiZGF0YXR5cGUiOiBgJHt0ZW1wLmRhdGFfdHlwZX1gLAogICAgICAgICAgICAgICJjb2x1bW5fdHlwZSI6IGAke3RlbXAuY29sdW1uX3R5cGV9YCwKICAgICAgICAgICAgICAiYWRkaXRpdmUiOiB0ZW1wLmFkZGl0aXZlLAogICAgICAgICAgICAgICJhZ2dyZWdhdGlvbiI6IHRlbXAuYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgImhpZGRlbiIgOiB0ZW1wLmhpZGRlbiwKICAgICAgICAgICAgICAibmxwX3NlYXJjaF9lbmFibGVkIjogdGVtcC5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgImluZGV4X3R5cGUiOiBgJHt0ZW1wLmluZGV4X3R5cGV9YCwKICAgICAgICAgICAgICAic3lub255bXMiOiBgJHt0ZW1wLnN5bm9ueW1zfWAsCiAgICAgICAgICAgICAgImVudGl0eV9jYXRlZ29yeSI6YCR7dGVtcC5lbnRpdHlfY2F0ZWdvcnl9YCwKICAgICAgICAgICAgICAiY3VycmVuY3lfZm9ybWF0Ijp0ZW1wLmN1cnJlbmN5X2Zvcm1hdAogICAgICAgICAgICB9CiAgICAgICAgICBpZiAodGVtcC5zeW5vbnltcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLz4+IC9nLCAnLCcpOwogICAgICAgICAgfQogICAgICAgICAgKCh0ZW1wLmFnZ3JlZ2F0aW9uID09PSBudWxsKT8gdGVtcC5hZ2dyZWdhdGlvbiA9ICJOb25lIiA6IHRlbXAuYWdncmVnYXRpb24gPSB0ZW1wLmFnZ3JlZ2F0aW9uKQogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwogICAgICAgICAgdGhpcy5jb2x1bW5fZGV0YWlscyA9IE9iamVjdC5hc3NpZ24od29ya3NoZWV0X2RldGFpbHMpOwogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwogICAgfSwKICAgIGdldF9kYXRhc2V0X2xpc3QoKXsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcwogICAgICAuZ2V0KGFwaV9jYWxscy5iaV9kYXRhX3NoZWV0X2RldGFpbHMoKSwgewogICAgICAgIHBhcmFtcyA6IHsKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIC8vIGRhdGFzZXRfbmFtZTogIkZydWl0aHV0IHYxIiwKICAgICAgICAvLyBkYXRhc2V0X25hbWU6ICJEcnVnIFRyaWFsIERhdGEiLAogICAgICAgIH0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICB0aGlzLmRhdGFzZXRzID0gcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXM7CiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8cmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXMubGVuZ3RoOyBpKyspewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbaV0ub2xkX3dvcmtzaGVldF9kZXRhaWxzID0gcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbaV0ud29ya3NoZWV0X2RldGFpbHM7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluIik7CiAgICAgIH0pCiAgICB9LAogICAgZm9ybWF0X2RhdGUoZGF0ZSl7CiAgICAgIC8vIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJZWVlZIE1NTU0gREQiKQogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiZGRkZCwgTU1NTSBEbyBZWVlZIikKICAgIH0sCiAgICBvcGVuX2N1cnJlbmN5X2Zvcm1hdF9tb2RhbChpbmRleCl7CiAgICAgIGlmKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2luZGV4XS5jdXJyZW5jeV9mb3JtYXQgPT09IG51bGwpewogICAgICAgIHRoaXMuY3VycmVuY3lfZm9ybWF0X21vZGFsID0gIk5vbmUiOwogICAgICAgIHRoaXMuY3VycmVudF9jb2x1bW5faW5kZXggPSBpbmRleDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gaW5kZXg7CiAgICAgICAgdGhpcy5jdXJyZW5jeV9mb3JtYXRfbW9kYWwgPSAiU3BlY2lmaWMiOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2luZGV4XS5jdXJyZW5jeV9mb3JtYXQ7CiAgICAgIH0KICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgic2hvdyIpCiAgICB9LAogICAgY2hhbmdlX2N1cnJlbmN5X2Zvcm1hdChvcGVyYXRpb24pewogICAgICBpZiggb3BlcmF0aW9uID09PSAnY2xvc2UnKSB7CiAgICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgIH0gCiAgICAgIGlmKG9wZXJhdGlvbiA9PT0gJ3NhdmUnKXsKICAgICAgICBpZih0aGlzLmN1cnJlbmN5X2Zvcm1hdF9tb2RhbCA9PT0gIk5vbmUiKXsKICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW3RoaXMuY3VycmVudF9jb2x1bW5faW5kZXhdLmN1cnJlbmN5X2Zvcm1hdCA9IG51bGw7CiAgICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gbnVsbDsKICAgICAgICAgICQoIiNjdXJyZW5jeUZvcm1hdE1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgaWYodGhpcy5jb3VudHJ5X2lzb19jb2RlID09PSBudWxsKXsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgU2VsZWN0IGFuIElTTyBDb2RlIikKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW3RoaXMuY3VycmVudF9jb2x1bW5faW5kZXhdLmN1cnJlbmN5X2Zvcm1hdCA9IHRoaXMuY291bnRyeV9pc29fY29kZTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50X2NvbHVtbl9pbmRleCA9IG51bGw7CiAgICAgICAgICAgICQoIiNjdXJyZW5jeUZvcm1hdE1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgdGhpcy5jb3VudHJ5X2lzb19jb2RlID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9CiAgICB9LAogICAgb3Blbl9zZXR0aW5nc19mb3JfZGF0YWJhc2VfZGF0YXNldChpbmRleCl7CiAgICAgIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzID0gdHJ1ZTsKICAgIH0sCiAgICBvcGVuX2RhdGFiYXNlX2RhdGFzZXRfbW9kYWwoZGF0YWJhc2UpewogICAgICB0aGlzLnNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzID0gZmFsc2U7CiAgICAgIGlmKGRhdGFiYXNlID09PSAncG9zdGdyZXMnKXsKICAgICAgICB0aGlzLmN1cnJlbnRfZGF0YXNldF9kYXRhYmFzZV9pY29uID0gdGhpcy5wb3N0Z3Jlc19pY29uX3BhdGgKICAgICAgfQogICAgICBpZihkYXRhYmFzZSA9PT0gJ215c3FsJyl7CiAgICAgICAgdGhpcy5jdXJyZW50X2RhdGFzZXRfZGF0YWJhc2VfaWNvbiA9IHRoaXMubXlzcWxfaWNvbl9wYXRoCiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YWJhc2VfZGF0YXNldF9pZCA9IHRoaXMuZ2VuZXJhdGVVVUlEKCkKICAgICAgdGhpcy5zaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3NfZGV0YWlscyA9IHRydWU7CiAgICB9LAogICAgYWRkX2RhdGFzZXRfZGV0YWlscygpewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBzd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdGV4dDogJ1lvdSB3YW50IHRvIGludGVncmF0ZSB3aXRoIHRoaXMgRGF0YWJhc2U/JywKICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiLAogICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICB9KQogICAgICAudGhlbihyZXN1bHQgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmJpX2RiX2ludGVncmF0aW9uKCksewogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgcmRibXNfbmFtZTogJ3Bvc3RncmVzcWwnLAogICAgICAgICAgICBkYXRhc2V0X2lkOiB0aGlzLmRhdGFiYXNlX2RhdGFzZXRfaWQsCiAgICAgICAgICAgIGRhdGFzZXRfbmFtZTogdGhpcy5kYXRhYmFzZV9kYXRhc2V0X25hbWUsCiAgICAgICAgICAgIHNjaGVtYV9uYW1lOiB0aGlzLmRhdGFiYXNlX3NjaGVtYV9uYW1lLAogICAgICAgICAgICBqZGJjX2Nvbm5lY3Rpb25fc3RyaW5nOiB0aGlzLmRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmcsCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmRhdGFiYXNlX3VzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZDogdGhpcy5kYXRhYmFzZV9wYXNzd29yZAogICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PnsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gJ0RCIElOVEVHUkFUSU9OIERFVEFJTFMgU0FWRUQnKXsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiREIgSW50ZWdyYXRpb24gU3VjY2Vzc2Z1bCIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0X3N1Y2Nlc3MgPT4gewogICAgICAgICAgICAgICAgaWYocmVzdWx0X3N1Y2Nlc3MudmFsdWUpewogICAgICAgICAgICAgICAgICB0aGlzLmdldF9kYXRhc2V0X2xpc3QoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3MgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6MjUwMCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgLy8gdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLiBQbGVhc2UgVHJ5IEFnYWluIikKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOjI1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzaG93X2RhdGFzZXRfc2V0dGluZ3MobmV3VmFsLCBvbGRWYWwpewogICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coJ2tqaGd2ZmNkeGQnKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTsKICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTsKICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IGZhbHNlOwogICAgICAgIHRoaXMubmV3Y29sdW1ucyA9IFtdOwogICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLm9iamVjdF9uYW1lID0gIiI7CiAgICAgICAgdGhpcy5tZXRyaWNzZGF0YSA9IFtdOwogICAgICAgIHRoaXMuaXNtZXRyaWNzc2F2ZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmRhdGFzZXRfbmFtZSA9ICIiOwogICAgICAgIHRoaXMuZmlsZSA9IG51bGw7CiAgICAgICAgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUgPSBbXTsKICAgICAgICB0aGlzLmNvbHVtbl9kZXRhaWxzID0ge307CiAgICAgICAgdGhpcy5pc19kYXRhc2V0X2VkaXRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjdXJyZW5jeV9mb3JtYXRfbW9kYWwobmV3VmFsLCBvbGRWYWwpewogICAgICBpZihuZXdWYWwgPT09ICJOb25lIikgewogICAgICAgIHRoaXMuaXNfY291bnRyeV9jb2Rlc19kcm9wZG93bl9kaXNhYmxlZCA9IHRydWUKICAgICAgICB0aGlzLmNvdW50cnlfaXNvX2NvZGUgPSBudWxsCiAgICAgIH0KICAgICAgaWYobmV3VmFsID09PSAiU3BlY2lmaWMiKSB7CiAgICAgICAgdGhpcy5pc19jb3VudHJ5X2NvZGVzX2Ryb3Bkb3duX2Rpc2FibGVkID0gZmFsc2UKICAgICAgfQogICAgfSwKICAgIGRhdGFiYXNlX2RhdGFzZXRfY29ubmVjdGlvbl90eXBlKG5ld1ZhbCwgb2xkVmFsKXsKICAgICAgaWYgKG5ld1ZhbCA9PT0gJ0pEQkMnKXsKICAgICAgICB0aGlzLmRhdGFiYXNlX2hvc3QgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfcG9ydCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9kYl9uYW1lID0gbnVsbDsKICAgICAgfQogICAgICBpZiAobmV3VmFsID09PSAnaG9zdF9wb3J0Jyl7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9qZGJjX2Nvbm5lY3Rpb25fc3RyaW5nID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzKG5ld1ZhbCwgb2xkVmFsKXsKICAgICAgaWYgKG5ld1ZhbCA9PT0gZmFsc2UpewogICAgICAgIHRoaXMuZGF0YWJhc2VfZGF0YXNldF9uYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3NjaGVtYV9uYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3VzZXJuYW1lID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3Bhc3N3b3JkID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmcgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfaG9zdCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9wb3J0ID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX2RiX25hbWUgPSBudWxsOwogICAgICB9CgogICAgfQogIH0sCn0K"},null]}