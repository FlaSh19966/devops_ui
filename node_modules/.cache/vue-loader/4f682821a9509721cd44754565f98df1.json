{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Unsubscribe.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Unsubscribe.vue","mtime":1655807120969},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1bnN1YnNjcmliZTogZmFsc2UsCiAgICAgIGVtYWlsOiBOYU4sCiAgICAgIHRva2VuX2lkOiBOYU4sCiAgICAgIGNvbXBhbnlfaWQ6IE5hTiwKICAgICAgdW5zdWJzY3JpYmVfZmFpbDogZmFsc2UsCiAgICAgIGNvbXBhbnlfbG9nb191cmwgOiAnJwogICAgfTsKICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5lbWFpbCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmVtYWlsOwogICAgdGhpcy50b2tlbl9pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuOwogICAgdGhpcy5jb21wYW55X2lkID0gdGhpcy4kcm91dGUucXVlcnkuY19pZDsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNvbXBhbnlfbG9nbygpOwogIH0sCiAgbWV0aG9kczogewogICAgdW5zdWJzY3JpYmVfcGxhbigpIHsKICAgICAgYXhpb3MKICAgICAgICAucG9zdChhcGlfY2FsbHMudW5zdWJzY3JpYmVfcHJvbW90aW9uYWxfZW1haWwoKSwgewogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbl9pZCwKICAgICAgICAgIHVuc3Vic2NyaWJlOiB0cnVlCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PT0gIlN1Y2Nlc3NmdWxseSB1bnN1YnNjcmliZWQiKSB7CiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09PSAiVXNlciBEb2Vzbid0IEV4aXN0IikgewogICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlX2ZhaWwgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgdG9hc3RyLmVycm9yKGUubWVzc2FnZSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgIGNvbXBhbnlfbG9nbygpIHsKICAgICAgYXhpb3MKICAgICAgICAucG9zdChhcGlfY2FsbHMudW5zdWJzY3JpYmVfcHJvbW90aW9uYWxfZW1haWwoKSwgewogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBnZXRfY29tcGFueV9sb2dvOiB0cnVlLAogICAgICAgICAgdG9rZW46IHRoaXMudG9rZW5faWQKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnVybCAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLmNvbXBhbnlfbG9nb191cmwgPSByZXNwb25zZS5kYXRhLnVybDsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb21wYW55X2xvZ29fdXJsKTsKICAgICAgICAgIH0gICAKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIHRvYXN0ci5lcnJvcihlLm1lc3NhZ2UpOwogICAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Unsubscribe.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Unsubscribe.vue","sourceRoot":"src/portal/Chatbot/Dashboard","sourcesContent":["<template>\n  <div class=\"max-resolution d-flex\" style=\" min-height:80vh\">\n    <div class=\"col-sm-12 my-auto\">\n      <div class=\"col-sm-7 mx-auto book-demo-border-box py-3\">\n        <div>\n          <div\n            style=\"background-color: #F3F5F8;        border: 1px solid #2222222b;        border-radius: 5px;      \"\n          >\n            <div style=\"text-align: center; padding: 10px 0px 0px 0px;\">\n              <div class=\"text-center pb-1\">\n                <img style=\"min-width: 13vh; max-height:13vh\"  :src=\"company_logo_url\" alt=\"\" />\n              </div>\n            </div>\n            <div\n              style=\"background-color: #FFFFFF; max-width: 605px; margin: 0 auto; padding: 45px 47px\"\n            >\n               <div>\n                <div class=\"col-sm-12 mx-auto my-2 text-center mt-4\" v-show=\"!unsubscribe && !unsubscribe_fail\">\n                    <p style=\"text-align: center;font: normal normal 600 21px/31px Poppins, arial;letter-spacing: 0px;\n                            ;margin: 0;padding-top: 8px;\" >\n                        {{tlt('unsubscribe_alert_msg')}}\n                    </p>\n                    <p style=\"text-align: center;font: normal normal 590 21px/31px Poppins, arial;letter-spacing: 0px;\n                              ;margin: 11px;padding-top: 8px;\" >\n                        {{tlt('stop_promotional_email_msg')}}\n                    </p>\n                    <button @click=\"unsubscribe_plan\" class=\"mt-3 text-center darkblue-btn col-sm-3\">\n                      {{tlt('unsubscribe_btn')}}\n                    </button>\n                </div>\n                <div class=\"col-sm-12 mx-auto my-2 text-center mt-4\" v-show=\"unsubscribe && !unsubscribe_fail\">\n                    <p style=\"text-align: center;font: normal normal 600 21px/31px Poppins, arial;letter-spacing: 0px;\n                            ;margin: 0;padding-top: 8px;\" >\n                        {{tlt('thank_you_msg')}}                \n                    </p>\n                    <p style=\"text-align: center;font: normal normal 590 21px/31px Poppins, arial;letter-spacing: 0px;\n                              ;margin: 11px;padding-top: 8px;\" >\n                        {{tlt('would_not_receive_emails')}}\n                    </p>\n                 </div>\n                 <div class=\"col-sm-12 mx-auto my-2 text-center mt-4\" v-show=\"unsubscribe_fail && !unsubscribe\">\n                    <p style=\"text-align: center;font: normal normal 600 21px/31px Poppins, arial;letter-spacing: 0px;\n                            ;margin: 0;padding-top: 8px;\" >\n                       {{tlt('something_went_wrong_msg')}}              \n                    </p>\n                    <p style=\"text-align: center;font: normal normal 590 21px/31px Poppins, arial;letter-spacing: 0px;\n                              ;margin: 11px;padding-top: 8px;\" >\n                        {{tlt('try_again_msg')}}\n                    </p>\n                 </div>\n              </div>\n              <div\n                style=\"text-align: left;  font: normal normal normal 14px/24px Roboto, arial; letter-spacing: 0px; color: #3A3A3A;\"\n              >      \n                <br />\n                <br />\n              </div>\n            </div>\n            <div style=\"text-align: center;padding: 29px 0px 24px;\">\n              \n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport api_calls from \"@/portal/api_calls\";\nexport default {\n  data() {\n    return {\n      unsubscribe: false,\n      email: NaN,\n      token_id: NaN,\n      company_id: NaN,\n      unsubscribe_fail: false,\n      company_logo_url : ''\n    };\n  },\n  beforeMount() {\n    this.email = this.$route.query.email;\n    this.token_id = this.$route.query.token;\n    this.company_id = this.$route.query.c_id;\n  },\n  mounted() {\n    this.company_logo();\n  },\n  methods: {\n    unsubscribe_plan() {\n      axios\n        .post(api_calls.unsubscribe_promotional_email(), {\n          company_id: this.company_id,\n          email: this.email,\n          token: this.token_id,\n          unsubscribe: true\n        })\n        .then(response => {\n          if (response.data === \"Successfully unsubscribed\") {\n            this.unsubscribe = true;\n          } else if (response.data === \"User Doesn't Exist\") {\n            this.unsubscribe_fail = true;\n          }\n        })\n        .catch(e => {\n          toastr.error(e.message);\n        });\n    },\n     company_logo() {\n      axios\n        .post(api_calls.unsubscribe_promotional_email(), {\n          company_id: this.company_id,\n          email: this.email,\n          get_company_logo: true,\n          token: this.token_id\n        })\n        .then(response => {\n          console.log(response);\n          if (response.data.url !== null) {\n            this.company_logo_url = response.data.url;\n            console.log(this.company_logo_url);\n          }   \n        })\n        .catch(e => {\n          toastr.error(e.message);\n        });\n    }\n  }\n};\n</script>\n"]}]}