{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2e9509fa\"],{\"14f1\":function(t,e,s){\"use strict\";var a=s(\"54a1\"),n=s.n(a);n.a},3201:function(t,e,s){},\"54a1\":function(t,e,s){},d95c:function(t,e,s){t.exports=s.p+\"img/cense_logo.23e11092.png\"},e8c6:function(t,e,s){\"use strict\";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.spinnerOn,expression:\"spinnerOn\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),s(\"div\",{staticClass:\"card dash-card\"},[t.show_subscription?t._e():s(\"div\",[s(\"div\",{staticClass:\"card-header flex-wrap justify-content-between\"},[s(\"h4\",{staticClass:\"mb-0\"},[t._v(t._s(t.tlt(\"subscribe_plan_header\")))]),\"Free\"===t.stripe_subscription_plans_details.subscription_type?s(\"p\",[t._v(\" \"+t._s(t.tlt(\"subscribe_plan_help_text\"))+\" \")]):t._e()]),t.retail_shopify_company?s(\"div\",{staticStyle:{\"padding-left\":\"25px\"}},[s(\"div\",{staticClass:\"row mb-2\"},[s(\"div\",{staticClass:\"col-sm-4\"},[s(\"span\",[t._v(\" \"+t._s(t.tlt(\"select_plan_label\"))+\" \")]),s(\"multiselect\",{attrs:{\"track-by\":\"name\",label:\"label\",options:t.retail_shopify_subscription_plans_custom_currency,searchable:!1,\"allow-empty\":!1,placeholder:t.tlt(\"select_plan\"),\"show-labels\":!1},on:{input:t.check_retail_plan},model:{value:t.retail_plan_current,callback:function(e){t.retail_plan_current=e},expression:\"retail_plan_current\"}}),s(\"span\")],1),s(\"div\",{staticClass:\"col-sm-4\"},[s(\"span\",[t._v(\" \"+t._s(t.tlt(\"select_billing_cycle_label\"))+\" \")]),s(\"multiselect\",{attrs:{options:t.retail_payment_types,searchable:!1,\"allow-empty\":!1,\"show-labels\":!1,disabled:t.check_retail_payment_type_disabled,placeholder:t.retail_payment_placeholder},model:{value:t.retail_payment_type,callback:function(e){t.retail_payment_type=e},expression:\"retail_payment_type\"}})],1)]),s(\"div\",{staticClass:\"row mb-2\"},[s(\"div\",{staticClass:\"col-sm-12\",staticStyle:{margin:\"4px 0px\"}},[s(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){return t.subscribe_retail_plan()}}},[t._v(\" \"+t._s(t.tlt(\"subscribe_btn_label\"))+\" \")]),s(\"button\",{staticClass:\"red-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" \"+t._s(t.tlt(\"go_back_btn_label\"))+\" \")])])])]):s(\"div\",{staticStyle:{\"padding-left\":\"25px\"}},[s(\"div\",{staticClass:\"row mb-2\"},[s(\"div\",{staticClass:\"col-sm-4\"},[s(\"span\",[t._v(\" \"+t._s(t.tlt(\"select_plan1_label\"))+\" \")]),s(\"multiselect\",{attrs:{options:t.first_step,searchable:!1,\"allow-empty\":!1,placeholder:t.tlt(\"select_plan\"),\"show-labels\":!1},on:{input:t.check_retail_plan},model:{value:t.retail_plan_current,callback:function(e){t.retail_plan_current=e},expression:\"retail_plan_current\"}}),s(\"span\")],1),s(\"div\",{staticClass:\"col-sm-4\"},[s(\"span\",[t._v(\" \"+t._s(t.tlt(\"select_billing_cycle1_label\"))+\" \")]),s(\"multiselect\",{attrs:{label:\"label\",options:t.second_step,searchable:!1,\"allow-empty\":!1,disabled:t.check_retail_payment_type_disabled,placeholder:t.retail_payment_placeholder},model:{value:t.retail_payment_type,callback:function(e){t.retail_payment_type=e},expression:\"retail_payment_type\"}})],1)]),s(\"div\",{staticClass:\"row mb-2\"},[s(\"div\",{staticClass:\"col-sm-12\",staticStyle:{margin:\"4px 0px\"}},[s(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:t.submit_stripe_checkout}},[t._v(\" \"+t._s(t.tlt(\"subscribe_btn1_label\"))+\" \")]),s(\"button\",{staticClass:\"red-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" \"+t._s(t.tlt(\"go_back_btn1_label\"))+\" \")])])])])]),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show_subscription,expression:\"show_subscription\"}],staticStyle:{margin:\"10px\"}},[s(\"div\",{staticStyle:{margin:\"10px\",\"margin-left\":\"27\"}},[s(\"h4\",{staticClass:\"mb-0\"},[t._v(t._s(t.tlt(\"subscription_plan_header\")))]),s(\"br\"),s(\"p\",[t._v(\" \"+t._s(t.tlt(\"current_subscribe_plan_text\"))+\" \"),s(\"strong\",[t._v(t._s(t.stripe_subscription_plans_details.subscription_type))]),t._v(\" \"),\"Free\"!==t.hide_button?s(\"span\",[t._v(t._s(t.tlt(\"current_subscribe_plan_text2\"))+\" \"),s(\"strong\",[t._v(t._s(t.get_subscription_valid_till(t.stripe_subscription_plans_details.subscription_valid_till))+\".\")])]):s(\"span\",[t._v(t._s(t.tlt(\"current_subscribe_plan_text3\"))+\" \"),s(\"strong\",[t._v(t._s(t.get_subscription_valid_till(t.stripe_subscription_plans_details.subscription_valid_till))+\".\")])])]),\"Premium\"!==t.stripe_subscription_plans_details.subscription_type?s(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" \"+t._s(t.tlt(\"upgrade_btn_label\"))+\" \")]):s(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" \"+t._s(t.tlt(\"downgrade_btn_label\"))+\" \")]),\"Free\"!==t.hide_button?s(\"button\",{staticClass:\"red-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:t.show_swal_notification}},[t._v(\" \"+t._s(t.tlt(\"cancel_btn_label\"))+\" \")]):t._e()])])]),t.stripe_addon_plans.length>0?s(\"div\",{staticClass:\"card dash-card\"},[s(\"div\",{staticStyle:{margin:\"10px\"}},[s(\"div\",{staticStyle:{margin:\"10px\",\"margin-left\":\"27\"}},[s(\"h4\",{staticClass:\"mb-0\"},[t._v(t._s(t.tlt(\"purchase_addons_header\")))]),s(\"br\"),null!=t.credits_balance?s(\"p\",[t._v(\" \"+t._s(t.tlt(\"current_sms_credit_text\"))+\" \"),s(\"strong\",[t._v(\" \"+t._s(t.tlt(\"current_sms_credit_text2\"))+\" : \"+t._s(t.credits_balance[\"us\"])+\" | \"+t._s(t.tlt(\"current_sms_credit_text3\"))+\" : \"+t._s(t.credits_balance.non_us)+\" \")])]):t._e(),s(\"div\",{staticClass:\"row mb-2\"},[s(\"div\",{staticClass:\"col-sm-4\"},[s(\"span\",[t._v(\" \"+t._s(t.tlt(\"select_addon_label\"))+\" \")]),s(\"multiselect\",{attrs:{label:\"Type\",options:t.stripe_addon_plans,placeholder:t.tlt(\"select_one\")},model:{value:t.selected_addon_plan,callback:function(e){t.selected_addon_plan=e},expression:\"selected_addon_plan\"}})],1),s(\"div\",{staticClass:\"col-sm-4\"},[s(\"span\",[t._v(\" \"+t._s(t.tlt(\"select_option_label\"))+\" \")]),s(\"multiselect\",{attrs:{label:\"label\",options:t.second_step_addon_plans,placeholder:t.tlt(\"select_one\")},model:{value:t.selected_addon_type,callback:function(e){t.selected_addon_type=e},expression:\"selected_addon_type\"}})],1)]),s(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:t.submit_stripe_addon_checkout}},[t._v(\" \"+t._s(t.tlt(\"purchase_btn_label\"))+\" \")])])])]):t._e(),s(\"div\",{staticClass:\"container-fluid\",staticStyle:{padding:\"0\"},attrs:{id:\"dashboard-chart\"}},[s(\"div\",{staticClass:\"card dash-card\"},[s(\"div\",{staticClass:\"card-header d-flex flex-wrap justify-content-between\"},[s(\"h4\",[t._v(t._s(t.tlt(\"cost_for_month_header\"))+\" \"+t._s(t.concurrent_users_month))]),s(\"div\",{staticClass:\"card-act\"})]),s(\"div\",{staticClass:\"card-body\"},[s(\"div\",{staticClass:\"chart-box\"},[s(\"area-chart\",{attrs:{labels:t.Concurrent_Users_Data.labels,data:t.Concurrent_Users_Data.data}})],1)])])]),s(\"div\",{staticClass:\"modal fade dash-modal\",attrs:{id:\"countrymodal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"countrymodaltitle\",\"aria-hidden\":\"true\"}},[s(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{role:\"document\"}},[s(\"div\",{staticClass:\"modal-content\"},[s(\"div\",{staticClass:\"modal-body\"},[s(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t._m(0),s(\"h6\",[t._v(\" \"+t._s(t.tlt(\"company_registered_msg\"))+\" \")])]),t._m(1),s(\"form\",{on:{submit:function(e){return e.preventDefault(),t.call_payment(\"country_selected\")}}},[s(\"div\",{staticClass:\"form-group\"},[s(\"multiselect\",{attrs:{options:t.country_list,searchable:!0,\"close-on-select\":!0,taggable:!1,multiple:!1,placeholder:t.tlt(\"country_name_label\"),\"max-height\":200,\"track-by\":\"code\",label:\"name\"},model:{value:t.country_name,callback:function(e){t.country_name=e},expression:\"country_name\"}})],1),s(\"div\",{staticClass:\"btn-wrap text-right\"},[s(\"button\",{staticClass:\"btn btn-link\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:function(e){t.country_name=\"\"}}},[t._v(\" \"+t._s(t.tlt(\"cancel_btn\"))+\" \")]),s(\"button\",{staticClass:\"darkblue-btn\",attrs:{type:\"submit\"}},[t._v(t._s(t.tlt(\"save_btn\")))])])])])])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"head-icn\"},[s(\"img\",{staticStyle:{width:\"auto\"},attrs:{src:\"/img/msg-blue.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[s(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])}],i=(s(\"a4d3\"),s(\"e01a\"),s(\"99af\"),s(\"4de4\"),s(\"caad\"),s(\"d81d\"),s(\"fb6a\"),s(\"b0c0\"),s(\"b64b\"),s(\"d3b7\"),s(\"2532\"),s(\"3ca3\"),s(\"ddb0\"),s(\"2b3d\"),s(\"3d20\")),r=s.n(i),o=s(\"711e\"),_=s(\"bc3a\"),c=s.n(_),l=(s(\"ab70\"),s(\"ea54\")),p=s.n(l),u=s(\"fe33\"),d=s(\"8e5f\"),m=s.n(d),h=s(\"c1df\"),y=s.n(h),b=s(\"61b2\"),g={name:\"Billing\",components:{AreaChart:u[\"a\"],Multiselect:m.a},mixins:[b[\"l\"],b[\"k\"]],data:function(){return{select_subscription_plan:[\"Silver\",\"Gold\",\"Plantinum\",\"Enterprise\"],selected_subscription:\"\",subscription_id:\"\",plan_id:\"\",customer_id:\"\",plan_period:[\"Monthly\",\"Yearly\"],selected_period:\"\",order_id:\"\",amount:\"\",pay_success_data:{},subscription_btn_disable:!1,country_list:o[\"a\"],paymentid:\"\",barChart:\"\",backgroundColor:[\"#e67e22\",\"#16a085\",\"#2980b9\"],labels:[\"Exchange of Messages\",\"Execution of Tasks\",\"Audio/Video Interaction\",\"Storage\"],companyid:null,companyname:null,country_name:\"\",payment_currency:\"\",value_currency_top_up:\"\",value_currency_subscription:\"\",INR:[3500,7e3,14e3,35e3],USD:[50,100,200,500],common_currency:[],currency_amount:null,top_up_amount:null,piechart_data:[],user_role:this.$session.get(\"UserInformation\").role,concurrent_users_month:\"\",Concurrent_Users_Data:{labels:[],data:[]},months:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"July\",\"Aug\",\"Sept\",\"Oct\",\"Nov\",\"Dec\"],invoice_details:[],invoice_details_copy:[],total_year:[],year_selected:\"\",spinnerOn:!1,common_currency2:[],INR2:[3500,7e3,14e3,35e3],USD2:[100,300,500],retail_shopify_company:!1,retail_shopify_subscription_plans:[{name:\"Starter\",label:\"Starter ($29/month or $290/year)\",is_chargeable:!0,monthly_charge:29,annual_charge:{per_month_effective:24.17,actual_charge:290},currency:\"usd\"},{name:\"Premium\",label:\"Premium ($99/month or $990/year)\",is_chargeable:!0,monthly_charge:99,annual_charge:{per_month_effective:82.5,actual_charge:990},currency:\"usd\"},{name:\"Starter\",label:\"Starter (₹2000/month or ₹20000/year)\",is_chargeable:!0,monthly_charge:2e3,annual_charge:{per_month_effective:24.17,actual_charge:2e4},currency:\"inr\"},{name:\"Premium\",label:\"Premium (₹7000/month or ₹70000/year)\",is_chargeable:!0,monthly_charge:7e3,annual_charge:{per_month_effective:82.5,actual_charge:7e4},currency:\"inr\"},{name:\"WhatsApp\",label:\"WhatsApp ($29/month)\",is_chargeable:!0,monthly_charge:29,currency:\"usd\"},{name:\"WhatsApp\",label:\"WhatsApp (₹2000/month)\",is_chargeable:!0,monthly_charge:2e3,currency:\"inr\"}],retail_plan_current:null,payment_types:[\"Annual\",\"Monthly\"],retail_payment_type:null,stripe_subscription_plans:null,stripe_subscription_plans_details:{},stripe_addon_plans:[],show_subscription:!1,selected_addon_plan:null,hide_button:\"Free\",credits_balance:null,retail_web_framework:this.$session.get(\"retail_web_framework\"),shop_base_currency:\"usd\",acceptable_shop_base_currencies:[\"INR\",\"USD\",\"inr\",\"usd\"],stripe_addon_type:[],selected_addon_type:null}},created:function(){var t=this;this.retail_web_framework=this.$session.get(\"retail_web_framework\"),this.country_list=o[\"a\"],this.$session.has(\"CompanyId\")||\"SuperAdmin\"!=this.$session.get(\"UserInformation\").role||toastr.warning(tlt(\"billing_select_company_name_msg\")),\"SuperAdmin\"==this.user_role&&this.$session.has(\"CompanyId\")?(this.companyid=this.$session.get(\"CompanyId\"),this.companyname=this.$session.get(\"CompanyName\")):(this.companyid=this.$session.get(\"UserInformation\").company_id,this.companyname=this.$session.get(\"UserInformation\").company_name),(\"\"!=this.$session.get(\"UserInformation\").country_name||this.$session.has(\"country_name\"))&&(c.a.get(p.a.billing_invoice(),{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?(t.total_year=e.data.data.YearList,t.year_selected=t.total_year[0]):r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"})})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})),c.a.post(p.a.billing_invoice(),{company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,download_file:!1,year:this.year_selected},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE){t.invoice_details=e.data.data.Bucket_list;for(var s=0;s<t.invoice_details.length;s++)t.invoice_details_copy[s]=t.invoice_details[s].slice(8)}else r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"})})).catch((function(e){console.log(e,\"rr\"),410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})));var e=this.retail_web_framework;Boolean(e)&&\"shopify\"===e&&(this.retail_shopify_company=!0),this.get_shop_base_currency(),this.check_addons_balance()},watch:{selected_addon_plan:function(){this.stripe_addon_type=[],this.selected_addon_type=null,null!==this.selected_addon_plan&&(this.stripe_addon_type=this.selected_addon_plan.Options)}},mounted:function(){var t=this;this.get_plans_from_db(),this.get_addon_details(),this.get_current_subscription_details(),\"\"!=this.$session.get(\"UserInformation\").country_name||this.$session.has(\"country_name\")||$(\"#countrymodal\").modal({backdrop:\"static\"}).on(\"hidden.bs.modal\",(function(e){t.$session.has(\"country_name\")||($(\"#countrymodal\").modal(\"hide\"),t.$router.push(\"/bot/dashboard\"),t.$root.$emit(\"change_sidebar_main_menu\",\"Dashboard\"))}))},computed:{check_retail_payment_type_disabled:function(){return!(!Boolean(this.retail_plan_current)||!1!==this.retail_plan_current.is_chargeable)},retail_payment_placeholder:function(){return this.check_retail_payment_type_disabled?this.tlt(\"no_billing_cycle_msg\"):this.tlt(\"pick_one_msg\")},current_retail_plan_charges:function(){return Boolean(this.retail_plan_current)&&this.retail_plan_current.is_chargeable?\"$\".concat(this.retail_plan_current.monthly_charge,\"/month  or $\").concat(this.retail_plan_current.annual_charge.per_month_effective,\"/month billed at $\").concat(this.retail_plan_current.annual_charge.actual_charge,\" once per year\"):null},check_retail_shopify_form_validations:function(){return null!==this.retail_plan_current&&null!==this.retail_payment_type||null!==this.retail_plan_current&&null==this.retail_payment_type&&!1===this.retail_plan_current.is_chargeable},first_step:function(){return this.stripe_subscription_plans?this.stripe_subscription_plans.filter((function(t){return\"Free\"!==t.Type})).map((function(t){return t.Type})):[]},retail_shopify_subscription_plans_custom_currency:function(){var t=this;return\"Premium\"!==this.stripe_subscription_plans_details.subscription_type?this.retail_shopify_subscription_plans.filter((function(e){return e.currency===t.shop_base_currency})):this.retail_shopify_subscription_plans.filter((function(e){return e.currency===t.shop_base_currency&&(\"Starter\"===e.name||\"WhatsApp\"===e.name)}))},second_step:function(){var t=this,e=[];if(this.stripe_subscription_plans&&this.retail_plan_current){e=this.stripe_subscription_plans.filter((function(e){return e.Type==t.retail_plan_current}));var s=e[0].PriceOptions.filter((function(e){return e.currency===t.shop_base_currency}));return s}return e},first_step_addon_plans:function(){if(this.stripe_addon_plans)return this.stripe_addon_plans.map((function(t){return t.Type}))},second_step_addon_plans:function(){var t=this;if(this.selected_addon_plan){var e=this.selected_addon_plan[\"PriceOptions\"].filter((function(e){return e.currency==t.shop_base_currency}));return e}return[]},retail_payment_types:function(){if(null==this.retail_plan_current)return this.payment_types;if(this.retail_plan_current.name==this.stripe_subscription_plans_details.subscription_type){var t=\"Yearly\"==this.stripe_subscription_plans_details.subscription_period?\"Annual\":\"Monthly\";return this.payment_types.filter((function(e){return e!=t}))}return\"WhatsApp\"==this.retail_plan_current.name?this.payment_types.filter((function(t){return\"Annual\"!=t})):this.payment_types}},methods:{show_swal_notification:function(){var t=this;r.a.fire({title:this.tlt(\"billing_swal_alert_msg\"),text:this.tlt(\"billing_unsubscribe_plan_msg\"),icon:\"warning\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:this.tlt(\"billing_swal_yes_btn\")}).then((function(e){1==e.value&&(t.update_subscription_plan_free(),r.a.fire(t.tlt(\"billing_swal_unsubscribed_msg\"),t.tlt(\"billing_subscribe_cancel_msg\"),\"success\"))}))},get_subscription_valid_till:function(t){return y.a.utc(t).format(\"Do MMMM YYYY\")},update_subscription_plan_free:function(){var t=this;c.a.post(p.a.stripe_payment_gateway(),{company_id:this.companyid,company_name:this.companyname,unsubscribe_plan:!0,email:this.$session.get(\"UserInformation\").email}).then((function(e){if(e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE){var s=e.data.data.UserMenu;t.update_sidebar_menu(s),t.$root.$emit(\"SideBarMenuUpdated\",!0),t.update_restriction_list(e.data.data.RestrictionList,e.data.data.SubscribedPlan),t.get_current_subscription_details(),t.$router.push(\"/bot/subscription-renewal\")}else r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"})})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},get_plans_from_db:function(){var t=this;this.spinnerOn=!0,c.a.post(p.a.stripe_payment_gateway(),{company_id:this.companyid,company_name:this.companyname,get_plans_from_db:!0}).then((function(e){e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?(t.spinnerOn=!1,t.stripe_subscription_plans=e.data.data,t.show_subscription=!0):t.stripe_subscription_plans_details=[]})).catch((function(e){t.spinnerOn=!1,r.a.fire({title:t.tlt(\"billing_error_occurred_msg2\"),type:\"error\"})}))},get_current_subscription_details:function(){var t=this;this.spinnerOn=!0,c.a.post(p.a.stripe_payment_gateway(),{company_id:this.companyid,company_name:this.companyname,get_active_plan:!0}).then((function(e){e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?(t.spinnerOn=!1,t.stripe_subscription_plans_details=e.data.data.Data.current_subscription,t.hide_button=e.data.data.Data.current_subscription.subscription_type,t.show_subscription=!0):(t.stripe_subscription_plans_details=[],r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"}))})).catch((function(e){t.spinnerOn=!1,console.log(e,\"eee\"),r.a.fire({title:t.tlt(\"billing_error_occurred_msg2\"),type:\"error\"})}))},check_addons_balance:function(){var t=this;this.spinnerOn=!0,c.a.post(p.a.check_addons_balance(),{company_name:this.companyname,company_id:this.companyid,check_balance:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(t.spinnerOn=!1,e.data.message.MSG_CODE===t.api_status_code.CHECK_BALANCE.MSG_CODE)if(1==Boolean(e.data.data.credits.sms_count)){var s=e.data.data.credits.sms_count;t.credits_balance=s}else r.a.fire({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\"})})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},get_addon_details:function(){var t=this;c.a.post(p.a.stripe_payment_gateway(),{get_add_ons:!0}).then((function(e){e.data.message.MSG_CODE!==t.api_status_code.NO_ADD_ONS_FOUND.MSG_CODE?e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?0!=Boolean(e.data.data)&&(t.stripe_addon_plans=e.data.data):r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"}):t.stripe_addon_plans=[]})).catch((function(e){console.log(e),r.a.fire({title:t.tlt(\"billing_error_occurred_msg3\"),type:\"error\"})}))},cancel_subscription:function(){var t=this;c.a.post(p.a.razorpay_communcation(),{is_cancel:!0,subscription_id:this.subscription_id}).then((function(e){e.data.message.MSG_CODE===t.api_status_code.SUBSCRIPTION_CANCEL_SUCCESS.MSG_CODE?t.subscription_btn_disable=!0:r()({title:t.tlt(\"billing_internal_server_msg1\"),type:\"error\",showConfirmButton:!1,timer:2e3})})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},create_customer:function(){var t=this;if(\"\"!=this.selected_subscription&&\"\"!=this.selected_period){var e=this.selected_period.toLowerCase();for(var s in this.subscription_plans)e==this.subscription_plans[s].period&&this.selected_subscription==this.subscription_plans[s].item.name&&(this.plan_id=this.subscription_plans[s].id);if(\"\"!=this.plan_id)if(\"\"==this.customer_id){var a={name:this.companyname,contact:\"\",email:this.$session.get(\"UserInformation\").email,notes:{Extra:\"Details related to customer\"}};c.a.post(p.a.razorpay_communcation(),{company_id:this.companyid,company_name:this.companyname,create_customer_id:!0,data:a}).then((function(e){if(data.message.MSG_CODE===t.api_status_code.STATUS_SUCCESS.MSG_CODE){e.data.data.Customer_Detail;t.customer_id=e.data.data.Customer_Detail.id,t.create_subscription(t.plan_id,t.customer_id)}else r()({title:t.tlt(\"billing_internal_server_msg2\"),type:\"error\",text:t.tlt(\"billing_error_creating_cust_id_msg\"),timer:2e3})})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))}else this.create_subscription(this.plan_id,this.customer_id);else r()({title:this.tlt(\"billing_plan_not_found_msg\"),type:\"error\",text:this.tlt(\"billing_contact_cense_admin_msg\"),showConfirmButton:!1,timer:2e3})}else r()({type:\"info\",text:this.tlt(\"billing_subscribe_plan_period_msg\"),toast:!0,position:\"top-right\",showConfirmButton:!1,timer:2e3})},create_subscription:function(t,e){var s=this,a={plan_id:t,customer_id:e};c.a.post(p.a.razorpay_communcation(),{create_subscription:!0,data:a}).then((function(t){t.data.message.MSG_CODE===s.api_status_code.STATUS_SUCCESS.MSG_CODE?(s.subscription_id=t.data.data.Subscription_Detail.id,s.start_payment(s.subscription_id)):r()({title:s.tlt(\"billing_internal_server_msg3\"),type:\"error\",text:s.tlt(\"billing_error_creating_subscription_msg\"),timer:2e3})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||s.$root.$emit(\"Session_Expired\",t.response.data)}))},start_payment:function(t){var e=this,a={key:Object({NODE_ENV:\"production\",BASE_URL:\"/\"}).VUE_APP_RAZORPAY_KEY,subscription_id:t,name:\"Cense AI\",description:\"Test Transaction\",image:s(\"d95c\"),handler:function(t){var s=t.razorpay_payment_id,a=t.razorpay_subscription_id,n=t.razorpay_signature;e.pay_success_data={},e.pay_success_data={razorpay_payment_id:s,razorpay_subscription_id:a,razorpay_signature:n,razorpay_customer_id:e.customer_id,subscription_status:\"active\",subscription_id:e.subscription_id,plan_id:e.plan_id,subscription_type:e.selected_subscription,subscription_period:e.selected_period},0!=Object.keys(e.pay_success_data).length&&e.add_details_to_server(e.pay_success_data)},notes:{address:\"Razorpay Corporate Office\"},theme:{color:\"#3399cc\"}},n=new Razorpay(a);n.on(\"payment.failed\",(function(t){alert(t.error.code),alert(t.error.description),alert(t.error.source),alert(t.error.step),alert(t.error.reason),alert(t.error.metadata.order_id),alert(t.error.metadata.payment_id)})),n.open()},add_details_to_server:function(t){var e=this;null!=t&&c.a.post(p.a.razorpay_communcation(),{company_id:this.companyid,company_name:this.companyname,verify_subscription:!0,data:t}).then((function(t){t.data.message.MSG_CODE===e.api_status_code.SUBSCRIPTION_VERIFICATION_SUCCESS.MSG_CODE?(r()({title:e.tlt(\"billing_subscription_register_msg\"),type:\"success\",timer:2e3}),e.pay_success_data={},e.subscription_btn_disable=!1):(r()({title:e.tlt(\"billing_internal_server_msg4\"),type:\"error\",text:e.tlt(\"billing_error_occur_subscription_msg\"),toast:!0,timer:2e3}),e.pay_success_data={})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},download_invoice:function(t){var e=this;this.spinnerOn=!0,c()({method:\"post\",url:p.a.billing_invoice(),responseType:\"blob\",data:{company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,download_file:!0,file_name:this.invoice_details[t]},headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(e.spinnerOn=!1,t.data.message.MSG_CODE===e.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE)e.spinnerOn=!1,toastr.error(e.tlt(\"billing_download_invoice_msg\"));else{e.spinnerOn=!1;var s=window.URL.createObjectURL(new Blob([t.data.data])),a=document.createElement(\"a\");a.href=s,a.setAttribute(\"download\",\"Ashish.pdf\"),document.body.appendChild(a),a.click()}})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},call_payment:function(t){var e=this,s=(new Date,this),a={};function n(t,e,n){\"Subscribe\"==n?(a={key:\"rzp_test_SnDTaPnncfliDt\",subscription_id:t,name:\"Cense AI\",description:\"Instill Intelligence\",image:\"/img/cense_image.png\",handler:function(t){s.paymentid=t.razorpay_payment_id,s.value_currency_subscription=\"\"},prefill:{name:\"\",email:\"\",contact:\"\"},notes:{address:\"address\"},theme:{color:\"#283777\"}},i()):\"Pay\"==n&&(a={key:\"rzp_test_SnDTaPnncfliDt\",amount:t,currency:e,name:\"Cense AI\",description:\"Instill Intelligence\",image:\"/img/cense_image.png\",handler:function(t){$('#contact[type=\"tel\"]').value,$('#email[type=\"email\"]').value;s.paymentid=t.razorpay_payment_id,s.value_currency_top_up=\"\"},prefill:{name:\"\",email:\"\",contact:\"\"},notes:{address:\"address\"},theme:{color:\"#283777\"}},i())}function i(){var t=new Razorpay(a);t.open(),event.preventDefault()}\"country_selected\"==t?\"\"==this.country_name.code?alert(this.tlt(\"billing_select_country_msg\")):(this.spinnerOn=!0,c.a.post(p.a.edit_profile_url(),{company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,first_name:this.$session.get(\"UserInformation\").first_name,last_name:this.$session.get(\"UserInformation\").last_name,country_name:this.country_name.code,phone_number:this.$session.get(\"UserInformation\").phone_no},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,t.data.message.MSG_CODE===e.api_status_code.PROFILE_UPDATED.MSG_CODE&&(toastr.success(e.tlt(\"billing_profile_updated_msg\")),e.$session.set(\"country_name\",e.country_name.code),setTimeout((function(){e.$router.go()}),2500)),$(\"#countrymodal\").modal(\"hide\")})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):\"Pay\"==event.target.innerText?\"\"==this.value_currency_top_up?toastr.error(this.tlt(\"billing_select_amount_msg1\")):\"INR\"==this.payment_currency?(this.value_currency_top_up=this.value_currency_top_up.slice(2,-10),this.currency_amount=118*this.value_currency_top_up,this.top_up_amount=this.value_currency_top_up,\"INR\"==this.payment_currency&&(this.top_up_amount/=70),n(this.currency_amount,this.payment_currency,\"Top Up\")):(this.value_currency_top_up=this.value_currency_top_up.slice(2),this.currency_amount=100*this.value_currency_top_up,this.top_up_amount=this.value_currency_top_up,n(this.currency_amount,this.payment_currency,\"Top Up\")):\"Subscribe\"==event.target.innerText&&(this.spinnerOn=!0,\"\"==this.value_currency_subscription?toastr.error(this.tlt(\"billing_select_amount_msg2\")):\"INR\"==this.payment_currency?(this.value_currency_subscription=this.value_currency_subscription.slice(2,-10),this.currency_amount=118*this.value_currency_subscription,this.top_up_amount=this.value_currency_subscription,\"INR\"==this.payment_currency&&(this.top_up_amount/=70),c.a.post(p.a.billing_subscription_url(),{company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,PlanAmount:this.top_up_amount},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){t.data.SubscriptionId?n(t.data.SubscriptionId,\"\",\"Subscribe\"):t.data.Error&&toastr.error(t.data.Error)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):(this.value_currency_subscription=this.value_currency_subscription.slice(2),this.currency_amount=100*this.value_currency_subscription,this.top_up_amount=this.value_currency_subscription,this.spinnerOn=!0,c.a.post(p.a.billing_subscription_url(),{company_id:this.$session.get(\"UserInformation\").company_id,company_botname:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,PlanAmount:this.currency_amount},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,t.data.SubscriptionId?n(t.data.SubscriptionId,\"\",\"Subscribe\"):t.data.Error&&toastr.error(t.data.Error)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))))},check_retail_plan:function(t,e){this.retail_payment_type=null},subscribe_retail_plan:function(){var t=this;this.check_retail_shopify_form_validations?(this.spinnerOn=!0,c.a.post(p.a.subscribe_shopify_billing(),{subscription_plan:this.retail_plan_current,billing_cycle:this.retail_payment_type,company_id:this.companyid,company_name:this.companyname,is_paid_plan:this.retail_plan_current.is_chargeable,email:this.$session.get(\"UserInformation\").email}).then((function(e){t.spinnerOn=!1,e.data.message.MSG_CODE===t.api_status_code.STATUS_SUCCESS_MODELS.MSG_CODE?\"Annual\"==t.retail_payment_type?Boolean(e.data.data)&&Boolean(e.data.data.data.appSubscriptionCreate)&&(r()({title:t.tlt(\"billing_redirect_shopify_merchant_msg\"),toast:!0,showCancelButton:!1,type:\"info\",showConfirmButton:!1}),setTimeout((function(){window.location=e.data.data.data.appSubscriptionCreate.confirmationUrl}),1e3),t.$root.$emit(\"DashboardSidebarDisable\",!1),t.$session.set(\"SettingTopnavbarDisable\",!1)):\"Monthly\"==t.retail_payment_type?Boolean(e.data.data.confirmation_url)?(t.$root.$emit(\"DashboardSidebarDisable\",!1),t.$session.set(\"SettingTopnavbarDisable\",!1),setTimeout((function(){window.location=e.data.data.confirmation_url}),1e3)):r()({title:t.tlt(\"billing_error_occurred_msg5\"),text:t.tlt(\"billing_swal_try_again_msg1\"),type:\"error\",showCancelButton:!1}):!1===t.retail_plan_current.is_chargeable&&r()({title:t.tlt(\"billing_swal_success_msg\"),type:\"success\",text:t.tlt(\"billing_subscribe_free_plan_msg\")}):r.a.fire({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"})})).catch((function(e){t.spinnerOn=!1,console.log(e),r()({title:t.tlt(\"billing_error_occurred_msg6\"),text:t.tlt(\"billing_swal_try_again_msg2\"),type:\"error\",showCancelButton:!1})}))):r()({title:this.tlt(\"billing_select_all_required_value_msg\"),type:\"error\",toast:!0,showCancelButton:!1,showConfirmButton:!1,timer:3e3})},submit_stripe_checkout:function(){var t=this;if(null!==this.retail_plan_current&&null!==this.retail_payment_type){var e={plan_name:this.retail_plan_current,type:this.retail_payment_type.type,nickname:this.retail_payment_type.nickname,price:this.retail_payment_type.price,currency:this.retail_payment_type.currency,id:this.retail_payment_type.price_id};this.spinnerOn=!0,c.a.post(p.a.stripe_payment_gateway(),{generate_new_request:!0,chosen_plan_data:e,company_id:this.companyid,company_name:this.companyname,request_type:\"Plan\",email:this.$session.get(\"UserInformation\").email}).then((function(e){t.spinnerOn=!1,e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?(window.location=e.data.data,t.$root.$emit(\"DashboardSidebarDisable\",!1),t.$session.set(\"SettingTopnavbarDisable\",!1)):r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"})})).catch((function(e){t.spinnerOn=!1,console.log(e),r()({title:t.tlt(\"billing_error_occurred_msg8\"),type:\"error\"})}))}else r()({title:this.tlt(\"billing_select_all_field_msg\"),type:\"error\",showCancelButton:!1})},submit_stripe_addon_checkout:function(){var t=this;if(null!==this.selected_addon_type&&null!==this.selected_addon_plan){var e={plan_name:this.selected_addon_plan.Type,price:this.selected_addon_type.price,currency:this.selected_addon_type.currency,id:this.selected_addon_type.price_id};this.spinnerOn=!0,c.a.post(p.a.stripe_payment_gateway(),{generate_new_request:!0,chosen_plan_data:e,company_id:this.companyid,company_name:this.companyname,request_type:\"AddOn\"}).then((function(e){t.spinnerOn=!1,e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?window.location=e.data.data:r()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,timer:2500,type:\"error\"})})).catch((function(e){t.spinnerOn=!1,console.log(e),r()({title:t.tlt(\"billing_error_occurred_msg10\"),type:\"error\"})}))}else r()({title:this.tlt(\"billing_select_all_field_msg1\"),type:\"error\"})},get_shop_base_currency:function(){var t=this;c.a.post(p.a.product_settings(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,is_get:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){var s=t.retail_web_framework;e.data.message.MSG_CODE!=t.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE&&e.data.message.MSG_CODE!=t.api_status_code.NO_DATA_AVAILABLE.MSG_CODE&&(t.shop_base_currency=e.data.data[s+\"_details\"].base_currency.value,t.shop_base_currency=t.acceptable_shop_base_currencies.includes(t.shop_base_currency)?t.shop_base_currency.toLowerCase():\"usd\")})).catch((function(e){t.shop_base_currency=\"usd\"}))}}},f=g,v=(s(\"14f1\"),s(\"edeb\"),s(\"2877\")),C=Object(v[\"a\"])(f,a,n,!1,null,\"4492f7b6\",null);e[\"default\"]=C.exports},edeb:function(t,e,s){\"use strict\";var a=s(\"3201\"),n=s.n(a);n.a}}]);","extractedComments":[]}