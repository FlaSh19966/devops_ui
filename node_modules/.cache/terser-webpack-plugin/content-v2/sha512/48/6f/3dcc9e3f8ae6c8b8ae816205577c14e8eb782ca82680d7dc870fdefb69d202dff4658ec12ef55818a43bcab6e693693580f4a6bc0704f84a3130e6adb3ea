{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"invitation\"],{\"0aae\":function(t,e,n){t.exports=n.p+\"img/Group 1.1786e49b.svg\"},1048:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"container-fluid pl-0 pr-0\",staticStyle:{\"min-height\":\"520px\"}},[n(\"top-navbar\"),n(\"div\",{staticClass:\"container-fluid pt-0\"},[n(\"div\",{staticClass:\"row\",staticStyle:{height:\"520px\"}},[n(\"div\",{staticClass:\"col-md-9\"},[n(\"div\",{staticClass:\"row pt-5\"},[n(\"div\",{staticClass:\"col-sm-5\",staticStyle:{\"margin-left\":\"5%\"}},[n(\"div\",{staticClass:\"card text-center\",staticStyle:{height:\"100%\",width:\"100%'\",\"margin-top\":\"25px\"}},[n(\"div\",{staticClass:\"card-body\",staticStyle:{height:\"162px\"}},[n(\"span\",{staticClass:\"card-title\"},[t._v(\"Invite Attendee\")]),n(\"div\",{staticClass:\"form-group\",staticStyle:{\"margin-top\":\"10px\",\"margin-right\":\"8px\",\"margin-left\":\"8px\",\"font-size\":\"14px\",height:\"40px\"}},[n(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.attendee_email,expression:\"attendee_email\"}],staticClass:\"form-control\",attrs:{placeholder:\"Attendee Email (Enter multiple addresses with a ','\",type:\"email\"},domProps:{value:t.attendee_email},on:{input:function(e){e.target.composing||(t.attendee_email=e.target.value)}}})]),n(\"div\",{staticClass:\"form-group\",staticStyle:{\"margin-top\":\"10px\",\"margin-right\":\"8px\",\"margin-left\":\"8px\"}},[n(\"date-picker\",{staticStyle:{\"font-size\":\"14px\",height:\"40px\"},attrs:{type:\"datetime\",format:\"D MMMM YYYY hh:mm A\",placeholder:\"Select Date\",\"input-class\":\"form-control\"},model:{value:t.time,callback:function(e){t.time=e},expression:\"time\"}})],1),n(\"button\",{staticClass:\"btn\",staticStyle:{width:\"28%\",height:\"34px\",\"font-weight\":\"600\"},on:{click:t.sendEmail}},[t._v(\"SEND\")])])])]),n(\"h6\",{staticStyle:{\"margin-top\":\"8rem\",\"font-weight\":\"550\",\"margin-left\":\"3%\"}},[t._v(\"OR\")]),n(\"div\",{staticClass:\"col-sm-5\"},[n(\"div\",{staticClass:\"card text-center\",staticStyle:{height:\"100%\",width:\"100%\",\"margin-left\":\"8%\",\"margin-top\":\"25px\"}},[n(\"div\",{staticClass:\"card-body\",staticStyle:{\"margin-top\":\"8%\",height:\"162px\"}},[n(\"span\",{staticClass:\"card-title\",staticStyle:{\"margin-top\":\"1.5rem\"}},[t._v(\"Join a Meeting Now\")]),n(\"div\",{staticClass:\"form-group\",staticStyle:{\"margin-top\":\"10px\",\"margin-right\":\"8px\",\"margin-left\":\"8px\"}},[n(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.link,expression:\"link\"}],ref:\"invite_link\",staticClass:\"form-control\",staticStyle:{\"font-size\":\"14px\",height:\"40px\"},attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})]),n(\"button\",{staticClass:\"btn\",staticStyle:{width:\"42%\",height:\"34px\",\"font-weight\":\"600\"},on:{click:t.copy_invite_link}},[t._v(\"COPY LINK\")])])])])])]),t._m(0)])]),n(\"custom-footer\")],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"col-md-3 pl-0 pr-0\"},[i(\"div\",{staticClass:\"right-side-bar\"},[i(\"div\",{staticClass:\"right-side-box\"},[i(\"div\",{staticClass:\"blue-right-box\"},[i(\"img\",{staticStyle:{height:\"64%\",\"margin-top\":\"23px\"},attrs:{src:n(\"63ed\"),alt:\"\"}})])])]),i(\"div\",{staticClass:\"right-side-bar\"},[i(\"div\",{staticClass:\"right-side-box\"},[i(\"div\",{staticClass:\"blue-right-box\"},[i(\"img\",{staticStyle:{height:\"64%\",\"margin-top\":\"23px\"},attrs:{src:n(\"63ed\"),alt:\"\"}})])])]),i(\"div\",{staticClass:\"right-side-bar\"},[i(\"div\",{staticClass:\"right-side-box\"},[i(\"div\",{staticClass:\"blue-right-box\"},[i(\"img\",{staticStyle:{height:\"64%\",\"margin-top\":\"23px\"},attrs:{src:n(\"63ed\"),alt:\"\"}})])])]),i(\"div\",{staticClass:\"right-side-bar\"},[i(\"div\",{staticClass:\"right-side-box\"},[i(\"div\",{staticClass:\"blue-right-box\"},[i(\"img\",{staticStyle:{height:\"64%\",\"margin-top\":\"23px\"},attrs:{src:n(\"63ed\"),alt:\"\"}})])])])])}],r=(n(\"99af\"),n(\"a15b\"),n(\"9911\"),n(\"98f4\")),s=n(\"ec45\"),a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"header\",[n(\"nav\",{staticClass:\"navbar navbar-light\"},[n(\"a\",{staticClass:\"navbar-brand\",staticStyle:{\"font-weight\":\"600\"},attrs:{href:\"javascript:void(0)\"}},[t._v(\"COLLABORATION\")]),n(\"small\",{staticClass:\"navbar-text\"},[t._v(\"Amit's Meeting Room\")])])])}],u=(n(\"7cb3\"),n(\"2877\")),l={},h=Object(u[\"a\"])(l,a,c,!1,null,\"2fdbcfd0\",null),f=h.exports,d=n(\"71f9\"),p={data:function(){return{socket:null,channel:null,message:\"\",username:\"\",enterName:!0,time:null,attendee_email:\"\",link:null}},components:{DatePicker:s[\"a\"],TopNavbar:f,CustomFooter:d[\"a\"]},created:function(){this.$route.params.roomId&&(this.link=\"\".concat(window.location.origin,\"/conference?roomId=\").concat(this.$route.params.roomId))},methods:{copy_invite_link:function(){this.$refs[\"invite_link\"].select(),this.$refs[\"invite_link\"].setSelectionRange(0,99999),document.execCommand(\"copy\")},sendMessage:function(){this.channel.push(\"new_msg\",{body:this.message}),this.message=\"\"},connectToChat:function(){var t=this,e={};this.enterName=!1,this.socket=new r[\"Socket\"](\"/socket\",{params:{username:this.username}}),this.socket.connect(),this.channel=this.socket.channel(\"room:lobby\",{}),this.channel.on(\"new_msg\",(function(e){t.$store.commit(\"addMessage\",{payload:e})})),this.channel.on(\"presence_state\",(function(n){e=r[\"Presence\"].syncState(e,n),t.assignUsers(e)})),this.channel.on(\"presence_diff\",(function(n){e=r[\"Presence\"].syncDiff(e,n),t.assignUsers(e)})),this.channel.join().receive(\"ok\",(function(t){console.log(\"Joined successfully\",t)})).receive(\"error\",(function(t){console.log(\"Unable to join\",t)}))},assignUsers:function(t){var e=r[\"Presence\"].list(t,(function(t,e){var n=e.metas;return{name:t,online_at:n[0].online_at}}));this.$store.commit(\"addUsers\",{users:e})},sendEmail:function(){var t=this,e={to:this.attendee_email,date:this.time,link:this.link};\"\"!==this.attendee_email?this.$conference_http.post(\"/send-invite\",e).then((function(e){\"Ok\"===e.data.status&&t.$swal.fire({text:\"Your Invite has been sent successfully\",confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Okay\",icon:\"success\"})})).catch((function(t){return console.log(t)})):this.$swal.fire({text:\"Please Enter Email Id\",confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Okay\",icon:\"error\"})}}},v=p,m=(n(\"8726\"),Object(u[\"a\"])(v,i,o,!1,null,\"babdff58\",null));e[\"default\"]=m.exports},\"1dde\":function(t,e,n){var i=n(\"d039\"),o=n(\"b622\"),r=n(\"2d00\"),s=o(\"species\");t.exports=function(t){return r>=51||!i((function(){var e=[],n=e.constructor={};return n[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},\"26d6\":function(t,e,n){t.exports=n.p+\"img/Group 10.bad8c1a3.svg\"},\"58ad\":function(t,e,n){t.exports=n.p+\"img/Group 8.452383dc.svg\"},\"59ea\":function(t,e,n){t.exports=n.p+\"img/Group 3.5ba0b576.svg\"},\"63ed\":function(t,e,n){t.exports=n.p+\"img/Group 154.ac2a0d5d.svg\"},\"65f0\":function(t,e,n){var i=n(\"861d\"),o=n(\"e8b5\"),r=n(\"b622\"),s=r(\"species\");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,\"function\"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[s],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},\"6ad4\":function(t,e,n){t.exports=n.p+\"img/Group 5.d3d73e96.svg\"},\"71f9\":function(t,e,n){\"use strict\";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"footer\",{staticClass:\"fixed-footer\",staticStyle:{display:\"table\"}},[i(\"div\",{staticClass:\"container text-center\",staticStyle:{display:\"table-row\"}},[i(\"div\",{staticClass:\"footer-icon\",staticStyle:{width:\"22%\"}},[i(\"input\",{staticClass:\"slider\",attrs:{type:\"range\",min:\"1\",max:\"100\",value:\"70\",id:\"myRange\"},on:{mousemove:t.slideColorChange}})]),i(\"div\",{staticClass:\"footer-icon\",staticStyle:{width:\"10%\"},on:{click:t.invite_user}},[i(\"img\",{staticStyle:{height:\"26px\",width:\"28%\",\"margin-bottom\":\"4px\"},attrs:{src:n(\"0aae\"),alt:\"\"}}),i(\"p\",{staticStyle:{color:\"white\",\"font-size\":\"x-small\"}},[t._v(\"Invite Attendee\")])]),i(\"div\",{staticClass:\"footer-icon\",staticStyle:{width:\"10%\"},on:{click:t.return_to_chat}},[i(\"img\",{staticStyle:{height:\"26px\",width:\"28%\",\"margin-bottom\":\"4px\"},attrs:{src:n(\"59ea\"),alt:\"\"}}),i(\"p\",{staticStyle:{color:\"white\",\"font-size\":\"x-small\"}},[t._v(\"Attendees\")])]),t._m(0),t._m(1),t._m(2)])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"footer-icon\",staticStyle:{width:\"10%\"}},[i(\"img\",{staticStyle:{height:\"26px\",width:\"35%\",\"margin-bottom\":\"4px\"},attrs:{src:n(\"6ad4\"),alt:\"\"}}),i(\"p\",{staticStyle:{color:\"white\",\"font-size\":\"x-small\"}},[t._v(\"Chat\")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"footer-icon\",staticStyle:{width:\"10%\"}},[i(\"img\",{staticStyle:{height:\"26px\",width:\"28%\",\"margin-bottom\":\"4px\"},attrs:{src:n(\"58ad\"),alt:\"\"}}),i(\"p\",{staticStyle:{color:\"white\",\"font-size\":\"x-small\"}},[t._v(\"Lock meeting\")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"footer-icon\",staticStyle:{width:\"10%\"}},[i(\"img\",{staticStyle:{height:\"26px\",width:\"28%\",\"margin-bottom\":\"4px\"},attrs:{src:n(\"26d6\"),alt:\"\"}}),i(\"p\",{staticStyle:{color:\"white\",\"font-size\":\"x-small\"}},[t._v(\"Start Recording\")])])}],r=(n(\"99af\"),n(\"b0c0\"),{data:function(){return{value:null}},methods:{slideColorChange:function(){var t=document.getElementById(\"myRange\").value,e=\"linear-gradient(90deg, rgb(255,255,255) \".concat(t,\"%, rgb(19, 176, 204) \").concat(t,\"%)\");document.getElementById(\"myRange\").style.background=e},share_screen_video_call_page:function(){this.$router.push({name:\"Video-Call\",params:{startsharescreen:!0}})},invite_user:function(){this.$emit(\"invite_attendee\")},return_to_chat:function(){window.localStorage.sessionId&&\"Video-Call\"!==this.$route.name&&this.$router.push({name:\"Video-Call\",params:{roomId:window.localStorage.roomId,feedId:window.localStorage.feedId,clear_global_variables:!0}})}}}),s=r,a=(n(\"c6e3\"),n(\"2877\")),c=Object(a[\"a\"])(s,i,o,!1,null,\"9cb9a542\",null);e[\"a\"]=c.exports},\"7cb3\":function(t,e,n){\"use strict\";var i=n(\"bb6a\"),o=n.n(i);o.a},8418:function(t,e,n){\"use strict\";var i=n(\"c04e\"),o=n(\"9bf2\"),r=n(\"5c6c\");t.exports=function(t,e,n){var s=i(e);s in t?o.f(t,s,r(0,n)):t[s]=n}},\"857a\":function(t,e,n){var i=n(\"1d80\"),o=/\"/g;t.exports=function(t,e,n,r){var s=String(i(t)),a=\"<\"+e;return\"\"!==n&&(a+=\" \"+n+'=\"'+String(r).replace(o,\"&quot;\")+'\"'),a+\">\"+s+\"</\"+e+\">\"}},8726:function(t,e,n){\"use strict\";var i=n(\"b5df\"),o=n.n(i);o.a},\"98f4\":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){(function(e){t.exports=e.Phoenix=n(2)}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(n=window)}t.exports=n},function(t,e,n){\"use strict\";function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function o(t){return(o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}}(t,e)||s(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function s(t,e){if(t){if(\"string\"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}n.r(e),n.d(e,\"Channel\",(function(){return L})),n.d(e,\"Serializer\",(function(){return M})),n.d(e,\"Socket\",(function(){return I})),n.d(e,\"LongPoll\",(function(){return B})),n.d(e,\"Ajax\",(function(){return J})),n.d(e,\"Presence\",(function(){return $}));var h=\"undefined\"!=typeof self?self:null,f=\"undefined\"!=typeof window?window:null,d=h||f||void 0,p=0,v=1,m=2,g=3,y=\"closed\",b=\"errored\",k=\"joined\",C=\"joining\",x=\"leaving\",S=\"phx_close\",w=\"phx_error\",_=\"phx_join\",j=\"phx_reply\",R=\"phx_leave\",E=[S,w,_,j,R],T=\"longpoll\",O=\"websocket\",P=function(t){return\"function\"==typeof t?t:function(){return t}},A=function(){function t(e,n,i,o){c(this,t),this.channel=e,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return l(t,[{key:\"resend\",value:function(t){this.timeout=t,this.reset(),this.send()}},{key:\"send\",value:function(){this.hasReceived(\"timeout\")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:\"receive\",value:function(t,e){return this.hasReceived(t)&&e(this.receivedResp.response),this.recHooks.push({status:t,callback:e}),this}},{key:\"reset\",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:\"matchReceive\",value:function(t){var e=t.status,n=t.response;t.ref,this.recHooks.filter((function(t){return t.status===e})).forEach((function(t){return t.callback(n)}))}},{key:\"cancelRefEvent\",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:\"cancelTimeout\",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:\"startTimeout\",value:function(){var t=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(function(e){t.cancelRefEvent(),t.cancelTimeout(),t.receivedResp=e,t.matchReceive(e)})),this.timeoutTimer=setTimeout((function(){t.trigger(\"timeout\",{})}),this.timeout)}},{key:\"hasReceived\",value:function(t){return this.receivedResp&&this.receivedResp.status===t}},{key:\"trigger\",value:function(t,e){this.channel.trigger(this.refEvent,{status:t,response:e})}}]),t}(),L=function(){function t(e,n,i){var o=this;c(this,t),this.state=y,this.topic=e,this.params=P(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new A(this,_,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new N((function(){o.socket.isConnected()&&o.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((function(){return o.rejoinTimer.reset()}))),this.stateChangeRefs.push(this.socket.onOpen((function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}))),this.joinPush.receive(\"ok\",(function(){o.state=k,o.rejoinTimer.reset(),o.pushBuffer.forEach((function(t){return t.send()})),o.pushBuffer=[]})),this.joinPush.receive(\"error\",(function(){o.state=b,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.onClose((function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log(\"channel\",\"close \".concat(o.topic,\" \").concat(o.joinRef())),o.state=y,o.socket.remove(o)})),this.onError((function(t){o.socket.hasLogger()&&o.socket.log(\"channel\",\"error \".concat(o.topic),t),o.isJoining()&&o.joinPush.reset(),o.state=b,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.joinPush.receive(\"timeout\",(function(){o.socket.hasLogger()&&o.socket.log(\"channel\",\"timeout \".concat(o.topic,\" (\").concat(o.joinRef(),\")\"),o.joinPush.timeout),new A(o,R,P({}),o.timeout).send(),o.state=b,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.on(j,(function(t,e){o.trigger(o.replyEventName(e),t)}))}return l(t,[{key:\"join\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");return this.timeout=t,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:\"onClose\",value:function(t){this.on(S,t)}},{key:\"onError\",value:function(t){return this.on(w,(function(e){return t(e)}))}},{key:\"on\",value:function(t,e){var n=this.bindingRef++;return this.bindings.push({event:t,ref:n,callback:e}),n}},{key:\"off\",value:function(t,e){this.bindings=this.bindings.filter((function(n){return!(n.event===t&&(void 0===e||e===n.ref))}))}},{key:\"canPush\",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:\"push\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error(\"tried to push '\".concat(t,\"' to '\").concat(this.topic,\"' before joining. Use channel.join() before pushing events\"));var i=new A(this,t,(function(){return e}),n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:\"leave\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=x;var n=function(){t.socket.hasLogger()&&t.socket.log(\"channel\",\"leave \".concat(t.topic)),t.trigger(S,\"leave\")},i=new A(this,R,P({}),e);return i.receive(\"ok\",(function(){return n()})).receive(\"timeout\",(function(){return n()})),i.send(),this.canPush()||i.trigger(\"ok\",{}),i}},{key:\"onMessage\",value:function(t,e,n){return e}},{key:\"isLifecycleEvent\",value:function(t){return E.indexOf(t)>=0}},{key:\"isMember\",value:function(t,e,n,i){return this.topic===t&&(!i||i===this.joinRef()||!this.isLifecycleEvent(e)||(this.socket.hasLogger()&&this.socket.log(\"channel\",\"dropping outdated message\",{topic:t,event:e,payload:n,joinRef:i}),!1))}},{key:\"joinRef\",value:function(){return this.joinPush.ref}},{key:\"rejoin\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=C,this.joinPush.resend(t))}},{key:\"trigger\",value:function(t,e,n,i){var o=this.onMessage(t,e,n,i);if(e&&!o)throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");for(var r=this.bindings.filter((function(e){return e.event===t})),s=0;s<r.length;s++)r[s].callback(o,n,i||this.joinRef())}},{key:\"replyEventName\",value:function(t){return\"chan_reply_\".concat(t)}},{key:\"isClosed\",value:function(){return this.state===y}},{key:\"isErrored\",value:function(){return this.state===b}},{key:\"isJoined\",value:function(){return this.state===k}},{key:\"isJoining\",value:function(){return this.state===C}},{key:\"isLeaving\",value:function(){return this.state===x}}]),t}(),M={encode:function(t,e){var n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(n))},decode:function(t,e){var n=r(JSON.parse(t),5);return e({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})}},I=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||d.WebSocket||B,this.defaultEncoder=M.encode,this.defaultDecoder=M.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||\"arraybuffer\",this.transport!==B?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),f&&f.addEventListener&&f.addEventListener(\"unload\",(function(t){n.conn&&(n.unloaded=!0,n.abnormalClose(\"unloaded\"))})),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(t){return i.rejoinAfterMs?i.rejoinAfterMs(t):[1e3,2e3,5e3][t-1]||1e4},this.reconnectAfterMs=function(t){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(t):[10,50,100,150,200,250,500,1e3,2e3][t-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=P(i.params||{}),this.endPoint=\"\".concat(e,\"/\").concat(O),this.vsn=i.vsn||\"2.0.0\",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new N((function(){n.teardown((function(){return n.connect()}))}),this.reconnectAfterMs)}return l(t,[{key:\"protocol\",value:function(){return location.protocol.match(/^https/)?\"wss\":\"ws\"}},{key:\"endPointURL\",value:function(){var t=J.appendParams(J.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return\"/\"!==t.charAt(0)?t:\"/\"===t.charAt(1)?\"\".concat(this.protocol(),\":\").concat(t):\"\".concat(this.protocol(),\"://\").concat(location.host).concat(t)}},{key:\"disconnect\",value:function(t,e,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(t,e,n)}},{key:\"connect\",value:function(t){var e=this;t&&(console&&console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\"),this.params=P(t)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return e.onConnOpen()},this.conn.onerror=function(t){return e.onConnError(t)},this.conn.onmessage=function(t){return e.onConnMessage(t)},this.conn.onclose=function(t){return e.onConnClose(t)})}},{key:\"log\",value:function(t,e,n){this.logger(t,e,n)}},{key:\"hasLogger\",value:function(){return null!==this.logger}},{key:\"onOpen\",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.open.push([e,t]),e}},{key:\"onClose\",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.close.push([e,t]),e}},{key:\"onError\",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.error.push([e,t]),e}},{key:\"onMessage\",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.message.push([e,t]),e}},{key:\"onConnOpen\",value:function(){this.hasLogger()&&this.log(\"transport\",\"connected to \".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((function(t){return(0,r(t,2)[1])()}))}},{key:\"resetHeartbeat\",value:function(){var t=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return t.sendHeartbeat()}),this.heartbeatIntervalMs))}},{key:\"teardown\",value:function(t,e,n){var i=this;if(!this.conn)return t&&t();this.waitForBufferDone((function(){i.conn&&(e?i.conn.close(e,n||\"\"):i.conn.close()),i.waitForSocketClosed((function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),t&&t()}))}))}},{key:\"waitForBufferDone\",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5===n||!this.conn||this.conn.bufferedAmount&&0===this.conn.bufferedAmount?t():setTimeout((function(){e.waitForBufferDone(t,n+1)}),150*n)}},{key:\"waitForSocketClosed\",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.readyState!==g?setTimeout((function(){e.waitForSocketClosed(t,n+1)}),150*n):t()}},{key:\"onConnClose\",value:function(t){this.hasLogger()&&this.log(\"transport\",\"close\",t),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(e){return(0,r(e,2)[1])(t)}))}},{key:\"onConnError\",value:function(t){this.hasLogger()&&this.log(\"transport\",t),this.triggerChanError(),this.stateChangeCallbacks.error.forEach((function(e){return(0,r(e,2)[1])(t)}))}},{key:\"triggerChanError\",value:function(){this.channels.forEach((function(t){t.isErrored()||t.isLeaving()||t.isClosed()||t.trigger(w)}))}},{key:\"connectionState\",value:function(){switch(this.conn&&this.conn.readyState){case p:return\"connecting\";case v:return\"open\";case m:return\"closing\";default:return\"closed\"}}},{key:\"isConnected\",value:function(){return\"open\"===this.connectionState()}},{key:\"remove\",value:function(t){this.off(t.stateChangeRefs),this.channels=this.channels.filter((function(e){return e.joinRef()!==t.joinRef()}))}},{key:\"off\",value:function(t){for(var e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter((function(e){var n=r(e,1)[0];return-1===t.indexOf(n)}))}},{key:\"channel\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new L(t,e,this);return this.channels.push(n),n}},{key:\"push\",value:function(t){var e=this;if(this.hasLogger()){var n=t.topic,i=t.event,o=t.payload,r=t.ref,s=t.join_ref;this.log(\"push\",\"\".concat(n,\" \").concat(i,\" (\").concat(s,\", \").concat(r,\")\"),o)}this.isConnected()?this.encode(t,(function(t){return e.conn.send(t)})):this.sendBuffer.push((function(){return e.encode(t,(function(t){return e.conn.send(t)}))}))}},{key:\"makeRef\",value:function(){var t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}},{key:\"sendHeartbeat\",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log(\"transport\",\"heartbeat timeout. Attempting to re-establish connection\"),void this.abnormalClose(\"heartbeat timeout\");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:\"phoenix\",event:\"heartbeat\",payload:{},ref:this.pendingHeartbeatRef})}}},{key:\"abnormalClose\",value:function(t){this.closeWasClean=!1,this.conn.close(1e3,t)}},{key:\"flushSendBuffer\",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(t){return t()})),this.sendBuffer=[])}},{key:\"onConnMessage\",value:function(t){var e=this;this.decode(t.data,(function(t){var n=t.topic,i=t.event,o=t.payload,s=t.ref,a=t.join_ref;s&&s===e.pendingHeartbeatRef&&(e.pendingHeartbeatRef=null),e.hasLogger()&&e.log(\"receive\",\"\".concat(o.status||\"\",\" \").concat(n,\" \").concat(i,\" \").concat(s&&\"(\"+s+\")\"||\"\"),o);for(var c=0;c<e.channels.length;c++){var u=e.channels[c];u.isMember(n,i,o,a)&&u.trigger(i,o,s,a)}for(var l=0;l<e.stateChangeCallbacks.message.length;l++)(0,r(e.stateChangeCallbacks.message[l],2)[1])(t)}))}},{key:\"leaveOpenTopic\",value:function(t){var e=this.channels.find((function(e){return e.topic===t&&(e.isJoined()||e.isJoining())}));e&&(this.hasLogger()&&this.log(\"transport\",'leaving duplicate topic \"'.concat(t,'\"')),e.leave())}}]),t}(),B=function(){function t(e){c(this,t),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=p,this.poll()}return l(t,[{key:\"normalizeEndpoint\",value:function(t){return t.replace(\"ws://\",\"http://\").replace(\"wss://\",\"https://\").replace(new RegExp(\"(.*)/\"+O),\"$1/\"+T)}},{key:\"endpointURL\",value:function(){return J.appendParams(this.pollEndpoint,{token:this.token})}},{key:\"closeAndRetry\",value:function(){this.close(),this.readyState=p}},{key:\"ontimeout\",value:function(){this.onerror(\"timeout\"),this.closeAndRetry()}},{key:\"poll\",value:function(){var t=this;this.readyState!==v&&this.readyState!==p||J.request(\"GET\",this.endpointURL(),\"application/json\",null,this.timeout,this.ontimeout.bind(this),(function(e){if(e){var n=e.status,i=e.token,o=e.messages;t.token=i}else n=0;switch(n){case 200:o.forEach((function(e){return t.onmessage({data:e})})),t.poll();break;case 204:t.poll();break;case 410:t.readyState=v,t.onopen(),t.poll();break;case 403:t.onerror(),t.close();break;case 0:case 500:t.onerror(),t.closeAndRetry();break;default:throw new Error(\"unhandled poll status \".concat(n))}}))}},{key:\"send\",value:function(t){var e=this;J.request(\"POST\",this.endpointURL(),\"application/json\",t,this.timeout,this.onerror.bind(this,\"timeout\"),(function(t){t&&200===t.status||(e.onerror(t&&t.status),e.closeAndRetry())}))}},{key:\"close\",value:function(t,e){this.readyState=g,this.onclose()}}]),t}(),J=function(){function t(){c(this,t)}return l(t,null,[{key:\"request\",value:function(t,e,n,i,o,r,s){if(d.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,t,e,i,o,r,s)}else{var c=new d.XMLHttpRequest;this.xhrRequest(c,t,e,n,i,o,r,s)}}},{key:\"xdomainRequest\",value:function(t,e,n,i,o,r,s){var a=this;t.timeout=o,t.open(e,n),t.onload=function(){var e=a.parseJSON(t.responseText);s&&s(e)},r&&(t.ontimeout=r),t.onprogress=function(){},t.send(i)}},{key:\"xhrRequest\",value:function(t,e,n,i,o,r,s,a){var c=this;t.open(e,n,!0),t.timeout=r,t.setRequestHeader(\"Content-Type\",i),t.onerror=function(){a&&a(null)},t.onreadystatechange=function(){if(t.readyState===c.states.complete&&a){var e=c.parseJSON(t.responseText);a(e)}},s&&(t.ontimeout=s),t.send(o)}},{key:\"parseJSON\",value:function(t){if(!t||\"\"===t)return null;try{return JSON.parse(t)}catch(e){return console&&console.log(\"failed to parse JSON response\",t),null}}},{key:\"serialize\",value:function(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)){var r=e?\"\".concat(e,\"[\").concat(i,\"]\"):i,s=t[i];\"object\"===o(s)?n.push(this.serialize(s,r)):n.push(encodeURIComponent(r)+\"=\"+encodeURIComponent(s))}return n.join(\"&\")}},{key:\"appendParams\",value:function(t,e){if(0===Object.keys(e).length)return t;var n=t.match(/\\?/)?\"&\":\"?\";return\"\".concat(t).concat(n).concat(this.serialize(e))}}]),t}();J.states={complete:4};var $=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t);var o=i.events||{state:\"presence_state\",diff:\"presence_diff\"};this.state={},this.pendingDiffs=[],this.channel=e,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(o.state,(function(e){var i=n.caller,o=i.onJoin,r=i.onLeave,s=i.onSync;n.joinRef=n.channel.joinRef(),n.state=t.syncState(n.state,e,o,r),n.pendingDiffs.forEach((function(e){n.state=t.syncDiff(n.state,e,o,r)})),n.pendingDiffs=[],s()})),this.channel.on(o.diff,(function(e){var i=n.caller,o=i.onJoin,r=i.onLeave,s=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(e):(n.state=t.syncDiff(n.state,e,o,r),s())}))}return l(t,[{key:\"onJoin\",value:function(t){this.caller.onJoin=t}},{key:\"onLeave\",value:function(t){this.caller.onLeave=t}},{key:\"onSync\",value:function(t){this.caller.onSync=t}},{key:\"list\",value:function(e){return t.list(this.state,e)}},{key:\"inPendingSyncState\",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:\"syncState\",value:function(t,e,n,i){var o=this,r=this.clone(t),s={},a={};return this.map(r,(function(t,n){e[t]||(a[t]=n)})),this.map(e,(function(t,e){var n=r[t];if(n){var i=e.metas.map((function(t){return t.phx_ref})),c=n.metas.map((function(t){return t.phx_ref})),u=e.metas.filter((function(t){return c.indexOf(t.phx_ref)<0})),l=n.metas.filter((function(t){return i.indexOf(t.phx_ref)<0}));u.length>0&&(s[t]=e,s[t].metas=u),l.length>0&&(a[t]=o.clone(n),a[t].metas=l)}else s[t]=e})),this.syncDiff(r,{joins:s,leaves:a},n,i)}},{key:\"syncDiff\",value:function(t,e,n,o){var r=e.joins,s=e.leaves,a=this.clone(t);return n||(n=function(){}),o||(o=function(){}),this.map(r,(function(t,e){var o=a[t];if(a[t]=e,o){var r,s=a[t].metas.map((function(t){return t.phx_ref})),c=o.metas.filter((function(t){return s.indexOf(t.phx_ref)<0}));(r=a[t].metas).unshift.apply(r,i(c))}n(t,o,e)})),this.map(s,(function(t,e){var n=a[t];if(n){var i=e.metas.map((function(t){return t.phx_ref}));n.metas=n.metas.filter((function(t){return i.indexOf(t.phx_ref)<0})),o(t,n,e),0===n.metas.length&&delete a[t]}})),a}},{key:\"list\",value:function(t,e){return e||(e=function(t,e){return e}),this.map(t,(function(t,n){return e(t,n)}))}},{key:\"map\",value:function(t,e){return Object.getOwnPropertyNames(t).map((function(n){return e(n,t[n])}))}},{key:\"clone\",value:function(t){return JSON.parse(JSON.stringify(t))}}]),t}(),N=function(){function t(e,n){c(this,t),this.callback=e,this.timerCalc=n,this.timer=null,this.tries=0}return l(t,[{key:\"reset\",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:\"scheduleTimeout\",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.tries=t.tries+1,t.callback()}),this.timerCalc(this.tries+1))}}]),t}()}])}))},9911:function(t,e,n){\"use strict\";var i=n(\"23e7\"),o=n(\"857a\"),r=n(\"af03\");i({target:\"String\",proto:!0,forced:r(\"link\")},{link:function(t){return o(this,\"a\",\"href\",t)}})},\"99af\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),o=n(\"d039\"),r=n(\"e8b5\"),s=n(\"861d\"),a=n(\"7b0b\"),c=n(\"50c4\"),u=n(\"8418\"),l=n(\"65f0\"),h=n(\"1dde\"),f=n(\"b622\"),d=n(\"2d00\"),p=f(\"isConcatSpreadable\"),v=9007199254740991,m=\"Maximum allowed index exceeded\",g=d>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=h(\"concat\"),b=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},k=!g||!y;i({target:\"Array\",proto:!0,forced:k},{concat:function(t){var e,n,i,o,r,s=a(this),h=l(s,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?s:arguments[e],b(r)){if(o=c(r.length),f+o>v)throw TypeError(m);for(n=0;n<o;n++,f++)n in r&&u(h,f,r[n])}else{if(f>=v)throw TypeError(m);u(h,f++,r)}return h.length=f,h}})},a15b:function(t,e,n){\"use strict\";var i=n(\"23e7\"),o=n(\"44ad\"),r=n(\"fc6a\"),s=n(\"a640\"),a=[].join,c=o!=Object,u=s(\"join\",\",\");i({target:\"Array\",proto:!0,forced:c||!u},{join:function(t){return a.call(r(this),void 0===t?\",\":t)}})},a640:function(t,e,n){\"use strict\";var i=n(\"d039\");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},af03:function(t,e,n){var i=n(\"d039\");t.exports=function(t){return i((function(){var e=\"\"[t]('\"');return e!==e.toLowerCase()||e.split('\"').length>3}))}},b0c0:function(t,e,n){var i=n(\"83ab\"),o=n(\"9bf2\").f,r=Function.prototype,s=r.toString,a=/^\\s*function ([^ (]*)/,c=\"name\";i&&!(c in r)&&o(r,c,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return\"\"}}})},b56f:function(t,e,n){},b5df:function(t,e,n){},bb6a:function(t,e,n){},c6e3:function(t,e,n){\"use strict\";var i=n(\"b56f\"),o=n.n(i);o.a},e8b5:function(t,e,n){var i=n(\"c6b6\");t.exports=Array.isArray||function(t){return\"Array\"==i(t)}}}]);","extractedComments":[]}