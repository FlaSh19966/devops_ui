{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3ddf11ba\"],{\"0271\":function(t,e,a){},\"4ce8\":function(t,e,a){},5805:function(t,e,a){\"use strict\";var s=a(\"0271\"),i=a.n(s);i.a},7047:function(t,e,a){},\"7fdc\":function(t,e,a){\"use strict\";var s=a(\"7047\"),i=a.n(s);i.a},\"92fa\":function(t,e){var a=/^(attrs|props|on|nativeOn|class|style|hook)$/;function s(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var i,r,o,n,c;for(o in e)if(i=t[o],r=e[o],i&&a.test(o))if(\"class\"===o&&(\"string\"===typeof i&&(c=i,t[o]=i={},i[c]=!0),\"string\"===typeof r&&(c=r,e[o]=r={},r[c]=!0)),\"on\"===o||\"nativeOn\"===o||\"hook\"===o)for(n in r)i[n]=s(i[n],r[n]);else if(Array.isArray(i))t[o]=i.concat(r);else if(Array.isArray(r))t[o]=[i].concat(r);else for(n in r)i[n]=r[n];else t[o]=e[o];return t}),{})}},c2b2:function(t,e,a){\"use strict\";var s=a(\"4ce8\"),i=a.n(s);i.a},d2ab:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.spinnerOn,expression:\"spinnerOn\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),a(\"div\",{staticClass:\"dash-cont\"},[a(\"div\",{staticClass:\"container-fluid\"},[a(\"div\",{staticClass:\"card dash-card\"},[a(\"div\",{staticClass:\"card-header d-block d-sm-flex flex-wrap justify-content-between\"},[a(\"h4\",{staticClass:\"mb-sm-0\"},[t._v(t._s(t.tlt(\"chat_history_heading\")))]),a(\"div\",{staticClass:\"card-act d-flex\"},[a(\"div\",{staticClass:\"form-group mb-0\"},[a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.filter_chat_history,expression:\"filter_chat_history\"}],staticClass:\"form-control\",attrs:{id:\"exampleFormControlSelect1\"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e=\"_value\"in t?t._value:t.value;return e}));t.filter_chat_history=e.target.multiple?a:a[0]},t.load_task_responses]}},[a(\"option\",{attrs:{value:\"Last 7 days\"}},[t._v(t._s(t.tlt(\"chat_history_last_7\")))]),a(\"option\",{attrs:{value:\"Last 30 days\"}},[t._v(t._s(t.tlt(\"chat_history_last_30\")))]),a(\"option\",{attrs:{value:\"Last 3 months\"}},[t._v(t._s(t.tlt(\"chat_history_3_month\")))]),a(\"option\",{attrs:{value:\"Last 9 months\"}},[t._v(t._s(t.tlt(\"chat_history_9_month\")))]),a(\"option\",{attrs:{value:\"Last 12 months\"}},[t._v(t._s(t.tlt(\"chat_history_12_month\")))]),a(\"option\",{attrs:{value:\"All\"}},[t._v(t._s(t.tlt(\"chat_history_all_option\")))])])])])]),a(\"div\",{staticClass:\"card-body\"},[a(\"ul\",{staticClass:\"nav nav-tabs mb-3\",attrs:{id:\"myTab\",role:\"tablist\"}},[a(\"li\",{staticClass:\"nav-item\"},[a(\"a\",{staticClass:\"nav-link pl-5 pr-5\",attrs:{id:\"portal_user-tab\",\"data-toggle\":\"tab\",href:\"#portal_user\",role:\"tab\",\"aria-controls\":\"portal_user\"},on:{click:function(e){t.view_component_name=\"portal_user\"}}},[t._v(t._s(t.tlt(\"chat_history_portal_user\")))])]),a(\"li\",{staticClass:\"nav-item\"},[a(\"a\",{staticClass:\"nav-link pl-5 pr-5\",attrs:{id:\"bot_user-tab\",\"data-toggle\":\"tab\",href:\"#bot_user\",role:\"tab\",\"aria-controls\":\"bot_user\"},on:{click:function(e){t.view_component_name=\"bot_user\"}}},[t._v(t._s(t.tlt(\"chat_history_bot_user\")))])]),a(\"li\",{staticClass:\"nav-item\"},[a(\"a\",{staticClass:\"nav-link pl-5 pr-5\",attrs:{id:\"bot_user-tab\",\"data-toggle\":\"tab\",href:\"#live_user\",role:\"tab\",\"aria-controls\":\"bot_user\"},on:{click:function(e){t.view_component_name=\"agent_user\"}}},[t._v(\"Live Chat\")])])]),a(\"div\",{staticClass:\"tab-content\",attrs:{id:\"myTabContent\"}},[a(\"div\",{staticClass:\"tab-pane fade\",attrs:{id:\"portal_user\",role:\"tabpanel\",\"aria-labelledby\":\"portal_user-tab\"}},[\"portal_user\"===t.view_component_name?[a(\"portal-user-chat-history\")]:t._e()],2),a(\"div\",{staticClass:\"tab-pane fade\",attrs:{id:\"bot_user\",role:\"tabpanel\",\"aria-labelledby\":\"bot_user-tab\"}},[\"bot_user\"===t.view_component_name?[a(\"bot-user-chat-history\")]:t._e()],2),a(\"div\",{staticClass:\"tab-pane fade\",attrs:{id:\"live_user\",role:\"tabpanel\",\"aria-labelledby\":\"bot_user-tab\"}},[\"agent_user\"===t.view_component_name?[a(\"live-chat-history\")]:t._e()],2)])])])])])])},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"table-box\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show_loader,expression:\"show_loader\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),\"general_chat_history\"!=t.selected?a(\"div\",{staticClass:\"table-responsive\",staticStyle:{\"min-height\":\"349px\"}},[a(\"table\",{staticClass:\"table\"},[t._m(0),t._l(t.user_action_stats,(function(e,s){return a(\"tr\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.show_loader,expression:\"!show_loader\"}],key:s},[\"Bot User\"!=e.username&&\"\"!=e.username&&Boolean(e.username)?[a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\" \"+t._s(e.username)+\" \")]),a(\"td\",t._l(e.action_list,(function(e,i){return a(\"tr\",{key:i},[a(\"td\",{staticStyle:{width:\"50%\",\"text-align\":\"center\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\",\"data-toggle\":\"modal\",\"data-target\":\"#conversation_model\"},on:{click:function(e){return t.chat_conversation(s,i)}}},[t._v(t._s(e.name))])])])})),0),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},t._l(e.action_list,(function(e,s){return a(\"tr\",{key:s},[a(\"td\",{staticStyle:{width:\"10%\"}},[t._v(t._s(e.date))])])})),0),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},t._l(e.action_list,(function(e,s){return a(\"tr\",{key:s},[a(\"td\",{staticStyle:{width:\"10%\"}},[t._v(t._s(e.time))])])})),0)]:t._e()],2)}))],2)]):t._e(),\"general_chat_history\"==t.selected?a(\"div\",{staticClass:\"table-responsive\",staticStyle:{\"min-height\":\"349px\"}},[a(\"table\",{staticClass:\"table\"},[a(\"thead\",[a(\"tr\",[a(\"th\",{staticStyle:{width:\"30%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"portal_user_unique_id\"))+\" \")]),a(\"th\",{staticStyle:{width:\"30%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"portal_user_interacted\"))+\" \")]),a(\"th\",{staticStyle:{width:\"40%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"portal_user_view_chat\"))+\" \")])])]),t._l(t.user_action_stats,(function(e,s){return a(\"tr\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.show_loader,expression:\"!show_loader\"}],key:s},[[a(\"td\",{staticClass:\"text-center\"},[t._v(t._s(e.useremail))]),a(\"td\",{staticClass:\"text-center\"},[t._v(\" \"+t._s(t.format_date_in_local_timezone(e.date))+\" \")]),a(\"td\",{staticStyle:{width:\"50%\",\"text-align\":\"center\"}},[a(\"a\",{staticStyle:{\"text-align\":\"center\"},attrs:{href:\"javascript:void(0)\",\"data-toggle\":\"modal\",\"data-target\":\"#conversation_model1\"},on:{click:function(e){return t.chat_date(s)}}},[t._v(t._s(t.tlt(\"view_chat_label\")))])])]],2)}))],2)]):t._e(),a(\"div\",{staticClass:\"pagin-table\",staticStyle:{\"margin-top\":\"2%\"}},[a(\"nav\",{attrs:{\"aria-label\":\"Page navigation example\"}},[a(\"ul\",{staticClass:\"pagination justify-content-center\"},[a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){return t.page_require(t.page_no-1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-left\",transform:\"translate(105.806 15.204) rotate(180)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])]),t._l(t.page_array,(function(e){return a(\"li\",{key:e,class:\"page-item \"+t.pagination_class(e)},[\"...s\"==e||\"...l\"==e?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return t.page_require(e)}}},[t._v(\"...\")]):t._e(),\"...s\"!=e&&\"...l\"!=e?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(a){return t.page_require(e)}}},[t._v(t._s(e))]):t._e()])})),a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){return t.page_require(t.page_no+1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-right\",transform:\"translate(-97.139 0)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])])],2)])]),\"general_chat_history\"!=t.selected?a(\"div\",{staticClass:\"modal fade dash-modal\",staticStyle:{\"margin-left\":\"-1%\"},attrs:{id:\"conversation_model\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"conversation_model\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t._m(1),a(\"h3\",[t._v(t._s(t.tlt(\"chat_history_header\")))])]),t._m(2),a(\"div\",t._l(t.user_reply,(function(e,s){return a(\"div\",{key:s},[a(\"span\",{staticClass:\"d-flex\"},[a(\"h5\",[t._v(t._s(t.current_user)+\": \")]),a(\"p\",[t._v(t._s(e))])]),a(\"span\",{staticStyle:{display:\"flex\"}},[a(\"h5\",[t._v(\"Bot: \")]),a(\"p\",[t._v(t._s(t.bot_reply[s]))])])])})),0)])])])]):t._e(),\"general_chat_history\"==t.selected?a(\"div\",{staticClass:\"modal fade dash-modal\",staticStyle:{\"margin-left\":\"-1%\"},attrs:{id:\"conversation_model1\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"conversation_model1\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",staticStyle:{\"max-width\":\"60%\"},attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t._m(3),a(\"h3\",[t._v(t._s(t.tlt(\"chat_history_header\")))])]),t._m(4),a(\"div\",[a(\"div\",{staticClass:\"form-group\"},[a(\"label\",[t._v(t._s(t.tlt(\"time_range_label\")))]),a(\"multiselect\",{attrs:{id:\"select_coversation_date\",options:t.chat_dates,searchable:!0,\"close-on-select\":!0,\"show-labels\":!1,\"allow-empty\":!1,placeholder:t.tlt(\"select_time\"),\"disabled-selected\":!1,\"hide-selected\":!1,\"max-height\":200},on:{input:t.chat_conversation},model:{value:t.selected_date,callback:function(e){t.selected_date=e},expression:\"selected_date\"}},[a(\"span\",[t._v(t._s(t.selected_date))])]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.chatDetails.length,expression:\"chatDetails.length == 0\"}]},[a(\"content-loader\",{attrs:{viewBox:\"0 0 180 360\",speed:5,primaryColor:\"#f3f3f3\",secondaryColor:\"#ecebeb\"}},[a(\"rect\",{attrs:{x:\"40\",y:\"3\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"3\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"23\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"23\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"45\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"45\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"66\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"66\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"88\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"88 \",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"108\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"108\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}})])],1)],1),a(\"p\"),t._l(t.chatDetails,(function(e,s){return a(\"div\",{key:s,staticStyle:{\"text-align\":\"justify\"}},[\"\"!=e.UserQuery?a(\"span\",{staticClass:\"py-0 my-0\",staticStyle:{display:\"flex\",height:\"0%\"}},[a(\"h5\",{staticClass:\"py-0 mt-2 mb-0\",staticStyle:{float:\"left\",width:\"3%\",height:\"0%\"}},[t._v(\" Q: \")]),a(\"p\",{staticClass:\"py-0 mb-0\",staticStyle:{\"word-break\":\"break-all\",\"margin-top\":\"11px\"}},[t._v(\" \"+t._s(e.UserQuery)+\" \")])]):t._e(),\"\"!=e.UserQuery||t.checkintent(s)?a(\"div\",t._l(e.BOTResponse,(function(s,i){return a(\"span\",{key:i,style:t.check_bot_offers(e.BOTResponse)},[void 0!=s.img||void 0!=s.text||void 0!=s.products||void 0!=s.offers||\"utter_default\"==s.template||void 0!=s.contact_us_email||void 0!=s.contact_us_phone_number||void 0!=s.buttons?a(\"h5\",{staticClass:\"py-0 mt-0 mb-0\",staticStyle:{float:\"left\",width:\"3%\"}},[t._v(\" A: \")]):t._e(),!0===Boolean(s.buttons)&&\"\"==s.text?a(\"div\",{staticStyle:{width:\"max-content\"}},[!0===Boolean(s.buttons)&&s.buttons.length>0&&\"\"==s.text?a(\"strong\",{staticStyle:{color:\"dimgray\"}},[t._v(\" Options :\")]):t._e(),t._l(s.buttons,(function(e,s){return a(\"span\",{key:s,staticStyle:{border:\"1px solid #cccccc\",cursor:\"default\",padding:\"2px\",\"margin-right\":\"5px\",background:\"#f2f2f2\",\"border-radius\":\"5px\"}},[a(\"span\",{staticClass:\"p-0 mb-1\"},[t._v(\" \"+t._s(e.title))])])}))],2):t._e(),void 0!=s.contact_us_email?a(\"p\",{staticStyle:{\"margin-top\":\"2px\",\"margin-bottom\":\"0px\",width:\"100%\"},domProps:{innerHTML:t._s(t.messaging_platform_formating(s.contact_us_email)+t.messaging_platform_formating_number(s.contact_us_phone_number))}}):t._e(),void 0!=s.message?a(\"p\",{staticStyle:{\"margin-top\":\"2px\",\"margin-bottom\":\"0px\",width:\"100%\"},domProps:{innerHTML:t._s(t.confusion_message_formating(s.message))}}):t._e(),a(\"div\",[void 0!=s.text&&\"\"!=s.text?a(\"p\",{staticStyle:{\"margin-top\":\"2px\",\"margin-bottom\":\"0px\",width:\"100%\"},domProps:{innerHTML:t._s(s.text)}}):t._e(),void 0!=s.video&&\"\"!=s.video?a(\"span\",[a(\"a\",{attrs:{href:s.video,target:\"blank\"}},[t._v(\"Attach Video\")])]):t._e()]),t._l(s.offers,(function(e,i){return a(\"div\",{key:i,staticClass:\"pb-0\",staticStyle:{width:\"100%\",\"margin-bottom\":\"0px\",\"padding-left\":\"1.7rem\"}},[void 0!=s.offers?a(\"span\",{domProps:{innerHTML:t._s(e.offer)}}):t._e()])})),void 0!=s.img&&\"\"!=s.img?a(\"div\",{staticStyle:{float:\"left\",width:\"100%\"}},[a(\"img\",{attrs:{src:s.img}})]):t._e(),void 0!=s.image&&\"\"!=s.image?a(\"div\",{staticStyle:{height:\"140px\",width:\"140px\",position:\"relative\"}},[a(\"img\",{staticStyle:{position:\"absolute\",height:\"inherit\"},attrs:{src:s.image}})]):t._e(),void 0!=s.products?a(\"div\",{staticClass:\"buy-products\",staticStyle:{display:\"flex\",overflow:\"auto hidden\",float:\"left\",width:\"100%\"},on:{mousewheel:t.scroll_div}},t._l(t.product_variation(s.products.products_list),(function(e,s){return a(\"div\",{key:s,staticClass:\"image-container\"},[null!=e.img_url?a(\"img\",{staticClass:\"center-block p-0 m-0\",staticStyle:{height:\"140px\",width:\"140px\"},attrs:{src:t.check_image_type(e.img_url)}}):a(\"img\",{staticClass:\"image-product-blank\",staticStyle:{height:\"140px\",width:\"140px\",border:\"1px solid\"},attrs:{src:\"/img/blank_product_image.png\",alt:\"No Product Image\"}}),a(\"p\",{staticClass:\"p-0 mb-1\"},[t._v(t._s(e.title))]),a(\"p\",{staticClass:\"p-0 mb-1\"},[t._v(t._s(e.price))])])})),0):t._e(),void 0!=s.card?a(\"div\",{staticClass:\"main-card-container\",on:{mousewheel:t.scroll_card_div}},t._l(s.card,(function(e,s){return a(\"div\",{key:s,staticClass:\"card-container\"},[1==e.is_image?a(\"span\",[\"\"!=e.image?a(\"img\",{staticClass:\"center-block p-0 m-0 carousel-card-img\",attrs:{src:t.check_image_type(e.image)}}):a(\"img\",{staticClass:\"image-product-blank image-box-card\",attrs:{src:\"/img/blank_product_image.png\",alt:\"No Product Image\"}})]):a(\"span\",[a(\"video\",{attrs:{width:\"200\",height:\"160\",controls:\"\"}},[\"\"!=e.video?a(\"source\",{staticClass:\"center-block p-0 m-0\",attrs:{src:e.video,type:\"video/mp4\",allow:\"autoplay\",accept:\"video/mp4,video/x-m4v,video/*\"}}):t._e(),t._v(\" \"+t._s(t.tlt(\"video_tag_msg\"))+\" \")])]),a(\"h6\",{staticClass:\"p-0 my-1 ml-1\"},[t._v(\" \"+t._s(e.title)+\" \")]),a(\"p\",{staticClass:\"p-0 mb-1 ml-1\",staticStyle:{width:\"180px\",\"text-align\":\"left\",\"font-size\":\"15px\"},attrs:{title:e.text.length>100?e.text:\"\"}},[t._v(\" \"+t._s(t.trim_card_description(e.text))+\" \")]),!0===Boolean(e.buttons)&&e.buttons.length>0?a(\"div\",{staticClass:\"card-button\",staticStyle:{\"margin-left\":\"5px\",\"margin-bottom\":\"5px\"}},t._l(e.buttons,(function(e,s){return a(\"span\",{key:s,staticStyle:{cursor:\"default\",\"margin-right\":\"5px\"}},[\"\"!=e.title&&\"\"!=e.value?a(\"span\",{staticClass:\"p-0 mb-1 carousel-btn\"},[t._v(\" \"+t._s(e.title)+\" \")]):a(\"span\")])})),0):t._e()])})),0):t._e()],2)})),0):t._e()])}))],2)])])])]):t._e()])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"thead\",[a(\"tr\",[a(\"th\",{staticStyle:{width:\"25%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" USER NAME \")]),a(\"th\",{staticStyle:{width:\"20%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" NAME OF TASK \")]),a(\"th\",{staticStyle:{width:\"20%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" LAST INTERACTED ON \")]),a(\"th\",{staticStyle:{width:\"20%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" TIME \")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/user-blue.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/user-blue.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])}],n=(a(\"4de4\"),a(\"a15b\"),a(\"d3b7\"),a(\"ac1f\"),a(\"25f0\"),a(\"1276\"),a(\"ade3\")),c=a(\"bc3a\"),l=a.n(c),_=a(\"ea54\"),h=a.n(_),d=a(\"8e5f\"),p=a.n(d),u=a(\"c1df\"),m=a.n(u),g=a(\"92fa\"),y=a.n(g),f=function(){return Math.random().toString(36).substring(2)},v={name:\"ContentLoader\",functional:!0,props:{width:{type:[Number,String],default:400},height:{type:[Number,String],default:130},speed:{type:Number,default:2},preserveAspectRatio:{type:String,default:\"xMidYMid meet\"},baseUrl:{type:String,default:\"\"},primaryColor:{type:String,default:\"#f9f9f9\"},secondaryColor:{type:String,default:\"#ecebeb\"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},render:function(t,e){var a=e.props,s=e.data,i=e.children,r=a.uniqueKey?a.uniqueKey+\"-idClip\":f(),o=a.uniqueKey?a.uniqueKey+\"-idGradient\":f();return t(\"svg\",y()([s,{attrs:{viewBox:\"0 0 \"+a.width+\" \"+a.height,version:\"1.1\",preserveAspectRatio:a.preserveAspectRatio}}]),[t(\"rect\",{style:{fill:\"url(\"+a.baseUrl+\"#\"+o+\")\"},attrs:{\"clip-path\":\"url(\"+a.baseUrl+\"#\"+r+\")\",x:\"0\",y:\"0\",width:a.width,height:a.height}}),t(\"defs\",[t(\"clipPath\",{attrs:{id:r}},[i||t(\"rect\",{attrs:{x:\"0\",y:\"0\",rx:\"5\",ry:\"5\",width:a.width,height:a.height}})]),t(\"linearGradient\",{attrs:{id:o}},[t(\"stop\",{attrs:{offset:\"0%\",\"stop-color\":a.primaryColor,\"stop-opacity\":a.primaryOpacity}},[a.animate?t(\"animate\",{attrs:{attributeName:\"offset\",values:\"-2; 1\",dur:a.speed+\"s\",repeatCount:\"indefinite\"}}):null]),t(\"stop\",{attrs:{offset:\"50%\",\"stop-color\":a.secondaryColor,\"stop-opacity\":a.secondaryOpacity}},[a.animate?t(\"animate\",{attrs:{attributeName:\"offset\",values:\"-1.5; 1.5\",dur:a.speed+\"s\",repeatCount:\"indefinite\"}}):null]),t(\"stop\",{attrs:{offset:\"100%\",\"stop-color\":a.primaryColor,\"stop-opacity\":a.primaryOpacity}},[a.animate?t(\"animate\",{attrs:{attributeName:\"offset\",values:\"-1; 2\",dur:a.speed+\"s\",repeatCount:\"indefinite\"}}):null])])])])}},b=a(\"3d20\"),w=a.n(b),x={components:{Multiselect:p.a,ContentLoader:v},data:function(){return{number_of_rows:\"\",total_pages:0,page_no:1,per_page:15,user_list:[],user_reply:[],bot_reply:[],chatDetails:[],action_stats:[],user_action_stats:[],current_user:\"\",timestamp:\"\",sender_id:[],selected:\"general_chat_history\",selected_date:\"\",selected_index:null,chat_dates:[],companyname:this.$session.get(\"UserInformation\").company_name,companyid:this.$session.get(\"UserInformation\").company_id,issearch:!1,searchstring:\"\",spinnerOn:!1,view_component_name:\"portal_user\",fingerprintregex:/^[0-9-+\\/\\s]{9,}$/,page_array:[],show_loader:!1,is_portal_user:!0,contact_help_email:null,retail_web_framework:this.$session.get(\"retail_web_framework\"),filter_chat_history:this.$session.get(\"filter_chat_history\")}},mounted:function(){var t=this;this.retail_web_framework=this.$session.get(\"retail_web_framework\"),$(\"#selectall\").click((function(){$(this).is(\":checked\")?$(\"input:checkbox\").prop(\"checked\",!0):$(\"input:checkbox\").prop(\"checked\",!1)})),this.$root.$on(\"search_portal_user_chat_history\",(function(e){t.searchstring=e,t.search_chat()})),this.$root.$on(\"load_portal_user_chat_history\",(function(e){t.load_portal_user_chat_history()}))},beforeDestroy:function(){this.$root.$off(\"search_portal_user_chat_history\"),this.$root.$off(\"load_portal_user_chat_history\")},created:function(){this.load_product_settings(),this.load_portal_user_chat_history()},methods:{format_date_in_local_timezone:function(t){var e=m.a.utc(t),a=m()(e).local().toDate();return a=m()(a).format(\"ddd MMM D YYYY\"),a.toString()},messaging_platform_formating:function(t){return\"Please feel free to reachout to us at :\"+t},messaging_platform_formating_number:function(t){return null!=t?\" or call us at :\"+t:\"\"},confusion_message_formating:function(t){return t.split(\"{email}\").join(this.contact_help_email)},load_product_settings:function(){var t=this;this.show_loader=!0,l.a.post(h.a.product_settings(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,is_get:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){var a=t.retail_web_framework;e.data.message.MSG_CODE===t.api_status_code.NO_DATA_AVAILABLE.MSG_CODE?w()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"info\",toast:!0,timer:2500}):e.data.message.MSG_CODE===t.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE?w()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\"}):e.data.message.MSG_CODE===t.api_status_code.DATA_AVAILABLE.MSG_CODE?t.contact_help_email=a?e.data.data[a+\"_details\"].contact_help_email:e.data.data.details.contact_help_email:w()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!0,type:\"error\"})})).catch((function(e){t.show_loader=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},check_image_type:function(t){return\"string\"==typeof t?t:null!=t?t.src:\"\"},load_portal_user_chat_history:function(){var t=this;this.page_no=1,this.checked_list=[],this.searchstring=\"\",this.action_stats=[],this.user_action_stats=[],this.show_loader=!0,l.a.post(h.a.action_stats_url(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){t.api_status_code.COMPANY_ACTION_STATS.MSG_CODE==e.data.message.MSG_CODE?(t.action_stats=e.data.data.action_stats,t.action_stats.push({Hits:1,Name:\"general_chat_history\"})):w()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:2500})})).catch((function(e){t.show_loader=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})),this.show_loader=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,is_portal_user:!0,action:\"general_chat_history\",filter_chat_history:this.$session.get(\"filter_chat_history\"),pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(t.show_loader=!1,t.user_action_stats=[],t.api_status_code.DATA_AVAILABLE.MSG_CODE==e.data.message.MSG_CODE)for(var a=0;a<e.data.data.chatHistory.length;a++)t.fingerprintregex.test(e.data.data.chatHistory[a]._id.User)?t.user_action_stats.push({useremail:e.data.data.chatHistory[a].Email,userphonenumber:e.data.data.chatHistory[a].PhoneNumber,username:e.data.data.chatHistory[a].UserName,userid:e.data.data.chatHistory[a]._id.User,date:e.data.data.chatHistory[a].Date}):t.user_action_stats.push({useremail:e.data.data.chatHistory[a]._id.User,userphonenumber:e.data.data.chatHistory[a].PhoneNumber,username:e.data.data.chatHistory[a].UserName,userid:e.data.data.chatHistory[a]._id.User,date:e.data.data.chatHistory[a].Date});else t.api_status_code.NO_DATA_AVAILABLE.MSG_CODE==e.data.message.MSG_CODE?w()({text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,toast:!0,position:\"top-end\",type:\"info\",timer:2500}):w()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:3e3});t.number_of_rows=void 0==e.data.pagination.total_data?0:e.data.pagination.total_data,t.total_pages=void 0==e.data.pagination.total_page?0:e.data.pagination.total_page,t.setpagination(t.page_no)})).catch((function(e){console.log(e),410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data),t.show_loader=!1}))},page_require:function(t){var e=this;\"general_chat_history\"!=this.selected?0==t||t==this.total_pages+1||(\"...s\"==page?this.page_no=Math.ceil((1+this.page_no)/2):\"...l\"==page?this.page_no=Math.ceil((this.total_pages+this.page_no)/2):this.page_no=page,l.a.post(h.a.action_usage_stats_url(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,action:this.selected,page_no:this.page_no,per_page:this.per_page},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):0==t||t==this.total_pages+1||(this.page_no=\"...s\"==t?Math.ceil((1+this.page_no)/2):\"...l\"==t?Math.ceil((this.total_pages+this.page_no)/2):t,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),Object(n[\"a\"])({company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,is_portal_user:!0,action:this.selected,filter_chat_history:this.$session.get(\"filter_chat_history\"),pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},\"is_portal_user\",!0),{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,e.user_action_stats=[];for(var a=0;a<t.data.data.chatHistory.length;a++)e.fingerprintregex.test(t.data.data.chatHistory[a]._id.User)?e.user_action_stats.push({useremail:t.data.data.chatHistory[a].Email,userphonenumber:t.data.data.chatHistory[a].PhoneNumber,username:t.data.data.chatHistory[a].UserName,userid:t.data.data.chatHistory[a]._id.User,date:t.data.data.chatHistory[a].Date}):e.user_action_stats.push({useremail:t.data.data.chatHistory[a]._id.User,userphonenumber:t.data.data.chatHistory[a].PhoneNumber,username:t.data.data.chatHistory[a].UserName,userid:t.data.data.chatHistory[a]._id.User,date:t.data.data.chatHistory[a].Date});e.total_pages=t.data.pagination.total_page,e.setpagination(e.page_no)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)})))},pagination_class:function(t){return t==this.page_no?\" active\":\"\"},setpagination:function(t){if(this.page_array=[],this.total_pages<=7)for(var e=0;e<this.total_pages;e++)this.page_array.push(e+1);else if(1==t){for(var a=0;a<4;a++)this.page_array.push(a+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(t==this.total_pages){this.page_array.push(1),this.page_array.push(\"...s\");for(var s=this.total_pages-4;s<this.total_pages;s++)this.page_array.push(s+1)}else if(t<=4){for(var i=0;i<t+3;i++)this.page_array.push(i+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(t>=this.total_pages-4){this.page_array.push(1),this.page_array.push(\"...s\");for(var r=t-4;r<this.total_pages;r++)this.page_array.push(r+1)}else{this.page_array.push(1),this.page_array.push(\"...s\");for(var o=t-3;o<=t+3;o++)this.page_array.push(o);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}},scroll_div:function(){var t=document.querySelector(\".buy-products\");event.deltaX>event.deltaY?t.scrollLeft+=10:event.deltaX<event.deltaY&&(t.scrollLeft-=10)},scroll_card_div:function(){var t=document.querySelector(\".main-card-container\");event.deltaX>event.deltaY?t.scrollLeft+=10:event.deltaX<event.deltaY&&(t.scrollLeft-=10)},checkintent:function(t){return void 0!=this.chatDetails[t-1]&&void 0!=this.chatDetails[t-1].BOTResponse[0]&&void 0!=this.chatDetails[t-1].BOTResponse[0].intent},chat_date:function(t){var e=this;this.chatDetails=[],this.sender_id=this.user_action_stats[t].userid,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,username:this.sender_id,isshowdates:!0,issearch:this.issearch,is_portal_user:!0,searchstring:this.searchstring},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(a){e.spinnerOn=!1,e.api_status_code.DATA_AVAILABLE.MSG_CODE==a.data.message.MSG_CODE?(e.chat_dates=a.data.data.Dates,e.selected_date=a.data.data.Dates[a.data.data.Dates.length-1],e.chat_dates.reverse(),e.selected_index=t,e.chat_conversation(t)):e.api_status_code.NO_DATA_AVAILABLE.MSG_CODE==a.data.message.MSG_CODE?w()({title:a.data.message.MSG_CODE,text:a.data.message.MSG,toast:!0,showCancelButton:!1,showConfirmButton:!1,type:\"info\",timer:2500}):w()({title:a.data.message.MSG_CODE,text:a.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:2500})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},chat_conversation:function(t,e){var a=this;\"general_chat_history\"!=this.selected?(this.sender_id=this.user_action_stats[t].userid,this.spinnerOn=!0,l.a.post(h.a.conversation_stats_url(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,sender_id:this.user_action_stats[t].sender_id,action_timestamp:this.user_action_stats[t].action_list[e].timestamp},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(a.spinnerOn=!1,a.user_reply=[],a.bot_reply=[],null!=t.data){for(var e in a.current_user=t.data.data.user_conversations.username,t.data.data.user_conversations.interactions)void 0!=t.data.data.user_conversations.interactions[e].user?a.user_reply.push(t.data.data.user_conversations.interactions[e].user):void 0!=t.data.user_conversations.interactions[e].bot&&a.bot_reply.push(t.data.data.user_conversations.interactions[e].bot);$(\"#conversation_model1 :input\").prop(\"disabled\",!0)}else toastr.error(a.tlt(\"portal_user_no_chats_msg\")),$(\"#conversation_model1\").modal(\"hide\");$(\"#conversation_model1 :input\").prop(\"disabled\",!0)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||a.$root.$emit(\"Session_Expired\",t.response.data)}))):(this.chatDetails=[],this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,username:this.sender_id,isshowchatdetails:!0,date:this.selected_date,issearch:this.issearch,is_portal_user:!0,searchstring:this.searchstring},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(a.spinnerOn=!1,a.user_reply=[],a.bot_reply=[],a.api_status_code.DATA_AVAILABLE.MSG_CODE==t.data.message.MSG_CODE){a.current_user=a.user_action_stats[a.selected_index].useremail,a.chatDetails=t.data.data.chatDetails;for(var e=null,s=0;s<a.chatDetails.length;s++){for(var i=0;i<a.chatDetails[s].BOTResponse.length;i++)1==a.chatDetails[s].BOTResponse[i].shopify_fetch_customer_id&&null==a.chatDetails[s].BOTResponse[i].text&&\"Promotional offers\"===a.chatDetails[s].UserQuery&&(e=s);null!=e&&delete a.chatDetails[e],e=null}var r=a.chatDetails.filter((function(t){return t}));a.chatDetails=r}else a.api_status_code.NO_DATA_AVAILABLE.MSG_CODE==t.data.message.MSG_CODE?w()({title:t.data.message.MSG_CODE,text:t.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"info\",timer:2500}):w()({title:t.data.message.MSG_CODE,text:t.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:2500})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||a.$root.$emit(\"Session_Expired\",t.response.data)})))},product_variation:function(t){for(var e in t)t[e].order_qty=1,t[e].buy_qty=1,t[e].variations&&t[e].variations.length>0&&(t[e].id=t[e].variations[0].id,t[e].img_url=null===t[e].variations[0].img_url?t[e].img_url:t[e].variations[0].img_url||t[e].variations[0].image,t[e].permalink=t[e].variations[0].permalink,t[e].variant_title=t[e].variations[0].variant_title,t[e].stock_quantity=t[e].variations[0].stock_quantity,t[e].stock_status=t[e].variations[0].stock_status,t[e].price=t[e].variations[0].price,t[e].regular_price=t[e].variations[0].regular_price);return t},search_chat:function(){var t,e=this;\"\"!=this.searchstring?(this.page_no=1,this.issearch=!0,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),(t={company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,is_portal_user:!0,action:\"general_chat_history\",pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},Object(n[\"a\"])(t,\"is_portal_user\",!0),Object(n[\"a\"])(t,\"searchstring\",this.searchstring),t),{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(e.spinnerOn=!1,e.user_action_stats=[],\"No Results Found\"!=t.data.MSG&&\"Internal Server Error\"!=t.data.MSG){for(var a=0;a<t.data.data.chatHistory.length;a++)e.user_action_stats.push({username:t.data.data.chatHistory[a]});e.total_pages=t.data.pagination.total_page,e.setpagination(e.page_no)}else\"No Results Found\"==t.data.MSG?toastr.error(e.tlt(\"portal_user_no_result_found_msg\")):\"Internal Server Error\"==t.data.MSG?(toastr.error(e.tlt(\"portal_user_internal_server_msg1\")),e.load_portal_user_chat_history()):(toastr.error(e.tlt(\"portal_user_internal_server_msg2\")),e.load_portal_user_chat_history())})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):toastr.error(this.tlt(\"portal_user_data_for_search_msg\"))},close_modal:function(){$(\"#conversation_model1\").modal(\"hide\")},check_bot_offers:function(t){var e=t.filter((function(t){return!0===Boolean(t.offers)}));return e.length>0?\"display :block\":\"display : flex\"},trim_card_description:function(t){if(t.length>100){var e=t.substring(0,80)+\"...\";return e}return t}}},C=x,k=(a(\"c2b2\"),a(\"2877\")),S=Object(k[\"a\"])(C,r,o,!1,null,\"1e9cfc95\",null),D=S.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"table-box\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show_loader,expression:\"show_loader\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),\"general_chat_history\"!=t.selected?a(\"div\",{staticClass:\"table-responsive\",staticStyle:{\"min-height\":\"349px\"}},[a(\"table\",{staticClass:\"table\"},[t._m(0),t._l(t.user_action_stats,(function(e,s){return a(\"tr\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.show_loader,expression:\"!show_loader\"}],key:s},[\"Bot User\"==e.username||\"\"==e.username?[a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\" \"+t._s(e.username)+\" \")]),a(\"td\",t._l(e.action_list,(function(e,i){return a(\"tr\",{key:i},[a(\"td\",{staticStyle:{width:\"50%\",\"text-align\":\"center\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\",\"data-toggle\":\"modal\",\"data-target\":\"#conversation_model\"},on:{click:function(e){return t.chat_conversation(s,i)}}},[t._v(t._s(e.name))])])])})),0),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},t._l(e.action_list,(function(e,s){return a(\"tr\",{key:s},[a(\"td\",{staticStyle:{width:\"10%\"}},[t._v(t._s(e.date))])])})),0),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},t._l(e.action_list,(function(e,s){return a(\"tr\",{key:s},[a(\"td\",{staticStyle:{width:\"10%\"}},[t._v(t._s(e.time))])])})),0)]:t._e()],2)}))],2)]):t._e(),\"general_chat_history\"==t.selected?a(\"div\",{staticClass:\"table-responsive\",staticStyle:{\"min-height\":\"349px\"}},[a(\"table\",{staticClass:\"table\"},[a(\"thead\",[a(\"tr\",[a(\"th\",{staticStyle:{width:\"30%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"bot_user_unique_id_label\"))+\" \")]),a(\"th\",{staticStyle:{width:\"30%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"bot_user_interacted_label\"))+\" \")]),a(\"th\",{staticStyle:{width:\"40%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"bot_user_view_chat_label\"))+\" \")])])]),t._l(t.user_action_stats,(function(e,s){return a(\"tr\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.show_loader,expression:\"!show_loader\"}],key:s},[[a(\"td\",{staticClass:\"text-center\"},[t._v(t._s(e.userid))]),a(\"td\",{staticClass:\"text-center\"},[t._v(\" \"+t._s(t.format_date_in_local_timezone(e.date))+\" \")]),a(\"td\",{staticStyle:{width:\"50%\",\"text-align\":\"center\"}},[a(\"a\",{staticStyle:{\"text-align\":\"center\"},attrs:{href:\"javascript:void(0)\",\"data-toggle\":\"modal\",\"data-target\":\"#conversation_model1\"},on:{click:function(e){return t.chat_date(s)}}},[t._v(t._s(t.tlt(\"chat_history_bot_view_history\")))])])]],2)}))],2)]):t._e(),a(\"div\",{staticClass:\"pagin-table\",staticStyle:{\"margin-top\":\"2%\"}},[a(\"nav\",{attrs:{\"aria-label\":\"Page navigation example\"}},[a(\"ul\",{staticClass:\"pagination justify-content-center\"},[a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){return t.page_require(t.page_no-1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-left\",transform:\"translate(105.806 15.204) rotate(180)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])]),t._l(t.page_array,(function(e){return a(\"li\",{key:e,class:\"page-item \"+t.pagination_class(e)},[\"...s\"==e||\"...l\"==e?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return t.page_require(e)}}},[t._v(\"...\")]):t._e(),\"...s\"!=e&&\"...l\"!=e?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(a){return t.page_require(e)}}},[t._v(t._s(e))]):t._e()])})),a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){return t.page_require(t.page_no+1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-right\",transform:\"translate(-97.139 0)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])])],2)])]),\"general_chat_history\"!=t.selected?a(\"div\",{staticClass:\"modal fade dash-modal\",staticStyle:{\"margin-left\":\"-1%\"},attrs:{id:\"conversation_model\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"conversation_model\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t._m(1),a(\"h3\",[t._v(t._s(t.tlt(\"chat_history_header\")))])]),t._m(2),a(\"div\",t._l(t.user_reply,(function(e,s){return a(\"div\",{key:s},[a(\"span\",{staticClass:\"d-flex\"},[a(\"h5\",[t._v(t._s(t.current_user)+\": \")]),a(\"p\",[t._v(t._s(e))])]),a(\"span\",{staticStyle:{display:\"flex\"}},[a(\"h5\",[t._v(\"Bot: \")]),a(\"p\",[t._v(t._s(t.bot_reply[s]))])])])})),0)])])])]):t._e(),\"general_chat_history\"==t.selected?a(\"div\",{staticClass:\"modal fade dash-modal\",staticStyle:{\"margin-left\":\"-1%\"},attrs:{id:\"conversation_model1\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"conversation_model1\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",staticStyle:{\"max-width\":\"60%\"},attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t._m(3),a(\"h3\",[t._v(t._s(t.tlt(\"chat_history_header\")))])]),t._m(4),a(\"div\",[a(\"div\",{staticClass:\"form-group\"},[a(\"label\",[t._v(t._s(t.tlt(\"time_range_label\")))]),a(\"multiselect\",{attrs:{id:\"select_coversation_date\",options:t.chat_dates,searchable:!0,\"close-on-select\":!0,\"show-labels\":!1,\"allow-empty\":!1,placeholder:t.tlt(\"select_time\"),\"disabled-selected\":!1,\"hide-selected\":!1,\"max-height\":200},on:{input:t.chat_conversation},model:{value:t.selected_date,callback:function(e){t.selected_date=e},expression:\"selected_date\"}},[a(\"span\",[t._v(t._s(t.selected_date))])])],1),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.chatDetails.length,expression:\"chatDetails.length == 0\"}]},[a(\"content-loader\",{attrs:{viewBox:\"0 0 180 360\",speed:5,primaryColor:\"#f3f3f3\",secondaryColor:\"#ecebeb\"}},[a(\"rect\",{attrs:{x:\"40\",y:\"3\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"3\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"23\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"23\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"45\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"45\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"66\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"66\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"88\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"88 \",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"108\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"108\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}})])],1),a(\"p\"),t._l(t.chatDetails,(function(e,s){return a(\"div\",{key:s,staticStyle:{\"text-align\":\"justify\"}},[\"\"!=e.UserQuery?a(\"span\",{staticClass:\"py-0 my-0\",staticStyle:{display:\"flex\"}},[a(\"h5\",{staticClass:\"py-0 mt-2 mb-0\",staticStyle:{float:\"left\",width:\"3%\",height:\"0%\"}},[t._v(\" Q: \")]),a(\"p\",{staticClass:\"py-0 mb-0\",staticStyle:{\"word-break\":\"break-all\",\"margin-top\":\"11px\"}},[t._v(\" \"+t._s(e.UserQuery)+\" \")])]):t._e(),\"\"!=e.UserQuery||t.checkintent(s)?a(\"div\",t._l(e.BOTResponse,(function(s,i){return a(\"span\",{key:i,style:t.check_bot_offers(e.BOTResponse)},[void 0!=s.img||void 0!=s.text||void 0!=s.products||void 0!=s.offers||\"utter_default\"==s.template||void 0!=s.contact_us_email||void 0!=s.contact_us_phone_number||void 0!=s.buttons?a(\"h5\",{staticClass:\"py-0 mt-0 mb-0\",staticStyle:{float:\"left\",width:\"3%\",\"margin-bottom\":\"0px\"}},[t._v(\" A: \")]):t._e(),!0===Boolean(s.buttons)&&\"\"==s.text?a(\"div\",{staticStyle:{width:\"max-content\"}},[!0===Boolean(s.buttons)&&s.buttons.length>0&&\"\"==s.text?a(\"strong\",{staticStyle:{color:\"dimgray\"}},[t._v(\" Options :\")]):t._e(),t._l(s.buttons,(function(e,s){return a(\"span\",{key:s,staticStyle:{border:\"1px solid #cccccc\",cursor:\"default\",padding:\"2px\",\"margin-right\":\"5px\",background:\"#f2f2f2\",\"border-radius\":\"5px\"}},[a(\"span\",{staticClass:\"p-0 mb-1\"},[t._v(\" \"+t._s(e.title))])])}))],2):t._e(),void 0!=s.contact_us_email?a(\"p\",{staticStyle:{\"margin-top\":\"2px\",\"margin-bottom\":\"0px\",width:\"100%\"},domProps:{innerHTML:t._s(t.messaging_platform_formating(s.contact_us_email)+t.messaging_platform_formating_number(s.contact_us_phone_number))}}):t._e(),void 0!=s.message?a(\"p\",{staticStyle:{\"margin-top\":\"2px\",\"margin-bottom\":\"0px\",width:\"100%\"},domProps:{innerHTML:t._s(t.confusion_message_formating(s.message))}}):t._e(),a(\"div\",[void 0!=s.text&&\"\"!=s.text?a(\"p\",{staticStyle:{\"margin-top\":\"2px\",\"margin-bottom\":\"0px\",width:\"100%\"},domProps:{innerHTML:t._s(s.text)}}):t._e(),void 0!=s.video&&\"\"!=s.video?a(\"span\",[a(\"a\",{attrs:{href:s.video,target:\"blank\"}},[t._v(\"Attach Video\")])]):t._e()]),t._l(s.offers,(function(e,i){return a(\"div\",{key:i,staticClass:\"pb-0\",staticStyle:{width:\"100%\",\"margin-bottom\":\"0px\",\"padding-left\":\"1.7rem\"}},[void 0!=s.offers?a(\"span\",{domProps:{innerHTML:t._s(e.offer)}}):t._e()])})),void 0!=s.img&&\"\"!=s.img?a(\"div\",{staticStyle:{float:\"left\",width:\"100%\"}},[a(\"img\",{attrs:{src:s.img}})]):t._e(),void 0!=s.image&&\"\"!=s.image?a(\"div\",{staticStyle:{height:\"140px\",width:\"140px\",position:\"relative\"}},[a(\"img\",{staticStyle:{position:\"absolute\",height:\"inherit\"},attrs:{src:s.image}})]):t._e(),void 0!=s.products?a(\"div\",{staticClass:\"buy-products\",staticStyle:{display:\"flex\",overflow:\"auto hidden\",float:\"left\",width:\"100%\"},on:{mousewheel:t.scroll_div}},t._l(t.product_variation(s.products.products_list),(function(e,i){return a(\"div\",{key:i,staticClass:\"image-container\"},[void 0!=s.img&&\"\"!=s.img?a(\"span\",[a(\"img\",{staticClass:\"center-block p-0 m-0\",staticStyle:{height:\"140px\",width:\"140px\"},attrs:{src:t.check_image_type(e.img_url)}})]):t._e(),a(\"p\",{staticClass:\"p-0 mb-1\"},[t._v(t._s(e.title))]),a(\"p\",{staticClass:\"p-0 mb-1\"},[t._v(t._s(e.price))])])})),0):t._e()],2)})),0):t._e()])}))],2)])])])]):t._e()])},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"thead\",[a(\"tr\",[a(\"th\",{staticStyle:{width:\"25%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" USER NAME \")]),a(\"th\",{staticStyle:{width:\"20%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" NAME OF TASK \")]),a(\"th\",{staticStyle:{width:\"20%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" LAST INTERACTED ON \")]),a(\"th\",{staticStyle:{width:\"20%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" TIME \")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/user-blue.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/user-blue.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])}],O={components:{Multiselect:p.a,ContentLoader:v},data:function(){return{number_of_rows:\"\",total_pages:0,page_no:1,per_page:15,user_list:[],user_reply:[],bot_reply:[],chatDetails:[],action_stats:[],user_action_stats:[],current_user:\"\",timestamp:\"\",sender_id:[],selected:\"general_chat_history\",selected_date:\"\",selected_index:null,chat_dates:[],companyname:this.$session.get(\"UserInformation\").company_name,companyid:this.$session.get(\"UserInformation\").company_id,issearch:!1,searchstring:\"\",spinnerOn:!1,view_component_name:\"portal_user\",fingerprintregex:/^[0-9-+\\/\\s]{9,}$/,page_array:[],show_loader:!1,contact_help_email:null,retail_web_framework:this.$session.get(\"retail_web_framework\"),filter_chat_history:this.$session.get(\"filter_chat_history\")}},mounted:function(){var t=this;this.retail_web_framework=this.$session.get(\"retail_web_framework\"),$(\"#selectall\").click((function(){$(this).is(\":checked\")?$(\"input:checkbox\").prop(\"checked\",!0):$(\"input:checkbox\").prop(\"checked\",!1)})),this.$root.$on(\"search_bot_user_chat_history\",(function(e){t.searchstring=e,t.search_chat()})),this.$root.$on(\"load_bot_user_chat_history\",(function(e){t.load_bot_user_chat_history()}))},beforeDestroy:function(){this.$root.$off(\"search_bot_user_chat_history\"),this.$root.$off(\"load_bot_user_chat_history\")},created:function(){this.load_product_settings(),this.load_bot_user_chat_history()},methods:{format_date_in_local_timezone:function(t){var e=m.a.utc(t),a=m()(e).local().toDate();return a=m()(a).format(\"ddd MMM D YYYY\"),a.toString()},messaging_platform_formating:function(t){return\"Please feel free to reachout to us at : \"+t},messaging_platform_formating_number:function(t){return null!=t?\" or call us at :\"+t:\"\"},confusion_message_formating:function(t){return t.split(\"{email}\").join(this.contact_help_email)},load_product_settings:function(){var t=this;this.show_loader=!0,l.a.post(h.a.product_settings(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,is_get:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){var a=t.retail_web_framework;a?e.data.message.MSG_CODE==t.api_status_code.DATA_AVAILABLE.MSG_CODE&&(t.contact_help_email=void 0===a?e.data.data.details.contact_help_email:e.data.data[a+\"_details\"].contact_help_email):e.data.message.MSG_CODE==t.api_status_code.DATA_AVAILABLE.MSG_CODE&&(t.contact_help_email=e.data.data.details.contact_help_email)})).catch((function(e){t.show_loader=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},check_image_type:function(t){return\"string\"==typeof t?t:t.src},load_bot_user_chat_history:function(){var t=this;this.page_no=1,this.checked_list=[],this.searchstring=\"\",this.action_stats=[],this.user_action_stats=[],this.show_loader=!0,l.a.post(h.a.action_stats_url(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){t.action_stats=e.data.data.action_stats,t.action_stats.push({Hits:1,Name:\"general_chat_history\"})})).catch((function(e){t.show_loader=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})),this.show_loader=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,action:\"general_chat_history\",filter_chat_history:this.$session.get(\"filter_chat_history\"),pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(t.show_loader=!1,t.user_action_stats=[],e.data.message.MSG_CODE==t.api_status_code.DATA_AVAILABLE.MSG_CODE)for(var a=0;a<e.data.data.chatHistory.length;a++)t.fingerprintregex.test(e.data.data.chatHistory[a]._id.User)?t.user_action_stats.push({useremail:e.data.data.chatHistory[a].Email,userphonenumber:e.data.data.chatHistory[a].PhoneNumber,username:null==e.data.data.chatHistory[a].UserName?\"Guest user\":e.data.data.chatHistory[a].UserName,userid:e.data.data.chatHistory[a]._id.User,date:e.data.data.chatHistory[a].Date}):t.user_action_stats.push({useremail:e.data.data.chatHistory[a]._id.User,userphonenumber:e.data.data.chatHistory[a].PhoneNumber,username:null==e.data.data.chatHistory[a].UserName?\"Guest user\":e.data.data.chatHistory[a].UserName,userid:e.data.data.chatHistory[a]._id.User,date:e.data.data.chatHistory[a].Date});else e.data.message.MSG_CODE==t.api_status_code.NO_DATA_AVAILABLE.MSG_CODE?w()({text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"info\",toast:!0,position:\"top-end\",timer:2500}):e.data.message.MSG_CODE==t.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE&&w()({text:e.data.message.MSG,toast:!0,showCancelButton:!1,showConfirmButton:!1,type:\"error\"});t.number_of_rows=void 0==e.data.pagination.total_data?0:e.data.pagination.total_data,t.total_pages=void 0==e.data.pagination.total_page?0:e.data.pagination.total_page,t.setpagination(t.page_no)})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data),t.show_loader=!1}))},page_require:function(t){var e=this;this.show_loader=!0,\"general_chat_history\"!=this.selected?0==t||t==this.total_pages+1||(\"...s\"==page?this.page_no=Math.ceil((1+this.page_no)/2):\"...l\"==page?this.page_no=Math.ceil((this.total_pages+this.page_no)/2):this.page_no=page,l.a.post(h.a.action_usage_stats_url(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,action:this.selected,page_no:this.page_no,per_page:this.per_page},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):0==t||t==this.total_pages+1?this.load_bot_user_chat_history():(this.page_no=\"...s\"==t?Math.ceil((1+this.page_no)/2):\"...l\"==t?Math.ceil((this.total_pages+this.page_no)/2):t,this.show_loader=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,action:this.selected,filter_chat_history:this.$session.get(\"filter_chat_history\"),pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.show_loader=!1,e.user_action_stats=[];for(var a=0;a<t.data.data.chatHistory.length;a++)e.fingerprintregex.test(t.data.data.chatHistory[a]._id.User)?e.user_action_stats.push({useremail:t.data.data.chatHistory[a].Email,userphonenumber:t.data.data.chatHistory[a].PhoneNumber,username:t.data.data.chatHistory[a].UserName,userid:t.data.data.chatHistory[a]._id.User,date:t.data.data.chatHistory[a].Date}):e.user_action_stats.push({useremail:t.data.data.chatHistory[a]._id.User,userphonenumber:t.data.data.chatHistory[a].PhoneNumber,username:t.data.data.chatHistory[a].UserName,userid:t.data.data.chatHistory[a]._id.User,date:t.data.data.chatHistory[a].Date});e.number_of_rows=void 0==t.data.pagination.total_data?0:t.data.pagination.total_data,e.total_pages=void 0==t.data.pagination.total_page?0:t.data.pagination.total_page,e.setpagination(e.page_no)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)})))},pagination_class:function(t){return t==this.page_no?\" active\":\"\"},setpagination:function(t){if(this.page_array=[],this.total_pages<=7)for(var e=0;e<this.total_pages;e++)this.page_array.push(e+1);else if(1==t){for(var a=0;a<4;a++)this.page_array.push(a+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(t==this.total_pages){this.page_array.push(1),this.page_array.push(\"...s\");for(var s=this.total_pages-4;s<this.total_pages;s++)this.page_array.push(s+1)}else if(t<=4){for(var i=0;i<t+3;i++)this.page_array.push(i+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(t>=this.total_pages-4){this.page_array.push(1),this.page_array.push(\"...s\");for(var r=t-4;r<this.total_pages;r++)this.page_array.push(r+1)}else{this.page_array.push(1),this.page_array.push(\"...s\");for(var o=t-3;o<=t+3;o++)this.page_array.push(o);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}},scroll_div:function(){var t=document.querySelector(\".buy-products\");event.deltaX>event.deltaY?t.scrollLeft+=10:event.deltaX<event.deltaY&&(t.scrollLeft-=10)},checkintent:function(t){return void 0!=this.chatDetails[t-1]&&void 0!=this.chatDetails[t-1].BOTResponse[0]&&void 0!=this.chatDetails[t-1].BOTResponse[0].intent},chat_date:function(t){var e=this;this.chatDetails=[],this.sender_id=this.user_action_stats[t].userid,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,username:this.sender_id,isshowdates:!0,issearch:this.issearch,searchstring:this.searchstring},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(a){e.spinnerOn=!1,e.chat_dates=a.data.data.Dates,e.selected_date=a.data.data.Dates[a.data.data.Dates.length-1],e.chat_dates.reverse(),e.selected_index=t,e.chat_conversation(t)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},chat_conversation:function(t,e){var a=this;\"general_chat_history\"!=this.selected?(this.sender_id=this.user_action_stats[t].userid,this.spinnerOn=!0,l.a.post(h.a.conversation_stats_url(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,sender_id:this.user_action_stats[t].sender_id,action_timestamp:this.user_action_stats[t].action_list[e].timestamp},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(a.spinnerOn=!1,a.user_reply=[],a.bot_reply=[],null!=t.data){for(var e in a.current_user=t.data.data.user_conversations.username,t.data.data.user_conversations.interactions)void 0!=t.data.data.user_conversations.interactions[e].user?a.user_reply.push(t.data.data.user_conversations.interactions[e].user):void 0!=t.data.data.user_conversations.interactions[e].bot&&a.bot_reply.push(t.data.data.user_conversations.interactions[e].bot);$(\"#conversation_model1 :input\").prop(\"disabled\",!0)}else toastr.error(a.tlt(\"bot_user_no_chats_msg\")),$(\"#conversation_model1\").modal(\"hide\");$(\"#conversation_model1 :input\").prop(\"disabled\",!0)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||a.$root.$emit(\"Session_Expired\",t.response.data)}))):(this.chatDetails=[],this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,username:this.sender_id,isshowchatdetails:!0,date:this.selected_date,issearch:this.issearch,searchstring:this.searchstring},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(a.spinnerOn=!1,a.user_reply=[],a.bot_reply=[],null!=t.data.data){a.current_user=a.user_action_stats[a.selected_index].useremail,a.chatDetails=t.data.data.chatDetails;for(var e=null,s=0;s<a.chatDetails.length;s++){for(var i=0;i<a.chatDetails[s].BOTResponse.length;i++)1==a.chatDetails[s].BOTResponse[i].shopify_fetch_customer_id&&null==a.chatDetails[s].BOTResponse[i].text&&\"Promotional offers\"===a.chatDetails[s].UserQuery&&(e=s);null!=e&&delete a.chatDetails[e],e=null}var r=a.chatDetails.filter((function(t){return t}));a.chatDetails=r}})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||a.$root.$emit(\"Session_Expired\",t.response.data)})))},product_variation:function(t){for(var e in t)t[e].order_qty=1,t[e].buy_qty=1,t[e].variations&&t[e].variations.length>0&&(t[e].id=t[e].variations[0].id,t[e].img_url=null===t[e].variations[0].img_url?t[e].img_url:t[e].variations[0].img_url,t[e].permalink=t[e].variations[0].permalink,t[e].variant_title=t[e].variations[0].variant_title,t[e].stock_quantity=t[e].variations[0].stock_quantity,t[e].stock_status=t[e].variations[0].stock_status,t[e].price=t[e].variations[0].price,t[e].regular_price=t[e].variations[0].regular_price);return t},search_chat:function(){var t=this;\"\"!=this.searchstring?(this.page_no=1,this.issearch=!0,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,action:\"general_chat_history\",pageno:this.page_no,perpage:this.per_page,issearch:this.issearch,searchstring:this.searchstring},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(t.spinnerOn=!1,t.user_action_stats=[],e.data.message.MSG_CODE==t.api_status_code.EMPTY_DATA.MSG_CODE){for(var a=0;a<e.data.data.chatHistory.length;a++)t.user_action_stats.push({username:e.data.data.chatHistory[a]});t.number_of_rows=void 0==e.data.pagination.total_data?0:e.data.pagination.total_data,t.total_pages=void 0==e.data.pagination.total_page?0:e.data.pagination.total_page,t.setpagination(t.page_no)}else e.data.message.MSG_CODE==t.api_status_code.EMPTY_DATA.MSG_CODE?toastr.error(t.tlt(\"bot_user_no_result_found_msg\")):e.data.message.MSG_CODE==t.api_status_code.INTERNAL_SERVER_ERROR.MSG_CODE?(toastr.error(t.tlt(\"bot_user_internal_server_msg1\")),t.load_bot_user_chat_history()):(toastr.error(t.tlt(\"bot_user_internal_server_msg2\")),t.load_bot_user_chat_history())})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))):toastr.error(this.tlt(\"bot_user_data_for_search_msg\"))},close_modal:function(){$(\"#conversation_model1\").modal(\"hide\")},check_bot_offers:function(t){var e=t.filter((function(t){return!0===Boolean(t.offers)}));return e.length>0?\"display :block\":\"display : flex\"}}},M=O,B=(a(\"7fdc\"),Object(k[\"a\"])(M,A,E,!1,null,\"7ef9d0b5\",null)),U=B.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"table-box\"},[a(\"div\",{staticClass:\"table-responsive\",staticStyle:{\"min-height\":\"349px\"}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show_loader,expression:\"show_loader\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),a(\"table\",{staticClass:\"table\"},[a(\"thead\",[a(\"tr\",[a(\"th\",{staticStyle:{width:\"30%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"portal_user_unique_id\"))+\" \")]),a(\"th\",{staticStyle:{width:\"30%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"portal_user_interacted\"))+\" \")]),a(\"th\",{staticStyle:{width:\"40%\",\"text-align\":\"center\"},attrs:{scope:\"col\"}},[t._v(\" \"+t._s(t.tlt(\"portal_user_view_chat\"))+\" \")])])]),t._l(t.user_action_stats,(function(e,s){return a(\"tr\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.show_loader,expression:\"!show_loader\"}],key:s},[[a(\"td\",{staticClass:\"text-center\"},[t._v(\" \"+t._s(e.agent_full_name))]),a(\"td\",{staticClass:\"text-center\"},[t._v(\" \"+t._s(t.format_date_in_local_timezone(e.last_interacted_on))+\" \")]),a(\"td\",{staticStyle:{width:\"50%\",\"text-align\":\"center\"}},[a(\"a\",{staticStyle:{\"text-align\":\"center\"},attrs:{href:\"javascript:void(0)\",\"data-toggle\":\"modal\",\"data-target\":\"#conversation_model1\"},on:{click:function(e){return t.chat_date(s)}}},[t._v(t._s(t.tlt(\"view_chat_label\")))])])]],2)}))],2)]),a(\"div\",{staticClass:\"pagin-table\",staticStyle:{\"margin-top\":\"2%\"}},[a(\"nav\",{attrs:{\"aria-label\":\"Page navigation example\"}},[a(\"ul\",{staticClass:\"pagination justify-content-center\"},[a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){return t.page_require(t.page_no-1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-left\",transform:\"translate(105.806 15.204) rotate(180)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])]),t._l(t.page_array,(function(e){return a(\"li\",{key:e,class:\"page-item \"+t.pagination_class(e)},[\"...s\"==e||\"...l\"==e?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return t.page_require(e)}}},[t._v(\"...\")]):t._e(),\"...s\"!=e&&\"...l\"!=e?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(a){return t.page_require(e)}}},[t._v(t._s(e))]):t._e()])})),a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){return t.page_require(t.page_no+1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-right\",transform:\"translate(-97.139 0)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])])],2)])]),a(\"div\",{staticClass:\"modal fade dash-modal\",staticStyle:{\"margin-left\":\"-1%\"},attrs:{id:\"conversation_model1\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"conversation_model1\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",staticStyle:{\"max-width\":\"60%\"},attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t._m(0),a(\"h3\",[t._v(t._s(t.tlt(\"chat_history_header\")))])]),t._m(1),a(\"div\",[a(\"div\",{staticClass:\"form-group\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.chatDetails.length,expression:\"chatDetails.length == 0\"}]},[a(\"content-loader\",{attrs:{viewBox:\"0 0 180 360\",speed:5,primaryColor:\"#f3f3f3\",secondaryColor:\"#ecebeb\"}},[a(\"rect\",{attrs:{x:\"40\",y:\"3\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"3\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"23\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"23\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"45\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"45\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"66\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"66\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"88\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"88 \",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"40\",y:\"108\",rx:\"4\",ry:\"4\",width:\"350\",height:\"14\"}}),a(\"rect\",{attrs:{x:\"2\",y:\"108\",rx:\"4\",ry:\"4\",width:\"35\",height:\"14\"}})])],1)]),t.chatDetails.length>0?a(\"div\",[a(\"h5\",{staticStyle:{display:\"inline-block\"}},[t._v(t._s(this.tlt(\"support_agent\"))+\" - \")]),a(\"p\",{staticStyle:{display:\"inline-block\",\"font-size\":\"18px\",color:\"#494D69\"}},[t._v(t._s(t.fullName))])]):t._e(),t._l(t.chatDetails,(function(e,s){return a(\"div\",{key:s,staticStyle:{\"text-align\":\"justify\"}},[\"\"!=e.sent_by||null!=e.sent_by?a(\"span\",{staticClass:\"py-0 my-0\",staticStyle:{display:\"flex\",height:\"0%\"}},[a(\"h6\",{staticClass:\"py-0 mt-2 mb-0 mr-0\",staticStyle:{float:\"left\",width:\"20%\",height:\"0%\"}},[t._v(\" \"+t._s(\"support_agent\"===e.sent_by?\"Support agent\":\"Customer\")+\": \")]),a(\"p\",{staticClass:\"py-0 mb-0 mt-2\",staticStyle:{float:\"right\",width:\"70%\",height:\"0%\"}},[t._v(\" \"+t._s(e.message)+\" \")])]):t._e()])}))],2)])])])])])},G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/user-blue.png\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])}],L={data:function(){return{number_of_rows:\"\",total_pages:0,page_no:1,per_page:15,user_list:[],user_reply:[],bot_reply:[],chatDetails:[],action_stats:[],user_action_stats:[],current_user:\"\",timestamp:\"\",sender_id:[],groupnames:[],chatgroupname:\"\",fullName:\"\",selected:\"general_chat_history\",selected_date:\"\",selected_index:null,chat_dates:[],companyname:this.$session.get(\"UserInformation\").company_name,companyid:this.$session.get(\"UserInformation\").company_id,issearch:!1,searchstring:\"\",spinnerOn:!1,view_component_name:\"portal_user\",fingerprintregex:/^[0-9-+\\/\\s]{9,}$/,page_array:[],show_loader:!1,is_portal_user:!0,contact_help_email:null,retail_web_framework:this.$session.get(\"retail_web_framework\"),filter_chat_history:this.$session.get(\"filter_chat_history\")}},components:{ContentLoader:v},created:function(){this.load_live_chat_history()},mounted:function(){var t=this;this.$root.$on(\"load_live_chat_history\",(function(e){t.load_live_chat_history()}))},beforeDestroy:function(){this.$root.$off(\"load_live_chat_history\")},methods:{format_date_in_local_timezone:function(t){var e=m.a.utc(t),a=m()(e).local().toDate();return a=m()(a).format(\"ddd MMM D YYYY\"),a.toString()},load_live_chat_history:function(){var t=this;this.show_loader=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,is_live_chat:!0,action:\"general_chat_history\",filter_chat_history:this.$session.get(\"filter_chat_history\"),pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){console.log(e),t.show_loader=!1,console.log(t.api_status_code.DATA_AVAILABLE.MSG_CODE,e.data.message.MSG_CODE),t.user_action_stats=[],t.api_status_code.DATA_AVAILABLE.MSG_CODE==e.data.message.MSG_CODE?t.user_action_stats=e.data.data.output:t.api_status_code.NO_DATA_AVAILABLE.MSG_CODE==e.data.message.MSG_CODE?w()({text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,toast:!0,position:\"top-end\",type:\"info\",timer:2500}):w()({title:e.data.message.MSG_CODE,text:e.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:3e3}),t.number_of_rows=void 0==e.data.pagination.total_data?0:e.data.pagination.total_data,t.total_pages=void 0==e.data.pagination.total_page?0:e.data.pagination.total_page,t.setpagination(t.page_no)})).catch((function(e){console.log(e),410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data),t.show_loader=!1}))},chat_date:function(t){var e=this;this.chatDetails=[],this.sender_id=this.user_action_stats[t].userid,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,username:this.sender_id,isshowchatdetails:!0,is_live_chat:!0,group_name:this.user_action_stats[t].group_name},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,e.api_status_code.DATA_AVAILABLE.MSG_CODE==t.data.message.MSG_CODE?(e.chatDetails=t.data.data.output,e.fullName=e.chatDetails[0].agent_full_name):e.api_status_code.NO_DATA_AVAILABLE.MSG_CODE==t.data.message.MSG_CODE?w()({title:t.data.message.MSG_CODE,text:t.data.message.MSG,toast:!0,showCancelButton:!1,showConfirmButton:!1,type:\"info\",timer:2500}):w()({title:t.data.message.MSG_CODE,text:t.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:2500})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},pagination_class:function(t){return t==this.page_no?\" active\":\"\"},setpagination:function(t){if(this.page_array=[],this.total_pages<=7)for(var e=0;e<this.total_pages;e++)this.page_array.push(e+1);else if(1==t){for(var a=0;a<4;a++)this.page_array.push(a+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(t==this.total_pages){this.page_array.push(1),this.page_array.push(\"...s\");for(var s=this.total_pages-4;s<this.total_pages;s++)this.page_array.push(s+1)}else if(t<=4){for(var i=0;i<t+3;i++)this.page_array.push(i+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(t>=this.total_pages-4){this.page_array.push(1),this.page_array.push(\"...s\");for(var r=t-4;r<this.total_pages;r++)this.page_array.push(r+1)}else{this.page_array.push(1),this.page_array.push(\"...s\");for(var o=t-3;o<=t+3;o++)this.page_array.push(o);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}},page_require:function(t){var e=this;0==t||t==this.total_pages+1||(this.page_no=\"...s\"==t?Math.ceil((1+this.page_no)/2):\"...l\"==t?Math.ceil((this.total_pages+this.page_no)/2):t,this.spinnerOn=!0,l.a.post(h.a.general_chat_history(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isshow:!0,is_live_chat:!0,action:this.selected,filter_chat_history:this.$session.get(\"filter_chat_history\"),pageno:this.page_no,perpage:this.per_page,issearch:this.issearch},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.user_action_stats=[],e.spinnerOn=!1,e.api_status_code.DATA_AVAILABLE.MSG_CODE==t.data.message.MSG_CODE?e.user_action_stats=t.data.data.output:e.api_status_code.NO_DATA_AVAILABLE.MSG_CODE==t.data.message.MSG_CODE?w()({title:t.data.message.MSG_CODE,text:t.data.message.MSG,toast:!0,showCancelButton:!1,showConfirmButton:!1,type:\"info\",timer:2500}):w()({title:t.data.message.MSG_CODE,text:t.data.message.MSG,showCancelButton:!1,showConfirmButton:!1,type:\"error\",timer:2500}),e.total_pages=void 0==t.data.pagination.total_page?0:t.data.pagination.total_page,e.setpagination(e.page_no)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)})))}}},N=L,H=Object(k[\"a\"])(N,I,G,!1,null,null,null),T=H.exports,P={components:{PortalUserChatHistory:D,BotUserChatHistory:U,LiveChatHistory:T},data:function(){return{number_of_rows:\"\",total_pages:0,page_no:1,per_page:10,user_list:[],user_reply:[],bot_reply:[],chatDetails:[],action_stats:[],user_action_stats:[],current_user:\"\",timestamp:\"\",sender_id:[],selected:\"general_chat_history\",selected_date:\"\",selected_index:null,chat_dates:[],companyname:this.$session.get(\"UserInformation\").company_name,companyid:this.$session.get(\"UserInformation\").company_id,issearch:!1,searchstring:\"\",spinnerOn:!1,view_component_name:\"portal_user\",fingerprintregex:/^[0-9-+\\/\\s]{9,}$/,page_array:[],isVisibleSearchClear:!1,show_loader:!1,filter_chat_history:\"Last 7 days\"}},mounted:function(){$(\"#selectall\").click((function(){$(this).is(\":checked\")?$(\"input:checkbox\").prop(\"checked\",!0):$(\"input:checkbox\").prop(\"checked\",!1)})),$(\"#portal_user-tab\").click()},created:function(){this.load_task_responses(),this.$session.set(\"filter_chat_history\",this.tlt(\"chat_history_default_7_day\"))},watch:{view_component_name:function(t,e){this.searchstring=\"\"},searchstring:function(){\"\"===this.searchstring?(this.load_task_responses(),this.isVisibleSearchClear=!1):\"\"!==this.searchstring&&(this.isVisibleSearchClear=!0)}},methods:{clear_searchstring:function(){this.searchstring=\"\"},load_task_responses:function(){this.show_loader=!1,this.checked_list=[],this.searchstring=\"\",this.$session.set(\"filter_chat_history\",this.filter_chat_history),\"portal_user\"===this.view_component_name?this.$root.$emit(\"load_portal_user_chat_history\",!0):\"bot_user\"===this.view_component_name?this.$root.$emit(\"load_bot_user_chat_history\",!0):\"agent_user\"===this.view_component_name&&this.$root.$emit(\"load_live_chat_history\",!0)},search_chat:function(){\"portal_user\"===this.view_component_name?this.$root.$emit(\"search_portal_user_chat_history\",this.searchstring):\"bot_user\"===this.view_component_name&&this.$root.$emit(\"search_bot_user_chat_history\",this.searchstring)}}},R=P,q=(a(\"5805\"),Object(k[\"a\"])(R,s,i,!1,null,\"34f97b6e\",null));e[\"default\"]=q.exports}}]);","extractedComments":[]}