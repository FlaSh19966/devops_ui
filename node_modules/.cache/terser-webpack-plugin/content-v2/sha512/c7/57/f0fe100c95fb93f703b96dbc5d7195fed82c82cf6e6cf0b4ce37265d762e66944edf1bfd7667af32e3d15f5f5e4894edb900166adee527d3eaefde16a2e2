{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0d0b5685\"],{\"26c0\":function(e,t,s){},\"37a8\":function(e,t,s){\"use strict\";var a=s(\"26c0\"),n=s.n(a);n.a},\"60bc\":function(e,t,s){\"use strict\";var a=s(\"7bf2\"),n=s.n(a);n.a},\"7bf2\":function(e,t,s){},\"8a22\":function(e,t,s){\"use strict\";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",[s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.spinnerOn,expression:\"spinnerOn\"}],staticClass:\"spinner\"}),s(\"div\",{staticClass:\"dash-cont\"},[s(\"div\",{staticClass:\"container-fluid\"},[s(\"div\",{staticClass:\"card dash-card\"},[s(\"div\",{staticClass:\"card-header d-block d-sm-flex flex-wrap justify-content-between\"},[s(\"h4\",{staticClass:\"mb-sm-0\"},[e._v(\"Chat Groups\")]),s(\"div\",{staticClass:\"card-act d-flex flex-wrap\"},[s(\"a\",{staticClass:\"darkblue-btn\",staticStyle:{height:\"33px\"},attrs:{href:\"#\",\"data-toggle\":\"modal\",\"data-target\":\"#createchatmodal\",id:\"chat_grp_btn\"}},[s(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"14\",height:\"13.997\",viewBox:\"0 0 14 13.997\"}},[s(\"path\",{attrs:{id:\"Union_13\",\"data-name\":\"Union 13\",d:\"M-12684,2058v-5h-5a1,1,0,0,1-1-1,1,1,0,0,1,1-1h5v-5a1,1,0,0,1,1-1,1,1,0,0,1,1,1v5h5a1,1,0,0,1,1,1,1,1,0,0,1-1,1h-5v5a1,1,0,0,1-1,1A1,1,0,0,1-12684,2058Z\",transform:\"translate(12690.001 -2045.002)\",fill:\"#fff\"}})]),e._v(\" Add Chat Group \")])])]),s(\"div\",{staticClass:\"card-body\"},[s(\"div\",{staticClass:\"table-box\"},[s(\"div\",{staticClass:\"table-responsive\"},[s(\"table\",{staticClass:\"table\"},[e._m(0),s(\"tbody\",e._l(e.chat_group_list,(function(t,a){return s(\"tr\",{key:a},[s(\"td\",{staticClass:\"action\"},[s(\"a\",{attrs:{href:\"#\"},on:{click:function(t){return e.edit_group(a)}}},[s(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"15.392\",height:\"15.392\",viewBox:\"0 0 15.392 15.392\",\"data-toggle\":\"modal\",\"data-target\":\"#createchatmodal\"}},[s(\"path\",{attrs:{id:\"square-edit-outline\",d:\"M4.71,3A1.7,1.7,0,0,0,3,4.71V16.682a1.71,1.71,0,0,0,1.71,1.71H16.682a1.71,1.71,0,0,0,1.71-1.71V10.7h-1.71v5.986H4.71V4.71H10.7V3H4.71m10.928.855a.591.591,0,0,0-.41.171L14.185,5.061,16.322,7.2l1.043-1.035a.578.578,0,0,0,0-.812L16.04,4.026a.571.571,0,0,0-.4-.171M13.578,5.668l-6.3,6.311v2.138H9.413l6.3-6.311Z\",transform:\"translate(-3 -3)\",fill:\"#9499ae\"}})])]),s(\"a\",{attrs:{href:\"#\"},on:{click:function(t){return e.delete_single(a)}}},[s(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"13.682\",height:\"15.392\",viewBox:\"0 0 13.682 15.392\"}},[s(\"path\",{attrs:{id:\"trash-can-outline\",d:\"M8.276,3v.855H4v1.71h.855V16.682a1.71,1.71,0,0,0,1.71,1.71h8.551a1.71,1.71,0,0,0,1.71-1.71V5.565h.855V3.855H13.406V3H8.276M6.565,5.565h8.551V16.682H6.565V5.565m1.71,1.71v7.7h1.71v-7.7H8.276m3.42,0v7.7h1.71v-7.7Z\",transform:\"translate(-4 -3)\",fill:\"#f23d3d\"}})])])]),s(\"td\",{staticStyle:{\"text-align\":\"center\"}},[e._v(\" \"+e._s(t.group_name)+\" \")]),s(\"td\",e._l(t.users_list,(function(t,a){return s(\"span\",{key:a,staticClass:\"multiselect__tag\"},[e._v(e._s(t)+\" \")])})),0)])})),0)])])])])])])]),s(\"div\",{staticClass:\"modal fade dash-modal\",attrs:{id:\"createchatmodal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"createchatmodaltitle\",\"aria-hidden\":\"true\"}},[s(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{role:\"document\"}},[s(\"div\",{staticClass:\"modal-content\"},[s(\"div\",{staticClass:\"modal-body\"},[e._m(1),e._m(2),s(\"form\",{on:{submit:e.submit_new_group}},[s(\"div\",{staticClass:\"form-group\"},[s(\"label\",[e._v(\"Group Name\")]),s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.group_name,expression:\"group_name\"}],staticClass:\"form-control\",attrs:{placeholder:\"Enter the group name\",id:\"group_name_id\"},domProps:{value:e.group_name},on:{input:function(t){t.target.composing||(e.group_name=t.target.value)}}})]),s(\"div\",{staticClass:\"form-group\"},[s(\"label\",[e._v(\"Users\")]),s(\"multiselect\",{attrs:{id:\"multiselect_id\",\"close-on-select\":!1,taggable:!0,multiple:!0,options:e.selected_users_list,placeholder:\"Select Users\",\"track-by\":\"user\",label:\"user\"},on:{select:e.user_selected,remove:e.remove_user},model:{value:e.selected_users,callback:function(t){e.selected_users=t},expression:\"selected_users\"}})],1),e._m(3)])])])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"thead\",[s(\"tr\",[s(\"th\",{staticStyle:{width:\"5%\"},attrs:{scope:\"col\"}},[e._v(\"ACTION\")]),s(\"th\",{staticStyle:{width:\"20%\"},attrs:{scope:\"col\"}},[e._v(\"GROUP NAME\")]),s(\"th\",{attrs:{scope:\"col\"}},[e._v(\"USERS\")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[s(\"div\",{staticClass:\"head-icn\"},[s(\"img\",{staticStyle:{width:\"auto\"},attrs:{src:\"/img/msg-blue.png\",alt:\"\"}})]),s(\"h6\",[e._v(\"Kindly select the chat group name\")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[s(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"btn-wrap text-right\"},[s(\"button\",{staticClass:\"btn btn-link\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"}},[e._v(\" Cancel \")]),s(\"button\",{staticClass:\"darkblue-btn\",attrs:{type:\"submit\",id:\"create_grp_save_btn\"}},[e._v(\" Save \")])])}],i=(s(\"4de4\"),s(\"caad\"),s(\"c975\"),s(\"2532\"),s(\"bc3a\")),r=s.n(i),o=s(\"ea54\"),l=s.n(o),u=s(\"8e5f\"),c=s.n(u),d=s(\"3d20\"),h=s.n(d),_={data:function(){return{chat_group_list:[],group_name:\"\",new_users_selected:[],selected_users_list:[],companyname:\"\",companyid:\"\",users_list:[],selected_users:[],isEdit:!1,spinnerOn:!1,admin_login_token:this.$session.get(\"GroupChatLoginToken\")}},created:function(){this.load_chatgroup()},mounted:function(){var e=this;$(\"#createchatmodal\").on(\"hidden.bs.modal\",(function(){e.clear_fields()}))},components:{Multiselect:c.a},methods:{load_chatgroup:function(){var e=this;this.$session.has(\"CompanyId\")||\"SuperAdmin\"!=this.$session.get(\"UserInformation\").role||toastr.warning(\"Please select a company name from the dropdown\"),\"SuperAdmin\"==this.$session.get(\"UserInformation\").role?this.$session.has(\"CompanyId\")?(this.companyid=this.$session.get(\"CompanyId\"),this.companyname=this.$session.get(\"CompanyName\")):toastr.warning(\"Please select a company name from the dropdown\"):(this.companyid=this.$session.get(\"UserInformation\").company_id,this.companyname=this.$session.get(\"UserInformation\").company_name),r.a.get(l.a.chat_user_get_groups_url(),{params:{username:this.$session.get(\"UserInformation\").email,token:this.$session.get(\"GroupChatLoginToken\")}}).then((function(t){if(\"you need to log in\"==t.data.error);else for(var s in t.data)t.data[s].includes(\"|\")||e.get_users_list(s,t.data[s])})),r.a.post(l.a.load_users_url(),{companyid:this.companyid,companyname:this.companyname,license_key:this.$session.get(\"UserInformation\").license_key,email:this.$session.get(\"UserInformation\").email,token:this.$session.get(\"UserInformation\").tokens,page_no:1,per_page:5},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){for(var s in t.data[0])e.selected_users_list.push({user:t.data[0][s]})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},get_users_list:function(e,t){var s=this;r.a.get(l.a.chat_admin_get_group_members_url(),{params:{username:this.$session.get(\"UserInformation\").email,group_name:t,token:this.admin_login_token}}).then((function(e){\"you need to log in\"==e.data.error||(s.chat_group_list=[],s.chat_group_list.push({group_name:t,users_list:e.data}))}))},submit_new_group:function(){var e=this;if(event.preventDefault(),!1===this.isEdit&&\"\"!=this.group_name)r.a.post(l.a.chat_admin_create_group_url(),{group_name:this.group_name,join_me:!0,token:this.admin_login_token}).then((function(t){var s=[];for(var a in e.selected_users)s.push(e.selected_users[a].user);1==t.data.created&&(toastr.success(\"Your group has been created successfully.\"),r.a.post(l.a.chat_admin_add_member_url(),{token:e.admin_login_token,group_name:e.group_name,members_ids:s}).then((function(t){var s=t.data.filter((function(e){return 1==e.added}));s.length==t.data.length&&h()({text:\"New members have been added to the group successfully.\",showConfirmButton:!0,timer:3e3}).then((function(t){t.value&&e.load_chatgroup()}))})))}));else if(\"\"==this.group_name)toastr.error(\"Please enter the required fields.\");else if(!0===this.isEdit&&\"\"!=this.group_name&&this.new_users_selected.length>0){var t=[];for(var s in this.new_users_selected)t.push(this.new_users_selected[s].user);r.a.post(l.a.chat_admin_add_member_url(),{token:this.admin_login_token,group_name:this.group_name,members_ids:t}).then((function(t){var s=t.data.filter((function(e){return 1==e.added}));s.length==t.data.length&&h()({text:\"New members have been added to the group successfully.\",showConfirmButton:!0,timer:3e3}).then((function(t){t.value&&e.load_chatgroup()}))}))}},user_selected:function(e,t){1==this.isEdit&&this.new_users_selected.push(e)},new_user_removed:function(e){var t=this.new_users_selected.indexOf(e);return-1!=t||1!=this.isEdit},remove_user:function(e,t){var s=this;0==this.new_user_removed(e)&&h.a.fire({title:\"Are you sure about removing the user \"+e.user+\" from this group?\",text:\"You won't be able to revert this!\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, delete!!\"}).then((function(t){if(t.value){var a=[];a.push(e.user),r.a.post(l.a.chat_admin_remove_member_url(),{token:s.admin_login_token,group_name:s.group_name,members_ids:a}).then((function(e){1==e.data[0].deleted&&(toastr.success(\"The member has been removed from the group.\"),s.load_chatgroup())})).catch((function(e){s.spinnerOn=!1}))}else t.value||s.selected_users.push(e)}))},clear_fields:function(){this.selected_users=[],this.group_name=\"\",this.isEdit=!1,this.new_users_selected=[]},delete_single:function(e){event.preventDefault();var t=[];t.push(this.chat_group_list[e].group_name),this.delete_group_api(this.chat_group_list[e].group_name)},delete_group_api:function(e){var t=this;h.a.fire({title:\"Are you sure?\",text:\"You won't be able to revert this!\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, delete!!\"}).then((function(s){s.value&&r.a.delete(l.a.chat_admin_delete_group_url(),{params:{token:t.admin_login_token,group_name:e}}).then((function(e){1==e.data.deleted&&(toastr.success(\"The group has been deleted.\"),t.load_chatgroup())})).catch((function(e){t.spinnerOn=!1}))}))},edit_group:function(e){event.preventDefault(),this.isEdit=!0,this.group_name=this.chat_group_list[e].group_name;var t=[];for(var s in this.chat_group_list[e].users_list)t.push({user:this.chat_group_list[e].users_list[s]});this.selected_users=t}}},m=_,p=(s(\"60bc\"),s(\"37a8\"),s(\"2877\")),g=Object(p[\"a\"])(m,a,n,!1,null,\"5dc461c4\",null);t[\"default\"]=g.exports}}]);","extractedComments":[]}