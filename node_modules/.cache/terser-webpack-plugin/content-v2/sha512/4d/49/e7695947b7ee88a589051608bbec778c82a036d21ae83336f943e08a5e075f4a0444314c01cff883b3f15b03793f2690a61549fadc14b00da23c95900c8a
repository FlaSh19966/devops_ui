{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4ceb02a4\"],{\"07a2\":function(t,e,a){},3201:function(t,e,a){},d95c:function(t,e,a){t.exports=a.p+\"img/cense_logo.23e11092.png\"},e74b:function(t,e,a){\"use strict\";var s=a(\"07a2\"),n=a.n(s);n.a},e8c6:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.spinnerOn,expression:\"spinnerOn\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),a(\"div\",{staticClass:\"card dash-card\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.show_subscription&&!t.spinnerOn,expression:\"!show_subscription && !spinnerOn \"}]},[a(\"div\",{staticClass:\"card-header flex-wrap justify-content-between\"},[a(\"h4\",{staticClass:\"mb-0\"},[t._v(\"Subscribe to Plan\")]),\"Free\"===t.stripe_subscription_plans_details.subscription_type?a(\"p\",[t._v(\" (Your free trial is valid for 30 days after you install the Cense AI App. After that you will be automatically transferred to the Free Plan if you don't upgrade) \")]):t._e()]),t.retail_shopify_company?a(\"div\",{staticStyle:{\"padding-left\":\"25px\"}},[a(\"div\",{staticClass:\"row mb-2\"},[a(\"div\",{staticClass:\"col-sm-4\"},[a(\"span\",[t._v(\" Select Plan \")]),a(\"multiselect\",{attrs:{\"track-by\":\"name\",label:\"name\",options:t.retail_shopify_subscription_plans,searchable:!1,\"allow-empty\":!1,placeholder:\"Select plan\"},on:{input:t.check_retail_plan},model:{value:t.retail_plan_current,callback:function(e){t.retail_plan_current=e},expression:\"retail_plan_current\"}}),a(\"span\",[t._v(\" \"+t._s(t.current_retail_plan_charges)+\" \")])],1),a(\"div\",{staticClass:\"col-sm-4\"},[a(\"span\",[t._v(\" Select Billing Cycle \")]),a(\"multiselect\",{attrs:{options:t.payment_types,searchable:!1,\"allow-empty\":!1,disabled:t.check_retail_payment_type_disabled,placeholder:t.retail_payment_placeholder},model:{value:t.retail_payment_type,callback:function(e){t.retail_payment_type=e},expression:\"retail_payment_type\"}})],1)]),a(\"div\",{staticClass:\"row mb-2\"},[a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{margin:\"4px 0px\"}},[a(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){return t.subscribe_retail_plan()}}},[t._v(\" Subscribe \")]),a(\"button\",{staticClass:\"red-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" Go Back \")])])])]):a(\"div\",{staticStyle:{\"padding-left\":\"25px\"}},[a(\"div\",{staticClass:\"row mb-2\"},[a(\"div\",{staticClass:\"col-sm-4\"},[a(\"span\",[t._v(\" Select Plan \")]),a(\"multiselect\",{attrs:{\"track-by\":\"name\",label:\"name\",options:t.retail_shopify_subscription_plans,searchable:!1,\"allow-empty\":!1,placeholder:\"Select plan\"},on:{input:t.check_retail_plan},model:{value:t.retail_plan_current,callback:function(e){t.retail_plan_current=e},expression:\"retail_plan_current\"}}),a(\"span\",[t._v(\" \"+t._s(t.current_retail_plan_charges)+\" \")])],1),a(\"div\",{staticClass:\"col-sm-4\"},[a(\"span\",[t._v(\" Select Billing Cycle \")]),a(\"multiselect\",{attrs:{options:t.payment_types,searchable:!1,\"allow-empty\":!1,disabled:t.check_retail_payment_type_disabled,placeholder:t.retail_payment_placeholder},model:{value:t.retail_payment_type,callback:function(e){t.retail_payment_type=e},expression:\"retail_payment_type\"}})],1)]),a(\"div\",{staticClass:\"row mb-2\"},[a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{margin:\"4px 0px\"}},[a(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:t.submit_stripe_checkout}},[t._v(\" Subscribe \")]),a(\"button\",{staticClass:\"red-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" Go Back \")])])])])]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show_subscription,expression:\"show_subscription\"}],staticStyle:{margin:\"10px\"}},[a(\"div\",{staticStyle:{margin:\"10px\",\"margin-left\":\"27\"}},[a(\"h4\",{staticClass:\"mb-0\"},[t._v(\"Subscription Plan\")]),a(\"br\"),a(\"p\",[t._v(\" Your current subscription plan is \"),a(\"strong\",[t._v(t._s(t.stripe_subscription_plans_details.subscription_type))]),t._v(\" \"),\"Free\"!==t.hide_button?a(\"span\",[t._v(\"Valid till \"),a(\"strong\",[t._v(t._s(t.get_subscription_valid_till(t.stripe_subscription_plans_details.subscription_valid_till))+\".\")])]):a(\"span\",[t._v(\"and your current monthly cycle expires on \"),a(\"strong\",[t._v(t._s(t.get_subscription_valid_till(t.stripe_subscription_plans_details.subscription_valid_till))+\".\")])])]),a(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:function(e){t.show_subscription=!t.show_subscription}}},[t._v(\" Upgrade Subscription \")]),\"Free\"!==t.hide_button?a(\"button\",{staticClass:\"red-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:t.show_swal_notification}},[t._v(\" Cancel Subscription \")]):t._e()])])]),t.stripe_addon_plans.length>0&&!t.spinnerOn?a(\"div\",{staticClass:\"card dash-card\"},[a(\"div\",{staticStyle:{margin:\"10px\"}},[a(\"div\",{staticStyle:{margin:\"10px\",\"margin-left\":\"27\"}},[a(\"h4\",{staticClass:\"mb-0\"},[t._v(\"Purchase Cense Add Ons\")]),a(\"br\"),a(\"p\",{directives:[{name:\"show\",rawName:\"v-show\",value:null!=t.credits_balance,expression:\"credits_balance != null\"}],domProps:{innerHTML:t._s(t.credits_balance)}}),a(\"div\",{staticClass:\"row mb-2\"},[a(\"div\",{staticClass:\"col-sm-4\"},[a(\"span\",[t._v(\" Select Add On \")]),a(\"multiselect\",{attrs:{\"track-by\":\"type\",label:\"name\",options:t.stripe_addon_plans,\"custom-label\":t.nameWithLang,placeholder:\"Select one\"},model:{value:t.selected_addon_plan,callback:function(e){t.selected_addon_plan=e},expression:\"selected_addon_plan\"}})],1)]),a(\"button\",{staticClass:\"darkblue-btn\",staticStyle:{padding:\"6px 15px\"},attrs:{type:\"button\"},on:{click:t.submit_stripe_addon_checkout}},[t._v(\" Purchase \")])])])]):t._e(),a(\"div\",{staticClass:\"container-fluid\",staticStyle:{padding:\"0\"},attrs:{id:\"dashboard-chart\"}},[a(\"div\",{staticClass:\"card dash-card\"},[a(\"div\",{staticClass:\"card-header d-flex flex-wrap justify-content-between\"},[a(\"h4\",[t._v(\"Cost for the month of \"+t._s(t.concurrent_users_month))]),a(\"div\",{staticClass:\"card-act\"})]),a(\"div\",{staticClass:\"card-body\"},[a(\"div\",{staticClass:\"chart-box\"},[a(\"area-chart\",{attrs:{labels:t.Concurrent_Users_Data.labels,data:t.Concurrent_Users_Data.data}})],1)])]),a(\"div\",{staticClass:\"card dash-card\"},[t._m(0),a(\"div\",{staticClass:\"card-body\",staticStyle:{width:\"60%\",\"margin-left\":\"10%\"}},[t.piechart_data[0]<=0&&t.piechart_data[1]<=0&&t.piechart_data[2]<=0?a(\"center\",[a(\"h6\",[t._v(\"No Data Available\")])]):t._e(),a(\"canvas\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.piechart_data[0]>0&&t.piechart_data[1]>0&&t.piechart_data[2]>0,expression:\"\\n            piechart_data[0] > 0 &&\\n            piechart_data[1] > 0 &&\\n            piechart_data[2] > 0\\n          \"}],attrs:{id:\"lineChart\"}})],1)])]),a(\"div\",{staticClass:\"modal fade dash-modal\",attrs:{id:\"countrymodal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"countrymodaltitle\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[t._m(1),t._m(2),a(\"form\",{on:{submit:function(e){return e.preventDefault(),t.call_payment(\"country_selected\")}}},[a(\"div\",{staticClass:\"form-group\"},[a(\"multiselect\",{attrs:{options:t.country_list,searchable:!0,\"close-on-select\":!0,taggable:!1,multiple:!1,placeholder:\"Select Country Name\",\"max-height\":200,\"track-by\":\"code\",label:\"name\"},model:{value:t.country_name,callback:function(e){t.country_name=e},expression:\"country_name\"}})],1),a(\"div\",{staticClass:\"btn-wrap text-right\"},[a(\"button\",{staticClass:\"btn btn-link\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:function(e){t.country_name=\"\"}}},[t._v(\" Cancel \")]),a(\"button\",{staticClass:\"darkblue-btn\",attrs:{type:\"submit\"}},[t._v(\"Save\")])])])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"card-header d-flex flex-wrap justify-content-between\"},[a(\"h4\",[t._v(\"Bill Details\")]),a(\"div\",{staticClass:\"card-act\"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{staticStyle:{width:\"auto\"},attrs:{src:\"/img/msg-blue.png\",alt:\"\"}})]),a(\"h6\",[t._v(\" Kindly select the country where your company is registered \")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])}],i=(a(\"a4d3\"),a(\"e01a\"),a(\"99af\"),a(\"7db0\"),a(\"fb6a\"),a(\"b0c0\"),a(\"b64b\"),a(\"d3b7\"),a(\"3ca3\"),a(\"ddb0\"),a(\"2b3d\"),a(\"3d20\")),r=a.n(i),o=a(\"711e\"),c=a(\"bc3a\"),l=a.n(c),p=(a(\"ab70\"),a(\"ea54\")),_=a.n(p),u=a(\"fe33\"),d=a(\"8e5f\"),m=a.n(d),h=a(\"c1df\"),y=a.n(h),b=a(\"61b2\"),f={name:\"Billing\",components:{AreaChart:u[\"a\"],Multiselect:m.a},mixins:[b[\"g\"],b[\"f\"]],data:function(){return{razorpay_subscription_plans:[],select_subscription_plan:[\"Silver\",\"Gold\",\"Plantinum\",\"Enterprise\"],selected_subscription:\"\",subscription_id:\"\",plan_id:\"\",customer_id:\"\",plan_period:[\"Monthly\",\"Yearly\"],selected_period:\"\",order_id:\"\",amount:\"\",pay_success_data:{},subscription_btn_disable:!1,country_list:o[\"a\"],paymentid:\"\",barChart:\"\",backgroundColor:[\"#e67e22\",\"#16a085\",\"#2980b9\"],labels:[\"Exchange of Messages\",\"Execution of Tasks\",\"Audio/Video Interaction\",\"Storage\"],companyid:null,companyname:null,country_name:\"\",payment_currency:\"\",value_currency_top_up:\"\",value_currency_subscription:\"\",INR:[3500,7e3,14e3,35e3],USD:[50,100,200,500],common_currency:[],currency_amount:null,top_up_amount:null,piechart_data:[],user_role:this.$session.get(\"UserInformation\").role,concurrent_users_month:\"\",Concurrent_Users_Data:{labels:[],data:[]},months:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"July\",\"Aug\",\"Sept\",\"Oct\",\"Nov\",\"Dec\"],invoice_details:[],invoice_details_copy:[],total_year:[],year_selected:\"\",spinnerOn:!1,common_currency2:[],INR2:[3500,7e3,14e3,35e3],USD2:[100,300,500],retail_shopify_company:!1,retail_shopify_subscription_plans:[{name:\"Starter\",is_chargeable:!0,monthly_charge:29,annual_charge:{per_month_effective:24.17,actual_charge:290}},{name:\"Premium\",is_chargeable:!0,monthly_charge:99,annual_charge:{per_month_effective:82.5,actual_charge:990}}],retail_non_shopify_subscription_plans:[{name:\"Starter\",is_chargeable:!0,monthly_charge:29},{name:\"Premium\",is_chargeable:!0,monthly_charge:99}],retail_plan_current:null,payment_types:[\"Annual\",\"Monthly\"],retail_payment_type:null,stripe_subscription_plans:null,stripe_subscription_plans_details:{},stripe_addon_plans:[],show_subscription:!1,selected_addon_plan:null,hide_button:\"Free\",credits_balance:null}},created:function(){var t=this;this.country_list=o[\"a\"],this.$session.has(\"CompanyId\")||\"SuperAdmin\"!=this.$session.get(\"UserInformation\").role||toastr.warning(\"Please select a company name from the dropdown\"),\"SuperAdmin\"==this.user_role&&this.$session.has(\"CompanyId\")?(this.companyid=this.$session.get(\"CompanyId\"),this.companyname=this.$session.get(\"CompanyName\")):(this.companyid=this.$session.get(\"UserInformation\").company_id,this.companyname=this.$session.get(\"UserInformation\").company_name),(\"\"!=this.$session.get(\"UserInformation\").country_name||this.$session.has(\"country_name\"))&&(l.a.get(_.a.billing_invoice(),{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){t.total_year=e.data.YearList,t.year_selected=t.total_year[0]})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})),l.a.post(_.a.billing_invoice(),{companyid:this.$session.get(\"UserInformation\").company_id,companyname:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,download_file:!1,year:this.year_selected},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){t.invoice_details=e.data.Bucket_list;for(var a=0;a<t.invoice_details.length;a++)t.invoice_details_copy[a]=t.invoice_details[a].slice(8)})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})));var e=this.$session.get(\"retail_web_framework\");Boolean(e)&&\"shopify\"===e&&(this.retail_shopify_company=!0)},mounted:function(){var t=this;this.get_subscription_details(),this.get_addon_details(),this.get_current_subscription(),this.get_current_subscription_details(),this.check_addons_balance(),\"\"!=this.$session.get(\"UserInformation\").country_name||this.$session.has(\"country_name\")||$(\"#countrymodal\").modal({backdrop:\"static\"}).on(\"hidden.bs.modal\",(function(e){t.$session.has(\"country_name\")||($(\"#countrymodal\").modal(\"hide\"),t.$router.push(\"/bot/dashboard\"))}))},computed:{check_retail_payment_type_disabled:function(){return!(!Boolean(this.retail_plan_current)||!1!==this.retail_plan_current.is_chargeable)},retail_payment_placeholder:function(){return this.check_retail_payment_type_disabled?\"No Billing Cycle Needed for Free Plan\":\"Pick One\"},current_retail_plan_charges:function(){return Boolean(this.retail_plan_current)&&this.retail_plan_current.is_chargeable?\"$\".concat(this.retail_plan_current.monthly_charge,\"/month  or $\").concat(this.retail_plan_current.annual_charge.per_month_effective,\"/month billed at $\").concat(this.retail_plan_current.annual_charge.actual_charge,\" once per year\"):null},check_retail_shopify_form_validations:function(){return null!==this.retail_plan_current&&null!==this.retail_payment_type||null!==this.retail_plan_current&&null==this.retail_payment_type&&!1===this.retail_plan_current.is_chargeable}},methods:{nameWithLang:function(t){var e=t.name,a=t.type;return\"\".concat(e,\" â€” [\").concat(a,\"]\")},show_swal_notification:function(){var t=this;r.a.fire({title:\"Are You Sure?\",text:\"You want to unsubscribe this plan? it will revert you to free plan\",icon:\"warning\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes\"}).then((function(e){1==e.value&&(t.update_subscription_plan_free(),r.a.fire(\"Unsubcribed!\",\"Subscription Canceled Successfully\",\"success\"))}))},get_subscription_valid_till:function(t){return y.a.utc(t).format(\"Do MMMM YYYY\")},update_subscription_plan_free:function(){var t=this;l.a.post(_.a.stripe_payment_gateway(),{company_id:this.companyid,company_name:this.companyname,unsubscribe_plan:!0,email:this.$session.get(\"UserInformation\").email}).then((function(e){if(\"Success\"===e.data.Status){var a=e.data.UserMenu;t.update_sidebar_menu(a),t.$root.$emit(\"SideBarMenuUpdated\",!0),t.update_restriction_list(e.data.RestrictionList),t.get_current_subscription_details()}else r()({title:\"Some Error Occurred, Please Try Again!\",type:\"error\"})})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},get_current_subscription_details:function(){var t=this;this.spinnerOn=!0,l.a.post(_.a.stripe_payment_gateway(),{company_id:this.companyid,company_name:this.companyname,get_active_plan:!0}).then((function(e){\"Success\"===e.data.Status?(t.spinnerOn=!1,t.stripe_subscription_plans_details=e.data.Data.current_subscription,t.hide_button=e.data.Data.current_subscription.subscription_type,t.show_subscription=!0):t.stripe_subscription_plans_details=[]})).catch((function(e){t.spinnerOn=!1,r.a.fire({title:\"Some Error Occurred, Please Try Again!\",type:\"error\"})}))},get_current_subscription:function(){var t=this;l.a.post(_.a.razorpay_communcation(),{company_id:this.companyid,company_name:this.companyname,is_get:!0}).then((function(e){null==e.data?(t.subscription_btn_disable=!0,r()({title:\"No Active Subscription plan found\",type:\"error\",toast:!0,showConfirmButton:!1,timer:2e3})):\"Current Subscription Plan\"==e.data.MSG?(t.selected_subscription=e.data.subscription.subscription_type,t.selected_period=e.data.subscription.period,t.customer_id=e.data.customer_id,t.subscription_btn_disable=!1):\"No Active Subscription plan found\"==e.data.MSG&&(t.customer_id=e.data.customer_id,r()({title:\"No Active Subscription plan found\",type:\"warning\",toast:!0,showConfirmButton:!1,timer:2e3}),t.subscription_btn_disable=!0)})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},check_addons_balance:function(){var t=this;this.spinnerOn=!0,l.a.post(_.a.check_addons_balance(),{company_name:this.companyname,company_id:this.companyid,check_balance:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(t.spinnerOn=!1,1==Boolean(e.data.credits.sms_count)){var a=e.data.credits.sms_count;t.credits_balance=\"Your current SMS credits are <strong> for US region :\"+a.us+\" | for Non-US region: \"+a.non_us+\"</strong>\"}})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},get_addon_details:function(){var t=this;l.a.post(_.a.stripe_payment_gateway(),{get_add_ons:!0}).then((function(e){if(\"No add-ons found in database\"!==e.data.MSG){if(0!=Boolean(e.data.Data)){var a=[];for(var s in e.data.Data)if(e.data.Data[s].Options.length>0)for(var n in e.data.Data[s].Options){var i={};i[\"name\"]=e.data.Data[s].Type,i[\"Price\"]=e.data.Data[s].Price,i[\"Service\"]=e.data.Data[s].Service,\"SmsAddOn\"==e.data.Data[s].Type&&(i[\"type\"]=e.data.Data[s].Options[n].type,i[\"sms_count\"]=e.data.Data[s].Options[n].count),a.push(i)}t.stripe_addon_plans=a}}else t.stripe_addon_plans=[]})).catch((function(t){console.log(t),r.a.fire({title:\"Some Error Occurred, Please Try Again!\",type:\"error\"})}))},get_subscription_details:function(){var t=this;l.a.post(_.a.stripe_payment_gateway(),{company_id:this.companyid,company_name:this.companyname,get_plans:!0}).then((function(e){\"Success\"===e.data.Status&&e.data.Data.data.length>0?t.stripe_subscription_plans=e.data.Data.data:t.stripe_subscription_plans=[]})).catch((function(t){console.log(t),r.a.fire({title:\"Some Error Occurred, Please Try Again!\",type:\"error\"})}))},cancel_subscription:function(){var t=this;l.a.post(_.a.razorpay_communcation(),{is_cancel:!0,subscription_id:this.subscription_id}).then((function(e){\"Subscription cancelled\"==e.data.MSG?t.subscription_btn_disable=!0:r()({title:\"Internal Server Error\",type:\"error\",showConfirmButton:!1,timer:2e3})})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},create_customer:function(){var t=this;if(\"\"!=this.selected_subscription&&\"\"!=this.selected_period){var e=this.selected_period.toLowerCase();for(var a in this.subscription_plans)e==this.subscription_plans[a].period&&this.selected_subscription==this.subscription_plans[a].item.name&&(this.plan_id=this.subscription_plans[a].id);if(\"\"!=this.plan_id)if(\"\"==this.customer_id){var s={name:this.companyname,contact:\"\",email:this.$session.get(\"UserInformation\").email,notes:{Extra:\"Details related to customer\"}};l.a.post(_.a.razorpay_communcation(),{company_id:this.companyid,company_name:this.companyname,create_customer_id:!0,data:s}).then((function(e){if(\"Customer created\"==e.data.MSG){e.data.Customer_Detail;t.customer_id=e.data.Customer_Detail.id,t.create_subscription(t.plan_id,t.customer_id)}else r()({title:\"Internal Server Error\",type:\"error\",text:\"Error occurred while creating Customer ID, Please re-try\",timer:2e3})})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))}else this.create_subscription(this.plan_id,this.customer_id);else r()({title:\"Plan Not Found\",type:\"error\",text:\"Please contact Cense Admin\",showConfirmButton:!1,timer:2e3})}else r()({type:\"info\",text:\"Select Subscription plan and Period\",toast:!0,position:\"top-right\",showConfirmButton:!1,timer:2e3})},create_subscription:function(t,e){var a=this,s={plan_id:t,customer_id:e};l.a.post(_.a.razorpay_communcation(),{create_subscription:!0,data:s}).then((function(t){\"Subscription created\"==t.data.MSG?(a.subscription_id=t.data.Subscription_Detail.id,a.start_payment(a.subscription_id)):r()({title:\"Internal Server Error\",type:\"error\",text:\"Error occurred while creating Subscription, Please re-try\",timer:2e3})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||a.$root.$emit(\"Session_Expired\",t.response.data)}))},start_payment:function(t){var e=this,s={key:\"rzp_live_kVXzbAsNHwU0uJ\",subscription_id:t,name:\"Cense AI\",description:\"Test Transaction\",image:a(\"d95c\"),handler:function(t){var a=t.razorpay_payment_id,s=t.razorpay_subscription_id,n=t.razorpay_signature;e.pay_success_data={},e.pay_success_data={razorpay_payment_id:a,razorpay_subscription_id:s,razorpay_signature:n,razorpay_customer_id:e.customer_id,subscription_status:\"active\",subscription_id:e.subscription_id,plan_id:e.plan_id,subscription_type:e.selected_subscription,subscription_period:e.selected_period},0!=Object.keys(e.pay_success_data).length&&e.add_details_to_server(e.pay_success_data)},notes:{address:\"Razorpay Corporate Office\"},theme:{color:\"#3399cc\"}},n=new Razorpay(s);n.on(\"payment.failed\",(function(t){alert(t.error.code),alert(t.error.description),alert(t.error.source),alert(t.error.step),alert(t.error.reason),alert(t.error.metadata.order_id),alert(t.error.metadata.payment_id)})),n.open()},add_details_to_server:function(t){var e=this;null!=t&&l.a.post(_.a.razorpay_communcation(),{company_id:this.companyid,company_name:this.companyname,verify_subscription:!0,data:t}).then((function(t){\"Subscription verification success\"==t.data.MSG?(r()({title:\"Successfully Subcription Registered\",type:\"success\",timer:2e3}),e.pay_success_data={},e.subscription_btn_disable=!1):(r()({title:\"Internal Server Error\",type:\"error\",text:\"Error occurred while getting Subscription verification status, Please re-try\",toast:!0,timer:2e3}),e.pay_success_data={})})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},toggle_change:function(t){this.common_currency=\"INR\"==t?this.INR:this.USD,this.common_currency2=\"INR\"==t?this.INR2:this.USD2},download_invoice:function(t){var e=this;this.spinnerOn=!0,l()({method:\"post\",url:_.a.billing_invoice(),responseType:\"blob\",data:{companyid:this.$session.get(\"UserInformation\").company_id,companyname:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,download_file:!0,file_name:this.invoice_details[t]},headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(e.spinnerOn=!1,\"Not able to download\"==t.data)e.spinnerOn=!1,toastr.error(\"Due to some internal error, not able to download the file\");else{e.spinnerOn=!1;var a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement(\"a\");s.href=a,s.setAttribute(\"download\",\"Ashish.pdf\"),document.body.appendChild(s),s.click()}})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},call_payment:function(t){var e=this,a=(new Date,this),s={};function n(t,e,n){\"Subscribe\"==n?(s={key:\"rzp_test_SnDTaPnncfliDt\",subscription_id:t,name:\"Cense AI\",description:\"Instill Intelligence\",image:\"/img/cense_image.png\",handler:function(t){a.paymentid=t.razorpay_payment_id,a.value_currency_subscription=\"\"},prefill:{name:\"\",email:\"\",contact:\"\"},notes:{address:\"address\"},theme:{color:\"#283777\"}},i()):\"Pay\"==n&&(s={key:\"rzp_test_SnDTaPnncfliDt\",amount:t,currency:e,name:\"Cense AI\",description:\"Instill Intelligence\",image:\"/img/cense_image.png\",handler:function(t){$('#contact[type=\"tel\"]').value,$('#email[type=\"email\"]').value;a.paymentid=t.razorpay_payment_id,a.value_currency_top_up=\"\"},prefill:{name:\"\",email:\"\",contact:\"\"},notes:{address:\"address\"},theme:{color:\"#283777\"}},i())}function i(){var t=new Razorpay(s);t.open(),event.preventDefault()}\"country_selected\"==t?\"\"==this.country_name.code?alert(\"You need to select country\"):(this.spinnerOn=!0,l.a.post(_.a.edit_profile_url(),{company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,first_name:this.$session.get(\"UserInformation\").first_name,last_name:this.$session.get(\"UserInformation\").last_name,country_name:this.country_name.code,phone_number:this.$session.get(\"UserInformation\").phone_no},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,\"Profile Updated\"==t.data&&(toastr.success(\"Your profile has been updated successfully.\"),e.$session.set(\"country_name\",e.country_name.code),setTimeout((function(){e.$router.go()}),2500)),$(\"#countrymodal\").modal(\"hide\")})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):\"Pay\"==event.target.innerText?\"\"==this.value_currency_top_up?toastr.error(\"Please select an amount to be paid.\"):\"INR\"==this.payment_currency?(this.value_currency_top_up=this.value_currency_top_up.slice(2,-10),this.currency_amount=118*this.value_currency_top_up,this.top_up_amount=this.value_currency_top_up,\"INR\"==this.payment_currency&&(this.top_up_amount/=70),n(this.currency_amount,this.payment_currency,\"Top Up\")):(this.value_currency_top_up=this.value_currency_top_up.slice(2),this.currency_amount=100*this.value_currency_top_up,this.top_up_amount=this.value_currency_top_up,n(this.currency_amount,this.payment_currency,\"Top Up\")):\"Subscribe\"==event.target.innerText&&(this.spinnerOn=!0,\"\"==this.value_currency_subscription?toastr.error(\"Please select an amount to be paid.\"):\"INR\"==this.payment_currency?(this.value_currency_subscription=this.value_currency_subscription.slice(2,-10),this.currency_amount=118*this.value_currency_subscription,this.top_up_amount=this.value_currency_subscription,\"INR\"==this.payment_currency&&(this.top_up_amount/=70),l.a.post(_.a.billing_subscription_url(),{companyid:this.$session.get(\"UserInformation\").company_id,companyname:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,PlanAmount:this.top_up_amount},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){t.data.SubscriptionId?n(t.data.SubscriptionId,\"\",\"Subscribe\"):t.data.Error&&toastr.error(t.data.Error)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))):(this.value_currency_subscription=this.value_currency_subscription.slice(2),this.currency_amount=100*this.value_currency_subscription,this.top_up_amount=this.value_currency_subscription,this.spinnerOn=!0,l.a.post(_.a.billing_subscription_url(),{companyid:this.$session.get(\"UserInformation\").company_id,companyname:this.$session.get(\"UserInformation\").company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,PlanAmount:this.currency_amount},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,t.data.SubscriptionId?n(t.data.SubscriptionId,\"\",\"Subscribe\"):t.data.Error&&toastr.error(t.data.Error)})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))))},check_retail_plan:function(t,e){this.retail_payment_type=null},subscribe_retail_plan:function(){var t=this;this.check_retail_shopify_form_validations?(this.spinnerOn=!0,l.a.post(_.a.subscribe_shopify_billing(),{subscription_plan:this.retail_plan_current,billing_cycle:this.retail_payment_type,company_id:this.companyid,company_name:this.companyname,is_paid_plan:this.retail_plan_current.is_chargeable}).then((function(e){t.spinnerOn=!1,\"Success\"===e.data.status&&(\"Annual\"==t.retail_payment_type?Boolean(e.data.data)&&Boolean(e.data.data.data.appSubscriptionCreate)&&(r()({title:\"Please wait while we redirect You to the Shopify Merchant UI!\",toast:!0,showCancelButton:!1,type:\"info\",showConfirmButton:!1}),setTimeout((function(){window.location=e.data.data.data.appSubscriptionCreate.confirmationUrl}),1e3)):\"Monthly\"==t.retail_payment_type?Boolean(e.data.data.confirmation_url)?setTimeout((function(){window.location=e.data.data.confirmation_url}),1e3):r()({title:\"Some Error Occurred\",text:\"Please Try Again!\",type:\"error\",showCancelButton:!1}):!1===t.retail_plan_current.is_chargeable&&r()({title:\"Success\",type:\"success\",text:\"Thank You for subscribing to our Free Plan!\"}))})).catch((function(e){t.spinnerOn=!1,console.log(e),r()({title:\"Some Error Occurred\",text:\"Please Try Again!\",type:\"error\",showCancelButton:!1})}))):r()({title:\"Please selct all the required values before proceeding!\",type:\"error\",toast:!0,showCancelButton:!1,showConfirmButton:!1})},submit_stripe_checkout:function(){var t=this;if(null!==this.retail_plan_current&&null!==this.retail_payment_type){var e=\"Monthly\"===this.retail_payment_type?this.stripe_subscription_plans.find((function(e){return e.amount/100===t.retail_plan_current.monthly_charge})):this.stripe_subscription_plans.find((function(e){return e.amount/100===t.retail_plan_current.annual_charge.actual_charge}));this.spinnerOn=!0,l.a.post(_.a.stripe_payment_gateway(),{generate_new_request:!0,chosen_plan_data:e,company_id:this.companyid,company_name:this.companyname,request_type:\"Plan\",email:this.$session.get(\"UserInformation\").email}).then((function(e){t.spinnerOn=!1,\"Success\"===e.data.Status?window.location=e.data.Data:r()({title:\"Some Error Occurred, Please Try Again!\",type:\"error\",showCancelButton:!1})})).catch((function(e){t.spinnerOn=!1,console.log(e),r()({title:\"Some Error Occurred, Please Try Again!\",type:\"error\"})}))}else r()({title:\"Please select all given field\",type:\"error\",showCancelButton:!1})},submit_stripe_addon_checkout:function(){var t=this,e={plan_name:this.selected_addon_plan.name,option:this.selected_addon_plan.type,price:this.selected_addon_plan.Price};this.spinnerOn=!0,l.a.post(_.a.stripe_payment_gateway(),{generate_new_request:!0,chosen_plan_data:e,company_id:this.companyid,company_name:this.companyname,request_type:\"AddOn\"}).then((function(e){t.spinnerOn=!1,\"Success\"===e.data.Status?window.location=e.data.Data:r()({title:\"Some Error Occurred, Please Try Again!\",type:\"error\",showCancelButton:!1})})).catch((function(e){t.spinnerOn=!1,console.log(e),r()({title:\"Some Error Occurred, Please Try Again!\",type:\"error\"})}))}}},g=f,v=(a(\"e74b\"),a(\"edeb\"),a(\"2877\")),S=Object(v[\"a\"])(g,s,n,!1,null,\"7722ca70\",null);e[\"default\"]=S.exports},edeb:function(t,e,a){\"use strict\";var s=a(\"3201\"),n=a.n(s);n.a}}]);","extractedComments":[]}