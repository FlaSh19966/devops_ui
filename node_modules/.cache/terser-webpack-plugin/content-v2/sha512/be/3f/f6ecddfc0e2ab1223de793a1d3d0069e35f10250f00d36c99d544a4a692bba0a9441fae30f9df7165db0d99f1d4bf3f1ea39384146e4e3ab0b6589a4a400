{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-677d2e79\"],{\"413f\":function(e,t,a){\"use strict\";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.spinnerOn,expression:\"spinnerOn\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),a(\"div\",{staticClass:\"container-fluid p-0\"},[a(\"div\",{staticClass:\"card dash-card\",staticStyle:{border:\"0\"}},[a(\"div\",{staticClass:\"card dash-card\"},[a(\"div\",{staticClass:\"\\n            card-header\\n            d-block d-sm-flex\\n            flex-wrap\\n            justify-content-between\\n          \"},[a(\"div\",{staticClass:\"card-act ml-auto d-flex flex-wrap\"},[e.templatelist.length>0&&!1===e.is_notification_template?a(\"a\",{staticClass:\"darkblue-btn\",attrs:{id:\"send_email_btn\",href:\"#\",\"data-toggle\":\"modal\",\"data-target\":\"\",title:\"Send Email\"},on:{click:function(t){return e.email_verification_status()}}},[e._v(\" Send Email \")]):e._e(),a(\"a\",{staticClass:\"darkblue-btn\",attrs:{id:\"add_template_btn\",href:\"#\",\"data-toggle\":\"modal\",\"data-target\":\"#templatemodel\",title:\"Add new Template\"},on:{click:e.empty_variable}},[e._v(\" Add Template \")]),a(\"a\",{staticClass:\"red-btn\",attrs:{href:\"javascript:void(0)\",id:\"delete_intent\"},on:{click:e.delete_selected}},[e._v(\" Delete \")])])]),a(\"div\",{staticClass:\"modal fade\",attrs:{id:\"preview_template_visible\",role:\"dialog\",\"aria-labelledby\":\"preview_template_visible\",\"aria-hidden\":\"true\"}},[a(\"div\",{staticClass:\"modal-dialog modal-dialog-centered modal-lg\",attrs:{role:\"document\"}},[a(\"div\",{staticClass:\"modal-content\"},[e._m(0),a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{domProps:{innerHTML:e._s(e.preview_template_data)}})])])])]),a(\"div\",{staticClass:\"card-body py-0\",attrs:{id:\"page\"}},[e.templatelist.length>0?a(\"div\",{staticClass:\"col-sm-12 d-flex px-0\"},[a(\"div\",{staticClass:\"col-sm-4 pl-0\",staticStyle:{height:\"80vh\",\"overflow-y\":\"auto\"}},[a(\"div\",{staticClass:\"table-box\"},[a(\"div\",{staticClass:\"table-responsive\"},[a(\"table\",{staticClass:\"table\",staticStyle:{\"overflow-y\":\"auto\"}},[a(\"thead\",[a(\"th\",{attrs:{scope:\"col\"}},[a(\"div\",{staticClass:\"form-check checkbox checkbox-success\"},[a(\"label\",{staticClass:\"form-check-label\"},[a(\"input\",{staticClass:\"form-check-input\",attrs:{id:\"selectall\",type:\"checkbox\"},on:{change:function(t){return e.selected_templates(\"all\")}}}),a(\"span\",{staticClass:\"icn\"})])])]),a(\"th\",{staticClass:\"text-left\",staticStyle:{font:\"normal normal normal 16px/22px Roboto\",\"letter-spacing\":\"0px\",color:\"#414141\"},attrs:{scope:\"col\"}},[e._v(\" TEMPLATES \")])]),a(\"tbody\",e._l(e.templatelist,(function(t,i){return a(\"tr\",{key:i,class:e.check_current_template_active(i)},[a(\"td\",{attrs:{scope:\"col\"}},[a(\"div\",{staticClass:\"form-check checkbox checkbox-success\"},[a(\"label\",{staticClass:\"form-check-label\"},[a(\"input\",{staticClass:\"form-check-input\",attrs:{type:\"checkbox\",id:i},on:{change:function(a){return e.selected_templates(t.template_id)}}}),a(\"span\",{staticClass:\"icn\"})])])]),a(\"td\",{staticStyle:{cursor:\"pointer\"},attrs:{title:t.template_name},on:{click:function(t){return e.show_template(i)}}},[[a(\"p\",{staticStyle:{\"margin-bottom\":\"0\"}},[e._v(\" \"+e._s(t.template_name)+\" \")])]],2)])})),0)])])])]),e.templatelist.length>0?a(\"div\",{staticClass:\"col-sm-8 pr-0\",staticStyle:{\"overflow-y\":\"auto\"}},[a(\"div\",{staticStyle:{border:\"1px solid #dbe2e8\"}},[a(\"div\",{staticClass:\"col-sm-12\"},[a(\"div\",{staticStyle:{color:\"#414141\"}},[a(\"h5\",{staticClass:\"mb-0 pt-2 d-flex\"},[a(\"span\",{staticClass:\"mt-2 mb-0\"},[e._v(\"Template Details\")]),a(\"a\",{staticClass:\"ml-auto mt-2 mb-0\",staticStyle:{color:\"rgb(39, 54, 121)\"},attrs:{href:\"javascript:void(0)\",title:\"Click Here for Preview\",\"data-toggle\":\"modal\"},on:{click:e.preview_template}},[a(\"p\",{staticClass:\"labe1\",staticStyle:{\"margin-right\":\"1rem\",\"font-size\":\"1.25rem\"}},[e._v(\" Preview \")])]),a(\"span\",{staticClass:\"mr-2 mt-2\",staticStyle:{cursor:\"pointer\"},domProps:{innerHTML:e._s(e.pencil_svg)},on:{click:e.edit_template_details}})])])]),a(\"hr\",{staticStyle:{\"margin-top\":\"0\"}}),a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(1),e.isEditTemplate?a(\"div\",[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:e.current_template.template_name,expression:\"current_template.template_name\",modifiers:{trim:!0}}],staticClass:\"form-control\",staticStyle:{padding:\"0.375rem 0.75rem\"},attrs:{id:\"edit_template_name_id\",type:\"text\",placeholder:\"Enter Template Name\"},domProps:{value:e.current_template.template_name},on:{keyup:e.validate_edit_template_name,input:function(t){t.target.composing||e.$set(e.current_template,\"template_name\",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.edit_template_name_already_exist,expression:\"edit_template_name_already_exist\"}],staticStyle:{color:\"red\"}},[e._v(\"A Template with this name already exists.\")])]):a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"p\",[e._v(e._s(e.current_template.template_name))])])]),a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(2),e.isEditTemplate?a(\"div\",[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:e.current_template.subject,expression:\"current_template.subject\",modifiers:{trim:!0}}],staticClass:\"form-control\",staticStyle:{padding:\"0.375rem 0.75rem\"},attrs:{type:\"text\",placeholder:\"Enter Template Name\"},domProps:{value:e.current_template.subject},on:{input:function(t){t.target.composing||e.$set(e.current_template,\"subject\",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]):a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"p\",[e._v(e._s(e.current_template.subject))])])]),e.isEditTemplate||null==e.current_template.email?e.is_edit_email&&e.isEditTemplate?a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(4),e._m(5)]):e._e():a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(3),a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"span\",{domProps:{innerHTML:e._s(e.current_template.email)}})])]),e.isEditTemplate||!0!==Boolean(e.current_template.template_image_name)||!0!==Boolean(e.current_template.image_redirect_url)?e.isEditTemplate?a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(8),a(\"div\",{staticStyle:{display:\"flex\",margin:\"1%\"}},[a(\"div\",{staticClass:\"radio\"},[a(\"label\",{staticStyle:{\"vertical-align\":\"text-top\"}},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.is_edit_image_needed,expression:\"is_edit_image_needed\"}],attrs:{type:\"radio\",value:\"yes\",name:\"is_edit_image_needed\"},domProps:{checked:e._q(e.is_edit_image_needed,\"yes\")},on:{change:function(t){e.is_edit_image_needed=\"yes\"}}}),a(\"span\",{staticClass:\"icn\",attrs:{id:\"radio\"}}),e._v(\" Yes \")])]),a(\"div\",{staticClass:\"radio\",staticStyle:{\"margin-left\":\"2%\"}},[a(\"label\",{staticStyle:{\"vertical-align\":\"text-top\"}},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.is_edit_image_needed,expression:\"is_edit_image_needed\"}],attrs:{type:\"radio\",value:\"none\",name:\"is_edit_image_needed\"},domProps:{checked:e._q(e.is_edit_image_needed,\"none\")},on:{change:function(t){e.is_edit_image_needed=\"none\"}}}),a(\"span\",{staticClass:\"icn\",attrs:{id:\"radio\"}}),e._v(\" No \")])])]),\"yes\"==e.is_edit_image_needed?a(\"div\",{staticClass:\"custom-file\",staticStyle:{\"margin-bottom\":\"1rem\"}},[a(\"input\",{staticClass:\"custom-file-input\",attrs:{type:\"file\",id:\"inputFile2\"},on:{change:e.fileinput2}}),a(\"label\",{staticClass:\"custom-file-label form-control\",staticStyle:{\"font-weight\":\"400\",\"line-height\":\"10px\",\"padding-left\":\"15px\"},attrs:{for:\"file\"}},[e._v(e._s(e.edited_file_label))])]):e._e(),\"yes\"==e.is_edit_image_needed?a(\"div\",[a(\"h5\",[e._v(\"Image Redirect URL\")]),a(\"label\",[e._v(\" (Customer will be redirected to this link when they click on the image) \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.edit_img_redirect_url,expression:\"edit_img_redirect_url\"}],staticClass:\"form-control\",staticStyle:{padding:\"0.375rem 0.75rem\"},attrs:{type:\"text\",placeholder:\"(e.g, https://cense.ai)\"},domProps:{value:e.edit_img_redirect_url},on:{input:function(t){t.target.composing||(e.edit_img_redirect_url=t.target.value)}}})]):e._e()]):e._e():a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(6),a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"p\",[e._v(e._s(e.current_template.template_image_name))])]),e._m(7),a(\"p\",[e._v(\" (Customer will be redirected to this link when they click on the image) \")]),a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"p\",[e._v(e._s(e.current_template.image_redirect_url))])])]),e.isEditTemplate||null==e.current_template.sms?e.is_edit_sms&&e.isEditTemplate?a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(10),a(\"div\",[a(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.current_template.sms,expression:\"current_template.sms\"}],staticClass:\"form-control\",staticStyle:{padding:\"0.375rem 0.75rem\"},attrs:{maxlength:\"160\",id:\"exampleFormControlTextarea1\",rows:\"3\"},domProps:{value:e.current_template.sms},on:{input:function(t){t.target.composing||e.$set(e.current_template,\"sms\",t.target.value)}}})])]):e._e():a(\"div\",{staticClass:\"col-sm-12\",staticStyle:{\"margin-bottom\":\"1rem\"}},[e._m(9),a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"p\",[e._v(e._s(e.current_template.sms))])])]),e.isEditTemplate?a(\"div\",{staticClass:\"modal-footer\"},[a(\"div\",{staticClass:\"dash-modal\"},[a(\"div\",{staticClass:\"btn-wrap text-right mt-0 py-0 border-top-0\"},[a(\"button\",{staticClass:\"btn btn-link\",staticStyle:{\"border-radius\":\"0\"},attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:e.edit_template_details}},[e._v(\" Cancel \")]),a(\"button\",{staticClass:\"darkblue-btn\",attrs:{type:\"submit\",id:\"res_n_int_save\"},on:{click:function(t){return e.edit_template()}}},[e._v(\" Save \")])])])]):e._e()])]):e._e()]):e.spinnerOn?e._e():a(\"div\",{staticClass:\"col-sm-12 d-flex px-0 py-5\"},[a(\"h4\",{staticClass:\"mx-auto\"},[e._v(\" Looks like you don't have any templates added. Let's begin by clicking on Add Template. \")])]),a(\"div\",{staticClass:\"pagin-table pb-3\",staticStyle:{\"margin-top\":\"2%\"}},[a(\"nav\",{attrs:{\"aria-label\":\"Page navigation example\"}},[a(\"ul\",{staticClass:\"pagination justify-content-center\"},[a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(t){return e.page_require(e.page_no-1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-left\",transform:\"translate(105.806 15.204) rotate(180)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])]),e._l(e.page_array,(function(t){return a(\"li\",{key:t,class:\"page-item \"+e.pagination_class(t)},[\"...s\"==t||\"...l\"==t?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(a){return e.page_require(t)}}},[e._v(\"...\")]):e._e(),\"...s\"!=t&&\"...l\"!=t?a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(a){return e.page_require(t)}}},[e._v(e._s(t))]):e._e()])})),a(\"li\",{staticClass:\"page-item\"},[a(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(t){return e.page_require(e.page_no+1)}}},[a(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[a(\"g\",{attrs:{id:\"arrow-point-to-right\",transform:\"translate(-97.139 0)\"}},[a(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])])],2)])])])])])]),a(\"div\",{staticClass:\"modal fade dash-modal\",attrs:{id:\"sendemail\",role:\"dialog\",\"data-backdrop\":\"static\",\"data-keyboard\":\"false\"}},[a(\"div\",{staticClass:\"modal-dialog\"},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[e._m(11),a(\"h3\",[e._v(\"Send Email\")]),a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:e.empty_variable}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])]),a(\"div\",{staticClass:\"form-group\"},[e._m(12),a(\"div\",{staticStyle:{\"padding-left\":\"20px\"}},[a(\"p\",[e._v(e._s(e.current_template.template_name))])])]),a(\"div\",{staticClass:\"form-group\"},[a(\"div\",{staticClass:\"d-flex\"},[e._m(13),e.send_email_all_customer?e._e():a(\"span\",{staticStyle:{\"margin-left\":\"12px\",\"margin-top\":\"10px !important\",color:\"#0645ad\"}},[a(\"i\",{staticClass:\"fa fa-info-circle\",staticStyle:{\"font-size\":\"16px\"},attrs:{\"aria-hidden\":\"true\",title:\"you can also specify name while adding new email in this way (john.d@mail.com,John Doe), note this would only work in the case where you add new email.\"}})])]),a(\"div\",{staticClass:\"radio my-auto\",staticStyle:{\"padding-left\":\"20px\"}},[a(\"label\",[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.send_email_all_customer,expression:\"send_email_all_customer\"}],attrs:{type:\"radio\",id:\"send_email_all_customer_true_id\"},domProps:{value:!0,checked:e._q(e.send_email_all_customer,!0)},on:{change:function(t){e.send_email_all_customer=!0}}}),a(\"span\",{staticClass:\"icn\",attrs:{id:\"filter_portal_user_radio\"}}),e._v(\" All Customer \")]),a(\"label\",[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.send_email_all_customer,expression:\"send_email_all_customer\"}],attrs:{type:\"radio\",id:\"send_email_all_customer_false_id\"},domProps:{value:!1,checked:e._q(e.send_email_all_customer,!1)},on:{change:function(t){e.send_email_all_customer=!1}}}),a(\"span\",{staticClass:\"icn\"}),e._v(\" Specific Customer \")])])]),e.send_email_all_customer?e._e():a(\"div\",{staticClass:\"form-group\"},[a(\"multiselect\",{attrs:{options:e.customers_list,id:\"specific_customer_list_id\",searchable:!0,\"close-on-select\":!1,multiple:!0,taggable:!0,\"tag-position\":\"top\",\"tag-placeholder\":\"Add this as new email\",placeholder:\"Search customer email or type in to add a new email\",\"max-height\":400,label:\"email\",\"track-by\":\"email\",\"open-direction\":\"below\"},on:{tag:e.addTag},model:{value:e.specific_customer_list,callback:function(t){e.specific_customer_list=t},expression:\"specific_customer_list\"}})],1)]),a(\"div\",{staticClass:\"modal-footer\"},[a(\"div\",{staticClass:\"btn-wrap text-right mt-0 py-0 border-top-0\"},[a(\"button\",{staticClass:\"btn btn-link\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:e.empty_variable}},[e._v(\" Cancel \")]),a(\"button\",{staticClass:\"darkblue-btn\",attrs:{type:\"submit\",id:\"res_n_int_save\"},on:{click:function(t){return e.send_email()}}},[e._v(\" Send \")])])])])])]),a(\"div\",{staticClass:\"modal fade dash-modal\",attrs:{id:\"templatemodel\",role:\"dialog\",\"data-backdrop\":\"static\",\"data-keyboard\":\"false\"}},[a(\"div\",{staticClass:\"modal-dialog modal-lg\"},[a(\"div\",{staticClass:\"modal-content\"},[a(\"div\",{staticClass:\"modal-body\"},[e._m(14),a(\"div\",{staticClass:\"form-group\"},[a(\"label\",[e._v(\"Template Name\")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:e.template_name,expression:\"template_name\",modifiers:{trim:!0}}],staticClass:\"form-control\",attrs:{id:\"template_name_add_id\",type:\"text\",placeholder:\"Enter Template Name\"},domProps:{value:e.template_name},on:{keyup:e.validate_template_name,input:function(t){t.target.composing||(e.template_name=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.template_name_already_exist,expression:\"template_name_already_exist\"}],staticStyle:{color:\"red\"}},[e._v(\"A Template with this name already exists.\")])]),a(\"div\",{staticClass:\"form-group\"},[a(\"label\",[e._v(\"Enter Email Subject\")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.email_subject,expression:\"email_subject\"}],staticClass:\"form-control\",attrs:{type:\"text\",placeholder:\"Enter Email Subject\"},domProps:{value:e.email_subject},on:{input:function(t){t.target.composing||(e.email_subject=t.target.value)}}})]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.is_email,expression:\"is_email\"}],staticClass:\"form-group\"},[e._m(15),a(\"div\",{attrs:{id:\"editor\"}})]),a(\"div\",{staticClass:\"form-group\"},[a(\"label\",[e._v(\"Add Image in Email\")]),a(\"label\",{staticStyle:{\"padding-left\":\"0.3rem\"}},[e._v(\" (Preferred size: 1080p x 720p) \")]),a(\"div\",{staticStyle:{display:\"flex\",margin:\"1%\"}},[a(\"div\",{staticClass:\"radio\"},[a(\"label\",{staticStyle:{\"vertical-align\":\"text-top\"}},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.is_image_needed,expression:\"is_image_needed\"}],attrs:{type:\"radio\",value:\"yes\",name:\"is_image_needed\"},domProps:{checked:e._q(e.is_image_needed,\"yes\")},on:{change:function(t){e.is_image_needed=\"yes\"}}}),a(\"span\",{staticClass:\"icn\",attrs:{id:\"radio\"}}),e._v(\" Yes \")])]),a(\"div\",{staticClass:\"radio\",staticStyle:{\"margin-left\":\"2%\"}},[a(\"label\",{staticStyle:{\"vertical-align\":\"text-top\"}},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.is_image_needed,expression:\"is_image_needed\"}],attrs:{type:\"radio\",value:\"none\",name:\"is_image_needed\"},domProps:{checked:e._q(e.is_image_needed,\"none\")},on:{change:function(t){e.is_image_needed=\"none\"}}}),a(\"span\",{staticClass:\"icn\",attrs:{id:\"radio\"}}),e._v(\" No \")])])]),\"yes\"==e.is_image_needed?a(\"div\",{staticClass:\"custom-file\"},[a(\"input\",{staticClass:\"custom-file-input\",attrs:{type:\"file\",id:\"inputFile\"},on:{change:e.fileinput1}}),a(\"label\",{staticClass:\"custom-file-label form-control\",staticStyle:{\"font-weight\":\"400\",\"line-height\":\"20px\",\"padding-left\":\"15px\"},attrs:{for:\"file\"}},[e._v(e._s(e.file_label))])]):e._e()]),\"yes\"==e.is_image_needed?a(\"div\",{staticClass:\"form-group\"},[a(\"label\",[e._v(\"Image Redirect URL\")]),a(\"label\",[e._v(\" (Customer will be redirected to this link when they click on the image) \")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.img_redirect_url,expression:\"img_redirect_url\"}],staticClass:\"form-control\",attrs:{type:\"text\",placeholder:\"(e.g, https://cense.ai)\"},domProps:{value:e.img_redirect_url},on:{input:function(t){t.target.composing||(e.img_redirect_url=t.target.value)}}})]):e._e()]),a(\"div\",{staticClass:\"modal-footer\"},[a(\"div\",{staticClass:\"btn-wrap text-right mt-0 py-0 border-top-0\"},[a(\"button\",{staticClass:\"btn btn-link\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:e.empty_variable}},[e._v(\" Cancel \")]),a(\"button\",{staticClass:\"darkblue-btn\",attrs:{type:\"submit\",id:\"res_n_int_save\"},on:{click:function(t){return e.save_template()}}},[e._v(\" Save \")])])])])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"modal-header\"},[a(\"h5\",{staticClass:\"modal-title\"},[e._v(\" Email Preview (Customer will recieve email like this template format) \")]),a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\" Template Name \")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\" Email Subject \")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"Email Body\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"Email Body\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"form-group\"},[a(\"div\",{attrs:{id:\"edit_editor\"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"Image Name\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\" Image Redirect URL \")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[e._v(\" Add Image in Email\"),a(\"label\",{staticStyle:{\"font-size\":\"17px\",\"font-weight\":\"400\",\"padding-left\":\"0.3rem\"}},[e._v(\" (Preferred size: 1080p x 720p) \")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"SMS\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"SMS\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/msg-blue.png\",alt:\"\"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"Template Name\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"h5\",[a(\"p\",{staticClass:\"mt-2 mb-0\",staticStyle:{color:\"#414141\"}},[e._v(\"Send Email to\")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[a(\"div\",{staticClass:\"head-icn\"},[a(\"img\",{attrs:{src:\"/img/msg-blue.png\",alt:\"\"}})]),a(\"h3\",[e._v(\"Template\")]),a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"}},[a(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"d-flex\"},[a(\"label\",{staticStyle:{\"margin-top\":\"2px !important\",\"margin-bottom\":\"7px !important\"}},[e._v(\"Enter Email Body\")]),a(\"span\",{staticStyle:{\"margin-left\":\"12px\",\"margin-bottom\":\"5px !important\",color:\"#0645ad\"}},[a(\"i\",{staticClass:\"fa fa-info-circle\",staticStyle:{\"font-size\":\"16px\"},attrs:{\"aria-hidden\":\"true\",title:\"To Display customer full name in email body use {full_name} and for customer first name use {first_name}. (Example Hi {full_name} would display Hi FirstName LastName).\"}})])])}],n=(a(\"4de4\"),a(\"b0c0\"),a(\"4fad\"),a(\"d3b7\"),a(\"ac1f\"),a(\"25f0\"),a(\"5319\"),a(\"1276\"),a(\"5873\")),l=a(\"bc3a\"),o=a.n(l),r=a(\"3d20\"),m=a.n(r),c=a(\"ea54\"),d=a.n(c),_=a(\"61b2\"),p=a(\"8e5f\"),u=a.n(p),h={name:\"EmailTemplatePage\",components:{VueEditor:n[\"a\"],Multiselect:u.a},mixins:[_[\"b\"],_[\"d\"]],data:function(){return{pencil_svg:' <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.546\" height=\"15.461\" viewBox=\"0 0 15.546 15.461\"><defs><style>.a{fill:#9e9e9e;}</style></defs><g transform=\"translate(-747.888 -356.769)\"><path class=\"a\" d=\"M759.416,356.769a2.358,2.358,0,0,1,1.777.662c.534.513,1.072,1.025,1.567,1.575a2.3,2.3,0,0,1-.071,3.325c-2.736,2.76-5.494,5.5-8.238,8.251a1.381,1.381,0,0,1-.758.288c-.719.174-1.429.379-2.144.572-.932.251-1.862.5-2.795.751-.6.158-.989-.213-.832-.807q.689-2.595,1.406-5.182a1.164,1.164,0,0,1,.289-.487q4.091-4.107,8.2-8.2A2.265,2.265,0,0,1,759.416,356.769Zm-1.989,2.956-6.54,6.538,3.025,3.024,6.538-6.537Zm4.023,2.165c.118-.135.225-.269.343-.392a1.134,1.134,0,0,0,0-1.734c-.46-.466-.926-.925-1.388-1.39a1.166,1.166,0,0,0-.861-.368c-.578,0-.881.4-1.214.76Zm-12.084,8.863,3.2-.863-2.337-2.331Z\" transform=\"translate(0)\"/><path class=\"a\" d=\"M813.942,422.6l-.789-.8,3.821-3.819.784.8Z\" transform=\"translate(-59.648 -55.947)\"/></g></svg>',company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,spinnerOn:!1,template_name:\"\",save_sms:\"\",save_email:\"\",is_sms:!1,is_email:!0,save_subject:\"\",is_publish_email:!0,is_publish_sms:!0,is_edit_sms:!1,is_edit_email:!0,verification_status:null,templatelist:[],checked_list:[],customToolbar:[[\"bold\",\"italic\",\"underline\"],[{align:[]}],[{color:[]},{background:[]}],[{list:\"ordered\"},{list:\"bullet\"}],[\"link\"]],quill:\"\",quill_edit:\"\",slot_variable:{},current_template:[],old_template_name:\"\",isEditTemplate:!1,number_of_rows:null,total_pages:null,page_no:1,per_page:10,image_file:null,image_file_2:null,is_image_needed:\"none\",is_edit_image_needed:\"none\",email_subject:\"\",reg_url:/https:\\/\\/[(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)/i,is_edit_reg_url:/https:\\/\\/[(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)/i,img_redirect_url:\"\",edit_img_redirect_url:\"\",file_label:\"Choose file\",edited_file_label:\"Choose file\",preview_template_data:\"\",template_name_already_exist:!1,edit_template_name_already_exist:!1,page_array:[],send_email_all_customer:!0,customers_list:[],specific_customer_list:[],disable_btn_expired:!1,email_reg:/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/}},props:{is_notification_template:Boolean},watch:{},computed:{validURL:function(){return!!this.reg_url.test(this.img_redirect_url)},valid_edit_URL:function(){return!!this.is_edit_reg_url.test(this.edit_img_redirect_url)}},created:function(){\"SuperAdmin\"==this.$session.get(\"UserInformation\").role?(this.companyid=this.$session.get(\"CompanyId\"),this.companyname=this.$session.get(\"CompanyName\")):(this.companyid=this.$session.get(\"UserInformation\").company_id,this.companyname=this.$session.get(\"UserInformation\").company_name)},mounted:function(){var e=this;setTimeout((function(){e.freeze_portal()}),3e3),this.$root.$on(\"VariantsDisabled\",(function(t){!0===t&&(e.disable_btn_expired=!0)})),this.load_templates(),!1===this.is_notification_template&&this.load_customer_list();var t=this;$(\"#selectall\").click((function(){this.isEditTemplate=!1,this.is_sms=!1,this.is_email=!0,$(this).is(\":checked\")?$(\"input:checkbox\").prop(\"checked\",!0):(t.checked_list=[],$(\"input:checkbox\").prop(\"checked\",!1))})),this.editor(),!0===this.is_notification_template&&this.load_slot_variable()},methods:{load_slot_variable:function(){var e=this;this.spinnerOn=!0,o.a.post(d.a.form_automation_dialog_tree(),{company_id:this.$session.get(\"UserInformation\").company_id,company_name:this.$session.get(\"UserInformation\").company_name,is_get_slot_variable:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(e.spinnerOn=!1,\"Success\"==t.data.status){e.slot_variable={};for(var a=0;a<t.data.slots_list.length;a++){var i=t.data.slots_list[a];e.slot_variable[i]=\"{\"+i+\"}\"}e.insert_variable(\"quill\",e.slot_variable)}else m()({text:\"Internal Server Error\",toast:!0,position:\"top-end\",type:\"error\",showConfirmButton:!1,timer:5e3})})).catch((function(t){e.insert_variable(\"quill\",e.slot_variable),e.spinnerOn=!1,410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},editor:function(){var e=this;this.quill=new Quill(\"#editor\",{modules:{toolbar:[[\"bold\",\"italic\",\"underline\"],[\"link\"],[{align:[]}],[{color:[]},{background:[]}],[{list:\"ordered\"},{list:\"bullet\"}]]},theme:\"snow\"}),this.quill.on(\"text-change\",(function(){e.$emit(\"input\",e.quill.getText()?e.quill.root.innerHTML:\"\"),e.save_email=e.quill.getText()?e.quill.root.innerHTML:\"\"}))},edit_editor:function(){var e=this;this.quill_edit=new Quill(\"#edit_editor\",{modules:{toolbar:[[\"bold\",\"italic\",\"underline\"],[\"link\"],[{align:[]}],[{color:[]},{background:[]}],[{list:\"ordered\"},{list:\"bullet\"}]]},theme:\"snow\"}),this.quill_edit.on(\"text-change\",(function(){e.$emit(\"input\",e.quill_edit.getText()?e.quill_edit.root.innerHTML:\"\"),e.current_template.email=e.quill_edit.getText()?e.quill_edit.root.innerHTML:\"\"})),this.quill_edit.root.innerHTML=this.current_template.email,this.insert_variable(\"quill_edit\",this.slot_variable)},insert_variable:function(e,t){if(!0===this.is_notification_template){var a={\"No slot variable\":\"\"},i=new QuillToolbarDropDown({label:\"Insert Variable\",rememberSelection:!1,id:\"dropdown_id\"});0===Object.entries(t).length&&t.constructor===Object?i.setItems(a):i.setItems(t),i.onSelect=function(e,t,a){var i=a.selection.savedRange,s=i.index,n=i.length;a.deleteText(s,n),a.insertText(s,t),a.setSelection(s+t.length)},i.attach(this.quill),\"quill_edit\"===e&&i.attach(this.quill_edit)}},addTag:function(e){var t=[];if(t=e.split(\",\"),t.length>2)m()({text:\"Please add valid tag\",type:\"warning\",showConfirmButton:!0,timer:4500});else{var a=t[0],i=Boolean(t[1])?t[1]:\" \";if(this.email_reg.test(a)){var s={customer_name:i,email:a};this.customers_list.push(s),this.specific_customer_list.push(s)}else m()({text:\"Please enter a valid email address\",type:\"warning\",showConfirmButton:!0,timer:4500})}},load_customer_list:function(){var e=this;this.spinnerOn=!0,o.a.post(d.a.send_offer_to_customers(),{company_id:this.company_id,company_name:this.company_name,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,get_customers_list:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,200==t.status&&(e.customers_list=t.data.customers_list)})).catch((function(t){e.spinnerOn=!1,410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},email_verification_status:function(){var e=this;this.disable_btn_expired?this.show_subscription_expired_swal():(this.spinnerOn=!0,o.a.post(d.a.product_settings(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,is_email_verification_status:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,\"\"!=t.data&&null!=t.data&&\"Internal server Error\"!=t.data?(e.verification_status=t.data.verification_status,\"Success\"==e.verification_status?($(\"#sendemail\").modal(\"show\"),e.load_customer_list()):m()({text:\"It seems as if your Sender Email has not been configured yet, please go the Settings Tab and configure it under Email Configuration.\",type:\"error\",showConfirmButton:!0,timer:13e3})):toastr.error(\"Internal Server Error\")})).catch((function(t){e.spinnerOn=!1,toastr.error(\"Some Error Occurred.\"),410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)})))},validate_template_name:function(){var e=this;o.a.post(d.a.template_promotional_email(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,subscription:this.$session.get(\"UserInformation\").subscription,is_template_present:!0,is_notification:this.is_notification_template,template_name:this.template_name},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){\"Not Exists\"==t.data.MSG?(e.template_name_already_exist=!1,document.getElementById(\"template_name_add_id\").style.border=null,\"\"!=e.template_name&&(document.getElementById(\"template_name_add_id\").style.border=\"1px solid #00f000\")):\"Already Exists\"==t.data.MSG&&(e.template_name_already_exist=!0,document.getElementById(\"template_name_add_id\").style.border=\"1px solid red\")})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},validate_edit_template_name:function(){var e=this;o.a.post(d.a.template_promotional_email(),{company_name:this.companyname,company_id:this.companyid,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,subscription:this.$session.get(\"UserInformation\").subscription,is_template_present:!0,is_notification:this.is_notification_template,template_name:this.current_template.template_name},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){\"Not Exists\"==t.data.MSG?(e.edit_template_name_already_exist=!1,document.getElementById(\"edit_template_name_id\").style.border=null,\"\"!=e.current_template.template_name&&(document.getElementById(\"edit_template_name_id\").style.border=\"1px solid #00f000\")):\"Already Exists\"==t.data.MSG&&(e.old_template_name==e.current_template.template_name?(e.edit_template_name_already_exist=!1,document.getElementById(\"edit_template_name_id\").style.border=null):(e.edit_template_name_already_exist=!0,document.getElementById(\"edit_template_name_id\").style.border=\"1px solid red\"))})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},preview_template:function(){var e=this;this.spinnerOn=!0,o.a.post(d.a.template_promotional_email(),{company_id:this.company_id,company_name:this.company_name,is_preview:!0,template_id:this.current_template.template_id,is_notification:this.is_notification_template},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,null!=t.data&&(e.preview_template_data=t.data.Template,$(\"#preview_template_visible\").modal(\"show\"))})).catch((function(t){e.spinnerOn=!1,410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},send_email_confirm_prompt_text:function(e){return e?\"You are about to send bulk e-mails.\":\"You are about to send e-mails to specific customers.\"},send_email:function(){var e=this;this.send_email_all_customer||Boolean(this.specific_customer_list.length>0)?m.a.fire({title:this.send_email_confirm_prompt_text(this.send_email_all_customer),text:\"Please confirm\",showCancelButton:!0,type:\"warning\",confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, Confirm!!\"}).then((function(t){t.value&&($(\"#sendemail\").modal(\"hide\"),e.spinnerOn=!0,o.a.post(d.a.send_offer_to_customers(),{company_id:e.company_id,company_name:e.company_name,email:e.$session.get(\"UserInformation\").email,license_key:e.$session.get(\"UserInformation\").license_key,token:e.$session.get(\"UserInformation\").tokens,send_email:!0,send_email_all_customer:e.send_email_all_customer,specific_customer_list:1!=e.send_email_all_customer?e.specific_customer_list:[],template_id:e.current_template.template_id},{headers:{Authorization:\"Bearer \".concat(e.$session.get(\"at\"))}}).then((function(t){e.spinnerOn=!1,null!=t.data?\"Sending Email\"===t.data.MSG?m()({text:\"Email is being  sent successfully.\",type:\"success\",timer:5e3,title:\"Success\"}).then((function(t){$(\"#sendemail\").modal(\"hide\"),e.empty_variable()})):\"Please upgrade your plan to send emails\"===t.data.MSG?m()({type:\"warning\",text:\"Please upgrade your plan to send emails.\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",confirmButtonText:\"Upgrade Now\",cancelButtonText:\"Later\",cancelButtonColor:\"#d33\"}).then((function(t){1==t.value&&e.$router.push({name:\"Settings\",params:{Subscription:!0}})})):m()({text:\"Internal Server Error\",type:\"error\",timer:2e3}):m()({text:\"Internal Server Error\",type:\"error\",timer:2e3})})).catch((function(t){e.spinnerOn=!1,410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)})))})):m()({text:\"Please select at least one email\",type:\"warning\",timer:5e3})},selected_templates:function(e){if(\"all\"==e)if(event.target.checked){for(var t in this.checked_list=[],this.templatelist)this.checked_list.push(this.templatelist[t].template_id);$(\"input:checkbox\").prop(\"checked\",!1);for(var a=0;a<this.checked_list.length;a++)$(\"#\"+[a]).prop(\"checked\",!0),$(\"#selectall\").prop(\"checked\",!0)}else event.target.checked||(this.checked_list=[],$(\"input:checkbox\").prop(\"checked\",!1));else if(event.target.checked)this.checked_list.push(e);else if(!event.target.checked){var i=document.querySelector(\"#selectall\");i.checked&&(i.checked=!1);var s=this.checked_list.filter((function(t){return t!=e}));this.checked_list=s}},load_templates:function(){var e=this;this.spinnerOn=!0,o.a.post(d.a.template_promotional_email(),{company_id:this.company_id,company_name:this.company_name,is_get:!0,is_notification:this.is_notification_template,page_no:this.page_no,per_page:this.per_page},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){if(e.spinnerOn=!1,null!=t.data){if(e.number_of_rows=t.data.pagecount,e.total_pages=Math.ceil(e.number_of_rows/e.per_page),\"DB OPERATION UNSUCCESSFUL\"===t.data)return void(e.templatelist=[]);e.templatelist=t.data.data,e.templatelist.length>0&&e.show_template(0),e.isEditTemplate=!1}e.setpagination(e.page_no)})).catch((function(t){e.spinnerOn=!1,410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)}))},fileinput1:function(e){var t=e.target.files||e.dataTransfer.files;if(\"image/png\"===t[0].type||\"image/jpeg\"===t[0].type){if(!t.length)return;this.file_label=t[0].name,this.createImage(t[0])}else m()({text:\"Please Select an Image of type PNG or JPEG\",type:\"error\",timer:2500})},createImage:function(e,t){var a=this,i=new FileReader;i.onload=function(e){a.image_file=e.target.result.split(\"base64,\")[1]},i.readAsDataURL(e)},fileinput2:function(e){var t=e.target.files||e.dataTransfer.files;if(\"image/png\"===t[0].type||\"image/jpeg\"===t[0].type){if(!t.length)return;this.old_edited_image_name=this.edited_file_label,this.edited_file_label=t[0].name,this.createImage2(t[0])}else m()({text:\"Please Select an Image of type PNG or JPEG\",type:\"error\",timer:2500})},createImage2:function(e,t){var a=this,i=new FileReader;i.onload=function(e){a.image_file_2=e.target.result.split(\"base64,\")[1]},i.readAsDataURL(e)},create_UUID:function(){var e=(new Date).getTime(),t=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"==t?a:3&a|8).toString(16)}));return t},page_require:function(e){var t=this;0==e||e==this.total_pages+1||(this.page_no=\"...s\"==e?Math.ceil((1+this.page_no)/2):\"...l\"==e?Math.ceil((this.total_pages+this.page_no)/2):e,$(\"input:checkbox\").prop(\"checked\",!1),this.spinnerOn=!0,o.a.post(d.a.template_promotional_email(),{company_id:this.company_id,company_name:this.company_name,is_get:!0,is_notification:this.is_notification_template,page_no:this.page_no,per_page:this.per_page},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(t.spinnerOn=!1,null!=e.data){if(\"DB OPERATION UNSUCCESSFUL\"===e.data)return void(t.templatelist=[]);t.templatelist=e.data.data,t.templatelist.length>0&&(t.current_template=t.templatelist[0]),t.isEditTemplate=!1}t.setpagination(t.page_no)})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)})))},setpagination:function(e){if(this.page_array=[],this.total_pages<=7)for(var t=0;t<this.total_pages;t++)this.page_array.push(t+1);else if(1==e){for(var a=0;a<4;a++)this.page_array.push(a+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(e==this.total_pages){this.page_array.push(1),this.page_array.push(\"...s\");for(var i=this.total_pages-4;i<this.total_pages;i++)this.page_array.push(i+1)}else if(e<=4){for(var s=0;s<e+3;s++)this.page_array.push(s+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(e>=this.total_pages-4){this.page_array.push(1),this.page_array.push(\"...s\");for(var n=e-4;n<this.total_pages;n++)this.page_array.push(n+1)}else{this.page_array.push(1),this.page_array.push(\"...s\");for(var l=e-3;l<=e+3;l++)this.page_array.push(l);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}},pagination_class:function(e){return e==this.page_no?\" active\":\"\"},save_template:function(){var e=this;if(\"\"!=this.template_name)if(1!=this.template_name_already_exist)if(\"\"!=this.email_subject)if(1!=this.is_sms||\"\"!=this.save_sms)if(1!=this.is_email||\"\"!=this.save_email)if(0!=this.is_email||0!=this.is_sms)if(\"yes\"!=this.is_image_needed||\"\"!=document.getElementById(\"inputFile\").value)if(\"yes\"!=this.is_image_needed||this.validURL){var t=this.create_UUID();m.a.fire({title:\"Are you sure?\",text:\"You want to add this template?\",type:\"question\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, Confirm!\"}).then((function(a){a.value&&(m()({text:\"Please wait while we are submitting your details...\",type:\"info\",toast:!0,showConfirmButton:!1}),o.a.post(d.a.template_promotional_email(),{company_id:e.company_id,company_name:e.company_name,is_save:!0,is_notification:e.is_notification_template,template_id:t,template_name:e.template_name,save_email:1==e.is_email?e.save_email:null,save_sms:1==e.is_sms?e.save_sms:null,email_subject:e.email_subject,email_img_file:\"none\"===e.is_image_needed?null:e.image_file,email_img_name:e.file_label,email_img_link:e.img_redirect_url},{headers:{Authorization:\"Bearer \".concat(e.$session.get(\"at\"))}}).then((function(t){\"Query Executed Successfully\"==t.data?m()({type:\"success\",text:\"Template data added successfully\",timer:2500}).then((function(t){e.empty_variable(),e.load_templates(),$(\"#templatemodel\").modal(\"hide\")})):\"Duplicate image\"==t.data.Msg?(m()({type:\"error\",text:\"Image already found. Please upload another image or rename it.\",timer:2500}),e.empty_variable(),e.load_templates()):m()({type:\"error\",text:\"Some error occurred. Please try again.\",timer:2500})})).catch((function(t){m()({type:\"error\",text:\"Some error occurred. Please try again.\",timer:2500}),410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data)})))}))}else m()({text:\"Please enter valid URL link\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Please choose an image\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Please select an option\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Please enter an Email Body\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Please enter an Sms\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Please enter the subject for email\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Template name already exist, Please enter different name\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500});else m()({text:\"Please enter an Template name\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500})},edit_template:function(){var e=this;\"\"!=this.current_template.template_name?1!=this.edit_template_name_already_exist?\"\"!=this.current_template.subject?1!=this.is_edit_sms||null!=this.current_template.sms&&\"\"!=this.current_template.sms?1!=this.is_edit_email||null!=this.current_template.email&&\"\"!=this.current_template.email?0!=this.is_edit_email||0!=this.is_edit_sms?\"yes\"!=this.is_edit_image_needed||this.valid_edit_URL?\"yes\"!=this.is_edit_image_needed||\"Choose file\"!=this.edited_file_label||\"\"!=document.getElementById(\"inputFile2\").value?(m()({text:\"Please wait while we are submitting your details...\",type:\"info\",toast:!0,showConfirmButton:!1}),o.a.post(d.a.template_promotional_email(),{company_id:this.company_id,company_name:this.company_name,is_edit:!0,is_notification:this.is_notification_template,template_id:this.current_template.template_id,template_name:this.current_template.template_name,email_subject:this.current_template.subject,save_email:1==this.is_edit_email?this.current_template.email:null,save_sms:1==this.is_edit_sms?this.current_template.sms:null,email_img_file:\"none\"===this.is_edit_image_needed?null:this.image_file_2,email_img_name:\"none\"===this.is_edit_image_needed?null:this.edited_file_label,email_img_link:\"none\"===this.is_edit_image_needed?null:this.edit_img_redirect_url,is_image_edit:this.edited_file_label!=this.old_edited_image_name,is_image_present:\"none\"!==this.is_edit_image_needed,old_image:\"Choose File\"==this.old_edited_image_name?null:this.old_edited_image_name},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(t){\"Query Executed Successfully\"==t.data?m()({type:\"success\",text:\"Template data edited successfully\",timer:2500}).then((function(t){e.load_templates()})):\"Duplicate image\"==t.data.Msg?(document.getElementById(\"inputFile2\").value=\"\",m()({text:\"Image already found. Please upload another image or rename it.\",type:\"error\",timer:3e3})):(m()({type:\"error\",text:\"Some error occurred. Please try again.\",timer:2500}),e.load_templates())})).catch((function(t){410!==t.response.status&&440!==t.response.status&&409!==t.response.status||e.$root.$emit(\"Session_Expired\",t.response.data),m()({type:\"error\",text:\"Some error occurred. Please try again.\",timer:2500})}))):m()({text:\"Please Choose an Image\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Please enter valid URL link\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Please select an option\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Please enter an Email Body\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Please enter an Sms\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Please enter the subject for email\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Template name already exist, Please enter different name\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500}):m()({text:\"Please enter an Template name\",toast:!0,position:\"top-end\",type:\"warning\",showConfirmButton:!1,timer:2500})},delete_selected:function(){var e=this;0==this.checked_list.length?m.a.fire({title:\"No templates selected!\",text:\"\",type:\"error\",timer:2e3}):m.a.fire({title:\"Are you sure?\",text:\" You want to delete this template?\",type:\"question\",showCancelButton:!0,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, Confirm!\"}).then((function(t){t.value&&e.delete_templates(e.checked_list)}))},delete_templates:function(e){var t=this;this.spinnerOn=!0,o.a.post(d.a.template_promotional_email(),{company_id:this.company_id,company_name:this.company_name,is_delete:!0,template_list:e,is_notification:this.is_notification_template},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){t.spinnerOn=!1,\"Deleted Successfully\"==e.data&&m()({type:\"success\",text:\"Template data deleted successfully\",timer:2500}).then((function(e){t.checked_list=[],$(\"input:checkbox\").prop(\"checked\",!1),t.load_templates()}))})).catch((function(e){t.spinnerOn=!1,410!==e.response.status&&440!==e.response.status&&409!==e.response.status||t.$root.$emit(\"Session_Expired\",e.response.data)}))},show_template:function(e){this.isEditTemplate=!1,this.current_template=JSON.parse(JSON.stringify(this.templatelist[e])),this.old_template_name=this.current_template.template_name,this.current_template_index=e,!0===Boolean(this.current_template.template_image_name)?this.is_edit_image_needed=\"yes\":this.is_edit_image_needed=\"none\",null!=this.templatelist[e].email?this.is_edit_email=!0:this.is_edit_email=!1,null!=this.templatelist[e].sms?this.is_edit_sms=!0:this.is_edit_sms=!1,!0===Boolean(this.current_template.template_image_name)?(this.edited_file_label=this.current_template.template_image_name,this.old_edited_image_name=this.edited_file_label,this.edit_img_redirect_url=this.current_template.image_redirect_url,\"\"==this.edited_file_label&&(this.edited_file_label=\"Choose file\")):(this.edited_file_label=\"Choose file\",this.old_edited_image_name=this.edited_file_label,this.edit_img_redirect_url=\"\")},empty_variable:function(){this.disable_btn_expired?this.show_subscription_expired_swal():(this.send_email_all_customer=!0,this.quill.setText(\"\"),this.customers_list=[],this.specific_customer_list=[],this.save_sms=\"\",this.save_email=\"\",this.template_name=\"\",this.old_template_name=\"\",this.is_email=!0,this.is_sms=!1,this.save_subject=\"\",this.is_publish_email=!0,this.verification_status=null,this.file_label=\"Choose file\",this.img_redirect_url=\"\",this.email_subject=\"\",this.is_image_needed=\"none\",this.template_name_already_exist=!1,document.getElementById(\"template_name_add_id\").style.border=null)},edit_template_details:function(){var e=this;this.isEditTemplate?(this.isEditTemplate=!1,this.load_templates(),this.edit_template_name_already_exist=!1):(this.isEditTemplate=!0,setTimeout((function(){e.edit_editor()}),1e3))},check_current_template_active:function(e){if(!0===Boolean(this.templatelist[e]))return this.templatelist[e].template_name===this.old_template_name?\"current-active-template\":null}}},f=h,g=(a(\"4351\"),a(\"ad9c\"),a(\"2877\")),v=Object(g[\"a\"])(f,i,s,!1,null,\"0fb6da3e\",null);t[\"a\"]=v.exports},4351:function(e,t,a){\"use strict\";var i=a(\"8f3c\"),s=a.n(i);s.a},6610:function(e,t,a){},\"8f3c\":function(e,t,a){},ad9c:function(e,t,a){\"use strict\";var i=a(\"6610\"),s=a.n(i);s.a}}]);","extractedComments":[]}