{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0ebb1824\"],{\"4d07\":function(e,s,t){},\"50ff\":function(e,s,t){},\"60bc\":function(e,s,t){\"use strict\";var i=t(\"7bf2\"),a=t.n(i);a.a},\"7bf2\":function(e,s,t){},a33b:function(e,s,t){\"use strict\";var i=t(\"50ff\"),a=t.n(i);a.a},a9f5:function(e,s,t){\"use strict\";var i=t(\"4d07\"),a=t.n(i);a.a},dca9:function(e,s,t){\"use strict\";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"div\",[t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.spinnerOn,expression:\"spinnerOn\"}],staticClass:\"spinner\",attrs:{id:\"spinner\"}}),t(\"div\",{staticClass:\"dash-cont\"},[t(\"div\",{staticClass:\"container-fluid\"},[t(\"div\",{staticClass:\"card dash-card\"},[t(\"div\",{staticClass:\"card-header d-block d-sm-flex flex-wrap justify-content-between\"},[t(\"div\",{staticClass:\"d-sm-flex justify-content-start\"},[t(\"h4\",{staticClass:\"mb-sm-0 mr-3\"},[e._v(\"Permissions\")]),t(\"div\",{staticClass:\"radio my-auto\"},[t(\"label\",[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.filter_user_type,expression:\"filter_user_type\"}],attrs:{type:\"radio\",value:\"Portal\",id:\"filter_portal_box\"},domProps:{checked:e._q(e.filter_user_type,\"Portal\")},on:{change:function(s){e.filter_user_type=\"Portal\"}}}),t(\"span\",{staticClass:\"icn\",attrs:{id:\"filter_portal_user_radio\"}}),e._v(\" Portal User \")]),t(\"label\",[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.filter_user_type,expression:\"filter_user_type\"}],attrs:{type:\"radio\",value:\"Bot\",id:\"filter_bot_box\"},domProps:{checked:e._q(e.filter_user_type,\"Bot\")},on:{change:function(s){e.filter_user_type=\"Bot\"}}}),t(\"span\",{staticClass:\"icn\"}),e._v(\" Bot User \")])])]),t(\"div\",{staticClass:\"card-act d-flex flex-wrap justify-content-end\"},[0==e.isShow_portal_roles?t(\"a\",{staticClass:\"darkblue-btn\",attrs:{href:\"#\",\"data-toggle\":\"modal\",id:\"add_permissions_btn\"},on:{click:function(s){return e.role_modal(\"open\")}}},[t(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"14\",height:\"13.997\",viewBox:\"0 0 14 13.997\"}},[t(\"path\",{attrs:{id:\"Union_13\",\"data-name\":\"Union 13\",d:\"M-12684,2058v-5h-5a1,1,0,0,1-1-1,1,1,0,0,1,1-1h5v-5a1,1,0,0,1,1-1,1,1,0,0,1,1,1v5h5a1,1,0,0,1,1,1,1,1,0,0,1-1,1h-5v5a1,1,0,0,1-1,1A1,1,0,0,1-12684,2058Z\",transform:\"translate(12690.001 -2045.002)\",fill:\"#fff\"}})]),e._v(\" Add Permissions \")]):e._e()])]),t(\"div\",{staticClass:\"card-body\"},[t(\"div\",{staticClass:\"table-box\"},[t(\"div\",{staticClass:\"table-responsive\"},[t(\"table\",{staticClass:\"table\"},[e._m(0),t(\"tbody\",[1==e.page_no&&1==e.isShow_portal_roles?t(\"tr\",[t(\"td\",{staticClass:\"action\"}),t(\"td\",[e._v(\"Admin\")]),t(\"td\",[e._v(\"Portal User\")]),t(\"td\",[e._v(\"All access has been provided to the Admin\")])]):e._e(),e._l(e.roles,(function(s,i){return t(\"tr\",{key:i},[t(\"td\",{staticClass:\"action\"},[t(\"a\",{staticClass:\"#\",staticStyle:{cursor:\"pointer\"},attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#intentmodal\"},on:{click:function(s){return e.edit_modal(i)}}},[t(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"15.392\",height:\"15.392\",viewBox:\"0 0 15.392 15.392\"}},[t(\"path\",{attrs:{id:\"square-edit-outline\",d:\"M4.71,3A1.7,1.7,0,0,0,3,4.71V16.682a1.71,1.71,0,0,0,1.71,1.71H16.682a1.71,1.71,0,0,0,1.71-1.71V10.7h-1.71v5.986H4.71V4.71H10.7V3H4.71m10.928.855a.591.591,0,0,0-.41.171L14.185,5.061,16.322,7.2l1.043-1.035a.578.578,0,0,0,0-.812L16.04,4.026a.571.571,0,0,0-.4-.171M13.578,5.668l-6.3,6.311v2.138H9.413l6.3-6.311Z\",transform:\"translate(-3 -3)\",fill:\"#9499ae\"}})])])]),t(\"td\",[e._v(e._s(s.user_role))]),t(\"td\",[e._v(e._s(s.user))]),t(\"td\",[e._l(s.permissions,(function(s,i){return t(\"span\",{key:i,staticClass:\"multiselect__tag\"},[e._v(e._s(s)+\" \")])})),t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==s.permissions.length&&\"Portal User\"==s.user,expression:\"\\n                          role.permissions.length == 0 &&\\n                          role.user == 'Portal User'\\n                        \"}]},[e._v(\"Please enable access of portal menu to this role.\")]),t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==s.permissions.length&&\"Bot User\"==s.user,expression:\"\\n                          role.permissions.length == 0 &&\\n                          role.user == 'Bot User'\\n                        \"}]},[e._v(\"Please enable the task which will be accessible by this bot user.\")])],2)])}))],2)])]),t(\"div\",{staticClass:\"modal fade dash-modal\",attrs:{id:\"intentmodal\",tabindex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"intentmodeltitle\",\"aria-hidden\":\"true\",\"data-keyboard\":\"false\",\"data-backdrop\":\"static\"}},[t(\"div\",{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{role:\"document\"}},[t(\"div\",{staticClass:\"modal-content\"},[t(\"div\",{staticClass:\"modal-body\"},[e._m(1),t(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},on:{click:e.clear_fields}},[t(\"img\",{attrs:{src:\"/img/close-icn.png\",alt:\"\"}})]),t(\"div\",{staticClass:\"radio\",staticStyle:{\"margin-left\":\"25%\"}},[t(\"label\",{style:\"Portal\"===e.user_type?\"\":\"cursor: not-allowed\"},[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.user_type,expression:\"user_type\"}],attrs:{type:\"radio\",value:\"Portal\",id:\"portal_box\",disabled:1!=this.user_type_change},domProps:{checked:e._q(e.user_type,\"Portal\")},on:{change:[function(s){e.user_type=\"Portal\"},function(s){return e.role_modal(\"toggle\")}]}}),t(\"span\",{staticClass:\"icn\",style:\"Portal\"===e.user_type?\"\":\"background: rgb(244 244 244); cursor: not-allowed\",attrs:{id:\"portal_user_radio\"}}),e._v(\" Portal User \")]),t(\"label\",{style:\"Bot\"===e.user_type?\"\":\"cursor: not-allowed\"},[t(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.user_type,expression:\"user_type\"}],attrs:{type:\"radio\",id:\"bot_box\",value:\"Bot\",disabled:1!=this.user_type_change},domProps:{checked:e._q(e.user_type,\"Bot\")},on:{change:[function(s){e.user_type=\"Bot\"},function(s){return e.role_modal(\"toggle\")}]}}),t(\"span\",{staticClass:\"icn\",style:\"Bot\"===e.user_type?\"\":\"background: rgb(244 244 244); cursor: not-allowed\"}),e._v(\" Bot User \")])]),t(\"form\",{attrs:{id:\"permissions_form\"},on:{submit:function(s){return s.preventDefault(),e.save_role(s)}}},[\"Bot\"==e.user_type&&e.bot_roles.length>0?t(\"div\",{staticClass:\"form-group\"},[t(\"label\",[e._v(\"Role Name\")]),t(\"multiselect\",{attrs:{options:e.bot_roles,id:\"select_role_name\",searchable:!0,\"close-on-select\":!0,taggable:!1,multiple:!1,placeholder:\"Select Role Name\",\"max-height\":200,disabled:1==this.select_role_name_disable},model:{value:e.selected_role,callback:function(s){e.selected_role=s},expression:\"selected_role\"}})],1):e._e(),\"Portal\"==e.user_type&&e.portal_roles.length>0?t(\"div\",{staticClass:\"form-group\"},[t(\"label\",[e._v(\"Role Name\")]),t(\"multiselect\",{attrs:{options:e.portal_roles,id:\"select_role_name\",searchable:!0,\"close-on-select\":!0,taggable:!1,multiple:!1,placeholder:\"Select Role Name\",\"max-height\":200,disabled:1==this.select_role_name_disable},model:{value:e.selected_role,callback:function(s){e.selected_role=s},expression:\"selected_role\"}})],1):e._e(),e.check_portal_bot_role_length?t(\"div\",{staticClass:\"form-group\"},[t(\"label\",[e._v(e._s(e.permissions_title))]),\"Portal\"==e.user_type?t(\"multiselect\",{attrs:{id:\"role_select\",\"close-on-select\":!1,taggable:!0,multiple:!0,options:e.permissions_list,placeholder:\"Select Permissions\",\"group-values\":\"menu_list\",\"group-label\":\"title\",\"group-select\":!0,\"track-by\":\"sub_menu\",label:\"sub_menu\"},on:{remove:e.remove_selected_permission},scopedSlots:e._u([{key:\"option\",fn:function(s){return[t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:void 0===s.option.$groupLabel,expression:\"props.option.$groupLabel === undefined\"}]},[e._v(\" \"+e._s(s.option.sub_menu)+\" \")]),t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:void 0===s.option.sub_menu,expression:\"props.option.sub_menu === undefined\"}]},[e._v(e._s(s.option.$groupLabel))])]}}],null,!1,581792397),model:{value:e.selected_permissions,callback:function(s){e.selected_permissions=s},expression:\"selected_permissions\"}}):e._e(),\"Bot\"==e.user_type?t(\"multiselect\",{attrs:{\"close-on-select\":!1,taggable:!0,multiple:!0,options:e.permissions_list,placeholder:\"Select Permissions\",\"track-by\":\"permissions\",label:\"to_be_displayed\",\"group-label\":\"Type\",\"group-values\":\"Details\",\"group-select\":!0},model:{value:e.selected_permissions,callback:function(s){e.selected_permissions=s},expression:\"selected_permissions\"}}):e._e()],1):e._e(),t(\"div\",{staticClass:\"btn-wrap text-right\"},[t(\"button\",{staticClass:\"btn btn-link\",attrs:{type:\"button\",\"data-dismiss\":\"modal\"},on:{click:e.clear_fields}},[e._v(\" Cancel \")]),t(\"button\",{staticClass:\"darkblue-btn\",attrs:{id:\"save_permissions\",type:\"submit\"}},[e._v(\" Save \")])])])])])])]),t(\"div\",{staticClass:\"pagin-table\",staticStyle:{margin:\"0\"}},[t(\"nav\",{attrs:{\"aria-label\":\"Page navigation example\"}},[t(\"ul\",{staticClass:\"pagination justify-content-center\"},[t(\"li\",{staticClass:\"page-item\"},[t(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(s){return e.page_require(e.page_no-1)}}},[t(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[t(\"g\",{attrs:{id:\"arrow-point-to-left\",transform:\"translate(105.806 15.204) rotate(180)\"}},[t(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])]),e._l(e.page_array,(function(s){return t(\"li\",{key:s,class:\"page-item \"+e.pagination_class(s)},[\"...s\"==s||\"...l\"==s?t(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(t){return e.page_require(s)}}},[e._v(\"...\")]):e._e(),\"...s\"!=s&&\"...l\"!=s?t(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(t){return e.page_require(s)}}},[e._v(e._s(s))]):e._e()])})),t(\"li\",{staticClass:\"page-item\"},[t(\"a\",{staticClass:\"page-link\",attrs:{href:\"#\"},on:{click:function(s){return e.page_require(e.page_no+1)}}},[t(\"svg\",{attrs:{xmlns:\"http://www.w3.org/2000/svg\",width:\"8.667\",height:\"15.204\",viewBox:\"0 0 8.667 15.204\"}},[t(\"g\",{attrs:{id:\"arrow-point-to-right\",transform:\"translate(-97.139 0)\"}},[t(\"path\",{attrs:{id:\"Path_1136\",\"data-name\":\"Path 1136\",d:\"M105.493,8.354l-6.537,6.537a1.065,1.065,0,1,1-1.506-1.506L103.235,7.6,97.45,1.817A1.065,1.065,0,0,1,98.956.312l6.537,6.537a1.065,1.065,0,0,1,0,1.505Z\",transform:\"translate(0 0)\",fill:\"#9499ae\"}})])])])])],2)])])])])])])])])},a=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"thead\",[t(\"tr\",[t(\"th\",{staticStyle:{width:\"7%\"},attrs:{scope:\"col\"}},[e._v(\"ACTION\")]),t(\"th\",{attrs:{scope:\"col\"}},[e._v(\"ROLE NAME\")]),t(\"th\",{attrs:{scope:\"col\"}},[e._v(\"USER TYPE\")]),t(\"th\",{staticClass:\"w-50\",attrs:{scope:\"col\"}},[e._v(\"PERMISSIONS\")])])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"div\",{staticClass:\"modal-head d-flex align-items-center\"},[t(\"div\",{staticClass:\"head-icn\"},[t(\"img\",{attrs:{src:\"/img/msg-blue.png\",alt:\"\"}})]),t(\"h3\",[e._v(\"Permissions\")])])}],o=(t(\"4de4\"),t(\"caad\"),t(\"c975\"),t(\"a15b\"),t(\"d81d\"),t(\"b0c0\"),t(\"07ac\"),t(\"ac1f\"),t(\"2532\"),t(\"5319\"),t(\"1276\"),t(\"bc3a\")),n=t.n(o),r=t(\"8e5f\"),l=t.n(r),p=t(\"3d20\"),_=t.n(p),c=(t(\"5118\"),t(\"9a2a\")),h=t(\"ea54\"),u=t.n(h),d={name:\"permissions\",components:{Multiselect:l.a},data:function(){return{user:[],roles:[],page_no:1,per_page:10,selected_role:\"\",selected_permissions:[],role_list:[],complete_role_list:[],permissions_list:[],portal_permissions_list:[],bot_permissions_list:[],intentlist:[],checked_list:[],number_of_rows:null,total_pages:null,user_type:\"Portal\",menu_list_from_api:null,spinnerOn:!1,companyid:\"SuperAdmin\"==this.$session.get(\"UserInformation\").role?this.$session.get(\"CompanyId\"):this.$session.get(\"UserInformation\").company_id,companyname:\"SuperAdmin\"==this.$session.get(\"UserInformation\").role?this.$session.get(\"CompanyName\"):this.$session.get(\"UserInformation\").company_name,user_role:this.$session.get(\"UserInformation\").role,page_array:[],search_name:\"\",portal_roles:[],bot_roles:[],isShow_portal_roles:!0,isShow_bot_roles:!1,isVisibleSearchClear:!1,select_role_name_disable:!1,filter_user_type:\"Portal\",user_type_change:!0}},computed:{permissions_title:function(){return\"Portal\"==this.user_type?\"Portal Menu\":\"Bot\"==this.user_type?\"Bot Intents\":void 0},check_portal_bot_role_length:function(){return\"Portal\"==this.user_type&&this.portal_roles.length>0||(\"Portal\"!=this.user_type||0!=this.portal_roles.length)&&(\"Bot\"==this.user_type&&this.bot_roles.length>0||(\"Bot\"!=this.user_type||0!=this.bot_roles.length)&&void 0)}},created:function(){this.load_permission()},mounted:function(){var e=this;$(\"#selectall\").click((function(){$(this).is(\":checked\")?$(\"input:checkbox\").prop(\"checked\",!0):(e.checked_list=[],$(\"input:checkbox\").prop(\"checked\",!1))})),$(\"#intentmodal\").on(\"hidden.bs.modal\",(function(s){e.clear_fields(),e.user_type_change=!0,e.select_role_name_disable=!1})),$(\"select .form-control\").on(\"click\",(function(){}))},watch:{search_name:function(){\"\"===this.search_name?(this.load_permission(),this.isVisibleSearchClear=!1):\"\"!==this.search_name&&(this.isVisibleSearchClear=!0)},filter_user_type:function(){\"Portal\"==this.filter_user_type?(this.isShow_portal_roles=!0,this.isShow_bot_roles=!1,this.user_type=\"Portal\",this.load_permission()):\"Bot\"==this.filter_user_type&&(this.isShow_bot_roles=!0,this.isShow_portal_roles=!1,this.user_type=\"Bot\",this.load_permission())}},methods:{clear_search_name:function(){this.search_name=\"\"},remove_selected_permission:function(e,s){\"Dashboard\"==e.sub_menu&&(toastr.warning(\"Dashboard is a default page, it's permission cannot be removed\"),this.add_selected_permission(e.sub_menu))},add_selected_permission:function(e){this.selected_permissions.unshift({sub_menu:e})},load_permission:function(){var e=this;this.spinnerOn=!0,this.roles=[],this.portal_roles=[],this.bot_roles=[],this.permissions_list=[],this.selected_permissions=[],this.intentlist=[],this.bot_permissions_list=[],this.portal_permissions_list=[],$(\"input:checkbox\").prop(\"checked\",!1),this.$session.has(\"CompanyId\")||\"SuperAdmin\"!=this.$session.get(\"UserInformation\").role?(this.companyid=this.$session.get(\"UserInformation\").company_id,this.companyname=this.$session.get(\"UserInformation\").company_name):toastr.warning(\"Please select a company name from the dropdown\"),void 0!==this.companyname&&(n.a.post(u.a.role_url(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isShow:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){e.number_of_rows=s.data[1].number_of_rows,e.total_pages=Math.ceil(e.number_of_rows/e.per_page),e.update_list(s.data)})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)})),n.a.post(u.a.portal_permissions_url(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isDropdown:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){if(e.complete_role_list=s.data,s.data[0].Portal.length>0)for(var t=0;t<s.data[0].Portal.length;t++)e.portal_roles.push(s.data[0].Portal[t]);if(s.data[0].Bot.length>0)for(var i=0;i<s.data[0].Bot.length;i++)e.bot_roles.push(s.data[0].Bot[i])})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)})),n.a.post(u.a.portal_permissions_url(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isGetMenu:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){e.menu_list_from_api=s.data.Menu;for(var t=s.data.Menu,i={},a=t.filter((function(e){return 1==e.IsMasterMenu&&1==e.Enabled})),o=[],n=t.filter((function(e){return 0==e.HasSubMenus&&1==e.Enabled&&1==e.IsSubMenu})),r=function(e,s){var t=c[\"a\"].filter((function(s){return s.name===a[e].MenuItem&&Boolean(s.svg_html)}));t.length>0&&(o.push(t[0]),i[t[0].name]={title:t[0].name,menu_list:[]},0==a[e].HasSubMenus&&i[t[0].name].menu_list.push({sub_menu:t[0].name}))},l=0,p=a.length;l<p;l+=1)r(l,p);try{for(var _=0,h=n.length;_<h;_+=1)for(var u in c[\"a\"])if(c[\"a\"][u].name===n[_].MenuItem&&Boolean(c[\"a\"][u].page_path&&c[\"a\"][u].master_menu===n[_].MasterMenu)){var d={sub_menu:c[\"a\"][u].name};i[n[_].MasterMenu].menu_list.push(d)}}catch(m){}i=Object.values(i),e.portal_permissions_list=i})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)}))),n.a.post(u.a.get_task_list(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isGetMenu:!0},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){for(var t in s.data)e.bot_permissions_list.push({permissions:s.data[t],to_be_displayed:s.data[t]});for(var i=0;i<e.bot_permissions_list.length;i++)e.bot_permissions_list[i].to_be_displayed=e.bot_permissions_list[i].to_be_displayed.replace(/_/g,\" \").toLowerCase().split(\" \").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(\" \"),e.bot_permissions_list[i].to_be_displayed=e.bot_permissions_list[i].to_be_displayed.replace(/Form/g,\"\");e.update_bot_roles()})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)})),\"Portal\"==this.filter_user_type&&n.a.post(u.a.portal_permissions_url(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isShow:this.isShow_portal_roles,per_page:this.per_page,page_no:this.page_no},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){e.spinnerOn=!1,e.roles=[];var t=s.data.RolePermissionData;for(var i in t){var a=t[i].Menu.filter((function(e){if(e.Enabled&&!e.HasSubMenus)return e.MenuItem})),o=[];for(var n in a)o.push(a[n].MenuItem);e.roles.push({user_role:t[i].Role,user:t[i].UserType,permissions:o})}e.total_pages=s.data.pagecount,e.setpagination(1)})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)})),n.a.post(u.a.show_intent_url(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,get_intents:!0,showintent:\"True\"},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){for(var t in s.data)e.intentlist.push({permissions:s.data[t],to_be_displayed:s.data[t]})})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)}))},svg_enable:function(e){for(var s in this.selected_role)return this.selected_role[s].sub_menu==e?void 0:\"display:none\"},selected_roles:function(e){if(\"all\"==e)if(event.target.checked){var s=this.roles;this.checked_list=s}else event.target.checked||(this.checked_list=[]);else if(1==event.target.checked){var t=this.checked_list.indexOf(this.roles[e]);s=this.roles[e];-1==t&&this.checked_list.push(s)}else if(0==event.target.checked){var i=document.querySelector(\"#selectall\");1==i.checked&&(i.checked=!1);s=this.checked_list.filter((function(s){return role.role!==e}));this.checked_list=s}},role_modal:function(e){event.preventDefault(),null===this.user_type||(this.role_list=this.complete_role_list[this.user_type]),\"Portal\"==this.user_type?this.portal_roles.length>0?(this.role_list=this.complete_role_list[\"Portal\"],this.permissions_list=this.portal_permissions_list):toastr.error(\"No Roles Added for Portal User Type.\"):\"Bot\"==this.user_type&&(this.bot_roles.length>0?(this.role_list=this.complete_role_list[\"Bot\"],this.permissions_list=[{Type:\"Actions\",Details:this.bot_permissions_list},{Type:\"Intents\",Details:this.intentlist}],this.selected_permissions=\"\"):_.a.fire({text:\"No Roles Added for Bot User Type. Please Add a Role from the 'Roles' Page to continue adding Permissions.\",type:\"warning\",showConfirmButton:!0,timer:6e3})),\"open\"==e&&(this.selected_role=\"\",this.selected_permissions=[],this.user_type_change=!1,this.bot_roles.length>0&&$(\"#intentmodal\").modal(\"show\"))},delete_selected:function(){event.preventDefault();var e=[],s=[];for(var t in this.roles)e.push(this.roles[index].role),s.push(this.roles[index].permissions);this.delete_qns_api(e,s)},delete_role:function(e){event.preventDefault()},edit_modal:function(e){for(var s in this.user_type_change=!1,this.select_role_name_disable=!0,document.querySelector(\"#portal_box\").disabled=!0,document.querySelector(\"#bot_box\").disabled=!0,this.selected_role=this.roles[e].user_role,this.user_type=this.roles[e].user.replace(\" User\",\"\"),this.selected_permissions=[],\"Bot\"==this.user_type?this.permissions_list=[{Type:\"Actions\",Details:this.bot_permissions_list},{Type:\"Intents\",Details:this.intentlist}]:\"Portal\"==this.user_type&&(this.permissions_list=this.portal_permissions_list),this.roles[e].permissions)\"Bot\"==this.user_type?this.selected_permissions.push({permissions:this.roles[e].original_permissions[s],to_be_displayed:this.roles[e].permissions[s]}):\"Portal\"==this.user_type&&this.selected_permissions.push({sub_menu:this.roles[e].permissions[s]});this.role_list=this.complete_role_list[this.user_type]},page_require:function(e){var s=this;0==e||e==this.total_pages+1?event.preventDefault():\"\"==this.search_name?\"Portal\"==this.filter_user_type?(this.page_no=\"...s\"==e?Math.ceil((1+this.page_no)/2):\"...l\"==e?Math.ceil((this.total_pages+this.page_no)/2):e,$(\"input:checkbox\").prop(\"checked\",!1),this.spinnerOn=!0,n.a.post(u.a.portal_permissions_url(),{role:this.user_role,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,companyid:this.companyid,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isShow:this.isShow_portal_roles,page_no:this.page_no,per_page:this.per_page},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){s.spinnerOn=!1,s.number_of_rows=e.data.RolePermissionData.length,s.total_pages=e.data.pagecount,s.setpagination(s.page_no);var t=e.data.RolePermissionData;for(var i in s.roles=[],t){var a=t[i].Menu.filter((function(e){if(e.Enabled&&!e.HasSubMenus)return e.MenuItem})),o=[];for(var n in a)o.push(a[n].MenuItem);s.roles.push({user_role:t[i].Role,user:t[i].UserType,permissions:o})}s.total_pages=e.data.pagecount,s.setpagination(s.page_no)})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||s.$root.$emit(\"Session_Expired\",e.response.data)}))):\"Bot\"==this.filter_user_type&&(this.page_no=\"...s\"==e?Math.ceil((1+this.page_no)/2):\"...l\"==e?Math.ceil((this.total_pages+this.page_no)/2):e,n.a.post(u.a.add_edit_bot_role(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isShow:this.isShow_bot_roles,per_page:this.per_page,page_no:this.page_no},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){for(var t in s.spinnerOn=!1,s.total_pages=e.data.pagecount,s.setpagination(s.page_no),s.roles=[],e.data.BotRolePermissionData)s.bot_roles.includes(t)&&s.roles.push({user:\"Bot User\",user_role:\"\".concat(t),input_enable:!0,permissions:e.data.BotRolePermissionData[t].map((function(e){return e.replace(/_/g,\" \").toLowerCase().split(\" \").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(\" \")})),original_permissions:e.data.BotRolePermissionData[t]});s.total_pages=e.data.pagecount,s.setpagination(s.page_no)})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||s.$root.$emit(\"Session_Expired\",e.response.data)}))):(this.page_no=\"...s\"==e?Math.ceil((1+this.page_no)/2):\"...l\"==e?Math.ceil((this.total_pages+this.page_no)/2):e,this.spinnerOn=!0,n.a.post(u.a.portal_permissions_url(),{companyid:this.$session.get(\"UserInformation\").company_id,companyname:this.$session.get(\"UserInformation\").company_name,license_key:this.$session.get(\"UserInformation\").license_key,email:this.$session.get(\"UserInformation\").email,token:this.$session.get(\"UserInformation\").tokens,issearch:!0,key:this.search_name,per_page:this.per_page,page_no:this.page_no},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(e){if(s.spinnerOn=!1,\"token invalid\"!=e.data&&null!=e.data&&\"No Results Found\"!=e.data.MSG&&\"Intrnal Server Error\"!=e.data.MSG){var t=e.data.RolePermissionData;for(var i in s.number_of_rows=e.data.RolePermissionData.length,s.total_pages=e.data.page_count,s.setpagination(s.page_no),s.roles=[],t){var a=t[i].Menu.filter((function(e){if(e.Enabled&&!e.HasSubMenus)return e.MenuItem})),o=[];for(var n in a)o.push(a[n].MenuItem);s.roles.push({user_role:t[i].Role,user:t[i].UserType,permissions:o})}}})).catch((function(e){410!==e.response.status&&440!==e.response.status&&409!==e.response.status||s.$root.$emit(\"Session_Expired\",e.response.data)})))},save_role:function(){var e=this;if(\"\"==this.selected_role||0==this.selected_permissions.length);else if(\"Admin\"==this.selected_role)this.clear_fields();else if(\"Portal\"==this.user_type){var s=[];for(var t in this.selected_permissions)s.push(this.selected_permissions[t].sub_menu);for(var t in this.menu_list_from_api)s.includes(this.menu_list_from_api[t].MenuItem)?this.menu_list_from_api[t].Enabled=!0:this.menu_list_from_api[t].Enabled=!1;n.a.post(u.a.portal_permissions_url(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isEdit:!0,role_name:this.selected_role,user_type:this.user_type+\" User\",menu:this.menu_list_from_api},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){\"User Role Edited\"==s.data&&toastr.success(\"User Permissions have been updated. The updated permissions will be available after next login.\"),$(\"#intentmodal\").modal(\"hide\"),e.load_permission()})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)}))}else if(\"Bot\"==this.user_type){s=[];for(var t in this.selected_permissions)s.push(this.selected_permissions[t].permissions);n.a.post(u.a.add_edit_bot_role(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,bot_role_name:this.selected_role,permission_list:s},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){\"Query Executed Successfully\"==s.data?(toastr.success(\"User Permissions have been updated. The updated permissions will be available after next login.\"),e.load_permission()):\"Internal Server Error\"==s.data&&toastr.error(\"Internal Server Error\"),$(\"#intentmodal\").modal(\"hide\")})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)}))}},edit_restrictions:function(e){\"\"!=this.roles[e].user&&(this.roles[e].input_enable=!this.roles[e].input_enable),this.edit=!0},update_list:function(e){var s;for(var t in e.restrictionlist)s=\"\"==e.restrictionlist[t],this.roles.push({user:e.restrictionlist[t],role:e.rolelist[t],input_enable:s})},update_bot_roles:function(){var e=this;\"Bot\"==this.filter_user_type&&n.a.post(u.a.add_edit_bot_role(),{companyid:this.companyid,companyname:this.companyname,email:this.$session.get(\"UserInformation\").email,license_key:this.$session.get(\"UserInformation\").license_key,token:this.$session.get(\"UserInformation\").tokens,isShow:this.isShow_bot_roles,per_page:this.per_page,page_no:this.page_no},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){for(var t in e.spinnerOn=!1,e.total_pages=s.data.pagecount,e.setpagination(e.page_no),s.data.BotRolePermissionData)e.bot_roles.includes(t)&&e.roles.push({user:\"Bot User\",user_role:\"\".concat(t),input_enable:!0,permissions:s.data.BotRolePermissionData[t].map((function(e){return e.replace(/_/g,\" \").toLowerCase().split(\" \").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(\" \")})),original_permissions:s.data.BotRolePermissionData[t]});e.total_pages=s.data.pagecount,e.setpagination(e.page_no)})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)}))},pagination_class:function(e){return e==this.page_no?\" active\":\"\"},clear_fields:function(){document.querySelector(\"#portal_box\").disabled=!1,document.querySelector(\"#bot_box\").disabled=!1,this.selected_role=\"\",this.selected_permissions=[],$(\"#intentmodal\").modal(\"hide\")},callsearch:function(){13===event.keyCode&&this.search_product()},search_product:function(){var e=this;\"\"!=this.search_name?(this.spinnerOn=!0,n.a.post(u.a.portal_permissions_url(),{companyid:this.$session.get(\"UserInformation\").company_id,companyname:this.$session.get(\"UserInformation\").company_name,license_key:this.$session.get(\"UserInformation\").license_key,email:this.$session.get(\"UserInformation\").email,token:this.$session.get(\"UserInformation\").tokens,issearch:!0,key:this.search_name,per_page:this.per_page,page_no:1},{headers:{Authorization:\"Bearer \".concat(this.$session.get(\"at\"))}}).then((function(s){if(e.spinnerOn=!1,\"token invalid\"!=s.data&&null!=s.data&&\"No Results Found\"!=s.data.MSG&&\"Intrnal Server Error\"!=s.data.MSG){var t=s.data.RolePermissionData;for(var i in e.number_of_rows=s.data.RolePermissionData.length,e.total_pages=s.data.page_count,e.page_no=1,e.setpagination(e.page_no),e.roles=[],t){var a=t[i].Menu.filter((function(e){if(e.Enabled&&!e.HasSubMenus)return e.MenuItem})),o=[];for(var n in a)o.push(a[n].MenuItem);e.roles.push({user_role:t[i].Role,user:t[i].UserType,permissions:o})}}else\"No Results Found\"==s.data.MSG?(toastr.error(\"No role found\"),e.load_permission()):\"Intrnal Server Error\"==s.data.MSG&&(toastr.error(\"Intrnal Server Error\"),e.load_permission())})).catch((function(s){410!==s.response.status&&440!==s.response.status&&409!==s.response.status||e.$root.$emit(\"Session_Expired\",s.response.data)}))):toastr.error(\"Enter proper data for searching\")},setpagination:function(e){if(this.page_array=[],this.total_pages<=7)for(var s=0;s<this.total_pages;s++)this.page_array.push(s+1);else if(1==e){for(var t=0;t<4;t++)this.page_array.push(t+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(e==this.total_pages){this.page_array.push(1),this.page_array.push(\"...s\");for(var i=this.total_pages-4;i<this.total_pages;i++)this.page_array.push(i+1)}else if(e<=4){for(var a=0;a<e+3;a++)this.page_array.push(a+1);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}else if(e>=this.total_pages-4){this.page_array.push(1),this.page_array.push(\"...s\");for(var o=e-4;o<this.total_pages;o++)this.page_array.push(o+1)}else{this.page_array.push(1),this.page_array.push(\"...s\");for(var n=e-3;n<=e+3;n++)this.page_array.push(n);this.page_array.push(\"...l\"),this.page_array.push(this.total_pages)}}}},m=d,g=(t(\"60bc\"),t(\"a9f5\"),t(\"a33b\"),t(\"2877\")),f=Object(g[\"a\"])(m,i,a,!1,null,\"1b0045d4\",null);s[\"default\"]=f.exports}}]);","extractedComments":[]}