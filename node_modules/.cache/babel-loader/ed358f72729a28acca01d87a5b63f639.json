{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/eslint-loader/index.js??ref--13-0!/home/vimalesh/CENSE/chatbot-portal/src/portal/mixins/ResponseBot/start_voice_communication.js","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/mixins/ResponseBot/start_voice_communication.js","mtime":1649244440869},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG1ldGhvZHM6IHsKICAgIHZvaWNlX2NvbW11bmljYXRpb246IGZ1bmN0aW9uIHZvaWNlX2NvbW11bmljYXRpb24oKSB7CiAgICAgIGlmICgvQ2hyb21pdW0vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2Nocm9taXVtIGRldGVjdGVkJyk7CiAgICAgICAgdGhpcy5jYWxsX2Nsb3VkX2FwaSgpOwogICAgICB9IGVsc2UgaWYgKHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbiAhPSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zb2xlLmxvZygnMicpOwogICAgICAgIHRoaXMucmVjb2duaXRpb24gPSBuZXcgd2luZG93LlNwZWVjaFJlY29nbml0aW9uKCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI21pY3JvcGhvbmUiKS5jbGFzc0xpc3QuYWRkKCJ2b2ljZS1vbiIpOwoKICAgICAgICB0aGlzLnJlY29nbml0aW9uLm9ucmVzdWx0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBzcGVlY2hUb1RleHQgPSBlLnJlc3VsdHNbMF1bMF0udHJhbnNjcmlwdDsKICAgICAgICB9OwoKICAgICAgICB0aGlzLnJlY29nbml0aW9uLm9uZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI21pY3JvcGhvbmUiKS5jbGFzc0xpc3QucmVtb3ZlKCJ2b2ljZS1vbiIpOyAvL0FnYWluIOKAkyBnaXZlIHRoZSB1c2VyIGZlZWRiYWNrIHRoYXQgeW91IGFyZSBub3QgbGlzdGVuaW5nIGFueW1vcmUuIElmIHlvdSB3aXNoIHRvIGFjaGlldmUgY29udGludW91cyByZWNvZ25pdGlvbiDigJMgeW91IGNhbiB3cml0ZSBhIHNjcmlwdCB0byBzdGFydCB0aGUgcmVjb2duaXplciBhZ2FpbiBoZXJlLgogICAgICAgIH07CgogICAgICAgIHZhciB2bSA9IHRoaXM7CgogICAgICAgIHRoaXMucmVjb2duaXRpb24ub25yZXN1bHQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQucmVzdWx0cyA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgLy9Tb21ldGhpbmcgaXMgd3JvbmfigKYKICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5zdG9wKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBpID0gZXZlbnQucmVzdWx0SW5kZXg7IGkgPCBldmVudC5yZXN1bHRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChldmVudC5yZXN1bHRzW2ldLmlzRmluYWwpIHsKICAgICAgICAgICAgICAvL0ZpbmFsIHJlc3VsdHMKICAgICAgICAgICAgICB2bS4kZW1pdCgnYW5hbHl0aWNzX3NlYXJjaF9iYXJfdm9pY2VfcmVzdWx0JywgZXZlbnQucmVzdWx0c1tpXVswXS50cmFuc2NyaXB0KTsKICAgICAgICAgICAgICB2bS50b19zZW5kID0gZXZlbnQucmVzdWx0c1tpXVswXS50cmFuc2NyaXB0OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJmaW5hbCByZXN1bHRzOiAiICsgZXZlbnQucmVzdWx0c1tpXVswXS50cmFuc2NyaXB0KTsgLy9PZiBjb3Vyc2Ug4oCTIGhlcmUgaXMgdGhlIHBsYWNlIHRvIGRvIHVzZWZ1bCB0aGluZ3Mgd2l0aCB0aGUgcmVzdWx0cy4KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvL2kuZS4gaW50ZXJpbS4uLgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpbnRlcmltIHJlc3VsdHM6ICIgKyBldmVudC5yZXN1bHRzW2ldWzBdLnRyYW5zY3JpcHQpOyAvL1lvdSBjYW4gdXNlIHRoZXNlIHJlc3VsdHMgdG8gZ2l2ZSB0aGUgdXNlciBuZWFyIHJlYWwgdGltZSBleHBlcmllbmNlLgogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vZW5kIGZvciBsb29wCgogICAgICAgIH07CgogICAgICAgIHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnMycpOwogICAgICAgIHRoaXMuY2FsbF9jbG91ZF9hcGkoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/vimalesh/CENSE/chatbot-portal/src/portal/mixins/ResponseBot/start_voice_communication.js"],"names":["methods","voice_communication","test","navigator","userAgent","console","log","call_cloud_api","window","SpeechRecognition","undefined","recognition","document","querySelector","classList","add","onresult","e","speechToText","results","transcript","onend","remove","vm","event","stop","i","resultIndex","length","isFinal","$emit","to_send","start"],"mappings":"AAAA,eAAe;AACbA,EAAAA,OAAO,EAAE;AACPC,IAAAA,mBADO,iCACgB;AACrB,UAAI,YAAYC,IAAZ,CAAiBC,SAAS,CAACC,SAA3B,CAAJ,EAA2C;AACzCC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,aAAKC,cAAL;AACD,OAHD,MAGO,IAAIC,MAAM,CAACC,iBAAP,IAA4BC,SAAhC,EAA2C;AAChDL,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACA,aAAKK,WAAL,GAAmB,IAAIH,MAAM,CAACC,iBAAX,EAAnB;AACAG,QAAAA,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,SAAtC,CAAgDC,GAAhD,CAAoD,UAApD;;AACA,aAAKJ,WAAL,CAAiBK,QAAjB,GAA4B,UAAAC,CAAC,EAAI;AAC/B,cAAMC,YAAY,GAAGD,CAAC,CAACE,OAAF,CAAU,CAAV,EAAa,CAAb,EAAgBC,UAArC;AACD,SAFD;;AAGA,aAAKT,WAAL,CAAiBU,KAAjB,GAAyB,YAAY;AACnCT,UAAAA,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,SAAtC,CAAgDQ,MAAhD,CAAuD,UAAvD,EADmC,CAEnC;AACD,SAHD;;AAIA,YAAIC,EAAE,GAAG,IAAT;;AACA,aAAKZ,WAAL,CAAiBK,QAAjB,GAA4B,UAAUQ,KAAV,EAAiB;AAC3C,cAAI,OAAOA,KAAK,CAACL,OAAb,KAAyB,WAA7B,EAA0C;AACxC;AACA,iBAAKR,WAAL,CAAiBc,IAAjB;AACA;AACD;;AACD,eAAK,IAAIC,CAAC,GAAGF,KAAK,CAACG,WAAnB,EAAgCD,CAAC,GAAGF,KAAK,CAACL,OAAN,CAAcS,MAAlD,EAA0D,EAAEF,CAA5D,EAA+D;AAC7D,gBAAIF,KAAK,CAACL,OAAN,CAAcO,CAAd,EAAiBG,OAArB,EAA8B;AAC5B;AACAN,cAAAA,EAAE,CAACO,KAAH,CAAS,mCAAT,EAA8CN,KAAK,CAACL,OAAN,CAAcO,CAAd,EAAiB,CAAjB,EAAoBN,UAAlE;AACAG,cAAAA,EAAE,CAACQ,OAAH,GAAaP,KAAK,CAACL,OAAN,CAAcO,CAAd,EAAiB,CAAjB,EAAoBN,UAAjC;AACAf,cAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBkB,KAAK,CAACL,OAAN,CAAcO,CAAd,EAAiB,CAAjB,EAAoBN,UAApD,EAJ4B,CAIqC;AAClE,aALD,MAKO;AACL;AACAf,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBkB,KAAK,CAACL,OAAN,CAAcO,CAAd,EAAiB,CAAjB,EAAoBN,UAAtD,EAFK,CAE8D;AACpE;AACF,WAhB0C,CAgBzC;;AACH,SAjBD;;AAkBA,aAAKT,WAAL,CAAiBqB,KAAjB;AACD,OA/BM,MA+BA;AACL3B,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACA,aAAKC,cAAL;AACD;AACF;AAxCM;AADI,CAAf","sourcesContent":["export default {\n  methods: {\n    voice_communication () {\n      if (/Chromium/i.test(navigator.userAgent)) {\n        console.log('chromium detected');\n        this.call_cloud_api();\n      } else if (window.SpeechRecognition != undefined) {\n        console.log('2');\n        this.recognition = new window.SpeechRecognition();\n        document.querySelector(\"#microphone\").classList.add(\"voice-on\");\n        this.recognition.onresult = e => {\n          const speechToText = e.results[0][0].transcript;\n        };\n        this.recognition.onend = function () {\n          document.querySelector(\"#microphone\").classList.remove(\"voice-on\");\n          //Again – give the user feedback that you are not listening anymore. If you wish to achieve continuous recognition – you can write a script to start the recognizer again here.\n        };\n        var vm = this;\n        this.recognition.onresult = function (event) {\n          if (typeof event.results === \"undefined\") {\n            //Something is wrong…\n            this.recognition.stop();\n            return;\n          }\n          for (var i = event.resultIndex; i < event.results.length; ++i) {\n            if (event.results[i].isFinal) {\n              //Final results\n              vm.$emit('analytics_search_bar_voice_result', event.results[i][0].transcript )\n              vm.to_send = event.results[i][0].transcript;\n              console.log(\"final results: \" + event.results[i][0].transcript); //Of course – here is the place to do useful things with the results.\n            } else {\n              //i.e. interim...\n              console.log(\"interim results: \" + event.results[i][0].transcript); //You can use these results to give the user near real time experience.\n            }\n          } //end for loop\n        };\n        this.recognition.start();\n      } else {\n        console.log('3');\n        this.call_cloud_api();\n      }\n    },\n  },\n}\n"]}]}