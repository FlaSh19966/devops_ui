{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/DefineEndpoints.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/DefineEndpoints.vue","mtime":1660042032563},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjb25maWctYXBpIiwKICBjb21wb25lbnRzOiB7CiAgICBNdWx0aXNlbGVjdDogTXVsdGlzZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93X29yX2Jsb2NrOiBmYWxzZSwKICAgICAgaW50ZW50bGlzdDogW10sCiAgICAgIHF1ZXN0aW9uOiAiIiwKICAgICAgdXJsOiAiIiwKICAgICAgbmFtZTogbnVsbCwKICAgICAgYXBpX2xpc3Q6IFtdLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBpbmRleDogbnVsbCwKICAgICAgdG90YWxfcGFnZXM6ICIiLAogICAgICBzaG93X2pzb25fcmVxdWVzdF9kYXRhOiAiIiwKICAgICAgc2hvd19qc29uX3Jlc3BvbnNlX2RhdGE6ICIiLAogICAgICBzdWNjZXNzZnVsX21lc3NhZ2U6ICIiLAogICAgICBqc29uX3JlcXVlc3RfZGF0YTogW10sCiAgICAgIGpzb25fcmVzcG9uc2VfZGF0YTogW10sCiAgICAgIHR5cGU6IG51bGwsCiAgICAgIHRhc2tfZnJvbTogIiIsCiAgICAgIGVudGl0eV9saXN0OiBbXSwKICAgICAgcG9zdF9tZXRob2RfcmVxdWVzdF9saXN0OiBbXSwKICAgICAgcG9zdF9tZXRob2RfcmVxdWVzdF92YWx1ZTogIiIsCiAgICAgIGFwaV9tZXRob2Q6IG51bGwsCiAgICAgIHJlc3BvbnNlX2tleV9lZGl0X21lc3NhZ2U6ICIiLAogICAgICBlbmR1c2VyX21zZ190eXBlOiBudWxsLAogICAgICB1bnN1Y2Nlc3NmdWxfbWVzc2FnZTogbnVsbCwKICAgICAgcmVxdWVzdF9qc29uX2VkaXRhYmxlOiBudWxsLAogICAgICByZXNwb25zZV9qc29uX2VkaXRhYmxlOiBudWxsLAogICAgICBlbmRfdXNlcl9tZXNzYWdlOiBudWxsLAogICAgICBlZGl0YWJsZV92YWx1ZXM6ICIiLAogICAgICBjaGVja2VkX2xpc3Q6IFtdLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICBpbnRlbnRzOiAiIiwKICAgICAgcGFnZV9ubzogMSwKICAgICAgcGVyX3BhZ2U6IDEwLAogICAgICBzcGlubmVyT246IGZhbHNlLAogICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlLAogICAgICByZXF1ZXN0X2pzb25fY2FzZV8xOiAie1xuICAgICAgICAgIFwiY29tcGFueWlkXCI6IFwiPENvbXBhbnlfSUQ+XCIsXG4gICAgICAgICAgXCJlbWFpbFwiOiBcIjxFbWFpbD5cIixcbiAgICAgICAgICBcInJvbGVcIjogXCI8Um9sZT5cIixcbiAgICAgICAgICBcInN1YmplY3RcIjogXCIgXCIsXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIiBcIlxufSIsCiAgICAgIGlucHV0X2Zyb21fdXNlcl9jYXNlXzE6ICJzdWJqZWN0O2Rlc2NyaXB0aW9uIiwKICAgICAgcmVxdWVzdF9qc29uX2Nhc2VfMjogIntcblx0XCJ1c2VyXCI6IHtcblx0XHRcImNvbXBhbnlpZFwiOiBcIjxDb21wYW55X0lEPlwiLFxuICAgIFwiZW1haWxcIjogXCI8RW1haWw+XCIsXG4gICAgXCJyb2xlXCI6IFwiPFJvbGU+XCIsXG5cdFx0XCJpbmZvXCI6IHtcblx0XHRcdFwibmlja25hbWVcIjogXCJcIlxuXHRcdH1cblx0fSxcblx0XCJzZWFyY2hwYXJhbWV0ZXJcIjoge1xuXHRcdFwic3RhdHVzXCI6IFwiXCIsXG5cdFx0XCJvcmRlcmJ5XCI6IFwiXCIsXG5cdFx0XCJmcm9tZGF0ZVwiOiBcIjAxLzAxLzIwMThcIixcblx0XHRcImNvdW50XCI6IDEwLFxuXHRcdFwic2VhcmNodGV4dFwiOiBcIlwiLFxuXHRcdFwidHlwZW9mdmlzaXRcIjogXCJBTExcIixcblx0XHRcInNvcnRvcmRlclwiOiBcImFwcG9pbnRtZW50XCIsXG5cdFx0XCJzdGFydGluZGV4XCI6IFwiMVwiLFxuXHRcdFwiZW5kaW5kZXhcIjogXCIxMFwiLFxuXHRcdFwidG9kYXRlXCI6IFwiMDgvMDYvMjAxOFwiXG5cdH1cblxufSIsCiAgICAgIGlucHV0X2Zyb21fdXNlcl9jYXNlXzI6ICJ1c2VyLGluZm8sbmlja25hbWU7c2VhcmNocGFyYW1ldGVyLGZyb21kYXRlO3NlYXJjaHBhcmFtZXRlcix0b2RhdGUiLAogICAgICByZXF1ZXN0X2pzb25fY2FzZV8zOiAieyBcbiAgICAgICAgICBcImNvbXBhbnlpZFwiOlwic2Vzc2lvbi5nZXQoJ2NvbXBhbnlpZCcpXCIsXG4gICAgICAgICAgXCJlbWFpbFwiOlwic2Vzc2lvbi5nZXQoJ2VtYWlsJylcIixcbiAgICAgICAgICBcInJvbGVcIjpcInNlc3Npb24uZ2V0KCdyb2xlJylcIiBcbn0iLAogICAgICByZXNwb25zZV9qc29uX2Nhc2VfMTogIntcbiAgJ21lc3NhZ2UnOidZb3VyIGFwcG9pbnRtZW50IGhhcyBiZWVuIHNjaGVkdWxlZCcsXG4gICd1c2VybmFtZSc6J0NlbnNlJyxcbiAgJ2VtYWlsJzondXNlckBjZW5zZS5haSdcbn0iLAogICAgICByZXNwb25zZV9qc29uX2Nhc2VfMTE6ICJ7XG4gICdtZXNzYWdlJzonQVBJIGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseScsXG4gICdjb3VudCc6JzgnXG4gICd1c2VybmFtZSc6J0NlbnNlJyxcbiAgJ2VtYWlsJzondXNlckBjZW5zZS5haSdcbn0iLAogICAgICBjdXJyZW50X3N0ZXA6IDEsCiAgICAgIHRvdGFsX3N0ZXBzOiAyLAogICAgICAvLyB0YXNrX25hbWU6ICIiLAogICAgICB0YXNrX2lucHV0X3ZhbHVlczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBpZiAoIXRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSAmJiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgdG9hc3RyLndhcm5pbmcoIlBsZWFzZSBzZWxlY3QgYSBjb21wYW55IG5hbWUgZnJvbSB0aGUgZHJvcGRvd24iKTsKICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3JvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlOYW1lIik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgIH0KCiAgICBheGlvcy5nZXQoYXBpX2NhbGxzLmdldF9uZXJfdGFncygpLCB7CiAgICAgIHBhcmFtczogewogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgfSwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzLmVudGl0eV9saXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgX3RoaXMucG9zdF9tZXRob2RfcmVxdWVzdF9saXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICB9CiAgICB9KTsKICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF9saXN0X2xpbmsoKSwgewogICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMuYXBpX2xpc3RfdXBkYXRlKHJlc3BvbnNlLmRhdGEpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0KICAgIH0pOwogICAgYXhpb3MucG9zdChhcGlfY2FsbHMuc2hvd19pbnRlbnRzX3VybCgpLCB7CiAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgIHNob3dpbnRlbnQ6ICJUcnVlIgogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgX3RoaXMuaW50ZW50bGlzdC5wdXNoKHJlc3BvbnNlLmRhdGFbaV0ucmVwbGFjZShfdGhpcy5jb21wYW55aWQgKyAiXyIsICIiKSk7CiAgICAgIH0KICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAkKCdbZGF0YS10b29sdGlwPSJ0b29sdGlwIl0nKS50b29sdGlwKCk7CiAgICB2YXIgdm0gPSB0aGlzOwogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIHZtID0gdGhpczsKICAgICQoIiNjb25maWdhcGltb2RhbDQiKS5vbigic2hvd24uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCIjY29uZmlnYXBpbW9kYWwiKS5jc3MoIm9wYWNpdHkiLCAiLTAuNSIpOwogICAgfSk7CiAgICAkKCIjY29uZmlnYXBpbW9kYWw0Iikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICQoIiNjb25maWdhcGltb2RhbCIpLmNzcygib3BhY2l0eSIsICIxIik7CiAgICB9KTsKICAgICQoIiNjb25maWdhcGltb2RhbDIiKS5vbigic2hvd24uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCIjY29uZmlnYXBpbW9kYWwiKS5jc3MoIm9wYWNpdHkiLCAiLTAuNSIpOwogICAgfSk7CiAgICAkKCIjY29uZmlnYXBpbW9kYWwyIikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICQoIiNjb25maWdhcGltb2RhbCIpLmNzcygib3BhY2l0eSIsICIxIik7CiAgICB9KTsKICAgICQoIiNjb25maWdhcGltb2RhbF9qc29uX2VkaXRhYmxlIikub24oInNob3duLmJzLm1vZGFsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI2NvbmZpZ2FwaW1vZGFsIikuY3NzKCJvcGFjaXR5IiwgIi0wLjUiKTsKICAgIH0pOwogICAgJCgiI2NvbmZpZ2FwaW1vZGFsX2pzb25fZWRpdGFibGUiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI2NvbmZpZ2FwaW1vZGFsIikuY3NzKCJvcGFjaXR5IiwgIjEiKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlX3RvdGFsX3N0ZXBzOiBmdW5jdGlvbiBjaGFuZ2VfdG90YWxfc3RlcHMoc3RlcF92YWx1ZSkgewogICAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09ICJUcnVlIikgewogICAgICAgIHRoaXMudG90YWxfc3RlcHMgPSAzOwogICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAiRmFsc2UiKSB7CiAgICAgICAgdGhpcy50b3RhbF9zdGVwcyA9IDI7CiAgICAgIH0gZWxzZSBpZiAoc3RlcF92YWx1ZSA9PSAzICYmIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJGYWxzZSIpIHsKICAgICAgICB0aGlzLmN1cnJlbnRfc3RlcCA9IDE7CiAgICAgIH0gZWxzZSBpZiAoc3RlcF92YWx1ZSA+IDEgJiYgdGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUgPT0gIlRydWUiKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3N0ZXAgLT0gMTsKICAgICAgfQogICAgfSwKICAgIHJlcV9qc29uOiBmdW5jdGlvbiByZXFfanNvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBKU09OLnBhcnNlKHRoaXMuc2hvd19qc29uX3JlcXVlc3RfZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIHRyYWluX2ludGVudF9tb2RlbDogZnVuY3Rpb24gdHJhaW5faW50ZW50X21vZGVsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIFN3YWwoewogICAgICAgIHRpdGxlOiAiQXJlIFlvdSBTdXJlPyIsCiAgICAgICAgdGV4dDogIllvdSB3YW50IHRvIFRyYWluIFRoZSBNb2RlbD8iLAogICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIsCiAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy50cmFpbl9jb252ZXJzYXRpb25fbW9kZWxzKCksIHsKICAgICAgICAgICAgZW1haWw6IF90aGlzMi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXMyLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiBfdGhpczIuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogX3RoaXMyLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICBjb21wYW55X2RldGFpbHM6IHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzMi5jb21wYW55bmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczIuY29tcGFueWlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXMyLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDQwNDYpIHsKICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhyZXNwb25zZS5kYXRhLk1TRyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0dfQ09ERSA9PT0gMTAzNCkgewogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihyZXNwb25zZS5kYXRhLk1TRyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZV9hcGk6IGZ1bmN0aW9uIGRlbGV0ZV9hcGkoaW50ZW50bGlzdCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiWW91IHdvbid0IGJlIGFibGUgdG8gcmV2ZXJ0IHRoaXMhIiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkZWxldGUhISIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgX3RoaXMzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5kZWxldGVfYXBpX3VybCgpLCB7CiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzMy5jb21wYW55aWQsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXMzLmNvbXBhbnluYW1lLAogICAgICAgICAgICBlbWFpbDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgaW50ZW50X2xpc3Q6IGludGVudGxpc3QKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXMzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXMzLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiQVBJcyBoYXZlIGJlZW4gZGVsZXRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgIF90aGlzMy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVfaW5kaXZpZHVhbDogZnVuY3Rpb24gZGVsZXRlX2luZGl2aWR1YWwoaW5kZXgpIHsKICAgICAgdmFyIGludGVudGxpc3QgPSBbXTsKICAgICAgaW50ZW50bGlzdC5wdXNoKHRoaXMuY29tcGFueWlkICsgIl8iICsgdGhpcy5hcGlfbGlzdFtpbmRleF0uaW50ZW50KTsKICAgICAgdGhpcy5kZWxldGVfYXBpKGludGVudGxpc3QpOwogICAgfSwKICAgIGRlbGV0ZV9zZWxlY3RlZDogZnVuY3Rpb24gZGVsZXRlX3NlbGVjdGVkKCkgewogICAgICB2YXIgaW50ZW50bGlzdCA9IFtdOwoKICAgICAgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiTm8gZW5kcG9pbnQgc2VsZWN0ZWQhIiwKICAgICAgICAgIHRleHQ6ICIiLAogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmNoZWNrZWRfbGlzdCkgewogICAgICAgICAgaW50ZW50bGlzdC5wdXNoKHRoaXMuY29tcGFueWlkICsgIl8iICsgdGhpcy5jaGVja2VkX2xpc3RbaV0uaW50ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuZGVsZXRlX2FwaShpbnRlbnRsaXN0KTsKICAgICAgfQogICAgfSwKICAgIGVkaXRfYXBpOiBmdW5jdGlvbiBlZGl0X2FwaShpbmRleCkgewogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICAgIHRoaXMucXVlc3Rpb24gPSB0aGlzLmFwaV9saXN0W2luZGV4XS5xdWVzdGlvbjsKICAgICAgdGhpcy5pbnRlbnRzID0gdGhpcy5hcGlfbGlzdFtpbmRleF0uaW50ZW50OwogICAgICB0aGlzLmFwaV9tZXRob2QgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5tZXRob2Q7CiAgICAgIHRoaXMuZWRpdGFibGVfdmFsdWVzID0gdGhpcy5hcGlfbGlzdFtpbmRleF0uZWRpdGFibGVfdmFsdWVzOwogICAgICB0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLmVkaXRhYmxlOwoKICAgICAgaWYgKHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJUcnVlIikgewogICAgICAgIHRoaXMudG90YWxfc3RlcHMgPSAzOwogICAgICB9CgogICAgICB0aGlzLnVybCA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnVybDsKICAgICAgdGhpcy5zaG93X2pzb25fcmVxdWVzdF9kYXRhID0gdGhpcy5hcGlfbGlzdFtpbmRleF0ucmVxX2pzb247CiAgICAgIHRoaXMuc2hvd19qc29uX3Jlc3BvbnNlX2RhdGEgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5yZXNwX2pzb247CiAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLm1lc3NhZ2VfdHlwZTsKICAgICAgdGhpcy5lbmRfdXNlcl9tZXNzYWdlID0gdGhpcy5hcGlfbGlzdFtpbmRleF0uZW5kX3VzZXJfbWVzc2FnZTsKICAgICAgdGhpcy5zdWNjZXNzZnVsX21lc3NhZ2UgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5yZXNwb25zZV9rZXk7CiAgICAgIHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnJlc3BvbnNlX2tleV9lZGl0YWJsZTsKICAgICAgdGhpcy5yZXNwb25zZV9rZXlfZWRpdF9tZXNzYWdlID0gdGhpcy5hcGlfbGlzdFtpbmRleF0ucmVzcG9uc2Vfa2V5X21lc3NhZ2U7CiAgICAgIHRoaXMudW5zdWNjZXNzZnVsX21lc3NhZ2UgPSB0aGlzLmFwaV9saXN0W2luZGV4XS5yZXNwb25zZV9rZXlfdW5zdWNjZXNzZnVsOyAvLyB0aGlzLnRhc2tfbmFtZSA9IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnRhc2tfbmFtZTsKCiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5hcGlfbGlzdFtpbmRleF0udGFza3NfbGlzdCkgewogICAgICAgIHRoaXMudGFza19pbnB1dF92YWx1ZXMucHVzaCh7CiAgICAgICAgICBrZXlfbmFtZTogdGhpcy5hcGlfbGlzdFtpbmRleF0udGFza3NfbGlzdFtpXS5SYXdTbG90TmFtZSwKICAgICAgICAgIGlucHV0X3RleHQ6IHRoaXMuYXBpX2xpc3RbaW5kZXhdLnRhc2tzX2xpc3RbaV0uVGV4dCwKICAgICAgICAgIGRyb3Bkb3duX3ZhbHVlOiAiIgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0ZWRfbGlzdDogZnVuY3Rpb24gc2VsZWN0ZWRfbGlzdChpbmRleCkgewogICAgICBpZiAoaW5kZXggPT0gImFsbCIpIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgdGhpcy5jaGVja2VkX2xpc3QgPSB0aGlzLmM7ZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gZmFsc2UpIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgIHZhciB2YWxfaW5kZXggPSB0aGlzLmNoZWNrZWRfbGlzdC5pbmRleE9mKHRoaXMuYXBpX2xpc3RbaW5kZXhdKTsKICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5hcGlfbGlzdFtpbmRleF07CgogICAgICAgICAgaWYgKHZhbF9pbmRleCA9PSAtMSkgewogICAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdC5wdXNoKHRlbXApOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gZmFsc2UpIHsKICAgICAgICAgIHZhciBzZWxlY3RhbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc2VsZWN0YWxsIik7CgogICAgICAgICAgaWYgKHNlbGVjdGFsbC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgc2VsZWN0YWxsLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcihmdW5jdGlvbiAoYXBpX2xpc3QpIHsKICAgICAgICAgICAgcmV0dXJuIGFwaV9saXN0LmFwaV9saXN0ICE9PSBpbmRleDsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0ZW1wOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFkZF9hcGk6IGZ1bmN0aW9uIGFkZF9hcGkoY3VycmVudF9zdGVwKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgIGlmIChjdXJyZW50X3N0ZXAgPT0gMSkgewogICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uID09ICIiIHx8IHRoaXMudXJsID09ICIiIHx8IHRoaXMuYXBpX21ldGhvZCA9PSBudWxsIHx8IHRoaXMuaW50ZW50cyA9PSAiIiB8fCB0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSBudWxsIHx8IHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJUcnVlIiAmJiB0aGlzLmVkaXRhYmxlX3ZhbHVlcyA9PSAiIikgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgZW50ZXIgYWxsIHRoZSByZXF1aXJlZCB2YWx1ZXMiKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVxX2pzb24oKSA9PSBmYWxzZSkgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJZb3VyIFJlcXVlc3QgSlNPTiBpcyBpbnZhbGlkLiIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUgPT0gIlRydWUiICYmICF0aGlzLmlzRWRpdCkgewogICAgICAgICAgICB2YXIgY3N2ID0gdGhpcy5lZGl0YWJsZV92YWx1ZXMuc3BsaXQoIjsiKTsKICAgICAgICAgICAgdmFyIGlucHV0X3ZhbHVlOwogICAgICAgICAgICB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpIGluIGNzdikgewogICAgICAgICAgICAgIHZhciB0ZW1wX2xpc3QgPSBjc3ZbaV0uc3BsaXQoIiwiKTsKICAgICAgICAgICAgICBpbnB1dF92YWx1ZSA9IHRlbXBfbGlzdFt0ZW1wX2xpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgdGhpcy50YXNrX2lucHV0X3ZhbHVlcy5wdXNoKHsKICAgICAgICAgICAgICAgIGtleV9uYW1lOiBpbnB1dF92YWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0X3RleHQ6ICIiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMudG90YWxfc3RlcHMgPSAzOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50X3N0ZXAgKz0gMTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9zdGVwID0gMzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoY3VycmVudF9zdGVwID09IDIpIHsKICAgICAgICB2YXIgZW1wdHlfdmFycyA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGFza19pbnB1dF92YWx1ZXMpIHsKICAgICAgICAgIGlmICh0aGlzLnRhc2tfaW5wdXRfdmFsdWVzW2ldLmlucHV0X3RleHQgPT0gIiIpIHsKICAgICAgICAgICAgZW1wdHlfdmFycy5wdXNoKHRoaXMudGFza19pbnB1dF92YWx1ZXNbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVtcHR5X3ZhcnMubGVuZ3RoID09IDApIHsKICAgICAgICAgIHRoaXMuY3VycmVudF9zdGVwICs9IDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIGVudGVyIGFsbCB0aGUgdmFsdWVzLiIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGN1cnJlbnRfc3RlcCA9PSAzKSB7CiAgICAgICAgdmFyIGV4aXN0aW5nX2ludGVudF9saXN0ID0gdGhpcy5hcGlfbGlzdC5maWx0ZXIoZnVuY3Rpb24gKGFwaSkgewogICAgICAgICAgcmV0dXJuIGFwaS5pbnRlbnQgPT0gX3RoaXM0LmludGVudHM7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHBvc3RfbWV0aG9kX2RhdGEsIGdldF9tZXRob2RfZGF0YTsKICAgICAgICBwb3N0X21ldGhvZF9kYXRhID0ge307CgogICAgICAgIGlmICh0aGlzLmFwaV9tZXRob2QgPT0gIlBPU1QiICYmIHRoaXMudGFza19mcm9tID09ICJmcm9tX2VudGl0eSIpIHsKICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50YXNrX2lucHV0X3ZhbHVlcykgewogICAgICAgICAgICBwb3N0X21ldGhvZF9kYXRhW3RoaXMudGFza19pbnB1dF92YWx1ZXNbaV0ua2V5X25hbWVdID0gewogICAgICAgICAgICAgIGZyb21fdGV4dDogdHJ1ZSwKICAgICAgICAgICAgICBmcm9tX2VudGl0eTogdGhpcy50YXNrX2lucHV0X3ZhbHVlc1tpXS5kcm9wZG93bl92YWx1ZSAhPSAiIiA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICBlbnRpdHk6IHRoaXMudGFza19pbnB1dF92YWx1ZXNbaV0uZHJvcGRvd25fdmFsdWUsCiAgICAgICAgICAgICAgaW50ZW50OiB0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuYXBpX2xpc3RbaV0uaW50ZW50LAogICAgICAgICAgICAgIG5vdF9pbnRlbnQ6IG51bGwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmFwaV9tZXRob2QgPT0gIkdFVCIpIHsKICAgICAgICAgIGdldF9tZXRob2RfZGF0YSA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50YXNrX2lucHV0X3ZhbHVlcykgewogICAgICAgICAgICBnZXRfbWV0aG9kX2RhdGFbdGhpcy50YXNrX2lucHV0X3ZhbHVlc1tpXS5rZXlfbmFtZV0gPSB7CiAgICAgICAgICAgICAgRW50aXR5OiB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzW2ldLmlucHV0X3RleHQsCiAgICAgICAgICAgICAgU2xvdDogbnVsbAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGV4aXN0aW5nX2ludGVudF9saXN0Lmxlbmd0aCA+IDAgJiYgIXRoaXMuaXNFZGl0KSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIlRoZSBpbnRlbnQgYWxyZWFkeSBleGlzdHMuIFBsZWFzZSB0cnkgd2l0aCBhbm90aGVyIGludGVudCIpOwogICAgICAgIH0gZWxzZSBpZiAoKHRoaXMuZW5kX3VzZXJfbWVzc2FnZSAhPSAiIiB8fCB0aGlzLmVuZHVzZXJfbXNnX3R5cGUgPT0gIlRocm91Z2hfQVBJIikgJiYgKHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSAhPSBudWxsIHx8IHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9PSAiQ3VzdG9tIikgJiYgdGhpcy5lbmR1c2VyX21zZ190eXBlICE9IG51bGwgJiYgdGhpcy5zdWNjZXNzZnVsX21lc3NhZ2UgIT0gbnVsbCAmJiAodGhpcy5zaG93X2pzb25fcmVzcG9uc2VfZGF0YSAhPSAiIiB8fCB0aGlzLmVuZHVzZXJfbXNnX3R5cGUgPT0gIkN1c3RvbSIpKSB7CiAgICAgICAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiA9PSAiU2lsdmVyIikgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6ICJZb3UncmUgbm90IGF2YWlsIHRvIHVzZSB0aGlzIHNlcnZpY2UsIGR1ZSB0byB5b3VyIHN1YnNjcmlwdGlvbiBwbGFuLiBLaW5kbHkgdXBncmFkZSB5b3VyIHBsYW4uIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICBfdGhpczQuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICAgIHZhciB0YXNrcyA9IHt9OwoKICAgICAgICAgICAgaWYgKHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJUcnVlIiAmJiB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzLmxlbmd0aCA+IDAgfHwgdGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUgPT0gIkZhbHNlIikgewogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50YXNrX2lucHV0X3ZhbHVlcykgewogICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBbXTsKICAgICAgICAgICAgICAgIHRlbXAucHVzaCh7CiAgICAgICAgICAgICAgICAgIFR5cGU6ICJBc2siLAogICAgICAgICAgICAgICAgICBUZXh0OiB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzW2ldLmlucHV0X3RleHQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGFza3NbdGhpcy50YXNrX2lucHV0X3ZhbHVlc1tpXS5rZXlfbmFtZV0gPSB0ZW1wOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2NvbmZpZ19hcGlfdXJsKCksIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgICAgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24sCiAgICAgICAgICAgICAgICByZXF1ZXN0X2pzb25fa2V5X21hcHBpbmc6IGdldF9tZXRob2RfZGF0YSwKICAgICAgICAgICAgICAgIHVybDogdGhpcy51cmwsCiAgICAgICAgICAgICAgICBpbnRlbnQ6IHRoaXMuY29tcGFueWlkICsgIl8iICsgdGhpcy5pbnRlbnRzLAogICAgICAgICAgICAgICAgcmVxdWVzdGpzb246IHRoaXMuc2hvd19qc29uX3JlcXVlc3RfZGF0YSwKICAgICAgICAgICAgICAgIGFwaV9tZXRob2Q6IHRoaXMuYXBpX21ldGhvZCwKICAgICAgICAgICAgICAgIGVuZF91c2VyX21lc3NhZ2U6IHRoaXMuZW5kX3VzZXJfbWVzc2FnZSwKICAgICAgICAgICAgICAgIG1zZ190eXBlOiB0aGlzLmVuZHVzZXJfbXNnX3R5cGUsCiAgICAgICAgICAgICAgICByZXNwb25zZWtleTogdGhpcy5zdWNjZXNzZnVsX21lc3NhZ2UsCiAgICAgICAgICAgICAgICBhcGlfZWRpdDogdGhpcy5yZXF1ZXN0X2pzb25fZWRpdGFibGUsCiAgICAgICAgICAgICAgICBhcGlfZWRpdGFibGVfdmFsdWU6IHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJUcnVlIiA/IHRoaXMuZWRpdGFibGVfdmFsdWVzIDogIiIsCiAgICAgICAgICAgICAgICByZXNwb25zZWpzb246IHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9PSAiVGhyb3VnaF9BUEkiID8gdGhpcy5zaG93X2pzb25fcmVzcG9uc2VfZGF0YSA6ICIiLAogICAgICAgICAgICAgICAgcmVzcG9uc2VfbXNnX2VkaXRhYmxlOiB0aGlzLnJlc3BvbnNlX2pzb25fZWRpdGFibGUsCiAgICAgICAgICAgICAgICByZXNwb25zZV9tc2dfZWRpdGFibGVfdmFsdWU6IHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSA9PSAiVHJ1ZSIgPyB0aGlzLnJlc3BvbnNlX2tleV9lZGl0X21lc3NhZ2UgOiAiIiwKICAgICAgICAgICAgICAgIHNsb3RfbWFwcGluZ19kYXRhOiBwb3N0X21ldGhvZF9kYXRhLAogICAgICAgICAgICAgICAgdW5zdWNjZXNzZnVsX21zZzogdGhpcy51bnN1Y2Nlc3NmdWxfbWVzc2FnZSwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICB0YXNrX2RldGFpbHM6IHRhc2tzLAogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTXNnID09ICJKc29uIGFkZGVkIikgewogICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciBBUEkgaGFzIGJlZW4gYWRkZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNC4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1zZyA9PSAiSnNvbiB1cGRhdGVkIikgewogICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciBBUEkgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTXNnID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogIlRoZXJlIHdhcyBhbiBpbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5Nc2cgPT0gIkVuZHBvaW50IGxpbWl0IGV4Y2VlZCIpIHsKICAgICAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiWW91ciBMaW1pdCBoYXMgYmVlbiBleGNlZWRlZCwgS2luZGx5IHVwZ3JhZGUgeW91ciBwbGFuIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgICBfdGhpczQuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7IC8vIGF4aW9zCiAgICAgICAgICAgICAgLy8gICAucG9zdChhcGlfY2FsbHMudGFza19saXN0X3VybCgpLCB7CiAgICAgICAgICAgICAgLy8gICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICAgIC8vICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgLy8gICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgLy8gICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgLy8gICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIC8vICAgICBpbnRlbnQ6IHRoaXMuaW50ZW50cywKICAgICAgICAgICAgICAvLyAgICAgdGFza19kZXRhaWxzOiB0YXNrcywKICAgICAgICAgICAgICAvLyAgICAgLy8gdGFza19uYW1lOiB0aGlzLnRhc2tfbmFtZQogICAgICAgICAgICAgIC8vICAgfSwgewogICAgICAgICAgICAgIC8vICAgaGVhZGVyczogewogICAgICAgICAgICAgIC8vICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgIC8vICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIC8vICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIC8vICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiVGFzayBBZGRlZCIpIHsKICAgICAgICAgICAgICAvLyAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciB0YXNrIGhhcyBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgIC8vICAgICAgICQoIiNjb25maWdhcGltb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgICAgLy8gICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAvLyAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgLy8gICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAvLyAgIGlmICgKICAgICAgICAgICAgICAvLyAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgICAgICAgICAgIC8vICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgICAgICAgICAgLy8gICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgICAgICAgICAgICAvLyAgICkgewogICAgICAgICAgICAgIC8vICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID09ICJGYWxzZSIgJiYgdGhpcy50YXNrX2lucHV0X3ZhbHVlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICB2YXIgaW50ZW50cyA9IFtdOwogICAgICAgICAgICAgIGludGVudHMucHVzaCh0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuaW50ZW50cyk7CgogICAgICAgICAgICAgIGlmICh0aGlzLnRhc2tfaW5wdXRfdmFsdWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGF4aW9zLmRlbGV0ZShhcGlfY2FsbHMudGFza19saXN0X3VybCgpLCB7CiAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBpbnRlbnRzOiBpbnRlbnRzLAogICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJUYXNrKHMpIERlbGV0ZWQiKSB7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRGVsZXRlZCEiLAogICAgICAgICAgICAgICAgICAgICAgdGV4dDogIllvdXIgdGFzayhzKSBoYXZlIGJlZW4gZGVsZXRlZC4iLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNC4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczQuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIGVudGVyIGFsbCB0aGUgcmVxdWlyZWQgdmFsdWVzIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xlYXJfZmllbGRzOiBmdW5jdGlvbiBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMucXVlc3Rpb24gPSAiIjsKICAgICAgdGhpcy5pbnRlbnRzID0gIiI7CiAgICAgIHRoaXMuYXBpX21ldGhvZCA9IG51bGw7CiAgICAgIHRoaXMuZWRpdGFibGVfdmFsdWVzID0gIiI7CiAgICAgIHRoaXMucmVxdWVzdF9qc29uX2VkaXRhYmxlID0gbnVsbDsKICAgICAgdGhpcy51cmwgPSAiIjsKICAgICAgdGhpcy5zaG93X2pzb25fcmVxdWVzdF9kYXRhID0gIiI7CiAgICAgIHRoaXMuc2hvd19qc29uX3Jlc3BvbnNlX2RhdGEgPSAiIjsKICAgICAgdGhpcy5lbmRfdXNlcl9tZXNzYWdlID0gIiI7CiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuZW5kdXNlcl9tc2dfdHlwZSA9IG51bGw7CiAgICAgIHRoaXMucmVzcG9uc2VfanNvbl9lZGl0YWJsZSA9IG51bGw7CiAgICAgIHRoaXMucmVzcG9uc2Vfa2V5X2VkaXRfbWVzc2FnZSA9IG51bGw7CiAgICAgIHRoaXMudW5zdWNjZXNzZnVsX21lc3NhZ2UgPSBudWxsOwogICAgICB0aGlzLmN1cnJlbnRfc3RlcCA9IDE7CiAgICAgIHRoaXMudG90YWxfc3RlcHMgPSAyOwogICAgICB0aGlzLnRhc2tfaW5wdXRfdmFsdWVzID0gW107IC8vIHRoaXMudGFza19uYW1lID0gIiI7CiAgICB9LAogICAgYXBpX2xpc3RfdXBkYXRlOiBmdW5jdGlvbiBhcGlfbGlzdF91cGRhdGUobWVzc2FnZSkgewogICAgICBmb3IgKHZhciBpIGluIG1lc3NhZ2UpIHsKICAgICAgICB0aGlzLmFwaV9saXN0LnB1c2goewogICAgICAgICAgaW50ZW50OiBpLnJlcGxhY2UodGhpcy5jb21wYW55aWQgKyAiXyIsICIiKSwKICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VbaV0uTVNHLAogICAgICAgICAgbWV0aG9kOiBtZXNzYWdlW2ldLk1FVEhPRCwKICAgICAgICAgIHJlcV9qc29uOiBtZXNzYWdlW2ldLlJlcXVlc3RKc29uLAogICAgICAgICAgcmVzcF9qc29uOiBtZXNzYWdlW2ldLlJlc3BvbnNlSnNvbiwKICAgICAgICAgIHVybDogbWVzc2FnZVtpXS5VUkwsCiAgICAgICAgICBlZGl0YWJsZV92YWx1ZXM6IG1lc3NhZ2VbaV0uVmFsdWVzVG9FZGl0LAogICAgICAgICAgcXVlc3Rpb246IG1lc3NhZ2VbaV0uUXVlc3Rpb24sCiAgICAgICAgICBlZGl0YWJsZTogbWVzc2FnZVtpXS5pc0VkaXQsCiAgICAgICAgICBtZXNzYWdlX3R5cGU6IG1lc3NhZ2VbaV0uTXNnX3R5cGUsCiAgICAgICAgICBlbmRfdXNlcl9tZXNzYWdlOiBtZXNzYWdlW2ldLk1lc3NhZ2VUb0VuZFVzZXIsCiAgICAgICAgICByZXNwb25zZV9rZXk6IG1lc3NhZ2VbaV0uUmVzcG9uc2VLZXlUb0VuZFVzZXIsCiAgICAgICAgICByZXNwb25zZV9rZXlfZWRpdGFibGU6IG1lc3NhZ2VbaV0uUmVzcG9uc2VLZXlFZGl0YWJsZSwKICAgICAgICAgIHJlc3BvbnNlX2tleV9tZXNzYWdlOiBtZXNzYWdlW2ldLlJlc3BvbnNlS2V5TWVzc2FnZVRvRW5kVXNlciwKICAgICAgICAgIHJlc3BvbnNlX2tleV91bnN1Y2Nlc3NmdWw6IG1lc3NhZ2VbaV0uVW5TdWNjZXNzZnVsTWVzc2FnZSwKICAgICAgICAgIHRhc2tfbmFtZTogbWVzc2FnZVtpXS5UYXNrcyAhPSB1bmRlZmluZWQgPyBtZXNzYWdlW2ldLlRhc2tOYW1lIDogIiIsCiAgICAgICAgICB0YXNrc19saXN0OiBtZXNzYWdlW2ldLlRhc2tzICE9IHVuZGVmaW5lZCA/IG1lc3NhZ2VbaV0uVGFza3MuVXR0ZXJhbmNlcyA6IFtdCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBqc29uX3JlcXVlc3RfY2xhc3M6IGZ1bmN0aW9uIGpzb25fcmVxdWVzdF9jbGFzcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBKU09OLnBhcnNlKHRoaXMuanNvbl9yZXF1ZXN0X2RhdGFbdGhpcy5pbmRleF0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICJpcy1pbnZhbGlkIjsKICAgICAgfQoKICAgICAgcmV0dXJuICJpcy12YWxpZCI7CiAgICB9LAogICAganNvbl9yZXNwb25zZV9jbGFzczogZnVuY3Rpb24ganNvbl9yZXNwb25zZV9jbGFzcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBKU09OLnBhcnNlKHRoaXMuanNvbl9yZXNwb25zZV9kYXRhW3RoaXMuaW5kZXhdKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiAiaXMtaW52YWxpZCI7CiAgICAgIH0KCiAgICAgIHJldHVybiAiaXMtdmFsaWQiOwogICAgfSwKICAgIHNob3dfYmxvY2s6IGZ1bmN0aW9uIHNob3dfYmxvY2sodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09ICJ1cCIpIHsKICAgICAgICB0aGlzLnNob3dfb3JfYmxvY2sgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAiZG93biIpIHsKICAgICAgICB0aGlzLnNob3dfb3JfYmxvY2sgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZG90X2NsYXNzOiBmdW5jdGlvbiBkb3RfY2xhc3Moc3RlcCkgewogICAgICBpZiAoc3RlcCA9PSB0aGlzLmN1cnJlbnRfc3RlcCB8fCBzdGVwID09IHRoaXMudG90YWxfc3RlcHMgJiYgdGhpcy5jdXJyZW50X3N0ZXAgPT0gMyAmJiB0aGlzLnJlcXVlc3RfanNvbl9lZGl0YWJsZSA9PSAiRmFsc2UiKSB7CiAgICAgICAgcmV0dXJuICJkb3Qgc3VjY2VzcyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJkb3QiOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},null]}