{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Settings/ModelsTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Settings/ModelsTab.vue","mtime":1663910265478},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsIH0gZnJvbSAiQC9wb3J0YWwvbWl4aW5zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNaXNjZWxsYW5lb3VzUGFnZSIsCiAgbWl4aW5zOiBbZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYmlnX3NwaW5uZXI6IGZhbHNlLAogICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgdHJhaW5lZF9kaWFsb2d1ZV9tb2RlbHM6IFtdLAogICAgICB0cmFpbmVkX2ludGVudF9tb2RlbHM6IFtdLAogICAgICBjdXJyZW50X2xpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIHRyYWluZWRfbmVyX21vZGVsczogW10sCiAgICAgIGRpc2FibGVfYnRuX2V4cGlyZWQ6IGZhbHNlLAogICAgICByZXRhaWxfd2ViX2ZyYW1ld29yazogdGhpcy4kc2Vzc2lvbi5nZXQoInJldGFpbF93ZWJfZnJhbWV3b3JrIikKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmdldF90cmFpbmVkX2RpYWxvZ3VlX21vZGVscygpOwogICAgdGhpcy5nZXRfdHJhaW5lZF9pbnRlbnRfbW9kZWxzKCk7CiAgICB0aGlzLmdldF90cmFpbmVkX25lcl9tb2RlbHMoKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICB9LCAxMDAwKTsKICAgIHRoaXMuJHJvb3QuJG9uKCJNaXNjZWxsYW5lb3VzUGFnZURpc2FibGVkIiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKGRhdGEgPT09IHRydWUpIHsKICAgICAgICBfdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0cmltX21vZGVsX25hbWU6IGZ1bmN0aW9uIHRyaW1fbW9kZWxfbmFtZSh2YWwxKSB7CiAgICAgIGlmICh2YWwxLmxlbmd0aCA+IDYpIHsKICAgICAgICB2YXIgc3RyMSA9IHZhbDEuc3Vic3RyaW5nKDAsIDMpICsgIi4uLiI7CiAgICAgICAgcmV0dXJuIHN0cjE7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWwxOwogICAgfSwKICAgIGdldF90cmFpbmVkX2ludGVudF9tb2RlbHM6IGZ1bmN0aW9uIGdldF90cmFpbmVkX2ludGVudF9tb2RlbHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnRyYWluX2ludGVudF9tb2RlbCgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBpc0dldE1vZGVsczogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICBfdGhpczIuYmlnX3NwaW5uZXIgPSBmYWxzZTsKCiAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gX3RoaXMyLmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRV9NT0RFTFMuTVNHX0NPREUpIHsKICAgICAgICAgIF90aGlzMi50cmFpbmVkX2ludGVudF9tb2RlbHMgPSBkYXRhLmRhdGEubW9kZWxzLm1hcChmdW5jdGlvbiAobW9kZWwpIHsKICAgICAgICAgICAgbW9kZWwuY3JlYXRlZF9hdCA9IG1vbWVudChtb2RlbC5jcmVhdGVkX2F0LCAiWVlZWU1NRERISG1tc3MiKS5mb3JtYXQoIkRvIE1NTSBZWSIpOwogICAgICAgICAgICByZXR1cm4gbW9kZWw7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwoKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICBfdGhpczIuYmlnX3NwaW5uZXIgPSBmYWxzZTsKCiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRfdHJhaW5lZF9kaWFsb2d1ZV9tb2RlbHM6IGZ1bmN0aW9uIGdldF90cmFpbmVkX2RpYWxvZ3VlX21vZGVscygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXNlX21vZGVsKCksIHsKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIGlzU2hvdzogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhOwogICAgICAgIF90aGlzMy5iaWdfc3Bpbm5lciA9IGZhbHNlOwoKICAgICAgICBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09PSBfdGhpczMuYXBpX3N0YXR1c19jb2RlLlNVQ0NFU1NGVUxfREJfUVVFUllfQ09SRS5NU0dfQ09ERSkgewogICAgICAgICAgX3RoaXMzLnRyYWluZWRfZGlhbG9ndWVfbW9kZWxzID0gZGF0YS5kYXRhLm1vZGVscy5tYXAoZnVuY3Rpb24gKG1vZGVsKSB7CiAgICAgICAgICAgIG1vZGVsLmNyZWF0ZWRfYXQgPSBtb21lbnQudW5peChtb2RlbC5jcmVhdGVkX2F0KS5mb3JtYXQoIkRvIE1NTSBZWSIpOwogICAgICAgICAgICByZXR1cm4gbW9kZWw7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gX3RoaXMzLmFwaV9zdGF0dXNfY29kZS5FTVBUWV9EQVRBX01PREVMUy5NU0dfQ09ERSkge30gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IGRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgX3RoaXMzLmJpZ19zcGlubmVyID0gZmFsc2U7CgogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXMzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0X3RyYWluZWRfbmVyX21vZGVsczogZnVuY3Rpb24gZ2V0X3RyYWluZWRfbmVyX21vZGVscygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmJpZ19zcGlubmVyID0gdHJ1ZTsKICAgICAgYXhpb3MuZ2V0KGFwaV9jYWxscy5yZXZlcnRfbmVyX21vZGVscygpLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICByZXZlcnRfY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICByZXZlcnRfY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgaXNTaG93OiB0cnVlCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgICAgIF90aGlzNC5iaWdfc3Bpbm5lciA9IGZhbHNlOwoKICAgICAgICBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09PSBfdGhpczQuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFX01PREVMUy5NU0dfQ09ERSkgewogICAgICAgICAgX3RoaXM0LnRyYWluZWRfbmVyX21vZGVscyA9IGRhdGEuZGF0YS5tb2RlbF9kYXRhLm1hcChmdW5jdGlvbiAobW9kZWwpIHsKICAgICAgICAgICAgbW9kZWwuY3JlYXRlZF9hdCA9IG1vbWVudChtb2RlbC5jcmVhdGVkX2F0LCAiWVlZWU1NRERISG1tc3MiKS5mb3JtYXQoIkRvIE1NTSBZWSIpOwogICAgICAgICAgICByZXR1cm4gbW9kZWw7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gX3RoaXM0LmFwaV9zdGF0dXNfY29kZS5FTVBUWV9EQVRBX01PREVMUy5NU0dfQ09ERSkge30gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IGRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgX3RoaXM0LmJpZ19zcGlubmVyID0gZmFsc2U7CgogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXM0LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0X3RyYWluZWRfaW50ZW50X21vZGVsOiBmdW5jdGlvbiBzZWxlY3RfdHJhaW5lZF9pbnRlbnRfbW9kZWwoaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIHZhciBjYWxsX2FwaSA9IHRydWU7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFpbmVkX2ludGVudF9tb2RlbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLnRyYWluZWRfaW50ZW50X21vZGVsc1tpbmRleF0uYWN0aXZlKSB7CiAgICAgICAgICAgIGNhbGxfYXBpID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGNhbGxfYXBpKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3RyYWluZWRfaW50ZW50X3N3YWxfYWxlcnRfbXNnJyksCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbmVkX2ludGVudF9zd2FsX3NldF9tc2cnKSArIHRoaXMudGx0KCd0cmFpbmVkX2ludGVudF9zd2FsX2NvbXBhbnluYW1lX21zZycpICsgIiBWIiArICh0aGlzLnRsdCgndHJhaW5lZF9pbnRlbnRfbW9kZWxfc3dhbF9tc2cnKS5sZW5ndGggLSBpbmRleCkgKyB0aGlzLnRsdCgndHJhaW5lZF9pbnRlbnRfY3VycmVudF9tb2RlbF9tc2cnKSwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgndHJhaW5lZF9pbnRlbnRfc3dhbF9jb25maXJtX21zZycpLAogICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICBfdGhpczUuZGlzYWJsZV9zaWRlYmFyID0gdHJ1ZTsKCiAgICAgICAgICAgICAgX3RoaXM1LiRyb290LiRlbWl0KCJEYXNoYm9hcmRTaWRlYmFyRGlzYWJsZSIsIHRydWUpOwoKICAgICAgICAgICAgICBfdGhpczUuJHNlc3Npb24uc2V0KCJTZXR0aW5nVG9wbmF2YmFyRGlzYWJsZSIsIHRydWUpOwoKICAgICAgICAgICAgICBfdGhpczUuYmlnX3NwaW5uZXIgPSB0cnVlOyAvLyBTd2FsLmZpcmUoewogICAgICAgICAgICAgIC8vICAgdGV4dDogIlBsZWFzZSB3YWl0IHdoaWxlIHdlIHN1Ym1pdCB5b3VyIHJlcXVlc3QiLAogICAgICAgICAgICAgIC8vICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgLy8gICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgICAgLy8gICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAvLyAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAvLyB9KTsKCiAgICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudHJhaW5faW50ZW50X21vZGVsKCksIHsKICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM1LmNvbXBhbnluYW1lLAogICAgICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXM1LmNvbXBhbnlpZCwKICAgICAgICAgICAgICAgIGVtYWlsOiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICBGaWxlTmFtZTogX3RoaXM1LnRyYWluZWRfaW50ZW50X21vZGVsc1tpbmRleF0uRmlsZU5hbWUsCiAgICAgICAgICAgICAgICBpc0NoYW5nZU1vZGVsVmVyc2lvbjogdHJ1ZQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChfdGhpczUuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczUuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNS5kaXNhYmxlX3NpZGViYXIgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczUuJHJvb3QuJGVtaXQoIkRhc2hib2FyZFNpZGViYXJEaXNhYmxlIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIF90aGlzNS4kc2Vzc2lvbi5zZXQoIlNldHRpbmdUb3BuYXZiYXJEaXNhYmxlIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT09IF90aGlzNS5hcGlfc3RhdHVzX2NvZGUuTU9ERUxfVVBEQVRFRF9NT0RFTFMuTVNHX0NPREUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmdldF90cmFpbmVkX2ludGVudF9tb2RlbHMoKTsKCiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90aGlzNS50bHQoJ3RyYWluZWRfaW50ZW50X21vZGVsX3VwZGF0ZWRfbXNnJyksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICBfdGhpczUuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNS5kaXNhYmxlX3NpZGViYXIgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczUuJHJvb3QuJGVtaXQoIkRhc2hib2FyZFNpZGViYXJEaXNhYmxlIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIF90aGlzNS4kc2Vzc2lvbi5zZXQoIlNldHRpbmdUb3BuYXZiYXJEaXNhYmxlIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCh0cnVlKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdF90cmFpbmVkX2RpYWxvZ3VlX21vZGVsOiBmdW5jdGlvbiBzZWxlY3RfdHJhaW5lZF9kaWFsb2d1ZV9tb2RlbChpbmRleCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkKSB7CiAgICAgICAgdmFyIGNhbGxfYXBpID0gdHJ1ZTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWluZWRfZGlhbG9ndWVfbW9kZWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy50cmFpbmVkX2RpYWxvZ3VlX21vZGVsc1tpbmRleF0uYWN0aXZlKSB7CiAgICAgICAgICAgIGNhbGxfYXBpID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGNhbGxfYXBpKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3RyYWluZWRfZGlhbG9nX3N3YWxfYWxlcnRfbXNnJyksCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbmVkX2RpYWxvZ19zd2FsX3NldF9tc2cnKSArIHRoaXMudGx0KCd0cmFpbmVkX2RpYWxvZ19zd2FsX2NvbXBhbnluYW1lX21zZycpICsgIiBWIiArICh0aGlzLnRsdCgndHJhaW5lZF9kaWFsb2dfbW9kZWxfc3dhbF9tc2cnKS5sZW5ndGggLSBpbmRleCkgKyB0aGlzLnRsdCgndHJhaW5lZF9kaWFsb2dfY3VycmVudF9tb2RlbF9tc2cnKSwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgndHJhaW5lZF9kaWFsb2dfc3dhbF9jb25maXJtX21zZycpLAogICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICBfdGhpczYuJHJvb3QuJGVtaXQoIkRhc2hib2FyZFNpZGViYXJEaXNhYmxlIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIF90aGlzNi4kc2Vzc2lvbi5zZXQoIlNldHRpbmdUb3BuYXZiYXJEaXNhYmxlIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIF90aGlzNi5kaXNhYmxlX3NpZGViYXIgPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzNi5iaWdfc3Bpbm5lciA9IHRydWU7IC8vIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgLy8gICB0ZXh0OiAiUGxlYXNlIHdhaXQgd2hpbGUgd2Ugc3VibWl0IHlvdXIgcmVxdWVzdCIsCiAgICAgICAgICAgICAgLy8gICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICAvLyAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICAvLyAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIC8vICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5yZXZlcnRfbW9kZWxzKCksIHsKICAgICAgICAgICAgICAgIGVtYWlsOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICAgIGNvbXBhbnlfZGV0YWlsczogewogICAgICAgICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG1vZGVsX2ZpbGU6IF90aGlzNi50cmFpbmVkX2RpYWxvZ3VlX21vZGVsc1tpbmRleF0uRmlsZU5hbWUKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM2LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM2LmJpZ19zcGlubmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpczYuZGlzYWJsZV9zaWRlYmFyID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXM2LiRyb290LiRlbWl0KCJEYXNoYm9hcmRTaWRlYmFyRGlzYWJsZSIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICBfdGhpczYuJHNlc3Npb24uc2V0KCJTZXR0aW5nVG9wbmF2YmFyRGlzYWJsZSIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09PSBfdGhpczYuYXBpX3N0YXR1c19jb2RlLlVQREFURURfQ09SRS5NU0dfQ09ERSkgewogICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdGhpczYudGx0KCd0cmFpbmVkX2RpYWxvZ19tb2RlbF91cGRhdGVkX21zZycpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM2LmdldF90cmFpbmVkX2RpYWxvZ3VlX21vZGVscygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5iaWdfc3Bpbm5lciA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM2LmRpc2FibGVfc2lkZWJhciA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIF90aGlzNi4kcm9vdC4kZW1pdCgiRGFzaGJvYXJkU2lkZWJhckRpc2FibGUiLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgX3RoaXM2LiRzZXNzaW9uLnNldCgiU2V0dGluZ1RvcG5hdmJhckRpc2FibGUiLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNi4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsKHRydWUpOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0X3RyYWluZWRfbmVyX21vZGVsOiBmdW5jdGlvbiBzZWxlY3RfdHJhaW5lZF9uZXJfbW9kZWwoaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIHZhciBjYWxsX2FwaSA9IHRydWU7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFpbmVkX25lcl9tb2RlbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLnRyYWluZWRfbmVyX21vZGVsc1tpbmRleF0uYWN0aXZlKSB7CiAgICAgICAgICAgIGNhbGxfYXBpID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGNhbGxfYXBpKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogdGhpcy50bHQoJ3RyYWluZWRfbmVyX3N3YWxfYWxlcnRfbXNnJyksCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbmVkX25lcl9zd2FsX3NldF9tc2cnKSArIHRoaXMudGx0KCd0cmFpbmVkX25lcl9zd2FsX2NvbXBhbnluYW1lX21zZycpICsgIiBWIiArICh0aGlzLnRsdCgndHJhaW5lZF9uZXJfbW9kZWxfc3dhbF9tc2cnKS5sZW5ndGggLSBpbmRleCkgKyB0aGlzLnRsdCgndHJhaW5lZF9uZXJfY3VycmVudF9tb2RlbF9tc2cnKSwKICAgICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgndHJhaW5lZF9uZXJfc3dhbF9jb25maXJtX21zZycpLAogICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICBfdGhpczcuJHJvb3QuJGVtaXQoIkRhc2hib2FyZFNpZGViYXJEaXNhYmxlIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIF90aGlzNy4kc2Vzc2lvbi5zZXQoIlNldHRpbmdUb3BuYXZiYXJEaXNhYmxlIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIF90aGlzNy5kaXNhYmxlX3NpZGViYXIgPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzNy5iaWdfc3Bpbm5lciA9IHRydWU7IC8vIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgLy8gICB0ZXh0OiAiUGxlYXNlIHdhaXQgd2hpbGUgd2Ugc3VibWl0IHlvdXIgcmVxdWVzdCIsCiAgICAgICAgICAgICAgLy8gICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICAvLyAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICAvLyAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIC8vICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5yZXZlcnRfbmVyX21vZGVscygpLCB7CiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNy5jb21wYW55bmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzNy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgY29tcGFueV9kZXRhaWxzOiB7CiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzNy5jb21wYW55aWQsCiAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM3LmNvbXBhbnluYW1lCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbW9kZWxfZmlsZTogX3RoaXM3LnRyYWluZWRfbmVyX21vZGVsc1tpbmRleF0uRmlsZU5hbWUKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM3LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM3LmRpc2FibGVfc2lkZWJhciA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIF90aGlzNy4kcm9vdC4kZW1pdCgiRGFzaGJvYXJkU2lkZWJhckRpc2FibGUiLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBfdGhpczcuJHNlc3Npb24uc2V0KCJTZXR0aW5nVG9wbmF2YmFyRGlzYWJsZSIsIHRydWUpOwoKICAgICAgICAgICAgICAgIF90aGlzNy5iaWdfc3Bpbm5lciA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT09IF90aGlzNy5hcGlfc3RhdHVzX2NvZGUuUkVWRVJUX1NVQ0NFU1NGVUxfTU9ERUxTLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90aGlzNy50bHQoJ3RyYWluZWRfbmVyX21vZGVsX3VwZGF0ZWRfbXNnJyksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0X3N1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAvLyBpZiAocmVzdWx0X3N1Y2Nlc3MudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczcuYmlnX3NwaW5uZXIgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczcuZ2V0X3RyYWluZWRfbmVyX21vZGVscygpOyAvLyB9CgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBfdGhpczcuYmlnX3NwaW5uZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNy5kaXNhYmxlX3NpZGViYXIgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczcuJHJvb3QuJGVtaXQoIkRhc2hib2FyZFNpZGViYXJEaXNhYmxlIiwgdHJ1ZSk7CgogICAgICAgICAgICAgICAgX3RoaXM3LiRzZXNzaW9uLnNldCgiU2V0dGluZ1RvcG5hdmJhckRpc2FibGUiLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM3LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93X3N1YnNjcmlwdGlvbl9leHBpcmVkX3N3YWwodHJ1ZSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}