{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js!/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Pages/Login.vue","mtime":1663910265474},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3ZpbWFsZXNoL0xlYXJuaW5nL2Rldm9wc191aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHNpZGViYXJpdGVtcyBmcm9tICIuLi9MYXlvdXQvU2lkZUJhckl0ZW0iOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBidXMgfSBmcm9tICJAL3BvcnRhbC9tYWluIjsKaW1wb3J0IENvb2tpZXMgZnJvbSAianMtY29va2llIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIGRhdGU6ICIiLAogICAgICAgIGxvZ2luX3NvdXJjZTogIlBPUlRBTCIsCiAgICAgICAgc3NvX3NvdXJjZTogbnVsbAogICAgICB9LAogICAgICBvcGVuX21vZGFsOiBmYWxzZSwKICAgICAgZm9yZ290X3Bhc3N3b3JkX2VtYWlsOiAiIiwKICAgICAgaXNfbGFuZ3VhZ2U6IHRoaXMuJHNlc3Npb24uZ2V0KCJQcmVmZXJyZWRMYW5ndWFnZSIpLAogICAgICByZWdfZW1haWw6IC9eKFswLTlhLXpBLVpdKFstLlx3XSpbMC05YS16QS1aXSkqQChbMC05YS16QS1aXVstXHddKlswLTlhLXpBLVpdXC4pK1thLXpBLVpdezIsOX0pJC8sCiAgICAgIHNob3dfdmFsaWRhdGlvbl9zdHJpbmc6IGZhbHNlLAogICAgICBsb2dpbl90eXBlOiAiUG9ydGFsIiwKICAgICAgaXNfc3VwZXJfYWRtaW46IGZhbHNlLAogICAgICBvcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQ6IGZhbHNlLAogICAgICBsb2dpbl9idXR0b25fc3Bpbm5lcjogZmFsc2UsCiAgICAgIGlzX3N1Ym1pdHRpbmc6IGZhbHNlLAogICAgICBhbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZzogbnVsbCwKICAgICAgaXNfdXNlcl9sb2NrZWQ6IGZhbHNlLAogICAgICB1c2VyX2xvY2tlZF9kYXRlX2FsbG93ZWQ6IG51bGwsCiAgICAgIG1haW5zcGlubmVyT246IGZhbHNlLAogICAgICBpc19mcmVlX3RyaWFsX2V4cGlyZTogZmFsc2UKICAgIH07CiAgfSwKICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgIGlmICh0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikgJiYgQm9vbGVhbih0aGlzLiRyb3V0ZS5xdWVyeS5pc19zaG9waWZ5X2JpbGxpbmdfcmVkaXJlY3QpKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiRGFzaGJvYXJkIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlzX3Nob3BpZnlfYmlsbGluZ19yZWRpcmVjdDogdHJ1ZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKSAmJiAhKEJvb2xlYW4odGhpcy4kcm91dGUucXVlcnkuZW1haWwpICYmIEJvb2xlYW4odGhpcy4kcm91dGUucXVlcnkudG9rZW4pKSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2JvdC9kYXNoYm9hcmQiKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgbF90eXBlID0gQ29va2llcy5nZXQoImxvZ2luX3R5cGUiKTsKCiAgICBpZiAobF90eXBlICE9PSB1bmRlZmluZWQgJiYgbF90eXBlICE9PSAidW5kZWZpbmVkIikgewogICAgICB0aGlzLmxvZ2luX3R5cGUgPSBDb29raWVzLmdldCgibG9naW5fdHlwZSIpOwogICAgfQoKICAgIGlmICh0aGlzLmxvZ2luX3R5cGUgPT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMubG9naW5fdHlwZSA9ICJQb3J0YWwiOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgZW1haWwgPSB0aGlzLiRyb3V0ZS5xdWVyeS5lbWFpbDsKICAgIHZhciB0b2tlbl9pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuOwoKICAgIGlmIChlbWFpbCAmJiB0b2tlbl9pZCkgewogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgibG9naW4iKTsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudmFsaWRhdGVfbG9naW4oKSwgewogICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICB0b2tlbjogdG9rZW5faWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiRW1haWwgYWxyZWFkeSB2ZXJpZmllZCIpIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OiBfdGhpcy50bHQoJ2xpbmtfZXhwaXJlZF9tc2cnLCAnY29kZScpCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkVtYWlsIHZlcmlmaWNhdGlvbiBzdWNjZXNzZnVsIikgewogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgdGV4dDogX3RoaXMudGx0KCdsb2dpbl9lbWFpbF92ZXJpZnlfc3VjY2VzcycsICdjb2RlJyksCiAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlVzZXIgRG9lc24ndCBFeGlzdCIpIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0ZXh0OiBfdGhpcy50bHQoJ2xvZ2luX3VzZXJfbm90X2V4aXN0JywgJ2NvZGUnKSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbWFpbF92YWxpZGF0ZTogZnVuY3Rpb24gZW1haWxfdmFsaWRhdGUoKSB7CiAgICAgIGlmICh0aGlzLnJlZ19lbWFpbC50ZXN0KHRoaXMuZm9yZ290X3Bhc3N3b3JkX2VtYWlsKSkgewogICAgICAgIHRoaXMuc2hvd192YWxpZGF0aW9uX3N0cmluZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd192YWxpZGF0aW9uX3N0cmluZyA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvLyAgdG9nZ2xlX2RvbWFpbihldmVudCkgewogICAgLy8gICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09ICJQb3J0YWwiKSB7CiAgICAvLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRvbWFpbl9pbnB1dCIpLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgIC8vICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gIkJvdCIpIHsKICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZG9tYWluX2lucHV0Iikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIC8vICAgfX0sCiAgICBjbGVhcl9maWVsZHM6IGZ1bmN0aW9uIGNsZWFyX2ZpZWxkcygpIHsKICAgICAgdGhpcy5mb3Jnb3RfcGFzc3dvcmQgPSAiIjsKICAgICAgJCgiI3VzZXJtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgIHRoaXMudXNlci5lbWFpbCA9ICIiOwogICAgICB0aGlzLnVzZXIucGFzc3dvcmQgPSAiIjsKICAgIH0sCiAgICBmb3Jnb3RfcGFzc3dvcmQ6IGZ1bmN0aW9uIGZvcmdvdF9wYXNzd29yZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgaWYgKHRoaXMuc2hvd192YWxpZGF0aW9uX3N0cmluZyA9PSBmYWxzZSAmJiB0aGlzLmZvcmdvdF9wYXNzd29yZF9lbWFpbCAhPSAiIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnbG9naW5fc3VibWl0X3lvdXJfZGV0YWlscycsICdjb2RlJyksCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgIH0pOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmZvcmdvdF9wYXNzd29yZCgpLCB7CiAgICAgICAgICBlbWFpbDogdGhpcy5mb3Jnb3RfcGFzc3dvcmRfZW1haWwKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5jbHVkZXMoImVtYWlsIGFkZHJlc3MiKSkgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczIudGx0KCdyZWdpc3RlcmVkX2VtYWlsX2NoZWNrJywgJ2NvZGUnKSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJBIG1haWwgaGFzIGJlZW4gc2VudCB0byB5b3VyIGVtYWlsIikgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczIudGx0KCdsb2dpbl9yZXNldF9wYXNzd29yZCcsICdjb2RlJyksCiAgICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIiN1c2VybW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogX3RoaXMyLnRsdCgnc29tZV9lcnJvcl9vY2N1cnJlZF9tc2cnLCAnY29kZScpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCIjdXNlcm1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHBhc3N3b3JkX3RvZ2dsZTogZnVuY3Rpb24gcGFzc3dvcmRfdG9nZ2xlKCkgewogICAgICB2YXIgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybV9wYXNzd29yZCIpOwoKICAgICAgaWYgKHBhc3N3b3JkLnR5cGUgPT0gInRleHQiKSB7CiAgICAgICAgcGFzc3dvcmQudHlwZSA9ICJwYXNzd29yZCI7CiAgICAgIH0gZWxzZSBpZiAocGFzc3dvcmQudHlwZSA9PSAicGFzc3dvcmQiKSB7CiAgICAgICAgcGFzc3dvcmQudHlwZSA9ICJ0ZXh0IjsKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgICB0aGlzLmlzX3N1Ym1pdHRpbmcgPSB0cnVlOwoKICAgICAgaWYgKHRoaXMudXNlci5uYW1lID09ICIiIHx8IHRoaXMudXNlci5wYXNzd29yZCA9PSAiIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdsb2dpbl9lbnRlcl9lbWFpbF9wd2RfbXNnJywgJ2NvZGUnKSwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc19zdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2dpbl9idXR0b25fc3Bpbm5lciA9IHRydWU7IC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGlubmVyIikuc3R5bGUub3BhY2l0eSA9ICIxIjsKCiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICB0aGlzLmNhbGxfYXBpKCk7CiAgICAgIH0KICAgIH0sCiAgICByZWRpcjogZnVuY3Rpb24gcmVkaXIoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vIGlmICghdGhpcy5pc19zdXBlcl9hZG1pbil7CiAgICAgIHZhciByZXNldF9maWVsZHMgPSB0cnVlOwogICAgICB0aGlzLmxvZ2luX2J1dHRvbl9zcGlubmVyID0gZmFsc2U7IC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGlubmVyIikuc3R5bGUub3BhY2l0eSA9ICIwIjsKCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIwLjUiOyAvLyB9IAoKICAgICAgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5FTUFJTF9OT1RfVkVSSUZJRURfMTAyMy5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgaHRtbDogdGhpcy50bHQoJ2xvZ2luX2FjY291bnRfdmFsaWRhdGVkJywgJ2NvZGUnKSArICc8YnI+JyArIHRoaXMudGx0KCdsb2dpbl9jaGVja19lbWFpbF9kZXRhaWxzJywgJ2NvZGUnKSwKICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlVTRVJfSEFTX0JFRU5fTE9DS0VELk1TR19DT0RFKSB7CiAgICAgICAgcmVzZXRfZmllbGRzID0gZmFsc2U7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnbG9naW5fYWNjb3VudF9nb3RfbG9ja2VkJywgJ2NvZGUnKSwKICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6IHRoaXMudGx0KCdsb2dpbl9pbnRlcm5hbF9zZXJ2ZXJfbXNnJywgJ2NvZGUnKQogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuVVNFUl9OT1RfQVBQUk9WRURfMTAxOS5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgaHRtbDogdGhpcy50bHQoJ3JlZ2lzdHJhdGlvbl9kZWNsaW5lZF9tc2cnLCAnY29kZScpLAogICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlVTRVJfQUxSRUFEWV9MT0dHRURfSU5fMTAyMS5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6IHRoaXMudGx0KCd1c2VyX2FscmVhZHlfbG9nZ2VkJywgJ2NvZGUnKSwKICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5JTlZBTElEX0NSRURFTlRJQUxTXzAwMDUuTVNHX0NPREUpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKCiAgICAgICAgaWYgKCFpc05hTihkYXRhLm1lc3NhZ2UuYWxsb3dlZF9hdHRlbXB0cykpIHsKICAgICAgICAgIHRoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmcgPSBkYXRhLm1lc3NhZ2UuYWxsb3dlZF9hdHRlbXB0czsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnbG9naW5faW52YWxpZF9jcmVkZW50aWFsczEnLCAnY29kZScpLAogICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgneW91X2hhdmVfbXNnJywgJ2NvZGUnKSArICIgIi5jb25jYXQodGhpcy5hbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZywgIiAiKSArIHRoaXMudGx0KCdhY2NvdW50X2dldF9sb2NrZWRfbXNnJywgJ2NvZGUnKSwKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgaHRtbDogdGhpcy50bHQoJ2xvZ2luX2ludmFsaWRfY3JlZGVudGlhbHMxJywgJ2NvZGUnKSwKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5BUElfUkFURV9MSU1JVF9FWENFRURFRC5NU0dfQ09ERSkgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6IHRoaXMudGx0KCdsb2dpbl9tb250aGx5X2FwaV9leGNlZWQnLCAnY29kZScpLAogICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IHRoaXMuYXBpX3N0YXR1c19jb2RlLlJFTkVXX1BBU1NXT1JELk1TR19DT0RFKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgaHRtbDogdGhpcy50bHQoJ2xvZ2luX3JlbmV3X3Bhc3N3b3JkJywgJ2NvZGUnKSwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKEJvb2xlYW4oZGF0YS5kYXRhLmlzX3N1cGVyX2FkbWluX2xvZ2luKSkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJTdXBlckFkbWluSW50ZXJtZWRpYXRlU2NyZWVuIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBkYXRhOiBkYXRhLmRhdGEuYWxsX3VzZXJzX2xpc3QKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJJbmZvcm1hdGlvbiIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJhdCIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicnQiLCBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLnJlZnJlc2hfdG9rZW4pOwogICAgICB9IGVsc2UgaWYgKHRoaXMubG9naW5fdHlwZSA9PSAiQm90IikgewogICAgICAgIENvb2tpZXMucmVtb3ZlKCJsb2dpbl90eXBlIik7CiAgICAgICAgQ29va2llcy5zZXQoImxvZ2luX3R5cGUiLCB0aGlzLmxvZ2luX3R5cGUsIHsKICAgICAgICAgIGV4cGlyZXM6IDM2NQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc3RhcnQoKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckluZm9ybWF0aW9uIiwgZGF0YS5kYXRhLnVzZXJpbmZvcm1hdGlvbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoImF0IiwgZGF0YS5kYXRhLnVzZXJpbmZvcm1hdGlvbi5hY2Nlc3NfdG9rZW4pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJydCIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24ucmVmcmVzaF90b2tlbik7CiAgICAgICAgdGhpcy5jaGVja190ZW1wbGF0ZV9zdWJzY3JpcHRpb24oJ3B1c2hfZGlyZWN0X3Jlc3BvbnNlX2JvdCcpOyAvLyB0aGlzLiRyb3V0ZXIucHVzaCgiL2JvdC9kaXJlY3RyZXNwb25zZWJvdCIpOwogICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5VU0VSX0lTX0xPQ0tFRC5NU0dfQ09ERSkgewogICAgICAgIHJlc2V0X2ZpZWxkcyA9IGZhbHNlOwoKICAgICAgICBpZiAoZGF0YS5kYXRhLmxvY2tlZF9hdCAhPSBudWxsICYmIGRhdGEuZGF0YS5sb2NrZWRfYXQgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLmlzX3VzZXJfbG9ja2VkID0gdHJ1ZTsgLy8gdGhpcy51c2VyX2xvY2tlZF9kYXRlX2FsbG93ZWQgPSBtb21lbnQobW9tZW50KG5ldyBEYXRlKG1lc3NhZ2UubG9ja2VkX2F0KSkuYWRkKDEsICdkJykpLmZvcm1hdCgiTU1NIERvLCBoOm1tIGEiKTsKCiAgICAgICAgICB0aGlzLnVzZXJfbG9ja2VkX2RhdGVfYWxsb3dlZCA9IG1vbWVudChtb21lbnQobmV3IERhdGUoZGF0YS5kYXRhLmxvY2tlZF9hdCkpLmFkZCgxLCAnZCcpKS5jYWxlbmRhcigpOwogICAgICAgIH0KCiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdsb2dpbl9hY2NvdW50X2xvY2tlZCcsICdjb2RlJyksCiAgICAgICAgICBodG1sOiB0aGlzLnRsdCgndXNlcl9hY2NvdW50X2xvY2tlZF9tc2cnLCAnY29kZScpICsgIiAiLmNvbmNhdCh0aGlzLnVzZXJfbG9ja2VkX2RhdGVfYWxsb3dlZCwgIi4gPGEgaHJlZj1cIm1haWx0bzpzdXBwb3J0QGNlbnNlLmFpP3N1YmplY3Q9SGVscCUyMFJlcXVpcmVkJTIwLSUyMENlbnNlJTIwUG9ydGFsJTIwQWNjb3VudCUyMExvY2tlZFwiIGNsYXNzPVwiY3RjdC11c1wiPiIpICsgdGhpcy50bHQoJ2NvbnRhY3RfdXNfbGluaycpICsgIjwvYT4gIiArIHRoaXMudGx0KCdhbGVydF9tc2cxJywgJ2NvZGUnKQogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChkYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gdGhpcy5hcGlfc3RhdHVzX2NvZGUuUkVHSVNURVJfQU5EX0xPR0lOX1NPVVJDRV9ET05UX01BVENILk1TR19DT0RFKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdsb2dpbl9zb3VyY2VfZGlmZmVyZW50X21zZycsICdjb2RlJyksCiAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnYWNjb3VudF9yZWdpc3RlcmVkX21zZycsICdjb2RlJykgKyAiICIuY29uY2F0KGRhdGEubWVzc2FnZS5yZWdpc3Rlcl9zb3VyY2UsICIuICIpICsgdGhpcy50bHQoJ2FsZXJ0X21zZzInLCAnY29kZScpCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSB0aGlzLmFwaV9zdGF0dXNfY29kZS5TU09fU0VSVkVSX0VSUk9SLk1TR19DT0RFKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdsb2dpbl9lcnJvcl93aXRoX3NzbycsICdjb2RlJyksCiAgICAgICAgICBodG1sOiB0aGlzLnRsdCgnc29tZV9lcnJvcl9wbGVhc2VfdHJ5X2FnYWluJywgJ2NvZGUnKQogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBDb29raWVzLnJlbW92ZSgibG9naW5fdHlwZSIpOwogICAgICAgIENvb2tpZXMuc2V0KCJsb2dpbl90eXBlIiwgdGhpcy5sb2dpbl90eXBlLCB7CiAgICAgICAgICBleHBpcmVzOiAzNjUKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJJbmZvcm1hdGlvbiIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24pOwoKICAgICAgICBpZiAoZGF0YS5kYXRhLnVzZXJpbmZvcm1hdGlvbi5zdWJzY3JpcHRpb24gPT0gJ0ZyZWUnICYmIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uc3Vic2NyaXB0aW9uX3N0YXR1cyAhPSAnZnJlZXRyaWFsJykgewogICAgICAgICAgdGhpcy5pc19mcmVlX3RyaWFsX2V4cGlyZSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnd2hhdHNhcHBfc3Vic2NyaXB0aW9uJywgZGF0YS5kYXRhLnVzZXJpbmZvcm1hdGlvbi53aGF0c2FwcF9zdWJzY3JpcHRpb24pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJyZXRhaWxfd2ViX2ZyYW1ld29yayIsIGRhdGEuZGF0YS5yZXRhaWxfd2ViX2ZyYW1ld29yayk7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYm90X3Jlc3BvbnNlX3Rva2VuKCksIHsKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB1c2VybmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChfdGhpczMuYXBpX3N0YXR1c19jb2RlLlNUQVRVU19TVUNDRVNTX0NPUkUuTVNHX0NPREUgPT09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICBfdGhpczMuJHNlc3Npb24uc2V0KCJCb3RUb2tlbiIsIHJlc3BvbnNlLmRhdGEuZGF0YSk7CgogICAgICAgICAgICBfdGhpczMuJHNlc3Npb24ucmVtb3ZlKCJUZW1wb3JhcnlCb3RUb2tlbiIpOwoKICAgICAgICAgICAgYnVzLiRlbWl0KCJUb2tlbiBjaGFuZ2VkIiwgIlRydWUiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckZpcnN0TmFtZSIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uZmlyc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJMYXN0TmFtZSIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24ubGFzdF9uYW1lKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicnQiLCBkYXRhLmRhdGEudXNlcmluZm9ybWF0aW9uLnJlZnJlc2hfdG9rZW4pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJhdCIsIGRhdGEuZGF0YS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiUmVzdHJpY3Rpb25MaXN0IiwgZGF0YS5kYXRhLnJlc3RyaWN0aW9uX2xpc3QpOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJjb21wYW55X2lkPSIgKyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiY29tcGFueV9uYW1lPSIgKyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJjb21wYW55X2VtYWlsPSIgKyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWw7CiAgICAgICAgdGhpcy5sb2dpbl9idXR0b25fc3Bpbm5lciA9IHRydWU7IC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGlubmVyIikuc3R5bGUub3BhY2l0eSA9ICIxIjsKCiAgICAgICAgdGhpcy5jaGVja190ZW1wbGF0ZV9zdWJzY3JpcHRpb24obnVsbCwgZGF0YS5kYXRhLm1lbnViaW5kKTsgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgLy8gdGhpcy51cGRhdGVfbWVudV9saXN0KG1lc3NhZ2UubWVudWJpbmQpOwogICAgICAgIC8vIH0sIDEwMCk7CiAgICAgIH0KCiAgICAgIGlmIChyZXNldF9maWVsZHMpIHsKICAgICAgICB0aGlzLnVzZXIuZW1haWwgPSAiIjsKICAgICAgfQoKICAgICAgdGhpcy51c2VyLnBhc3N3b3JkID0gIiI7CiAgICAgIHRoaXMudXNlci5sb2dpbl9zb3VyY2UgPSAiUE9SVEFMIjsKICAgICAgdGhpcy51c2VyLnNzb19zb3VyY2UgPSBudWxsOwogICAgfSwKICAgIGNoZWNrX3RlbXBsYXRlX3N1YnNjcmlwdGlvbjogZnVuY3Rpb24gY2hlY2tfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKHBhcmFtLCBtZW51KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KGFwaV9jYWxscy5vcGVuX2JvdF90ZW1wbGF0ZV9zdWJzY3JpcHRpb25fYXBpKCksIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkCiAgICAgICAgfSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIF90aGlzNC5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQgPSB0cnVlOwoKICAgICAgICBpZiAocGFyYW0gPT09IG51bGwpIHsKICAgICAgICAgIF90aGlzNC51cGRhdGVfbWVudV9saXN0KG1lbnUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PT0gX3RoaXM0LmFwaV9zdGF0dXNfY29kZS5TVUNDRVNTRlVMX0RCX1FVRVJZX01PREVMUy5NU0dfQ09ERSkgewogICAgICAgICAgX3RoaXM0LiRzZXNzaW9uLnNldCgiQm90VGVtcGxhdGVzIiwgZGF0YS5kYXRhLnRlbXBsYXRlcyk7CgogICAgICAgICAgaWYgKHBhcmFtID09PSAncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90JykgewogICAgICAgICAgICBfdGhpczQuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAiRGlyZWN0IFJlc3BvbnNlIEJvdCIsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocGFyYW0gPT09ICdwdXNoX2RpcmVjdF9yZXNwb25zZV9ib3QnKSB7CiAgICAgICAgICAgIF90aGlzNC4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICJEaXJlY3QgUmVzcG9uc2UgQm90IiwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHJlbG9hZDogdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQgPSB0cnVlOwoKICAgICAgICBpZiAocGFyYW0gPT09IG51bGwpIHsKICAgICAgICAgIF90aGlzNC51cGRhdGVfbWVudV9saXN0KG1lbnUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBhcmFtID09PSAncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90JykgewogICAgICAgICAgX3RoaXM0LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJEaXJlY3QgUmVzcG9uc2UgQm90IiwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgcmVsb2FkOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNhbGxfYXBpOiBmdW5jdGlvbiBjYWxsX2FwaSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLnVzZXIuZGF0ZSA9IG1vbWVudCgpLnRvSVNPU3RyaW5nKCk7CiAgICAgIHRoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmcgPSAwOwogICAgICB0aGlzLmlzX3VzZXJfbG9ja2VkID0gZmFsc2U7CiAgICAgIHRoaXMudXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkID0gbnVsbDsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMubG9naW4oKSwgdGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNS5yZWRpcihyZXNwb25zZS5kYXRhKTsKCiAgICAgICAgX3RoaXM1Lm1haW5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICBfdGhpczUubG9naW5fYnV0dG9uX3NwaW5uZXIgPSBmYWxzZTsgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwaW5uZXIiKS5zdHlsZS5vcGFjaXR5ID0gIjAiOwoKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7IC8vICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwoKICAgICAgICBzd2FsKHsKICAgICAgICAgIGh0bWw6IF90aGlzNS50bHQoJ3NvbWVfZXJyb3Jfb2NjdXJyZWRfbXNnJywgJ2NvZGUnKSArICc8YnI+JyArIF90aGlzNS50bHQoJ3BsZWFzZV90cnlfYWdhaW5fbXNnJywgJ2NvZGUnKSwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgIH0pOyAvLyB0b2FzdHIuZXJyb3IoIlRoZXJlIGlzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4iKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlX21lbnVfbGlzdDogZnVuY3Rpb24gdXBkYXRlX21lbnVfbGlzdChtZXNzYWdlKSB7CiAgICAgIHZhciBtZW51ID0ge307CiAgICAgIHZhciBtYWluX21lbnVfbGlzdCA9IG1lc3NhZ2UuZmlsdGVyKGZ1bmN0aW9uIChhcnIpIHsKICAgICAgICByZXR1cm4gYXJyLklzTWFzdGVyTWVudSA9PSB0cnVlICYmIGFyci5FbmFibGVkID09IHRydWU7CiAgICAgIH0pOwogICAgICB2YXIgbWFpbl9tZW51X2xpc3RfZmlsdGVyZWQgPSBbXTsKICAgICAgdmFyIHN1Yl9tZW51X2xpc3QgPSBtZXNzYWdlLmZpbHRlcihmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgcmV0dXJuIGFyci5IYXNTdWJNZW51cyA9PSBmYWxzZSAmJiBhcnIuRW5hYmxlZCA9PSB0cnVlICYmIGFyci5Jc1N1Yk1lbnUgPT0gdHJ1ZTsKICAgICAgfSk7CgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpLCBuKSB7CiAgICAgICAgdmFyIG1lbnVGaWx0ZXIgPSBzaWRlYmFyaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChzaWRlYmFyKSB7CiAgICAgICAgICByZXR1cm4gc2lkZWJhci5uYW1lID09PSBtYWluX21lbnVfbGlzdFtpXS5NZW51SXRlbSAmJiBCb29sZWFuKHNpZGViYXIuc3ZnX2h0bWwpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAobWVudUZpbHRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICBtYWluX21lbnVfbGlzdF9maWx0ZXJlZC5wdXNoKG1lbnVGaWx0ZXJbMF0pOwogICAgICAgICAgbWVudVttZW51RmlsdGVyWzBdLm5hbWVdID0gewogICAgICAgICAgICBtYWluX21lbnU6IG1lbnVGaWx0ZXJbMF0sCiAgICAgICAgICAgIHN1Yl9tZW51X2xpc3Q6IFtdCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gbWFpbl9tZW51X2xpc3QubGVuZ3RoOyBpIDwgbjsgaSArPSAxKSB7CiAgICAgICAgX2xvb3AoaSwgbik7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfbiA9IHN1Yl9tZW51X2xpc3QubGVuZ3RoOyBfaSA8IF9uOyBfaSArPSAxKSB7CiAgICAgICAgICBmb3IgKHZhciBqIGluIHNpZGViYXJpdGVtcykgewogICAgICAgICAgICBpZiAoc2lkZWJhcml0ZW1zW2pdLm5hbWUgPT09IHN1Yl9tZW51X2xpc3RbX2ldLk1lbnVJdGVtICYmIEJvb2xlYW4oc2lkZWJhcml0ZW1zW2pdLnBhZ2VfcGF0aCAmJiBzaWRlYmFyaXRlbXNbal0ubWFzdGVyX21lbnUgPT09IHN1Yl9tZW51X2xpc3RbX2ldLk1hc3Rlck1lbnUpKSB7CiAgICAgICAgICAgICAgbWVudVtzdWJfbWVudV9saXN0W19pXS5NYXN0ZXJNZW51XS5zdWJfbWVudV9saXN0LnB1c2goc2lkZWJhcml0ZW1zW2pdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOyAvLyBkZWJ1Z2dlcjsKICAgICAgfQoKICAgICAgbWVudSA9IE9iamVjdC52YWx1ZXMobWVudSk7IC8vIGZvciAobGV0IGkgPSAwLCBuID0gbWVzc2FnZS5sZW5ndGg7IGkgPCBuOyBpICs9IDEpIHsKICAgICAgLy8gICBpZiAobWVzc2FnZVtpXS5FbmFibGVkICYmIG1lc3NhZ2VbaV0uSXNNYXN0ZXJNZW51KSB7CiAgICAgIC8vICAgICBsZXQgbWVudUZpbHRlciA9IHNpZGViYXJpdGVtcy5maWx0ZXIoKHNpZGViYXIpID0+IHsKICAgICAgLy8gICAgICAgcmV0dXJuICgKICAgICAgLy8gICAgICAgICBzaWRlYmFyLm5hbWUgPT09IG1lc3NhZ2VbaV0uTWVudUl0ZW0gJiYgQm9vbGVhbihzaWRlYmFyLnN2Z19odG1sKQogICAgICAvLyAgICAgICApOwogICAgICAvLyAgICAgfSk7CiAgICAgIC8vICAgICBpZiAobWVudUZpbHRlci5sZW5ndGggPiAwKSB7CiAgICAgIC8vICAgICAgIG1haW5fbWVudSA9IG1lbnVGaWx0ZXJbMF07CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSBlbHNlIGlmICgKICAgICAgLy8gICAgIG1lc3NhZ2VbaV0uSGFzU3ViTWVudXMgPT0gZmFsc2UgJiYKICAgICAgLy8gICAgIG1lc3NhZ2VbaV0uRW5hYmxlZCAmJgogICAgICAvLyAgICAgbWVzc2FnZVtpXS5Jc1N1Yk1lbnUgJiYKICAgICAgLy8gICAgIE9iamVjdC5rZXlzKG1haW5fbWVudSkubGVuZ3RoID4gMAogICAgICAvLyAgICkgewogICAgICAvLyAgICAgZm9yICh2YXIgaiBpbiBzaWRlYmFyaXRlbXMpIHsKICAgICAgLy8gICAgICAgaWYgKAogICAgICAvLyAgICAgICAgIHNpZGViYXJpdGVtc1tqXS5uYW1lID09PSBtZXNzYWdlW2ldLk1lbnVJdGVtICYmCiAgICAgIC8vICAgICAgICAgQm9vbGVhbihzaWRlYmFyaXRlbXNbal0ucGFnZV9wYXRoKQogICAgICAvLyAgICAgICApIHsKICAgICAgLy8gICAgICAgICBzdWJtZW51cy5wdXNoKHNpZGViYXJpdGVtc1tqXSk7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9CiAgICAgIC8vICAgaWYgKAogICAgICAvLyAgICAgaSA9PSBuIC0gMSB8fAogICAgICAvLyAgICAgKG1lc3NhZ2VbaV0uSXNNYXN0ZXJNZW51ID09IHRydWUgJiYKICAgICAgLy8gICAgICAgbWVzc2FnZVtpXS5IYXNTdWJNZW51cyA9PT0gZmFsc2UgJiYKICAgICAgLy8gICAgICAgIUJvb2xlYW4obWVzc2FnZVtpXS5Jc1N1Yk1lbnUpICYmCiAgICAgIC8vICAgICAgIG1lc3NhZ2VbaV0uRW5hYmxlZCkKICAgICAgLy8gICApIHsKICAgICAgLy8gICAgIG1lbnUucHVzaCh7CiAgICAgIC8vICAgICAgIG1haW5fbWVudTogbWFpbl9tZW51LAogICAgICAvLyAgICAgICBzdWJfbWVudV9saXN0OiBzdWJtZW51cywKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgICAgbWFpbl9tZW51ID0gW107CiAgICAgIC8vICAgICBzdWJtZW51cyA9IFtdOwogICAgICAvLyAgIH0gZWxzZSBpZiAoCiAgICAgIC8vICAgICBpIDwgbiAtIDEgJiYKICAgICAgLy8gICAgIG1lc3NhZ2VbaSArIDFdLklzTWFzdGVyTWVudSAmJgogICAgICAvLyAgICAgKCFCb29sZWFuKG1lc3NhZ2VbaSArIDFdLklzU3ViTWVudSkgfHwKICAgICAgLy8gICAgICAgbWVzc2FnZVtpICsgMV0uSGFzU3ViTWVudXMgPT0gdHJ1ZSkgJiYKICAgICAgLy8gICAgIE9iamVjdC5rZXlzKG1haW5fbWVudSkubGVuZ3RoID4gMAogICAgICAvLyAgICkgewogICAgICAvLyAgICAgbWVudS5wdXNoKHsKICAgICAgLy8gICAgICAgbWFpbl9tZW51OiBtYWluX21lbnUsCiAgICAgIC8vICAgICAgIHN1Yl9tZW51X2xpc3Q6IHN1Ym1lbnVzLAogICAgICAvLyAgICAgfSk7CiAgICAgIC8vICAgICBtYWluX21lbnUgPSBbXTsKICAgICAgLy8gICAgIHN1Ym1lbnVzID0gW107CiAgICAgIC8vICAgfQogICAgICAvLyB9CgogICAgICB0aGlzLiRzZXNzaW9uLnNldCgiQ2hhdGJvdE1lbnUiLCBtZW51KTsgLy8gd2hpbGUgKCF0aGlzLm9wZW5fYm90X2FwaV9yZXNwb25zZV9yZWNlaXZlZCl7CiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCIvYm90L2Rhc2hib2FyZCIpOwoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJEYXNoYm9hcmQiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaXNfZnJlZV90cmlhbDogdGhpcy5pc19mcmVlX3RyaWFsX2V4cGlyZQogICAgICAgIH0KICAgICAgfSk7IC8vIH0KICAgIH0sCiAgICBsb2dpbldpdGhHb29nbGU6IGZ1bmN0aW9uIGxvZ2luV2l0aEdvb2dsZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBnb29nbGVVc2VyLCBnb29nbGVfa2V5cywgcHJvZmlsZSwga2V5cywgc3NvX3Rva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LiRnQXV0aC5zaWduSW4oKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgZ29vZ2xlVXNlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBnb29nbGVfa2V5cyA9IE9iamVjdC5rZXlzKGdvb2dsZVVzZXIpOwogICAgICAgICAgICAgICAgcHJvZmlsZSA9IGdvb2dsZVVzZXIuZ2V0QmFzaWNQcm9maWxlKCk7CiAgICAgICAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMocHJvZmlsZSk7IC8vIGNvbnNvbGUubG9nKGdvb2dsZVVzZXIpOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvZmlsZSk7CgogICAgICAgICAgICAgICAgc3NvX3Rva2VuID0gZ29vZ2xlVXNlcltnb29nbGVfa2V5c1sxXV0uaWRfdG9rZW4gIT09IHVuZGVmaW5lZCA/IGdvb2dsZVVzZXJbZ29vZ2xlX2tleXNbMV1dLmlkX3Rva2VuIDogZ29vZ2xlVXNlcltnb29nbGVfa2V5c1syXV0uaWRfdG9rZW47CiAgICAgICAgICAgICAgICBfdGhpczYudXNlci5sb2dpbl9zb3VyY2UgPSAiU1NPIjsKICAgICAgICAgICAgICAgIF90aGlzNi51c2VyLnNzb19zb3VyY2UgPSAiZ29vZ2xlIjsKICAgICAgICAgICAgICAgIF90aGlzNi51c2VyLnNzb190b2tlbiA9IHNzb190b2tlbjsKICAgICAgICAgICAgICAgIF90aGlzNi51c2VyLmVtYWlsID0gcHJvZmlsZVtrZXlzWzVdXTsgLy8gY29uc29sZS5sb2codGhpcy51c2VyKTsKCiAgICAgICAgICAgICAgICBfdGhpczYubWFpbnNwaW5uZXJPbiA9IHRydWU7CgogICAgICAgICAgICAgICAgX3RoaXM2LmNhbGxfYXBpKCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTY7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgX3RoaXM2Lm1haW5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTZdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxvZ2luX2NhcmRfaGVpZ2h0OiBmdW5jdGlvbiBsb2dpbl9jYXJkX2hlaWdodCgpIHsKICAgICAgaWYgKHRoaXMuaXNfdXNlcl9sb2NrZWQgPT09IHRydWUgfHwgdGhpcy5hbGxvd2VkX2F0dGVtcHRzX3JlbWFpbmluZyAhPSBudWxsICYmIHRoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmcgPiAwKSB7CiAgICAgICAgcmV0dXJuICJsb2dpbi1jYXJkLXRhbGwiOwogICAgICB9CgogICAgICByZXR1cm4gImxvZ2luLWNhcmQtZGVmYXVsdCI7CiAgICB9CiAgfQp9Ow=="},null]}