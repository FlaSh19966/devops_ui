{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/AddIntent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/AddIntent.vue","mtime":1643027096164},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvaG9tZS92aW1hbGVzaC9DRU5TRS9jaGF0Ym90LXBvcnRhbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKdmFyIF9uYW1lJGRhdGEkd2F0Y2gkY3JlYTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKZXhwb3J0IGRlZmF1bHQgKF9uYW1lJGRhdGEkd2F0Y2gkY3JlYSA9IHsKICBuYW1lOiAiYWRkLWludGVudCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzVmlzaWJsZVNlYXJjaENsZWFyOiBmYWxzZSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgdG90YWxfcGFnZXM6IG51bGwsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAyMCwKICAgICAgbmV3X2ludGVudF9saXN0OiBbXSwKICAgICAgbmV3X2ludGVudHM6ICIiLAogICAgICBpbnRlbnRsaXN0OiBbXSwKICAgICAgY29tcGFueW5hbWU6ICIiLAogICAgICBjb21wYW55aWQ6ICIiLAogICAgICBudW1iZXJfb2Zfcm93czogbnVsbCwKICAgICAgZWRpdDogIkZhbHNlIiwKICAgICAgb2xkX2ludGVudF9kYXRhOiBbXSwKICAgICAgbmV3X2ludGVudF9kYXRhOiBbXSwKICAgICAgc2VhcmNoX25hbWU6ICIiLAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgYWRkX2ludGVudHNfbGlzdDogWyIiXSwKICAgICAgaXNHbG9iYWxFZGl0OiBmYWxzZSwKICAgICAgZ2xvYmFsX2ludGVudHNfZWRpdF9saXN0OiBbXSAvLyBzZWFyY2hfYnk6ICcnLAogICAgICAvLyBzZWFyY2hieTogJycsCgogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpc0dsb2JhbEVkaXQ6IGZ1bmN0aW9uIGlzR2xvYmFsRWRpdChuZXdWYWwpIHsKICAgICAgaWYgKEJvb2xlYW4obmV3VmFsKSkgewogICAgICAgIHRoaXMuZ2xvYmFsX2ludGVudHNfZWRpdF9saXN0ID0gdGhpcy5pbnRlbnRsaXN0Lm1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIGludGVudCA9IF9yZWYuaW50ZW50OwogICAgICAgICAgcmV0dXJuIGludGVudDsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSkgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2Ugc2VsZWN0IGEgY29tcGFueSBuYW1lIGZyb20gdGhlIGRyb3Bkb3duIik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQoKICAgIHRoaXMubG9hZF9pbnRlbnRzKCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHZtID0gdGhpczsKICAgICQoIiNzZWxlY3RhbGwiKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgkKHRoaXMpLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICB9CiAgICB9KTsKICAgICQoIiNpbnRlbnRtb2RlbCIpLm9uKCJoaWRkZW4uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgfSk7CgogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5tb2RhbF9vcGVuX3N3aXRjaF90YWIpIHsKICAgICAgJCgiI2ludGVudG1vZGVsIikubW9kYWwoInNob3ciKTsKICAgIH0gLy8gJCgiI2Zyb21fZGF0ZXBpY2tlciIpLmRhdGVwaWNrZXIoewogICAgLy8gICBkYXRlRm9ybWF0OiAieXktbW0tZGQiLAogICAgLy8gICBvbkNsb3NlOiAoZGF0ZVRleHQsIGluc3QpID0+IHsKICAgIC8vICAgICB0aGlzLnNlYXJjaF9uYW1lPWRhdGVUZXh0OwogICAgLy8gICB9LAogICAgLy8gICBvblNlbGVjdDogZnVuY3Rpb24oZGF0ZVRleHQsIGluc3QpIHsKICAgIC8vICAgfQogICAgLy8gfSk7CgogIH0KfSwgX2RlZmluZVByb3BlcnR5KF9uYW1lJGRhdGEkd2F0Y2gkY3JlYSwgIndhdGNoIiwgewogIHNlYXJjaF9uYW1lOiBmdW5jdGlvbiBzZWFyY2hfbmFtZSgpIHsKICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09PSAiIikgewogICAgICB0aGlzLmxvYWRfaW50ZW50cygpOwogICAgICB0aGlzLmlzVmlzaWJsZVNlYXJjaENsZWFyID0gZmFsc2U7CiAgICB9IGVsc2UgaWYgKHRoaXMuc2VhcmNoX25hbWUgIT09ICIiKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSB0cnVlOwogICAgfQogIH0KfSksIF9kZWZpbmVQcm9wZXJ0eShfbmFtZSRkYXRhJHdhdGNoJGNyZWEsICJtZXRob2RzIiwgewogIGNsZWFyX3NlYXJjaF9uYW1lOiBmdW5jdGlvbiBjbGVhcl9zZWFyY2hfbmFtZSgpIHsKICAgIHRoaXMuc2VhcmNoX25hbWUgPSAiIjsKICB9LAogIGxvYWRfaW50ZW50czogZnVuY3Rpb24gbG9hZF9pbnRlbnRzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICB0aGlzLmludGVudGxpc3QgPSBbXTsKICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgIHNob3dpbnRlbnQ6ICJUcnVlIiwKICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZQogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSAidG9rZW4gaW52YWxpZCIpIHsKICAgICAgICBfdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGFbM10ubnVtYmVyX29mX3Jvd3M7CiAgICAgICAgX3RoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwoX3RoaXMubnVtYmVyX29mX3Jvd3MgLyBfdGhpcy5wZXJfcGFnZSk7CgogICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YVswXSkgewogICAgICAgICAgX3RoaXMuaW50ZW50bGlzdC5wdXNoKHsKICAgICAgICAgICAgaW50ZW50OiByZXNwb25zZS5kYXRhWzBdW2ldLnJlcGxhY2UoIiIuY29uY2F0KF90aGlzLmNvbXBhbnlpZCwgIl8iKSwgIiIpLAogICAgICAgICAgICBlbWFpbDogcmVzcG9uc2UuZGF0YVsxXVtpXSwKICAgICAgICAgICAgY3JlYXRlZDogcmVzcG9uc2UuZGF0YVsyXVtpXQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBfdGhpcy5zZXRwYWdpbmF0aW9uKF90aGlzLnBhZ2Vfbm8pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgY2FsbHNlYXJjaDogZnVuY3Rpb24gY2FsbHNlYXJjaCgpIHsKICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgewogICAgICB0aGlzLnNlYXJjaF9pbnRlbnQoKTsKICAgIH0KICB9LAogIHNlYXJjaF9pbnRlbnQ6IGZ1bmN0aW9uIHNlYXJjaF9pbnRlbnQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSAhPSAiIikgewogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBpc3NlYXJjaDogdHJ1ZSwKICAgICAgICBrZXk6IHRoaXMuc2VhcmNoX25hbWUsCiAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgcGFnZV9ubzogMQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgIT0gIkludGVybmFsIFNlcnZlciBFcnJvciIgJiYgcmVzcG9uc2UuZGF0YS5NU0cgIT0gIk5vIEludGVudHMgRm91bmQiKSB7CiAgICAgICAgICBfdGhpczIuaW50ZW50bGlzdCA9IFtdOwogICAgICAgICAgX3RoaXMyLnBhZ2Vfbm8gPSAxOwoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9ICJ0b2tlbiBpbnZhbGlkIikgewogICAgICAgICAgICBfdGhpczIubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLmludGVudGxpc3QubGVuZ3RoOwogICAgICAgICAgICBfdGhpczIudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2Vjb3VudDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5pbnRlbnRsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmludGVudGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICBpbnRlbnQ6IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdFtpXS5JbnRlbnQucmVwbGFjZShfdGhpczIuY29tcGFueWlkICsgIl8iLCAiIiksCiAgICAgICAgICAgICAgICBlbWFpbDogcmVzcG9uc2UuZGF0YS5pbnRlbnRsaXN0W2ldLkNyZWF0ZWRCeSwKICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdFtpXS5DcmVhdGVkRGF0ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczIuc2V0cGFnaW5hdGlvbihfdGhpczIucGFnZV9ubyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiTm8gSW50ZW50cyBGb3VuZCIpIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiTm8gaW50ZW50IGZvdW5kIik7CiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiSW50cm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIkludHJuYWwgU2VydmVyIEVycm9yIik7IC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgLy8gICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgIC8vIH0sIDI1MDApOwoKICAgICAgICAgIF90aGlzMi5sb2FkX2ludGVudHMoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHRvYXN0ci5lcnJvcigiRW50ZXIgcHJvcGVyIGRhdGEgZm9yIHNlYXJjaGluZyIpOwogICAgfQogIH0sCiAgc2VsZWN0ZWRfaW50ZW50czogZnVuY3Rpb24gc2VsZWN0ZWRfaW50ZW50cyhpbnRlbnQpIHsKICAgIGlmIChpbnRlbnQgPT0gImFsbCIpIHsKICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgdmFyIHRlbXAgPSB0aGlzLmludGVudGxpc3Q7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0ZW1wOwogICAgICB9IGVsc2UgaWYgKCFldmVudC50YXJnZXQuY2hlY2tlZCkgewogICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgdmFyIHZhbF9pbmRleCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcihmdW5jdGlvbiAoaW50ZW50cykgewogICAgICAgICAgcmV0dXJuIGludGVudHMuaW50ZW50ID09IGludGVudDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHZhbF9pbmRleC5sZW5ndGggPT0gMCkgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaChpbnRlbnQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCA9PSBmYWxzZSkgewogICAgICAgIHZhciBzZWxlY3RhbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc2VsZWN0YWxsIik7CgogICAgICAgIGlmIChzZWxlY3RhbGwuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICBzZWxlY3RhbGwuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdmFyIF90ZW1wID0gdGhpcy5jaGVja2VkX2xpc3QuZmlsdGVyKGZ1bmN0aW9uIChpbnRlbnRzKSB7CiAgICAgICAgICByZXR1cm4gaW50ZW50cyAhPSBpbnRlbnQ7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gX3RlbXA7CiAgICAgIH0KICAgIH0KICB9LAogIHBhZ2VfY2hhbmdlOiBmdW5jdGlvbiBwYWdlX2NoYW5nZShwYWdlX25vKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5hZGRfaW50ZW50X3VybCgpLCB7CiAgICAgIGludGVudDogdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLm5ld19pbnRlbnRzLAogICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgc2hvd2ludGVudDogIlRydWUiLAogICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgIF90aGlzMy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGFbM10ubnVtYmVyX29mX3Jvd3M7CgogICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGFbMF0pIHsKICAgICAgICBfdGhpczMuaW50ZW50bGlzdC5wdXNoKHsKICAgICAgICAgIGludGVudDogcmVzcG9uc2UuZGF0YVswXVtpXS5yZXBsYWNlKF90aGlzMy5jb21wYW55aWQgKyAiXyIsICIiKSwKICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgICAgICAgY3JlYXRlZDogcmVzcG9uc2UuZGF0YVsyXVtpXQogICAgICAgIH0pOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICBfdGhpczMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgZWRpdF9pbnRlbnQ6IGZ1bmN0aW9uIGVkaXRfaW50ZW50KGluZGV4KSB7CiAgICB0aGlzLm5ld19pbnRlbnRzID0gdGhpcy5pbnRlbnRsaXN0W2luZGV4XS5pbnRlbnQ7CiAgICB0aGlzLm9sZF9pbnRlbnRfZGF0YS5wdXNoKCIiLmNvbmNhdCh0aGlzLmNvbXBhbnlpZCwgIl8iKS5jb25jYXQodGhpcy5pbnRlbnRsaXN0W2luZGV4XS5pbnRlbnQpKTsKICAgIHRoaXMuZWRpdCA9ICJUcnVlIjsKICB9LAogIGRlbGV0ZV9zZWxlY3RlZDogZnVuY3Rpb24gZGVsZXRlX3NlbGVjdGVkKCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgIFN3YWwuZmlyZSgiTm8gaW50ZW50IHNlbGVjdGVkISIsICIiLCAiZXJyb3IiKTsKICAgIH0gZWxzZSBpZiAodGhpcy5jaGVja2VkX2xpc3QubGVuZ3RoID4gMCkgewogICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2hlY2tlZF9saXN0KSB7CiAgICAgICAgdGhpcy5uZXdfaW50ZW50X2xpc3QucHVzaCh0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuY2hlY2tlZF9saXN0W2ldKTsKICAgICAgfQoKICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyEiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmRlbGV0ZV9pbnRlbnRfdXJsKCksIHsKICAgICAgICAgICAgaW50ZW50X2xpc3Q6IF90aGlzNC5uZXdfaW50ZW50X2xpc3QsCiAgICAgICAgICAgIGNvbXBhbnluYW1lOiBfdGhpczQuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlpZDogX3RoaXM0LmNvbXBhbnlpZCwKICAgICAgICAgICAgZW1haWw6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzNC4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzNC5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJJTlRFTlRTIERFTEVURUQiKSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiWW91ciBJbnRlbnQocykgaGF2ZSBiZWVuIGRlbGV0ZWQuIiwKICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5sb2FkX2ludGVudHMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJOb3RoaW5nIHRvIGRlbGV0ZSEiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJZb3UgaGF2ZSBub3Qgc2VsZWN0ZWQgYW55IGludGVudCB0byBiZSBkZWxldGVkLiIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlRyYWluZWQgaW50ZW50IGRlbGV0aW9uIGlzIGN1cnJlbnRseSBkaXNhYmxlZCEiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJEZWxldGlvbiBvZiB0cmFpbmVkL2NvbmZpZ3VyZWQgaW50ZW50IGlzIGRpc2FibGVkLiBBIENvZGVhcnJheSBBZG1pbiB3aWxsIGdldCBpbiBjb250YWN0IHdpdGggeW91Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgIF90aGlzNC4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGRlbGV0ZV9pbnRlbnQ6IGZ1bmN0aW9uIGRlbGV0ZV9pbnRlbnQoaW5kZXgpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHRoaXMubmV3X2ludGVudF9saXN0WzBdID0gdGhpcy5jb21wYW55aWQgKyAiXyIgKyB0aGlzLmludGVudGxpc3RbaW5kZXhdLmludGVudDsKICAgIFN3YWwuZmlyZSh7CiAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgIHRleHQ6ICJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyEiLAogICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgZGVsZXRlIGl0ISIKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgX3RoaXM1LnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuZGVsZXRlX2ludGVudF91cmwoKSwgewogICAgICAgICAgaW50ZW50X2xpc3Q6IF90aGlzNS5uZXdfaW50ZW50X2xpc3QsCiAgICAgICAgICBjb21wYW55bmFtZTogX3RoaXM1LmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueWlkOiBfdGhpczUuY29tcGFueWlkLAogICAgICAgICAgZW1haWw6IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIHN1YnNjcmlwdGlvbjogX3RoaXM1LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzNS4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzNS5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiSU5URU5UUyBERUxFVEVEIikgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGV4dDogIllvdXIgSW50ZW50KHMpIGhhdmUgYmVlbiBkZWxldGVkLiIsCiAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICBfdGhpczUubG9hZF9pbnRlbnRzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiVHJhaW5lZCBpbnRlbnQgZGVsZXRpb24gaXMgY3VycmVudGx5IGRpc2FibGVkISIpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJEZWxldGlvbiBvZiB0cmFpbmVkL2NvbmZpZ3VyZWQgaW50ZW50IGlzIGRpc2FibGVkLiBBIENvZGVhcnJheSBBZG1pbiB3aWxsIGdldCBpbiBjb250YWN0IHdpdGggeW91Iik7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICBfdGhpczUuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgcGFnZV9yZXF1aXJlOiBmdW5jdGlvbiBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgaWYgKHBhZ2UgPT0gMCB8fCBwYWdlID09IHRoaXMudG90YWxfcGFnZXMgKyAxKSB7fSBlbHNlIHsKICAgICAgaWYgKHRoaXMuc2VhcmNoX25hbWUgPT0gIiIpIHsKICAgICAgICBpZiAocGFnZSA9PSAiLi4ucyIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIi4uLmwiKSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKHRoaXMudG90YWxfcGFnZXMgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAgICAgfQoKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgICAgIGludGVudDogdGhpcy5uZXdfaW50ZW50cywKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICBzaG93aW50ZW50OiAiVHJ1ZSIsCiAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgX3RoaXM2LmludGVudGxpc3QgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGFbMF0pIHsKICAgICAgICAgICAgX3RoaXM2LmludGVudGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgaW50ZW50OiByZXNwb25zZS5kYXRhWzBdW2ldLnJlcGxhY2UoX3RoaXM2LmNvbXBhbnlpZCArICJfIiwgIiIpLAogICAgICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgICAgICAgICAgIGNyZWF0ZWQ6IHJlc3BvbnNlLmRhdGFbMl1baV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM2LnNldHBhZ2luYXRpb24oX3RoaXM2LnBhZ2Vfbm8pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXM2LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGlmKHRoaXMuc2VhcmNoX2J5PT0nRW1haWwgQWRkcmVzcycpewogICAgICAgIC8vICAgdGhpcy5zZWFyY2hieT0nQ3JlYXRlZEJ5JzsKICAgICAgICAvLyB9CiAgICAgICAgLy8gZWxzZXsKICAgICAgICAvLyAgIHRoaXMuc2VhcmNoYnk9dGhpcy5zZWFyY2hfYnk7CiAgICAgICAgLy8gfQogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKCiAgICAgICAgaWYgKHBhZ2VubyA9PSAiLi4ucyIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgaWYgKHBhZ2VubyA9PSAiLi4ubCIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZW5vOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc3NlYXJjaDogdHJ1ZSwKICAgICAgICAgIC8vIHNlYXJjaGJ5OiB0aGlzLnNlYXJjaGJ5LAogICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8KICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzNi5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIF90aGlzNi5pbnRlbnRsaXN0ID0gW107CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gInRva2VuIGludmFsaWQiKSB7CiAgICAgICAgICAgICAgX3RoaXM2Lm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5pbnRlbnRsaXN0Lmxlbmd0aDsKICAgICAgICAgICAgICBfdGhpczYudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2Vjb3VudDsKCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmludGVudGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIF90aGlzNi5pbnRlbnRsaXN0LnB1c2goewogICAgICAgICAgICAgICAgICBpbnRlbnQ6IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdFtpXS5JbnRlbnQucmVwbGFjZShfdGhpczYuY29tcGFueWlkICsgIl8iLCAiIiksCiAgICAgICAgICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhLmludGVudGxpc3RbaV0uQ3JlYXRlZEJ5LAogICAgICAgICAgICAgICAgICBjcmVhdGVkOiByZXNwb25zZS5kYXRhLmludGVudGxpc3RbaV0uQ3JlYXRlZERhdGUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXM2LnNldHBhZ2luYXRpb24oX3RoaXM2LnBhZ2Vfbm8pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJObyBJbnRlbnRzIEZvdW5kIikgewogICAgICAgICAgICB0b2FzdHIuZXJyb3IoIk5vIGludGVudCBmb3VuZCIpOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiSW50cm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50ZXJuYWwgU2VydmVyIEVycm9yIik7IC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAvLyB9LCAyNTAwKTsKCiAgICAgICAgICAgIF90aGlzNi5sb2FkX2ludGVudHMoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50ZXJuYWwgU2VydmVyIEVycm9yIik7IC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAvLyB9LCAyNTAwKTsKCiAgICAgICAgICAgIF90aGlzNi5sb2FkX2ludGVudHMoKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIF90aGlzNi4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgYWRkX2ludGVudHM6IGZ1bmN0aW9uIGFkZF9pbnRlbnRzKCkgewogICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgaWYgKHRoaXMuaXNHbG9iYWxFZGl0KSB7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgdmFyIHJlc3VsdDEgPSBbXTsKICAgICAgdmFyIHJlc3VsdDIgPSBbXTsKICAgICAgdmFyIGludGVudHNfbWFwID0gdGhpcy5pbnRlbnRsaXN0Lm1hcChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICB2YXIgaW50ZW50ID0gX3JlZjIuaW50ZW50OwogICAgICAgIHJldHVybiBpbnRlbnQ7CiAgICAgIH0pOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRlbnRzX21hcC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmdsb2JhbF9pbnRlbnRzX2VkaXRfbGlzdC5pbmRleE9mKGludGVudHNfbWFwW2ldKSA9PT0gLTEpIHsKICAgICAgICAgIHJlc3VsdDEucHVzaChpbnRlbnRzX21hcFtpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5nbG9iYWxfaW50ZW50c19lZGl0X2xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoaW50ZW50c19tYXAuaW5kZXhPZih0aGlzLmdsb2JhbF9pbnRlbnRzX2VkaXRfbGlzdFtpXSkgPT09IC0xKSB7CiAgICAgICAgICByZXN1bHQyLnB1c2godGhpcy5nbG9iYWxfaW50ZW50c19lZGl0X2xpc3RbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHJlc3VsdDIuc29tZShmdW5jdGlvbiAodmFsLCBpKSB7CiAgICAgICAgcmV0dXJuIHJlc3VsdDIuaW5kZXhPZih2YWwpICE9PSBpOwogICAgICB9KSkgewogICAgICAgIHRvYXN0ci5lcnJvcigiWW91IGhhdmUgZW50ZXJlZCBzb21lIGludGVudHMgbW9yZSB0aGFuIG9uY2UsIGVuc3VyZSB1bmlxdWUgdmFsdWVzIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG9sZF9pbnRlbnRfZGF0YSA9IHJlc3VsdDEubWFwKGZ1bmN0aW9uIChpbnRlbnQpIHsKICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoX3RoaXM3LmNvbXBhbnlpZCwgIl8iKS5jb25jYXQoaW50ZW50KTsKICAgICAgICB9KTsKICAgICAgICB2YXIgbmV3X2ludGVudF9kYXRhID0gcmVzdWx0Mi5tYXAoZnVuY3Rpb24gKGludGVudCkgewogICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChfdGhpczcuY29tcGFueWlkLCAiXyIpLmNvbmNhdChpbnRlbnQpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZWRpdF9pbnRlbnRfYXBpKG9sZF9pbnRlbnRfZGF0YSwgbmV3X2ludGVudF9kYXRhKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0aGlzLmVkaXQgPT0gIkZhbHNlIikgewogICAgICBpZiAodGhpcy5hZGRfaW50ZW50c19saXN0LmluY2x1ZGVzKCIiKSkgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIEVudGVyIHRoZSBJbnRlbnQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgdGhpcy5uZXdfaW50ZW50X2xpc3QgPSB0aGlzLmFkZF9pbnRlbnRzX2xpc3QubWFwKGZ1bmN0aW9uIChpbnRlbnQpIHsKICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoX3RoaXM3LmNvbXBhbnlpZCwgIl8iKS5jb25jYXQoaW50ZW50KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2ludGVudF91cmwoKSwgewogICAgICAgICAgaW50ZW50OiB0aGlzLm5ld19pbnRlbnRfbGlzdCwKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICBzaG93aW50ZW50OiAiRmFsc2UiCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczcubmV3X2ludGVudF9saXN0ID0gW107CiAgICAgICAgICBfdGhpczcuYWRkX2ludGVudHNfbGlzdCA9IFsiIl07CiAgICAgICAgICBfdGhpczcuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlVzZXIgUm9sZSBTZXQiKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICB0ZXh0OiAiRmVlZGJhY2sgYWRkZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICB0aW1lcjogMjAwMCwKICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkX2ludGVudHMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiRmFpbHVyZSIpIHsKICAgICAgICAgICAgdmFyIG15aHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICB2YXIgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKTsKICAgICAgICAgICAgcC5zdHlsZS50ZXh0QWxpZ24gPSAiY2VudGVyIjsgLy8gcC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzUlJzsKCiAgICAgICAgICAgIHAuaW5uZXJIVE1MID0gIlRoZSBmb2xsb3dpbmcgaW50ZW50KHMpIGFscmVhZHkgZXhpc3Q6IjsKICAgICAgICAgICAgbXlodG1sLmFwcGVuZENoaWxkKHApOwogICAgICAgICAgICB2YXIgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpOwogICAgICAgICAgICB1bC5zdHlsZS5tYXJnaW5MZWZ0ID0gIjEwJSI7CiAgICAgICAgICAgIHVsLnNldEF0dHJpYnV0ZSgiaWQiLCAicHJvTGlzdCIpOwogICAgICAgICAgICB2YXIgcHJvZHVjdExpc3QgPSByZXNwb25zZS5kYXRhLmZhaWxlZF9pbnRlbnRzOwogICAgICAgICAgICBwcm9kdWN0TGlzdCA9IHByb2R1Y3RMaXN0Lm1hcChmdW5jdGlvbiAoaW50ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGludGVudC5zcGxpdChfdGhpczcuY29tcGFueWlkICsgIl8iKS5wb3AoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG15aHRtbC5hcHBlbmRDaGlsZCh1bCk7CiAgICAgICAgICAgIHByb2R1Y3RMaXN0LmZvckVhY2gocmVuZGVyUHJvZHVjdExpc3QpOwoKICAgICAgICAgICAgZnVuY3Rpb24gcmVuZGVyUHJvZHVjdExpc3QoZWxlbWVudCwgaW5kZXgsIGFycikgewogICAgICAgICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpdGVtIik7CiAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IGxpLmlubmVySFRNTCArIGVsZW1lbnQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVsLnN0eWxlLmxpc3RTdHlsZSA9ICJpbml0aWFsIjsKICAgICAgICAgICAgdWwuc3R5bGUudGV4dEFsaWduID0gImxlZnQiOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZmFpbGVkX2ludGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgaHRtbDogbXlodG1sLAogICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciIC8vIHRpdGxlOiAiVGhlIGZvbGxvd2luZyBpbnRlbnRzIGFscmVhZHkgZXhpc3Q6IgoKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIGZvbGxvd2luZyBpbnRlbnRzIGFscmVhZHkgZXhpc3Q6IiwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIkVycm9yIikgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6ICJUaGVyZSB3YXMgYW4gaW50ZXJuYWwgc2VydmVyIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluLiIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXN0aW9uIExpbWl0IEFscmVhZHkgRXhjZWVkZWQhIikgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgdGV4dDogIllvdXIgY2FwYWNpdHkgdG8gYWRkIHF1ZXN0aW9ucyBoYXMgZXhjZWVkZWQuIFBsZWFzZSB1cGdyYWRlIHlvdXIgcGxhbnMuIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIF90aGlzNy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsgLy8gdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgJCgiI2ludGVudG1vZGVsIikubW9kYWwoImhpZGUiKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0aGlzLmVkaXQgPT0gIlRydWUiKSB7CiAgICAgIGlmICh0aGlzLm5ld19pbnRlbnRzID09ICIiKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0ZXh0OiAiUGxlYXNlIGVudGVyIHRoZSByZXF1aXJlZCBmaWVsZHMiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm5ld19pbnRlbnRfZGF0YS5wdXNoKCIiLmNvbmNhdCh0aGlzLmNvbXBhbnlpZCwgIl8iKS5jb25jYXQodGhpcy5uZXdfaW50ZW50cykpOwogICAgICAgIHRoaXMuZWRpdF9pbnRlbnRfYXBpKHRoaXMub2xkX2ludGVudF9kYXRhLCB0aGlzLm5ld19pbnRlbnRfZGF0YSk7CiAgICAgIH0KICAgIH0KICB9LAogIGVkaXRfaW50ZW50X2FwaTogZnVuY3Rpb24gZWRpdF9pbnRlbnRfYXBpKG9sZF9pbnRlbnRfZGF0YSwgbmV3X2ludGVudF9kYXRhKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAkKCIjaW50ZW50bW9kZWwiKS5tb2RhbCgiaGlkZSIpOwogICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2ludGVudF91cmwoKSwgewogICAgICBvbGRfaW50ZW50X2RhdGE6IG9sZF9pbnRlbnRfZGF0YSwKICAgICAgbmV3X2ludGVudF9kYXRhOiBuZXdfaW50ZW50X2RhdGEsCiAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICBlZGl0aW50ZW50OiAiVHJ1ZSIKICAgIH0sIHsKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzOC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgX3RoaXM4LmVkaXQgPT0gIkZhbHNlIjsKICAgICAgX3RoaXM4LmlzR2xvYmFsRWRpdCA9IGZhbHNlOyAvLyAkKCIjaW50ZW50bW9kZWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAvLyByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIkZhaWxlZCB0byBlZGl0IGludGVudChzKSIgfHwKCiAgICAgIF90aGlzOC5jbGVhcl9maWVsZHMoKTsKCiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZmFpbGVkX2ludGVudHMpOwoKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJGYWlsdXJlIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRleHQ6ICJJbnRlbnQocykgYXJlIG5vdCB1cGRhdGVkLCBkdWUgdG8gc29tZSB0ZWNobmljYWwgaXNzdWVzLiIsCiAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgdGV4dDogIkludGVudChzKSBVcGRhdGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIF90aGlzOC5sb2FkX2ludGVudHMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICBTd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB0ZXh0OiAiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iLAogICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICB9KTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgX3RoaXM4LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIGNsZWFyX2ZpZWxkczogZnVuY3Rpb24gY2xlYXJfZmllbGRzKCkgewogICAgdGhpcy5uZXdfaW50ZW50cyA9IFtdOwogICAgdGhpcy5uZXdfaW50ZW50X2RhdGEgPSBbXTsKICAgIHRoaXMub2xkX2ludGVudF9kYXRhID0gW107CiAgICB0aGlzLmFkZF9pbnRlbnRzX2xpc3QgPSBbIiJdOwogICAgdGhpcy5lZGl0ID0gIkZhbHNlIjsKICB9LAogIHNldHBhZ2luYXRpb246IGZ1bmN0aW9uIHNldHBhZ2luYXRpb24ocGFnZV9ubykgewogICAgdGhpcy5wYWdlX2FycmF5ID0gW107CgogICAgaWYgKHRoaXMudG90YWxfcGFnZXMgPD0gNykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IDQ7IF9pKyspIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaSArIDEpOwogICAgICB9CgogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSB0aGlzLnRvdGFsX3BhZ2VzKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwoKICAgICAgZm9yICh2YXIgX2kyID0gdGhpcy50b3RhbF9wYWdlcyAtIDQ7IF9pMiA8IHRoaXMudG90YWxfcGFnZXM7IF9pMisrKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2kyICsgMSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocGFnZV9ubyA8PSA0KSB7CiAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHBhZ2Vfbm8gKyAzOyBfaTMrKykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pMyArIDEpOwogICAgICB9CgogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIH0gZWxzZSBpZiAocGFnZV9ubyA+PSB0aGlzLnRvdGFsX3BhZ2VzIC0gNCkgewogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgIGZvciAodmFyIF9pNCA9IHBhZ2Vfbm8gLSA0OyBfaTQgPCB0aGlzLnRvdGFsX3BhZ2VzOyBfaTQrKykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNCArIDEpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgIGZvciAodmFyIF9pNSA9IHBhZ2Vfbm8gLSAzOyBfaTUgPD0gcGFnZV9ubyArIDM7IF9pNSsrKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k1KTsKICAgICAgfQoKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICB9CiAgfSwKICAvLyByZXNldHBhZ2VudW1iZXIoKXsKICAvLyAgIHRoaXMucGFnZV9ubz0xOwogIC8vIH0sCiAgcGFnaW5hdGlvbl9jbGFzczogZnVuY3Rpb24gcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICByZXR1cm4gIiBhY3RpdmUiOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0sCiAgYWRkX3RvX2ludGVudF9saXN0OiBmdW5jdGlvbiBhZGRfdG9faW50ZW50X2xpc3QodHlwZSwgaW5kZXgpIHsKICAgIGlmICh0eXBlID09ICJhZGQiKSB7CiAgICAgIHRoaXMuYWRkX2ludGVudHNfbGlzdC5wdXNoKCIiKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAicmVtb3ZlIikgewogICAgICB0aGlzLmFkZF9pbnRlbnRzX2xpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0KICB9Cn0pLCBfbmFtZSRkYXRhJHdhdGNoJGNyZWEpOw=="},null]}