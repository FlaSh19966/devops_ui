{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/TrainTestBot.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/TrainTestBot.vue","mtime":1663910265466},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IHsgZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsLCBjbG9zZV9tb2RhbCB9IGZyb20gIkAvcG9ydGFsL21peGlucyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVHJhaW5UZXN0Qm90UGFnZSIsCiAgbWl4aW5zOiBbZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsLCBjbG9zZV9tb2RhbF0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRlcl9zdGF0dXM6ICJGYWlsdXJlIiwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgcXVlc3Rpb25zX2xpc3Q6IFtdLAogICAgICBpbnRlbnRfbGlzdDogW10sCiAgICAgIGN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50OiBudWxsLAogICAgICBzZWxlY3RlZF9xdWVzdGlvbl9pbmRleDogbnVsbCwKICAgICAgY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zOiBbXSwKICAgICAgc3RhdHVzX2xpc3Q6IFsiU3VjY2VzcyIsICJGYWlsdXJlIl0sCiAgICAgIHNlbGVjdGVkX3N0YXR1c2xpc3Q6IFsiRmFpbHVyZSJdLAogICAgICBjb21wYW55X2lkOiBudWxsLAogICAgICBjb21wYW55X25hbWU6IG51bGwsCiAgICAgIGZpbGVfbGFiZWw6ICJDaG9vc2UgZmlsZSIsCiAgICAgIGZpbGVfY29udGVudDogIiIsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIG51bWJlcl9vZl9yb3dzOiAwLAogICAgICB0b3RhbF9wYWdlczogMSwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgc2hvd19ub19xdWVzdGlvbnNfbWVzc2FnZTogZmFsc2UsCiAgICAgIGludGVudF9tb2RlbF9pbnByb2dyZXNzOiBmYWxzZSwKICAgICAgd2FudF9zdGF0dXM6IHRydWUsCiAgICAgIGZ1bGxzY3JlZW46IGZhbHNlLAogICAgICBkaXNhYmxlX2J0bl9leHBpcmVkOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0OiBNdWx0aXNlbGVjdAogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmZyZWV6ZV9wb3J0YWwoKTsKICAgIH0sIDEwMDApOwogICAgdGhpcy4kcm9vdC4kb24oIlRyYWluVGVzdEJvdFBhZ2VEaXNhYmxlZCIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmIChkYXRhID09PSB0cnVlKSB7CiAgICAgICAgX3RoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pOyAvLyB0aGlzLmNvbXBhbnlfaWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKCiAgICBpZiAoIXRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSAmJiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgdG9hc3RyLndhcm5pbmcodGhpcy50bHQoJ3NlbGVjdF9jb21wYW55X25hbWVfbGFiZWwnKSk7CiAgICB9IGVsc2UgaWYgKHRoaXMudXNlcl9yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpKSB7CiAgICAgICAgdGhpcy5jb21wYW55X2lkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICAgIHRoaXMuY29tcGFueV9uYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlOYW1lIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb21wYW55X2lkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgICAgdGhpcy5jb21wYW55X25hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlfaWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKICAgICAgdGhpcy5jb21wYW55X25hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQoKICAgIHZhciB2bSA9IHRoaXM7CiAgICAkKCIuZHJvcGRvd24iKS5vbigiaGlkZS5icy5kcm9wZG93biIsIGZ1bmN0aW9uIChldmVudCkgey8vIHZhciB4ID0gJChldmVudC5yZWxhdGVkVGFyZ2V0KS50ZXh0KCk7IC8vIEdldCB0aGUgdGV4dCBvZiB0aGUgZWxlbWVudAogICAgICAvLyBhbGVydCh4KTsKICAgICAgLy8gY29uc29sZS5sb2codm0uc2VsZWN0ZWRfc3RhdHVzbGlzdCk7CiAgICB9KTsKICAgICQoIiNteU1vZGFsIikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdm0uY3VycmVudF9zZWxlY3RlZF9pbnRlbnQgPSBudWxsOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigic2VuZF9tb2RlbF9zdGF0dXMiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PSB0cnVlKSB7CiAgICAgICAgX3RoaXMuY2hlY2tfaW50ZW50X21vZGVsX3N0YXR1cygpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuZ2V0X2ludGVudHNfbGlzdCgpOwogICAgdGhpcy5pbml0aWFsaXplX3F1ZXN0aW9uc19mb3JfaW50ZW50KCk7CiAgICB0aGlzLmdldF9xdWVzdGlvbnNfbGlzdCgpOwogICAgdGhpcy5jaGVja19pbnRlbnRfbW9kZWxfc3RhdHVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGtfY2J4X2Nyc3I6IGZ1bmN0aW9uIGNoa19jYnhfY3JzcihpbmRleCkgewogICAgICBpZiAodGhpcy5zaG93X25vX3F1ZXN0aW9uc19tZXNzYWdlKSB7CiAgICAgICAgaWYgKGluZGV4ID09ICdzdHlsZScpIHsKICAgICAgICAgIHJldHVybiAiY3Vyc29yOiBub3QtYWxsb3dlZCI7CiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PSAndGl0bGUnKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50bHQoJ3RyYWluX2JvdF9ub19mYWlsdXJlX2RhdGFfbXNnJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgY2hlY2tfaW50ZW50X21vZGVsX3N0YXR1czogZnVuY3Rpb24gY2hlY2tfaW50ZW50X21vZGVsX3N0YXR1cygpIHsKICAgICAgdGhpcy5tb2RlbF9zdGF0dXMgPSB0aGlzLiRzZXNzaW9uLmdldCgiTW9kZWxTdGF0dXMiKTsKCiAgICAgIGlmICh0aGlzLm1vZGVsX3N0YXR1cyA9PSAiTm8gRmFpbHVyZSIpIHsKICAgICAgICB0aGlzLmludGVudF9tb2RlbF9pbnByb2dyZXNzID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoQm9vbGVhbih0aGlzLm1vZGVsX3N0YXR1cy5pbnRlbnRfbW9kZWwpID09PSB0cnVlKSB7CiAgICAgICAgaWYgKHRoaXMubW9kZWxfc3RhdHVzLmludGVudF9tb2RlbCA9PSAiSW5Qcm9ncmVzcyIpIHsKICAgICAgICAgIHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmludGVudF9tb2RlbF9pbnByb2dyZXNzID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHNob3dfbW9kZWxfcHJvZ3Jlc3M6IGZ1bmN0aW9uIHNob3dfbW9kZWxfcHJvZ3Jlc3MoaW5kZXgpIHsKICAgICAgaWYgKHRoaXMuaW50ZW50X21vZGVsX2lucHJvZ3Jlc3MgPT0gdHJ1ZSkgewogICAgICAgIGlmIChpbmRleCA9PSAnc3R5bGUnKSB7CiAgICAgICAgICByZXR1cm4gImN1cnNvcjogbm90LWFsbG93ZWQiOwogICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT0gJ3RpdGxlJykgewogICAgICAgICAgcmV0dXJuIHRoaXMudGx0KCd0cmFpbl9ib3RfdHJhaW5pbmdfaW5fcHJvZ3Jlc3NfbXNnJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgZ2V0X3F1ZXN0aW9uc19saXN0OiBmdW5jdGlvbiBnZXRfcXVlc3Rpb25zX2xpc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zaG93X25vX3F1ZXN0aW9uc19tZXNzYWdlID0gZmFsc2U7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgdGhpcy5xdWVzdGlvbnNfbGlzdCA9IFtdOwogICAgICBheGlvcy5nZXQoYXBpX2NhbGxzLnRlc3RfaW50ZW50X21vZGVsKCksIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgICBuZXdfcXVlc3Rpb25fZGF0YTogdGhpcy5uZXdfcXVlc3Rpb25fZGF0YSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBzdGF0dXM6IHRoaXMuc2VsZWN0ZWRfc3RhdHVzbGlzdCwKICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAoX3RoaXMyLmFwaV9zdGF0dXNfY29kZS5TVUNDRVNTRlVMX0RCX1FVRVJZX01PREVMUy5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIF90aGlzMi5zaG93X25vX3F1ZXN0aW9uc19tZXNzYWdlID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgIF90aGlzMi5xdWVzdGlvbnNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKCiAgICAgICAgICBfdGhpczIuc2V0cGFnaW5hdGlvbihfdGhpczIucGFnZV9ubyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIFN3YWwoewogICAgICAgICAgLy8gICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgLy8gICB0ZXh0OiB0aGlzLnRsdCgndHJhaW5fYm90X2ludGVybmFsX3NlcnZlcl9tc2cxJyksCiAgICAgICAgICAvLyAgIHRpbWVyOiAyNTAwLAogICAgICAgICAgLy8gfSk7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICBfdGhpczIuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGV4dDogX3RoaXMyLnRsdCgndHJhaW5fYm90X2ludGVybmFsX3NlcnZlcl9tc2cyJyksCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5fbW9kYWxfZm9yX2ludGVudDogZnVuY3Rpb24gb3Blbl9tb2RhbF9mb3JfaW50ZW50KGluZGV4KSB7CiAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnQgPSB0aGlzLnF1ZXN0aW9uc19saXN0W2luZGV4XS5FeHBlY3RlZEludGVudDsKICAgICAgdGhpcy5zZWxlY3RlZF9xdWVzdGlvbl9pbmRleCA9IGluZGV4OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zW2ldLmludGVudCA9ICIiLmNvbmNhdCh0aGlzLmNvbXBhbnlfaWQsICJfIikuY29uY2F0KHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnQpOwogICAgICB9IC8vICQoIiNteU1vZGFsIikubW9kYWwoInNob3ciKTsKCiAgICB9LAogICAgYWRkX3F1ZXN0aW9uOiBmdW5jdGlvbiBhZGRfcXVlc3Rpb24oKSB7CiAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zLnVuc2hpZnQoewogICAgICAgIHF1ZXN0aW9uOiBudWxsLAogICAgICAgIGludGVudDogIiIuY29uY2F0KHRoaXMuY29tcGFueV9pZCwgIl8iKS5jb25jYXQodGhpcy5jdXJyZW50X3NlbGVjdGVkX2ludGVudCkKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlX3F1ZXN0aW9uOiBmdW5jdGlvbiBkZWxldGVfcXVlc3Rpb24oaW5kZXgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zLmxlbmd0aCA+IDEpIHsKICAgICAgICB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ3RyYWluX2JvdF9vbmVfcXNfdG9fYmVfYWRkZWRfbXNnJyksCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAidG9wLXJpZ2h0IiwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRfaW50ZW50c19saXN0OiBmdW5jdGlvbiBnZXRfaW50ZW50c19saXN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF91bmFuc3dlcmVkX3VybCgpLCB7CiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgaXNEcm9wZG93bjogIlRydWUiLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKF90aGlzMy5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEuZGF0YVswXSkgewogICAgICAgICAgICBfdGhpczMuaW50ZW50X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbMF1baV0ucmVwbGFjZShfdGhpczMuY29tcGFueV9pZCArICJfIiwgIiIpKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy5hcGlfc3RhdHVzX2NvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgdG9hc3RyLmVycm9yKF90aGlzMy50bHQoJ2FkZF9yb2xlX2ludGVybmFsX3NlcnZlcl9tc2czJykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgIF90aGlzMy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVfcXVlc3Rpb25zX2Zvcl9pbnRlbnQ6IGZ1bmN0aW9uIHNhdmVfcXVlc3Rpb25zX2Zvcl9pbnRlbnQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKEJvb2xlYW4odGhpcy5zZWxlY3RlZF9xdWVzdGlvbl9pbmRleCkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucy5wdXNoKHsKICAgICAgICAgIHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uc19saXN0W3RoaXMuc2VsZWN0ZWRfcXVlc3Rpb25faW5kZXhdLlF1ZXN0aW9uLAogICAgICAgICAgaW50ZW50OiAiIi5jb25jYXQodGhpcy5jb21wYW55X2lkLCAiXyIpLmNvbmNhdCh0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50KQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgcXVlc3Rpb25zX2xpc3QgPSB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKHF1ZXN0aW9uKSB7CiAgICAgICAgcmV0dXJuIEJvb2xlYW4ocXVlc3Rpb24ucXVlc3Rpb24pOwogICAgICB9KTsKICAgICAgJCgiI215TW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9xdWVzdGlvbl91cmwoKSwgewogICAgICAgIGVkaXRfaW50ZW50OiBmYWxzZSwKICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICBuZXdfcXVlc3Rpb25fZGF0YTogcXVlc3Rpb25zX2xpc3QsCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbgogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBfdGhpczQuaW5pdGlhbGl6ZV9xdWVzdGlvbnNfZm9yX2ludGVudCgpOwoKICAgICAgICBpZiAoX3RoaXM0LmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGV4dDogX3RoaXM0LnRsdCgndHJhaW5fYm90X2ludGVybmFsX3NlcnZlcl9tc2czJyksCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKF90aGlzNC5hcGlfc3RhdHVzX2NvZGUuU1VDQ0VTU0ZVTF9EQl9RVUVSWS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIHRleHQ6IF90aGlzNC50bHQoJ3RyYWluX2JvdF9xc19hZGRlZF9tc2cnKSwKICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgIF90aGlzNC5nZXRfcXVlc3Rpb25zX2xpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczQuYXBpX3N0YXR1c19jb2RlLlFVRVNUSU9OX0VESVRfRkFJTEVELk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgdGV4dDogX3RoaXM0LnRsdCgndHJhaW5fYm90X3FzX2FscmVhZHlfZXhpc3RfbXNnJyksCiAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKF90aGlzNC5hcGlfc3RhdHVzX2NvZGUuUVVFU1RJT05fRURJVF9GQUlMRUQuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczQuYXBpX3N0YXR1c19jb2RlLkVESVRfUVVFU1RJT05fSU5URU5ULk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXM0LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGV4dDogX3RoaXM0LnRsdCgndHJhaW5fYm90X2ludGVybmFsX3NlcnZlcl9tc2c1JyksCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNsb3NlX21vZGFsKCd0cmFpbnRlc3Rfc2F2ZV9idG4nKTsKICAgIH0sCiAgICBpbml0aWFsaXplX3F1ZXN0aW9uc19mb3JfaW50ZW50OiBmdW5jdGlvbiBpbml0aWFsaXplX3F1ZXN0aW9uc19mb3JfaW50ZW50KCkgewogICAgICB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucyA9IFt7CiAgICAgICAgcXVlc3Rpb246IG51bGwKICAgICAgfSwgewogICAgICAgIHF1ZXN0aW9uOiBudWxsCiAgICAgIH0sIHsKICAgICAgICBxdWVzdGlvbjogbnVsbAogICAgICB9LCB7CiAgICAgICAgcXVlc3Rpb246IG51bGwKICAgICAgfSwgewogICAgICAgIHF1ZXN0aW9uOiBudWxsCiAgICAgIH1dOwogICAgfSwKICAgIGRvd25sb2FkX3NhbXBsZTogZnVuY3Rpb24gZG93bmxvYWRfc2FtcGxlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnF1ZXN0aW9uX2ludGVudF9jc3YoKSwgewogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gd2luZG93Lm9wZW4ocmVzcG9uc2UuZGF0YS5DU1ZfVVJMLCAiX2JsYW5rIik7CiAgICAgICAgaWYgKF90aGlzNS5hcGlfc3RhdHVzX2NvZGUuREFUQV9BVkFJTEFCTEUuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICB2YXIgYSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBhLmhyZWYgPSByZXNwb25zZS5kYXRhLkNTVl9VUkw7CiAgICAgICAgICBhLmRvd25sb2FkID0gdHJ1ZTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXM1LmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgIF90aGlzNS4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNsZWFyX2ZpbGVfZGV0YWlsczogZnVuY3Rpb24gY2xlYXJfZmlsZV9kZXRhaWxzKCkgewogICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICB0aGlzLmZpbGVfY29udGVudCA9ICIiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXRHcm91cEZpbGUwMSIpLnZhbHVlID0gIiI7CiAgICB9LAogICAgZmlsZWlucHV0OiBmdW5jdGlvbiBmaWxlaW5wdXQoKSB7CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lOyAvLyB2YXIgZmlsZV9uYW1lID0gdGhpcy5jb21wYW55bmFtZSArICJJbnRlbnRGaWxlLmNzdiI7CiAgICAgIC8vIGlmICh0aGlzLmZpbGVfbGFiZWwgIT0gZmlsZV9uYW1lKSB7CiAgICAgIC8vICAgU3dhbCh7CiAgICAgIC8vICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAvLyAgICAgdGV4dDoKICAgICAgLy8gICAgICAgIlVzZXJzIG5lZWQgdG8gZG93bmxvYWQgdGhlIEludGVudCBGaWxlIGZyb20gJ1VwbG9hZCBDU1YgRmlsZXMnIHBvcC11cC4gQ2hhbmdlcyB0byB0aGlzIGZpbGUgd2lsbCBiZSBhY2NlcHRlZCBieSB0aGUgc3lzdGVtLiIsCiAgICAgIC8vICAgfSk7CiAgICAgIC8vICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgLy8gfSBlbHNlIHsKCiAgICAgIHRoaXMuZmlsZV9jb250ZW50ID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOyAvLyB9CiAgICB9LAogICAgZmlsZV9zdWJtaXQ6IGZ1bmN0aW9uIGZpbGVfc3VibWl0KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB1c2VyX2RldGFpbHMgPSB7CiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5CiAgICAgIH07CiAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkodXNlcl9kZXRhaWxzKTsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbanNvbl0sIHsKICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5maWxlX2xhYmVsID09ICJDaG9vc2UgZmlsZSIpIHt9IGVsc2UgewogICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZkLmFwcGVuZCgiZmlsZSIsIHRoaXMuZmlsZV9jb250ZW50LCB0aGlzLmNvbXBhbnlfbmFtZSArICJRdWVzdGlvbnNGaWxlLmNzdiIpOwogICAgICAgIGZkLmFwcGVuZCgianNvbiIsIGJsb2IpOwogICAgICAgICQoIiNmaWxlX3VwbG9hZCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnRlc3RfaW50ZW50X21vZGVsKCksIGZkLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzNi5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5Nc2cgPT0gIlJlc3VsdHMgd291bGQgYmUgYXZhaWxhYmxlIHNvb24iKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiBfdGhpczYudGx0KCd0cmFpbl9ib3RfZmlsZV9zdWJtaXRfbXNnJyksCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsvLyAkKCcjZmlsZV91cGxvYWQnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiBfdGhpczYudGx0KCd0cmFpbl9ib3RfZXJyb3Jfb2NjdXJfbXNnMScpLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgLy8gJCgnI2ZpbGVfdXBsb2FkJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgICBfdGhpczYuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0R3JvdXBGaWxlMDEiKS52YWx1ZSA9ICIiOwoKICAgICAgICAgICAgICBfdGhpczYubG9hZF9xdWVzdGlvbnNfcmVzcG9uc2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IC8vICQoIiNmaWxlX3VwbG9hZCIpLm1vZGFsKCJoaWRlIik7CgogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICBfdGhpczYuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogX3RoaXM2LnRsdCgndHJhaW5fYm90X2Vycm9yX29jY3VyX21zZzInKSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgIC8vICQoJyNmaWxlX3VwbG9hZCcpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgICAgICAgX3RoaXM2LmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dEdyb3VwRmlsZTAxIikudmFsdWUgPSAiIjsKCiAgICAgICAgICAgICAgX3RoaXM2LmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFnZV9yZXF1aXJlOiBmdW5jdGlvbiBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCgxICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAiLi4ubCIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICB0aGlzLmdldF9xdWVzdGlvbnNfbGlzdCgpOwogICAgICB9CiAgICB9LAogICAgc2V0cGFnaW5hdGlvbjogZnVuY3Rpb24gc2V0cGFnaW5hdGlvbihwYWdlX25vKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheSA9IFtdOwoKICAgICAgaWYgKHRoaXMudG90YWxfcGFnZXMgPD0gNykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gMSkgewogICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCA0OyBfaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaSArIDEpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMpIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwoKICAgICAgICBmb3IgKHZhciBfaTIgPSB0aGlzLnRvdGFsX3BhZ2VzIC0gNDsgX2kyIDwgdGhpcy50b3RhbF9wYWdlczsgX2kyKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pMiArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vIDw9IDQpIHsKICAgICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCBwYWdlX25vICsgMzsgX2kzKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pMyArIDEpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID49IHRoaXMudG90YWxfcGFnZXMgLSA0KSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgICAgZm9yICh2YXIgX2k0ID0gcGFnZV9ubyAtIDQ7IF9pNCA8IHRoaXMudG90YWxfcGFnZXM7IF9pNCsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTQgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgICAgZm9yICh2YXIgX2k1ID0gcGFnZV9ubyAtIDM7IF9pNSA8PSBwYWdlX25vICsgMzsgX2k1KyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIC8vIHRoaXMuJGZ1bGxzY3JlZW4udG9nZ2xlKChkb2N1bWVudC5ib2R5KSwgewogICAgICB0aGlzLiRmdWxsc2NyZWVuLnRvZ2dsZSh0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCIuZGFzaC1jb250IiksIHsKICAgICAgICB3cmFwOiBmYWxzZSwKICAgICAgICBjYWxsYmFjazogdGhpcy5mdWxsc2NyZWVuQ2hhbmdlCiAgICAgIH0pOwogICAgfSwKICAgIGZ1bGxzY3JlZW5DaGFuZ2U6IGZ1bmN0aW9uIGZ1bGxzY3JlZW5DaGFuZ2UoZnVsbHNjcmVlbikgewogICAgICB0aGlzLmZ1bGxzY3JlZW4gPSBmdWxsc2NyZWVuOwogICAgfSwKICAgIHRyYWluX2FuZF90ZXN0X21vZGVsOiBmdW5jdGlvbiB0cmFpbl9hbmRfdGVzdF9tb2RlbCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCd0cmFpbl9ib3Rfc3dhbF9hbGVydF9tc2cnKSwKICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCd0cmFpbl9ib3Rfc3dhbF90cmFpbl9tb2RlbF9tc2cyJyksCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgndHJhaW5fYm90X3N3YWxfY29uZmlybV9tc2cnKSwKICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICBfdGhpczcuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudHJhaW5faW50ZW50X21vZGVsKCksIHsKICAgICAgICAgICAgICBlbWFpbDogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzNy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNy5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXM3LmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzNy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRlc3RfbW9kZWw6IHRydWUKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM3LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzNy53YW50X3N0YXR1cyA9IHRydWU7CgogICAgICAgICAgICAgIF90aGlzNy4kcm9vdC4kZW1pdCgid2FudF9tb2RlbF9zdGF0dXMiLCBfdGhpczcud2FudF9zdGF0dXMpOwoKICAgICAgICAgICAgICBfdGhpczcuY2hlY2tfaW50ZW50X21vZGVsX3N0YXR1cygpOwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IDIwMDAwMDkxKSB7CiAgICAgICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IF90aGlzNy50bHQoJ3RyYWluX2JvdF9yZXN1bHRfYXZhaWxfbXNnJyksCiAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEuTVNHLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAzNTAwCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgey8vICQoJyNmaWxlX3VwbG9hZCcpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IC8vIGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDEwMzQpIHsKICAgICAgICAgICAgICAvLyAgIHN3YWwoewogICAgICAgICAgICAgIC8vICAgICB0aXRsZTogdGhpcy50bHQoJ3RyYWluX2JvdF9tb2RlbF9lcnJvcl9vY2N1cl9tc2cxJyksCiAgICAgICAgICAgICAgLy8gICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEuTVNHLAogICAgICAgICAgICAgIC8vICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIC8vICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgICAvLyAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgIC8vICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgLy8gICAgICAgLy8gJCgnI2ZpbGVfdXBsb2FkJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgICAvLyAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAvLyAgICAgICAvLyB0aGlzLmxvYWRfcXVlc3Rpb25zX3Jlc3BvbnNlKCk7CiAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgICAgIC8vIH0gCiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAvLyAkKCcjZmlsZV91cGxvYWQnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICAgICAgICAgICAgIF90aGlzNy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXRHcm91cEZpbGUwMSIpLnZhbHVlID0gIiI7CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gLy8gJCgiI2ZpbGVfdXBsb2FkIikubW9kYWwoImhpZGUiKTsKCiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgICBfdGhpczcuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICB0aXRsZTogX3RoaXM3LnRsdCgndHJhaW5fYm90X21vZGVsX2Vycm9yX29jY3VyX21zZzMnKSwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAvLyAkKCcjZmlsZV91cGxvYWQnKS5tb2RhbCgnaGlkZScpOwogICAgICAgICAgICAgICAgICBfdGhpczcuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dEdyb3VwRmlsZTAxIikudmFsdWUgPSAiIjsKCiAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkX3F1ZXN0aW9uc19yZXNwb25zZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCgpOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZmlsdGVyX3N0YXR1czogZnVuY3Rpb24gZmlsdGVyX3N0YXR1cygpIHsKICAgICAgaWYgKHRoaXMuZmlsdGVyX3N0YXR1cyA9PT0gJ0ZhaWx1cmUnKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZF9zdGF0dXNsaXN0ID0gWyJGYWlsdXJlIl07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZF9zdGF0dXNsaXN0ID0gWyJTdWNjZXNzIl07CiAgICAgIH0KCiAgICAgIHRoaXMucGFnZV9ubyA9IDE7CiAgICAgIHRoaXMucGVyX3BhZ2UgPSAyMDsKICAgIH0sCiAgICBzZWxlY3RlZF9zdGF0dXNsaXN0OiBmdW5jdGlvbiBzZWxlY3RlZF9zdGF0dXNsaXN0KG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgaWYgKG5ld1ZhbC5sZW5ndGggPT09IDApIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzOC5zZWxlY3RlZF9zdGF0dXNsaXN0ID0gWyJTdWNjZXNzIiwgIkZhaWx1cmUiXTsKCiAgICAgICAgICBfdGhpczguZ2V0X3F1ZXN0aW9uc19saXN0KCk7CiAgICAgICAgfSwgMjAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldF9xdWVzdGlvbnNfbGlzdCgpOwogICAgICB9CiAgICB9LAogICAgY3VycmVudF9zZWxlY3RlZF9pbnRlbnQ6IGZ1bmN0aW9uIGN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50KG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChCb29sZWFuKG9sZFZhbCkgJiYgQm9vbGVhbihuZXdWYWwpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfaW50ZW50X3F1ZXN0aW9ucy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnRfcXVlc3Rpb25zW2ldLmludGVudCA9ICIiLmNvbmNhdCh0aGlzLmNvbXBhbnlfaWQsICJfIikuY29uY2F0KHRoaXMuY3VycmVudF9zZWxlY3RlZF9pbnRlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},null]}