{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js!/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Apps/Tickets.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Apps/Tickets.vue","mtime":1660042032551},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IHsgc2V0VGltZW91dCwgc2V0SW50ZXJ2YWwgfSBmcm9tICJ0aW1lcnMiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvZGF0ZXBpY2tlci5qcyc7CmltcG9ydCAnanF1ZXJ5LXVpL3RoZW1lcy9iYXNlL2FsbC5jc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhpc3RfcmVzcG9uc2VfdGlja2V0X251bTogIiIsCiAgICAgIGhpc3RfcmVzcG9uc2VfdGlja2V0X2lzc3VlOiAiIiwKICAgICAgaGlzdF9yZXNwb25zZV90aWNrZXRfZGVzY3JpcHRpb246IFtdLAogICAgICBoaXN0X3Jlc3BvbnNlX3RpY2tldF9lbWFpbDogW10sCiAgICAgIGhpc3RfcmVzcG9uc2VfdGlja2V0X3JvbGU6IFtdLAogICAgICBoaXN0X3Jlc3BvbnNlX3RpY2tldF9kYXRlOiBbXSwKICAgICAgaGlzdF9yZXNwb25zZV90aWNrZXRfc3RhdHVzOiAiIiwKICAgICAgaGlzdF9yZXNwb25zZV90aWNrZXRfZmlsZW5hbWU6IFtdLAogICAgICBoaXN0X3Jlc3BvbnNlX2NyZWF0ZWRfYnk6ICIiLAogICAgICBlZGl0X2lzc3VlX2Rlc2NyaXB0aW9uOiAiIiwKICAgICAgdmFyX3RpY2tldF9udW1iZXI6ICIiLAogICAgICBzb3J0X3N0YXR1czogIiIsCiAgICAgIHNlbGVjdGVkX3VzZXI6ICIiLAogICAgICBmaWxlX2xhYmVsOiAiQ2hvb3NlIGZpbGUiLAogICAgICBlZGl0X2ZpbGVfbGFiZWw6ICJDaG9vc2UgZmlsZSIsCiAgICAgIGlzc3VlOiAiIiwKICAgICAgaXNzdWVfZGVzY3JpcHRpb246ICIiLAogICAgICBvbGRfZmlsZV9uYW1lOiAiIiwKICAgICAgZWRpdF9vbGRfZmlsZV9uYW1lOiAiIiwKICAgICAgaW1hZ2VfZWRpdDogZmFsc2UsCiAgICAgIGltZ19maWxlOiAiIiwKICAgICAgZWRpdF9pbWdfZmlsZTogIiIsCiAgICAgIGNvbXBhbnluYW1lOiBudWxsLAogICAgICBjb21wYW55aWQ6IG51bGwsCiAgICAgIHNwaW5uZXJPbjogZmFsc2UsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgdG90YWxfcGFnZXM6IG51bGwsCiAgICAgIG51bWJlcl9vZl9yb3dzOiBudWxsLAogICAgICBjcmVhdGVkX2J5X3VzZXJzOiBbXSwKICAgICAgdGlja2V0c19saXN0OiBbXSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgZnJvbV9kYXRlOiB7CiAgICAgICAgc3RyaW5nX3ZhbHVlOiAiIiwKICAgICAgICBvYmplY3Q6IG51bGwKICAgICAgfSwKICAgICAgdG9fZGF0ZTogewogICAgICAgIHN0cmluZ192YWx1ZTogIiIsCiAgICAgICAgb2JqZWN0OiBudWxsCiAgICAgIH0sCiAgICAgIGZpcnN0X25hbWU6ICIiLAogICAgICBsYXN0X25hbWU6ICIiLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKCF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikgJiYgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2Ugc2VsZWN0IGEgY29tcGFueSBuYW1lIGZyb20gdGhlIGRyb3Bkb3duIik7CiAgICB9IGVsc2UgaWYgKHRoaXMudXNlcl9yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpKSB7CiAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQoKICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF90aWNrZXRfc3RhdHVzX3VybCgpLCB7CiAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgIHRvYXN0ci5lcnJvcigiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEubnVtYmVyX29mX3Jvd3M7CiAgICAgICAgX3RoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwoX3RoaXMubnVtYmVyX29mX3Jvd3MgLyBfdGhpcy5wZXJfcGFnZSk7CiAgICAgICAgX3RoaXMudGlja2V0c19saXN0ID0gcmVzcG9uc2UuZGF0YS5UaWNrZXRzOwoKICAgICAgICBmb3IgKHZhciBpIGluIF90aGlzLnRpY2tldHNfbGlzdCkgewogICAgICAgICAgX3RoaXMudGlja2V0c19saXN0W2ldLnNob3J0X2Rlc2NyaXB0aW9uID0gX3RoaXMudGlja2V0c19saXN0W2ldLkRlc2NyaXB0aW9uWzBdLnNsaWNlKDAsIDEwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYXhpb3MucG9zdChhcGlfY2FsbHMuZ2V0X3VzZXJzX2xpc3QoKSwgewogICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICByb2xlOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSwKICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIGlzU2hvdzogdHJ1ZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMuY3JlYXRlZF9ieV91c2VycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIF90aGlzLnNlbGVjdGVkX3VzZXIgPSAiIjsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciB2bSA9IHRoaXM7CiAgICAkKCIjZnJvbV9kYXRlcGlja2VyIikuZGF0ZXBpY2tlcih7CiAgICAgIGRhdGVGb3JtYXQ6ICJkZC1tbS15eSIsCiAgICAgIC8vIG9uQ2xvc2U6IChkYXRlVGV4dCwgaW5zdCkgPT4gewogICAgICAvLyAgIHZtLmZyb21fZGF0ZS5vYmplY3QgPSBpbnN0OwogICAgICAvLyAgIGlmICh2bS5kYXRlX2NvbmRpdGlvbigpID09IHRydWUpIHsKICAgICAgLy8gICAgIHZtLnRpY2tldF9zdGF0dXMoKTsKICAgICAgLy8gICB9IGVsc2UgewogICAgICAvLyAgICAgdG9hc3RyLmVycm9yKCJGcm9tIERhdGUgc2hvdWxkIGJlIGxlc3NlciB0aGFuIHRoZSBUbyBEYXRlLiIpOwogICAgICAvLyAgIH0KICAgICAgLy8gfSwKICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGRhdGVUZXh0LCBpbnN0KSB7CiAgICAgICAgdm0uZnJvbV9kYXRlLm9iamVjdCA9IGluc3Q7CiAgICAgICAgdm0uZnJvbV9kYXRlLnN0cmluZ192YWx1ZSA9IGRhdGVUZXh0OwoKICAgICAgICBpZiAodm0uZGF0ZV9jb25kaXRpb24oKSA9PSB0cnVlKSB7CiAgICAgICAgICB2bS50aWNrZXRfc3RhdHVzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiRnJvbSBEYXRlIHNob3VsZCBiZSBsZXNzZXIgdGhhbiB0aGUgVG8gRGF0ZS4iKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgJCgiI3RvX2RhdGVwaWNrZXIiKS5kYXRlcGlja2VyKHsKICAgICAgZGF0ZUZvcm1hdDogImRkLW1tLXl5IiwKICAgICAgLy8gb25DbG9zZTogKGRhdGVUZXh0LCBpbnN0KSA9PiB7CiAgICAgIC8vICAgdm0udG9fZGF0ZS5vYmplY3QgPSBpbnN0OwogICAgICAvLyAgIGlmICh2bS5kYXRlX2NvbmRpdGlvbigpID09IHRydWUpIHsKICAgICAgLy8gICAgIHZtLnRpY2tldF9zdGF0dXMoKTsKICAgICAgLy8gICB9IGVsc2UgewogICAgICAvLyAgICAgdG9hc3RyLmVycm9yKCJGcm9tIERhdGUgc2hvdWxkIGJlIGxlc3NlciB0aGFuIHRoZSBUbyBEYXRlLiIpOwogICAgICAvLyAgIH0KICAgICAgLy8gICBjb25zb2xlLmxvZygndG8nKTsKICAgICAgLy8gfSwKICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGRhdGVUZXh0LCBpbnN0KSB7CiAgICAgICAgdm0udG9fZGF0ZS5vYmplY3QgPSBpbnN0OwogICAgICAgIHZtLnRvX2RhdGUuc3RyaW5nX3ZhbHVlID0gZGF0ZVRleHQ7CgogICAgICAgIGlmICh2bS5kYXRlX2NvbmRpdGlvbigpID09IHRydWUpIHsKICAgICAgICAgIHZtLnRpY2tldF9zdGF0dXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJGcm9tIERhdGUgc2hvdWxkIGJlIGxlc3NlciB0aGFuIHRoZSBUbyBEYXRlLiIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICAkKCIjdGlja2V0bW9kYWwiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgdm0uY2xlYXJfZmllbGRzKCk7CiAgICB9KTsKICAgICQoIiNzZWxlY3RhbGwiKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgkKHRoaXMpLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm0uY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLnJhaXNlX3RpY2tldCA9PSAiVHJ1ZSIpIHsKICAgICAgJCgiI3RpY2tldG1vZGFsIikubW9kYWwoInNob3ciKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRpY2tldF9oaXN0b3J5OiBmdW5jdGlvbiB0aWNrZXRfaGlzdG9yeShpbmRleCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF90aWNrZXRfaGlzdG9yeSgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIHRpY2tldF9udW1iZXI6IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5OdW1iZXIsCiAgICAgICAgdXNlcl9yb2xlOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgfSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAkKCIjdGlja2V0aGlzdG9yeW1vZGVsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4iKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLmhpc3RfcmVzcG9uc2VfdGlja2V0X251bSA9IHJlc3BvbnNlLmRhdGEuVGlja2V0TnVtYmVyOwogICAgICAgICAgX3RoaXMyLmhpc3RfcmVzcG9uc2VfdGlja2V0X2lzc3VlID0gcmVzcG9uc2UuZGF0YS5UaWNrZXRJc3N1ZTsKICAgICAgICAgIF90aGlzMi5oaXN0X3Jlc3BvbnNlX3RpY2tldF9kYXRlID0gcmVzcG9uc2UuZGF0YS5VcGRhdGVkRGF0ZTsKICAgICAgICAgIF90aGlzMi5oaXN0X3Jlc3BvbnNlX3RpY2tldF9yb2xlID0gcmVzcG9uc2UuZGF0YS5Sb2xlOwogICAgICAgICAgX3RoaXMyLmhpc3RfcmVzcG9uc2VfdGlja2V0X2VtYWlsID0gcmVzcG9uc2UuZGF0YS5VcGRhdGVkQnk7CiAgICAgICAgICBfdGhpczIuaGlzdF9yZXNwb25zZV90aWNrZXRfc3RhdHVzID0gcmVzcG9uc2UuZGF0YS5TdGF0dXM7CiAgICAgICAgICBfdGhpczIuaGlzdF9yZXNwb25zZV9jcmVhdGVkX2J5ID0gcmVzcG9uc2UuZGF0YS5DcmVhdGVkRGF0ZTsKICAgICAgICAgIF90aGlzMi5oaXN0X3Jlc3BvbnNlX3RpY2tldF9kZXNjcmlwdGlvbiA9IHJlc3BvbnNlLmRhdGEuRGVzY3JpcHRpb247CiAgICAgICAgICBfdGhpczIuaGlzdF9yZXNwb25zZV90aWNrZXRfZmlsZW5hbWUgPSByZXNwb25zZS5kYXRhLmZpbGV1cmw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0aWNrZXRfZWRpdDogZnVuY3Rpb24gdGlja2V0X2VkaXQoaW5kZXgpIHsKICAgICAgdGhpcy52YXJfdGlja2V0X251bWJlciA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5OdW1iZXI7CiAgICAgIHRoaXMuaXNzdWVfZGVzY3JpcHRpb24gPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uRGVzY3JpcHRpb25bMF07CiAgICAgIHRoaXMub2xkX2ZpbGVfbmFtZSA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5GaWxldXJsLnNsaWNlKC0xKVswXS5zbGljZSg2Mik7CiAgICAgIHRoaXMuaXNzdWUgPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uSXNzdWU7CiAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKICAgIH0sCiAgICBlZGl0X3Byb2ZpbGU6IGZ1bmN0aW9uIGVkaXRfcHJvZmlsZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5maXJzdF9uYW1lID09ICIiIHx8IHRoaXMubGFzdF9uYW1lID09ICIiKSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgZW50ZXIgYWxsIHRoZSBmaWVsZHMuIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmVkaXRfcHJvZmlsZV91cmwoKSwgewogICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgZmlyc3RfbmFtZTogdGhpcy5maXJzdF9uYW1lLAogICAgICAgICAgbGFzdF9uYW1lOiB0aGlzLmxhc3RfbmFtZSwKICAgICAgICAgIGNvdW50cnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvdW50cnlfbmFtZSwKICAgICAgICAgIHBob25lX251bWJlcjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnBob25lX25vCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiUHJvZmlsZSBVcGRhdGVkIikgewogICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiWW91ciBwcm9maWxlIGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiIpOwoKICAgICAgICAgICAgX3RoaXMzLiRzZXNzaW9uLnNldCgiVXNlckZpcnN0TmFtZSIsIF90aGlzMy5maXJzdF9uYW1lKTsKCiAgICAgICAgICAgIF90aGlzMy4kc2Vzc2lvbi5zZXQoIlVzZXJMYXN0TmFtZSIsIF90aGlzMy5sYXN0X25hbWUpOwogICAgICAgICAgfQoKICAgICAgICAgICQoIiNuYW1lX2VkaXQiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgJCgiI3RpY2tldG1vZGFsIikubW9kYWwoInNob3ciKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGRhdGVfY29uZGl0aW9uOiBmdW5jdGlvbiBkYXRlX2NvbmRpdGlvbigpIHsKICAgICAgdmFyIGZyb21fb2JqZWN0ID0gdGhpcy5mcm9tX2RhdGUub2JqZWN0OwogICAgICB2YXIgdG9fb2JqZWN0ID0gdGhpcy50b19kYXRlLm9iamVjdDsKICAgICAgY29uc29sZS5sb2codGhpcy5mcm9tX2RhdGUpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnRvX2RhdGUpOwoKICAgICAgaWYgKGZyb21fb2JqZWN0ICE9PSBudWxsICYmIHRvX29iamVjdCAhPT0gbnVsbCkgewogICAgICAgIGlmICh0b19vYmplY3QuY3VycmVudFllYXIgPiBmcm9tX29iamVjdC5jdXJyZW50WWVhcikgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmICh0b19vYmplY3QuY3VycmVudFllYXIgPT0gZnJvbV9vYmplY3QuY3VycmVudFllYXIpIHsKICAgICAgICAgIGlmICh0b19vYmplY3QuY3VycmVudE1vbnRoID4gZnJvbV9vYmplY3QuY3VycmVudE1vbnRoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmICh0b19vYmplY3QuY3VycmVudE1vbnRoID09IGZyb21fb2JqZWN0LmN1cnJlbnRNb250aCkgewogICAgICAgICAgICBpZiAoTnVtYmVyKHRvX29iamVjdC5jdXJyZW50RGF5KSA+PSBOdW1iZXIoZnJvbV9vYmplY3QuY3VycmVudERheSkpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIGlmIChmcm9tX29iamVjdCA9PT0gbnVsbCAmJiB0b19vYmplY3QgPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvLyB0aWNrZXRfc3RhdHVzKCkgewogICAgLy8gICBpZiAodGhpcy5zb3J0X3N0YXR1cyA9PSAiIiAmJiB0aGlzLnNlbGVjdGVkX3VzZXIgIT09ICIiKSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJzEnKTsKICAgIC8vICAgICBheGlvcwogICAgLy8gICAgICAgLnBvc3QoYXBpX2NhbGxzLmdldF90aWNrZXRfc3RhdHVzX3VybCgpLCB7CiAgICAvLyAgICAgICAgIGZyb21fZGF0ZTogbnVsbCwKICAgIC8vICAgICAgICAgdG9fZGF0ZTogbnVsbCwKICAgIC8vICAgICAgICAgc3RhdHVzOiBudWxsLAogICAgLy8gICAgICAgICBzb3J0OiBmYWxzZSwKICAgIC8vICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgIC8vICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICB1c2VyX3JvbGVfZW1haWw6IHRoaXMuc2VsZWN0ZWRfdXNlcgogICAgLy8gICAgICAgfSkKICAgIC8vICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgIC8vICAgICAgICAgdGhpcy50aWNrZXRzX2xpc3QgPSByZXNwb25zZS5kYXRhLlRpY2tldHM7CiAgICAvLyAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLm51bWJlcl9vZl9yb3dzOwogICAgLy8gICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnRpY2tldHNfbGlzdCkgewogICAgLy8gICAgICAgICAgIHRoaXMudGlja2V0c19saXN0W2ldLnNob3J0X2Rlc2NyaXB0aW9uID0gdGhpcy50aWNrZXRzX2xpc3RbCiAgICAvLyAgICAgICAgICAgICBpCiAgICAvLyAgICAgICAgICAgXS5EZXNjcmlwdGlvblswXS5zbGljZSgwLCAxMCk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgIH0pOwogICAgLy8gICB9IGVsc2UgaWYgKHRoaXMuc29ydF9zdGF0dXMgIT09ICIiICYmIHRoaXMuc2VsZWN0ZWRfdXNlciA9PSAiIikgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCcyJyk7CiAgICAvLyAgICAgYXhpb3MKICAgIC8vICAgICAgIC5wb3N0KGFwaV9jYWxscy5nZXRfdGlja2V0X3N0YXR1c191cmwoKSwgewogICAgLy8gICAgICAgICBmcm9tX2RhdGU6IG51bGwsCiAgICAvLyAgICAgICAgIHRvX2RhdGU6IG51bGwsCiAgICAvLyAgICAgICAgIHN0YXR1czogdGhpcy5zb3J0X3N0YXR1cywKICAgIC8vICAgICAgICAgc29ydDogZmFsc2UsCiAgICAvLyAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgdXNlcl9yb2xlX2VtYWlsOiBudWxsCiAgICAvLyAgICAgICB9KQogICAgLy8gICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgLy8gICAgICAgICB0aGlzLnRpY2tldHNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuVGlja2V0czsKICAgIC8vICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEubnVtYmVyX29mX3Jvd3M7CiAgICAvLyAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwodGhpcy5udW1iZXJfb2Zfcm93cyAvIHRoaXMucGVyX3BhZ2UpOwogICAgLy8gICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGlja2V0c19saXN0KSB7CiAgICAvLyAgICAgICAgICAgdGhpcy50aWNrZXRzX2xpc3RbaV0uc2hvcnRfZGVzY3JpcHRpb24gPSB0aGlzLnRpY2tldHNfbGlzdFsKICAgIC8vICAgICAgICAgICAgIGkKICAgIC8vICAgICAgICAgICBdLkRlc2NyaXB0aW9uWzBdLnNsaWNlKDAsIDEwKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgLy8gICAgICAgfSk7CiAgICAvLyAgIH0gZWxzZSBpZiAodGhpcy5zb3J0X3N0YXR1cyAhPT0gIiIgJiYgdGhpcy5zZWxlY3RlZF91c2VyICE9PSAiIikgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCczJyk7CiAgICAvLyAgICAgYXhpb3MKICAgIC8vICAgICAgIC5wb3N0KGFwaV9jYWxscy5nZXRfdGlja2V0X3N0YXR1c191cmwoKSwgewogICAgLy8gICAgICAgICBmcm9tX2RhdGU6IG51bGwsCiAgICAvLyAgICAgICAgIHRvX2RhdGU6IG51bGwsCiAgICAvLyAgICAgICAgIHN0YXR1czogdGhpcy5zb3J0X3N0YXR1cywKICAgIC8vICAgICAgICAgc29ydDogZmFsc2UsCiAgICAvLyAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgdXNlcl9yb2xlX2VtYWlsOiB0aGlzLnNlbGVjdGVkX3VzZXIKICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAvLyAgICAgICAgIHRoaXMudGlja2V0c19saXN0ID0gcmVzcG9uc2UuZGF0YS5UaWNrZXRzOwogICAgLy8gICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5udW1iZXJfb2Zfcm93czsKICAgIC8vICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IE1hdGguY2VpbCh0aGlzLm51bWJlcl9vZl9yb3dzIC8gdGhpcy5wZXJfcGFnZSk7CiAgICAvLyAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50aWNrZXRzX2xpc3QpIHsKICAgIC8vICAgICAgICAgICB0aGlzLnRpY2tldHNfbGlzdFtpXS5zaG9ydF9kZXNjcmlwdGlvbiA9IHRoaXMudGlja2V0c19saXN0WwogICAgLy8gICAgICAgICAgICAgaQogICAgLy8gICAgICAgICAgIF0uRGVzY3JpcHRpb25bMF0uc2xpY2UoMCwgMTApOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfSBlbHNlIGlmICgKICAgIC8vICAgICB0aGlzLmRhdGVfY29uZGl0aW9uKCkgPT0gZmFsc2UgJiYKICAgIC8vICAgICB0aGlzLnNvcnRfc3RhdHVzID09ICIiICYmCiAgICAvLyAgICAgdGhpcy5zZWxlY3RlZF91c2VyID09ICIiCiAgICAvLyAgICkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCc0Jyk7CiAgICAvLyAgICAgYXhpb3MKICAgIC8vICAgICAgIC5wb3N0KGFwaV9jYWxscy5nZXRfdGlja2V0X3N0YXR1c191cmwoKSwgewogICAgLy8gICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAvLyAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubwogICAgLy8gICAgICAgfSkKICAgIC8vICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgIC8vICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgIC8vICAgICAgICAgICB0b2FzdHIuZXJyb3IoCiAgICAvLyAgICAgICAgICAgICAiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iCiAgICAvLyAgICAgICAgICAgKTsKICAgIC8vICAgICAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5udW1iZXJfb2Zfcm93czsKICAgIC8vICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgIC8vICAgICAgICAgICB0aGlzLnRpY2tldHNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuVGlja2V0czsKICAgIC8vICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGlja2V0c19saXN0KSB7CiAgICAvLyAgICAgICAgICAgICB0aGlzLnRpY2tldHNfbGlzdFtpXS5zaG9ydF9kZXNjcmlwdGlvbiA9IHRoaXMudGlja2V0c19saXN0WwogICAgLy8gICAgICAgICAgICAgICBpCiAgICAvLyAgICAgICAgICAgICBdLkRlc2NyaXB0aW9uWzBdLnNsaWNlKDAsIDEwKTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pOwogICAgLy8gICB9IGVsc2UgaWYgKAogICAgLy8gICAgIHRoaXMuZGF0ZV9jb25kaXRpb24oKSA9PSB0cnVlICYmCiAgICAvLyAgICAgdGhpcy5zb3J0X3N0YXR1cyA9PSAiIiAmJgogICAgLy8gICAgIHRoaXMuc2VsZWN0ZWRfdXNlciAhPT0gIiIKICAgIC8vICAgKSB7CiAgICAvLyAgICAgY29uc29sZS5sb2coJzUnKTsKICAgIC8vICAgICB2YXIgZnJvbV9vYmplY3QgPSBuZXcgRGF0ZSgKICAgIC8vICAgICAgIHRoaXMuZnJvbV9kYXRlLm9iamVjdC5zZWxlY3RlZFllYXIsCiAgICAvLyAgICAgICB0aGlzLmZyb21fZGF0ZS5vYmplY3Quc2VsZWN0ZWRNb250aCwKICAgIC8vICAgICAgIE51bWJlcih0aGlzLmZyb21fZGF0ZS5vYmplY3Quc2VsZWN0ZWREYXkpICsgMQogICAgLy8gICAgICk7CiAgICAvLyAgICAgdmFyIHRvX29iamVjdCA9IG5ldyBEYXRlKAogICAgLy8gICAgICAgdGhpcy50b19kYXRlLm9iamVjdC5zZWxlY3RlZFllYXIsCiAgICAvLyAgICAgICB0aGlzLnRvX2RhdGUub2JqZWN0LnNlbGVjdGVkTW9udGgsCiAgICAvLyAgICAgICBOdW1iZXIodGhpcy50b19kYXRlLm9iamVjdC5zZWxlY3RlZERheSkgKyAxCiAgICAvLyAgICAgKTsKICAgIC8vICAgICBheGlvcwogICAgLy8gICAgICAgLnBvc3QoYXBpX2NhbGxzLmdldF90aWNrZXRfc3RhdHVzX3VybCgpLCB7CiAgICAvLyAgICAgICAgIGZyb21fZGF0ZTogZnJvbV9vYmplY3QsCiAgICAvLyAgICAgICAgIHRvX2RhdGU6IHRvX29iamVjdCwKICAgIC8vICAgICAgICAgc3RhdHVzOiBudWxsLAogICAgLy8gICAgICAgICBzb3J0OiB0cnVlLAogICAgLy8gICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAvLyAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgIC8vICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgIC8vICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICAgIHVzZXJfcm9sZV9lbWFpbDogdGhpcy5zZWxlY3RlZF91c2VyCiAgICAvLyAgICAgICB9KQogICAgLy8gICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgLy8gICAgICAgICB0aGlzLnRpY2tldHNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuVGlja2V0czsKICAgIC8vICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEubnVtYmVyX29mX3Jvd3M7CiAgICAvLyAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwodGhpcy5udW1iZXJfb2Zfcm93cyAvIHRoaXMucGVyX3BhZ2UpOwogICAgLy8gICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGlja2V0c19saXN0KSB7CiAgICAvLyAgICAgICAgICAgdGhpcy50aWNrZXRzX2xpc3RbaV0uc2hvcnRfZGVzY3JpcHRpb24gPSB0aGlzLnRpY2tldHNfbGlzdFsKICAgIC8vICAgICAgICAgICAgIGkKICAgIC8vICAgICAgICAgICBdLkRlc2NyaXB0aW9uWzBdLnNsaWNlKDAsIDEwKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgLy8gICAgICAgfSk7CiAgICAvLyAgIH0gZWxzZSBpZiAoCiAgICAvLyAgICAgdGhpcy5kYXRlX2NvbmRpdGlvbigpID09IHRydWUgJiYKICAgIC8vICAgICB0aGlzLnNvcnRfc3RhdHVzICE9PSAiIiAmJgogICAgLy8gICAgIHRoaXMuc2VsZWN0ZWRfdXNlciA9PSAiIgogICAgLy8gICApIHsKICAgIC8vICAgICBjb25zb2xlLmxvZygnNicpOwogICAgLy8gICAgIHZhciBmcm9tX29iamVjdCA9IG5ldyBEYXRlKAogICAgLy8gICAgICAgdGhpcy5mcm9tX2RhdGUub2JqZWN0LnNlbGVjdGVkWWVhciwKICAgIC8vICAgICAgIHRoaXMuZnJvbV9kYXRlLm9iamVjdC5zZWxlY3RlZE1vbnRoLAogICAgLy8gICAgICAgTnVtYmVyKHRoaXMuZnJvbV9kYXRlLm9iamVjdC5zZWxlY3RlZERheSkgKyAxCiAgICAvLyAgICAgKTsKICAgIC8vICAgICB2YXIgdG9fb2JqZWN0ID0gbmV3IERhdGUoCiAgICAvLyAgICAgICB0aGlzLnRvX2RhdGUub2JqZWN0LnNlbGVjdGVkWWVhciwKICAgIC8vICAgICAgIHRoaXMudG9fZGF0ZS5vYmplY3Quc2VsZWN0ZWRNb250aCwKICAgIC8vICAgICAgIE51bWJlcih0aGlzLnRvX2RhdGUub2JqZWN0LnNlbGVjdGVkRGF5KSArIDEKICAgIC8vICAgICApOwogICAgLy8gICAgIGF4aW9zCiAgICAvLyAgICAgICAucG9zdChhcGlfY2FsbHMuZ2V0X3RpY2tldF9zdGF0dXNfdXJsKCksIHsKICAgIC8vICAgICAgICAgZnJvbV9kYXRlOiBmcm9tX29iamVjdCwKICAgIC8vICAgICAgICAgdG9fZGF0ZTogdG9fb2JqZWN0LAogICAgLy8gICAgICAgICBzdGF0dXM6IHRoaXMuc29ydF9zdGF0dXMsCiAgICAvLyAgICAgICAgIHNvcnQ6IHRydWUsCiAgICAvLyAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgIC8vICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgdXNlcl9yb2xlX2VtYWlsOiBudWxsCiAgICAvLyAgICAgICB9KQogICAgLy8gICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgLy8gICAgICAgICB0aGlzLnRpY2tldHNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuVGlja2V0czsKICAgIC8vICAgICAgICAgdGhpcy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEubnVtYmVyX29mX3Jvd3M7CiAgICAvLyAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSBNYXRoLmNlaWwodGhpcy5udW1iZXJfb2Zfcm93cyAvIHRoaXMucGVyX3BhZ2UpOwogICAgLy8gICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGlja2V0c19saXN0KSB7CiAgICAvLyAgICAgICAgICAgdGhpcy50aWNrZXRzX2xpc3RbaV0uc2hvcnRfZGVzY3JpcHRpb24gPSB0aGlzLnRpY2tldHNfbGlzdFsKICAgIC8vICAgICAgICAgICAgIGkKICAgIC8vICAgICAgICAgICBdLkRlc2NyaXB0aW9uWzBdLnNsaWNlKDAsIDEwKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgLy8gICAgICAgfSk7CiAgICAvLyAgIH0gZWxzZSBpZiAoCiAgICAvLyAgICAgdGhpcy5kYXRlX2NvbmRpdGlvbigpID09IHRydWUgJiYKICAgIC8vICAgICB0aGlzLnNvcnRfc3RhdHVzID09ICIiICYmCiAgICAvLyAgICAgdGhpcy5zZWxlY3RlZF91c2VyID09ICIiCiAgICAvLyAgICkgewogICAgLy8gICAgIGNvbnNvbGUubG9nKCc3Jyk7CiAgICAvLyAgICAgdmFyIGZyb21fb2JqZWN0ID0gbmV3IERhdGUoCiAgICAvLyAgICAgICB0aGlzLmZyb21fZGF0ZS5vYmplY3Quc2VsZWN0ZWRZZWFyLAogICAgLy8gICAgICAgdGhpcy5mcm9tX2RhdGUub2JqZWN0LnNlbGVjdGVkTW9udGgsCiAgICAvLyAgICAgICBOdW1iZXIodGhpcy5mcm9tX2RhdGUub2JqZWN0LnNlbGVjdGVkRGF5KSArIDEKICAgIC8vICAgICApOwogICAgLy8gICAgIHZhciB0b19vYmplY3QgPSBuZXcgRGF0ZSgKICAgIC8vICAgICAgIHRoaXMudG9fZGF0ZS5vYmplY3Quc2VsZWN0ZWRZZWFyLAogICAgLy8gICAgICAgdGhpcy50b19kYXRlLm9iamVjdC5zZWxlY3RlZE1vbnRoLAogICAgLy8gICAgICAgTnVtYmVyKHRoaXMudG9fZGF0ZS5vYmplY3Quc2VsZWN0ZWREYXkpICsgMQogICAgLy8gICAgICk7CiAgICAvLyAgICAgYXhpb3MKICAgIC8vICAgICAgIC5wb3N0KGFwaV9jYWxscy5nZXRfdGlja2V0X3N0YXR1c191cmwoKSwgewogICAgLy8gICAgICAgICBmcm9tX2RhdGU6IGZyb21fb2JqZWN0LAogICAgLy8gICAgICAgICB0b19kYXRlOiB0b19vYmplY3QsCiAgICAvLyAgICAgICAgIHN0YXR1czogdGhpcy5zb3J0X3N0YXR1cywKICAgIC8vICAgICAgICAgc29ydDogdHJ1ZSwKICAgIC8vICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgIC8vICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICB1c2VyX3JvbGVfZW1haWw6IHRoaXMuc2VsZWN0ZWRfdXNlcgogICAgLy8gICAgICAgfSkKICAgIC8vICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgIC8vICAgICAgICAgdGhpcy50aWNrZXRzX2xpc3QgPSByZXNwb25zZS5kYXRhLlRpY2tldHM7CiAgICAvLyAgICAgICAgIHRoaXMubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLm51bWJlcl9vZl9yb3dzOwogICAgLy8gICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKHRoaXMubnVtYmVyX29mX3Jvd3MgLyB0aGlzLnBlcl9wYWdlKTsKICAgIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnRpY2tldHNfbGlzdCkgewogICAgLy8gICAgICAgICAgIHRoaXMudGlja2V0c19saXN0W2ldLnNob3J0X2Rlc2NyaXB0aW9uID0gdGhpcy50aWNrZXRzX2xpc3RbCiAgICAvLyAgICAgICAgICAgICBpCiAgICAvLyAgICAgICAgICAgXS5EZXNjcmlwdGlvblswXS5zbGljZSgwLCAxMCk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgIH0pOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy9oYXJzaAogICAgdGlja2V0X3N0YXR1czogZnVuY3Rpb24gdGlja2V0X3N0YXR1cygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgaXNzb3J0ID0gZmFsc2U7CiAgICAgIHZhciBpc3NlbGVjdGVkdXNlciA9IG51bGw7CiAgICAgIHZhciBpc3NvcnRzdGF0dXMgPSBudWxsOwogICAgICB2YXIgaXN0b19kYXRlID0gbnVsbDsKICAgICAgdmFyIGlzZnJvbV9kYXRlID0gbnVsbDsKCiAgICAgIGlmICh0aGlzLmRhdGVfY29uZGl0aW9uKCkgPT0gdHJ1ZSAmJiB0aGlzLmZyb21fZGF0ZS5vYmplY3QgIT0gbnVsbCkgewogICAgICAgIGlzc29ydCA9IHRydWU7CiAgICAgICAgaXNmcm9tX2RhdGUgPSBuZXcgRGF0ZSh0aGlzLmZyb21fZGF0ZS5vYmplY3Quc2VsZWN0ZWRZZWFyLCB0aGlzLmZyb21fZGF0ZS5vYmplY3Quc2VsZWN0ZWRNb250aCwgTnVtYmVyKHRoaXMuZnJvbV9kYXRlLm9iamVjdC5zZWxlY3RlZERheSkgKyAxKTsKICAgICAgICBpc3RvX2RhdGUgPSBuZXcgRGF0ZSh0aGlzLnRvX2RhdGUub2JqZWN0LnNlbGVjdGVkWWVhciwgdGhpcy50b19kYXRlLm9iamVjdC5zZWxlY3RlZE1vbnRoLCBOdW1iZXIodGhpcy50b19kYXRlLm9iamVjdC5zZWxlY3RlZERheSkgKyAxKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRfdXNlciAhPSAiIikgewogICAgICAgIGlzc2VsZWN0ZWR1c2VyID0gdGhpcy5zZWxlY3RlZF91c2VyOwogICAgICB9CgogICAgICBpZiAodGhpcy5zb3J0X3N0YXR1cyAhPSAiIikgewogICAgICAgIGlzc29ydHN0YXR1cyA9IHRoaXMuc29ydF9zdGF0dXM7CiAgICAgIH0KCiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF90aWNrZXRfc3RhdHVzX3VybCgpLCB7CiAgICAgICAgZnJvbV9kYXRlOiBpc2Zyb21fZGF0ZSwKICAgICAgICB0b19kYXRlOiBpc3RvX2RhdGUsCiAgICAgICAgc3RhdHVzOiBpc3NvcnRzdGF0dXMsCiAgICAgICAgc29ydDogaXNzb3J0LAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgdXNlcl9yb2xlX2VtYWlsOiBpc3NlbGVjdGVkdXNlcgogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LnRpY2tldHNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuVGlja2V0czsKICAgICAgICBfdGhpczQubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLm51bWJlcl9vZl9yb3dzOwogICAgICAgIF90aGlzNC50b3RhbF9wYWdlcyA9IE1hdGguY2VpbChfdGhpczQubnVtYmVyX29mX3Jvd3MgLyBfdGhpczQucGVyX3BhZ2UpOwoKICAgICAgICBmb3IgKHZhciBpIGluIF90aGlzNC50aWNrZXRzX2xpc3QpIHsKICAgICAgICAgIF90aGlzNC50aWNrZXRzX2xpc3RbaV0uc2hvcnRfZGVzY3JpcHRpb24gPSBfdGhpczQudGlja2V0c19saXN0W2ldLkRlc2NyaXB0aW9uWzBdLnNsaWNlKDAsIDEwKTsKICAgICAgICB9CgogICAgICAgIF90aGlzNC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8KICAgIHNlbGVjdGVkX3RpY2tldHM6IGZ1bmN0aW9uIHNlbGVjdGVkX3RpY2tldHMoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09ICJhbGwiKSB7CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IHRoaXMudGlja2V0c19saXN0OwogICAgICAgIH0gZWxzZSBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgdmFyIHZhbF9pbmRleCA9IHRoaXMuY2hlY2tlZF9saXN0LmluZGV4T2YodGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdKTsKICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdOwoKICAgICAgICAgIGlmICh2YWxfaW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IGZhbHNlKSB7CiAgICAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwoKICAgICAgICAgIGlmIChzZWxlY3RhbGwuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIHNlbGVjdGFsbC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLmNoZWNrZWRfbGlzdC5maWx0ZXIoZnVuY3Rpb24gKHRpY2tldHNfbGlzdCkgewogICAgICAgICAgICByZXR1cm4gdGlja2V0c19saXN0LnRpY2tldHNfbGlzdCAhPT0gaW5kZXg7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gdGVtcDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0aWNrZXRfcHJvZ3Jlc3NfY2hhbmdlZDogZnVuY3Rpb24gdGlja2V0X3Byb2dyZXNzX2NoYW5nZWQoaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgc3RhdHVzID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGRhdGVfdGlja2V0X3N0YXR1c191cmwoKSwgewogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgdGlja2V0X3N0YXR1czogc3RhdHVzLAogICAgICAgIHRpY2tldF9udW1iZXI6IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5OdW1iZXIKICAgICAgfSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiVGlja2V0IHN0YXR1cyB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgX3RoaXM1LnRpY2tldF9zdGF0dXMgPSBzdGF0dXM7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgIH0sIDI1MDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlX3NpbmdsZTogZnVuY3Rpb24gZGVsZXRlX3NpbmdsZShpbmRleCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdGlja2V0bGlzdCA9IFtdOwogICAgICB2YXIgaW1nbGlzdCA9IFtdOwogICAgICB0aWNrZXRsaXN0LnB1c2godGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLk51bWJlcik7CiAgICAgIGltZ2xpc3QucHVzaCh0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uRmlsZXVybCk7CiAgICAgIHRoaXMuZGVsZXRlX3RpY2tldF9hcGkodGlja2V0bGlzdCwgaW1nbGlzdCk7CiAgICB9LAogICAgZGVsZXRlX3NlbGVjdGVkOiBmdW5jdGlvbiBkZWxldGVfc2VsZWN0ZWQoKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB0aWNrZXRsaXN0ID0gW107CiAgICAgIHZhciBpbWdsaXN0ID0gW107CgogICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2hlY2tlZF9saXN0KSB7CiAgICAgICAgdGlja2V0bGlzdC5wdXNoKHRoaXMuY2hlY2tlZF9saXN0W2ldLk51bWJlcik7CiAgICAgICAgaW1nbGlzdC5wdXNoKHRoaXMuY2hlY2tlZF9saXN0W2ldLkZpbGV1cmwpOwogICAgICB9CgogICAgICB0aGlzLmRlbGV0ZV90aWNrZXRfYXBpKHRpY2tldGxpc3QsIGltZ2xpc3QpOwogICAgfSwKICAgIGRlbGV0ZV90aWNrZXRfYXBpOiBmdW5jdGlvbiBkZWxldGVfdGlja2V0X2FwaSh0aWNrZXRsaXN0LCBpbWdsaXN0KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyEiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5kZWxldGVfdGlja2V0X3VybCgpLCB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM2LmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczYuY29tcGFueWlkLAogICAgICAgICAgICBlbWFpbDogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgdGlja2V0X251bWJlcjogdGlja2V0bGlzdCwKICAgICAgICAgICAgaW1hZ2VfdXJsOiBpbWdsaXN0CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzNi4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlRpY2tldCBkZWxldGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXM2LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJUaGVyZSB3YXMgYW4gaW50ZXJuYWwgc2VydmVyIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluLiIpOwogICAgICAgICAgICAgIF90aGlzNi5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0aWNrZXRfbnVtYmVyOiBmdW5jdGlvbiB0aWNrZXRfbnVtYmVyKCkgewogICAgICB2YXIgcmFuZG9tX251bSA9IE1hdGguZmxvb3IoMTAwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDAwKTsKICAgICAgdmFyIGNvbXBhbnkgPSB0aGlzLmNvbXBhbnluYW1lLnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCk7CiAgICAgIHJldHVybiBjb21wYW55ICsgIl8iICsgcmFuZG9tX251bTsKICAgIH0sCiAgICB0aWNrZXRfc3VibWl0OiBmdW5jdGlvbiB0aWNrZXRfc3VibWl0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAodGhpcy5pc3N1ZSA9PSAiIiB8fCB0aGlzLmlzc3VlX2Rlc2NyaXB0aW9uID09ICIiKSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgZGVzY3JpYmUgdGhlIGlzc3VlIHlvdSBhcmUgZmFjaW5nLi4uIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwoKICAgICAgICBpZiAodGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmZpcnN0X25hbWUgIT0gbnVsbCAmJiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGFzdF9uYW1lICE9IG51bGwgfHwgdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJGaXJzdE5hbWUiKSkgewogICAgICAgICAgdmFyIG5hbWU7CgogICAgICAgICAgaWYgKHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5maXJzdF9uYW1lICE9IG51bGwpIHsKICAgICAgICAgICAgbmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5maXJzdF9uYW1lICsgIiAiICsgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxhc3RfbmFtZTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJGaXJzdE5hbWUiKSkgewogICAgICAgICAgICBuYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJGaXJzdE5hbWUiKSArICIgIiArIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VyTGFzdE5hbWUiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5hZGRfdGlja2V0X3VybCgpLCB7CiAgICAgICAgICAgIHVzZXJuYW1lOiBuYW1lLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlLAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgdGlja2V0X2lzc3VlOiB0aGlzLmlzc3VlLAogICAgICAgICAgICB0aWNrZXRfbnVtYmVyOiB0aGlzLmlzRWRpdCA9PSB0cnVlID8gdGhpcy52YXJfdGlja2V0X251bWJlciA6IHRoaXMudGlja2V0X251bWJlcigpLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5pc3N1ZV9kZXNjcmlwdGlvbiwKICAgICAgICAgICAgZmlsZV9jb250ZW50OiB0aGlzLmltZ19maWxlLAogICAgICAgICAgICBmaWxlX25hbWU6IHRoaXMuZmlsZV9sYWJlbCA9PSAiQ2hvb3NlIGZpbGUiID8gbnVsbCA6IHRoaXMuZmlsZV9sYWJlbCwKICAgICAgICAgICAgaXNFZGl0OiB0aGlzLmlzRWRpdAogICAgICAgICAgfSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXM3LmlzRWRpdCkgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIllvdXIgdGlja2V0IGhhcyBiZWVuIGVkaXRlZCBzdWNjZXNzZnVsbHkuIik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICghX3RoaXM3LmlzRWRpdCkgewogICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIllvdXIgdGlja2V0IGhhcyBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseS4iKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzNy5jbGVhcl9maWVsZHMoKTsKCiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczcuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgICQoIiN0aWNrZXRtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiRHVwbGljYXRlIGltYWdlIikgewogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiVGhlIGZpbGUgbmFtZSBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIHJlbmFtZSB5b3VyIGZpbGUuIik7CiAgICAgICAgICAgICAgJCgiI3RpY2tldG1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJUaGVyZSBpcyBhbiBpbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFBsZWFzZSB0cnkgbGF0ZXIuIik7CiAgICAgICAgICAgICAgJCgiI3RpY2tldG1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQoIiN0aWNrZXRtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAkKCIjbmFtZV9lZGl0IikubW9kYWwoInNob3ciKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmaWxlaW5wdXQ6IGZ1bmN0aW9uIGZpbGVpbnB1dChlKSB7CiAgICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwoKICAgICAgaWYgKHRoaXMuZmlsZV9sYWJlbCAhPSAiQ2hvb3NlIGZpbGUiKSB7CiAgICAgICAgdGhpcy5vbGRfZmlsZV9uYW1lID0gdGhpcy5maWxlX2xhYmVsOwogICAgICAgIHRoaXMuaW1hZ2VfZWRpdCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICghZmlsZXMubGVuZ3RoKSByZXR1cm47CiAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IGZpbGVzWzBdLm5hbWU7CiAgICAgIHRoaXMuY3JlYXRlSW1hZ2UoZmlsZXNbMF0pOwogICAgfSwKICAgIGVkaXRfZmlsZWlucHV0OiBmdW5jdGlvbiBlZGl0X2ZpbGVpbnB1dChlKSB7CiAgICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwoKICAgICAgaWYgKHRoaXMuZWRpdF9maWxlX2xhYmVsICE9ICJDaG9vc2UgZmlsZSIpIHsKICAgICAgICB0aGlzLmVkaXRfb2xkX2ZpbGVfbmFtZSA9IHRoaXMuZWRpdF9maWxlX2xhYmVsOwogICAgICAgIGFsZXJ0KHRoaXMuZWRpdF9vbGRfZmlsZV9uYW1lKTsKICAgICAgICB0aGlzLmltYWdlX2VkaXQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgcmV0dXJuOwogICAgICB0aGlzLmVkaXRfZmlsZV9sYWJlbCA9IGZpbGVzWzBdLm5hbWU7CiAgICAgIHRoaXMuY3JlYXRlSW1hZ2UoZmlsZXNbMF0pOwogICAgfSwKICAgIGNyZWF0ZUltYWdlOiBmdW5jdGlvbiBjcmVhdGVJbWFnZShmaWxlLCB0eXBlKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczguaW1nX2ZpbGUgPSBlLnRhcmdldC5yZXN1bHQuc3BsaXQoImJhc2U2NCwiKVsxXTsKICAgICAgICBfdGhpczguZWRpdF9pbWdfZmlsZSA9IGUudGFyZ2V0LnJlc3VsdC5zcGxpdCgiYmFzZTY0LCIpWzFdOwogICAgICB9OwoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9LAogICAgY2xlYXJfZmllbGRzOiBmdW5jdGlvbiBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMuaW1nX2ZpbGUgPSAiIjsKICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgdGhpcy5pc3N1ZSA9ICIiOwogICAgICB0aGlzLmlzc3VlX2Rlc2NyaXB0aW9uID0gIiI7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICB9LAogICAgcGFnZV9yZXF1aXJlOiBmdW5jdGlvbiBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHt9IGVsc2UgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF90aWNrZXRfc3RhdHVzX3VybCgpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM5LnRpY2tldHNfbGlzdCA9IHJlc3BvbnNlLmRhdGEuVGlja2V0czsKCiAgICAgICAgICBmb3IgKHZhciBpIGluIF90aGlzOS50aWNrZXRzX2xpc3QpIHsKICAgICAgICAgICAgX3RoaXM5LnRpY2tldHNfbGlzdFtpXS5zaG9ydF9kZXNjcmlwdGlvbiA9IF90aGlzOS50aWNrZXRzX2xpc3RbaV0uRGVzY3JpcHRpb25bMF0uc2xpY2UoMCwgMTApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFnaW5hdGlvbl9jbGFzczogZnVuY3Rpb24gcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgICBpZiAoaW5kZXggPT0gdGhpcy5wYWdlX25vKSB7CiAgICAgICAgcmV0dXJuICIgYWN0aXZlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}