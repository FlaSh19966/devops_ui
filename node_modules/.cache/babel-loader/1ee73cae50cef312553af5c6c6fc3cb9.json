{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/End User Response/TaskResponses.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/End User Response/TaskResponses.vue","mtime":1660280102202},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCBQb3J0YWxVc2VyQ2hhdEhpc3RvcnkgZnJvbSAiLi9Qb3J0YWxVc2VyQ2hhdEhpc3RvcnkudnVlIjsKaW1wb3J0IEJvdFVzZXJDaGF0SGlzdG9yeSBmcm9tICIuL0JvdFVzZXJDaGF0SGlzdG9yeS52dWUiOwppbXBvcnQgTGl2ZUNoYXRIaXN0b3J5IGZyb20gIi4vTGl2ZUNoYXRIaXN0b3J5LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAvLyBNdWx0aXNlbGVjdCwKICAgIFBvcnRhbFVzZXJDaGF0SGlzdG9yeTogUG9ydGFsVXNlckNoYXRIaXN0b3J5LAogICAgQm90VXNlckNoYXRIaXN0b3J5OiBCb3RVc2VyQ2hhdEhpc3RvcnksCiAgICBMaXZlQ2hhdEhpc3Rvcnk6IExpdmVDaGF0SGlzdG9yeQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG51bWJlcl9vZl9yb3dzOiAiIiwKICAgICAgdG90YWxfcGFnZXM6IDAsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgdXNlcl9saXN0OiBbXSwKICAgICAgdXNlcl9yZXBseTogW10sCiAgICAgIGJvdF9yZXBseTogW10sCiAgICAgIGNoYXREZXRhaWxzOiBbXSwKICAgICAgYWN0aW9uX3N0YXRzOiBbXSwKICAgICAgdXNlcl9hY3Rpb25fc3RhdHM6IFtdLAogICAgICBjdXJyZW50X3VzZXI6ICIiLAogICAgICB0aW1lc3RhbXA6ICIiLAogICAgICBzZW5kZXJfaWQ6IFtdLAogICAgICBzZWxlY3RlZDogImdlbmVyYWxfY2hhdF9oaXN0b3J5IiwKICAgICAgc2VsZWN0ZWRfZGF0ZTogIiIsCiAgICAgIHNlbGVjdGVkX2luZGV4OiBudWxsLAogICAgICBjaGF0X2RhdGVzOiBbXSwKICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIGlzc2VhcmNoOiBmYWxzZSwKICAgICAgc2VhcmNoc3RyaW5nOiAiIiwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgdmlld19jb21wb25lbnRfbmFtZTogInBvcnRhbF91c2VyIiwKICAgICAgLy8gZmluZ2VycHJpbnRyZWdleDovXlswLTldezEwfSQvLAogICAgICBmaW5nZXJwcmludHJlZ2V4OiAvXlswLTktK1wvXHNdezksfSQvLAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgaXNWaXNpYmxlU2VhcmNoQ2xlYXI6IGZhbHNlLAogICAgICBzaG93X2xvYWRlcjogZmFsc2UsCiAgICAgIGZpbHRlcl9jaGF0X2hpc3Rvcnk6ICJMYXN0IDcgZGF5cyIKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogICAgJCgiI3BvcnRhbF91c2VyLXRhYiIpLmNsaWNrKCk7IC8vIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMubW9kYWxfb3Blbl9zd2l0Y2hfdGFiKSB7CiAgICAvLyAgIHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9ICJib3RfdXNlciI7CiAgICAvLyAgICQoIiNib3RfdXNlci10YWIiKS5jbGljaygpOwogICAgLy8gfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZF90YXNrX3Jlc3BvbnNlcygpOwogICAgdGhpcy4kc2Vzc2lvbi5zZXQoImZpbHRlcl9jaGF0X2hpc3RvcnkiLCB0aGlzLnRsdCgnY2hhdF9oaXN0b3J5X2RlZmF1bHRfN19kYXknKSk7CiAgfSwKICB3YXRjaDogewogICAgdmlld19jb21wb25lbnRfbmFtZTogZnVuY3Rpb24gdmlld19jb21wb25lbnRfbmFtZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLnNlYXJjaHN0cmluZyA9ICIiOwogICAgfSwKICAgIHNlYXJjaHN0cmluZzogZnVuY3Rpb24gc2VhcmNoc3RyaW5nKCkgewogICAgICBpZiAodGhpcy5zZWFyY2hzdHJpbmcgPT09ICIiKSB7CiAgICAgICAgdGhpcy5sb2FkX3Rhc2tfcmVzcG9uc2VzKCk7CiAgICAgICAgdGhpcy5pc1Zpc2libGVTZWFyY2hDbGVhciA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VhcmNoc3RyaW5nICE9PSAiIikgewogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGVhcl9zZWFyY2hzdHJpbmc6IGZ1bmN0aW9uIGNsZWFyX3NlYXJjaHN0cmluZygpIHsKICAgICAgdGhpcy5zZWFyY2hzdHJpbmcgPSAiIjsKICAgIH0sCiAgICBsb2FkX3Rhc2tfcmVzcG9uc2VzOiBmdW5jdGlvbiBsb2FkX3Rhc2tfcmVzcG9uc2VzKCkgewogICAgICB0aGlzLnNob3dfbG9hZGVyID0gZmFsc2U7CiAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgIHRoaXMuc2VhcmNoc3RyaW5nID0gIiI7CiAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJmaWx0ZXJfY2hhdF9oaXN0b3J5IiwgdGhpcy5maWx0ZXJfY2hhdF9oaXN0b3J5KTsKCiAgICAgIGlmICh0aGlzLnZpZXdfY29tcG9uZW50X25hbWUgPT09ICJwb3J0YWxfdXNlciIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJsb2FkX3BvcnRhbF91c2VyX2NoYXRfaGlzdG9yeSIsIHRydWUpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9PT0gImJvdF91c2VyIikgewogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoImxvYWRfYm90X3VzZXJfY2hhdF9oaXN0b3J5IiwgdHJ1ZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy52aWV3X2NvbXBvbmVudF9uYW1lID09PSAiYWdlbnRfdXNlciIpIHsKICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJsb2FkX2xpdmVfY2hhdF9oaXN0b3J5IiwgdHJ1ZSk7CiAgICAgIH0gLy8gICBheGlvcwogICAgICAvLyAgIC5wb3N0KAogICAgICAvLyAgICAgYXBpX2NhbGxzLmFjdGlvbl9zdGF0c191cmwoKSwKICAgICAgLy8gICAgIHsKICAgICAgLy8gICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIC8vICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgIC8vICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgIC8vICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIC8vICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAvLyAgICAgfSwKICAgICAgLy8gICAgIHsKICAgICAgLy8gICAgICAgaGVhZGVyczogewogICAgICAvLyAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgICAvLyAgICAgICB9LAogICAgICAvLyAgICAgfQogICAgICAvLyAgICkKICAgICAgLy8gICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgLy8gICAgIHRoaXMuYWN0aW9uX3N0YXRzID0gcmVzcG9uc2UuZGF0YS5hY3Rpb25fc3RhdHM7CiAgICAgIC8vICAgICB0aGlzLmFjdGlvbl9zdGF0cy5wdXNoKHsKICAgICAgLy8gICAgICAgSGl0czogMSwKICAgICAgLy8gICAgICAgTmFtZTogImdlbmVyYWxfY2hhdF9oaXN0b3J5IiwKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKChlKSA9PiB7CiAgICAgIC8vICAgICBpZiAoCiAgICAgIC8vICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgICAgLy8gICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgIC8vICAgICApIHsKICAgICAgLy8gICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KTsKICAgICAgLy8gYXhpb3MKICAgICAgLy8gICAucG9zdCgKICAgICAgLy8gICAgIGFwaV9jYWxscy5nZW5lcmFsX2NoYXRfaGlzdG9yeSgpLAogICAgICAvLyAgICAgewogICAgICAvLyAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgLy8gICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgLy8gICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgLy8gICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgLy8gICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIC8vICAgICAgIGlzc2hvdzogdHJ1ZSwKICAgICAgLy8gICAgICAgYWN0aW9uOiAiZ2VuZXJhbF9jaGF0X2hpc3RvcnkiLAogICAgICAvLyAgICAgICBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgLy8gICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgLy8gICAgICAgaXNzZWFyY2g6IHRoaXMuaXNzZWFyY2gsCiAgICAgIC8vICAgICB9LAogICAgICAvLyAgICAgewogICAgICAvLyAgICAgICBoZWFkZXJzOiB7CiAgICAgIC8vICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgIC8vICAgICAgIH0sCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgKQogICAgICAvLyAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAvLyAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cyA9IFtdOwogICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5Lmxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgICAgIC8vIGNvbnNvbGUubG9nKAogICAgICAvLyAgICAgICAvLyAgIHRoaXMuZmluZ2VycHJpbnRyZWdleC50ZXN0KHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIpCiAgICAgIC8vICAgICAgIC8vICk7CiAgICAgIC8vICAgICAgIGlmICgKICAgICAgLy8gICAgICAgICB0aGlzLmZpbmdlcnByaW50cmVnZXgudGVzdChyZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyKQogICAgICAvLyAgICAgICApIHsKICAgICAgLy8gICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgICAvLyAgICAgICAgICAgdXNlcmVtYWlsOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLkVtYWlsLAogICAgICAvLyAgICAgICAgICAgdXNlcnBob25lbnVtYmVyOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLlBob25lTnVtYmVyLAogICAgICAvLyAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAgIC8vICAgICAgICAgICB1c2VyaWQ6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIsCiAgICAgIC8vICAgICAgICAgfSk7CiAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy51c2VyX2FjdGlvbl9zdGF0cywgcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXSk7CiAgICAgIC8vICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cy5wdXNoKHsKICAgICAgLy8gICAgICAgICAgIHVzZXJlbWFpbDogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5faWQuVXNlciwKICAgICAgLy8gICAgICAgICAgIHVzZXJwaG9uZW51bWJlcjogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5QaG9uZU51bWJlciwKICAgICAgLy8gICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLlVzZXJOYW1lLAogICAgICAvLyAgICAgICAgICAgdXNlcmlkOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgICAvLyAgICAgICAgIH0pOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIC8vIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAgIC8vICAgICAgIC8vICAgICB1c2VyZW1haWwgOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgICAvLyAgICAgICAvLyAgICAgdXNlcnBob25lbnVtYmVyIDogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5QaG9uZU51bWJlciwKICAgICAgLy8gICAgICAgLy8gICAgIHVzZXJuYW1lIDogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5Vc2VyTmFtZSwKICAgICAgLy8gICAgICAgLy8gfSk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5QYWdlQ291bnQ7CiAgICAgIC8vICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoZSkgPT4gewogICAgICAvLyAgICAgaWYgKAogICAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgIC8vICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgICAgLy8gICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgICAvLyAgICAgKSB7CiAgICAgIC8vICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSk7CgogICAgfSwKICAgIC8vIHBhZ2VfcmVxdWlyZShwYWdlX25vKSB7CiAgICAvLyAgIGlmICh0aGlzLnNlbGVjdGVkICE9ICJnZW5lcmFsX2NoYXRfaGlzdG9yeSIpIHsKICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRvdGFsX3BhZ2VzLCBwYWdlX25vKTsKICAgIC8vICAgICBpZiAocGFnZV9ubyA9PSAwIHx8IHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgLy8gdGhpcy5wYWdlX25vID0gcGFnZV9ubzsKICAgIC8vICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgLy8gICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAvLyAgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIi4uLmwiKSB7CiAgICAvLyAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgIC8vICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICAvLyB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAvLyAgICAgICBheGlvcwogICAgLy8gICAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgICBhcGlfY2FsbHMuYWN0aW9uX3VzYWdlX3N0YXRzX3VybCgpLAogICAgLy8gICAgICAgICAgIHsKICAgIC8vICAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgIC8vICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICAgICAgICAvLyBhY3Rpb246IHRoaXMuYWN0aW9uX3N0YXRzW2luZGV4XS5OYW1lLAogICAgLy8gICAgICAgICAgICAgYWN0aW9uOiB0aGlzLnNlbGVjdGVkLAogICAgLy8gICAgICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vLAogICAgLy8gICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgICAgfSwKICAgIC8vICAgICAgICAgICB7CiAgICAvLyAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICAgICAgfSwKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgICAgICAgLy8gdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgICAgICAvLyB0aGlzLnVzZXJfbGlzdCA9IFtdOwogICAgLy8gICAgICAgICAgIC8vIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YVswXSkgewogICAgLy8gICAgICAgICAgIC8vICAgdGhpcy5pbnRlbnRsaXN0LnB1c2goewogICAgLy8gICAgICAgICAgIC8vICAgICBpbnRlbnQ6IHJlc3BvbnNlLmRhdGFbMF1baV0sCiAgICAvLyAgICAgICAgICAgLy8gICAgIGVtYWlsOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgLy8gICAgICAgICAgIC8vICAgICBjcmVhdGVkOiByZXNwb25zZS5kYXRhWzJdW2ldCiAgICAvLyAgICAgICAgICAgLy8gICB9KTsKICAgIC8vICAgICAgICAgICAvLyB9CiAgICAvLyAgICAgICAgIH0pCiAgICAvLyAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgLy8gICAgICAgICAgIGlmICgKICAgIC8vICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgIC8vICAgICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkKICAgIC8vICAgICAgICAgICApIHsKICAgIC8vICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9KTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgaWYgKHBhZ2Vfbm8gPT0gMCB8fCBwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMgKyAxKSB7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIGlmIChwYWdlX25vID09ICIuLi5zIikgewogICAgLy8gICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAvLyAgICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gIi4uLmwiKSB7CiAgICAvLyAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgIC8vICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2Vfbm87CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICAvLyB0aGlzLnBhZ2Vfbm8gPSBwYWdlX25vOwogICAgLy8gICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgLy8gICAgICAgYXhpb3MKICAgIC8vICAgICAgICAgLnBvc3QoCiAgICAvLyAgICAgICAgICAgYXBpX2NhbGxzLmdlbmVyYWxfY2hhdF9oaXN0b3J5KCksCiAgICAvLyAgICAgICAgICAgewogICAgLy8gICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAvLyAgICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgICAgIGlzc2hvdzogdHJ1ZSwKICAgIC8vICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5zZWxlY3RlZCwKICAgIC8vICAgICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgLy8gICAgICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKICAgIC8vICAgICAgICAgICAgIGlzc2VhcmNoOiB0aGlzLmlzc2VhcmNoLAogICAgLy8gICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgICAgewogICAgLy8gICAgICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgIC8vICAgICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAvLyAgICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cyA9IFtdOwogICAgLy8gICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeS5sZW5ndGg7IGkrKykgewogICAgLy8gICAgICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgICB0aGlzLmZpbmdlcnByaW50cmVnZXgudGVzdCgKICAgIC8vICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyCiAgICAvLyAgICAgICAgICAgICAgICkKICAgIC8vICAgICAgICAgICAgICkgewogICAgLy8gICAgICAgICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgLy8gICAgICAgICAgICAgICAgIHVzZXJlbWFpbDogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5FbWFpbCwKICAgIC8vICAgICAgICAgICAgICAgICB1c2VycGhvbmVudW1iZXI6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uUGhvbmVOdW1iZXIsCiAgICAvLyAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAvLyAgICAgICAgICAgICAgICAgdXNlcmlkOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgLy8gICAgICAgICAgICAgICB9KTsKICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAvLyAgICAgICAgICAgICAgICAgdXNlcmVtYWlsOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgLy8gICAgICAgICAgICAgICAgIHVzZXJwaG9uZW51bWJlcjogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5QaG9uZU51bWJlciwKICAgIC8vICAgICAgICAgICAgICAgICB1c2VybmFtZTogcmVzcG9uc2UuZGF0YS5jaGF0SGlzdG9yeVtpXS5Vc2VyTmFtZSwKICAgIC8vICAgICAgICAgICAgICAgICB1c2VyaWQ6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uX2lkLlVzZXIsCiAgICAvLyAgICAgICAgICAgICAgIH0pOwogICAgLy8gICAgICAgICAgICAgfQogICAgLy8gICAgICAgICAgICAgLy8gdGhpcy51c2VyX2FjdGlvbl9zdGF0cy5wdXNoKHsKICAgIC8vICAgICAgICAgICAgIC8vICAgICB1c2VyZW1haWwgOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgLy8gICAgICAgICAgICAgLy8gICAgIHVzZXJwaG9uZW51bWJlciA6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uUGhvbmVOdW1iZXIsCiAgICAvLyAgICAgICAgICAgICAvLyAgICAgdXNlcm5hbWUgOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLlVzZXJOYW1lLAogICAgLy8gICAgICAgICAgICAgLy8gfSk7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgICAgIHRoaXMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLlBhZ2VDb3VudDsKICAgIC8vICAgICAgICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgIC8vICAgICAgICAgfSkKICAgIC8vICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICAgICkgewogICAgLy8gICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIHBhZ2luYXRpb25fY2xhc3MoaW5kZXgpIHsKICAgIC8vICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgLy8gICAgIHJldHVybiAiIGFjdGl2ZSI7CiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgcmV0dXJuICIiOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy8gc2V0cGFnaW5hdGlvbihwYWdlX25vKSB7CiAgICAvLyAgIHRoaXMucGFnZV9hcnJheSA9IFtdOwogICAgLy8gICBpZiAodGhpcy50b3RhbF9wYWdlcyA8PSA3KSB7CiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgIC8vICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSAxKSB7CiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIC8vICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIC8vICAgfSBlbHNlIGlmIChwYWdlX25vID09IHRoaXMudG90YWxfcGFnZXMpIHsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwogICAgLy8gICAgIGZvciAobGV0IGkgPSB0aGlzLnRvdGFsX3BhZ2VzIC0gNDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgLy8gICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSBlbHNlIGlmIChwYWdlX25vIDw9IDQpIHsKICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2Vfbm8gKyAzOyBpKyspIHsKICAgIC8vICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgIC8vICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIC8vICAgfSBlbHNlIGlmIChwYWdlX25vID49IHRoaXMudG90YWxfcGFnZXMgLSA0KSB7CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKICAgIC8vICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDQ7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgIC8vICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgIC8vICAgICB9CiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKICAgIC8vICAgICBmb3IgKGxldCBpID0gcGFnZV9ubyAtIDM7IGkgPD0gcGFnZV9ubyArIDM7IGkrKykgewogICAgLy8gICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSk7CiAgICAvLyAgICAgfQogICAgLy8gICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAvLyAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyB2aWV3X2FjdGlvbigpIHsKICAgIC8vICAgdmFyIGFjdGlvbl9uYW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgLy8gICB0aGlzLnNlbGVjdGVkID0gYWN0aW9uX25hbWU7CiAgICAvLyAgIHRoaXMuc2VhcmNoc3RyaW5nID0gIiI7CiAgICAvLyAgIGlmIChhY3Rpb25fbmFtZSAhPSAiZ2VuZXJhbF9jaGF0X2hpc3RvcnkiKSB7CiAgICAvLyAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgLy8gICAgIGF4aW9zCiAgICAvLyAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgYXBpX2NhbGxzLmFjdGlvbl91c2FnZV9zdGF0c191cmwoKSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICAgIGFjdGlvbjogYWN0aW9uX25hbWUsCiAgICAvLyAgICAgICAgICAgcGFnZV9ubzogMSwKICAgIC8vICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgIC8vICAgICAgICAgfSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGhlYWRlcnM6IHsKICAgIC8vICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgICkKICAgIC8vICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgLy8gICAgICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5udW1iZXJfb2Zfcm93czsKICAgIC8vICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IE1hdGguY2VpbCh0aGlzLm51bWJlcl9vZl9yb3dzIC8gdGhpcy5wZXJfcGFnZSk7CiAgICAvLyAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMgPSBbXTsKICAgIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhLnVzZXJzKSB7CiAgICAvLyAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudXNlcnNbaV0uYWN0aW9uX2hpdHMgIT0gMCkgewogICAgLy8gICAgICAgICAgICAgbGV0IGFjdGlvbl9oaXN0b3J5ID0gW107CiAgICAvLyAgICAgICAgICAgICBmb3IgKHZhciBqIGluIHJlc3BvbnNlLmRhdGEudXNlcnNbaV0uYWN0aW9uX2hpdHMpIHsKICAgIC8vICAgICAgICAgICAgICAgYWN0aW9uX2hpc3RvcnkucHVzaChyZXNwb25zZS5kYXRhLnVzZXJzW2ldLmFjdGlvbl9oaXRzW2pdKTsKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAvLyAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLnVzZXJzW2ldLnVzZXJuYW1lLAogICAgLy8gICAgICAgICAgICAgICBhY3Rpb25fbGlzdDogYWN0aW9uX2hpc3RvcnksCiAgICAvLyAgICAgICAgICAgICAgIHNlbmRlcl9pZDogcmVzcG9uc2UuZGF0YS51c2Vyc1tpXS5zZW5kZXJfaWQsCiAgICAvLyAgICAgICAgICAgICB9KTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAvLyAgICAgYXhpb3MKICAgIC8vICAgICAgIC5wb3N0KAogICAgLy8gICAgICAgICBhcGlfY2FsbHMuZ2VuZXJhbF9jaGF0X2hpc3RvcnkoKSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICAgIGlzc2hvdzogdHJ1ZSwKICAgIC8vICAgICAgICAgICBhY3Rpb246IGFjdGlvbl9uYW1lLAogICAgLy8gICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgLy8gICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAvLyAgICAgICAgICAgaXNzZWFyY2g6IHRoaXMuaXNzZWFyY2gsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICAgIHsKICAgIC8vICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4kc2Vzc2lvbi5nZXQoImF0Iil9YCwKICAgIC8vICAgICAgICAgICB9LAogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICApCiAgICAvLyAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vICAgICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgICAgdGhpcy51c2VyX2FjdGlvbl9zdGF0cyA9IFtdOwogICAgLy8gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnkubGVuZ3RoOyBpKyspIHsKICAgIC8vICAgICAgICAgICB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzLnB1c2goewogICAgLy8gICAgICAgICAgICAgdXNlcmVtYWlsOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLl9pZC5Vc2VyLAogICAgLy8gICAgICAgICAgICAgdXNlcnBob25lbnVtYmVyOiByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5W2ldLlBob25lTnVtYmVyLAogICAgLy8gICAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0uVXNlck5hbWUsCiAgICAvLyAgICAgICAgICAgfSk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIHNjcm9sbF9kaXYoKSB7CiAgICAvLyAgIHZhciBkb2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYnV5LXByb2R1Y3RzIik7CiAgICAvLyAgIGlmIChldmVudC5kZWx0YVggPiBldmVudC5kZWx0YVkpIHsKICAgIC8vICAgICBkb2Muc2Nyb2xsTGVmdCArPSAxMDsKICAgIC8vICAgfSBlbHNlIGlmIChldmVudC5kZWx0YVggPCBldmVudC5kZWx0YVkpIHsKICAgIC8vICAgICBkb2Muc2Nyb2xsTGVmdCAtPSAxMDsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIGNoZWNraW50ZW50KGluZGV4KSB7CiAgICAvLyAgIGlmICh0aGlzLmNoYXREZXRhaWxzW2luZGV4IC0gMV0gIT0gdW5kZWZpbmVkKSB7CiAgICAvLyAgICAgaWYgKHRoaXMuY2hhdERldGFpbHNbaW5kZXggLSAxXS5CT1RSZXNwb25zZVswXSAhPSB1bmRlZmluZWQpIHsKICAgIC8vICAgICAgIGlmICh0aGlzLmNoYXREZXRhaWxzW2luZGV4IC0gMV0uQk9UUmVzcG9uc2VbMF0uaW50ZW50ICE9IHVuZGVmaW5lZCkgewogICAgLy8gICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vICAgcmV0dXJuIGZhbHNlOwogICAgLy8gfSwKICAgIC8vIGNoYXRfZGF0ZShpbmRleCkgewogICAgLy8gICB0aGlzLnNlbmRlcl9pZCA9IHRoaXMudXNlcl9hY3Rpb25fc3RhdHNbaW5kZXhdLnVzZXJpZDsKICAgIC8vICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgLy8gICBheGlvcwogICAgLy8gICAgIC5wb3N0KAogICAgLy8gICAgICAgYXBpX2NhbGxzLmdlbmVyYWxfY2hhdF9oaXN0b3J5KCksCiAgICAvLyAgICAgICB7CiAgICAvLyAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgLy8gICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgICAgdXNlcm5hbWU6IHRoaXMuc2VuZGVyX2lkLAogICAgLy8gICAgICAgICBpc3Nob3dkYXRlczogdHJ1ZSwKICAgIC8vICAgICAgICAgaXNzZWFyY2g6IHRoaXMuaXNzZWFyY2gsCiAgICAvLyAgICAgICAgIHNlYXJjaHN0cmluZzogdGhpcy5zZWFyY2hzdHJpbmcsCiAgICAvLyAgICAgICB9LAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKQogICAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgLy8gICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgIHRoaXMuY2hhdF9kYXRlcyA9IHJlc3BvbnNlLmRhdGEuRGF0ZXM7CiAgICAvLyAgICAgICB0aGlzLnNlbGVjdGVkX2RhdGUgPQogICAgLy8gICAgICAgICByZXNwb25zZS5kYXRhLkRhdGVzW3Jlc3BvbnNlLmRhdGEuRGF0ZXMubGVuZ3RoIC0gMV07CiAgICAvLyAgICAgICB0aGlzLmNoYXRfZGF0ZXMucmV2ZXJzZSgpOwogICAgLy8gICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RlZF9pbmRleCk7CiAgICAvLyAgICAgICB0aGlzLnNlbGVjdGVkX2luZGV4ID0gaW5kZXg7CiAgICAvLyAgICAgICB0aGlzLmNoYXRfY29udmVyc2F0aW9uKGluZGV4KTsKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaCgoZSkgPT4gewogICAgLy8gICAgICAgaWYgKAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgKSB7CiAgICAvLyAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgfSk7CiAgICAvLyB9LAogICAgLy8gY2hhdF9jb252ZXJzYXRpb24oaW5kZXgsIGNoYXRfaW5kZXgpIHsKICAgIC8vICAgLy8gY29uc29sZS5sb2coaW5kZXgsIGNoYXRfaW5kZXgpOwogICAgLy8gICBpZiAodGhpcy5zZWxlY3RlZCAhPSAiZ2VuZXJhbF9jaGF0X2hpc3RvcnkiKSB7CiAgICAvLyAgICAgdGhpcy5zZW5kZXJfaWQgPSB0aGlzLnVzZXJfYWN0aW9uX3N0YXRzW2luZGV4XS51c2VyaWQ7CiAgICAvLyAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgLy8gICAgIGF4aW9zCiAgICAvLyAgICAgICAucG9zdCgKICAgIC8vICAgICAgICAgYXBpX2NhbGxzLmNvbnZlcnNhdGlvbl9zdGF0c191cmwoKSwKICAgIC8vICAgICAgICAgewogICAgLy8gICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgLy8gICAgICAgICAgIHNlbmRlcl9pZDogdGhpcy51c2VyX2FjdGlvbl9zdGF0c1tpbmRleF0uc2VuZGVyX2lkLAogICAgLy8gICAgICAgICAgIGFjdGlvbl90aW1lc3RhbXA6IHRoaXMudXNlcl9hY3Rpb25fc3RhdHNbaW5kZXhdLmFjdGlvbl9saXN0WwogICAgLy8gICAgICAgICAgICAgY2hhdF9pbmRleAogICAgLy8gICAgICAgICAgIF0udGltZXN0YW1wLAogICAgLy8gICAgICAgICB9LAogICAgLy8gICAgICAgICB7CiAgICAvLyAgICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgICAgfSwKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgKQogICAgLy8gICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAvLyAgICAgICAgIHRoaXMudXNlcl9yZXBseSA9IFtdOwogICAgLy8gICAgICAgICB0aGlzLmJvdF9yZXBseSA9IFtdOwogICAgLy8gICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSBudWxsKSB7CiAgICAvLyAgICAgICAgICAgdGhpcy5jdXJyZW50X3VzZXIgPSByZXNwb25zZS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy51c2VybmFtZTsKICAgIC8vICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEudXNlcl9jb252ZXJzYXRpb25zLmludGVyYWN0aW9ucykgewogICAgLy8gICAgICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy5pbnRlcmFjdGlvbnNbaV0udXNlciAhPQogICAgLy8gICAgICAgICAgICAgICB1bmRlZmluZWQKICAgIC8vICAgICAgICAgICAgICkgewogICAgLy8gICAgICAgICAgICAgICB0aGlzLnVzZXJfcmVwbHkucHVzaCgKICAgIC8vICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnVzZXJfY29udmVyc2F0aW9ucy5pbnRlcmFjdGlvbnNbaV0udXNlcgogICAgLy8gICAgICAgICAgICAgICApOwogICAgLy8gICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgIC8vICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS51c2VyX2NvbnZlcnNhdGlvbnMuaW50ZXJhY3Rpb25zW2ldLmJvdCAhPQogICAgLy8gICAgICAgICAgICAgICB1bmRlZmluZWQKICAgIC8vICAgICAgICAgICAgICkgewogICAgLy8gICAgICAgICAgICAgICB0aGlzLmJvdF9yZXBseS5wdXNoKAogICAgLy8gICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudXNlcl9jb252ZXJzYXRpb25zLmludGVyYWN0aW9uc1tpXS5ib3QKICAgIC8vICAgICAgICAgICAgICAgKTsKICAgIC8vICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICAgJCgiI2NvbnZlcnNhdGlvbl9tb2RlbDEgOmlucHV0IikucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgIC8vICAgICAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgICB0b2FzdHIuZXJyb3IoIk5vIENoYXRzIEF2YWlsYWJsZSIpOwogICAgLy8gICAgICAgICAgICQoIiNjb252ZXJzYXRpb25fbW9kZWwxIikubW9kYWwoImhpZGUiKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICAkKCIjY29udmVyc2F0aW9uX21vZGVsMSA6aW5wdXQiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgLy8gICAgICAgfSkKICAgIC8vICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgLy8gICAgICAgICBpZiAoCiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgICAgICkgewogICAgLy8gICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIH0pOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgIC8vICAgICBheGlvcwogICAgLy8gICAgICAgLnBvc3QoCiAgICAvLyAgICAgICAgIGFwaV9jYWxscy5nZW5lcmFsX2NoYXRfaGlzdG9yeSgpLAogICAgLy8gICAgICAgICB7CiAgICAvLyAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAvLyAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgIC8vICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgLy8gICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMuc2VuZGVyX2lkLAogICAgLy8gICAgICAgICAgIGlzc2hvd2NoYXRkZXRhaWxzOiB0cnVlLAogICAgLy8gICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWRfZGF0ZSwKICAgIC8vICAgICAgICAgICBpc3NlYXJjaDogdGhpcy5pc3NlYXJjaCwKICAgIC8vICAgICAgICAgICBzZWFyY2hzdHJpbmc6IHRoaXMuc2VhcmNoc3RyaW5nLAogICAgLy8gICAgICAgICB9LAogICAgLy8gICAgICAgICB7CiAgICAvLyAgICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgICAgICAgfSwKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgKQogICAgLy8gICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRfaW5kZXgsIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMpOwogICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgLy8gICAgICAgICB0aGlzLnVzZXJfcmVwbHkgPSBbXTsKICAgIC8vICAgICAgICAgdGhpcy5ib3RfcmVwbHkgPSBbXTsKICAgIC8vICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gbnVsbCkgewogICAgLy8gICAgICAgICAgIHRoaXMuY3VycmVudF91c2VyID0gdGhpcy51c2VyX2FjdGlvbl9zdGF0c1sKICAgIC8vICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfaW5kZXgKICAgIC8vICAgICAgICAgICBdLnVzZXJlbWFpbDsKICAgIC8vICAgICAgICAgICB0aGlzLmNoYXREZXRhaWxzID0gcmVzcG9uc2UuZGF0YS5jaGF0RGV0YWlsczsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgIC8vICAgICAgICAgLy8gICAkKCIjY29udmVyc2F0aW9uX21vZGVsMSA6aW5wdXQiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgLy8gICAgICAgICAvLyAgICQoIiNjb252ZXJzYXRpb25fbW9kZWwxIDpidXR0b24iKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgIC8vICAgICAgICAgLy8gfSwgNTAwKTsKICAgIC8vICAgICAgIH0pCiAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIHNlYXJjaF9jaGF0OiBmdW5jdGlvbiBzZWFyY2hfY2hhdCgpIHsKICAgICAgaWYgKHRoaXMudmlld19jb21wb25lbnRfbmFtZSA9PT0gInBvcnRhbF91c2VyIikgewogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoInNlYXJjaF9wb3J0YWxfdXNlcl9jaGF0X2hpc3RvcnkiLCB0aGlzLnNlYXJjaHN0cmluZyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy52aWV3X2NvbXBvbmVudF9uYW1lID09PSAiYm90X3VzZXIiKSB7CiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgic2VhcmNoX2JvdF91c2VyX2NoYXRfaGlzdG9yeSIsIHRoaXMuc2VhcmNoc3RyaW5nKTsKICAgICAgfSAvLyAgIGlmICh0aGlzLnNlYXJjaHN0cmluZyAhPSAiIikgewogICAgICAvLyAgICAgLy8gdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAvLyAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgLy8gICAgICh0aGlzLmlzc2VhcmNoID0gdHJ1ZSksICh0aGlzLnNwaW5uZXJPbiA9IHRydWUpOwogICAgICAvLyAgICAgYXhpb3MKICAgICAgLy8gICAgICAgLnBvc3QoCiAgICAgIC8vICAgICAgICAgYXBpX2NhbGxzLmdlbmVyYWxfY2hhdF9oaXN0b3J5KCksCiAgICAgIC8vICAgICAgICAgewogICAgICAvLyAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIC8vICAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAvLyAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgLy8gICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgIC8vICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgLy8gICAgICAgICAgIGlzc2hvdzogdHJ1ZSwKICAgICAgLy8gICAgICAgICAgIGFjdGlvbjogImdlbmVyYWxfY2hhdF9oaXN0b3J5IiwKICAgICAgLy8gICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAvLyAgICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgLy8gICAgICAgICAgIGlzc2VhcmNoOiB0aGlzLmlzc2VhcmNoLAogICAgICAvLyAgICAgICAgICAgc2VhcmNoc3RyaW5nOiB0aGlzLnNlYXJjaHN0cmluZywKICAgICAgLy8gICAgICAgICB9LAogICAgICAvLyAgICAgICAgIHsKICAgICAgLy8gICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgLy8gICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAgIC8vICAgICAgICAgICB9LAogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgKQogICAgICAvLyAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgLy8gICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAvLyAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMgPSBbXTsKICAgICAgLy8gICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIFJlc3VsdHMgRm91bmQiKSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gMDsKICAgICAgLy8gICAgICAgICB9IGVsc2UgewogICAgICAvLyAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmNoYXRIaXN0b3J5Lmxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgICAgICAgICAgIHRoaXMudXNlcl9hY3Rpb25fc3RhdHMucHVzaCh7CiAgICAgIC8vICAgICAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlLmRhdGEuY2hhdEhpc3RvcnlbaV0sCiAgICAgIC8vICAgICAgICAgICAgIH0pOwogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEuUGFnZUNvdW50OwogICAgICAvLyAgICAgICAgICAgdGhpcy5zZXRwYWdpbmF0aW9uKHRoaXMucGFnZV9ubyk7CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICB9KQogICAgICAvLyAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgLy8gICAgICAgICBpZiAoCiAgICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAgIC8vICAgICAgICAgKSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfSk7CiAgICAgIC8vICAgfSBlbHNlIHsKICAgICAgLy8gICAgIHRvYXN0ci5lcnJvcigiRW50ZXIgcHJvcGVyIGRhdGEgZm9yIHNlYXJjaGluZyIpOwogICAgICAvLyAgIH0KCiAgICB9IC8vIGNsb3NlX21vZGFsKCkgewogICAgLy8gICAkKCIjY29udmVyc2F0aW9uX21vZGVsMSIpLm1vZGFsKCJoaWRlIik7CiAgICAvLyB9LAoKICB9Cn07"},null]}