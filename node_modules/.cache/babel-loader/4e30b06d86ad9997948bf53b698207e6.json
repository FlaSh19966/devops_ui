{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Template.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Template.vue","mtime":1643027096180},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkLXVzZXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdWJzY3JpYmVfc3RhdHVzOiAiIiwKICAgICAgdGVtcGxhdGVfbmFtZTogIiIsCiAgICAgIHRlbXBsYXRlX3N0cnVjdHVyZTogW10sCiAgICAgIHBvcnRhbF9yb2xlczogW10sCiAgICAgIHNlbGVjdGVkX3JvbGU6ICIiLAogICAgICBjaGVja19saXN0OiBbXSwKICAgICAgZW1haWxsaXN0OiBbXSwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgdG90YWxfcGFnZXM6IG51bGwsCiAgICAgIG51bWJlcl9vZl9yb3dzOiBudWxsLAogICAgICBwYWdlX25vOiAxLAogICAgICBjb21wYW55bmFtZTogIiIsCiAgICAgIGNvbXBhbnlpZDogIiIsCiAgICAgIHVzZXJzOiBbXSwKICAgICAgcm9sZXM6IFtdLAogICAgICByb2xlOiAiIiwKICAgICAgcmVnX2VtYWlsOiAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICByZWdfcHdkOiAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxkKSg/PS4qWyNAJCElKj8mXSlbQS1aYS16XGQjQCQhJSo/Jl17OCx9LywKICAgICAgc2hvd19sb2FkZXI6IGZhbHNlLAogICAgICAvL2hhcnNoCiAgICAgIHBhZ2VfYXJyYXk6IFtdLAogICAgICBzZWFyY2hfbmFtZTogIiIsCiAgICAgIHNwaW5uZXJPbjogZmFsc2UsCiAgICAgIHRlbXBsYXRlczogW10sCiAgICAgIGVkaXRpbmRleDogbnVsbCwKICAgICAgaXNfZWRpdDogZmFsc2UsCiAgICAgIGNoYXQ6IFtdLAogICAgICB0b19zY3JvbGw6IGZhbHNlLAogICAgICBpc2V4Y2hhbmdlOiBmYWxzZSwKICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICBib3RxdWVzdGlvbnM6IFtdLAogICAgICBzZWxlY3RlZF9xdWVzdGlvbjogIiIsCiAgICAgIHRlbXBfc3RydWN0dXJlOiBbXSwKICAgICAgYWRtaW50ZW1wbGF0ZXM6IFtdLAogICAgICBjZW5zZXRlbXBsYXRlczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICBheGlvcy5nZXQoYXBpX2NhbGxzLmdldF9vcGVuX2JvdF90ZW1wbGF0ZSgpLCB7CiAgICAgIHBhcmFtczogewogICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zCiAgICAgIH0sCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICJTdWNjZXNzIikgewogICAgICAgIF90aGlzLmNlbnNldGVtcGxhdGVzID0gcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZXM7CiAgICAgICAgYXhpb3MuZ2V0KGFwaV9jYWxscy5wb3N0X29wZW5fYm90X3RlbXBsYXRlKCksIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBjb21wYW55bmFtZTogX3RoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlpZDogX3RoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICBlbWFpbDogX3RoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHRva2VuOiBfdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgICAgICAgfSwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChfdGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzLmFkbWludGVtcGxhdGVzID0gcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZXM7CiAgICAgICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICBfdGhpcy5maWx0ZXJ0ZW1wbGF0ZXMoKTsgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgJCgiI2VkaXRib3Rtb2RlbCIpLm9uKCJoaWRkZW4uYnMubW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIGRlYnVnZ2VyOwogICAgICBhbGVydCgiSGkiKTsKICAgICAgX3RoaXMyLmNoYXQgPSBbXTsKICAgICAgX3RoaXMyLmJvdHF1ZXN0aW9ucyA9IFtdOyAvLyB2bS52aXNpdF9yZWFzb24gPSAiIjsKICAgICAgLy8gdm0udmlzaXRvcl9zeW1wdG9tcyA9ICIiOwogICAgICAvLyB2bS52aXNpdG9yX251bWJlciA9ICIiOwogICAgICAvLyB2bS5zZWxlY3RlZF90aW1lID0gIiI7CiAgICAgIC8vIHZtLmlzRWRpdCA9IGZhbHNlOwogICAgICAvLyB2bS5zZWxlY3RlZF9zY2hlZHVsZV9pZCA9ICIiOwogICAgICAvLyB2bS5zZWxlY3RlZF9zY2hlZHVsZV92aXNpdF9zbG90ID0gIiI7CiAgICAgIC8vIHZtLmlzUmVzY2hlZHVsZXRpbWUgPSBmYWxzZTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgcm91dGVfdG9fcHJldmlldzogZnVuY3Rpb24gcm91dGVfdG9fcHJldmlldyhpbmRleCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ09wZW4gQm90IFRlbXBsYXRlIFByZXZpZXcnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgYm90ZGF0YTogewogICAgICAgICAgICBzdHJ1Y3R1cmU6IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXR0ZW1wbGF0ZTogZnVuY3Rpb24gZWRpdHRlbXBsYXRlKGVkaXRpbmRleCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIEVkaXQgdGhlIFRlbXBsYXRlPyIsCiAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgICAgIC8vIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY2hhdCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygiSGkiLCB0aGlzLmNoYXQpOwogICAgICAgICAgdmFyIHN0cnVjdHVyZSA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMzLmNoYXQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKF90aGlzMy5jaGF0W2ldLmV2ZW50ID09ICJib3QiKSB7CiAgICAgICAgICAgICAgc3RydWN0dXJlLnB1c2goewogICAgICAgICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgICAgICAgdGV4dDogX3RoaXMzLmNoYXRbaV0udGV4dCwKICAgICAgICAgICAgICAgIGRhdGE6IF90aGlzMy5jaGF0W2ldLmRhdGEsCiAgICAgICAgICAgICAgICBtZXRhZGF0YTogX3RoaXMzLmNoYXRbaV0ubWV0YWRhdGEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKF90aGlzMy5jaGF0W2ldLmV2ZW50ID09ICJ1c2VyIikgewogICAgICAgICAgICAgIHN0cnVjdHVyZS5wdXNoKHsKICAgICAgICAgICAgICAgIGV2ZW50OiAidXNlciIsCiAgICAgICAgICAgICAgICB0ZXh0OiBfdGhpczMuY2hhdFtpXS50ZXh0CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnRlbXBsYXRlX3R5cGUgPT0gJ2FkbWluJykgewogICAgICAgICAgICB2YXIgdGVtcGxhdGVfaWRfYXBpID0gX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLmZpbmFsX3RlbXBsYXRlX2lkOwogICAgICAgICAgICB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLmNlbnNlX3RlbXBsYXRlX2lkOwogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5wb3N0X29wZW5fYm90X3RlbXBsYXRlKCksIHsKICAgICAgICAgICAgICBjb21wYW55bmFtZTogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlpZDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBlbWFpbDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgZG9tYWluOiBfdGhpczMudGVtcGxhdGVzW2VkaXRpbmRleF0uZG9tYWluLAogICAgICAgICAgICAgIHRlbXBsYXRlX2lkOiB0ZW1wbGF0ZV9pZF9hcGksCiAgICAgICAgICAgICAgdGVtcGxhdGVfbmFtZTogX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnRlbXBsYXRlX25hbWUsCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICBzdHJ1Y3R1cmU6IHN0cnVjdHVyZSwKICAgICAgICAgICAgICBjZW5zZV90ZW1wbGF0ZV9pZDogY2Vuc2VfdGVtcGxhdGVfaWRfYXBpCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzMy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIC8vIGlmKCkKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBFZGl0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lOiAyMDAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJGYWlsdXJlIikgewogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWU6IDI1MDAKICAgICAgICAgICAgICAgIH0pOyAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIC8vICRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIC8vIH0sIDEwMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS50ZW1wbGF0ZV90eXBlID09ICdjZW5zZScpIHsKICAgICAgICAgICAgdmFyIHRlbXBsYXRlX2lkX2FwaSA9IG51bGw7CiAgICAgICAgICAgIHZhciBjZW5zZV90ZW1wbGF0ZV9pZF9hcGkgPSBfdGhpczMudGVtcGxhdGVzW2VkaXRpbmRleF0udGVtcGxhdGVfaWQ7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnBvc3Rfb3Blbl9ib3RfdGVtcGxhdGUoKSwgewogICAgICAgICAgICAgIGNvbXBhbnluYW1lOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueWlkOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGVtYWlsOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBkb21haW46IF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5kb21haW4sCiAgICAgICAgICAgICAgdGVtcGxhdGVfaWQ6IG51bGwsCiAgICAgICAgICAgICAgdGVtcGxhdGVfbmFtZTogX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnRlbXBsYXRlX25hbWUsCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICBzdHJ1Y3R1cmU6IHN0cnVjdHVyZSwKICAgICAgICAgICAgICBjZW5zZV90ZW1wbGF0ZV9pZDogY2Vuc2VfdGVtcGxhdGVfaWRfYXBpCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzMy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIC8vIGlmKCkKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ287CiAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVtcGxhdGUgRWRpdGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIkZhaWx1cmUiKSB7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICAgIH0pOyAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIC8vICRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIC8vIH0sIDEwMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IC8vIHZhciB0ZW1wbGF0ZW5hbWUgPSB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnRlbXBsYXRlX25hbWUKCiAgICAgICAgfQogICAgICB9KTsgLy8gY29uc29sZS5sb2coc3RydWN0dXJlKTsKICAgIH0sCiAgICBnZW5lcmF0ZV90aW1lOiBmdW5jdGlvbiBnZW5lcmF0ZV90aW1lKCkgewogICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBoLCBtLCB0eXBlOwoKICAgICAgaWYgKGQuZ2V0SG91cnMoKSA+IDEyKSB7CiAgICAgICAgaCA9IGQuZ2V0SG91cnMoKSAlIDEyOwogICAgICAgIHR5cGUgPSAiIHBtIjsKICAgICAgfSBlbHNlIGlmIChkLmdldEhvdXJzKCkgPCAxMikgewogICAgICAgIGggPSBkLmdldEhvdXJzKCk7CiAgICAgICAgdHlwZSA9ICIgYW0iOwogICAgICB9IGVsc2UgaWYgKGQuZ2V0SG91cnMoKSA9PSAxMikgewogICAgICAgIGggPSBkLmdldEhvdXJzKCk7CiAgICAgICAgdHlwZSA9ICIgcG0iOwogICAgICB9CgogICAgICBtID0gZC5nZXRNaW51dGVzKCk7CgogICAgICBpZiAobSA8IDEwKSB7CiAgICAgICAgbSA9IDAgKyBTdHJpbmcobSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoICsgIjoiICsgbSArIHR5cGU7CiAgICB9LAogICAgc2Nyb2xsX2Rvd246IGZ1bmN0aW9uIHNjcm9sbF9kb3duKCkgewogICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNoYXQtYm9keSIpLnNjcm9sbEhlaWdodCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jaGF0LWJvZHkiKS5zY3JvbGxUb3AgLSAkKCIuY2hhdC1oaXMiKS5sYXN0KCkuaGVpZ2h0KCkgPD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNoYXQtYm9keSIpLmNsaWVudEhlaWdodCkgewogICAgICAgIHRoaXMudG9fc2Nyb2xsID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50b19zY3JvbGwgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZWRpdF9ib3Q6IGZ1bmN0aW9uIGVkaXRfYm90KGluZGV4KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAkKCcjZWRpdGJvdG1vZGVsJykubW9kYWwoJ3Nob3cnKTsKICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgIH0sIDYwMCk7CiAgICAgIHRoaXMuaXNfZWRpdCA9IHRydWU7CiAgICAgIHRoaXMuY2hhdCA9IFtdOwogICAgICB0aGlzLmJvdHF1ZXN0aW9ucyA9IFtdOwogICAgICB0aGlzLmVkaXRpbmRleCA9IGluZGV4OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmVbaV0uZXZlbnQgPT0gImJvdCIpIHsKICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgcmVjZWl2aW5nOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9vbmx5OiB0cnVlLAogICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgICBkYXRhOiB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlW2ldLmRhdGEsCiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlW2ldLm1ldGFkYXRhIC8vIGRvbWFpbjogdGVtcGxhdGVzW2luZGV4XS5kb21haW4sCiAgICAgICAgICAgIC8vIHRlbXBsYXRlX2lkOiB0ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX2lkLAogICAgICAgICAgICAvLyB0ZW1wbGF0ZV9uYW1lOiB0ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX25hbWUsCgogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmJvdHF1ZXN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IGksCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmVbaV0udGV4dAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnN0cnVjdHVyZVtpXS5ldmVudCA9PSAidXNlciIpIHsKICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnN0cnVjdHVyZVtpXS50ZXh0LAogICAgICAgICAgICBzZW5kaW5nOiB0cnVlLAogICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICAgIGRlbGl2ZXJlZDogdHJ1ZSwKICAgICAgICAgICAgZHJvcGRvd246ICIiLAogICAgICAgICAgICBldmVudDogInVzZXIiCiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIGNvbnNvbGUubG9nKCdpJyxpKTsKCiAgICAgIH0KCiAgICAgIHRoaXMudGVtcF9zdHJ1Y3R1cmUgPSB0aGlzLmNoYXQ7IC8vIGNvbnNvbGUubG9nKHRoaXMuZWRpdGluZGV4KTsKICAgICAgLy8gJCgnI2VkaXRib3Rtb2RlbCcpLm1vZGFsKCdzaG93Jyk7CiAgICB9LAogICAgZWRpdHZhbHVlOiBmdW5jdGlvbiBlZGl0dmFsdWUoaW5kZXgpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRpbnB1dCIgKyBpbmRleCkuZGlzYWJsZWQgPSAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRpbnB1dCIgKyBpbmRleCkuZGlzYWJsZWQ7CiAgICB9LAogICAgYWRkcXVlc3Rpb246IGZ1bmN0aW9uIGFkZHF1ZXN0aW9uKCkgewogICAgICB2YXIgZWRpdGluZGV4ID0gdGhpcy5lZGl0aW5kZXg7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuc2VsZWN0ZWRfcXVlc3Rpb247IC8vIGNvbnNvbGUubG9nKGluZGV4KTsKCiAgICAgIGlmIChpbmRleCA9PSAnYScpIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIktpbmRseSBTZWxlY3QgYSBRdWVzdGlvbiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hhdCA9IFtdOwogICAgICAgIHRoaXMuYm90cXVlc3Rpb25zID0gW107CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGluZGV4OyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpXS5ldmVudCA9PSAiYm90IikgewogICAgICAgICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAgICAgICAgcmVjZWl2aW5nOiB0cnVlLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICAgICAgdGltZTogdGhpcy5nZW5lcmF0ZV90aW1lKCksCiAgICAgICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgICAgIGRhdGE6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLmRhdGEsCiAgICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLm1ldGFkYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmJvdHF1ZXN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgICB2YWx1ZTogaSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpXS50ZXh0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpXS5ldmVudCA9PSAidXNlciIpIHsKICAgICAgICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgICAgc2VuZGluZzogdHJ1ZSwKICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgICBkZWxpdmVyZWQ6IHRydWUsCiAgICAgICAgICAgICAgZHJvcGRvd246ICIiLAogICAgICAgICAgICAgIGV2ZW50OiAidXNlciIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAgICByZWNlaXZpbmc6IHRydWUsCiAgICAgICAgICB0ZXh0OiAnICAgICAnLAogICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgIGV2ZW50OiAiYm90IiwKICAgICAgICAgIGRhdGE6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLmRhdGEsCiAgICAgICAgICBtZXRhZGF0YTogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaV0ubWV0YWRhdGEKICAgICAgICB9KTsKICAgICAgICB2YXIgYyA9IGluZGV4ICsgMjsKICAgICAgICBpID0gbnVsbDsgLy8gY29uc29sZS5sb2coYyk7CgogICAgICAgIGZvciAodmFyIGkgPSBjOyBpIDw9IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaSAtIDFdLmV2ZW50ID09ICJib3QiKSB7CiAgICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgICByZWNlaXZpbmc6IHRydWUsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaSAtIDFdLnRleHQsCiAgICAgICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICAgICAgdGltZTogdGhpcy5nZW5lcmF0ZV90aW1lKCksCiAgICAgICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgICAgIGRhdGE6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2kgLSAxXS5kYXRhLAogICAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpIC0gMV0ubWV0YWRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYm90cXVlc3Rpb25zLnB1c2goewogICAgICAgICAgICAgIHZhbHVlOiBpIC0gMiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpIC0gMV0udGV4dAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaSAtIDFdLmV2ZW50ID09ICJ1c2VyIikgewogICAgICAgICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaSAtIDFdLnRleHQsCiAgICAgICAgICAgICAgc2VuZGluZzogdHJ1ZSwKICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgICBkZWxpdmVyZWQ6IHRydWUsCiAgICAgICAgICAgICAgZHJvcGRvd246ICIiLAogICAgICAgICAgICAgIGV2ZW50OiAidXNlciIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRlbXBfc3RydWN0dXJlID0gdGhpcy5jaGF0OwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGF0aW5wdXQiICsgKGluZGV4ICsgMSkpLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVxdWVzdGlvbjogZnVuY3Rpb24gZGVsZXRlcXVlc3Rpb24oaW5kZXgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy50ZW1wX3N0cnVjdHVyZSk7CiAgICAgIHRoaXMuY2hhdCA9IFtdOwogICAgICB0aGlzLmJvdHF1ZXN0aW9ucyA9IFtdOyAvLyBjb25zb2xlLmxvZyh0aGlzLnRlbXBfc3RydWN0dXJlKTsKCiAgICAgIHZhciBlZGl0aW5kZXggPSB0aGlzLmVkaXRpbmRleDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZXg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRlbXBfc3RydWN0dXJlW2ldLmV2ZW50ID09ICJib3QiKSB7CiAgICAgICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAgICAgIHJlY2VpdmluZzogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS50ZXh0LAogICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgdGltZTogdGhpcy5nZW5lcmF0ZV90aW1lKCksCiAgICAgICAgICAgIGV2ZW50OiAiYm90IiwKICAgICAgICAgICAgZGF0YTogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS5kYXRhLAogICAgICAgICAgICBtZXRhZGF0YTogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS5tZXRhZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmJvdHF1ZXN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IGksCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcF9zdHJ1Y3R1cmVbaV0udGV4dAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy50ZW1wX3N0cnVjdHVyZVtpXS5ldmVudCA9PSAidXNlciIpIHsKICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS50ZXh0LAogICAgICAgICAgICBzZW5kaW5nOiB0cnVlLAogICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICAgIGRlbGl2ZXJlZDogdHJ1ZSwKICAgICAgICAgICAgZHJvcGRvd246ICIiLAogICAgICAgICAgICBldmVudDogInVzZXIiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGkgPSBudWxsOwogICAgICB2YXIgYyA9IGluZGV4ICsgMTsKCiAgICAgIGZvciAodmFyIGkgPSBjOyBpIDwgdGhpcy50ZW1wX3N0cnVjdHVyZS5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRlbXBfc3RydWN0dXJlW2ldLmV2ZW50ID09ICJib3QiKSB7CiAgICAgICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAgICAgIHJlY2VpdmluZzogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS50ZXh0LAogICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgdGltZTogdGhpcy5nZW5lcmF0ZV90aW1lKCksCiAgICAgICAgICAgIGV2ZW50OiAiYm90IiwKICAgICAgICAgICAgZGF0YTogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS5kYXRhLAogICAgICAgICAgICBtZXRhZGF0YTogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS5tZXRhZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmJvdHF1ZXN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IGksCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcF9zdHJ1Y3R1cmVbaV0udGV4dAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy50ZW1wX3N0cnVjdHVyZVtpXS5ldmVudCA9PSAidXNlciIpIHsKICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS50ZXh0LAogICAgICAgICAgICBzZW5kaW5nOiB0cnVlLAogICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICAgIGRlbGl2ZXJlZDogdHJ1ZSwKICAgICAgICAgICAgZHJvcGRvd246ICIiLAogICAgICAgICAgICBldmVudDogInVzZXIiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudGVtcF9zdHJ1Y3R1cmUgPSB0aGlzLmNoYXQ7CiAgICB9LAogICAgZmlsdGVydGVtcGxhdGVzOiBmdW5jdGlvbiBmaWx0ZXJ0ZW1wbGF0ZXMoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2Vuc2V0ZW1wbGF0ZXMsICdjZW5zZScpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmFkbWludGVtcGxhdGVzLCAnYWRtaW4nKTsgLy8gaWYodGhpcy5hZG1pbnRlbXBsYXRlcy5sZW5ndGggPiAwKXsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jZW5zZXRlbXBsYXRlcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIGlmICh0aGlzLmFkbWludGVtcGxhdGVzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLmNlbnNldGVtcGxhdGVzW2ldWydmaW5hbF90ZW1wbGF0ZV9pZCddID0gdGhpcy5jZW5zZXRlbXBsYXRlc1tpXS50ZW1wbGF0ZV9pZDsKICAgICAgICAgIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ3RlbXBsYXRlX3R5cGUnXSA9ICdjZW5zZSc7IC8vIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ3N1YnNjcmliZWQnXSA9IGZhbHNlOwoKICAgICAgICAgIGlmICh0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnN1YnNjcmliZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsnc3Vic2NyaWJlZF92YWwnXSA9ICJEb250U3Vic2NyaWJlIjsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jZW5zZXRlbXBsYXRlc1tpXS5zdWJzY3JpYmVkID09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsnc3Vic2NyaWJlZF92YWwnXSA9ICJTdWJzY3JpYmUiOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMudGVtcGxhdGVzLnB1c2godGhpcy5jZW5zZXRlbXBsYXRlc1tpXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5hZG1pbnRlbXBsYXRlcy5sZW5ndGg7IGogKz0gMSkgewogICAgICAgICAgICBpZiAoKHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0uY2Vuc2VfdGVtcGxhdGVfaWQgIT0gbnVsbCB8fCB0aGlzLmFkbWludGVtcGxhdGVzW2pdLmNlbnNlX3RlbXBsYXRlX2lkICE9IHVuZGVmaW5lZCkgJiYgdGhpcy5hZG1pbnRlbXBsYXRlc1tqXS5jZW5zZV90ZW1wbGF0ZV9pZCA9PSB0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnRlbXBsYXRlX2lkKSB7CiAgICAgICAgICAgICAgdGhpcy5hZG1pbnRlbXBsYXRlc1tqXVsnZmluYWxfdGVtcGxhdGVfaWQnXSA9IHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0udGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdGhpcy5hZG1pbnRlbXBsYXRlc1tqXVsndGVtcGxhdGVfdHlwZSddID0gJ2FkbWluJzsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0uc3Vic2NyaWJlZCA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgdGhpcy5hZG1pbnRlbXBsYXRlc1tqXVsnc3Vic2NyaWJlZF92YWwnXSA9ICJEb250U3Vic2NyaWJlIjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0uc3Vic2NyaWJlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkbWludGVtcGxhdGVzW2pdWydzdWJzY3JpYmVkX3ZhbCddID0gIlN1YnNjcmliZSI7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5wdXNoKHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0uY2Vuc2VfdGVtcGxhdGVfaWQgIT0gbnVsbCB8fCB0aGlzLmFkbWludGVtcGxhdGVzW2pdLmNlbnNlX3RlbXBsYXRlX2lkICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ2ZpbmFsX3RlbXBsYXRlX2lkJ10gPSB0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnRlbXBsYXRlX2lkOwoKICAgICAgICAgICAgICBpZiAodGhpcy5jZW5zZXRlbXBsYXRlc1tpXS5zdWJzY3JpYmVkID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNlbnNldGVtcGxhdGVzW2ldWydzdWJzY3JpYmVkX3ZhbCddID0gIkRvbnRTdWJzY3JpYmUiOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jZW5zZXRlbXBsYXRlc1tpXS5zdWJzY3JpYmVkID09IHRydWUpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ3N1YnNjcmliZWRfdmFsJ10gPSAiU3Vic2NyaWJlIjsKICAgICAgICAgICAgICB9IC8vIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ3N1YnNjcmliZWQnXSA9IGZhbHNlOwoKCiAgICAgICAgICAgICAgdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsndGVtcGxhdGVfdHlwZSddID0gJ2NlbnNlJzsKICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5wdXNoKHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIH0gZWxzZSB7CiAgICAgIC8vICAgZm9yKGxldCBpID0gMDsgaTx0aGlzLmNlbnNldGVtcGxhdGVzLmxlbmd0aDsgaSArPSAxKXsKICAgICAgLy8gICAgIHRoaXMudGVtcGxhdGVzID0gdGhpcy5jZW5zZXRlbXBsYXRlczsKICAgICAgLy8gICB9CiAgICAgIC8vIH0KCgogICAgICBjb25zb2xlLmxvZyh0aGlzLnRlbXBsYXRlcyk7CiAgICB9LAogICAgZGVsZXRlX2JvdDogZnVuY3Rpb24gZGVsZXRlX2JvdChpbmRleCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnRlbXBsYXRlc1tpbmRleF0udGVtcGxhdGVfdHlwZSA9PSAnY2Vuc2UnKSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJZb3UgQ2Fubm90IERlbGV0ZSBTdXBlckFkbWluIFRlbXBsYXRlcyIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV90eXBlICE9ICdjZW5zZScpIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICAgIHRleHQ6ICIgWW91IHdhbnQgdG8gRGVsZXRlIHRoaXMgVGVtcGxhdGU/IiwKICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICBheGlvcy5kZWxldGUoYXBpX2NhbGxzLnBvc3Rfb3Blbl9ib3RfdGVtcGxhdGUoKSwgewogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgY29tcGFueW5hbWU6IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlpZDogX3RoaXM1LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICAgIGVtYWlsOiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICAgIHRva2VuOiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogX3RoaXM1LnRlbXBsYXRlc1tpbmRleF0uZmluYWxfdGVtcGxhdGVfaWQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM1LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIiAmJiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHJvdXRlci5nbzsKICAgICAgICAgICAgICAgIH0sIDExMDApOwogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJEZWxldGVkIiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczUuJHJvdXRlci5nbzsKICAgICAgICAgICAgICAgIH0sIDExMDApOwogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLlBsZWFzZSBUcnkgQWdhaW4iLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHN1YnNjcmliZXRlbXBsYXRlOiBmdW5jdGlvbiBzdWJzY3JpYmV0ZW1wbGF0ZShpbmRleCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIC8vIGRlYnVnZ2VyOwogICAgICB2YXIgeCA9IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdWJzY3JpYmVkOyAvLyB2YXIgeSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKHRoaXMudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV9pZCkudmFsdWU7CgogICAgICBpZiAodGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnN1YnNjcmliZWRfdmFsID09ICJTdWJzY3JpYmUiKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIHN1YnNjcmliZSB0byB0aGlzIHRlbXBsYXRlPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgaWYgKF90aGlzNi50ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX3R5cGUgPT0gJ2FkbWluJykgewogICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV9pZF9hcGkgPSBfdGhpczYudGVtcGxhdGVzW2luZGV4XS5maW5hbF90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVfdHlwZSA9ICdjdXN0b20nOyAvLyB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gdGhpcy50ZW1wbGF0ZXNbaW5kZXhdLmNlbnNlX3RlbXBsYXRlX2lkOwogICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNi50ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX3R5cGUgPT0gJ2NlbnNlJykgewogICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV9pZF9hcGkgPSBfdGhpczYudGVtcGxhdGVzW2luZGV4XS5maW5hbF90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVfdHlwZSA9ICdjZW5zZSc7IC8vICB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gdGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX2lkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5vcGVuX2JvdF90ZW1wbGF0ZV9zdWJzY3JpcHRpb24oKSwgewogICAgICAgICAgICAgIGNvbXBhbnluYW1lOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueWlkOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGVtYWlsOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogdGVtcGxhdGVfaWRfYXBpLAogICAgICAgICAgICAgIHNldF9zdWJzY3JpcHRpb246IHRydWUsCiAgICAgICAgICAgICAgc3Vic2NyaWJlZDogdHJ1ZSwKICAgICAgICAgICAgICB0ZW1wbGF0ZV90eXBlOiB0ZW1wbGF0ZV90eXBlCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3Vic2NyaWJlZF92YWwgPT0gIkRvbnRTdWJzY3JpYmUiKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0ZXh0OiAiIFlvdSBkb24ndCB3YW50IHRvIHN1YnNjcmliZSB0byB0aGlzIHRlbXBsYXRlPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgaWYgKF90aGlzNi50ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX3R5cGUgPT0gJ2FkbWluJykgewogICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV9pZF9hcGkgPSBfdGhpczYudGVtcGxhdGVzW2luZGV4XS5maW5hbF90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgICB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gX3RoaXM2LnRlbXBsYXRlc1tpbmRleF0uY2Vuc2VfdGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlX3R5cGUgPSAnY3VzdG9tJzsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczYudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV90eXBlID09ICdjZW5zZScpIHsKICAgICAgICAgICAgICB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gX3RoaXM2LnRlbXBsYXRlc1tpbmRleF0uZmluYWxfdGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlX2lkX2FwaSA9IF90aGlzNi50ZW1wbGF0ZXNbaW5kZXhdLmZpbmFsX3RlbXBsYXRlX2lkOwogICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV90eXBlID0gJ2NlbnNlJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMub3Blbl9ib3RfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKCksIHsKICAgICAgICAgICAgICBjb21wYW55bmFtZTogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlpZDogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBlbWFpbDogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgdGVtcGxhdGVfaWQ6IHRlbXBsYXRlX2lkX2FwaSwKICAgICAgICAgICAgICBzZXRfc3Vic2NyaXB0aW9uOiB0cnVlLAogICAgICAgICAgICAgIHN1YnNjcmliZWQ6IGZhbHNlLAogICAgICAgICAgICAgIHRlbXBsYXRlX3R5cGU6IHRlbXBsYXRlX3R5cGUKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},null]}