{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue","mtime":1660042032551},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IHsgU2NyaXB0IH0gZnJvbSAidm0iOwppbXBvcnQgeyB0cnVuY2F0ZSB9IGZyb20gImZzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpdGVtX2xpc3Q6IFtdLAogICAgICBjaGVja2VkX2xpc3Q6IFtdLAogICAgICBmaWxlX2xhYmVsOiBudWxsLAogICAgICBhZGRfZWRpdDogdHJ1ZSwKICAgICAgZGVsZXRlX2xpc3Q6IFtdLAogICAgICB0cmF2ZWw6IFswLCAxLCAyXSwKICAgICAgZWRpdF9pbmRleDogbnVsbCwKICAgICAgZG9jX2lkOiAiIiwKICAgICAgb2xkX2ZpbGVfbmFtZTogIiIsCiAgICAgIHByb2R1Y3RfbmFtZTogIiIsCiAgICAgIGNzdmZpbGU6ICIiLAogICAgICBjc3ZmaWxlbmFtZTogIkNob29zZSBDU1YgRmlsZSIsCiAgICAgIGVkaXRwcm9kdWN0bmFtZTogZmFsc2UsCiAgICAgIGVkaXRjc3ZmaWxlOiBmYWxzZSwKICAgICAgcGFnZV9ubzogMSwKICAgICAgcGVyX3BhZ2U6IDEwMCwKICAgICAgdG90YWxfcGFnZXM6IDAsCiAgICAgIHBhZ2VfYXJyYXk6IFtdLAogICAgICBudW1iZXJfb2Zfcm93czogMCwKICAgICAgbmV3X3Byb2R1Y3Q6IHt9LAogICAgICBpc2VkaXRwcm9kdWN0aWQ6IGZhbHNlLAogICAgICBpc2VkaXRjYXRlZ29yeW5hbWU6IGZhbHNlLAogICAgICB2aWV3dXJsOiBudWxsLAogICAgICBjb2xfbGlzdDogW10sCiAgICAgIGNvbF9sZW5ndGg6IDAsCiAgICAgIGlzb2s6IGZhbHNlLAogICAgICBjb2xfa2V5OiBbXSwKICAgICAgLy8gc2VhcmNoX2J5OiAnJywKICAgICAgc2VhcmNoX25hbWU6ICIiLAogICAgICBzZWxlY3RfbGlzdDogW10sCiAgICAgIHNwaW5uZXJPbjogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgaXNnZXRjc3Y6IHRydWUsCiAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIFByb2R1Y3RzIEFkZGVkIFlldCIgfHwgcmVzcG9uc2UuZGF0YSA9PSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiB8fCByZXNwb25zZS5kYXRhLmNzdmZpbGUubGVuZ3RoID09IDApIHsKICAgICAgICBfdGhpcy5mb3JkZWZhdWx0KCk7CiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5jc3ZmaWxlLmxlbmd0aCkgewogICAgICAgIF90aGlzLml0ZW1MaXN0KHJlc3BvbnNlLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7Ly8gdmFyIHZtID0gdGhpczsKICAgIC8vICQoIiNzZWxlY3RhbGwiKS5jbGljayhmdW5jdGlvbigpIHsKICAgIC8vICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgIC8vICAgICAvLyAkKCdkaXY6aW5wdXQnKS5wcm9wKCdjaGVja2VkJyx0cnVlKTsKICAgIC8vICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgIC8vICAgICBjb25zb2xlLmxvZygiaGVlZXkiKTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB2bS5jaGVja2VkX2xpc3QgPSBbXTsKICAgIC8vICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAvLyAgICAgY29uc29sZS5sb2coImhlZWV5MiIpOwogICAgLy8gICB9CiAgICAvLyB9KTsKICB9LAogIC8vIGNoZWNrQWxsKGVsZSkgewogIC8vICAgICAgdmFyIGNoZWNrYm94ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTsKICAvLyAgICAgIGlmIChlbGUuY2hlY2tlZCkgewogIC8vICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGkrKykgewogIC8vICAgICAgICAgICAgICBpZiAoY2hlY2tib3hlc1tpXS50eXBlID09ICdjaGVja2JveCcpIHsKICAvLyAgICAgICAgICAgICAgICAgIGNoZWNrYm94ZXNbaV0uY2hlY2tlZCA9IHRydWU7CiAgLy8gICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICB9CiAgLy8gICAgICB9IGVsc2UgewogIC8vICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGkrKykgewogIC8vICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpKQogIC8vICAgICAgICAgICAgICBpZiAoY2hlY2tib3hlc1tpXS50eXBlID09ICdjaGVja2JveCcpIHsKICAvLyAgICAgICAgICAgICAgICAgIGNoZWNrYm94ZXNbaV0uY2hlY2tlZCA9IGZhbHNlOwogIC8vICAgICAgICAgICAgICB9CiAgLy8gICAgICAgICAgfQogIC8vICAgICAgfQogIC8vICB9LAogIG1ldGhvZHM6IHsKICAgIG1ha2VfdHJ1ZTogZnVuY3Rpb24gbWFrZV90cnVlKCkgewogICAgICB0aGlzLmlzb2sgPSB0cnVlOwogICAgfSwKICAgIGRvd25sb2FkX3NhbXBsZV9maWxlOiBmdW5jdGlvbiBkb3dubG9hZF9zYW1wbGVfZmlsZSgpIHsKICAgICAgdmFyIHNhbXBsZV9jc3ZfZmlsZV91cmwgPSAiIjsKICAgICAgd2luZG93Lm9wZW4oc2FtcGxlX2Nzdl9maWxlX3VybCwgIl9ibGFuayIpOwogICAgfSwKICAgIGZvcmRlZmF1bHQ6IGZ1bmN0aW9uIGZvcmRlZmF1bHQoKSB7CiAgICAgIHRoaXMubmV3X3Byb2R1Y3RbIkNhdGVnb3J5SWQiXSA9IG51bGwsIHRoaXMubmV3X3Byb2R1Y3RbIkNhdGVnb3J5TmFtZSJdID0gIiIsIHRoaXMubmV3X3Byb2R1Y3RbIlByb2R1Y3RJZCJdID0gbnVsbCwgdGhpcy5uZXdfcHJvZHVjdFsiUHJvZHVjdE5hbWUiXSA9ICIiLCB0aGlzLm5ld19wcm9kdWN0WyJQcm9kdWN0VXJsIl0gPSAiIiwgdGhpcy5uZXdfcHJvZHVjdFsiUHJvZHVjdEltYWdlVXJsIl0gPSAiIiwgdGhpcy5uZXdfcHJvZHVjdFsiUXVhbnRpdHkiXSA9IG51bGwsIHRoaXMubmV3X3Byb2R1Y3RbIlVuaXRQcmljZSJdID0gbnVsbCwgdGhpcy5uZXdfcHJvZHVjdFsiV2VpZ2h0Il0gPSBudWxsLCB0aGlzLmNvbF9saXN0LnB1c2goIkNBVEVHT1JZIElEIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJDYXRlZ29yeUlkIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiQ0FURUdPUlkgTkFNRSIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiQ2F0ZWdvcnlOYW1lIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiUFJPRFVDVCBJRCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUHJvZHVjdElkIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiUFJPRFVDVCBOQU1FIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJQcm9kdWN0TmFtZSIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgVVJMIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJQcm9kdWN0VXJsIik7CiAgICAgIHRoaXMuY29sX2xpc3QucHVzaCgiUFJPRFVDVCBJTUFHRSBVUkwiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlByb2R1Y3RJbWFnZVVybCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlFVQU5USVRZIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJRdWFudGl0eSIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlVOSVQgUFJJQ0UiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlVuaXRQcmljZSIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIldFSUdIVCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiV2VpZ2h0Iik7CiAgICAgIHRoaXMuY29sX2xlbmd0aCA9IDk7CiAgICAgIHRoaXMuaXNvayA9IHRydWU7CiAgICB9LAogICAgZG93bmxvYWRfY3N2OiBmdW5jdGlvbiBkb3dubG9hZF9jc3YoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgaXNkb3dubG9hZDogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgIT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3aW5kb3cub3BlbihyZXNwb25zZS5kYXRhLmZpbGVkb3dubG9hZHVybCwgIl9ibGFuayIpOwogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiVHJ5IFVwbG9hZGluZyBGaWxlL1Byb2R1Y3QiLCAiRXJyb3IgT2NjdXJlZCBXaGlsZSBEb3dubG9hZGluZyBGaWxlIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hfcHJvZHVjdDogZnVuY3Rpb24gc2VhcmNoX3Byb2R1Y3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gaWYodGhpcy5zZWFyY2hfYnkhPScnKXsKICAgICAgaWYgKHRoaXMuc2VhcmNoX25hbWUgIT0gIiIpIHsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoX2J5LAogICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHICE9ICJOTyBQUk9EVUNUUyBGT1VORCIpIHsKICAgICAgICAgICAgX3RoaXMzLmlzb2sgPSB0cnVlOwogICAgICAgICAgICBfdGhpczMuaXRlbV9saXN0ID0gW107CiAgICAgICAgICAgIF90aGlzMy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAgICAgX3RoaXMzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBfdGhpczMuaXRlbV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5wcm9kdWN0c1tpXSk7CgogICAgICAgICAgICAgIF90aGlzMy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMy5pdGVtX2xpc3QpOwogICAgICAgICAgICBfdGhpczMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLlBhZ2VDb3VudDsKCiAgICAgICAgICAgIF90aGlzMy5zZXRwYWdpbmF0aW9uKF90aGlzMy5wYWdlX25vKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiTm8gTWF0Y2ggRm91bmQiKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJFbnRlciBwcm9wZXIgZGF0YSBmb3Igc2VhcmNoaW5nIik7CiAgICAgIH0gLy8gfWVsc2V7CiAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJTZWxlY3QgaGVhZGVyIGZvciBzZWFyY2hpbmciKTsKICAgICAgLy8gfQoKICAgIH0sCiAgICBjaGFuZ2VfaWQ6IGZ1bmN0aW9uIGNoYW5nZV9pZCgpIHsKICAgICAgdGhpcy5pc2VkaXRwcm9kdWN0aWQgPSB0cnVlOwogICAgfSwKICAgIHZpZXc6IGZ1bmN0aW9uIHZpZXcoaW5kZXgpIHsKICAgICAgdGhpcy52aWV3dXJsID0gdGhpcy5pdGVtX2xpc3RbaW5kZXhdWyJQcm9kdWN0SW1hZ2VVcmwiXTsKICAgIH0sCiAgICBpdGVtTGlzdDogZnVuY3Rpb24gaXRlbUxpc3QobWVzc2FnZSkgewogICAgICB0aGlzLmlzb2sgPSB0cnVlOwogICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gbWVzc2FnZS5jc3ZmaWxlLmxlbmd0aDsKICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IG1lc3NhZ2UuUGFnZUNvdW50OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmNzdmZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLml0ZW1fbGlzdC5wdXNoKG1lc3NhZ2UuY3N2ZmlsZVtpXSk7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5maWVsZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLm5ld19wcm9kdWN0W21lc3NhZ2UuZmllbGRzW2ldLnJlcGxhY2UoIiAiLCAiIikucmVwbGFjZSgiICIsICIiKV0gPSAiIjsKICAgICAgICB0aGlzLmNvbF9saXN0LnB1c2gobWVzc2FnZS5maWVsZHNbaV0pOwoKICAgICAgICBpZiAobWVzc2FnZS5maWVsZHNbaV0gIT0gIlByb2R1Y3QgVXJsIiAmJiBtZXNzYWdlLmZpZWxkc1tpXSAhPSAiUHJvZHVjdCBJbWFnZSBVcmwiKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdF9saXN0LnB1c2gobWVzc2FnZS5maWVsZHNbaV0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xfa2V5LnB1c2gobWVzc2FnZS5maWVsZHNbaV0ucmVwbGFjZSgiICIsICIiKS5yZXBsYWNlKCIgIiwgIiIpKTsKICAgICAgfQoKICAgICAgdGhpcy5jb2xfbGVuZ3RoID0gbWVzc2FnZS5maWVsZHMubGVuZ3RoOwogICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgIH0sCiAgICBkZWxldGVfcHJvZHVjdDogZnVuY3Rpb24gZGVsZXRlX3Byb2R1Y3QoaW5kZXgpIHsKICAgICAgdGhpcy5jaGVja19saXN0X2FycmF5KGluZGV4KTsKICAgICAgdGhpcy5kZWxldGVfbXVsdGlwbGVfcHJvZHVjdCgpOwogICAgfSwKICAgIGRlbGV0ZV9tdWx0aXBsZV9wcm9kdWN0OiBmdW5jdGlvbiBkZWxldGVfbXVsdGlwbGVfcHJvZHVjdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgbGVuID0gdGhpcy5jaGVja2VkX2xpc3QubGVuZ3RoOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdFtpXSkgewogICAgICAgICAgdGhpcy5kZWxldGVfbGlzdC5wdXNoKHsKICAgICAgICAgICAgaWQ6IHRoaXMuaXRlbV9saXN0W2ldLkRvY3VtZW50SWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJObyBwcm9kdWN0IHNlbGVjdGVkISIsCiAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIGVtYWlsOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICB0b2tlbjogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGRvY2lkczogX3RoaXM0LmRlbGV0ZV9saXN0LAogICAgICAgICAgICAgIGlzZGVsZXRlOiB0cnVlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzNC4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiUHJvZHVjdHMgRGVsZXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogIkRlbGV0ZWQhIiwKICAgICAgICAgICAgICAgICAgdGV4dDogIllvdXIgcHJvZHVjdHMgaGF2ZSBiZWVuIGRlbGV0ZWQuIiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRXJyb3IhISIsCiAgICAgICAgICAgICAgICAgIHRleHQ6ICJFcnJvciBvY2N1cmVkIHdoaWxlIGRlbGV0aW5nIGZpbGUiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldEZpbGU6IGZ1bmN0aW9uIGdldEZpbGUoZSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICB0aGlzLmNzdmZpbGVuYW1lID0gZmlsZS5uYW1lOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNS5jc3ZmaWxlID0gcmVhZGVyLnJlc3VsdDsKICAgICAgfTsKCiAgICAgIHRoaXMuZWRpdGNzdmZpbGUgPSB0cnVlOwogICAgfSwKICAgIGNoZWNrX2xpc3RfYXJyYXk6IGZ1bmN0aW9uIGNoZWNrX2xpc3RfYXJyYXkoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09ICJhbGwiKSB7CiAgICAgICAgdmFyIHJvbGVfbGVuZ3RoID0gdGhpcy5udW1iZXJfb2Zfcm93czsKICAgICAgICB2YXIgY2hlY2tlZGJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbdHlwZT1jaGVja2JveF0iKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb2xlX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdFtpXSA9ICF0aGlzLmNoZWNrZWRfbGlzdFtpXTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPD0gcm9sZV9sZW5ndGg7IF9pKyspIHsKICAgICAgICAgIGlmIChjaGVja2VkYm94ZXNbX2ldLmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICBjaGVja2VkYm94ZXNbX2ldLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoZWNrZWRib3hlc1tfaV0uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hlY2tlZF9saXN0W2luZGV4XSA9ICF0aGlzLmNoZWNrZWRfbGlzdFtpbmRleF07CiAgICAgIH0gLy8gY29uc29sZS5sb2cocm9sZV9sZW5ndGgsY2hlY2tlZGJveGVzLHRoaXMuY2hlY2tlZF9saXN0KTsKCiAgICB9LAogICAgZWRpdF9pdGVtOiBmdW5jdGlvbiBlZGl0X2l0ZW0oaW5kZXgpIHsKICAgICAgdGhpcy5uZXdfcHJvZHVjdCA9IHt9OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbF9sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9IHRoaXMuaXRlbV9saXN0W2luZGV4XVt0aGlzLmNvbF9rZXlbaV1dOwogICAgICB9CgogICAgICB0aGlzLmRvY19pZCA9IHRoaXMuaXRlbV9saXN0W2luZGV4XS5Eb2N1bWVudElkOwogICAgICB0aGlzLmFkZF9lZGl0ID0gZmFsc2U7CiAgICB9LAogICAgYWRkX2NzdmZpbGU6IGZ1bmN0aW9uIGFkZF9jc3ZmaWxlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAodGhpcy5jc3ZmaWxlbmFtZSA9PSAiIikgewogICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIHNlbGVjdCBjc3YgZmlsZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBjc3ZmaWxlbmFtZTogdGhpcy5jc3ZmaWxlbmFtZSwKICAgICAgICAgIGNzdmZpbGVkYXRhOiB0aGlzLmNzdmZpbGUuc3BsaXQoImJhc2U2NCwiKVsxXSwKICAgICAgICAgIGlzdXBsb2FkOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAiRmlsZSBVcGxvYWRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJZb3VyIGZpbGUgaGFzIGJlZW4gdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzNi4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1pc3NpbmdfVmFsdWVzKSB7CiAgICAgICAgICAgIHZhciBtc2cgPSAiIjsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5NaXNzaW5nX1ZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIG1zZyA9IG1zZy5jb25jYXQocmVzcG9uc2UuZGF0YS5NaXNzaW5nX1ZhbHVlc1tpXSwgIjxicj4iKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJNaXNzaW5nIFZhbHVlcyBJbiBBYm92ZSBDb2x1bW5zIiwgbXNnKTsKICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiRXJyb3Igb2NjdXJlZCB3aGlsZSB1cGxvYWRpbmcgZmlsZSIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkX2l0ZW06IGZ1bmN0aW9uIGFkZF9pdGVtKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAodGhpcy5hZGRfZWRpdCkgewogICAgICAgIHZhciBpc2ZpbGxlZCA9IHRydWU7CiAgICAgICAgdmFyIGk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbF9sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9PSAiIiB8fCB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV0gPT0gbnVsbCkgewogICAgICAgICAgICBpc2ZpbGxlZCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGlzZmlsbGVkKSB7CiAgICAgICAgICB2YXIgeDsKCiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jb2xfbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgeCA9IHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXTsKCiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoeCkpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV0gPSBOdW1iZXIodGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBwcm9kdWN0ZGV0YWlsczogdGhpcy5uZXdfcHJvZHVjdCwKICAgICAgICAgICAgaXNhZGRwcm9kdWN0OiB0cnVlCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIlByb2R1Y3QgQWRkZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJUaGUgcHJvZHVjdCBoYXMgYmVlbiBhZGRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzNy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJFcnJvciBvY2N1cmVkIHdoaWxlIGFkZGluZyBwcm9kdWN0Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBGaWxsIEFsbCBGaWVsZHMiKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRydWUpIHsKICAgICAgICAgIHZhciBfeDsKCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLmNvbF9sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICAgIF94ID0gdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbX2kyXV07IC8vIGNvbnNvbGUubG9nKHgpOwoKICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihfeCkpIHx8IF94ID09IHRydWUgfHwgX3ggPT0gZmFsc2UgfHwgX3ggPT0gIiIgfHwgX3ggPT0gbnVsbCkge30gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbX2kyXV0gPSBOdW1iZXIodGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbX2kyXV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIHByb2R1Y3RkZXRhaWxzOiB0aGlzLm5ld19wcm9kdWN0LAogICAgICAgICAgICBkb2NpZDogdGhpcy5kb2NfaWQsCiAgICAgICAgICAgIGlzZWRpdHByb2R1Y3RpZDogdGhpcy5pc2VkaXRwcm9kdWN0aWQsCiAgICAgICAgICAgIGlzZWRpdDogdHJ1ZQogICAgICAgICAgfSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJDaGFuZ2VzIEFwcGxpZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJUaGUgcHJvZHVjdCBoYXMgYmVlbiBlZGl0ZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczcuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiRXJyb3Igb2NjdXJlZCB3aGlsZSBlZGl0aW5nIHByb2R1Y3QiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xlYXJfZmllbGRzOiBmdW5jdGlvbiBjbGVhcl9maWVsZHMoKSB7CiAgICAgIHRoaXMubmV3X3Byb2R1Y3QgPSB7fTsKICAgICAgdGhpcy5lZGl0cHJvZHVjdGlkID0gZmFsc2U7CiAgICB9LAogICAgcGFnaW5hdGlvbl9jbGFzczogZnVuY3Rpb24gcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgICBpZiAoaW5kZXggPT0gdGhpcy5wYWdlX25vKSB7CiAgICAgICAgcmV0dXJuICIgYWN0aXZlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBjYWxsc2VhcmNoOiBmdW5jdGlvbiBjYWxsc2VhcmNoKCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLnNlYXJjaF9wcm9kdWN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRwYWdpbmF0aW9uOiBmdW5jdGlvbiBzZXRwYWdpbmF0aW9uKHBhZ2Vfbm8pIHsKICAgICAgdGhpcy5wYWdlX2FycmF5ID0gW107CgogICAgICBpZiAodGhpcy50b3RhbF9wYWdlcyA8PSA3KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRvdGFsX3BhZ2VzOyBpKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSAxKSB7CiAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgNDsgX2kzKyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pMyArIDEpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSB0aGlzLnRvdGFsX3BhZ2VzKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CgogICAgICAgIGZvciAodmFyIF9pNCA9IHRoaXMudG90YWxfcGFnZXMgLSA0OyBfaTQgPCB0aGlzLnRvdGFsX3BhZ2VzOyBfaTQrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k0ICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPD0gNCkgewogICAgICAgIGZvciAodmFyIF9pNSA9IDA7IF9pNSA8IHBhZ2Vfbm8gKyAzOyBfaTUrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k1ICsgMSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25vID49IHRoaXMudG90YWxfcGFnZXMgLSA0KSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CgogICAgICAgIGZvciAodmFyIF9pNiA9IHBhZ2Vfbm8gLSAzOyBfaTYgPCB0aGlzLnRvdGFsX3BhZ2VzOyBfaTYrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k2ICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwoKICAgICAgICBmb3IgKHZhciBfaTcgPSBwYWdlX25vIC0gMzsgX2k3IDw9IHBhZ2Vfbm8gKyAzOyBfaTcrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k3KTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9CiAgICB9LAogICAgcGFnZV9yZXF1aXJlOiBmdW5jdGlvbiBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIGlmIChwYWdlID09IDAgfHwgcGFnZSA9PSB0aGlzLnRvdGFsX3BhZ2VzICsgMSkge30gZWxzZSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CgogICAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9ICIiKSB7CiAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgaXNzZWFyY2g6IHRydWUsCiAgICAgICAgICAgIC8vIHNlYXJjaGJ5OiB0aGlzLnNlYXJjaF9ieSwKICAgICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgICBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICBwYWdlbm86IHRoaXMucGFnZV9ubwogICAgICAgICAgfSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXM4Lml0ZW1fbGlzdCA9IFtdOwogICAgICAgICAgICBfdGhpczguaXNvayA9IHRydWU7CiAgICAgICAgICAgIF90aGlzOC5jb2xfbGlzdCA9IFtdOwogICAgICAgICAgICBfdGhpczguY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgICAgIF90aGlzOC5jb2xfa2V5ID0gW107CiAgICAgICAgICAgIF90aGlzOC5jb2xfbGVuZ3RoID0gMDsKICAgICAgICAgICAgX3RoaXM4Lm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBfdGhpczguaXRlbV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5wcm9kdWN0c1tpXSk7CgogICAgICAgICAgICAgIF90aGlzOC5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzOC50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEuUGFnZUNvdW50OwoKICAgICAgICAgICAgX3RoaXM4LnNldHBhZ2luYXRpb24oX3RoaXM4LnBhZ2Vfbm8pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnVwbG9hZF9wcm9kdWN0X2NzdigpLCB7CiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc2dldGNzdjogdHJ1ZSwKICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiTm8gUHJvZHVjdHMgQWRkZWQgWWV0IiB8fCByZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiIHx8IHJlc3BvbnNlLmRhdGEuY3N2ZmlsZS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgIF90aGlzOC5mb3JkZWZhdWx0KCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5jc3ZmaWxlLmxlbmd0aCkgewogICAgICAgICAgICAgIF90aGlzOC5pdGVtX2xpc3QgPSBbXTsKICAgICAgICAgICAgICBfdGhpczguY29sX2xpc3QgPSBbXTsKICAgICAgICAgICAgICBfdGhpczguY29sX2tleSA9IFtdOwogICAgICAgICAgICAgIF90aGlzOC5jb2xfbGVuZ3RoID0gMDsKCiAgICAgICAgICAgICAgX3RoaXM4Lml0ZW1MaXN0KHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}