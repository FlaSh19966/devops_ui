{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Template.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Template.vue","mtime":1660042032579},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkLXVzZXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdWJzY3JpYmVfc3RhdHVzOiAiIiwKICAgICAgdGVtcGxhdGVfbmFtZTogIiIsCiAgICAgIHRlbXBsYXRlX3N0cnVjdHVyZTogW10sCiAgICAgIHBvcnRhbF9yb2xlczogW10sCiAgICAgIHNlbGVjdGVkX3JvbGU6ICIiLAogICAgICBjaGVja19saXN0OiBbXSwKICAgICAgZW1haWxsaXN0OiBbXSwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgdG90YWxfcGFnZXM6IG51bGwsCiAgICAgIG51bWJlcl9vZl9yb3dzOiBudWxsLAogICAgICBwYWdlX25vOiAxLAogICAgICBjb21wYW55bmFtZTogIiIsCiAgICAgIGNvbXBhbnlpZDogIiIsCiAgICAgIHVzZXJzOiBbXSwKICAgICAgcm9sZXM6IFtdLAogICAgICByb2xlOiAiIiwKICAgICAgcmVnX2VtYWlsOiAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICByZWdfcHdkOiAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlxkKSg/PS4qWyNAJCElKj8mXSlbQS1aYS16XGQjQCQhJSo/Jl17OCx9LywKICAgICAgc2hvd19sb2FkZXI6IGZhbHNlLAogICAgICAvL2hhcnNoCiAgICAgIHBhZ2VfYXJyYXk6IFtdLAogICAgICBzZWFyY2hfbmFtZTogIiIsCiAgICAgIHNwaW5uZXJPbjogZmFsc2UsCiAgICAgIHRlbXBsYXRlczogW10sCiAgICAgIGVkaXRpbmRleDogbnVsbCwKICAgICAgaXNfZWRpdDogZmFsc2UsCiAgICAgIGNoYXQ6IFtdLAogICAgICB0b19zY3JvbGw6IGZhbHNlLAogICAgICBpc2V4Y2hhbmdlOiBmYWxzZSwKICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICBib3RxdWVzdGlvbnM6IFtdLAogICAgICBzZWxlY3RlZF9xdWVzdGlvbjogIiIsCiAgICAgIHRlbXBfc3RydWN0dXJlOiBbXSwKICAgICAgYWRtaW50ZW1wbGF0ZXM6IFtdLAogICAgICBjZW5zZXRlbXBsYXRlczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICBheGlvcy5nZXQoYXBpX2NhbGxzLmdldF9vcGVuX2JvdF90ZW1wbGF0ZSgpLCB7CiAgICAgIHBhcmFtczogewogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgfSwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgX3RoaXMuY2Vuc2V0ZW1wbGF0ZXMgPSByZXNwb25zZS5kYXRhLnRlbXBsYXRlczsKICAgICAgICBheGlvcy5nZXQoYXBpX2NhbGxzLnBvc3Rfb3Blbl9ib3RfdGVtcGxhdGUoKSwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgZW1haWw6IF90aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogX3RoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMKICAgICAgICAgIH0sCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy5hZG1pbnRlbXBsYXRlcyA9IHJlc3BvbnNlLmRhdGEudGVtcGxhdGVzOwogICAgICAgICAgX3RoaXMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMuZmlsdGVydGVtcGxhdGVzKCk7IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICQoIiNlZGl0Ym90bW9kZWwiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgYWxlcnQoIkhpIik7CiAgICAgIF90aGlzMi5jaGF0ID0gW107CiAgICAgIF90aGlzMi5ib3RxdWVzdGlvbnMgPSBbXTsgLy8gdm0udmlzaXRfcmVhc29uID0gIiI7CiAgICAgIC8vIHZtLnZpc2l0b3Jfc3ltcHRvbXMgPSAiIjsKICAgICAgLy8gdm0udmlzaXRvcl9udW1iZXIgPSAiIjsKICAgICAgLy8gdm0uc2VsZWN0ZWRfdGltZSA9ICIiOwogICAgICAvLyB2bS5pc0VkaXQgPSBmYWxzZTsKICAgICAgLy8gdm0uc2VsZWN0ZWRfc2NoZWR1bGVfaWQgPSAiIjsKICAgICAgLy8gdm0uc2VsZWN0ZWRfc2NoZWR1bGVfdmlzaXRfc2xvdCA9ICIiOwogICAgICAvLyB2bS5pc1Jlc2NoZWR1bGV0aW1lID0gZmFsc2U7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJvdXRlX3RvX3ByZXZpZXc6IGZ1bmN0aW9uIHJvdXRlX3RvX3ByZXZpZXcoaW5kZXgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdPcGVuIEJvdCBUZW1wbGF0ZSBQcmV2aWV3JywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGJvdGRhdGE6IHsKICAgICAgICAgICAgc3RydWN0dXJlOiB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGl0dGVtcGxhdGU6IGZ1bmN0aW9uIGVkaXR0ZW1wbGF0ZShlZGl0aW5kZXgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBFZGl0IHRoZSBUZW1wbGF0ZT8iLAogICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgICAvLyB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNoYXQpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coIkhpIiwgdGhpcy5jaGF0KTsKICAgICAgICAgIHZhciBzdHJ1Y3R1cmUgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzMy5jaGF0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfdGhpczMuY2hhdFtpXS5ldmVudCA9PSAiYm90IikgewogICAgICAgICAgICAgIHN0cnVjdHVyZS5wdXNoKHsKICAgICAgICAgICAgICAgIGV2ZW50OiAiYm90IiwKICAgICAgICAgICAgICAgIHRleHQ6IF90aGlzMy5jaGF0W2ldLnRleHQsCiAgICAgICAgICAgICAgICBkYXRhOiBfdGhpczMuY2hhdFtpXS5kYXRhLAogICAgICAgICAgICAgICAgbWV0YWRhdGE6IF90aGlzMy5jaGF0W2ldLm1ldGFkYXRhCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfdGhpczMuY2hhdFtpXS5ldmVudCA9PSAidXNlciIpIHsKICAgICAgICAgICAgICBzdHJ1Y3R1cmUucHVzaCh7CiAgICAgICAgICAgICAgICBldmVudDogInVzZXIiLAogICAgICAgICAgICAgICAgdGV4dDogX3RoaXMzLmNoYXRbaV0udGV4dAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS50ZW1wbGF0ZV90eXBlID09ICdhZG1pbicpIHsKICAgICAgICAgICAgdmFyIHRlbXBsYXRlX2lkX2FwaSA9IF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5maW5hbF90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgdmFyIGNlbnNlX3RlbXBsYXRlX2lkX2FwaSA9IF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5jZW5zZV90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMucG9zdF9vcGVuX2JvdF90ZW1wbGF0ZSgpLCB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBlbWFpbDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgZG9tYWluOiBfdGhpczMudGVtcGxhdGVzW2VkaXRpbmRleF0uZG9tYWluLAogICAgICAgICAgICAgIHRlbXBsYXRlX2lkOiB0ZW1wbGF0ZV9pZF9hcGksCiAgICAgICAgICAgICAgdGVtcGxhdGVfbmFtZTogX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnRlbXBsYXRlX25hbWUsCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICBzdHJ1Y3R1cmU6IHN0cnVjdHVyZSwKICAgICAgICAgICAgICBjZW5zZV90ZW1wbGF0ZV9pZDogY2Vuc2VfdGVtcGxhdGVfaWRfYXBpCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzMy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIC8vIGlmKCkKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBFZGl0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lOiAyMDAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJGYWlsdXJlIikgewogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWU6IDI1MDAKICAgICAgICAgICAgICAgIH0pOyAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIC8vICRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIC8vIH0sIDEwMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy50ZW1wbGF0ZXNbZWRpdGluZGV4XS50ZW1wbGF0ZV90eXBlID09ICdjZW5zZScpIHsKICAgICAgICAgICAgdmFyIHRlbXBsYXRlX2lkX2FwaSA9IG51bGw7CiAgICAgICAgICAgIHZhciBjZW5zZV90ZW1wbGF0ZV9pZF9hcGkgPSBfdGhpczMudGVtcGxhdGVzW2VkaXRpbmRleF0udGVtcGxhdGVfaWQ7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnBvc3Rfb3Blbl9ib3RfdGVtcGxhdGUoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgZW1haWw6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGRvbWFpbjogX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLmRvbWFpbiwKICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogbnVsbCwKICAgICAgICAgICAgICB0ZW1wbGF0ZV9uYW1lOiBfdGhpczMudGVtcGxhdGVzW2VkaXRpbmRleF0udGVtcGxhdGVfbmFtZSwKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RoaXMzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgIHN0cnVjdHVyZTogc3RydWN0dXJlLAogICAgICAgICAgICAgIGNlbnNlX3RlbXBsYXRlX2lkOiBjZW5zZV90ZW1wbGF0ZV9pZF9hcGkKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXMzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgLy8gaWYoKQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczMuJHJvdXRlci5nbzsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBFZGl0ZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiRmFpbHVyZSIpIHsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiEiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgfSk7IC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgLy8gfSwgMTAwMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy8gdmFyIHRlbXBsYXRlbmFtZSA9IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0udGVtcGxhdGVfbmFtZQoKICAgICAgICB9CiAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyhzdHJ1Y3R1cmUpOwogICAgfSwKICAgIGdlbmVyYXRlX3RpbWU6IGZ1bmN0aW9uIGdlbmVyYXRlX3RpbWUoKSB7CiAgICAgIHZhciBkID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGgsIG0sIHR5cGU7CgogICAgICBpZiAoZC5nZXRIb3VycygpID4gMTIpIHsKICAgICAgICBoID0gZC5nZXRIb3VycygpICUgMTI7CiAgICAgICAgdHlwZSA9ICIgcG0iOwogICAgICB9IGVsc2UgaWYgKGQuZ2V0SG91cnMoKSA8IDEyKSB7CiAgICAgICAgaCA9IGQuZ2V0SG91cnMoKTsKICAgICAgICB0eXBlID0gIiBhbSI7CiAgICAgIH0gZWxzZSBpZiAoZC5nZXRIb3VycygpID09IDEyKSB7CiAgICAgICAgaCA9IGQuZ2V0SG91cnMoKTsKICAgICAgICB0eXBlID0gIiBwbSI7CiAgICAgIH0KCiAgICAgIG0gPSBkLmdldE1pbnV0ZXMoKTsKCiAgICAgIGlmIChtIDwgMTApIHsKICAgICAgICBtID0gMCArIFN0cmluZyhtKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGggKyAiOiIgKyBtICsgdHlwZTsKICAgIH0sCiAgICBzY3JvbGxfZG93bjogZnVuY3Rpb24gc2Nyb2xsX2Rvd24oKSB7CiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuY2hhdC1ib2R5Iikuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNoYXQtYm9keSIpLnNjcm9sbFRvcCAtICQoIi5jaGF0LWhpcyIpLmxhc3QoKS5oZWlnaHQoKSA8PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuY2hhdC1ib2R5IikuY2xpZW50SGVpZ2h0KSB7CiAgICAgICAgdGhpcy50b19zY3JvbGwgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRvX3Njcm9sbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0X2JvdDogZnVuY3Rpb24gZWRpdF9ib3QoaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICQoJyNlZGl0Ym90bW9kZWwnKS5tb2RhbCgnc2hvdycpOwogICAgICAgIF90aGlzNC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgfSwgNjAwKTsKICAgICAgdGhpcy5pc19lZGl0ID0gdHJ1ZTsKICAgICAgdGhpcy5jaGF0ID0gW107CiAgICAgIHRoaXMuYm90cXVlc3Rpb25zID0gW107CiAgICAgIHRoaXMuZWRpdGluZGV4ID0gaW5kZXg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmUubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnN0cnVjdHVyZVtpXS5ldmVudCA9PSAiYm90IikgewogICAgICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgICAgICByZWNlaXZpbmc6IHRydWUsCiAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmVbaV0udGV4dCwKICAgICAgICAgICAgY29udmVyc2F0aW9uX29ubHk6IHRydWUsCiAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgICBldmVudDogImJvdCIsCiAgICAgICAgICAgIGRhdGE6IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmVbaV0uZGF0YSwKICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdHJ1Y3R1cmVbaV0ubWV0YWRhdGEgLy8gZG9tYWluOiB0ZW1wbGF0ZXNbaW5kZXhdLmRvbWFpbiwKICAgICAgICAgICAgLy8gdGVtcGxhdGVfaWQ6IHRlbXBsYXRlc1tpbmRleF0udGVtcGxhdGVfaWQsCiAgICAgICAgICAgIC8vIHRlbXBsYXRlX25hbWU6IHRlbXBsYXRlc1tpbmRleF0udGVtcGxhdGVfbmFtZSwKCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuYm90cXVlc3Rpb25zLnB1c2goewogICAgICAgICAgICB2YWx1ZTogaSwKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnN0cnVjdHVyZVtpXS50ZXh0CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlW2ldLmV2ZW50ID09ICJ1c2VyIikgewogICAgICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgIHNlbmRpbmc6IHRydWUsCiAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgZGVsaXZlcmVkOiB0cnVlLAogICAgICAgICAgICBkcm9wZG93bjogIiIsCiAgICAgICAgICAgIGV2ZW50OiAidXNlciIKICAgICAgICAgIH0pOwogICAgICAgIH0gLy8gY29uc29sZS5sb2coJ2knLGkpOwoKICAgICAgfQoKICAgICAgdGhpcy50ZW1wX3N0cnVjdHVyZSA9IHRoaXMuY2hhdDsgLy8gY29uc29sZS5sb2codGhpcy5lZGl0aW5kZXgpOwogICAgICAvLyAkKCcjZWRpdGJvdG1vZGVsJykubW9kYWwoJ3Nob3cnKTsKICAgIH0sCiAgICBlZGl0dmFsdWU6IGZ1bmN0aW9uIGVkaXR2YWx1ZShpbmRleCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdGlucHV0IiArIGluZGV4KS5kaXNhYmxlZCA9ICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdGlucHV0IiArIGluZGV4KS5kaXNhYmxlZDsKICAgIH0sCiAgICBhZGRxdWVzdGlvbjogZnVuY3Rpb24gYWRkcXVlc3Rpb24oKSB7CiAgICAgIHZhciBlZGl0aW5kZXggPSB0aGlzLmVkaXRpbmRleDsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5zZWxlY3RlZF9xdWVzdGlvbjsgLy8gY29uc29sZS5sb2coaW5kZXgpOwoKICAgICAgaWYgKGluZGV4ID09ICdhJykgewogICAgICAgIHRvYXN0ci5lcnJvcigiS2luZGx5IFNlbGVjdCBhIFF1ZXN0aW9uIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaGF0ID0gW107CiAgICAgICAgdGhpcy5ib3RxdWVzdGlvbnMgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gaW5kZXg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLmV2ZW50ID09ICJib3QiKSB7CiAgICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgICByZWNlaXZpbmc6IHRydWUsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaV0udGV4dCwKICAgICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgICBldmVudDogImJvdCIsCiAgICAgICAgICAgICAgZGF0YTogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaV0uZGF0YSwKICAgICAgICAgICAgICBtZXRhZGF0YTogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaV0ubWV0YWRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYm90cXVlc3Rpb25zLnB1c2goewogICAgICAgICAgICAgIHZhbHVlOiBpLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLnRleHQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2ldLmV2ZW50ID09ICJ1c2VyIikgewogICAgICAgICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaV0udGV4dCwKICAgICAgICAgICAgICBzZW5kaW5nOiB0cnVlLAogICAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9vbmx5OiB0cnVlLAogICAgICAgICAgICAgIGRlbGl2ZXJlZDogdHJ1ZSwKICAgICAgICAgICAgICBkcm9wZG93bjogIiIsCiAgICAgICAgICAgICAgZXZlbnQ6ICJ1c2VyIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgIHJlY2VpdmluZzogdHJ1ZSwKICAgICAgICAgIHRleHQ6ICcgICAgICcsCiAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgZGF0YTogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaV0uZGF0YSwKICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpXS5tZXRhZGF0YQogICAgICAgIH0pOwogICAgICAgIHZhciBjID0gaW5kZXggKyAyOwogICAgICAgIGkgPSBudWxsOyAvLyBjb25zb2xlLmxvZyhjKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IGM7IGkgPD0gdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpIC0gMV0uZXZlbnQgPT0gImJvdCIpIHsKICAgICAgICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgICAgICAgIHJlY2VpdmluZzogdHJ1ZSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpIC0gMV0udGV4dCwKICAgICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgICBldmVudDogImJvdCIsCiAgICAgICAgICAgICAgZGF0YTogdGhpcy50ZW1wbGF0ZXNbZWRpdGluZGV4XS5zdHJ1Y3R1cmVbaSAtIDFdLmRhdGEsCiAgICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2kgLSAxXS5tZXRhZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5ib3RxdWVzdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgdmFsdWU6IGkgLSAyLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMudGVtcGxhdGVzW2VkaXRpbmRleF0uc3RydWN0dXJlW2kgLSAxXS50ZXh0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpIC0gMV0uZXZlbnQgPT0gInVzZXIiKSB7CiAgICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBsYXRlc1tlZGl0aW5kZXhdLnN0cnVjdHVyZVtpIC0gMV0udGV4dCwKICAgICAgICAgICAgICBzZW5kaW5nOiB0cnVlLAogICAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9vbmx5OiB0cnVlLAogICAgICAgICAgICAgIGRlbGl2ZXJlZDogdHJ1ZSwKICAgICAgICAgICAgICBkcm9wZG93bjogIiIsCiAgICAgICAgICAgICAgZXZlbnQ6ICJ1c2VyIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMudGVtcF9zdHJ1Y3R1cmUgPSB0aGlzLmNoYXQ7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRpbnB1dCIgKyAoaW5kZXggKyAxKSkuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZXF1ZXN0aW9uOiBmdW5jdGlvbiBkZWxldGVxdWVzdGlvbihpbmRleCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLnRlbXBfc3RydWN0dXJlKTsKICAgICAgdGhpcy5jaGF0ID0gW107CiAgICAgIHRoaXMuYm90cXVlc3Rpb25zID0gW107IC8vIGNvbnNvbGUubG9nKHRoaXMudGVtcF9zdHJ1Y3R1cmUpOwoKICAgICAgdmFyIGVkaXRpbmRleCA9IHRoaXMuZWRpdGluZGV4OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMudGVtcF9zdHJ1Y3R1cmVbaV0uZXZlbnQgPT0gImJvdCIpIHsKICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgcmVjZWl2aW5nOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9vbmx5OiB0cnVlLAogICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgICBkYXRhOiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLmRhdGEsCiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLm1ldGFkYXRhCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuYm90cXVlc3Rpb25zLnB1c2goewogICAgICAgICAgICB2YWx1ZTogaSwKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS50ZXh0CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnRlbXBfc3RydWN0dXJlW2ldLmV2ZW50ID09ICJ1c2VyIikgewogICAgICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgIHNlbmRpbmc6IHRydWUsCiAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgZGVsaXZlcmVkOiB0cnVlLAogICAgICAgICAgICBkcm9wZG93bjogIiIsCiAgICAgICAgICAgIGV2ZW50OiAidXNlciIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaSA9IG51bGw7CiAgICAgIHZhciBjID0gaW5kZXggKyAxOwoKICAgICAgZm9yICh2YXIgaSA9IGM7IGkgPCB0aGlzLnRlbXBfc3RydWN0dXJlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMudGVtcF9zdHJ1Y3R1cmVbaV0uZXZlbnQgPT0gImJvdCIpIHsKICAgICAgICAgIHRoaXMuY2hhdC5wdXNoKHsKICAgICAgICAgICAgcmVjZWl2aW5nOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgIGNvbnZlcnNhdGlvbl9vbmx5OiB0cnVlLAogICAgICAgICAgICB0aW1lOiB0aGlzLmdlbmVyYXRlX3RpbWUoKSwKICAgICAgICAgICAgZXZlbnQ6ICJib3QiLAogICAgICAgICAgICBkYXRhOiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLmRhdGEsCiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLm1ldGFkYXRhCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuYm90cXVlc3Rpb25zLnB1c2goewogICAgICAgICAgICB2YWx1ZTogaSwKICAgICAgICAgICAgdGV4dDogdGhpcy50ZW1wX3N0cnVjdHVyZVtpXS50ZXh0CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnRlbXBfc3RydWN0dXJlW2ldLmV2ZW50ID09ICJ1c2VyIikgewogICAgICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgICAgICB0ZXh0OiB0aGlzLnRlbXBfc3RydWN0dXJlW2ldLnRleHQsCiAgICAgICAgICAgIHNlbmRpbmc6IHRydWUsCiAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2VuZXJhdGVfdGltZSgpLAogICAgICAgICAgICBjb252ZXJzYXRpb25fb25seTogdHJ1ZSwKICAgICAgICAgICAgZGVsaXZlcmVkOiB0cnVlLAogICAgICAgICAgICBkcm9wZG93bjogIiIsCiAgICAgICAgICAgIGV2ZW50OiAidXNlciIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy50ZW1wX3N0cnVjdHVyZSA9IHRoaXMuY2hhdDsKICAgIH0sCiAgICBmaWx0ZXJ0ZW1wbGF0ZXM6IGZ1bmN0aW9uIGZpbHRlcnRlbXBsYXRlcygpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5jZW5zZXRlbXBsYXRlcywgJ2NlbnNlJyk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWRtaW50ZW1wbGF0ZXMsICdhZG1pbicpOyAvLyBpZih0aGlzLmFkbWludGVtcGxhdGVzLmxlbmd0aCA+IDApewoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNlbnNldGVtcGxhdGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKHRoaXMuYWRtaW50ZW1wbGF0ZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ2ZpbmFsX3RlbXBsYXRlX2lkJ10gPSB0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnRlbXBsYXRlX2lkOwogICAgICAgICAgdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsndGVtcGxhdGVfdHlwZSddID0gJ2NlbnNlJzsgLy8gdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsnc3Vic2NyaWJlZCddID0gZmFsc2U7CgogICAgICAgICAgaWYgKHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV0uc3Vic2NyaWJlZCA9PSBmYWxzZSkgewogICAgICAgICAgICB0aGlzLmNlbnNldGVtcGxhdGVzW2ldWydzdWJzY3JpYmVkX3ZhbCddID0gIkRvbnRTdWJzY3JpYmUiOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnN1YnNjcmliZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLmNlbnNldGVtcGxhdGVzW2ldWydzdWJzY3JpYmVkX3ZhbCddID0gIlN1YnNjcmliZSI7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy50ZW1wbGF0ZXMucHVzaCh0aGlzLmNlbnNldGVtcGxhdGVzW2ldKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmFkbWludGVtcGxhdGVzLmxlbmd0aDsgaiArPSAxKSB7CiAgICAgICAgICAgIGlmICgodGhpcy5hZG1pbnRlbXBsYXRlc1tqXS5jZW5zZV90ZW1wbGF0ZV9pZCAhPSBudWxsIHx8IHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0uY2Vuc2VfdGVtcGxhdGVfaWQgIT0gdW5kZWZpbmVkKSAmJiB0aGlzLmFkbWludGVtcGxhdGVzW2pdLmNlbnNlX3RlbXBsYXRlX2lkID09IHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV0udGVtcGxhdGVfaWQpIHsKICAgICAgICAgICAgICB0aGlzLmFkbWludGVtcGxhdGVzW2pdWydmaW5hbF90ZW1wbGF0ZV9pZCddID0gdGhpcy5hZG1pbnRlbXBsYXRlc1tqXS50ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgICB0aGlzLmFkbWludGVtcGxhdGVzW2pdWyd0ZW1wbGF0ZV90eXBlJ10gPSAnYWRtaW4nOwoKICAgICAgICAgICAgICBpZiAodGhpcy5hZG1pbnRlbXBsYXRlc1tqXS5zdWJzY3JpYmVkID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkbWludGVtcGxhdGVzW2pdWydzdWJzY3JpYmVkX3ZhbCddID0gIkRvbnRTdWJzY3JpYmUiOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hZG1pbnRlbXBsYXRlc1tqXS5zdWJzY3JpYmVkID09IHRydWUpIHsKICAgICAgICAgICAgICAgIHRoaXMuYWRtaW50ZW1wbGF0ZXNbal1bJ3N1YnNjcmliZWRfdmFsJ10gPSAiU3Vic2NyaWJlIjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzLnB1c2godGhpcy5hZG1pbnRlbXBsYXRlc1tqXSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hZG1pbnRlbXBsYXRlc1tqXS5jZW5zZV90ZW1wbGF0ZV9pZCAhPSBudWxsIHx8IHRoaXMuYWRtaW50ZW1wbGF0ZXNbal0uY2Vuc2VfdGVtcGxhdGVfaWQgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsnZmluYWxfdGVtcGxhdGVfaWQnXSA9IHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV0udGVtcGxhdGVfaWQ7CgogICAgICAgICAgICAgIGlmICh0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnN1YnNjcmliZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2Vuc2V0ZW1wbGF0ZXNbaV1bJ3N1YnNjcmliZWRfdmFsJ10gPSAiRG9udFN1YnNjcmliZSI7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNlbnNldGVtcGxhdGVzW2ldLnN1YnNjcmliZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsnc3Vic2NyaWJlZF92YWwnXSA9ICJTdWJzY3JpYmUiOwogICAgICAgICAgICAgIH0gLy8gdGhpcy5jZW5zZXRlbXBsYXRlc1tpXVsnc3Vic2NyaWJlZCddID0gZmFsc2U7CgoKICAgICAgICAgICAgICB0aGlzLmNlbnNldGVtcGxhdGVzW2ldWyd0ZW1wbGF0ZV90eXBlJ10gPSAnY2Vuc2UnOwogICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzLnB1c2godGhpcy5jZW5zZXRlbXBsYXRlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gfSBlbHNlIHsKICAgICAgLy8gICBmb3IobGV0IGkgPSAwOyBpPHRoaXMuY2Vuc2V0ZW1wbGF0ZXMubGVuZ3RoOyBpICs9IDEpewogICAgICAvLyAgICAgdGhpcy50ZW1wbGF0ZXMgPSB0aGlzLmNlbnNldGVtcGxhdGVzOwogICAgICAvLyAgIH0KICAgICAgLy8gfQoKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGVtcGxhdGVzKTsKICAgIH0sCiAgICBkZWxldGVfYm90OiBmdW5jdGlvbiBkZWxldGVfYm90KGluZGV4KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV90eXBlID09ICdjZW5zZScpIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIllvdSBDYW5ub3QgRGVsZXRlIFN1cGVyQWRtaW4gVGVtcGxhdGVzIik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX3R5cGUgIT0gJ2NlbnNlJykgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBEZWxldGUgdGhpcyBUZW1wbGF0ZT8iLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIGF4aW9zLmRlbGV0ZShhcGlfY2FsbHMucG9zdF9vcGVuX2JvdF90ZW1wbGF0ZSgpLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXM1LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM1LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgICB0b2tlbjogX3RoaXM1LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgICAgdGVtcGxhdGVfaWQ6IF90aGlzNS50ZW1wbGF0ZXNbaW5kZXhdLmZpbmFsX3RlbXBsYXRlX2lkCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzNS4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiU3VjY2VzcyIgJiYgcmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICJRdWVyeSBFeGVjdXRlZCBTdWNjZXNzZnVsbHkiKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIuZ287CiAgICAgICAgICAgICAgICB9LCAxMTAwKTsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRGVsZXRlZCIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIuZ287CiAgICAgICAgICAgICAgICB9LCAxMTAwKTsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZC5QbGVhc2UgVHJ5IEFnYWluIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzdWJzY3JpYmV0ZW1wbGF0ZTogZnVuY3Rpb24gc3Vic2NyaWJldGVtcGxhdGUoaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAvLyBkZWJ1Z2dlcjsKICAgICAgdmFyIHggPSB0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3Vic2NyaWJlZDsgLy8gdmFyIHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSh0aGlzLnRlbXBsYXRlc1tpbmRleF0udGVtcGxhdGVfaWQpLnZhbHVlOwoKICAgICAgaWYgKHRoaXMudGVtcGxhdGVzW2luZGV4XS5zdWJzY3JpYmVkX3ZhbCA9PSAiU3Vic2NyaWJlIikgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBzdWJzY3JpYmUgdG8gdGhpcyB0ZW1wbGF0ZT8iLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIGlmIChfdGhpczYudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV90eXBlID09ICdhZG1pbicpIHsKICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVfaWRfYXBpID0gX3RoaXM2LnRlbXBsYXRlc1tpbmRleF0uZmluYWxfdGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlX3R5cGUgPSAnY3VzdG9tJzsgLy8gdmFyIGNlbnNlX3RlbXBsYXRlX2lkX2FwaSA9IHRoaXMudGVtcGxhdGVzW2luZGV4XS5jZW5zZV90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczYudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV90eXBlID09ICdjZW5zZScpIHsKICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVfaWRfYXBpID0gX3RoaXM2LnRlbXBsYXRlc1tpbmRleF0uZmluYWxfdGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlX3R5cGUgPSAnY2Vuc2UnOyAvLyAgdmFyIGNlbnNlX3RlbXBsYXRlX2lkX2FwaSA9IHRoaXMudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMub3Blbl9ib3RfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKCksIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGVtYWlsOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogdGVtcGxhdGVfaWRfYXBpLAogICAgICAgICAgICAgIHNldF9zdWJzY3JpcHRpb246IHRydWUsCiAgICAgICAgICAgICAgc3Vic2NyaWJlZDogdHJ1ZSwKICAgICAgICAgICAgICB0ZW1wbGF0ZV90eXBlOiB0ZW1wbGF0ZV90eXBlCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnRlbXBsYXRlc1tpbmRleF0uc3Vic2NyaWJlZF92YWwgPT0gIkRvbnRTdWJzY3JpYmUiKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0ZXh0OiAiIFlvdSBkb24ndCB3YW50IHRvIHN1YnNjcmliZSB0byB0aGlzIHRlbXBsYXRlPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgaWYgKF90aGlzNi50ZW1wbGF0ZXNbaW5kZXhdLnRlbXBsYXRlX3R5cGUgPT0gJ2FkbWluJykgewogICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV9pZF9hcGkgPSBfdGhpczYudGVtcGxhdGVzW2luZGV4XS5maW5hbF90ZW1wbGF0ZV9pZDsKICAgICAgICAgICAgICB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gX3RoaXM2LnRlbXBsYXRlc1tpbmRleF0uY2Vuc2VfdGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlX3R5cGUgPSAnY3VzdG9tJzsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczYudGVtcGxhdGVzW2luZGV4XS50ZW1wbGF0ZV90eXBlID09ICdjZW5zZScpIHsKICAgICAgICAgICAgICB2YXIgY2Vuc2VfdGVtcGxhdGVfaWRfYXBpID0gX3RoaXM2LnRlbXBsYXRlc1tpbmRleF0uZmluYWxfdGVtcGxhdGVfaWQ7CiAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlX2lkX2FwaSA9IF90aGlzNi50ZW1wbGF0ZXNbaW5kZXhdLmZpbmFsX3RlbXBsYXRlX2lkOwogICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV90eXBlID0gJ2NlbnNlJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMub3Blbl9ib3RfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKCksIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGVtYWlsOiBfdGhpczYuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM2LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzNi4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogdGVtcGxhdGVfaWRfYXBpLAogICAgICAgICAgICAgIHNldF9zdWJzY3JpcHRpb246IHRydWUsCiAgICAgICAgICAgICAgc3Vic2NyaWJlZDogZmFsc2UsCiAgICAgICAgICAgICAgdGVtcGxhdGVfdHlwZTogdGVtcGxhdGVfdHlwZQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}