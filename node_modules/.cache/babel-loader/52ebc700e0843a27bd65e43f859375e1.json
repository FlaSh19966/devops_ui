{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/MessagingFrameworks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Integrations/MessagingFrameworks.vue","mtime":1643027096172},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubGluayI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IFZ1ZVBob25lTnVtYmVySW5wdXQgZnJvbSAndnVlLXBob25lLW51bWJlci1pbnB1dCc7CmltcG9ydCAndnVlLXBob25lLW51bWJlci1pbnB1dC9kaXN0L3Z1ZS1waG9uZS1udW1iZXItaW5wdXQuY3NzJzsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lc3NhZ2luZ0ZyYW1ld29ya3MiLAogIGNvbXBvbmVudHM6IHsKICAgIFZ1ZVBob25lTnVtYmVySW5wdXQ6IFZ1ZVBob25lTnVtYmVySW5wdXQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiaWdfc3Bpbm5lcjogZmFsc2UsCiAgICAgIHdlYnNpdGVfbmFtZTogIlNob3BpZnkiLAogICAgICB3aWRnZXRfY29kZTogIiIsCiAgICAgIE1lc3Nlbmdlcl9kYXRhOiB7CiAgICAgICAgZmJfcGFnZV9uYW1lOiBudWxsLAogICAgICAgIGZiX21lc3NhZ2luZ191cmw6IG51bGwsCiAgICAgICAgaXNfdmlzaWJsZV9vbl9ib3Q6IGZhbHNlLAogICAgICAgIGlzX2ludGVncmF0ZWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgY29tcGFueV9pZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIFRlbGVncmFtX2RhdGE6IHsKICAgICAgICB0ZWxlZ3JhbV91c2VyX25hbWU6IG51bGwsCiAgICAgICAgaXNfdmlzaWJsZV9vbl9ib3Q6IGZhbHNlLAogICAgICAgIGlzX2ludGVncmF0ZWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIEluc3RhZ3JhbV9kYXRhOiB7CiAgICAgICAgaW5zdGFncmFtX3VzZXJfbmFtZTogbnVsbCwKICAgICAgICBpc192aXNpYmxlX29uX2JvdDogZmFsc2UsCiAgICAgICAgaXNfaW50ZWdyYXRlZDogZmFsc2UKICAgICAgfSwKICAgICAgV2hhdHNhcHBfZGF0YTogewogICAgICAgIHdoYXRzYXBwX251bWJlcjogbnVsbCwKICAgICAgICBpc192aXNpYmxlX29uX2JvdDogZmFsc2UsCiAgICAgICAgaXNfaW50ZWdyYXRlZDogZmFsc2UKICAgICAgfSwKICAgICAgd2hhdHNhcHBfcHJvZmlsZV9uYW1lOiBudWxsLAogICAgICBpc192aXNpYmxlX29uX2JvdDogZmFsc2UsCiAgICAgIHBob25lTnVtYmVyOiBudWxsIC8vIGZiX21lc3NhZ2luZ191cmxfcmVnZXg6IC9bKG0ubWUpXC8/YS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIoWy1hLXpBLVowLTlAOiVfXCsufiM/Ji8vPV0qKS9pLAoKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgJCgiI2hlbHBfbW9kYWxfd2Vic2l0ZXMiKS5vbigic2hvd24uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCIjd2lkZ2V0X2NvZGVfbW9kYWwyIikuY3NzKCJvcGFjaXR5IiwgIi0wLjUiKTsKICAgIH0pOwogICAgJCgiI2hlbHBfbW9kYWxfd2Vic2l0ZXMiKS5vbigiaGlkZGVuLmJzLm1vZGFsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI3dpZGdldF9jb2RlX21vZGFsMiIpLmNzcygib3BhY2l0eSIsICIxIik7CiAgICB9KTsKICAgIHRoaXMuZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKTsKICB9LAogIHdhdGNoOiB7CiAgICBpc192aXNpYmxlX29uX2JvdDogZnVuY3Rpb24gaXNfdmlzaWJsZV9vbl9ib3QobmV3VmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMud2Vic2l0ZV9uYW1lKTsKICAgICAgdmFyIHdlYnMgPSB0aGlzLndlYnNpdGVfbmFtZTsgLy8gY29uc29sZS5sb2codGhpc1t3ZWJzICsgIl9kYXRhIl0uaXNfdmlzaWJsZV9vbl9ib3QpOwoKICAgICAgdGhpc1t3ZWJzICsgIl9kYXRhIl0uaXNfdmlzaWJsZV9vbl9ib3QgPSBuZXdWYWw7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRfc2F2ZV9mb3JtOiBmdW5jdGlvbiBzdWJtaXRfc2F2ZV9mb3JtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMud2Vic2l0ZV9uYW1lID09PSAiTWVzc2VuZ2VyIikgewogICAgICAgIC8vICBjb25zb2xlLmxvZyh0aGlzLmZiX21lc3NhZ2luZ191cmxfcmVnZXgudGVzdCh0aGlzLmZiX21lc3NhZ2luZ191cmwpKTsKICAgICAgICB2YXIgZG9tYWluX25hbWUgPSAibS5tZS8iOwoKICAgICAgICBpZiAoIXRoaXMuTWVzc2VuZ2VyX2RhdGEuZmJfbWVzc2FnaW5nX3VybC5pbmNsdWRlcyhkb21haW5fbmFtZSkpIHsKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgZW50ZXIgcHJvcGVyIE1lc3NhZ2luZyBVUkwgaW4gdGhlIGZvcm1hdCAnbS5tZS8xMjM0NTY3JyIsCiAgICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdGltZXI6IDM1MDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRleHQ6ICJQbGVhc2Ugd2FpdCB3aGlsZSB3ZSBzdWJtaXQgeW91ciBkZXRhaWxzIiwKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuY2hhdGJvdF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCksIHsKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgaXNfc2F2ZTogdHJ1ZSwKICAgICAgICAgIGlzX2ZhY2Vib29rOiB0cnVlLAogICAgICAgICAgZmJfcGFnZV9uYW1lOiB0aGlzLk1lc3Nlbmdlcl9kYXRhLmZiX3BhZ2VfbmFtZSwKICAgICAgICAgIGZiX3BhZ2VfbGluazogdGhpcy5NZXNzZW5nZXJfZGF0YS5mYl9tZXNzYWdpbmdfdXJsLAogICAgICAgICAgdmlzaWJsZV9vbl9ib3Q6IHRoaXMuTWVzc2VuZ2VyX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QKICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CgogICAgICAgICAgX3RoaXMuZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKTsKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJEZXRhaWxzIFNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICQoIiN3aWRnZXRfY29kZV9tb2RhbDIiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBGaWxsIERldGFpbHMgQWdhaW4hIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBGaWxsIERldGFpbHMgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgRmlsbCBEZXRhaWxzIEFnYWluISIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLndlYnNpdGVfbmFtZSA9PT0gIlRlbGVncmFtIikgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0ZXh0OiAiUGxlYXNlIHdhaXQgd2hpbGUgd2Ugc3VibWl0IHlvdXIgZGV0YWlscyIsCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmNoYXRib3RfaW50ZWdyYXRpb25fZGV0YWlscygpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzX3NhdmU6IHRydWUsCiAgICAgICAgICBpc190ZWxlZ3JhbTogdHJ1ZSwKICAgICAgICAgIHRlbGVncmFtX3VzZXJuYW1lOiB0aGlzLlRlbGVncmFtX2RhdGEudGVsZWdyYW1fdXNlcl9uYW1lLAogICAgICAgICAgdmlzaWJsZV9vbl9ib3Q6IHRoaXMuVGVsZWdyYW1fZGF0YS5pc192aXNpYmxlX29uX2JvdAogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhOwoKICAgICAgICAgIF90aGlzLmdldF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiRGV0YWlscyBTYXZlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAkKCIjd2lkZ2V0X2NvZGVfbW9kYWwyIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgRmlsbCBEZXRhaWxzIEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgRmlsbCBEZXRhaWxzIEFnYWluISIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIEZpbGwgRGV0YWlscyBBZ2FpbiEiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy53ZWJzaXRlX25hbWUgPT09ICJXaGF0c2FwcCIpIHsKICAgICAgICBpZiAoIUJvb2xlYW4odGhpcy5waG9uZU51bWJlcikpIHsKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRleHQ6ICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBQaG9uZSBOdW1iZXIiLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGhvbmVOdW1iZXIuaXNWYWxpZCAhPSB0cnVlKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0ZXh0OiAiUGxlYXNlIGVudGVyIGEgdmFsaWQgUGhvbmUgTnVtYmVyIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGV4dDogIlBsZWFzZSB3YWl0IHdoaWxlIHdlIHN1Ym1pdCB5b3VyIGRldGFpbHMiLAogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5jaGF0Ym90X2ludGVncmF0aW9uX2RldGFpbHMoKSwgewogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc19zYXZlOiB0cnVlLAogICAgICAgICAgaXNfd2hhdHNhcHA6IHRydWUsCiAgICAgICAgICB3aGF0c2FwcF9udW1iZXI6IHRoaXMucGhvbmVOdW1iZXIuZm9ybWF0dGVkTnVtYmVyLAogICAgICAgICAgbmFtZTogdGhpcy53aGF0c2FwcF9wcm9maWxlX25hbWUsCiAgICAgICAgICB2aXNpYmxlX29uX2JvdDogdGhpcy5XaGF0c2FwcF9kYXRhLmlzX3Zpc2libGVfb25fYm90CiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IF9yZWYzLmRhdGE7CgogICAgICAgICAgX3RoaXMuZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKTsKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJEZXRhaWxzIFNhdmVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICQoIiN3aWRnZXRfY29kZV9tb2RhbDIiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBGaWxsIERldGFpbHMgQWdhaW4hIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBGaWxsIERldGFpbHMgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgRmlsbCBEZXRhaWxzIEFnYWluISIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLndlYnNpdGVfbmFtZSA9PT0gIkluc3RhZ3JhbSIpIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGV4dDogIlBsZWFzZSB3YWl0IHdoaWxlIHdlIHN1Ym1pdCB5b3VyIGRldGFpbHMiLAogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5jaGF0Ym90X2ludGVncmF0aW9uX2RldGFpbHMoKSwgewogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueV9pZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc19zYXZlOiB0cnVlLAogICAgICAgICAgaXNfaW5zdGFncmFtOiB0cnVlLAogICAgICAgICAgaW5zdGFncmFtX3VzZXJuYW1lOiB0aGlzLkluc3RhZ3JhbV9kYXRhLmluc3RhZ3JhbV91c2VyX25hbWUsCiAgICAgICAgICB2aXNpYmxlX29uX2JvdDogdGhpcy5JbnN0YWdyYW1fZGF0YS5pc192aXNpYmxlX29uX2JvdAogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgdmFyIGRhdGEgPSBfcmVmNC5kYXRhOwoKICAgICAgICAgIF90aGlzLmdldF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiRGV0YWlscyBTYXZlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAkKCIjd2lkZ2V0X2NvZGVfbW9kYWwyIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgRmlsbCBEZXRhaWxzIEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgRmlsbCBEZXRhaWxzIEFnYWluISIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIEZpbGwgRGV0YWlscyBBZ2FpbiEiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRfaW50ZWdyYXRpb25fZGV0YWlsczogZnVuY3Rpb24gZ2V0X2ludGVncmF0aW9uX2RldGFpbHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5iaWdfc3Bpbm5lciA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmNoYXRib3RfaW50ZWdyYXRpb25fZGV0YWlscygpLCB7CiAgICAgICAgaXNfZ2V0OiB0cnVlLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy5jb21wYW55X25hbWUsCiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55X2lkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucwogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWY1KSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmNS5kYXRhOwogICAgICAgIF90aGlzMi5iaWdfc3Bpbm5lciA9IGZhbHNlOwoKICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICJzdWNjZXNzIikgewogICAgICAgICAgaWYgKGRhdGEuZGF0YS5tZXNzYWdpbmdfcGxhdGZvcm0gfHwgZmFsc2UpIHsKICAgICAgICAgICAgaWYgKEJvb2xlYW4oZGF0YS5kYXRhLm1lc3NhZ2luZ19wbGF0Zm9ybS5mYWNlYm9va19kZXRhaWxzKSB8fCBmYWxzZSkgewogICAgICAgICAgICAgIF90aGlzMi5NZXNzZW5nZXJfZGF0YS5mYl9wYWdlX25hbWUgPSBkYXRhLmRhdGEubWVzc2FnaW5nX3BsYXRmb3JtLmZhY2Vib29rX2RldGFpbHMuZmJfcGFnZV9uYW1lOwogICAgICAgICAgICAgIF90aGlzMi5NZXNzZW5nZXJfZGF0YS5mYl9tZXNzYWdpbmdfdXJsID0gZGF0YS5kYXRhLm1lc3NhZ2luZ19wbGF0Zm9ybS5mYWNlYm9va19kZXRhaWxzLmxpbms7CiAgICAgICAgICAgICAgX3RoaXMyLk1lc3Nlbmdlcl9kYXRhLmlzX3Zpc2libGVfb25fYm90ID0gZGF0YS5kYXRhLm1lc3NhZ2luZ19wbGF0Zm9ybS5mYWNlYm9va19kZXRhaWxzLnZpc2libGVfb25fYm90OwogICAgICAgICAgICAgIF90aGlzMi5NZXNzZW5nZXJfZGF0YS5pc192aXNpYmxlX29uX2JvdCA9PT0gdHJ1ZSA/IF90aGlzMi5NZXNzZW5nZXJfZGF0YS5pc19pbnRlZ3JhdGVkID0gdHJ1ZSA6IF90aGlzMi5NZXNzZW5nZXJfZGF0YS5pc19pbnRlZ3JhdGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChCb29sZWFuKGRhdGEuZGF0YS5tZXNzYWdpbmdfcGxhdGZvcm0udGVsZWdyYW1fZGV0YWlscykgfHwgZmFsc2UpIHsKICAgICAgICAgICAgICBfdGhpczIuVGVsZWdyYW1fZGF0YS50ZWxlZ3JhbV91c2VyX25hbWUgPSBkYXRhLmRhdGEubWVzc2FnaW5nX3BsYXRmb3JtLnRlbGVncmFtX2RldGFpbHMudGVsZWdyYW1fdXNlcm5hbWU7CiAgICAgICAgICAgICAgX3RoaXMyLlRlbGVncmFtX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPSBkYXRhLmRhdGEubWVzc2FnaW5nX3BsYXRmb3JtLnRlbGVncmFtX2RldGFpbHMudmlzaWJsZV9vbl9ib3Q7CiAgICAgICAgICAgICAgX3RoaXMyLlRlbGVncmFtX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPT09IHRydWUgPyBfdGhpczIuVGVsZWdyYW1fZGF0YS5pc19pbnRlZ3JhdGVkID0gdHJ1ZSA6IF90aGlzMi5UZWxlZ3JhbV9kYXRhLmlzX2ludGVncmF0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKEJvb2xlYW4oZGF0YS5kYXRhLm1lc3NhZ2luZ19wbGF0Zm9ybS53aGF0c2FwcF9kZXRhaWxzKSB8fCBmYWxzZSkgewogICAgICAgICAgICAgIF90aGlzMi5XaGF0c2FwcF9kYXRhLndoYXRzYXBwX251bWJlciA9IGRhdGEuZGF0YS5tZXNzYWdpbmdfcGxhdGZvcm0ud2hhdHNhcHBfZGV0YWlscy53aGF0c2FwcF9udW1iZXI7CiAgICAgICAgICAgICAgX3RoaXMyLldoYXRzYXBwX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPSBkYXRhLmRhdGEubWVzc2FnaW5nX3BsYXRmb3JtLndoYXRzYXBwX2RldGFpbHMudmlzaWJsZV9vbl9ib3Q7CiAgICAgICAgICAgICAgX3RoaXMyLldoYXRzYXBwX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPT09IHRydWUgPyBfdGhpczIuV2hhdHNhcHBfZGF0YS5pc19pbnRlZ3JhdGVkID0gdHJ1ZSA6IF90aGlzMi5XaGF0c2FwcF9kYXRhLmlzX2ludGVncmF0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKEJvb2xlYW4oZGF0YS5kYXRhLm1lc3NhZ2luZ19wbGF0Zm9ybS5pbnN0YWdyYW1fZGV0YWlscykgfHwgZmFsc2UpIHsKICAgICAgICAgICAgICBfdGhpczIuSW5zdGFncmFtX2RhdGEuaW5zdGFncmFtX3VzZXJfbmFtZSA9IGRhdGEuZGF0YS5tZXNzYWdpbmdfcGxhdGZvcm0uaW5zdGFncmFtX2RldGFpbHMuaW5zdGFncmFtX3VzZXJuYW1lOwogICAgICAgICAgICAgIF90aGlzMi5JbnN0YWdyYW1fZGF0YS5pc192aXNpYmxlX29uX2JvdCA9IGRhdGEuZGF0YS5tZXNzYWdpbmdfcGxhdGZvcm0uaW5zdGFncmFtX2RldGFpbHMudmlzaWJsZV9vbl9ib3Q7CiAgICAgICAgICAgICAgX3RoaXMyLkluc3RhZ3JhbV9kYXRhLmlzX3Zpc2libGVfb25fYm90ID09PSB0cnVlID8gX3RoaXMyLkluc3RhZ3JhbV9kYXRhLmlzX2ludGVncmF0ZWQgPSB0cnVlIDogX3RoaXMyLkluc3RhZ3JhbV9kYXRhLmlzX2ludGVncmF0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5tc2cgPT0gIk5PIERBVEEgQVZBSUxBQkxFIikge30KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczIuYmlnX3NwaW5uZXIgPSBmYWxzZTsKCiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldF93ZWJzaXRlX2RldGFpbHM6IGZ1bmN0aW9uIHJlc2V0X3dlYnNpdGVfZGV0YWlscygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRleHQ6ICJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzZXQgdGhlc2UgZGV0YWlscz8gWW91J2xsIGhhdmUgdG8gYWRkIHRoZSBkZXRhaWxzIGFnYWluIiwKICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0ZXh0OiAiUGxlYXNlIHdhaXQgd2hpbGUgd2UgcHJvY2VzcyB5b3VyIHJlcXVlc3QiLAogICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuY2hhdGJvdF9pbnRlZ3JhdGlvbl9kZXRhaWxzKCksIHsKICAgICAgICAgICAgaXNfcmVzZXQ6IHRydWUsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXMzLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXMzLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGVtYWlsOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICB0b2tlbjogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICByZXNldF9wbGF0Zm9ybTogX3RoaXMzLndlYnNpdGVfbmFtZQogICAgICAgICAgfSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChfdGhpczMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmNikgewogICAgICAgICAgICB2YXIgZGF0YSA9IF9yZWY2LmRhdGE7CgogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgX3RoaXMzLnJlc2V0X3RvX2RlZmF1bHQoKTsKCiAgICAgICAgICAgIF90aGlzMy5nZXRfaW50ZWdyYXRpb25fZGV0YWlscygpOwoKICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJEZXRhaWxzIFJlc2V0IFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICQoIiN3aWRnZXRfY29kZV9tb2RhbDIiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgICBfdGhpczMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRfdG9fZGVmYXVsdDogZnVuY3Rpb24gcmVzZXRfdG9fZGVmYXVsdCgpIHsKICAgICAgdGhpcy5XaGF0c2FwcF9kYXRhLndoYXRzYXBwX251bWJlciA9IG51bGw7CiAgICAgIHRoaXMuV2hhdHNhcHBfZGF0YS5pc192aXNpYmxlX29uX2JvdCA9IGZhbHNlOwogICAgICB0aGlzLlRlbGVncmFtX2RhdGEuaXNfdmlzaWJsZV9vbl9ib3QgPSBmYWxzZTsKICAgICAgdGhpcy5UZWxlZ3JhbV9kYXRhLnRlbGVncmFtX3VzZXJfbmFtZSA9IG51bGw7CiAgICAgIHRoaXMuTWVzc2VuZ2VyX2RhdGEuZmJfcGFnZV9uYW1lID0gbnVsbDsKICAgICAgdGhpcy5NZXNzZW5nZXJfZGF0YS5mYl9tZXNzYWdpbmdfdXJsID0gbnVsbDsKICAgICAgdGhpcy5NZXNzZW5nZXJfZGF0YS5pc192aXNpYmxlX29uX2JvdCA9IGZhbHNlOwogICAgICB0aGlzLkluc3RhZ3JhbV9kYXRhLmluc3RhZ3JhbV91c2VyX25hbWUgPSBudWxsOwogICAgICB0aGlzLkluc3RhZ3JhbV9kYXRhLmlzX3Zpc2libGVfb25fYm90ID0gZmFsc2U7CiAgICAgIHRoaXMuSW5zdGFncmFtX2RhdGEuaXNfaW50ZWdyYXRlZCA9IGZhbHNlOwogICAgICB0aGlzLk1lc3Nlbmdlcl9kYXRhLmlzX2ludGVncmF0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5XaGF0c2FwcF9kYXRhLmlzX2ludGVncmF0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5UZWxlZ3JhbV9kYXRhLmlzX2ludGVncmF0ZWQgPSBmYWxzZTsKICAgIH0KICB9Cn07"},null]}