{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/eslint-loader/index.js??ref--13-0!/home/vimalesh/CENSE/chatbot-portal/src/portal/mixins/ResponseBot/voicerecorder.js","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/mixins/ResponseBot/voicerecorder.js","mtime":1655466514169},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50MzItYXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBSZWNvcmRlciBmcm9tICdAL3BvcnRhbC9jb21wb25lbnRzL3JlY29yZGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICdAL3BvcnRhbC9hcGlfY2FsbHMnOwppbXBvcnQgeyBTb2NrZXQgfSBmcm9tICdwaG9lbml4LXNvY2tldCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXVkaW9TdHJlYW06IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjYWxsX2Nsb3VkX2FwaTogZnVuY3Rpb24gY2FsbF9jbG91ZF9hcGkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWljcm9waG9uZScpLmNsYXNzTGlzdC5hZGQoJ3ZvaWNlLW9uJyk7CiAgICAgIHZhciBhdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsKICAgICAgdmFyIGJ1ZmZlcl9saXN0LCBidWZmZXJfaTMyOwogICAgICB2YXIgcmVjb3JkZXIgPSBuZXcgUmVjb3JkZXIoYXVkaW9Db250ZXh0LCB7CiAgICAgICAgLy8gQW4gYXJyYXkgb2YgMjU1IE51bWJlcnMKICAgICAgICAvLyBZb3UgY2FuIHVzZSB0aGlzIHRvIHZpc3VhbGl6ZSB0aGUgYXVkaW8gc3RyZWFtCiAgICAgICAgLy8gSWYgeW91IHVzZSByZWFjdCwgY2hlY2sgb3V0IHJlYWN0LXdhdmUtc3RyZWFtCiAgICAgICAgb25BbmFseXNlZDogZnVuY3Rpb24gb25BbmFseXNlZChkYXRhKSB7fQogICAgICB9KTsKICAgICAgdmFyIHZvaWNlX2NoYW5uZWwsCiAgICAgICAgICB3YXZfcGFyYW1ldGVycywKICAgICAgICAgIHJlY0J1ZmZlcnMgPSBbXSwKICAgICAgICAgIHJlY0xlbmd0aCwKICAgICAgICAgIG1ldGFfZGF0YTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgYXhpb3MuZ2V0KGFwaV9jYWxscy52b2ljZV9jaGFubmVsX2FwaSgpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnZvaWNlX3NvY2tldCA9IG5ldyBTb2NrZXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9MSVZFX0NIQVRfV0VCU09DS0VUX0VORFBPSU5ULCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgY29tcGFueTogX3RoaXMuJHNlc3Npb24uZ2V0KCdVc2VySW5mb3JtYXRpb24nKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIHZvaWNlX2NoYW5uZWxfbmFtZTogcmVzcG9uc2UuZGF0YS52b2ljZV9jaGFubmVsX25hbWUsCiAgICAgICAgICAgIHRva2VuOiByZXNwb25zZS5kYXRhLnRva2VuLAogICAgICAgICAgICBpc192b2ljZTogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy52b2ljZV9zb2NrZXQuY29ubmVjdCgpOwoKICAgICAgICB2b2ljZV9jaGFubmVsID0gX3RoaXMudm9pY2Vfc29ja2V0LmNoYW5uZWwoJ3ZvaWNlX3RvX3RleHQ6JyArIHJlc3BvbnNlLmRhdGEudm9pY2VfY2hhbm5lbF9uYW1lKTsKICAgICAgICB2b2ljZV9jaGFubmVsLmpvaW4oKTsKICAgICAgfSk7CiAgICAgIHZhciBibG9iID0gbnVsbDsKICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoewogICAgICAgIGF1ZGlvOiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgIF90aGlzLmF1ZGlvU3RyZWFtID0gc3RyZWFtOwogICAgICAgIHJlY29yZGVyLmluaXQoc3RyZWFtKTsKICAgICAgICBzdGFydFJlY29yZGluZygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdVaCBvaC4uLiB1bmFibGUgdG8gZ2V0IHN0cmVhbS4uLicsIGVycik7CiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24gc3RhcnRSZWNvcmRpbmcoc3RyZWFtKSB7CiAgICAgICAgcmVjb3JkZXIuc3RhcnQoKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0b3BSZWNvcmRpbmcoKTsKICAgICAgICB9LCA0MDAwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gc3RvcFJlY29yZGluZygpIHsKICAgICAgICByZWNvcmRlci5zdG9wKCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIGJsb2IgPSBfcmVmLmJsb2IsCiAgICAgICAgICAgICAgYnVmZmVyID0gX3JlZi5idWZmZXI7CiAgICAgICAgICB2bS5hdWRpb1N0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICB0cmFjay5zdG9wKCk7CiAgICAgICAgICB9KTsgLy8gYnVmZmVyX2xpc3QgPSBidWZmZXJbMF07CgogICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYnVmZmVyX2xpc3QgPSByZWFkZXIucmVzdWx0OwogICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcl9saXN0KTsKICAgICAgICAgICAgd2F2X3BhcmFtZXRlcnMgPSB3YXZfZmlsZV9wcm9jZXNzaW5nX3JlYWRfcGFyYW1ldGVycyh0ZW1wKTsKICAgICAgICAgICAgaW5pdF9lbmNvZGVyKGJ1ZmZlcl9saXN0KTsKICAgICAgICAgIH07IC8vIFJlY29yZGVyLmRvd25sb2FkKGJsb2IsICJteS1maWxlIik7CiAgICAgICAgICAvLyBidWZmZXIgaXMgYW4gQXVkaW9CdWZmZXIKCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGluaXRfZW5jb2RlcihkYXRhKSB7CiAgICAgICAgdmFyIGFycmF5QnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7CiAgICAgICAgdmFyIGVuY0RhdGEgPSBbXTsKICAgICAgICB2YXIgcmVzdWx0ID0gZW5jb2RlRmxhYyhhcnJheUJ1ZmZlciwgZW5jRGF0YSk7IC8vIGNvbnNvbGUubG9nKCJlbmNvZGVkIGRhdGEgYXJyYXk6ICIsIGVuY0RhdGEpOwoKICAgICAgICBpZiAocmVzdWx0LmVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb252ZXJzaW9uIGZhaWxlZCEhJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbWV0YURhdGEgPSByZXN1bHQubWV0YURhdGE7CgogICAgICAgIGlmICghcmVzdWx0LmVycm9yKSB7CiAgICAgICAgICAvLyB1c2luZyBkYXRhLXV0aWwuanMgdXRpbGl0eSBmdW5jdGlvbihzKQogICAgICAgICAgdmFyIGJsb2JfZG93bmxvYWQgPSBleHBvcnRGbGFjRmlsZShlbmNEYXRhLCBtZXRhRGF0YSk7IC8vIHZhciBkb3duX2ZpbGUgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2JfZG93bmxvYWQpOwogICAgICAgICAgLy8gbGV0IGZpbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAvLyBmaWxlLmhyZWYgPSBkb3duX2ZpbGU7CiAgICAgICAgICAvLyBmaWxlLmRvd25sb2FkID0gIm91dHB1dC5mbGFjIjsKICAgICAgICAgIC8vIGZpbGUuY2xpY2soKQoKICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYl9kb3dubG9hZCk7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJlYWRlcl9zdHJpbmcgPSByZWFkZXIucmVzdWx0LnNwbGl0KCdiYXNlNjQsJylbMV07CiAgICAgICAgICAgIHZvaWNlX2NoYW5uZWwucHVzaCgndm9pY2VfcGFja2V0c19zZW50JywgewogICAgICAgICAgICAgIHN0cmVhbTogcmVhZGVyX3N0cmluZwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdm9pY2VfY2hhbm5lbC5vbigndm9pY2VfdG9fdGV4dF9yZXBseScsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21pY3JvcGhvbmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd2b2ljZS1vbicpOwoKICAgICAgICAgICAgICBpZiAoZGF0YS50ZXh0LnJlc3VsdHMgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB2bS4kZW1pdCgnYW5hbHl0aWNzX3NlYXJjaF9iYXJfdm9pY2VfcmVzdWx0JywgZGF0YS50ZXh0LnJlc3VsdHNbMF0uYWx0ZXJuYXRpdmVzWzBdLnRyYW5zY3JpcHQpOwogICAgICAgICAgICAgICAgdm0udG9fc2VuZCA9IGRhdGEudGV4dC5yZXN1bHRzWzBdLmFsdGVybmF0aXZlc1swXS50cmFuc2NyaXB0OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1dlIGNvdWxkIG5vdCByZWNvZ25pemUgeW91ciB2b2ljZS4gUGxlYXNlIHRyeSBhZ2FpbiBvciB0eXBlIGluLicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gZW5jb2RlRmxhYyhiaW5EYXRhLCByZWNCdWZmZXJzKSB7CiAgICAgICAgdmFyIHVpOF9kYXRhID0gbmV3IFVpbnQ4QXJyYXkoYmluRGF0YSk7CiAgICAgICAgdmFyIHNhbXBsZV9yYXRlID0gMCwKICAgICAgICAgICAgY2hhbm5lbHMgPSAwLAogICAgICAgICAgICBicHMgPSAwLAogICAgICAgICAgICB0b3RhbF9zYW1wbGVzID0gMCwKICAgICAgICAgICAgYmxvY2tfYWxpZ24sCiAgICAgICAgICAgIHBvc2l0aW9uID0gMCwKICAgICAgICAgICAgcmVjTGVuZ3RoID0gMCwKICAgICAgICAgICAgbWV0YV9kYXRhOwogICAgICAgIC8qKgogICAgICAgICAqICByZWNvcmRzL3NhdmVzIHRoZSBvdXRwdXQgZGF0YSBvZiBsaWJmbGFjLWVuY29kZSBtZXRob2QKICAgICAgICAgKi8KCiAgICAgICAgZnVuY3Rpb24gd3JpdGVfY2FsbGJhY2tfZm4oYnVmZmVyLCBieXRlcywgc2FtcGxlcywgY3VycmVudF9mcmFtZSkgewogICAgICAgICAgcmVjQnVmZmVycy5wdXNoKGJ1ZmZlcik7CiAgICAgICAgICByZWNMZW5ndGggKz0gYnl0ZXM7IC8vIHJlY0xlbmd0aCArPSBidWZmZXIuYnl0ZUxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG1ldGFkYXRhX2NhbGxiYWNrX2ZuKGRhdGEpIHsKICAgICAgICAgIG1ldGFfZGF0YSA9IGRhdGE7CiAgICAgICAgfSAvLyBjaGVjazogaXMgZmlsZSBhIGNvbXBhdGlibGUgd2F2LWZpbGU/CgoKICAgICAgICBpZiAod2F2X2ZpbGVfcHJvY2Vzc2luZ19jaGVja193YXZfZm9ybWF0KHVpOF9kYXRhKSA9PSBmYWxzZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZXJyb3I6ICdXcm9uZyBXQVYgZmlsZSBmb3JtYXQnLAogICAgICAgICAgICBzdGF0dXM6IDAKICAgICAgICAgIH07CiAgICAgICAgfSAvLyBnZXQgV0FWL1BDTSBwYXJhbWV0ZXJzIGZyb20gZGF0YSAvIGZpbGUKCgogICAgICAgIHZhciB3YXZfcGFyYW1ldGVycyA9IHdhdl9maWxlX3Byb2Nlc3NpbmdfcmVhZF9wYXJhbWV0ZXJzKHVpOF9kYXRhKTsKICAgICAgICB2YXIgdG90X3NhbXBsZXMgPSAwOwogICAgICAgIHZhciBjb21wcmVzc2lvbl9sZXZlbCA9IDU7CiAgICAgICAgdmFyIGZsYWNfb2sgPSAxOwogICAgICAgIHZhciBpc192ZXJpZnkgPSB0cnVlOwogICAgICAgIHZhciBmbGFjX2VuY29kZXIgPSBGbGFjLmNyZWF0ZV9saWJmbGFjX2VuY29kZXIod2F2X3BhcmFtZXRlcnMuc2FtcGxlX3JhdGUsIHdhdl9wYXJhbWV0ZXJzLmNoYW5uZWxzLCB3YXZfcGFyYW1ldGVycy5icHMsIGNvbXByZXNzaW9uX2xldmVsLCB0b3Rfc2FtcGxlcywgaXNfdmVyaWZ5KTsKCiAgICAgICAgaWYgKGZsYWNfZW5jb2RlciAhPSAwKSB7CiAgICAgICAgICB2YXIgaW5pdF9zdGF0dXMgPSBGbGFjLmluaXRfZW5jb2Rlcl9zdHJlYW0oZmxhY19lbmNvZGVyLCB3cml0ZV9jYWxsYmFja19mbiwgbWV0YWRhdGFfY2FsbGJhY2tfZm4sIDApOwogICAgICAgICAgZmxhY19vayAmPSBpbml0X3N0YXR1cyA9PSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbXNnID0gJ0Vycm9yIGluaXRpYWxpemluZyB0aGUgZGVjb2Rlci4nOwogICAgICAgICAgY29uc29sZS5lcnJvcihtc2cpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZXJyb3I6IG1zZywKICAgICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgICB9OwogICAgICAgIH0gLy8gY29udmVydCB0aGUgUENNLURhdGEgdG8gdGhlIGFwcHJvcHJpYXRlIGZvcm1hdCBmb3IgdGhlIGxpYmZsYWMgbGlicmFyeSBtZXRob2RzICgzMi1iaXQgYXJyYXkgb2Ygc2FtcGxlcykKICAgICAgICAvLyBjcmVhdGVzIGEgbmV3IGFycmF5ICgzMi1iaXQpIGFuZCBzdG9yZXMgdGhlIDE2LWJpdCBkYXRhIG9mIHRoZSB3YXYtZmlsZSBhcyAzMi1iaXQgZGF0YQoKCiAgICAgICAgdmFyIGJ1ZmZlcl9pMzIgPSB3YXZfZmlsZV9wcm9jZXNzaW5nX2NvbnZlcnRfMTZiaXRkYXRhX3RvMzJiaXRkYXRhKHVpOF9kYXRhLmJ1ZmZlcik7CiAgICAgICAgdmFyIGZsYWNfcmV0dXJuID0gRmxhYy5GTEFDX19zdHJlYW1fZW5jb2Rlcl9wcm9jZXNzX2ludGVybGVhdmVkKGZsYWNfZW5jb2RlciwgYnVmZmVyX2kzMiwgYnVmZmVyX2kzMi5sZW5ndGggLyB3YXZfcGFyYW1ldGVycy5jaGFubmVscyk7CgogICAgICAgIGlmIChmbGFjX3JldHVybiAhPSB0cnVlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6IEZMQUNfX3N0cmVhbV9lbmNvZGVyX3Byb2Nlc3NfaW50ZXJsZWF2ZWQgcmV0dXJuZWQgZmFsc2UuICcgKyBmbGFjX3JldHVybik7CiAgICAgICAgfQoKICAgICAgICBmbGFjX29rICY9IEZsYWMuRkxBQ19fc3RyZWFtX2VuY29kZXJfZmluaXNoKGZsYWNfZW5jb2Rlcik7CiAgICAgICAgRmxhYy5GTEFDX19zdHJlYW1fZW5jb2Rlcl9kZWxldGUoZmxhY19lbmNvZGVyKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbWV0YURhdGE6IG1ldGFfZGF0YSwKICAgICAgICAgIHN0YXR1czogZmxhY19vawogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHdhdl9maWxlX3Byb2Nlc3NpbmdfY2hlY2tfd2F2X2Zvcm1hdCh1aThfZGF0YSkgewogICAgICAgIC8vIGNoZWNrOiBpcyBmaWxlIGEgY29tcGF0aWJsZSB3YXYtZmlsZT8KICAgICAgICBpZiAodWk4X2RhdGEubGVuZ3RoIDwgNDQgfHwgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1aThfZGF0YS5zdWJhcnJheSgwLCA0KSkgIT0gJ1JJRkYnIHx8IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdWk4X2RhdGEuc3ViYXJyYXkoOCwgMTYpKSAhPSAnV0FWRWZtdCAnIHx8IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdWk4X2RhdGEuc3ViYXJyYXkoMzYsIDQwKSkgIT0gJ2RhdGEnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRVJST1I6IHdyb25nIGZvcm1hdCBmb3Igd2F2LWZpbGUuJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICAvKioKICAgICAgICogIGNoZWNrcyBpZiB0aGUgZ2l2ZW4gdWk4X2RhdGEgKHVpOGFycmF5KSBpcyBvZiBhIGZsYWMtZmlsZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBmbGFjX2ZpbGVfcHJvY2Vzc2luZ19jaGVja19mbGFjX2Zvcm1hdCh1aThfZGF0YSkgewogICAgICAgIC8vIGNoZWNrOiBpcyBmaWxlIGEgY29tcGF0aWJsZSBmbGFjLWZpbGU/CiAgICAgICAgaWYgKHVpOF9kYXRhLmxlbmd0aCA8IDQyIHx8IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdWk4X2RhdGEuc3ViYXJyYXkoMCwgNCkpICE9ICdmTGFDJykgewogICAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SOiB3cm9uZyBmb3JtYXQgZm9yIGZsYWMtZmlsZS4nKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KHVpOF9kYXRhLmJ1ZmZlcik7IC8vIGNoZWNrIGxhc3QgNyBiaXRzIG9mIDR0aCBieXRlIGZvciBtZXRhLWRhdGEgQkxPQ0sgdHlwZTogbXVzdCBiZSBTVFJFQU1JTkZPICgwKQoKICAgICAgICBpZiAoKHZpZXcuZ2V0VWludDgoNCkgJiAweDdmKSAhPSAwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRVJST1I6IHdyb25nIGZvcm1hdCBmb3IgZmxhYy1maWxlLicpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHdhdl9maWxlX3Byb2Nlc3NpbmdfcmVhZF9wYXJhbWV0ZXJzKHVpOF9kYXRhKSB7CiAgICAgICAgdmFyIHNhbXBsZV9yYXRlID0gMCwKICAgICAgICAgICAgY2hhbm5lbHMgPSAwLAogICAgICAgICAgICBicHMgPSAwLAogICAgICAgICAgICB0b3RhbF9zYW1wbGVzID0gMCwKICAgICAgICAgICAgYmxvY2tfYWxpZ247IC8vIGdldCBXQVYvUENNIHBhcmFtZXRlcnMgZnJvbSBkYXRhIC8gZmlsZQoKICAgICAgICBzYW1wbGVfcmF0ZSA9ICgodWk4X2RhdGFbMjddIDw8IDggfCB1aThfZGF0YVsyNl0pIDw8IDggfCB1aThfZGF0YVsyNV0pIDw8IDggfCB1aThfZGF0YVsyNF07CiAgICAgICAgY2hhbm5lbHMgPSB1aThfZGF0YVsyMl07CiAgICAgICAgYnBzID0gdWk4X2RhdGFbMzRdOwogICAgICAgIGJsb2NrX2FsaWduID0gdWk4X2RhdGFbMzJdOwogICAgICAgIHRvdGFsX3NhbXBsZXMgPSAoKCh1aThfZGF0YVs0M10gPDwgOCB8IHVpOF9kYXRhWzQyXSkgPDwgOCB8IHVpOF9kYXRhWzQxXSkgPDwgOCB8IHVpOF9kYXRhWzQwXSkgLyBibG9ja19hbGlnbjsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc2FtcGxlX3JhdGU6IHNhbXBsZV9yYXRlLAogICAgICAgICAgY2hhbm5lbHM6IGNoYW5uZWxzLAogICAgICAgICAgYnBzOiBicHMsCiAgICAgICAgICB0b3RhbF9zYW1wbGVzOiB0b3RhbF9zYW1wbGVzLAogICAgICAgICAgYmxvY2tfYWxpZ246IGJsb2NrX2FsaWduCiAgICAgICAgfTsKICAgICAgfQogICAgICAvKioKICAgICAgICogIGNvbnZlcnRzIHRoZSBQQ00gZGF0YSBvZiB0aGUgd2F2IGZpbGUgKGVhY2ggc2FtcGxlIHN0b3JlZCBhcyAxNiBiaXQgdmFsdWUpIGludG8KICAgICAgICogIGEgZm9ybWF0IGV4cGVjdGVkIGJ5IHRoZSBsaWJmbGFjLWVuY29kZXIgbWV0aG9kIChlYWNoIHNhbXBsZSBzdG9yZWQgYXMgMzIgYml0IHZhbHVlIGluIGEgMzItYml0IGFycmF5KQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiB3YXZfZmlsZV9wcm9jZXNzaW5nX2NvbnZlcnRfMTZiaXRkYXRhX3RvMzJiaXRkYXRhKGFycmF5YnVmZmVyKSB7CiAgICAgICAgLy8gY29udmVydCB0aGUgUENNLURhdGEgdG8gdGhlIGFwcHJvcHJpYXRlIGZvcm1hdCBmb3IgdGhlIGxpYmZsYWMgbGlicmFyeSBtZXRob2RzICgzMi1iaXQgYXJyYXkgb2Ygc2FtcGxlcykKICAgICAgICAvLyBjcmVhdGVzIGEgbmV3IGFycmF5ICgzMi1iaXQpIGFuZCBzdG9yZXMgdGhlIDE2LWJpdCBkYXRhIG9mIHRoZSB3YXYtZmlsZSBhcyAzMi1iaXQgZGF0YQogICAgICAgIHZhciBhYl9pMTYgPSBuZXcgRGF0YVZpZXcoYXJyYXlidWZmZXIsIDQ0KTsKICAgICAgICB2YXIgYnVmX2xlbmd0aCA9IGFiX2kxNi5ieXRlTGVuZ3RoOwogICAgICAgIHZhciBidWYzMl9sZW5ndGggPSBidWZfbGVuZ3RoIC8gMjsKICAgICAgICB2YXIgYnVmZmVyX2kzMiA9IG5ldyBVaW50MzJBcnJheShidWYzMl9sZW5ndGgpOwogICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcl9pMzIuYnVmZmVyKTsKICAgICAgICB2YXIgaW5kZXggPSAwOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJ1Zl9sZW5ndGg7IGogKz0gMikgewogICAgICAgICAgdmlldy5zZXRJbnQzMihpbmRleCwgYWJfaTE2LmdldEludDE2KGosIHRydWUpLCB0cnVlKTsKICAgICAgICAgIGluZGV4ICs9IDQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYnVmZmVyX2kzMjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZXhwb3J0RmxhY0ZpbGUocmVjQnVmZmVycywgbWV0YURhdGEpIHsKICAgICAgICB2YXIgcmVjTGVuZ3RoID0gZ2V0TGVuZ3RoKHJlY0J1ZmZlcnMpOwoKICAgICAgICBpZiAobWV0YURhdGEpIHsKICAgICAgICAgIGFkZEZMQUNNZXRhRGF0YShyZWNCdWZmZXJzLCBtZXRhRGF0YSk7CiAgICAgICAgfSAvLyBjb252ZXJ0IGJ1ZmZlcnMgaW50byBvbmUgc2luZ2xlIGJ1ZmZlcgoKCiAgICAgICAgdmFyIHNhbXBsZXMgPSBtZXJnZUJ1ZmZlcnMocmVjQnVmZmVycywgcmVjTGVuZ3RoKTsKICAgICAgICB2YXIgdGhlX2Jsb2IgPSBuZXcgQmxvYihbc2FtcGxlc10pOwogICAgICAgIHJldHVybiB0aGVfYmxvYjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0TGVuZ3RoKHJlY0J1ZmZlcnMpIHsKICAgICAgICAvLyBnZXQgbGVuZ3RoCiAgICAgICAgdmFyIHJlY0xlbmd0aCA9IDA7CgogICAgICAgIGZvciAodmFyIGkgPSByZWNCdWZmZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICByZWNMZW5ndGggKz0gcmVjQnVmZmVyc1tpXS5ieXRlTGVuZ3RoOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlY0xlbmd0aDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYWRkRkxBQ01ldGFEYXRhKGNodW5rcywgbWV0YWRhdGEpIHsKICAgICAgICB2YXIgb2Zmc2V0ID0gNDsKICAgICAgICB2YXIgZGF0YSA9IGNodW5rc1swXTsgLy8gMXN0IGRhdGEgY2h1bmsgc2hvdWxkIGNvbnRhaW4gRkxBQyBpZGVudGlmaWVyICJmTGFDIgoKICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCA0IHx8IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgZGF0YS5zdWJhcnJheSgwLCA0KSkgIT0gJ2ZMYUMnKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmtub3duIGRhdGEgZm9ybWF0OiBjYW5ub3QgYWRkIGFkZGl0aW9uYWwgRkxBQyBtZXRhIGRhdGEgdG8gaGVhZGVyJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBmaXJzdCBjaHVuayBvbmx5IGNvbnRhaW5zIHRoZSBmbGFjIGlkZW50aWZpZXIgc3RyaW5nPwoKCiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09IDQpIHsKICAgICAgICAgIGRhdGEgPSBjaHVua3NbMV07IC8vIGdldCAybmQgZGF0YSBjaHVuayB3aGljaCBzaG91bGQgY29udGFpbiBTVFJFQU1JTkZPIG1ldGEtZGF0YSBibG9jayAoYW5kIHByb2JhYmx5IG1vcmUpCgogICAgICAgICAgb2Zmc2V0ID0gMDsKICAgICAgICB9CgogICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyKTsgLy8gTk9URSBieSBkZWZhdWx0LCB0aGUgZW5jb2RlciB3cml0ZXMgYSAybmQgbWV0YS1kYXRhIGJsb2NrICh0eXBlIFZPUkJJU19DT01NRU5UKSB3aXRoIGVuY29kZXIvdmVyc2lvbiBpbmZvIC0+IGRvIG5vdCBzZXQgImlzIGxhc3QiIHRvIFRSVUUgZm9yIGZpcnN0IG9uZQogICAgICAgIC8vCS8vIHdyaXRlICJpcyBsYXN0IG1ldGEgZGF0YSBibG9jayIgJiB0eXBlIFNUUkVBTUlORk8gdHlwZSAoMCkgYXMgbGl0dGxlIGVuZGlhbiBjb21iaW5lZCB1aW50MSAmIHVpbnQ3IC0+IHVpbnQ4OgogICAgICAgIC8vCXZhciBpc0xhc3QgPSAxOy8vMSBiaXQKICAgICAgICAvLwl2YXIgc3RyZWFtSW5mb1R5cGUgPSAwOy8vNyBiaXQKICAgICAgICAvLwl2aWV3LnNldFVpbnQ4KDAgKyBvZmZzZXQsIGlzTGFzdCA8PCA3IHwgc3RyZWFtSW5mb1R5cGUsIHRydWUpOy8vOCBiaXQKICAgICAgICAvLyBibG9jay1oZWFkZXI6IFNUUkVBTUlORk8gdHlwZSwgYmxvY2sgbGVuZ3RoIC0+IGFscmVhZHkgc2V0CiAgICAgICAgLy8gYmxvY2stY29udGVudDogbWluX2Jsb2Nrc2l6ZSwgbWluX2Jsb2Nrc2l6ZSAtPiBhbHJlYWR5IHNldAogICAgICAgIC8vIHdyaXRlIG1pbl9mcmFtZXNpemUgYXMgbGl0dGxlIGVuZGlhbiB1aW50MjQ6CgogICAgICAgIHZpZXcuc2V0VWludDgoOCArIG9mZnNldCwgbWV0YWRhdGEubWluX2ZyYW1lc2l6ZSA+PiAxNiwgdHJ1ZSk7IC8vIDI0IGJpdAoKICAgICAgICB2aWV3LnNldFVpbnQ4KDkgKyBvZmZzZXQsIG1ldGFkYXRhLm1pbl9mcmFtZXNpemUgPj4gOCwgdHJ1ZSk7IC8vIDI0IGJpdAoKICAgICAgICB2aWV3LnNldFVpbnQ4KDEwICsgb2Zmc2V0LCBtZXRhZGF0YS5taW5fZnJhbWVzaXplLCB0cnVlKTsgLy8gMjQgYml0CiAgICAgICAgLy8gd3JpdGUgbWF4X2ZyYW1lc2l6ZSBhcyBsaXR0bGUgZW5kaWFuIHVpbnQyNDoKCiAgICAgICAgdmlldy5zZXRVaW50OCgxMSArIG9mZnNldCwgbWV0YWRhdGEubWF4X2ZyYW1lc2l6ZSA+PiAxNiwgdHJ1ZSk7IC8vIDI0IGJpdAoKICAgICAgICB2aWV3LnNldFVpbnQ4KDEyICsgb2Zmc2V0LCBtZXRhZGF0YS5tYXhfZnJhbWVzaXplID4+IDgsIHRydWUpOyAvLyAyNCBiaXQKCiAgICAgICAgdmlldy5zZXRVaW50OCgxMyArIG9mZnNldCwgbWV0YWRhdGEubWF4X2ZyYW1lc2l6ZSwgdHJ1ZSk7IC8vIDI0IGJpdAogICAgICAgIC8vIGJsb2NrLWNvbnRlbnQ6IHNhbXBsZVJhdGUsIGNoYW5uZWxzLCBiaXRzUGVyU2FtcGxlIC0+IGFscmVhZHkgc2V0CiAgICAgICAgLy8gd3JpdGUgdG90YWxfc2FtcGxlcyBhcyBsaXR0bGUgZW5kaWFuIHVpbnQzNjoKICAgICAgICAvLyBUT0RPIHNldCBsYXN0IDQgYml0cyB0byBoYWxmIG9mIHRoZSB2YWx1ZSBpbiBpbmRleCAxNwoKICAgICAgICB2aWV3LnNldFVpbnQ4KDE4ICsgb2Zmc2V0LCBtZXRhZGF0YS50b3RhbF9zYW1wbGVzID4+IDI0LCB0cnVlKTsgLy8gMzYgYml0CgogICAgICAgIHZpZXcuc2V0VWludDgoMTkgKyBvZmZzZXQsIG1ldGFkYXRhLnRvdGFsX3NhbXBsZXMgPj4gMTYsIHRydWUpOyAvLyAzNiBiaXQKCiAgICAgICAgdmlldy5zZXRVaW50OCgyMCArIG9mZnNldCwgbWV0YWRhdGEudG90YWxfc2FtcGxlcyA+PiA4LCB0cnVlKTsgLy8gMzYgYml0CgogICAgICAgIHZpZXcuc2V0VWludDgoMjEsIG1ldGFkYXRhLnRvdGFsX3NhbXBsZXMsIHRydWUpOyAvLyAzNiBiaXQKCiAgICAgICAgd3JpdGVNZDUodmlldywgMjIgKyBvZmZzZXQsIG1ldGFkYXRhLm1kNXN1bSk7IC8vIDE2ICogOCBiaXQKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbWVyZ2VCdWZmZXJzKGNoYW5uZWxCdWZmZXIsIHJlY29yZGluZ0xlbmd0aCkgewogICAgICAgIHZhciByZXN1bHQgPSBuZXcgVWludDhBcnJheShyZWNvcmRpbmdMZW5ndGgpOwogICAgICAgIHZhciBvZmZzZXQgPSAwOwogICAgICAgIHZhciBsbmcgPSBjaGFubmVsQnVmZmVyLmxlbmd0aDsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsbmc7IGkrKykgewogICAgICAgICAgdmFyIGJ1ZmZlciA9IGNoYW5uZWxCdWZmZXJbaV07CiAgICAgICAgICByZXN1bHQuc2V0KGJ1ZmZlciwgb2Zmc2V0KTsKICAgICAgICAgIG9mZnNldCArPSBidWZmZXIubGVuZ3RoOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gd3JpdGVNZDUodmlldywgb2Zmc2V0LCBzdHIpIHsKICAgICAgICB2YXIgaW5kZXg7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aCAvIDI7ICsraSkgewogICAgICAgICAgaW5kZXggPSBpICogMjsKICAgICAgICAgIHZpZXcuc2V0VWludDgoaSArIG9mZnNldCwgcGFyc2VJbnQoc3RyLnN1YnN0cmluZyhpbmRleCwgaW5kZXggKyAyKSwgMTYpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}