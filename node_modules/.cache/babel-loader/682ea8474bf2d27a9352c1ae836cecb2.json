{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js!/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/ProductManagement/AlternateProductNames.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/ProductManagement/AlternateProductNames.vue","mtime":1661252053823},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMuanMiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCB7IGZyZWV6ZV9wb3J0YWwsIHNob3dfc3Vic2NyaXB0aW9uX2V4cGlyZWRfc3dhbCB9IGZyb20gIkAvcG9ydGFsL21peGlucyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWx0ZXJuYXRlUHJvZHVjdE5hbWVzUGFnZSIsCiAgbWl4aW5zOiBbZnJlZXplX3BvcnRhbCwgc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoUXVlcnk6IG51bGwsCiAgICAgIHNwaW5uZXJPbjogZmFsc2UsCiAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgIC8vIHByb2R1Y3RfbmFtZXNfbGlzdDogW10sCiAgICAgIGN1cnJlbnRfcHJvZHVjdF9uYW1lOiBudWxsLAogICAgICBhbHRlcm5hdGVfcHJvZHVjdF9uYW1lOiBudWxsLAogICAgICBhbHRlcm5hdGVfcHJvZHVjdF9saXN0OiBbXSwKICAgICAgaXNfZWRpdF9hbHRlcm5hdGVfbmFtZTogZmFsc2UsCiAgICAgIGN1cnJlbnRfZWRpdF9pbmRleDogbnVsbCwKICAgICAgcmV0YWlsX2JvdF90ZW1wbGF0ZV9pZDogbnVsbCwKICAgICAgcHJvZHVjdHNfbGlzdF9kYXRhOiBbXSwKICAgICAgY3VycmVudF9hY3RpdmVfcHJvZHVjdDogbnVsbCwKICAgICAgaXNWaXNpYmxlU2VhcmNoQ2xlYXI6IGZhbHNlLAogICAgICB3YW50X3N0YXR1czogdHJ1ZSwKICAgICAgaW50ZW50X25lcl9tb2RlbF9pbnByb2dyZXNzOiBmYWxzZSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgZGlzYWJsZV9idG5fZXhwaXJlZDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcHJvZHVjdE5hbWU6IGZ1bmN0aW9uIHByb2R1Y3ROYW1lKCkgewogICAgICB2YXIgcHJvZHVjdHNfbmFtZSA9ICIiOwoKICAgICAgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7CgogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5jaGVja2VkX2xpc3QpIHsKICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdFtpXS5wcm9kdWN0X25hbWUgPT0gdGhpcy5jdXJyZW50X2FjdGl2ZV9wcm9kdWN0LnByb2R1Y3RfbmFtZSkgewogICAgICAgICAgICBjaGVjayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoY2hlY2spIHsKICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGggLSAxOwogICAgICAgICAgcmV0dXJuIHByb2R1Y3RzX25hbWUgPSB0aGlzLmN1cnJlbnRfYWN0aXZlX3Byb2R1Y3QucHJvZHVjdF9uYW1lICsgKGxlbiA+IDAgPyAiIGFuZCAiICsgKGxlbiA+IDAgPyBsZW4gOiAnJykgKyAiIG1vcmUiIDogJycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50X2FjdGl2ZV9wcm9kdWN0LnByb2R1Y3RfbmFtZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudF9hY3RpdmVfcHJvZHVjdC5wcm9kdWN0X25hbWU7CiAgICAgIH0KICAgIH0sCiAgICByZXN1bHRRdWVyeTogZnVuY3Rpb24gcmVzdWx0UXVlcnkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RzX2xpc3RfZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykuZXZlcnkoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucHJvZHVjdF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICByZXR1cm4gdGhpcy5wcm9kdWN0c19saXN0X2RhdGE7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja19pc19lZGl0OiBmdW5jdGlvbiBjaGVja19pc19lZGl0KCkgewogICAgICByZXR1cm4gdGhpcy5pc19lZGl0X2FsdGVybmF0ZV9uYW1lID8gdGhpcy5zYXZlX2VkaXRfYWx0ZXJuYXRlX25hbWUgOiB0aGlzLmFkZF9hbHRlcm5hdGVfbmFtZTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgYm90X3RlbXBsYXRlc19kYXRhID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkJvdFRlbXBsYXRlcyIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm90X3RlbXBsYXRlc19kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChib3RfdGVtcGxhdGVzX2RhdGFbaV0uZG9tYWluID09PSAiUmV0YWlsIiAmJiBib3RfdGVtcGxhdGVzX2RhdGFbaV0uc3Vic2NyaWJlZCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMucmV0YWlsX2JvdF90ZW1wbGF0ZV9pZCA9IGJvdF90ZW1wbGF0ZXNfZGF0YVtpXS50ZW1wbGF0ZV9pZDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHRoaXMuJHJvb3QuJG9uKCJzZW5kX21vZGVsX3N0YXR1cyIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmIChkYXRhID09IHRydWUpIHsKICAgICAgICBfdGhpczIuY2hlY2tfaW50ZW50X25lcl9tb2RlbF9zdGF0dXMoKTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgdm0gPSB0aGlzOwogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAvLyAkKCdkaXY6aW5wdXQnKS5wcm9wKCdjaGVja2VkJyx0cnVlKTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOyAvLyB0aGlzLmZldGNoX3Byb2R1Y3RfbGlzdCgpOwoKICAgIHRoaXMuZmV0Y2hfYWRkZWRfc3lub255bXMoKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBfdGhpczIuZnJlZXplX3BvcnRhbCgpOwogICAgfSwgMTAwMCk7CiAgICB0aGlzLmNoZWNrX2ludGVudF9uZXJfbW9kZWxfc3RhdHVzKCk7CiAgICB0aGlzLiRyb290LiRvbigiQWx0ZXJuYXRlUHJvZHVjdE5hbWVzUGFnZURpc2FibGVkIiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKGRhdGEgPT09IHRydWUpIHsKICAgICAgICBfdGhpczIuZGlzYWJsZV9idG5fZXhwaXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgd2F0Y2g6IHsKICAgIHNlYXJjaFF1ZXJ5OiBmdW5jdGlvbiBzZWFyY2hRdWVyeSgpIHsKICAgICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkgPT09ICcnIHx8IHRoaXMuc2VhcmNoUXVlcnkgPT09IG51bGwpIHsKICAgICAgICB0aGlzLmlzVmlzaWJsZVNlYXJjaENsZWFyID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hRdWVyeSAhPSBudWxsIHx8IHRoaXMuc2VhcmNoUXVlcnkgIT0gJycpIHsKICAgICAgICB0aGlzLmlzVmlzaWJsZVNlYXJjaENsZWFyID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRfY3VycmVudF9wcm9kdWN0KDApOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0ZWRfc3RhdGVtZW50czogZnVuY3Rpb24gc2VsZWN0ZWRfc3RhdGVtZW50cyhpbmRleCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmIChpbmRleCA9PSAiYWxsIikgewogICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgdmFyIHJvbGVfbGVuZ3RoID0gdGhpcy5yZXN1bHRRdWVyeS5sZW5ndGg7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9sZV9sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0aGlzLnJlc3VsdFF1ZXJ5W2ldKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkX2xpc3QuaW5jbHVkZXMoaW5kZXgpKSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2godGhpcy5yZXN1bHRRdWVyeVtpbmRleF0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gZmFsc2UpIHsKICAgICAgICAgIHZhciBzZWxlY3RhbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc2VsZWN0YWxsIik7CgogICAgICAgICAgaWYgKHNlbGVjdGFsbC5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgc2VsZWN0YWxsLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcihmdW5jdGlvbiAocm9sZSkgewogICAgICAgICAgICByZXR1cm4gcm9sZSAhPT0gX3RoaXMzLnJlc3VsdFF1ZXJ5W2luZGV4XTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QgPSB0ZW1wOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNoZWNrX2ludGVudF9uZXJfbW9kZWxfc3RhdHVzOiBmdW5jdGlvbiBjaGVja19pbnRlbnRfbmVyX21vZGVsX3N0YXR1cygpIHsKICAgICAgdGhpcy5tb2RlbF9zdGF0dXMgPSB0aGlzLiRzZXNzaW9uLmdldCgiTW9kZWxTdGF0dXMiKTsKCiAgICAgIGlmICh0aGlzLm1vZGVsX3N0YXR1cyA9PSAiTm8gRmFpbHVyZSIpIHsKICAgICAgICB0aGlzLmludGVudF9uZXJfbW9kZWxfaW5wcm9ncmVzcyA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKEJvb2xlYW4odGhpcy5tb2RlbF9zdGF0dXMuaW50ZW50X21vZGVsKSA9PT0gdHJ1ZSB8fCBCb29sZWFuKHRoaXMubW9kZWxfc3RhdHVzLm5lcl9tb2RlbCkgPT09IHRydWUpIHsKICAgICAgICBpZiAodGhpcy5tb2RlbF9zdGF0dXMuaW50ZW50X21vZGVsID09ICJJblByb2dyZXNzIiB8fCB0aGlzLm1vZGVsX3N0YXR1cy5uZXJfbW9kZWwgPT0gIkluUHJvZ3Jlc3MiKSB7CiAgICAgICAgICB0aGlzLmludGVudF9uZXJfbW9kZWxfaW5wcm9ncmVzcyA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaW50ZW50X25lcl9tb2RlbF9pbnByb2dyZXNzID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW50ZW50X25lcl9tb2RlbF9pbnByb2dyZXNzID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBzaG93X21vZGVsX3Byb2dyZXNzOiBmdW5jdGlvbiBzaG93X21vZGVsX3Byb2dyZXNzKGluZGV4KSB7CiAgICAgIGlmICh0aGlzLmludGVudF9uZXJfbW9kZWxfaW5wcm9ncmVzcyA9PSB0cnVlKSB7CiAgICAgICAgaWYgKGluZGV4ID09ICdzdHlsZScpIHsKICAgICAgICAgIHJldHVybiAiY3Vyc29yOiBub3QtYWxsb3dlZCI7CiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PSAndGl0bGUnKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50bHQoJ2FsdGVyX3RyYWluaW5nX3Byb2dyZXNzX21zZycpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGNsZWFyX3NlYXJjaF9uYW1lOiBmdW5jdGlvbiBjbGVhcl9zZWFyY2hfbmFtZSgpIHsKICAgICAgdGhpcy5zZWFyY2hRdWVyeSA9IG51bGw7CiAgICB9LAogICAgc3luY19wcm9kdWN0czogZnVuY3Rpb24gc3luY19wcm9kdWN0cygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBTd2FsKHsKICAgICAgICB0aXRsZTogdGhpcy50bHQoJ2FsdGVyX3Byb2R1Y3Rfc3dhbF9tc2cnKSwKICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWx0ZXJfcHJvZHVjdF9zeW5jX21zZycpLAogICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLnRsdCgnYWx0ZXJfcHJvZHVjdF9jb25maXJtX21zZycpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIF90aGlzNC5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudGVtcGxhdGVfc3lub255bXMoKSwgewogICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczQuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczQuY29tcGFueV9uYW1lLAogICAgICAgICAgICB0ZW1wbGF0ZV9pZDogX3RoaXM0LnJldGFpbF9ib3RfdGVtcGxhdGVfaWQsCiAgICAgICAgICAgIGlzX3N5bmM6IHRydWUKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM0LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSBfdGhpczQuYXBpX3N0YXR1c19jb2RlLlNZTkNfSU5QUk9HUkVTU19NT0RFTFMuTVNHX0NPREUpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBfdGhpczQudGx0KCdhbHRlcl9wcm9kdWN0X3N5bmNlZF9tc2cnKSwKICAgICAgICAgICAgICAgIHRleHQ6IF90aGlzNC50bHQoJ2FsdGVyX3Byb2R1Y3RfaW5fcHJvZ3Jlc3NfbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIHRpbWVyOiA1NTAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogX3RoaXM0LnRsdCgnYWx0ZXJfcHJvZHVjdF9lcnJvcl9vY2N1cnJlZF9tc2cnKSwKICAgICAgICAgICAgICAgIHRleHQ6IF90aGlzNC50bHQoJ2FsdGVyX3Byb2R1Y3Rfc3dhbF90cnlfYWdhaW5fbXNnJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoX2FkZGVkX3N5bm9ueW1zOiBmdW5jdGlvbiBmZXRjaF9hZGRlZF9zeW5vbnltcygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnRlbXBsYXRlX3N5bm9ueW1zKCksIHsKICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnlfbmFtZSwKICAgICAgICB0ZW1wbGF0ZV9pZDogdGhpcy5yZXRhaWxfYm90X3RlbXBsYXRlX2lkLAogICAgICAgIGlzX2dldDogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhOwogICAgICAgIF90aGlzNS5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgaWYgKGRhdGEubWVzc2FnZS5NU0dfQ09ERSA9PSBfdGhpczUuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFX01PREVMUy5NU0dfQ09ERSkgewogICAgICAgICAgaWYgKGRhdGEuZGF0YS5kYXRhLlN5bm9ueW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgX3RoaXM1LnByb2R1Y3RzX2xpc3RfZGF0YSA9IGRhdGEuZGF0YS5kYXRhLlN5bm9ueW1zOwoKICAgICAgICAgICAgX3RoaXM1LnNldF9jdXJyZW50X3Byb2R1Y3QoMCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNS5mcmVlemVfcG9ydGFsKCk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM1LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgIF90aGlzNS4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIGZldGNoX3Byb2R1Y3RfbGlzdCgpIHsKICAgIC8vICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgLy8gICBheGlvcwogICAgLy8gICAgIC5wb3N0KGFwaV9jYWxscy50ZW1wbGF0ZV9zeW5vbnltcygpLCB7CiAgICAvLyAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlfaWQsCiAgICAvLyAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueV9uYW1lLAogICAgLy8gICAgICAgaXNfZ2V0X3Byb2R1Y3RfbGlzdDogdHJ1ZSwKICAgIC8vICAgICB9LAogICAgLy8gICAgIHsKICAgIC8vICAgICAgIGhlYWRlcnM6IHsKICAgIC8vICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuJHNlc3Npb24uZ2V0KCJhdCIpfWAsCiAgICAvLyAgICAgfSwKICAgIC8vICAgICB9KQogICAgLy8gICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgLy8gICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAvLyAgICAgICAgIHRoaXMucHJvZHVjdF9uYW1lc19saXN0ID0gZGF0YS5wcm9kdWN0X25hbWVzX2xpc3Q7CiAgICAvLyAgICAgICAgIGlmICh0aGlzLnByb2R1Y3RfbmFtZXNfbGlzdC5sZW5ndGggPiAwKSB7CiAgICAvLyAgICAgICAgICAgdGhpcy5jdXJyZW50X3Byb2R1Y3RfbmFtZSA9IHRoaXMucHJvZHVjdF9uYW1lc19saXN0WzBdOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgIC8vICAgdGhpcy5mcmVlemVfcG9ydGFsKCk7CiAgICAvLyB9LCAxMDAwKTsKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaCgoZSkgPT4gewogICAgLy8gICAgICAgdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOQogICAgLy8gICAgICAgICApIHsKICAgIC8vICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vIH0sCiAgICBhZGRfYWx0ZXJuYXRlX25hbWU6IGZ1bmN0aW9uIGFkZF9hbHRlcm5hdGVfbmFtZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIGlmIChCb29sZWFuKHRoaXMuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZSkgPT09IHRydWUpIHsKICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdhbHRlcl9wcm9kdWN0X211bHRpcGxlX3NlbGVjdF9tc2cnKSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWx0ZXJfcHJvZHVjdF9uYW1lX21zZzEnKSArIHRoaXMuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZSArIHRoaXMudGx0KCdhbHRlcl9wcm9kdWN0X25hbWVfbXNnMycpLAogICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBfdGhpczYuY2hlY2tlZF9saXN0KSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gX3RoaXM2LnByb2R1Y3RzX2xpc3RfZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczYuY2hlY2tlZF9saXN0W2ldLmlkID09IF90aGlzNi5wcm9kdWN0c19saXN0X2RhdGFbal0uaWQpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi5wcm9kdWN0c19saXN0X2RhdGFbal0uc3lub255bXMucHVzaChfdGhpczYuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM2LmFsdGVybmF0ZV9wcm9kdWN0X25hbWUgPSBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczYuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZSA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9hY3RpdmVfcHJvZHVjdC5zeW5vbnltcy5wdXNoKHRoaXMuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZSk7CiAgICAgICAgICAgIHRoaXMuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd19zdWJzY3JpcHRpb25fZXhwaXJlZF9zd2FsKCk7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0X2FsdGVybmF0ZV9uYW1lOiBmdW5jdGlvbiBlZGl0X2FsdGVybmF0ZV9uYW1lKGluZGV4KSB7CiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRhYmxlX2lkIikuc2Nyb2xsVG9wID0gMDsKCiAgICAgIGlmICghdGhpcy5pc19lZGl0X2FsdGVybmF0ZV9uYW1lKSB7CiAgICAgICAgdGhpcy5hbHRlcm5hdGVfcHJvZHVjdF9uYW1lID0gdGhpcy5jdXJyZW50X2FjdGl2ZV9wcm9kdWN0LnN5bm9ueW1zW2luZGV4XTsKICAgICAgICB0aGlzLmN1cnJlbnRfZWRpdF9pbmRleCA9IGluZGV4OwogICAgICAgIHRoaXMuaXNfZWRpdF9hbHRlcm5hdGVfbmFtZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXNldF9lZGl0KCk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlX2VkaXRfYWx0ZXJuYXRlX25hbWU6IGZ1bmN0aW9uIHNhdmVfZWRpdF9hbHRlcm5hdGVfbmFtZSgpIHsKICAgICAgdGhpcy5jdXJyZW50X2FjdGl2ZV9wcm9kdWN0LnN5bm9ueW1zW3RoaXMuY3VycmVudF9lZGl0X2luZGV4XSA9IHRoaXMuYWx0ZXJuYXRlX3Byb2R1Y3RfbmFtZTsKICAgICAgdGhpcy5yZXNldF9lZGl0KCk7CiAgICB9LAogICAgZGVsZXRlX2FsdGVybmF0ZV9uYW1lOiBmdW5jdGlvbiBkZWxldGVfYWx0ZXJuYXRlX25hbWUoaW5kZXgpIHsKICAgICAgdGhpcy5jdXJyZW50X2FjdGl2ZV9wcm9kdWN0LnN5bm9ueW1zLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgcmVzZXRfZWRpdDogZnVuY3Rpb24gcmVzZXRfZWRpdCgpIHsKICAgICAgdGhpcy5pc19lZGl0X2FsdGVybmF0ZV9uYW1lID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVudF9lZGl0X2luZGV4ID0gbnVsbDsKICAgICAgdGhpcy5hbHRlcm5hdGVfcHJvZHVjdF9uYW1lID0gbnVsbDsKICAgIH0sCiAgICBzZXRfY3VycmVudF9wcm9kdWN0OiBmdW5jdGlvbiBzZXRfY3VycmVudF9wcm9kdWN0KGluZGV4KSB7CiAgICAgIHRoaXMucmVzZXRfZWRpdCgpOwogICAgICB0aGlzLmN1cnJlbnRfYWN0aXZlX3Byb2R1Y3QgPSB0aGlzLnJlc3VsdFF1ZXJ5W2luZGV4XTsKICAgIH0sCiAgICBjaGVja19jdXJyZW50X3Byb2R1Y3RfYWN0aXZlOiBmdW5jdGlvbiBjaGVja19jdXJyZW50X3Byb2R1Y3RfYWN0aXZlKGluZGV4KSB7CiAgICAgIGlmIChCb29sZWFuKHRoaXMuY3VycmVudF9hY3RpdmVfcHJvZHVjdCkgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50X2FjdGl2ZV9wcm9kdWN0LmlkID09PSB0aGlzLnJlc3VsdFF1ZXJ5W2luZGV4XS5pZCA/ICJjdXJyZW50LWFjdGl2ZS1wcm9kdWN0IiA6IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja19jdXJyZW50X2VkaXRfc3lub255bTogZnVuY3Rpb24gY2hlY2tfY3VycmVudF9lZGl0X3N5bm9ueW0oaW5kZXgsIHRhZykgewogICAgICBpZiAoQm9vbGVhbih0aGlzLmlzX2VkaXRfYWx0ZXJuYXRlX25hbWUpID09PSB0cnVlKSB7CiAgICAgICAgaWYgKHRhZyA9PT0gInNwYW4iKSB7CiAgICAgICAgICByZXR1cm4gIm5vdC1jdXJyZW50LWVkaXQtc3lub255bS1zcGFuIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudF9lZGl0X2luZGV4ID09PSBpbmRleCA/ICJjdXJyZW50LWVkaXQtc3lub255bSIgOiAibm90LWN1cnJlbnQtZWRpdC1zeW5vbnltIjsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJub3QtZWRpdGluZy1zeW5vbnltcyI7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlX3N5bm9ueW1zOiBmdW5jdGlvbiBzYXZlX3N5bm9ueW1zKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5kaXNhYmxlX2J0bl9leHBpcmVkKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnRsdCgnYWx0ZXJfcHJvZHVjdF9zd2FsX3NhdmVfbXNnJyksCiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWx0ZXJfcHJvZHVjdF9zd2FsX3NhdmVfbXNnMScpLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy50bHQoJ2FsdGVyX3Byb2R1Y3Rfc3dhbF9jb25maXJtX21zZycpCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzNy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy50ZW1wbGF0ZV9zeW5vbnltcygpLCB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczcuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBpc19hZGRfb3JfZWRpdDogdHJ1ZSwKICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogX3RoaXM3LnJldGFpbF9ib3RfdGVtcGxhdGVfaWQsCiAgICAgICAgICAgICAgc3lub255bXM6IF90aGlzNy5wcm9kdWN0c19saXN0X2RhdGEKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM3LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFID09IF90aGlzNy5hcGlfc3RhdHVzX2NvZGUuVEVNUExBVEVfU1lOT05ZTVNfVVBEQVRFRF9TVUNDRVNTRlVMTFlfTU9ERUxTLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgICAgdGV4dDogX3RoaXM3LnRsdCgnYWx0ZXJfcHJvZHVjdF9kYXRhX3JlZmxlY3RfbXNnJyksCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUgLy8gdGltZXI6IDUwMDAsCgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgICB0ZXh0OiBfdGhpczcudGx0KCdhbHRlcl9wcm9kdWN0X3NvbWVfZXJyb3JfbXNnMScpLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzNy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgICAgdGV4dDogX3RoaXM3LnRsdCgnYWx0ZXJfcHJvZHVjdF9zb21lX2Vycm9yX19tc2cyJyksCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKEJvb2xlYW4oZS5yZXNwb25zZSkgPT09IHRydWUgJiYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSkgewogICAgICAgICAgICAgICAgX3RoaXM3LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93X3N1YnNjcmlwdGlvbl9leHBpcmVkX3N3YWwoKTsKICAgICAgfQogICAgfSwKICAgIHRyYWluX21vZGVsOiBmdW5jdGlvbiB0cmFpbl9tb2RlbCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZV9idG5fZXhwaXJlZCkgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGl0bGU6IHRoaXMudGx0KCdhbHRlcl9wcm9kdWN0X3N3YWxfbW9kZWxfbXNnJyksCiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWx0ZXJfcHJvZHVjdF90cmFpbl9tb2RlbF9tc2cnKSwKICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMudGx0KCdhbHRlcl9wcm9kdWN0X3N3YWxfY29uZmlybV9tc2cnKSwKICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICBfdGhpczguc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudHJhaW5faW50ZW50X25lcl9tb2RlbCgpLCB7CiAgICAgICAgICAgICAgZW1haWw6IF90aGlzOC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczguJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogX3RoaXM4LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogX3RoaXM4LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM4LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzOC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgdXBkYXRlX21vZGVsOiB0cnVlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KF90aGlzOC4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIF90aGlzOC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpczgud2FudF9zdGF0dXMgPSB0cnVlOwoKICAgICAgICAgICAgICBfdGhpczguJHJvb3QuJGVtaXQoIndhbnRfbW9kZWxfc3RhdHVzIiwgX3RoaXM4LndhbnRfc3RhdHVzKTsKCiAgICAgICAgICAgICAgX3RoaXM4LmNoZWNrX2ludGVudF9uZXJfbW9kZWxfc3RhdHVzKCk7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gX3RoaXM4LmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihfdGhpczgudGx0KCdhbHRlcl9wcm9kdWN0X2ludGVybmFsX3NlcnZlcl9tc2cnKSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUgPT0gX3RoaXM4LmFwaV9zdGF0dXNfY29kZS5UUkFJTklOR19MSU1JVF9FWENFRURfTU9ERUxTLk1TR19DT0RFKSB7CiAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBfdGhpczguc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgX3RoaXM4LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93X3N1YnNjcmlwdGlvbl9leHBpcmVkX3N3YWwoKTsKICAgICAgfQogICAgfQogIH0KfTs="},null]}