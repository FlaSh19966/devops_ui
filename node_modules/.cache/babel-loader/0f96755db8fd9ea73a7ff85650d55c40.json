{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Apps/Ecommerce.vue","mtime":1643027096144},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IHsgU2NyaXB0IH0gZnJvbSAidm0iOwppbXBvcnQgeyB0cnVuY2F0ZSB9IGZyb20gImZzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpdGVtX2xpc3Q6IFtdLAogICAgICBjaGVja2VkX2xpc3Q6IFtdLAogICAgICBmaWxlX2xhYmVsOiBudWxsLAogICAgICBhZGRfZWRpdDogdHJ1ZSwKICAgICAgZGVsZXRlX2xpc3Q6IFtdLAogICAgICB0cmF2ZWw6IFswLCAxLCAyXSwKICAgICAgZWRpdF9pbmRleDogbnVsbCwKICAgICAgZG9jX2lkOiAiIiwKICAgICAgb2xkX2ZpbGVfbmFtZTogIiIsCiAgICAgIHByb2R1Y3RfbmFtZTogIiIsCiAgICAgIGNzdmZpbGU6ICIiLAogICAgICBjc3ZmaWxlbmFtZTogIkNob29zZSBDU1YgRmlsZSIsCiAgICAgIGVkaXRwcm9kdWN0bmFtZTogZmFsc2UsCiAgICAgIGVkaXRjc3ZmaWxlOiBmYWxzZSwKICAgICAgcGFnZV9ubzogMSwKICAgICAgcGVyX3BhZ2U6IDEwMCwKICAgICAgdG90YWxfcGFnZXM6IDAsCiAgICAgIHBhZ2VfYXJyYXk6IFtdLAogICAgICBudW1iZXJfb2Zfcm93czogMCwKICAgICAgbmV3X3Byb2R1Y3Q6IHt9LAogICAgICBpc2VkaXRwcm9kdWN0aWQ6IGZhbHNlLAogICAgICBpc2VkaXRjYXRlZ29yeW5hbWU6IGZhbHNlLAogICAgICB2aWV3dXJsOiBudWxsLAogICAgICBjb2xfbGlzdDogW10sCiAgICAgIGNvbF9sZW5ndGg6IDAsCiAgICAgIGlzb2s6IGZhbHNlLAogICAgICBjb2xfa2V5OiBbXSwKICAgICAgLy8gc2VhcmNoX2J5OiAnJywKICAgICAgc2VhcmNoX25hbWU6ICIiLAogICAgICBzZWxlY3RfbGlzdDogW10sCiAgICAgIHNwaW5uZXJPbjogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIGlzZ2V0Y3N2OiB0cnVlLAogICAgICBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZQogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJObyBQcm9kdWN0cyBBZGRlZCBZZXQiIHx8IHJlc3BvbnNlLmRhdGEgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIgfHwgcmVzcG9uc2UuZGF0YS5jc3ZmaWxlLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgX3RoaXMuZm9yZGVmYXVsdCgpOwogICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuY3N2ZmlsZS5sZW5ndGgpIHsKICAgICAgICBfdGhpcy5pdGVtTGlzdChyZXNwb25zZS5kYXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgey8vIHZhciB2bSA9IHRoaXM7CiAgICAvLyAkKCIjc2VsZWN0YWxsIikuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAvLyAgIGlmICgkKHRoaXMpLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAvLyAgICAgLy8gJCgnZGl2OmlucHV0JykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7CiAgICAvLyAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAvLyAgICAgY29uc29sZS5sb2coImhlZWV5Iik7CiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgdm0uY2hlY2tlZF9saXN0ID0gW107CiAgICAvLyAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgLy8gICAgIGNvbnNvbGUubG9nKCJoZWVleTIiKTsKICAgIC8vICAgfQogICAgLy8gfSk7CiAgfSwKICAvLyBjaGVja0FsbChlbGUpIHsKICAvLyAgICAgIHZhciBjaGVja2JveGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0Jyk7CiAgLy8gICAgICBpZiAoZWxlLmNoZWNrZWQpIHsKICAvLyAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrYm94ZXMubGVuZ3RoOyBpKyspIHsKICAvLyAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ZXNbaV0udHlwZSA9PSAnY2hlY2tib3gnKSB7CiAgLy8gICAgICAgICAgICAgICAgICBjaGVja2JveGVzW2ldLmNoZWNrZWQgPSB0cnVlOwogIC8vICAgICAgICAgICAgICB9CiAgLy8gICAgICAgICAgfQogIC8vICAgICAgfSBlbHNlIHsKICAvLyAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZWNrYm94ZXMubGVuZ3RoOyBpKyspIHsKICAvLyAgICAgICAgICAgICAgY29uc29sZS5sb2coaSkKICAvLyAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ZXNbaV0udHlwZSA9PSAnY2hlY2tib3gnKSB7CiAgLy8gICAgICAgICAgICAgICAgICBjaGVja2JveGVzW2ldLmNoZWNrZWQgPSBmYWxzZTsKICAvLyAgICAgICAgICAgICAgfQogIC8vICAgICAgICAgIH0KICAvLyAgICAgIH0KICAvLyAgfSwKICBtZXRob2RzOiB7CiAgICBtYWtlX3RydWU6IGZ1bmN0aW9uIG1ha2VfdHJ1ZSgpIHsKICAgICAgdGhpcy5pc29rID0gdHJ1ZTsKICAgIH0sCiAgICBkb3dubG9hZF9zYW1wbGVfZmlsZTogZnVuY3Rpb24gZG93bmxvYWRfc2FtcGxlX2ZpbGUoKSB7CiAgICAgIHZhciBzYW1wbGVfY3N2X2ZpbGVfdXJsID0gIiI7CiAgICAgIHdpbmRvdy5vcGVuKHNhbXBsZV9jc3ZfZmlsZV91cmwsICJfYmxhbmsiKTsKICAgIH0sCiAgICBmb3JkZWZhdWx0OiBmdW5jdGlvbiBmb3JkZWZhdWx0KCkgewogICAgICB0aGlzLm5ld19wcm9kdWN0WyJDYXRlZ29yeUlkIl0gPSBudWxsLCB0aGlzLm5ld19wcm9kdWN0WyJDYXRlZ29yeU5hbWUiXSA9ICIiLCB0aGlzLm5ld19wcm9kdWN0WyJQcm9kdWN0SWQiXSA9IG51bGwsIHRoaXMubmV3X3Byb2R1Y3RbIlByb2R1Y3ROYW1lIl0gPSAiIiwgdGhpcy5uZXdfcHJvZHVjdFsiUHJvZHVjdFVybCJdID0gIiIsIHRoaXMubmV3X3Byb2R1Y3RbIlByb2R1Y3RJbWFnZVVybCJdID0gIiIsIHRoaXMubmV3X3Byb2R1Y3RbIlF1YW50aXR5Il0gPSBudWxsLCB0aGlzLm5ld19wcm9kdWN0WyJVbml0UHJpY2UiXSA9IG51bGwsIHRoaXMubmV3X3Byb2R1Y3RbIldlaWdodCJdID0gbnVsbCwgdGhpcy5jb2xfbGlzdC5wdXNoKCJDQVRFR09SWSBJRCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiQ2F0ZWdvcnlJZCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIkNBVEVHT1JZIE5BTUUiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIkNhdGVnb3J5TmFtZSIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgSUQiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIlByb2R1Y3RJZCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgTkFNRSIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUHJvZHVjdE5hbWUiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJQUk9EVUNUIFVSTCIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUHJvZHVjdFVybCIpOwogICAgICB0aGlzLmNvbF9saXN0LnB1c2goIlBST0RVQ1QgSU1BR0UgVVJMIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJQcm9kdWN0SW1hZ2VVcmwiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJRVUFOVElUWSIpOwogICAgICB0aGlzLmNvbF9rZXkucHVzaCgiUXVhbnRpdHkiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJVTklUIFBSSUNFIik7CiAgICAgIHRoaXMuY29sX2tleS5wdXNoKCJVbml0UHJpY2UiKTsKICAgICAgdGhpcy5jb2xfbGlzdC5wdXNoKCJXRUlHSFQiKTsKICAgICAgdGhpcy5jb2xfa2V5LnB1c2goIldlaWdodCIpOwogICAgICB0aGlzLmNvbF9sZW5ndGggPSA5OwogICAgICB0aGlzLmlzb2sgPSB0cnVlOwogICAgfSwKICAgIGRvd25sb2FkX2NzdjogZnVuY3Rpb24gZG93bmxvYWRfY3N2KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICBjb21wYW55aWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBpc2Rvd25sb2FkOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyAhPSAiSW50ZXJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHJlc3BvbnNlLmRhdGEuZmlsZWRvd25sb2FkdXJsLCAiX2JsYW5rIik7CiAgICAgICAgICB9LCA1MDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJUcnkgVXBsb2FkaW5nIEZpbGUvUHJvZHVjdCIsICJFcnJvciBPY2N1cmVkIFdoaWxlIERvd25sb2FkaW5nIEZpbGUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaF9wcm9kdWN0OiBmdW5jdGlvbiBzZWFyY2hfcHJvZHVjdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyBpZih0aGlzLnNlYXJjaF9ieSE9JycpewogICAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSAhPSAiIikgewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoX2J5LAogICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHICE9ICJOTyBQUk9EVUNUUyBGT1VORCIpIHsKICAgICAgICAgICAgX3RoaXMzLmlzb2sgPSB0cnVlOwogICAgICAgICAgICBfdGhpczMuaXRlbV9saXN0ID0gW107CiAgICAgICAgICAgIF90aGlzMy5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAgICAgX3RoaXMzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBfdGhpczMuaXRlbV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5wcm9kdWN0c1tpXSk7CgogICAgICAgICAgICAgIF90aGlzMy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMy5pdGVtX2xpc3QpOwogICAgICAgICAgICBfdGhpczMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLlBhZ2VDb3VudDsKCiAgICAgICAgICAgIF90aGlzMy5zZXRwYWdpbmF0aW9uKF90aGlzMy5wYWdlX25vKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiTm8gTWF0Y2ggRm91bmQiKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgfSwgMjUwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJFbnRlciBwcm9wZXIgZGF0YSBmb3Igc2VhcmNoaW5nIik7CiAgICAgIH0gLy8gfWVsc2V7CiAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJTZWxlY3QgaGVhZGVyIGZvciBzZWFyY2hpbmciKTsKICAgICAgLy8gfQoKICAgIH0sCiAgICBjaGFuZ2VfaWQ6IGZ1bmN0aW9uIGNoYW5nZV9pZCgpIHsKICAgICAgdGhpcy5pc2VkaXRwcm9kdWN0aWQgPSB0cnVlOwogICAgfSwKICAgIHZpZXc6IGZ1bmN0aW9uIHZpZXcoaW5kZXgpIHsKICAgICAgdGhpcy52aWV3dXJsID0gdGhpcy5pdGVtX2xpc3RbaW5kZXhdWyJQcm9kdWN0SW1hZ2VVcmwiXTsKICAgIH0sCiAgICBpdGVtTGlzdDogZnVuY3Rpb24gaXRlbUxpc3QobWVzc2FnZSkgewogICAgICB0aGlzLmlzb2sgPSB0cnVlOwogICAgICB0aGlzLm51bWJlcl9vZl9yb3dzID0gbWVzc2FnZS5jc3ZmaWxlLmxlbmd0aDsKICAgICAgdGhpcy50b3RhbF9wYWdlcyA9IG1lc3NhZ2UuUGFnZUNvdW50OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmNzdmZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLml0ZW1fbGlzdC5wdXNoKG1lc3NhZ2UuY3N2ZmlsZVtpXSk7CiAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaChmYWxzZSk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5maWVsZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLm5ld19wcm9kdWN0W21lc3NhZ2UuZmllbGRzW2ldLnJlcGxhY2UoIiAiLCAiIikucmVwbGFjZSgiICIsICIiKV0gPSAiIjsKICAgICAgICB0aGlzLmNvbF9saXN0LnB1c2gobWVzc2FnZS5maWVsZHNbaV0pOwoKICAgICAgICBpZiAobWVzc2FnZS5maWVsZHNbaV0gIT0gIlByb2R1Y3QgVXJsIiAmJiBtZXNzYWdlLmZpZWxkc1tpXSAhPSAiUHJvZHVjdCBJbWFnZSBVcmwiKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdF9saXN0LnB1c2gobWVzc2FnZS5maWVsZHNbaV0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xfa2V5LnB1c2gobWVzc2FnZS5maWVsZHNbaV0ucmVwbGFjZSgiICIsICIiKS5yZXBsYWNlKCIgIiwgIiIpKTsKICAgICAgfQoKICAgICAgdGhpcy5jb2xfbGVuZ3RoID0gbWVzc2FnZS5maWVsZHMubGVuZ3RoOwogICAgICB0aGlzLnNldHBhZ2luYXRpb24odGhpcy5wYWdlX25vKTsKICAgIH0sCiAgICBkZWxldGVfcHJvZHVjdDogZnVuY3Rpb24gZGVsZXRlX3Byb2R1Y3QoaW5kZXgpIHsKICAgICAgdGhpcy5jaGVja19saXN0X2FycmF5KGluZGV4KTsKICAgICAgdGhpcy5kZWxldGVfbXVsdGlwbGVfcHJvZHVjdCgpOwogICAgfSwKICAgIGRlbGV0ZV9tdWx0aXBsZV9wcm9kdWN0OiBmdW5jdGlvbiBkZWxldGVfbXVsdGlwbGVfcHJvZHVjdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgbGVuID0gdGhpcy5jaGVja2VkX2xpc3QubGVuZ3RoOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGlmICh0aGlzLmNoZWNrZWRfbGlzdFtpXSkgewogICAgICAgICAgdGhpcy5kZWxldGVfbGlzdC5wdXNoKHsKICAgICAgICAgICAgaWQ6IHRoaXMuaXRlbV9saXN0W2ldLkRvY3VtZW50SWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJObyBwcm9kdWN0IHNlbGVjdGVkISIsCiAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZGVsZXRlX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlpZDogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBjb21wYW55bmFtZTogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICBlbWFpbDogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBkb2NpZHM6IF90aGlzNC5kZWxldGVfbGlzdCwKICAgICAgICAgICAgICBpc2RlbGV0ZTogdHJ1ZQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChfdGhpczQuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIlByb2R1Y3RzIERlbGV0ZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJEZWxldGVkISIsCiAgICAgICAgICAgICAgICAgIHRleHQ6ICJZb3VyIHByb2R1Y3RzIGhhdmUgYmVlbiBkZWxldGVkLiIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSB7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogIkVycm9yISEiLAogICAgICAgICAgICAgICAgICB0ZXh0OiAiRXJyb3Igb2NjdXJlZCB3aGlsZSBkZWxldGluZyBmaWxlIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRGaWxlOiBmdW5jdGlvbiBnZXRGaWxlKGUpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgdGhpcy5jc3ZmaWxlbmFtZSA9IGZpbGUubmFtZTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczUuY3N2ZmlsZSA9IHJlYWRlci5yZXN1bHQ7CiAgICAgIH07CgogICAgICB0aGlzLmVkaXRjc3ZmaWxlID0gdHJ1ZTsKICAgIH0sCiAgICBjaGVja19saXN0X2FycmF5OiBmdW5jdGlvbiBjaGVja19saXN0X2FycmF5KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA9PSAiYWxsIikgewogICAgICAgIHZhciByb2xlX2xlbmd0aCA9IHRoaXMubnVtYmVyX29mX3Jvd3M7CiAgICAgICAgdmFyIGNoZWNrZWRib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W3R5cGU9Y2hlY2tib3hdIik7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9sZV9sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3RbaV0gPSAhdGhpcy5jaGVja2VkX2xpc3RbaV07CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDw9IHJvbGVfbGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICBpZiAoY2hlY2tlZGJveGVzW19pXS5jaGVja2VkID09IHRydWUpIHsKICAgICAgICAgICAgY2hlY2tlZGJveGVzW19pXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGVja2VkYm94ZXNbX2ldLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdFtpbmRleF0gPSAhdGhpcy5jaGVja2VkX2xpc3RbaW5kZXhdOwogICAgICB9IC8vIGNvbnNvbGUubG9nKHJvbGVfbGVuZ3RoLGNoZWNrZWRib3hlcyx0aGlzLmNoZWNrZWRfbGlzdCk7CgogICAgfSwKICAgIGVkaXRfaXRlbTogZnVuY3Rpb24gZWRpdF9pdGVtKGluZGV4KSB7CiAgICAgIHRoaXMubmV3X3Byb2R1Y3QgPSB7fTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xfbGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV0gPSB0aGlzLml0ZW1fbGlzdFtpbmRleF1bdGhpcy5jb2xfa2V5W2ldXTsKICAgICAgfQoKICAgICAgdGhpcy5kb2NfaWQgPSB0aGlzLml0ZW1fbGlzdFtpbmRleF0uRG9jdW1lbnRJZDsKICAgICAgdGhpcy5hZGRfZWRpdCA9IGZhbHNlOwogICAgfSwKICAgIGFkZF9jc3ZmaWxlOiBmdW5jdGlvbiBhZGRfY3N2ZmlsZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgaWYgKHRoaXMuY3N2ZmlsZW5hbWUgPT0gIiIpIHsKICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBzZWxlY3QgY3N2IGZpbGUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy51cGxvYWRfcHJvZHVjdF9jc3YoKSwgewogICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGNzdmZpbGVuYW1lOiB0aGlzLmNzdmZpbGVuYW1lLAogICAgICAgICAgY3N2ZmlsZWRhdGE6IHRoaXMuY3N2ZmlsZS5zcGxpdCgiYmFzZTY0LCIpWzFdLAogICAgICAgICAgaXN1cGxvYWQ6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJGaWxlIFVwbG9hZGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIllvdXIgZmlsZSBoYXMgYmVlbiB1cGxvYWRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXM2LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTWlzc2luZ19WYWx1ZXMpIHsKICAgICAgICAgICAgdmFyIG1zZyA9ICIiOwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLk1pc3NpbmdfVmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbXNnID0gbXNnLmNvbmNhdChyZXNwb25zZS5kYXRhLk1pc3NpbmdfVmFsdWVzW2ldLCAiPGJyPiIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0b2FzdHIuZXJyb3IoIk1pc3NpbmcgVmFsdWVzIEluIEFib3ZlIENvbHVtbnMiLCBtc2cpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJFcnJvciBvY2N1cmVkIHdoaWxlIHVwbG9hZGluZyBmaWxlIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRfaXRlbTogZnVuY3Rpb24gYWRkX2l0ZW0oKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgIGlmICh0aGlzLmFkZF9lZGl0KSB7CiAgICAgICAgdmFyIGlzZmlsbGVkID0gdHJ1ZTsKICAgICAgICB2YXIgaTsKCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY29sX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dID09ICIiIHx8IHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9PSBudWxsKSB7CiAgICAgICAgICAgIGlzZmlsbGVkID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNmaWxsZWQpIHsKICAgICAgICAgIHZhciB4OwoKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbF9sZW5ndGg7IGkrKykgewogICAgICAgICAgICB4ID0gdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbaV1dOwoKICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcih4KSkpIHt9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubmV3X3Byb2R1Y3RbdGhpcy5jb2xfa2V5W2ldXSA9IE51bWJlcih0aGlzLm5ld19wcm9kdWN0W3RoaXMuY29sX2tleVtpXV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBwcm9kdWN0ZGV0YWlsczogdGhpcy5uZXdfcHJvZHVjdCwKICAgICAgICAgICAgaXNhZGRwcm9kdWN0OiB0cnVlCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIlByb2R1Y3QgQWRkZWQgU3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCJUaGUgcHJvZHVjdCBoYXMgYmVlbiBhZGRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzNy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJFcnJvciBvY2N1cmVkIHdoaWxlIGFkZGluZyBwcm9kdWN0Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIlBsZWFzZSBGaWxsIEFsbCBGaWVsZHMiKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRydWUpIHsKICAgICAgICAgIHZhciBfeDsKCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLmNvbF9sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICAgIF94ID0gdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbX2kyXV07IC8vIGNvbnNvbGUubG9nKHgpOwoKICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihfeCkpIHx8IF94ID09IHRydWUgfHwgX3ggPT0gZmFsc2UgfHwgX3ggPT0gIiIgfHwgX3ggPT0gbnVsbCkge30gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbX2kyXV0gPSBOdW1iZXIodGhpcy5uZXdfcHJvZHVjdFt0aGlzLmNvbF9rZXlbX2kyXV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBwcm9kdWN0ZGV0YWlsczogdGhpcy5uZXdfcHJvZHVjdCwKICAgICAgICAgICAgZG9jaWQ6IHRoaXMuZG9jX2lkLAogICAgICAgICAgICBpc2VkaXRwcm9kdWN0aWQ6IHRoaXMuaXNlZGl0cHJvZHVjdGlkLAogICAgICAgICAgICBpc2VkaXQ6IHRydWUKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiQ2hhbmdlcyBBcHBsaWVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiVGhlIHByb2R1Y3QgaGFzIGJlZW4gZWRpdGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXM3LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIkVycm9yIG9jY3VyZWQgd2hpbGUgZWRpdGluZyBwcm9kdWN0Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsZWFyX2ZpZWxkczogZnVuY3Rpb24gY2xlYXJfZmllbGRzKCkgewogICAgICB0aGlzLm5ld19wcm9kdWN0ID0ge307CiAgICAgIHRoaXMuZWRpdHByb2R1Y3RpZCA9IGZhbHNlOwogICAgfSwKICAgIHBhZ2luYXRpb25fY2xhc3M6IGZ1bmN0aW9uIHBhZ2luYXRpb25fY2xhc3MoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICAgIHJldHVybiAiIGFjdGl2ZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogICAgY2FsbHNlYXJjaDogZnVuY3Rpb24gY2FsbHNlYXJjaCgpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgdGhpcy5zZWFyY2hfcHJvZHVjdCgpOwogICAgICB9CiAgICB9LAogICAgc2V0cGFnaW5hdGlvbjogZnVuY3Rpb24gc2V0cGFnaW5hdGlvbihwYWdlX25vKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheSA9IFtdOwoKICAgICAgaWYgKHRoaXMudG90YWxfcGFnZXMgPD0gNykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gMSkgewogICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IDQ7IF9pMysrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTMgKyAxKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKHRoaXMudG90YWxfcGFnZXMpOwogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gdGhpcy50b3RhbF9wYWdlcykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwoKICAgICAgICBmb3IgKHZhciBfaTQgPSB0aGlzLnRvdGFsX3BhZ2VzIC0gNDsgX2k0IDwgdGhpcy50b3RhbF9wYWdlczsgX2k0KyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNCArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vIDw9IDQpIHsKICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBwYWdlX25vICsgMzsgX2k1KyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNSArIDEpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA+PSB0aGlzLnRvdGFsX3BhZ2VzIC0gNCkgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwoKICAgICAgICBmb3IgKHZhciBfaTYgPSBwYWdlX25vIC0gMzsgX2k2IDwgdGhpcy50b3RhbF9wYWdlczsgX2k2KyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNiArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKCiAgICAgICAgZm9yICh2YXIgX2k3ID0gcGFnZV9ubyAtIDM7IF9pNyA8PSBwYWdlX25vICsgMzsgX2k3KyspIHsKICAgICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfSwKICAgIHBhZ2VfcmVxdWlyZTogZnVuY3Rpb24gcGFnZV9yZXF1aXJlKHBhZ2UpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHt9IGVsc2UgewogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwoKICAgICAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSAhPSAiIikgewogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc3NlYXJjaDogdHJ1ZSwKICAgICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoX2J5LAogICAgICAgICAgICBrZXk6IHRoaXMuc2VhcmNoX25hbWUsCiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgIHBhZ2VubzogdGhpcy5wYWdlX25vCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczguaXRlbV9saXN0ID0gW107CiAgICAgICAgICAgIF90aGlzOC5pc29rID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXM4LmNvbF9saXN0ID0gW107CiAgICAgICAgICAgIF90aGlzOC5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAgICAgX3RoaXM4LmNvbF9rZXkgPSBbXTsKICAgICAgICAgICAgX3RoaXM4LmNvbF9sZW5ndGggPSAwOwogICAgICAgICAgICBfdGhpczgubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RzLmxlbmd0aDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5wcm9kdWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIF90aGlzOC5pdGVtX2xpc3QucHVzaChyZXNwb25zZS5kYXRhLnByb2R1Y3RzW2ldKTsKCiAgICAgICAgICAgICAgX3RoaXM4LmNoZWNrZWRfbGlzdC5wdXNoKGZhbHNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXM4LnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5QYWdlQ291bnQ7CgogICAgICAgICAgICBfdGhpczguc2V0cGFnaW5hdGlvbihfdGhpczgucGFnZV9ubyk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMudXBsb2FkX3Byb2R1Y3RfY3N2KCksIHsKICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICBpc2dldGNzdjogdHJ1ZSwKICAgICAgICAgICAgcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAgIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiTm8gUHJvZHVjdHMgQWRkZWQgWWV0IiB8fCByZXNwb25zZS5kYXRhID09ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiIHx8IHJlc3BvbnNlLmRhdGEuY3N2ZmlsZS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgIF90aGlzOC5mb3JkZWZhdWx0KCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5jc3ZmaWxlLmxlbmd0aCkgewogICAgICAgICAgICAgIF90aGlzOC5pdGVtX2xpc3QgPSBbXTsKICAgICAgICAgICAgICBfdGhpczguY29sX2xpc3QgPSBbXTsKICAgICAgICAgICAgICBfdGhpczguY29sX2tleSA9IFtdOwogICAgICAgICAgICAgIF90aGlzOC5jb2xfbGVuZ3RoID0gMDsKCiAgICAgICAgICAgICAgX3RoaXM4Lml0ZW1MaXN0KHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}