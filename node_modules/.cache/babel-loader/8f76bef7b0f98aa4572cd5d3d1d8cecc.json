{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js!/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/analytics/AnalyticsConfigV2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/analytics/AnalyticsConfigV2.vue","mtime":1643027096184},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvdmltYWxlc2gvTGVhcm5pbmcvZGV2b3BzX3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvaG9tZS92aW1hbGVzaC9MZWFybmluZy9kZXZvcHNfdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHN3YWwgZnJvbSAnc3dlZXRhbGVydDInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFuYWx5dGljc0NvbmZpZ1YyIiwKICBjb21wb25lbnRzOiB7CiAgICBNdWx0aXNlbGVjdDogTXVsdGlzZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzcGlubmVyT246IGZhbHNlLAogICAgICBjb2x1bW5zOiBbXSwKICAgICAgbWV0cmljczogW10sCiAgICAgIGZpbGVfbGFiZWw6ICJDaG9vc2UgZmlsZSIsCiAgICAgIGlzX2ZpbGVfdXBsb2FkZWQ6IGZhbHNlLAogICAgICBuZXdjb2x1bW5zOiBbXSwKICAgICAgaXNjb2x1bW5zbmFtZWNoYW5nZWQ6IGZhbHNlLAogICAgICBvYmplY3RfbmFtZTogIiIsCiAgICAgIG1ldHJpY3NkYXRhOiBbXSwKICAgICAgaXNtZXRyaWNzc2F2ZWQ6IGZhbHNlLAogICAgICBkYXRhc2V0X25hbWU6ICIiLAogICAgICBmaWxlOiBudWxsLAogICAgICBuZXdjb2x1bW5zY29tcGxldGU6IFtdLAogICAgICBjb2x1bW5fZGV0YWlsczoge30sCiAgICAgIGlzX2RhdGFzZXRfZWRpdGFibGU6IGZhbHNlLAogICAgICBkYXRhc2V0czogW10sCiAgICAgIHNob3dfZGF0YXNldF9zZXR0aW5nczogZmFsc2UsCiAgICAgIC8vIGNvdW50cnlfY29kZXM6WyJBRk4iLCJFVVIiLCJBTEwiLCJEWkQiLCJVU0QiLCJFVVIiLCJBT0EiLCJYQ0QiLCJYQ0QiLCJBUlMiLCJBTUQiLCJBV0ciLCJBVUQiLCJFVVIiLCJBWk4iLCJCU0QiLCJCSEQiLCJCRFQiLCJCQkQiLCJCWU4iLCJFVVIiLCJCWkQiLCJYT0YiLCJCTUQiLCJJTlIiLCJCVE4iLCJCT0IiLCJCT1YiLCJVU0QiLCJCQU0iLCJCV1AiLCJOT0siLCJCUkwiLCJVU0QiLCJCTkQiLCJCR04iLCJYT0YiLCJCSUYiLCJDVkUiLCJLSFIiLCJYQUYiLCJDQUQiLCJLWUQiLCJYQUYiLCJYQUYiLCJDTFAiLCJDTEYiLCJDTlkiLCJBVUQiLCJBVUQiLCJDT1AiLCJDT1UiLCJLTUYiLCJDREYiLCJYQUYiLCJOWkQiLCJDUkMiLCJYT0YiLCJIUksiLCJDVVAiLCJDVUMiLCJBTkciLCJFVVIiLCJDWksiLCJES0siLCJESkYiLCJYQ0QiLCJET1AiLCJVU0QiLCJFR1AiLCJTVkMiLCJVU0QiLCJYQUYiLCJFUk4iLCJFVVIiLCJFVEIiLCJFVVIiLCJGS1AiLCJES0siLCJGSkQiLCJFVVIiLCJFVVIiLCJFVVIiLCJYUEYiLCJFVVIiLCJYQUYiLCJHTUQiLCJHRUwiLCJFVVIiLCJHSFMiLCJHSVAiLCJFVVIiLCJES0siLCJYQ0QiLCJFVVIiLCJVU0QiLCJHVFEiLCJHQlAiLCJHTkYiLCJYT0YiLCJHWUQiLCJIVEciLCJVU0QiLCJBVUQiLCJFVVIiLCJITkwiLCJIS0QiLCJIVUYiLCJJU0siLCJJTlIiLCJJRFIiLCJYRFIiLCJJUlIiLCJJUUQiLCJFVVIiLCJHQlAiLCJJTFMiLCJFVVIiLCJKTUQiLCJKUFkiLCJHQlAiLCJKT0QiLCJLWlQiLCJLRVMiLCJBVUQiLCJLUFciLCJLUlciLCJLV0QiLCJLR1MiLCJMQUsiLCJFVVIiLCJMQlAiLCJMU0wiLCJaQVIiLCJMUkQiLCJMWUQiLCJDSEYiLCJFVVIiLCJFVVIiLCJNT1AiLCJNS0QiLCJNR0EiLCJNV0siLCJNWVIiLCJNVlIiLCJYT0YiLCJFVVIiLCJVU0QiLCJFVVIiLCJNUk8iLCJNVVIiLCJFVVIiLCJYVUEiLCJNWE4iLCJNWFYiLCJVU0QiLCJNREwiLCJFVVIiLCJNTlQiLCJFVVIiLCJYQ0QiLCJNQUQiLCJNWk4iLCJNTUsiLCJOQUQiLCJaQVIiLCJBVUQiLCJOUFIiLCJFVVIiLCJYUEYiLCJOWkQiLCJOSU8iLCJYT0YiLCJOR04iLCJOWkQiLCJBVUQiLCJVU0QiLCJOT0siLCJPTVIiLCJQS1IiLCJVU0QiLCIiLCJQQUIiLCJVU0QiLCJQR0siLCJQWUciLCJQRU4iLCJQSFAiLCJOWkQiLCJQTE4iLCJFVVIiLCJVU0QiLCJRQVIiLCJFVVIiLCJST04iLCJSVUIiLCJSV0YiLCJFVVIiLCJTSFAiLCJYQ0QiLCJYQ0QiLCJFVVIiLCJFVVIiLCJYQ0QiLCJXU1QiLCJFVVIiLCJTVEQiLCJTQVIiLCJYT0YiLCJSU0QiLCJTQ1IiLCJTTEwiLCJTR0QiLCJBTkciLCJYU1UiLCJFVVIiLCJFVVIiLCJTQkQiLCJTT1MiLCJaQVIiLCIiLCJTU1AiLCJFVVIiLCJMS1IiLCJTREciLCJTUkQiLCJOT0siLCJTWkwiLCJTRUsiLCJDSEYiLCJDSEUiLCJDSFciLCJTWVAiLCJUV0QiLCJUSlMiLCJUWlMiLCJUSEIiLCJVU0QiLCJYT0YiLCJOWkQiLCJUT1AiLCJUVEQiLCJUTkQiLCJUUlkiLCJUTVQiLCJVU0QiLCJBVUQiLCJVR1giLCJVQUgiLCJBRUQiLCJHQlAiLCJVU0QiLCJVU0QiLCJVU04iLCJVWVUiLCJVWUkiLCJVWlMiLCJWVVYiLCJWRUYiLCJWTkQiLCJVU0QiLCJVU0QiLCJYUEYiLCJNQUQiLCJZRVIiLCJaTVciLCJaV0wiLCJYQkEiLCJYQkIiLCJYQkMiLCJYQkQiLCJYVFMiLCJYWFgiLCJYQVUiLCJYUEQiLCJYUFQiLCJYQUciLCJBRkEiLCJGSU0iLCJBTEsiLCJBRFAiLCJFU1AiLCJGUkYiLCJBT0siLCJBT04iLCJBT1IiLCJBUkEiLCJBUlAiLCJBUlkiLCJSVVIiLCJBVFMiLCJBWU0iLCJBWk0iLCJSVVIiLCJCWVIiLCJCWUIiLCJSVVIiLCJCRUMiLCJCRUYiLCJCRUwiLCJCT1AiLCJCQUQiLCJCUkIiLCJCUkMiLCJCUkUiLCJCUk4iLCJCUlIiLCJCR0oiLCJCR0siLCJCR0wiLCJCVUsiLCJDTlgiLCJIUkQiLCJIUksiLCJDWVAiLCJDU0oiLCJDU0siLCJFQ1MiLCJFQ1YiLCJHUUUiLCJFRUsiLCJYRVUiLCJGSU0iLCJGUkYiLCJGUkYiLCJGUkYiLCJHRUsiLCJSVVIiLCJERE0iLCJERU0iLCJHSEMiLCJHSFAiLCJHUkQiLCJGUkYiLCJHTkUiLCJHTlMiLCJHV0UiLCJHV1AiLCJJVEwiLCJJU0oiLCJJRVAiLCJJTFAiLCJJTFIiLCJJVEwiLCJSVVIiLCJSVVIiLCJMQUoiLCJMVkwiLCJMVlIiLCJMU00iLCJaQUwiLCJMVEwiLCJMVFQiLCJMVUMiLCJMVUYiLCJMVUwiLCJNR0YiLCJNV0siLCJNVlEiLCJNTEYiLCJNVEwiLCJNVFAiLCJGUkYiLCJGUkYiLCJNWFAiLCJSVVIiLCJGUkYiLCJNWkUiLCJNWk0iLCJOTEciLCJBTkciLCJOSUMiLCJQRU4iLCJQRUgiLCJQRUkiLCJQRVMiLCJQTFoiLCJQVEUiLCJGUkYiLCJST0siLCJST04iLCJST0wiLCJSVVIiLCJGUkYiLCJGUkYiLCJGUkYiLCJJVEwiLCJDU0QiLCJFVVIiLCJTS0siLCJTSVQiLCJaQUwiLCJTREciLCJSSEQiLCJFU0EiLCJFU0IiLCJFU1AiLCJTREQiLCJTRFAiLCJTUkciLCJDSEMiLCJSVVIiLCJUSlIiLCJJRFIiLCJUUEUiLCJUUkwiLCJUUlkiLCJSVVIiLCJUTU0iLCJVR1MiLCJVR1ciLCJVQUsiLCJTVVIiLCJVU1MiLCJVWU4iLCJVWVAiLCJSVVIiLCJWRUIiLCJWRUYiLCJWRUYiLCJWTkMiLCJZREQiLCJZVUQiLCJZVU0iLCJZVU4iLCJaUk4iLCJaUloiLCJaTUsiLCJaV0MiLCJaV0QiLCJaV0QiLCJaV04iLCJaV1IiLCJYRk8iLCJYUkUiLCJYRlUiXSwgCiAgICAgIGNvdW50cnlfaXNvX2NvZGU6IG51bGwsCiAgICAgIGN1cnJlbmN5X2Zvcm1hdF9tb2RhbDogJycsCiAgICAgIGlzX2NvdW50cnlfY29kZXNfZHJvcGRvd25fZGlzYWJsZWQ6IHRydWUsCiAgICAgIGN1cnJlbnRfY29sdW1uX2luZGV4OiBudWxsLAogICAgICBhZ2dyZWdhdGlvbl9vcHRpb25zOiBbbnVsbCwgIlNVTSIsICJBVkciXSwKICAgICAgc2FtcGxlOiAiIiwKICAgICAgY291bnRyeV9jb2RlczogWyJBTEwiLCAiQUZOIiwgIkFSUyIsICJBV0ciLCAiQVVEIiwgIkFaTiIsICJCU0QiLCAiQkJEIiwgIkJZUiIsICJCWkQiLCAiQk1EIiwgIkJPQiIsICJCQU0iLCAiQldQIiwgIkJHTiIsICJCUkwiLCAiQk5EIiwgIktIUiIsICJDQUQiLCAiS1lEIiwgIkNMUCIsICJDTlkiLCAiQ09QIiwgIkNSQyIsICJIUksiLCAiQ1VQIiwgIkNaSyIsICJES0siLCAiRE9QIiwgIkVHUCIsICJTVkMiLCAiRUVLIiwgIkVVUiIsICJGS1AiLCAiRkpEIiwgIkdFTCIsICJHSEMiLCAiR0lQIiwgIkdUUSIsICJHR1AiLCAiR1lEIiwgIkhOTCIsICJIS0QiLCAiSFVGIiwgIklTSyIsICJJTlIiLCAiSURSIiwgIklSUiIsICJJTVAiLCAiSUxTIiwgIkpNRCIsICJKUFkiLCAiSkVQIiwgIktaVCIsICJLUFciLCAiS1JXIiwgIktHUyIsICJMQUsiLCAiTFZMIiwgIkxCUCIsICJMUkQiLCAiTFRMIiwgIk1LRCIsICJNWVIiLCAiTVVSIiwgIk1YTiIsICJNTlQiLCAiTVpOIiwgIk5BRCIsICJOUFIiLCAiQU5HIiwgIk5aRCIsICJOSU8iLCAiTkdOIiwgIk5PSyIsICJPTVIiLCAiUEtSIiwgIlBBQiIsICJQWUciLCAiUEVOIiwgIlBIUCIsICJQTE4iLCAiUUFSIiwgIlJPTiIsICJSVUIiLCAiU0hQIiwgIlNBUiIsICJSU0QiLCAiU0NSIiwgIlNHRCIsICJTQkQiLCAiU09TIiwgIlpBUiIsICJMS1IiLCAiU0VLIiwgIkNIRiIsICJTUkQiLCAiU1lQIiwgIlRXRCIsICJUSEIiLCAiVFREIiwgIlRSTCIsICJUVkQiLCAiVUFIIiwgIkdCUCIsICJVU0QiLCAiVVlVIiwgIlVaUyIsICJWRUYiLCAiVk5EIiwgIllFUiIsICJaV0QiXSwKICAgICAgbWV0cmljX29wZXJhdGlvbl9vcHRpb25zOiBbJ1NVTScsICdBVkcnLCAnQ09VTlQnLCAnTlVOSVFVRSddLAogICAgICBvbGRfd29ya3NoZWV0X2RldGFpbHM6IHt9LAogICAgICBwb3N0Z3Jlc19pY29uX3BhdGg6IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvcG9zdGdyZXNfaWNvbi5wbmcnKSwKICAgICAgLy8gbXlzcWxfaWNvbl9wYXRoOiByZXF1aXJlKCdAL3BvcnRhbC9hc3NldHMvaW1nL215c3FsX2ljb24ucG5nJyksCiAgICAgIG15c3FsX2ljb25fcGF0aDogcmVxdWlyZSgnQC9wb3J0YWwvYXNzZXRzL2ltZy9sb2dvLW15c3FsLnBuZycpLAogICAgICBzaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3M6IGZhbHNlLAogICAgICBkYXRhYmFzZV9kYXRhc2V0X2lkOiBudWxsLAogICAgICBkYXRhYmFzZV9kYXRhc2V0X25hbWU6IG51bGwsCiAgICAgIGRhdGFiYXNlX3NjaGVtYV9uYW1lOiBudWxsLAogICAgICBkYXRhYmFzZV9qZGJjX2Nvbm5lY3Rpb25fc3RyaW5nOiBudWxsLAogICAgICBkYXRhYmFzZV9ob3N0OiBudWxsLAogICAgICBkYXRhYmFzZV9wb3J0OiBudWxsLAogICAgICBkYXRhYmFzZV91c2VybmFtZTogbnVsbCwKICAgICAgZGF0YWJhc2VfcGFzc3dvcmQ6IG51bGwsCiAgICAgIGRhdGFiYXNlX2RiX25hbWU6IG51bGwsCiAgICAgIHNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzOiBmYWxzZSwKICAgICAgY3VycmVudF9kYXRhc2V0X2RhdGFiYXNlX2ljb246IG51bGwsCiAgICAgIGlzU2hvd2luZ190ZXN0OiBmYWxzZSwKICAgICAgc2hvd19kYXRhYmFzZV9vcHRpb25zOiB0cnVlLAogICAgICBkYXRhYmFzZV9kYXRhc2V0X2Nvbm5lY3Rpb25fdHlwZTogJ0pEQkMnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOyAvLyB0aGlzLnBvc3RncmVzX2ljb25fcGF0aCA9IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvcG9zdGdyZXNfaWNvbi5wbmcnKQogIH0sCiAgbWV0aG9kczogewogICAgb3Blbl9zZXR0aW5nc19mb3JfZGF0YXNldDogZnVuY3Rpb24gb3Blbl9zZXR0aW5nc19mb3JfZGF0YXNldChpbmRleCkgewogICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCk7CiAgICAgIGlmIChpbmRleCA9PT0gbnVsbCkgewogICAgICAgIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGFzZXRzW2luZGV4XSkKICAgICAgICB0aGlzLm9sZF93b3Jrc2hlZXRfZGV0YWlscyA9IHRoaXMuZGF0YXNldHNbaW5kZXhdLm9sZF93b3Jrc2hlZXRfZGV0YWlsczsKICAgICAgICB0aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUgPSB0cnVlOwogICAgICAgIHRoaXMuZmlsZV9sYWJlbCA9IHRoaXMuZGF0YXNldHNbaW5kZXhdLmZpbGVfbmFtZTsKICAgICAgICAkKCIjaW5wdXRHcm91cEZpbGUwMSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgJCgiI2RhdGFzZXRfbmFtZSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgdGhpcy5kYXRhc2V0X25hbWUgPSB0aGlzLmRhdGFzZXRzW2luZGV4XS5kYXRhX25hbWU7CiAgICAgICAgJCgiI3VwbG9hZF9maWxlIikuaGlkZSgpOyAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLmRhdGFfc291cmNlc1swXS53b3Jrc2hlZXRfZGV0YWlscy5jb2x1bW5fZGV0YWlscyk7CgogICAgICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5kYXRhc2V0c1tpbmRleF0ud29ya3NoZWV0X2RldGFpbHMuY29sdW1uX3JlbmFtZV9tYXApOyBfaSA8IF9PYmplY3QkZW50cmllcy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXNbX2ldLCAyKSwKICAgICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgICAgICAgdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMkX2lbMV07CgogICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goewogICAgICAgICAgICBuYW1lOiBrZXksCiAgICAgICAgICAgIG5ld25hbWU6IHZhbHVlCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IHRydWU7CiAgICAgICAgdmFyIG1ldHJpY3NfbGVuID0gdGhpcy5kYXRhc2V0c1tpbmRleF0ud29ya3NoZWV0X2RldGFpbHMubWV0cmljcy5sZW5ndGg7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0cmljc19sZW47IGkrKykgewogICAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goewogICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzW2ldLm5hbWUsCiAgICAgICAgICAgIGNvbHVtbjogdGhpcy5kYXRhc2V0c1tpbmRleF0ud29ya3NoZWV0X2RldGFpbHMubWV0cmljc1tpXS5jb2x1bW4sCiAgICAgICAgICAgIG9wZXJhdGlvbjogdGhpcy5kYXRhc2V0c1tpbmRleF0ud29ya3NoZWV0X2RldGFpbHMubWV0cmljc1tpXS5vcGVyYXRpb24KICAgICAgICAgIH0pOwogICAgICAgIH0gLy8gZGVidWdnZXI7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZXRyaWNzKTsKCgogICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHRoaXMubWV0cmljcy5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICB0aGlzLm1ldHJpY3NkYXRhLnB1c2goewogICAgICAgICAgICBuYW1lOiB0aGlzLm1ldHJpY3NbX2kyXS5uYW1lLAogICAgICAgICAgICBjb2x1bW46IHRoaXMubWV0cmljc1tfaTJdLmNvbHVtbiwKICAgICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLm1ldHJpY3NbX2kyXS5vcGVyYXRpb24gLy8gb246IFt0aGlzLm1ldHJpY3NbaV0uY29sdW1uMSwgdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjJdCgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgb2JqZWN0ID0gdGhpcy5jb2x1bW5zLnJlZHVjZShmdW5jdGlvbiAob2JqLCBpdGVtKSB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIF9kZWZpbmVQcm9wZXJ0eSh7fSwgaXRlbS5uYW1lLCBpdGVtLm5ld25hbWUpKTsKICAgICAgICB9LCB7fSk7CgogICAgICAgIGZvciAodmFyIF9pMyA9IDAsIF9PYmplY3QkZW50cmllczIgPSBPYmplY3QuZW50cmllcyh0aGlzLmRhdGFzZXRzW2luZGV4XS53b3Jrc2hlZXRfZGV0YWlscy5jb2x1bW5fZGV0YWlscyk7IF9pMyA8IF9PYmplY3QkZW50cmllczIubGVuZ3RoOyBfaTMrKykgewogICAgICAgICAgdmFyIF9PYmplY3QkZW50cmllczIkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXMyW19pM10sIDIpLAogICAgICAgICAgICAgIF9rZXkgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzBdLAogICAgICAgICAgICAgIF92YWx1ZSA9IF9PYmplY3QkZW50cmllczIkX2lbMV07CgogICAgICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgX2k0KyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uc1tfaTRdLm5ld25hbWUgPT09IF9rZXkpIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZS5jdXJyZW5jeV9mb3JtYXQpOwogICAgICAgICAgICAgIHRoaXMuY29sdW1uc1tfaTRdLmRhdGFfdHlwZSA9IF92YWx1ZS5kYXRhdHlwZTsKICAgICAgICAgICAgICB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZS5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY29sdW1uc1tfaTRdLm5hbWUsCiAgICAgICAgICAgICAgICBuZXduYW1lOiB0aGlzLmNvbHVtbnNbX2k0XS5uZXduYW1lLAogICAgICAgICAgICAgICAgZGF0YV90eXBlOiBfdmFsdWUuZGF0YXR5cGUsCiAgICAgICAgICAgICAgICBjb2x1bW5fdHlwZTogX3ZhbHVlLmNvbHVtbl90eXBlLAogICAgICAgICAgICAgICAgYWRkaXRpdmU6IF92YWx1ZS5hZGRpdGl2ZSwKICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uOiBfdmFsdWUuYWdncmVnYXRpb24gPT09IG51bGwgPyBfdmFsdWUuYWdncmVnYXRpb24gPSAiTm9uZSIgOiBfdmFsdWUuYWdncmVnYXRpb24gPSBfdmFsdWUuYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgICBoaWRkZW46IF92YWx1ZS5oaWRkZW4sCiAgICAgICAgICAgICAgICBubHBfc2VhcmNoX2VuYWJsZWQ6IF92YWx1ZS5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgICBzeW5vbnltczogX3ZhbHVlLnN5bm9ueW1zID8gdW5kZWZpbmVkIDogIiIsCiAgICAgICAgICAgICAgICBpbmRleF90eXBlOiBfdmFsdWUuaW5kZXhfdHlwZSwKICAgICAgICAgICAgICAgIGVudGl0eV9jYXRlZ29yeTogX3ZhbHVlLmVudGl0eV9jYXRlZ29yeSwKICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Zvcm1hdDogX3ZhbHVlLmN1cnJlbmN5X2Zvcm1hdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF92YWx1ZS5jdXJyZW5jeV9mb3JtYXQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSAvLyBicmVhazsKCiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjb25zb2xlLmxvZyh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZSk7CiAgICAgICAgLy8gY29uc29sZS5sb2cKCgogICAgICAgIHZhciBhcnJheSA9IHt9OwogICAgICAgIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHt9OwoKICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZS5sZW5ndGg7IF9pNSsrKSB7CiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW19pNV07IC8vIGNvbnNvbGUubG9nKHRlbXAuY3VycmVuY3lfZm9ybWF0KQogICAgICAgICAgLy8gdGVtcC5zeW5vbnltcyA9IHRlbXAuc3lub255bXMucmVwbGFjZSgvLC9nLCAnPj4nKTsKCiAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsc1t0ZW1wLm5ld25hbWVdID0gewogICAgICAgICAgICAiZGF0YXR5cGUiOiAiIi5jb25jYXQodGVtcC5kYXRhX3R5cGUpLAogICAgICAgICAgICAiY29sdW1uX3R5cGUiOiAiIi5jb25jYXQodGVtcC5jb2x1bW5fdHlwZSksCiAgICAgICAgICAgICJhZGRpdGl2ZSI6IHRlbXAuYWRkaXRpdmUsCiAgICAgICAgICAgICJhZ2dyZWdhdGlvbiI6IHRlbXAuYWdncmVnYXRpb24sCiAgICAgICAgICAgICJoaWRkZW4iOiB0ZW1wLmhpZGRlbiwKICAgICAgICAgICAgIm5scF9zZWFyY2hfZW5hYmxlZCI6IHRlbXAubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAiaW5kZXhfdHlwZSI6ICIiLmNvbmNhdCh0ZW1wLmluZGV4X3R5cGUpLAogICAgICAgICAgICAic3lub255bXMiOiAiIi5jb25jYXQodGVtcC5zeW5vbnltcyksCiAgICAgICAgICAgICJlbnRpdHlfY2F0ZWdvcnkiOiAiIi5jb25jYXQodGVtcC5lbnRpdHlfY2F0ZWdvcnkpLAogICAgICAgICAgICAiY3VycmVuY3lfZm9ybWF0IjogdGVtcC5jdXJyZW5jeV9mb3JtYXQKICAgICAgICAgIH07IC8vIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLz4+IC9nLCAnLCcpOwogICAgICAgIH0gLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwoKCiAgICAgICAgdGhpcy5jb2x1bW5fZGV0YWlscyA9IE9iamVjdC5hc3NpZ24od29ya3NoZWV0X2RldGFpbHMpOyAvLyBjb25zb2xlLmxvZyh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZSx0aGlzLmNvbHVtbl9kZXRhaWxzKTsKCiAgICAgICAgdGhpcy5uZXdjb2x1bW5zID0gb2JqZWN0OwogICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSB0cnVlOwogICAgICAgIHRoaXMuaXNtZXRyaWNzc2F2ZWQgPSB0cnVlOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSB0cnVlOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgJCgiI2lucHV0R3JvdXBGaWxlMDEiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgJCgiI2RhdGFzZXRfbmFtZSIpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlVVVJRDogZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKCkgewogICAgICAvLyBQdWJsaWMgRG9tYWluL01JVAogICAgICB2YXIgZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvL1RpbWVzdGFtcAoKICAgICAgdmFyIGQyID0gcGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2Uubm93ICYmIHBlcmZvcm1hbmNlLm5vdygpICogMTAwMCB8fCAwOyAvL1RpbWUgaW4gbWljcm9zZWNvbmRzIHNpbmNlIHBhZ2UtbG9hZCBvciAwIGlmIHVuc3VwcG9ydGVkCgogICAgICByZXR1cm4gInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCIucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykgewogICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2OyAvL3JhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxNgoKICAgICAgICBpZiAoZCA+IDApIHsKICAgICAgICAgIC8vVXNlIHRpbWVzdGFtcCB1bnRpbCBkZXBsZXRlZAogICAgICAgICAgciA9IChkICsgcikgJSAxNiB8IDA7CiAgICAgICAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL1VzZSBtaWNyb3NlY29uZHMgc2luY2UgcGFnZS1sb2FkIGlmIHN1cHBvcnRlZAogICAgICAgICAgciA9IChkMiArIHIpICUgMTYgfCAwOwogICAgICAgICAgZDIgPSBNYXRoLmZsb29yKGQyIC8gMTYpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChjID09PSAieCIgPyByIDogciAmIDB4MyB8IDB4OCkudG9TdHJpbmcoMTYpOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0dmFsdWU6IGZ1bmN0aW9uIGVkaXR2YWx1ZShpbmRleCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLmRpc2FibGVkID0gIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbnB1dCIgKyBpbmRleCkuZGlzYWJsZWQ7CiAgICB9LAogICAgZ2V0RmlsZTogZnVuY3Rpb24gZ2V0RmlsZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGZpbGVuYW1lID0gIiI7CiAgICAgIHZhciBmaWxlZGF0YSA9ICIiOwogICAgICB2YXIgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB0aGlzLmZpbGVfbGFiZWwgPSBmaWxlLm5hbWU7IC8vIGNvbnNvbGUubG9nKGZpbGUpOwoKICAgICAgaWYgKGZpbGUudHlwZSAhPSAidGV4dC9jc3YiKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGV4dDogIk9ubHkgQ1NWIGZpbGVzIGNhbiBiZSB1cGxvYWRlZC4iLAogICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB9CiAgICB9LAogICAgYWRkbWV0cmljdmFsdWU6IGZ1bmN0aW9uIGFkZG1ldHJpY3ZhbHVlKCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLm1ldHJpY3MucHVzaCh7CiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICBvcGVyYXRpb246ICJTVU0iLAogICAgICAgIGNvbHVtbjogbnVsbAogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVoZWFkZXI6IGZ1bmN0aW9uIGRlbGV0ZWhlYWRlcih2YWx1ZWluZGV4KSB7CiAgICAgIHRoaXMubWV0cmljcy5zcGxpY2UodmFsdWVpbmRleCwgMSk7CiAgICB9LAogICAgZWRpdGNvbHVtbnM6IGZ1bmN0aW9uIGVkaXRjb2x1bW5zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHZhbGlkYXRpb25fc3VjY2VzcyA9IHRydWU7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSA9PT0gJycgfHwgdGhpcy5jb2x1bW5zW2ldLm5ld25hbWUuc3BsaXQoJyAnKS5qb2luKCcnKSA9PT0gJycpIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiWW91IGNhbm5vdCBzZXQgY29sdW1uIG5hbWVzIEVtcHR5Iik7CiAgICAgICAgICB2YWxpZGF0aW9uX3N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHZhbGlkYXRpb25fc3VjY2VzcykgewogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgICAgdGV4dDogIiBZb3Ugd2FudCB0byBFZGl0IHRoZSBDb2x1bW5zPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1ucykKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscyk7CiAgICAgICAgICAgIC8vIHRoaXMubmV3Y29sdW1ucyA9IHRoaXMuY29sdW1ucwogICAgICAgICAgICB2YXIgbmV3Y29sdW1uc2RhdGEgPSBbXTsKCiAgICAgICAgICAgIGlmICghX3RoaXMuaXNfZGF0YXNldF9lZGl0YWJsZSkgewogICAgICAgICAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IF90aGlzLmNvbHVtbnMubGVuZ3RoOyBfaTYrKykgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5zW2ldKQogICAgICAgICAgICAgICAgbmV3Y29sdW1uc2RhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLmNvbHVtbnNbX2k2XS5uYW1lLAogICAgICAgICAgICAgICAgICBuZXduYW1lOiBfdGhpcy5jb2x1bW5zW19pNl0ubmV3bmFtZSwKICAgICAgICAgICAgICAgICAgZGF0YV90eXBlOiBfdGhpcy5jb2x1bW5zW19pNl0uZGF0YV90eXBlLAogICAgICAgICAgICAgICAgICBjb2x1bW5fdHlwZTogIk1ldHJpYyIsCiAgICAgICAgICAgICAgICAgIGFkZGl0aXZlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgYWdncmVnYXRpb246ICJOb25lIiwKICAgICAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgbmxwX3NlYXJjaF9lbmFibGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgc3lub255bXM6ICIiLAogICAgICAgICAgICAgICAgICBpbmRleF90eXBlOiAiREVGQVVMVCIsCiAgICAgICAgICAgICAgICAgIGVudGl0eV9jYXRlZ29yeTogIlBFUlNPTiIsCiAgICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Zvcm1hdDogIk5vbmUiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2k3ID0gMCwgX09iamVjdCRlbnRyaWVzMyA9IE9iamVjdC5lbnRyaWVzKF90aGlzLmNvbHVtbl9kZXRhaWxzKTsgX2k3IDwgX09iamVjdCRlbnRyaWVzMy5sZW5ndGg7IF9pNysrKSB7CiAgICAgICAgICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzMyRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczNbX2k3XSwgMiksCiAgICAgICAgICAgICAgICAgICAga2V5ID0gX09iamVjdCRlbnRyaWVzMyRfaVswXSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9PYmplY3QkZW50cmllczMkX2lbMV07CgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coa2V5LCB2YWx1ZSkKICAgICAgICAgICAgICAgIGZvciAodmFyIF9pOCA9IDA7IF9pOCA8IF90aGlzLmNvbHVtbnMubGVuZ3RoOyBfaTgrKykgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29sdW1uc1tfaThdLm5hbWUgPT09IGtleSkgewogICAgICAgICAgICAgICAgICAgIG5ld2NvbHVtbnNkYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogX3RoaXMuY29sdW1uc1tfaThdLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBuZXduYW1lOiBfdGhpcy5jb2x1bW5zW19pOF0ubmV3bmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogX3RoaXMuY29sdW1uc1tfaThdLmRhdGFfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbl90eXBlOiB2YWx1ZS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aXZlOiB2YWx1ZS5hZGRpdGl2ZSwKICAgICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uOiB2YWx1ZS5hZ2dyZWdhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdmFsdWUuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgICAgbmxwX3NlYXJjaF9lbmFibGVkOiB2YWx1ZS5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgICAgICAgICBzeW5vbnltczogdmFsdWUuc3lub255bXMsCiAgICAgICAgICAgICAgICAgICAgICBpbmRleF90eXBlOiB2YWx1ZS5pbmRleF90eXBlLAogICAgICAgICAgICAgICAgICAgICAgZW50aXR5X2NhdGVnb3J5OiB2YWx1ZS5lbnRpdHlfY2F0ZWdvcnksCiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeV9mb3JtYXQ6IHZhbHVlLmN1cnJlbmN5X2Zvcm1hdAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIC8vICAgbmV3Y29sdW1uc2RhdGEucHVzaCh7CiAgICAgICAgICAgICAgLy8gICAgIG5hbWU6IHRoaXMuY29sdW1uc1tpXS5uYW1lLAogICAgICAgICAgICAgIC8vICAgICBuZXduYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmV3bmFtZSwKICAgICAgICAgICAgICAvLyAgICAgZGF0YV90eXBlIDogdGhpcy5jb2x1bW5zW2ldLmRhdGFfdHlwZSwKICAgICAgICAgICAgICAvLyAgICAgY29sdW1uX3R5cGU6IHRoaXMuY29sdW1uc1tpXS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAvLyAgICAgYWRkaXRpdmU6IHRoaXMuY29sdW1uc1tpXS5hZGRpdGl2ZSwKICAgICAgICAgICAgICAvLyAgICAgYWdncmVnYXRpb246IHRoaXMuY29sdW1uc1tpXS5hZ2dyZWdhdGlvbiwKICAgICAgICAgICAgICAvLyAgICAgaGlkZGVuOiB0aGlzLmNvbHVtbnNbaV0uaGlkZGVuLAogICAgICAgICAgICAgIC8vICAgICBubHBfc2VhcmNoX2VuYWJsZWQ6IHRoaXMuY29sdW1uc1tpXS5ubHBfc2VhcmNoX2VuYWJsZWQsCiAgICAgICAgICAgICAgLy8gICAgIHN5bm9ueW1zOiB0aGlzLmNvbHVtbnNbaV0uc3lub255bXMsCiAgICAgICAgICAgICAgLy8gICAgIGluZGV4X3R5cGU6IHRoaXMuY29sdW1uc1tpXS5pbmRleF90eXBlLAogICAgICAgICAgICAgIC8vICAgICBlbnRpdHlfY2F0ZWdvcnk6IHRoaXMuY29sdW1uc1tpXS5lbnRpdHlfY2F0ZWdvcnksCiAgICAgICAgICAgICAgLy8gICAgIGN1cnJlbmN5X2Zvcm1hdDogdGhpcy5jb2x1bW5zW2ldLmN1cnJlbmN5X2Zvcm1hdCAKICAgICAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2cobmV3Y29sdW1uc2RhdGEpOwoKCiAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXdjb2x1bW5zZGF0YS5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgaXRlbSkgewogICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgX2RlZmluZVByb3BlcnR5KHt9LCBpdGVtLm5hbWUsIGl0ZW0ubmV3bmFtZSkpOwogICAgICAgICAgICB9LCB7fSk7IC8vIGNvbnNvbGUubG9nKG9iamVjdCk7CgogICAgICAgICAgICBfdGhpcy5uZXdjb2x1bW5zID0gb2JqZWN0OwogICAgICAgICAgICBfdGhpcy5uZXdjb2x1bW5zY29tcGxldGUgPSBuZXdjb2x1bW5zZGF0YTsKICAgICAgICAgICAgX3RoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkbWV0cmljczogZnVuY3Rpb24gYWRkbWV0cmljcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgdmFsaWRhdGlvbl9zdWNjZXNzID0gdHJ1ZSwKICAgICAgICAgIG1ldHJpY3NfbmFtZV9saXN0ID0gW107IC8vIGNvbnNvbGUubG9nKG1ldHJpY3NfbmFtZV9saXN0KQogICAgICAvLyBmb3IobGV0IGkgPSAwO2kgPCB0aGlzLm1ldHJpY3MubGVuZ3RoOyBpKyspIHsKICAgICAgLy8gICBpZigodGhpcy5tZXRyaWNzW2ldLm5hbWUgPT09IG51bGwgfHwgdGhpcy5tZXRyaWNzW2ldLm5hbWUgPT09ICcnIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lLnNwbGl0KCcgJykuam9pbignJykgPT09ICcnICkgfHwgKHRoaXMubWV0cmljc1tpXS5jb2x1bW4gPT09IG51bGwpIHx8ICh0aGlzLm1ldHJpY3NbaV0ub3BlcmF0aW9uID09PSBudWxsKSl7CiAgICAgIC8vICAgbWV0cmljc19uYW1lX2xpc3QucHVzaCh0aGlzLm1ldHJpY3NbaV0ubmFtZSkKICAgICAgLy8gICB9CiAgICAgIC8vIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tZXRyaWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tZXRyaWNzW2ldKTsKICAgICAgICBpZiAodGhpcy5tZXRyaWNzW2ldLm5hbWUgPT09IG51bGwgfHwgdGhpcy5tZXRyaWNzW2ldLm5hbWUgPT09ICcnIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lLnNwbGl0KCcgJykuam9pbignJykgPT09ICcnIHx8IHRoaXMubWV0cmljc1tpXS5jb2x1bW4gPT09IG51bGwgfHwgdGhpcy5tZXRyaWNzW2ldLm9wZXJhdGlvbiA9PT0gbnVsbCkgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgRmlsbCBpbiBhbGwgdGhlIHZhbHVlcyBmb3IgdGhlIG1ldHJpY3MiKTsKICAgICAgICAgIHZhbGlkYXRpb25fc3VjY2VzcyA9IGZhbHNlOyAvLyBicmVhazsKICAgICAgICB9IC8vIGVsc2V7CiAgICAgICAgLy8gICBtZXRyaWNzX25hbWVfbGlzdC5wdXNoKHRoaXMubWV0cmljc1tpXS5uYW1lKTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY29uc29sZS5sb2cobWV0cmljc19uYW1lX2xpc3QpCiAgICAgICAgLy8gaWYobWV0cmljc19uYW1lX2xpc3QubGVuZ3RoID4gMSAmJiB2YWxpZGF0aW9uX3N1Y2Nlc3MgPT09IHRydWUgJiYgbWV0cmljc19uYW1lX2xpc3QuaW5jbHVkZXModGhpcy5tZXRyaWNzW2ldLm5hbWUpKXsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGkpOwogICAgICAgIC8vICAgdG9hc3RyLmVycm9yKCJUd28gbWV0cmljIG5hbWVzIGNhbm5vdCBiZSBzYW1lIik7CiAgICAgICAgLy8gICB2YWxpZGF0aW9uX3N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAvLyAgIC8vIGJyZWFrOwogICAgICAgIC8vIH0KCiAgICAgIH0KCiAgICAgIGlmICh2YWxpZGF0aW9uX3N1Y2Nlc3MpIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICAgIHRleHQ6ICIgWW91IHdhbnQgdG8gYWRkIHRoZXNlIG1ldHJpY3M/IiwKICAgICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICBfdGhpczIubWV0cmljc2RhdGEgPSBbXTsKCiAgICAgICAgICAgIGZvciAodmFyIF9pOSA9IDA7IF9pOSA8IF90aGlzMi5tZXRyaWNzLmxlbmd0aDsgX2k5KyspIHsKICAgICAgICAgICAgICBfdGhpczIubWV0cmljc2RhdGEucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiBfdGhpczIubWV0cmljc1tfaTldLm5hbWUsCiAgICAgICAgICAgICAgICBjb2x1bW46IF90aGlzMi5tZXRyaWNzW19pOV0uY29sdW1uLAogICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBfdGhpczIubWV0cmljc1tfaTldLm9wZXJhdGlvbiAvLyBvbjogW3RoaXMubWV0cmljc1tpXS5jb2x1bW4xLCB0aGlzLm1ldHJpY3NbaV0uY29sdW1uMl0KCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzMi5pc21ldHJpY3NzYXZlZCA9IHRydWU7CiAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHRoaXMubWV0cmljc2RhdGEpOwoKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGZpbmFsc2F2ZTogZnVuY3Rpb24gZmluYWxzYXZlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiLAogICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpczMuc3Bpbm5lck9uID0gdHJ1ZTsKCiAgICAgICAgICBpZiAoIV90aGlzMy5pc19kYXRhc2V0X2VkaXRhYmxlKSB7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmJpX3Byb2Nlc3NfZGF0YSgpLCB7CiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICBlbWFpbDogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgb2JqZWN0X25hbWU6IF90aGlzMy5vYmplY3RfbmFtZSwKICAgICAgICAgICAgICBjb2x1bW5fcmVuYW1lX21hcHBpbmc6IF90aGlzMy5uZXdjb2x1bW5zLAogICAgICAgICAgICAgIGRhdGFzZXRfbmFtZTogX3RoaXMzLmRhdGFzZXRfbmFtZSwKICAgICAgICAgICAgICBtZXRyaWNzOiBfdGhpczMubWV0cmljc2RhdGEsCiAgICAgICAgICAgICAgd29ya3NoZWV0X2RldGFpbHM6IF90aGlzMy5jb2x1bW5fZGV0YWlscwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIF90aGlzMy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJEYXRhIFByb2Nlc3NlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdF9zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfc3VjY2Vzcy52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMy5nZXRfZGF0YXNldF9saXN0KCk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7IC8vIHRoaXMuZ2V0X2RhdGFzZXRfbGlzdCgpOwogICAgICAgICAgICAgICAgLy8gdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiEiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgX3RoaXMzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdmFyIHdvcmtzaGVldF9kZXRhaWxzID0gdGhpcy5jb2x1bW5fZGV0YWlsczsKICAgICAgICAgICAgLy8gdmFyIGNvbHVtbl9yZW5hbWVfbWFwID0gdGhpcy5uZXdjb2x1bW5zOwogICAgICAgICAgICAvLyB2YXIgbWV0cmljcyA9IHRoaXMubWV0cmljc2RhdGEKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscykKICAgICAgICAgICAgdmFyIHdvcmtzaGVldF9kZXRhaWxzID0ge307CiAgICAgICAgICAgIHdvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9kZXRhaWxzID0gX3RoaXMzLmNvbHVtbl9kZXRhaWxzOwogICAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlscy5jb2x1bW5fcmVuYW1lX21hcCA9IF90aGlzMy5uZXdjb2x1bW5zOwogICAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlscy5tZXRyaWNzID0gX3RoaXMzLm1ldHJpY3NkYXRhOwogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5iaV9kYXRhX3NoZWV0X2RldGFpbHMoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgZW1haWw6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGRhdGFzZXRfbmFtZTogX3RoaXMzLmRhdGFzZXRfbmFtZSwKICAgICAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsczogd29ya3NoZWV0X2RldGFpbHMsCiAgICAgICAgICAgICAgb2xkX3dvcmtzaGVldF9kZXRhaWxzOiBfdGhpczMub2xkX3dvcmtzaGVldF9kZXRhaWxzCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXMzLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09PSAiV09SS1NIRUVUIERFVEFJTFMgVVBEQVRFRCIpIHsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRGF0YSBVcGRhdGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRfc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0X3N1Y2Nlc3MudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0X2RhdGFzZXRfbGlzdCgpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIF90aGlzMy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVwbG9hZGZpbGU6IGZ1bmN0aW9uIHVwbG9hZGZpbGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gY29uc29sZS5sb2codGhpcy5kYXRhc2V0X25hbWUpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpbGUpOwoKICAgICAgdmFyIGZpbGVuYW1lID0gIiI7CiAgICAgIHZhciBmaWxlZGF0YSA9ICIiOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgZmlsZW5hbWUgPSB0aGlzLmZpbGUubmFtZTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlKTsKCiAgICAgIHJlYWRlci5vbmxvYWRzdGFydCA9IGZ1bmN0aW9uICgpIHsvLyB0aGlzLiRyb290LiRlbWl0KCdzaG93X2xvYWRlcicsIHRydWUpOwogICAgICB9OwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyB0aGlzLiRyb290LiRlbWl0KCdzaG93X2xvYWRlcicsIHRydWUpOwogICAgICAgIGZpbGVkYXRhID0gcmVhZGVyLnJlc3VsdC5zcGxpdCgiYmFzZTY0LCIpWzFdOwogICAgICB9OwoKICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgeCA9IGZpbGVkYXRhLnNwbGl0KCJiYXNlNjQsIilbMV07CiAgICAgICAgdmFyIHRlbXBfdXVpZCA9ICIiOwogICAgICAgIHRlbXBfdXVpZCA9IF90aGlzNC5nZW5lcmF0ZVVVSUQoKTsKICAgICAgICB2YXIgdXNlcl9kZXRhaWxzID0gewogICAgICAgICAgZW1haWw6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgY29tcGFueV9pZDogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGlkZW1wb3RlbmN5X2tleTogdGVtcF91dWlkLAogICAgICAgICAgZGF0YXNldF9uYW1lOiBfdGhpczQuZGF0YXNldF9uYW1lCiAgICAgICAgfTsKICAgICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KHVzZXJfZGV0YWlscyk7CiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbanNvbl0sIHsKICAgICAgICAgIHR5cGU6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgIH0pOwogICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZkLmFwcGVuZCgiZmlsZSIsIF90aGlzNC5maWxlLCBmaWxlbmFtZSk7CiAgICAgICAgZmQuYXBwZW5kKCJqc29uIiwgYmxvYik7CiAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IHRydWU7IC8vIGNvbnNvbGUubG9nKGZkKTsKCiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYmlfdXBsb2FkX2ZpbGUoKSwgZmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIF90aGlzNC5jb2x1bW5zLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uc1tpXSwKICAgICAgICAgICAgICAgIG5ld25hbWU6IHJlc3BvbnNlLmRhdGEuZmlsZV9kZXRhaWxzLmNvbHVtbnNbaV0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBfdGhpczQuY29sdW1ucy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgIGZvciAodmFyIF9pMTAgPSAwLCBfT2JqZWN0JGVudHJpZXM0ID0gT2JqZWN0LmVudHJpZXMocmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuZGF0YV90eXBlcyk7IF9pMTAgPCBfT2JqZWN0JGVudHJpZXM0Lmxlbmd0aDsgX2kxMCsrKSB7CiAgICAgICAgICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzNCRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczRbX2kxMF0sIDIpLAogICAgICAgICAgICAgICAgICAgIGtleSA9IF9PYmplY3QkZW50cmllczQkX2lbMF0sCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfT2JqZWN0JGVudHJpZXM0JF9pWzFdOwoKICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gX3RoaXM0LmNvbHVtbnNba10ubmFtZSkgewogICAgICAgICAgICAgICAgICBfdGhpczQuY29sdW1uc1trXS5kYXRhX3R5cGUgPSB2YWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5zKTsKICAgICAgICAgICAgLy8gICB0aGlzLmNvbHVtbnMgPSByZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5jb2x1bW5zOwoKCiAgICAgICAgICAgIF90aGlzNC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXM0LmlzX2ZpbGVfdXBsb2FkZWQgPSB0cnVlOwogICAgICAgICAgICBfdGhpczQub2JqZWN0X25hbWUgPSByZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5vYmplY3RfbmFtZTsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIkZpbGUgVXBsb2FkZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzICE9ICJTdWNjZXNzIikgewogICAgICAgICAgICBfdGhpczQuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgICAgICAgIF90aGlzNC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOyAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgLy8gJHJvdXRlci5nbygpOwogICAgICAgICAgICAvLyB9LCAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpczQuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyhlcnIsIndFZWVlZSIpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfSwKICAgIHNhdmVfY29sdW1uX2RhdGE6IGZ1bmN0aW9uIHNhdmVfY29sdW1uX2RhdGEoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGUpOwogICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlLmxlbmd0aDsgaSsrKXsKICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpXS5zeW5vbnltcykKICAgICAgLy8gICBpZih0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpXS5zeW5vbnltcyAhPSAiIiB8fCB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpXS5zeW5vbnltcy5zcGxpdCgnICcpLmpvaW4oJycpICE9ICIiIHx8dGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMgIT0gdW5kZWZpbmVkICl7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpXS5zeW5vbnltcykKICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICIgWW91IHdhbnQgdG8gYWRkIHRoZXNlIHdvcmtzaGVldCBkZXRhaWxzPyIsCiAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICB2YXIgYXJyYXkgPSB7fTsKICAgICAgICAgIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXM1Lm5ld2NvbHVtbnNjb21wbGV0ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgdGVtcCA9IF90aGlzNS5uZXdjb2x1bW5zY29tcGxldGVbaV07IC8vIGNvbnNvbGUubG9nKHRlbXApOwoKICAgICAgICAgICAgdGVtcC5hZ2dyZWdhdGlvbiA9PT0gIk5vbmUiID8gdGVtcC5hZ2dyZWdhdGlvbiA9IG51bGwgOiB0ZW1wLmFnZ3JlZ2F0aW9uID0gdGVtcC5hZ2dyZWdhdGlvbjsKCiAgICAgICAgICAgIGlmICh0ZW1wLnN5bm9ueW1zICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICB0ZW1wLnN5bm9ueW1zID0gdGVtcC5zeW5vbnltcy5yZXBsYWNlKC8sL2csICc+PicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlsc1t0ZW1wLm5ld25hbWVdID0gewogICAgICAgICAgICAgICJkYXRhdHlwZSI6ICIiLmNvbmNhdCh0ZW1wLmRhdGFfdHlwZSksCiAgICAgICAgICAgICAgImNvbHVtbl90eXBlIjogIiIuY29uY2F0KHRlbXAuY29sdW1uX3R5cGUpLAogICAgICAgICAgICAgICJhZGRpdGl2ZSI6IHRlbXAuYWRkaXRpdmUsCiAgICAgICAgICAgICAgImFnZ3JlZ2F0aW9uIjogdGVtcC5hZ2dyZWdhdGlvbiwKICAgICAgICAgICAgICAiaGlkZGVuIjogdGVtcC5oaWRkZW4sCiAgICAgICAgICAgICAgIm5scF9zZWFyY2hfZW5hYmxlZCI6IHRlbXAubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAgICJpbmRleF90eXBlIjogIiIuY29uY2F0KHRlbXAuaW5kZXhfdHlwZSksCiAgICAgICAgICAgICAgInN5bm9ueW1zIjogIiIuY29uY2F0KHRlbXAuc3lub255bXMpLAogICAgICAgICAgICAgICJlbnRpdHlfY2F0ZWdvcnkiOiAiIi5jb25jYXQodGVtcC5lbnRpdHlfY2F0ZWdvcnkpLAogICAgICAgICAgICAgICJjdXJyZW5jeV9mb3JtYXQiOiB0ZW1wLmN1cnJlbmN5X2Zvcm1hdAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYgKHRlbXAuc3lub255bXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLz4+IC9nLCAnLCcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0ZW1wLmFnZ3JlZ2F0aW9uID09PSBudWxsID8gdGVtcC5hZ2dyZWdhdGlvbiA9ICJOb25lIiA6IHRlbXAuYWdncmVnYXRpb24gPSB0ZW1wLmFnZ3JlZ2F0aW9uOwogICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyh3b3Jrc2hlZXRfZGV0YWlscyk7CgoKICAgICAgICAgIF90aGlzNS5jb2x1bW5fZGV0YWlscyA9IE9iamVjdC5hc3NpZ24od29ya3NoZWV0X2RldGFpbHMpOyAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbl9kZXRhaWxzKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBjb25zb2xlLmxvZyh3b3Jrc2hlZXRfZGV0YWlscyk7CiAgICB9LAogICAgZ2V0X2RhdGFzZXRfbGlzdDogZnVuY3Rpb24gZ2V0X2RhdGFzZXRfbGlzdCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zLmdldChhcGlfY2FsbHMuYmlfZGF0YV9zaGVldF9kZXRhaWxzKCksIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSAvLyBkYXRhc2V0X25hbWU6ICJGcnVpdGh1dCB2MSIsCiAgICAgICAgICAvLyBkYXRhc2V0X25hbWU6ICJEcnVnIFRyaWFsIERhdGEiLAoKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIF90aGlzNi5kYXRhc2V0cyA9IHJlc3BvbnNlLmRhdGEuZGF0YV9zb3VyY2VzOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuZGF0YV9zb3VyY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFfc291cmNlc1tpXS5vbGRfd29ya3NoZWV0X2RldGFpbHMgPSByZXNwb25zZS5kYXRhLmRhdGFfc291cmNlc1tpXS53b3Jrc2hlZXRfZGV0YWlsczsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczYuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgdG9hc3RyLmVycm9yKCJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluIik7CiAgICAgIH0pOwogICAgfSwKICAgIGZvcm1hdF9kYXRlOiBmdW5jdGlvbiBmb3JtYXRfZGF0ZShkYXRlKSB7CiAgICAgIC8vIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJZWVlZIE1NTU0gREQiKQogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiZGRkZCwgTU1NTSBEbyBZWVlZIik7CiAgICB9LAogICAgb3Blbl9jdXJyZW5jeV9mb3JtYXRfbW9kYWw6IGZ1bmN0aW9uIG9wZW5fY3VycmVuY3lfZm9ybWF0X21vZGFsKGluZGV4KSB7CiAgICAgIGlmICh0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtpbmRleF0uY3VycmVuY3lfZm9ybWF0ID09PSBudWxsKSB7CiAgICAgICAgdGhpcy5jdXJyZW5jeV9mb3JtYXRfbW9kYWwgPSAiTm9uZSI7CiAgICAgICAgdGhpcy5jdXJyZW50X2NvbHVtbl9pbmRleCA9IGluZGV4OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3VycmVudF9jb2x1bW5faW5kZXggPSBpbmRleDsKICAgICAgICB0aGlzLmN1cnJlbmN5X2Zvcm1hdF9tb2RhbCA9ICJTcGVjaWZpYyI7CiAgICAgICAgdGhpcy5jb3VudHJ5X2lzb19jb2RlID0gdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaW5kZXhdLmN1cnJlbmN5X2Zvcm1hdDsKICAgICAgfQoKICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgic2hvdyIpOwogICAgfSwKICAgIGNoYW5nZV9jdXJyZW5jeV9mb3JtYXQ6IGZ1bmN0aW9uIGNoYW5nZV9jdXJyZW5jeV9mb3JtYXQob3BlcmF0aW9uKSB7CiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjbG9zZScpIHsKICAgICAgICAkKCIjY3VycmVuY3lGb3JtYXRNb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgdGhpcy5jb3VudHJ5X2lzb19jb2RlID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ3NhdmUnKSB7CiAgICAgICAgaWYgKHRoaXMuY3VycmVuY3lfZm9ybWF0X21vZGFsID09PSAiTm9uZSIpIHsKICAgICAgICAgIHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW3RoaXMuY3VycmVudF9jb2x1bW5faW5kZXhdLmN1cnJlbmN5X2Zvcm1hdCA9IG51bGw7CiAgICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gbnVsbDsKICAgICAgICAgICQoIiNjdXJyZW5jeUZvcm1hdE1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLmNvdW50cnlfaXNvX2NvZGUgPT09IG51bGwpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgU2VsZWN0IGFuIElTTyBDb2RlIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVt0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4XS5jdXJyZW5jeV9mb3JtYXQgPSB0aGlzLmNvdW50cnlfaXNvX2NvZGU7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9jb2x1bW5faW5kZXggPSBudWxsOwogICAgICAgICAgICAkKCIjY3VycmVuY3lGb3JtYXRNb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb3Blbl9zZXR0aW5nc19mb3JfZGF0YWJhc2VfZGF0YXNldDogZnVuY3Rpb24gb3Blbl9zZXR0aW5nc19mb3JfZGF0YWJhc2VfZGF0YXNldChpbmRleCkgewogICAgICB0aGlzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5ncyA9IHRydWU7CiAgICB9LAogICAgb3Blbl9kYXRhYmFzZV9kYXRhc2V0X21vZGFsOiBmdW5jdGlvbiBvcGVuX2RhdGFiYXNlX2RhdGFzZXRfbW9kYWwoZGF0YWJhc2UpIHsKICAgICAgdGhpcy5zaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3NfZGV0YWlscyA9IGZhbHNlOwoKICAgICAgaWYgKGRhdGFiYXNlID09PSAncG9zdGdyZXMnKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X2RhdGFzZXRfZGF0YWJhc2VfaWNvbiA9IHRoaXMucG9zdGdyZXNfaWNvbl9wYXRoOwogICAgICB9CgogICAgICBpZiAoZGF0YWJhc2UgPT09ICdteXNxbCcpIHsKICAgICAgICB0aGlzLmN1cnJlbnRfZGF0YXNldF9kYXRhYmFzZV9pY29uID0gdGhpcy5teXNxbF9pY29uX3BhdGg7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YWJhc2VfZGF0YXNldF9pZCA9IHRoaXMuZ2VuZXJhdGVVVUlEKCk7CiAgICAgIHRoaXMuc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzX2RldGFpbHMgPSB0cnVlOwogICAgfSwKICAgIGFkZF9kYXRhc2V0X2RldGFpbHM6IGZ1bmN0aW9uIGFkZF9kYXRhc2V0X2RldGFpbHMoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgc3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICdZb3Ugd2FudCB0byBpbnRlZ3JhdGUgd2l0aCB0aGlzIERhdGFiYXNlPycsCiAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIiwKICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5iaV9kYl9pbnRlZ3JhdGlvbigpLCB7CiAgICAgICAgICAgIGVtYWlsOiBfdGhpczcuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgdG9rZW46IF90aGlzNy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczcuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzNy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczcuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgcmRibXNfbmFtZTogJ3Bvc3RncmVzcWwnLAogICAgICAgICAgICBkYXRhc2V0X2lkOiBfdGhpczcuZGF0YWJhc2VfZGF0YXNldF9pZCwKICAgICAgICAgICAgZGF0YXNldF9uYW1lOiBfdGhpczcuZGF0YWJhc2VfZGF0YXNldF9uYW1lLAogICAgICAgICAgICBzY2hlbWFfbmFtZTogX3RoaXM3LmRhdGFiYXNlX3NjaGVtYV9uYW1lLAogICAgICAgICAgICBqZGJjX2Nvbm5lY3Rpb25fc3RyaW5nOiBfdGhpczcuZGF0YWJhc2VfamRiY19jb25uZWN0aW9uX3N0cmluZywKICAgICAgICAgICAgdXNlcm5hbWU6IF90aGlzNy5kYXRhYmFzZV91c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzNy5kYXRhYmFzZV9wYXNzd29yZAogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gJ0RCIElOVEVHUkFUSU9OIERFVEFJTFMgU0FWRUQnKSB7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiREIgSW50ZWdyYXRpb24gU3VjY2Vzc2Z1bCIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRfc3VjY2VzcykgewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdF9zdWNjZXNzLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNy5nZXRfZGF0YXNldF9saXN0KCk7CgogICAgICAgICAgICAgICAgICBfdGhpczcuc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICBfdGhpczcuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQoKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpczcuc3Bpbm5lck9uID0gZmFsc2U7IC8vIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZC4gUGxlYXNlIFRyeSBBZ2FpbiIpCgogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiEiLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHNob3dfZGF0YXNldF9zZXR0aW5nczogZnVuY3Rpb24gc2hvd19kYXRhc2V0X3NldHRpbmdzKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwpIHsvLyBjb25zb2xlLmxvZygna2poZ3ZmY2R4ZCcpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29sdW1ucyA9IFtdOwogICAgICAgIHRoaXMubWV0cmljcyA9IFtdOwogICAgICAgIHRoaXMuZmlsZV9sYWJlbCA9ICJDaG9vc2UgZmlsZSI7CiAgICAgICAgdGhpcy5pc19maWxlX3VwbG9hZGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5uZXdjb2x1bW5zID0gW107CiAgICAgICAgdGhpcy5pc2NvbHVtbnNuYW1lY2hhbmdlZCA9IGZhbHNlOwogICAgICAgIHRoaXMub2JqZWN0X25hbWUgPSAiIjsKICAgICAgICB0aGlzLm1ldHJpY3NkYXRhID0gW107CiAgICAgICAgdGhpcy5pc21ldHJpY3NzYXZlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuZGF0YXNldF9uYW1lID0gIiI7CiAgICAgICAgdGhpcy5maWxlID0gbnVsbDsKICAgICAgICB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZSA9IFtdOwogICAgICAgIHRoaXMuY29sdW1uX2RldGFpbHMgPSB7fTsKICAgICAgICB0aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGN1cnJlbmN5X2Zvcm1hdF9tb2RhbDogZnVuY3Rpb24gY3VycmVuY3lfZm9ybWF0X21vZGFsKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09ICJOb25lIikgewogICAgICAgIHRoaXMuaXNfY291bnRyeV9jb2Rlc19kcm9wZG93bl9kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgdGhpcy5jb3VudHJ5X2lzb19jb2RlID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKG5ld1ZhbCA9PT0gIlNwZWNpZmljIikgewogICAgICAgIHRoaXMuaXNfY291bnRyeV9jb2Rlc19kcm9wZG93bl9kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgZGF0YWJhc2VfZGF0YXNldF9jb25uZWN0aW9uX3R5cGU6IGZ1bmN0aW9uIGRhdGFiYXNlX2RhdGFzZXRfY29ubmVjdGlvbl90eXBlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09ICdKREJDJykgewogICAgICAgIHRoaXMuZGF0YWJhc2VfaG9zdCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9wb3J0ID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX2RiX25hbWUgPSBudWxsOwogICAgICB9CgogICAgICBpZiAobmV3VmFsID09PSAnaG9zdF9wb3J0JykgewogICAgICAgIHRoaXMuZGF0YWJhc2VfamRiY19jb25uZWN0aW9uX3N0cmluZyA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBzaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3NfZGV0YWlsczogZnVuY3Rpb24gc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzX2RldGFpbHMobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmRhdGFiYXNlX2RhdGFzZXRfbmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9zY2hlbWFfbmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV91c2VybmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9wYXNzd29yZCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9qZGJjX2Nvbm5lY3Rpb25fc3RyaW5nID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX2hvc3QgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfcG9ydCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9kYl9uYW1lID0gbnVsbDsKICAgICAgfQogICAgfQogIH0KfTs="},null]}