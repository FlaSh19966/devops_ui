{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/User Management/Permissions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/User Management/Permissions.vue","mtime":1645594423495},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgTXVsdGlzZWxlY3QgZnJvbSAidnVlLW11bHRpc2VsZWN0IjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKaW1wb3J0IHNpZGViYXJpdGVtcyBmcm9tICIuLi9MYXlvdXQvU2lkZUJhckl0ZW0iOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicGVybWlzc2lvbnMiLAogIGNvbXBvbmVudHM6IHsKICAgIE11bHRpc2VsZWN0OiBNdWx0aXNlbGVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IFtdLAogICAgICByb2xlczogW10sCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgc2VsZWN0ZWRfcm9sZTogIiIsCiAgICAgIHNlbGVjdGVkX3Blcm1pc3Npb25zOiBbXSwKICAgICAgcm9sZV9saXN0OiBbXSwKICAgICAgY29tcGxldGVfcm9sZV9saXN0OiBbXSwKICAgICAgcGVybWlzc2lvbnNfbGlzdDogW10sCiAgICAgIHBvcnRhbF9wZXJtaXNzaW9uc19saXN0OiBbXSwKICAgICAgYm90X3Blcm1pc3Npb25zX2xpc3Q6IFtdLAogICAgICBpbnRlbnRsaXN0OiBbXSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgbnVtYmVyX29mX3Jvd3M6IG51bGwsCiAgICAgIHRvdGFsX3BhZ2VzOiBudWxsLAogICAgICB1c2VyX3R5cGU6ICJQb3J0YWwiLAogICAgICBtZW51X2xpc3RfZnJvbV9hcGk6IG51bGwsCiAgICAgIHNwaW5uZXJPbjogZmFsc2UsCiAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iID8gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpIDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIgPyB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKSA6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgIHVzZXJfcm9sZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUsCiAgICAgIC8vaGFyc2gKICAgICAgcGFnZV9hcnJheTogW10sCiAgICAgIHNlYXJjaF9uYW1lOiAiIiwKICAgICAgcG9ydGFsX3JvbGVzOiBbXSwKICAgICAgYm90X3JvbGVzOiBbXSwKICAgICAgaXNTaG93X3BvcnRhbF9yb2xlczogdHJ1ZSwKICAgICAgaXNTaG93X2JvdF9yb2xlczogZmFsc2UsCiAgICAgIGlzVmlzaWJsZVNlYXJjaENsZWFyOiBmYWxzZSwKICAgICAgc2VsZWN0X3JvbGVfbmFtZV9kaXNhYmxlOiBmYWxzZSwKICAgICAgZmlsdGVyX3VzZXJfdHlwZTogIlBvcnRhbCIsCiAgICAgIHVzZXJfdHlwZV9jaGFuZ2U6IHRydWUKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcGVybWlzc2lvbnNfdGl0bGU6IGZ1bmN0aW9uIHBlcm1pc3Npb25zX3RpdGxlKCkgewogICAgICBpZiAodGhpcy51c2VyX3R5cGUgPT0gIlBvcnRhbCIpIHsKICAgICAgICByZXR1cm4gIlBvcnRhbCBNZW51IjsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiQm90IikgewogICAgICAgIHJldHVybiAiQm90IEludGVudHMiOwogICAgICB9CiAgICB9LAogICAgY2hlY2tfcG9ydGFsX2JvdF9yb2xlX2xlbmd0aDogZnVuY3Rpb24gY2hlY2tfcG9ydGFsX2JvdF9yb2xlX2xlbmd0aCgpIHsKICAgICAgaWYgKHRoaXMudXNlcl90eXBlID09ICJQb3J0YWwiICYmIHRoaXMucG9ydGFsX3JvbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiUG9ydGFsIiAmJiB0aGlzLnBvcnRhbF9yb2xlcy5sZW5ndGggPT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiQm90IiAmJiB0aGlzLmJvdF9yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3R5cGUgPT0gIkJvdCIgJiYgdGhpcy5ib3Rfcm9sZXMubGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRfcGVybWlzc2lvbigpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciB2bSA9IHRoaXM7IC8vIGNvbnNvbGUubG9nKHRoaXMucGFnZV9ubyk7CgogICAgJCgiI3NlbGVjdGFsbCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCQodGhpcykuaXMoIjpjaGVja2VkIikpIHsKICAgICAgICAvLyAkKCdkaXY6aW5wdXQnKS5wcm9wKCdjaGVja2VkJyx0cnVlKTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5jaGVja2VkX2xpc3QgPSBbXTsKICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogICAgJCgiI2ludGVudG1vZGFsIikub24oImhpZGRlbi5icy5tb2RhbCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZtLmNsZWFyX2ZpZWxkcygpOyAvLyB2bS51c2VyX3R5cGUgPSAiUG9ydGFsIjsKCiAgICAgIHZtLnVzZXJfdHlwZV9jaGFuZ2UgPSB0cnVlOwogICAgICB2bS5zZWxlY3Rfcm9sZV9uYW1lX2Rpc2FibGUgPSBmYWxzZTsKICAgIH0pOwogICAgJCgic2VsZWN0IC5mb3JtLWNvbnRyb2wiKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7fSk7CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoX25hbWU6IGZ1bmN0aW9uIHNlYXJjaF9uYW1lKCkgewogICAgICBpZiAodGhpcy5zZWFyY2hfbmFtZSA9PT0gIiIpIHsKICAgICAgICB0aGlzLmxvYWRfcGVybWlzc2lvbigpOwogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9PSAiIikgewogICAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyX3VzZXJfdHlwZTogZnVuY3Rpb24gZmlsdGVyX3VzZXJfdHlwZSgpIHsKICAgICAgaWYgKHRoaXMuZmlsdGVyX3VzZXJfdHlwZSA9PSAiUG9ydGFsIikgewogICAgICAgIHRoaXMuaXNTaG93X3BvcnRhbF9yb2xlcyA9IHRydWU7CiAgICAgICAgdGhpcy5pc1Nob3dfYm90X3JvbGVzID0gZmFsc2U7CiAgICAgICAgdGhpcy51c2VyX3R5cGUgPSAiUG9ydGFsIjsKICAgICAgICB0aGlzLmxvYWRfcGVybWlzc2lvbigpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyX3VzZXJfdHlwZSA9PSAiQm90IikgewogICAgICAgIHRoaXMuaXNTaG93X2JvdF9yb2xlcyA9IHRydWU7CiAgICAgICAgdGhpcy5pc1Nob3dfcG9ydGFsX3JvbGVzID0gZmFsc2U7CiAgICAgICAgdGhpcy51c2VyX3R5cGUgPSAiQm90IjsKICAgICAgICB0aGlzLmxvYWRfcGVybWlzc2lvbigpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGVhcl9zZWFyY2hfbmFtZTogZnVuY3Rpb24gY2xlYXJfc2VhcmNoX25hbWUoKSB7CiAgICAgIHRoaXMuc2VhcmNoX25hbWUgPSAiIjsKICAgIH0sCiAgICByZW1vdmVfc2VsZWN0ZWRfcGVybWlzc2lvbjogZnVuY3Rpb24gcmVtb3ZlX3NlbGVjdGVkX3Blcm1pc3Npb24ocmVtb3ZlZE9wdGlvbiwgaWQpIHsKICAgICAgaWYgKHJlbW92ZWRPcHRpb24uc3ViX21lbnUgPT0gIkRhc2hib2FyZCIpIHsKICAgICAgICB0b2FzdHIud2FybmluZygiRGFzaGJvYXJkIGlzIGEgZGVmYXVsdCBwYWdlLCBpdCdzIHBlcm1pc3Npb24gY2Fubm90IGJlIHJlbW92ZWQiKTsKICAgICAgICB0aGlzLmFkZF9zZWxlY3RlZF9wZXJtaXNzaW9uKHJlbW92ZWRPcHRpb24uc3ViX21lbnUpOwogICAgICB9CiAgICB9LAogICAgYWRkX3NlbGVjdGVkX3Blcm1pc3Npb246IGZ1bmN0aW9uIGFkZF9zZWxlY3RlZF9wZXJtaXNzaW9uKHJlbW92ZWRPcHRpb24pIHsKICAgICAgdGhpcy5zZWxlY3RlZF9wZXJtaXNzaW9ucy51bnNoaWZ0KHsKICAgICAgICBzdWJfbWVudTogcmVtb3ZlZE9wdGlvbgogICAgICB9KTsKICAgIH0sCiAgICBsb2FkX3Blcm1pc3Npb246IGZ1bmN0aW9uIGxvYWRfcGVybWlzc2lvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgdGhpcy5yb2xlcyA9IFtdOwogICAgICB0aGlzLnBvcnRhbF9yb2xlcyA9IFtdOwogICAgICB0aGlzLmJvdF9yb2xlcyA9IFtdOwogICAgICB0aGlzLnBlcm1pc3Npb25zX2xpc3QgPSBbXTsKICAgICAgdGhpcy5zZWxlY3RlZF9wZXJtaXNzaW9ucyA9IFtdOwogICAgICB0aGlzLmludGVudGxpc3QgPSBbXTsKICAgICAgdGhpcy5ib3RfcGVybWlzc2lvbnNfbGlzdCA9IFtdOwogICAgICB0aGlzLnBvcnRhbF9wZXJtaXNzaW9uc19saXN0ID0gW107CiAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKCiAgICAgIGlmICghdGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpICYmIHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2Ugc2VsZWN0IGEgY29tcGFueSBuYW1lIGZyb20gdGhlIGRyb3Bkb3duIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZDsKICAgICAgICB0aGlzLmNvbXBhbnluYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuY29tcGFueW5hbWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnJvbGVfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc1Nob3c6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YVsxXS5udW1iZXJfb2Zfcm93czsKICAgICAgICAgIF90aGlzLnRvdGFsX3BhZ2VzID0gTWF0aC5jZWlsKF90aGlzLm51bWJlcl9vZl9yb3dzIC8gX3RoaXMucGVyX3BhZ2UpOwoKICAgICAgICAgIF90aGlzLnVwZGF0ZV9saXN0KHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMucG9ydGFsX3Blcm1pc3Npb25zX3VybCgpLCB7CiAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgaXNEcm9wZG93bjogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMuY29tcGxldGVfcm9sZV9saXN0ID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YVswXS5Qb3J0YWwubGVuZ3RoID4gMCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGFbMF0uUG9ydGFsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgX3RoaXMucG9ydGFsX3JvbGVzLnB1c2gocmVzcG9uc2UuZGF0YVswXS5Qb3J0YWxbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGFbMF0uQm90Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHJlc3BvbnNlLmRhdGFbMF0uQm90Lmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgIF90aGlzLmJvdF9yb2xlcy5wdXNoKHJlc3BvbnNlLmRhdGFbMF0uQm90W19pXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnBvcnRhbF9wZXJtaXNzaW9uc191cmwoKSwgewogICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzR2V0TWVudTogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMubWVudV9saXN0X2Zyb21fYXBpID0gcmVzcG9uc2UuZGF0YS5NZW51OwogICAgICAgICAgdmFyIG1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLk1lbnU7IC8vIGNvbnNvbGUubG9nKG1lc3NhZ2UpOwoKICAgICAgICAgIHZhciBtZW51ID0ge307CiAgICAgICAgICB2YXIgbWFpbl9tZW51X2xpc3QgPSBtZXNzYWdlLmZpbHRlcihmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgICAgIHJldHVybiBhcnIuSXNNYXN0ZXJNZW51ID09IHRydWUgJiYgYXJyLkVuYWJsZWQgPT0gdHJ1ZTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIG1haW5fbWVudV9saXN0X2ZpbHRlcmVkID0gW107CiAgICAgICAgICB2YXIgc3ViX21lbnVfbGlzdCA9IG1lc3NhZ2UuZmlsdGVyKGZ1bmN0aW9uIChhcnIpIHsKICAgICAgICAgICAgcmV0dXJuIGFyci5IYXNTdWJNZW51cyA9PSBmYWxzZSAmJiBhcnIuRW5hYmxlZCA9PSB0cnVlICYmIGFyci5Jc1N1Yk1lbnUgPT0gdHJ1ZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGksIG4pIHsKICAgICAgICAgICAgdmFyIG1lbnVGaWx0ZXIgPSBzaWRlYmFyaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChzaWRlYmFyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNpZGViYXIubmFtZSA9PT0gbWFpbl9tZW51X2xpc3RbaV0uTWVudUl0ZW0gJiYgQm9vbGVhbihzaWRlYmFyLnN2Z19odG1sKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAobWVudUZpbHRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgbWFpbl9tZW51X2xpc3RfZmlsdGVyZWQucHVzaChtZW51RmlsdGVyWzBdKTsKICAgICAgICAgICAgICBtZW51W21lbnVGaWx0ZXJbMF0ubmFtZV0gPSB7CiAgICAgICAgICAgICAgICB0aXRsZTogbWVudUZpbHRlclswXS5uYW1lLAogICAgICAgICAgICAgICAgbWVudV9saXN0OiBbXQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGlmIChtYWluX21lbnVfbGlzdFtpXS5IYXNTdWJNZW51cyA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgbWVudVttZW51RmlsdGVyWzBdLm5hbWVdLm1lbnVfbGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgc3ViX21lbnU6IG1lbnVGaWx0ZXJbMF0ubmFtZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gbWFpbl9tZW51X2xpc3QubGVuZ3RoOyBpIDwgbjsgaSArPSAxKSB7CiAgICAgICAgICAgIF9sb29wKGksIG4pOwogICAgICAgICAgfQoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9uID0gc3ViX21lbnVfbGlzdC5sZW5ndGg7IF9pMiA8IF9uOyBfaTIgKz0gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGogaW4gc2lkZWJhcml0ZW1zKSB7CiAgICAgICAgICAgICAgICBpZiAoc2lkZWJhcml0ZW1zW2pdLm5hbWUgPT09IHN1Yl9tZW51X2xpc3RbX2kyXS5NZW51SXRlbSAmJiBCb29sZWFuKHNpZGViYXJpdGVtc1tqXS5wYWdlX3BhdGggJiYgc2lkZWJhcml0ZW1zW2pdLm1hc3Rlcl9tZW51ID09PSBzdWJfbWVudV9saXN0W19pMl0uTWFzdGVyTWVudSkpIHsKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2lkZWJhcml0ZW1zW2pdLm5hbWUpCiAgICAgICAgICAgICAgICAgIHZhciB0ZW1wX3ZhciA9IHsKICAgICAgICAgICAgICAgICAgICBzdWJfbWVudTogc2lkZWJhcml0ZW1zW2pdLm5hbWUKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIG1lbnVbc3ViX21lbnVfbGlzdFtfaTJdLk1hc3Rlck1lbnVdLm1lbnVfbGlzdC5wdXNoKHRlbXBfdmFyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgLy8gZGVidWdnZXI7CiAgICAgICAgICB9CgogICAgICAgICAgbWVudSA9IE9iamVjdC52YWx1ZXMobWVudSk7IC8vIGNvbnNvbGUubG9nKG1lbnUpOwogICAgICAgICAgLy8gbWVudSA9IFtdOwogICAgICAgICAgLy8gdmFyIHRpdGxlID0gW107CiAgICAgICAgICAvLyB2YXIgc3VibWVudXMgPSBbXTsKICAgICAgICAgIC8vIGZvciAobGV0IGkgPSAwLCBuID0gcmVzcG9uc2UuZGF0YS5NZW51Lmxlbmd0aDsgaSA8IG47IGkgKz0gMSkgewogICAgICAgICAgLy8gICBpZiAoCiAgICAgICAgICAvLyAgICAgcmVzcG9uc2UuZGF0YS5NZW51W2ldLkhhc1N1Yk1lbnVzID09IGZhbHNlICYmCiAgICAgICAgICAvLyAgICAgcmVzcG9uc2UuZGF0YS5NZW51W2ldLklzTWFzdGVyTWVudQogICAgICAgICAgLy8gICApIHsKICAgICAgICAgIC8vICAgICBmb3IgKHZhciBqIGluIHNpZGViYXJpdGVtcykgewogICAgICAgICAgLy8gICAgICAgaWYgKHNpZGViYXJpdGVtc1tqXS5uYW1lID09PSByZXNwb25zZS5kYXRhLk1lbnVbaV0uTWVudUl0ZW0pIHsKICAgICAgICAgIC8vICAgICAgICAgdGl0bGUgPSBzaWRlYmFyaXRlbXNbal0ubmFtZTsKICAgICAgICAgIC8vICAgICAgICAgc3VibWVudXMucHVzaCh7CiAgICAgICAgICAvLyAgICAgICAgICAgc3ViX21lbnU6IHNpZGViYXJpdGVtc1tqXS5uYW1lLAogICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgIC8vICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTWVudVtpXS5FbmFibGVkKSB7CiAgICAgICAgICAvLyAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9wZXJtaXNzaW9ucy5wdXNoKHsKICAgICAgICAgIC8vICAgICAgICAgICAgIHN1Yl9tZW51OiBzaWRlYmFyaXRlbXNbal0ubmFtZSwKICAgICAgICAgIC8vICAgICAgICAgICB9KTsKICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgLy8gICAgICAgfQogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vICAgfSBlbHNlIGlmICgKICAgICAgICAgIC8vICAgICByZXNwb25zZS5kYXRhLk1lbnVbaV0uSGFzU3ViTWVudXMgPT0gdHJ1ZSAmJgogICAgICAgICAgLy8gICAgIHJlc3BvbnNlLmRhdGEuTWVudVtpXS5Jc01hc3Rlck1lbnUKICAgICAgICAgIC8vICAgKSB7CiAgICAgICAgICAvLyAgICAgZm9yICh2YXIgaiBpbiBzaWRlYmFyaXRlbXMpIHsKICAgICAgICAgIC8vICAgICAgIGlmIChzaWRlYmFyaXRlbXNbal0ubmFtZSA9PT0gcmVzcG9uc2UuZGF0YS5NZW51W2ldLk1lbnVJdGVtKSB7CiAgICAgICAgICAvLyAgICAgICAgIHRpdGxlID0gc2lkZWJhcml0ZW1zW2pdLm5hbWU7CiAgICAgICAgICAvLyAgICAgICB9CiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gICB9IGVsc2UgaWYgKAogICAgICAgICAgLy8gICAgIHJlc3BvbnNlLmRhdGEuTWVudVtpXS5IYXNTdWJNZW51cyA9PSBmYWxzZSAmJgogICAgICAgICAgLy8gICAgIHJlc3BvbnNlLmRhdGEuTWVudVtpXS5Jc1N1Yk1lbnUKICAgICAgICAgIC8vICAgKSB7CiAgICAgICAgICAvLyAgICAgZm9yICh2YXIgaiBpbiBzaWRlYmFyaXRlbXMpIHsKICAgICAgICAgIC8vICAgICAgIGlmIChzaWRlYmFyaXRlbXNbal0ubmFtZSA9PT0gcmVzcG9uc2UuZGF0YS5NZW51W2ldLk1lbnVJdGVtKSB7CiAgICAgICAgICAvLyAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLk1lbnVbaV0uRW5hYmxlZCkgewogICAgICAgICAgLy8gICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfcGVybWlzc2lvbnMucHVzaCh7CiAgICAgICAgICAvLyAgICAgICAgICAgICBzdWJfbWVudTogc2lkZWJhcml0ZW1zW2pdLm5hbWUsCiAgICAgICAgICAvLyAgICAgICAgICAgfSk7CiAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgIC8vICAgICAgICAgc3VibWVudXMucHVzaCh7CiAgICAgICAgICAvLyAgICAgICAgICAgc3ViX21lbnU6IHNpZGViYXJpdGVtc1tqXS5uYW1lLAogICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgIC8vICAgICAgIH0KICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgIH0KICAgICAgICAgIC8vICAgaWYgKGkgPT09IG4gLSAxKSB7CiAgICAgICAgICAvLyAgICAgbWVudS5wdXNoKHsKICAgICAgICAgIC8vICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgIC8vICAgICAgIG1lbnVfbGlzdDogc3VibWVudXMsCiAgICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgICAvLyAgICAgdGl0bGUgPSBbXTsKICAgICAgICAgIC8vICAgICBzdWJtZW51cyA9IFtdOwogICAgICAgICAgLy8gICB9IGVsc2UgaWYgKAogICAgICAgICAgLy8gICAgIGkgPCBuIC0gMSAmJgogICAgICAgICAgLy8gICAgIHJlc3BvbnNlLmRhdGEuTWVudVtpICsgMV0uSGFzU3ViTWVudXMgPT0gdHJ1ZSAmJgogICAgICAgICAgLy8gICAgIHJlc3BvbnNlLmRhdGEuTWVudVtpICsgMV0uSXNNYXN0ZXJNZW51CiAgICAgICAgICAvLyAgICkgewogICAgICAgICAgLy8gICAgIG1lbnUucHVzaCh7CiAgICAgICAgICAvLyAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAvLyAgICAgICBtZW51X2xpc3Q6IHN1Ym1lbnVzLAogICAgICAgICAgLy8gICAgIH0pOwogICAgICAgICAgLy8gICAgIHRpdGxlID0gW107CiAgICAgICAgICAvLyAgICAgc3VibWVudXMgPSBbXTsKICAgICAgICAgIC8vICAgfQogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gY29uc29sZS5sb2cobWVudSk7CgogICAgICAgICAgX3RoaXMucG9ydGFsX3Blcm1pc3Npb25zX2xpc3QgPSBtZW51OwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmdldF90YXNrX2xpc3QoKSwgewogICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGlzR2V0TWVudTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBfdGhpcy5ib3RfcGVybWlzc2lvbnNfbGlzdC5wdXNoKHsKICAgICAgICAgICAgcGVybWlzc2lvbnM6IHJlc3BvbnNlLmRhdGFbaV0sCiAgICAgICAgICAgIHRvX2JlX2Rpc3BsYXllZDogcmVzcG9uc2UuZGF0YVtpXQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCBfdGhpcy5ib3RfcGVybWlzc2lvbnNfbGlzdC5sZW5ndGg7IF9pMysrKSB7CiAgICAgICAgICBfdGhpcy5ib3RfcGVybWlzc2lvbnNfbGlzdFtfaTNdLnRvX2JlX2Rpc3BsYXllZCA9IF90aGlzLmJvdF9wZXJtaXNzaW9uc19saXN0W19pM10udG9fYmVfZGlzcGxheWVkLnJlcGxhY2UoL18vZywgIiAiKS50b0xvd2VyQ2FzZSgpLnNwbGl0KCIgIikubWFwKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zdWJzdHJpbmcoMSk7CiAgICAgICAgICB9KS5qb2luKCIgIik7CiAgICAgICAgICBfdGhpcy5ib3RfcGVybWlzc2lvbnNfbGlzdFtfaTNdLnRvX2JlX2Rpc3BsYXllZCA9IF90aGlzLmJvdF9wZXJtaXNzaW9uc19saXN0W19pM10udG9fYmVfZGlzcGxheWVkLnJlcGxhY2UoL0Zvcm0vZywgIiIpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMudXBkYXRlX2JvdF9yb2xlcygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmICh0aGlzLmZpbHRlcl91c2VyX3R5cGUgPT0gIlBvcnRhbCIpIHsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5wb3J0YWxfcGVybWlzc2lvbnNfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc1Nob3c6IHRoaXMuaXNTaG93X3BvcnRhbF9yb2xlcywKICAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgIF90aGlzLnJvbGVzID0gW107CiAgICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGEuUm9sZVBlcm1pc3Npb25EYXRhOwoKICAgICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgewogICAgICAgICAgICB2YXIgcGVybWlzc2lvbnMgPSBsaXN0W2ldLk1lbnUuZmlsdGVyKGZ1bmN0aW9uIChtZW51bGlzdCkgewogICAgICAgICAgICAgIGlmIChtZW51bGlzdC5FbmFibGVkICYmICFtZW51bGlzdC5IYXNTdWJNZW51cykgewogICAgICAgICAgICAgICAgcmV0dXJuIG1lbnVsaXN0Lk1lbnVJdGVtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBwZXJtX2xpc3QgPSBbXTsKCiAgICAgICAgICAgIGZvciAodmFyIGogaW4gcGVybWlzc2lvbnMpIHsKICAgICAgICAgICAgICBwZXJtX2xpc3QucHVzaChwZXJtaXNzaW9uc1tqXS5NZW51SXRlbSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzLnJvbGVzLnB1c2goewogICAgICAgICAgICAgIHVzZXJfcm9sZTogbGlzdFtpXS5Sb2xlLAogICAgICAgICAgICAgIHVzZXI6IGxpc3RbaV0uVXNlclR5cGUsCiAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IHBlcm1fbGlzdAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZWNvdW50OwoKICAgICAgICAgIF90aGlzLnNldHBhZ2luYXRpb24oMSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuc2hvd19pbnRlbnRfdXJsKCksIHsKICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICBnZXRfaW50ZW50czogdHJ1ZSwKICAgICAgICBzaG93aW50ZW50OiAiVHJ1ZSIKICAgICAgfSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgX3RoaXMuaW50ZW50bGlzdC5wdXNoKHsKICAgICAgICAgICAgLy8gcGVybWlzc2lvbnM6IHJlc3BvbnNlLmRhdGFbaV0ucmVwbGFjZSh0aGlzLmNvbXBhbnlpZCArICJfIiwgIiIpLAogICAgICAgICAgICAvLyB0b19iZV9kaXNwbGF5ZWQ6IHJlc3BvbnNlLmRhdGFbaV0ucmVwbGFjZSh0aGlzLmNvbXBhbnlpZCArICJfIiwgIiIpLAogICAgICAgICAgICBwZXJtaXNzaW9uczogcmVzcG9uc2UuZGF0YVtpXSwKICAgICAgICAgICAgdG9fYmVfZGlzcGxheWVkOiByZXNwb25zZS5kYXRhW2ldCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHN2Z19lbmFibGU6IGZ1bmN0aW9uIHN2Z19lbmFibGUodmFsdWUpIHsKICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnNlbGVjdGVkX3JvbGUpIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZF9yb2xlW2ldLnN1Yl9tZW51ID09IHZhbHVlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAiZGlzcGxheTpub25lIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZF9yb2xlczogZnVuY3Rpb24gc2VsZWN0ZWRfcm9sZXMoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09ICJhbGwiKSB7CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMucm9sZXM7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IHRlbXA7CiAgICAgICAgfSBlbHNlIGlmICghZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gW107CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICB2YXIgdmFsX2luZGV4ID0gdGhpcy5jaGVja2VkX2xpc3QuaW5kZXhPZih0aGlzLnJvbGVzW2luZGV4XSk7CiAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMucm9sZXNbaW5kZXhdOwoKICAgICAgICAgIGlmICh2YWxfaW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5jaGVja2VkX2xpc3QucHVzaCh0ZW1wKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IGZhbHNlKSB7CiAgICAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwoKICAgICAgICAgIGlmIChzZWxlY3RhbGwuY2hlY2tlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIHNlbGVjdGFsbC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLmNoZWNrZWRfbGlzdC5maWx0ZXIoZnVuY3Rpb24gKHJvbGVzKSB7CiAgICAgICAgICAgIHJldHVybiByb2xlLnJvbGUgIT09IGluZGV4OwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IHRlbXA7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcm9sZV9tb2RhbDogZnVuY3Rpb24gcm9sZV9tb2RhbCh0eXBlKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGRlYnVnZ2VyOwogICAgICAvLyBpZih0eXBlID09ICd0b2dnbGUnKXsKCiAgICAgIGlmICh0aGlzLnVzZXJfdHlwZSA9PT0gbnVsbCkgey8vIHRvYXN0ci5lcnJvcigiUGxlYXNlIHNlbGVjdCBlaXRoZXIgb2YgdGhlIFVzZXIgVHlwZXMiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJvbGVfbGlzdCA9IHRoaXMuY29tcGxldGVfcm9sZV9saXN0W3RoaXMudXNlcl90eXBlXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXNlcl90eXBlID09ICJQb3J0YWwiKSB7CiAgICAgICAgaWYgKHRoaXMucG9ydGFsX3JvbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMucm9sZV9saXN0ID0gdGhpcy5jb21wbGV0ZV9yb2xlX2xpc3RbIlBvcnRhbCJdOwogICAgICAgICAgdGhpcy5wZXJtaXNzaW9uc19saXN0ID0gdGhpcy5wb3J0YWxfcGVybWlzc2lvbnNfbGlzdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJObyBSb2xlcyBBZGRlZCBmb3IgUG9ydGFsIFVzZXIgVHlwZS4iKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3R5cGUgPT0gIkJvdCIpIHsKICAgICAgICBpZiAodGhpcy5ib3Rfcm9sZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5yb2xlX2xpc3QgPSB0aGlzLmNvbXBsZXRlX3JvbGVfbGlzdFsiQm90Il07CiAgICAgICAgICB0aGlzLnBlcm1pc3Npb25zX2xpc3QgPSBbewogICAgICAgICAgICBUeXBlOiAiQWN0aW9ucyIsCiAgICAgICAgICAgIERldGFpbHM6IHRoaXMuYm90X3Blcm1pc3Npb25zX2xpc3QKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgVHlwZTogIkludGVudHMiLAogICAgICAgICAgICBEZXRhaWxzOiB0aGlzLmludGVudGxpc3QKICAgICAgICAgIH1dOwogICAgICAgICAgdGhpcy5zZWxlY3RlZF9wZXJtaXNzaW9ucyA9ICIiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICB0ZXh0OiAiTm8gUm9sZXMgQWRkZWQgZm9yIEJvdCBVc2VyIFR5cGUuIFBsZWFzZSBBZGQgYSBSb2xlIGZyb20gdGhlICdSb2xlcycgUGFnZSB0byBjb250aW51ZSBhZGRpbmcgUGVybWlzc2lvbnMuIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgdGltZXI6IDYwMDAKICAgICAgICAgIH0pOyAvLyB0b2FzdHIud2FybmluZygiTm8gUm9sZXMgQWRkZWQgZm9yIEJvdCBVc2VyIFR5cGUuIFBsZWFzZSBBZGQgYSBSb2xlIGZyb20gdGhlICdSb2xlcycgUGFnZSB0byBjb250aW51ZSBhZGRpbmcgUGVybWlzc2lvbnMuIik7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodHlwZSA9PSAib3BlbiIpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkX3JvbGUgPSAiIjsKICAgICAgICB0aGlzLnNlbGVjdGVkX3Blcm1pc3Npb25zID0gW107CiAgICAgICAgdGhpcy51c2VyX3R5cGVfY2hhbmdlID0gZmFsc2U7IC8vIGlmICh0aGlzLnBvcnRhbF9yb2xlcy5sZW5ndGggPiAwIHx8IHRoaXMuYm90X3JvbGVzLmxlbmd0aCA+IDApIHsKCiAgICAgICAgaWYgKHRoaXMuYm90X3JvbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIHRoaXMuY2xlYXJfZmllbGRzKCkKICAgICAgICAgICQoIiNpbnRlbnRtb2RhbCIpLm1vZGFsKCJzaG93Iik7CiAgICAgICAgfSBlbHNlIHsvLyB0b2FzdHIuZXJyb3IoCiAgICAgICAgICAvLyAgICJQbGVhc2UgQWRkIGEgUm9sZSBmcm9tIHRoZSAnUm9sZXMnIFBhZ2UgdG8gY29udGludWUgYWRkaW5nIFBlcm1pc3Npb25zIgogICAgICAgICAgLy8gKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVfc2VsZWN0ZWQ6IGZ1bmN0aW9uIGRlbGV0ZV9zZWxlY3RlZCgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJvbGVsaXN0ID0gW10sCiAgICAgICAgICByZXN0cmljdGlvbmxpc3QgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5yb2xlcykgewogICAgICAgIHJvbGVsaXN0LnB1c2godGhpcy5yb2xlc1tpbmRleF0ucm9sZSk7CiAgICAgICAgcmVzdHJpY3Rpb25saXN0LnB1c2godGhpcy5yb2xlc1tpbmRleF0ucGVybWlzc2lvbnMpOwogICAgICB9CgogICAgICB0aGlzLmRlbGV0ZV9xbnNfYXBpKHJvbGVsaXN0LCByZXN0cmljdGlvbmxpc3QpOwogICAgfSwKICAgIGRlbGV0ZV9yb2xlOiBmdW5jdGlvbiBkZWxldGVfcm9sZShpbmRleCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSwKICAgIGVkaXRfbW9kYWw6IGZ1bmN0aW9uIGVkaXRfbW9kYWwoaW5kZXgpIHsKICAgICAgdGhpcy51c2VyX3R5cGVfY2hhbmdlID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0X3JvbGVfbmFtZV9kaXNhYmxlID0gdHJ1ZTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3BvcnRhbF9ib3giKS5kaXNhYmxlZCA9IHRydWU7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNib3RfYm94IikuZGlzYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLnNlbGVjdGVkX3JvbGUgPSB0aGlzLnJvbGVzW2luZGV4XS51c2VyX3JvbGU7IC8vIGNvbnNvbGUubG9nKHRoaXMucm9sZXNbaW5kZXhdLnVzZXJfcm9sZSk7CgogICAgICB0aGlzLnVzZXJfdHlwZSA9IHRoaXMucm9sZXNbaW5kZXhdLnVzZXIucmVwbGFjZSgiIFVzZXIiLCAiIik7CiAgICAgIHRoaXMuc2VsZWN0ZWRfcGVybWlzc2lvbnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiQm90IikgewogICAgICAgIC8vIHRoaXMucGVybWlzc2lvbnNfbGlzdCA9IHRoaXMuYm90X3Blcm1pc3Npb25zX2xpc3Q7CiAgICAgICAgdGhpcy5wZXJtaXNzaW9uc19saXN0ID0gW3sKICAgICAgICAgIFR5cGU6ICJBY3Rpb25zIiwKICAgICAgICAgIERldGFpbHM6IHRoaXMuYm90X3Blcm1pc3Npb25zX2xpc3QKICAgICAgICB9LCB7CiAgICAgICAgICBUeXBlOiAiSW50ZW50cyIsCiAgICAgICAgICBEZXRhaWxzOiB0aGlzLmludGVudGxpc3QKICAgICAgICB9XTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiUG9ydGFsIikgewogICAgICAgIHRoaXMucGVybWlzc2lvbnNfbGlzdCA9IHRoaXMucG9ydGFsX3Blcm1pc3Npb25zX2xpc3Q7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogaW4gdGhpcy5yb2xlc1tpbmRleF0ucGVybWlzc2lvbnMpIHsKICAgICAgICBpZiAodGhpcy51c2VyX3R5cGUgPT0gIkJvdCIpIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfcGVybWlzc2lvbnMucHVzaCh7CiAgICAgICAgICAgIHBlcm1pc3Npb25zOiB0aGlzLnJvbGVzW2luZGV4XS5vcmlnaW5hbF9wZXJtaXNzaW9uc1tqXSwKICAgICAgICAgICAgdG9fYmVfZGlzcGxheWVkOiB0aGlzLnJvbGVzW2luZGV4XS5wZXJtaXNzaW9uc1tqXQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiUG9ydGFsIikgewogICAgICAgICAgdGhpcy5zZWxlY3RlZF9wZXJtaXNzaW9ucy5wdXNoKHsKICAgICAgICAgICAgc3ViX21lbnU6IHRoaXMucm9sZXNbaW5kZXhdLnBlcm1pc3Npb25zW2pdCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMucm9sZV9saXN0ID0gdGhpcy5jb21wbGV0ZV9yb2xlX2xpc3RbdGhpcy51c2VyX3R5cGVdOwogICAgfSwKICAgIHBhZ2VfcmVxdWlyZTogZnVuY3Rpb24gcGFnZV9yZXF1aXJlKHBhZ2UpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09ICIiKSB7CiAgICAgICAgICBpZiAodGhpcy5maWx0ZXJfdXNlcl90eXBlID09ICJQb3J0YWwiKSB7CiAgICAgICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYWdlID09ICIuLi5sIikgewogICAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7IC8vIHRoaXMucGFnZV9ubyA9IHBhZ2U7CgogICAgICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnBvcnRhbF9wZXJtaXNzaW9uc191cmwoKSwgewogICAgICAgICAgICAgIHJvbGU6IHRoaXMudXNlcl9yb2xlLAogICAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzU2hvdzogdGhpcy5pc1Nob3dfcG9ydGFsX3JvbGVzLAogICAgICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzMi5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEuUm9sZVBlcm1pc3Npb25EYXRhLmxlbmd0aDsKICAgICAgICAgICAgICBfdGhpczIudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2Vjb3VudDsKCiAgICAgICAgICAgICAgX3RoaXMyLnNldHBhZ2luYXRpb24oX3RoaXMyLnBhZ2Vfbm8pOwoKICAgICAgICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGEuUm9sZVBlcm1pc3Npb25EYXRhOwogICAgICAgICAgICAgIF90aGlzMi5yb2xlcyA9IFtdOwoKICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGxpc3QpIHsKICAgICAgICAgICAgICAgIHZhciBwZXJtaXNzaW9ucyA9IGxpc3RbaV0uTWVudS5maWx0ZXIoZnVuY3Rpb24gKG1lbnVsaXN0KSB7CiAgICAgICAgICAgICAgICAgIGlmIChtZW51bGlzdC5FbmFibGVkICYmICFtZW51bGlzdC5IYXNTdWJNZW51cykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtZW51bGlzdC5NZW51SXRlbTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgcGVybV9saXN0ID0gW107CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBwZXJtaXNzaW9ucykgewogICAgICAgICAgICAgICAgICBwZXJtX2xpc3QucHVzaChwZXJtaXNzaW9uc1tqXS5NZW51SXRlbSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLnJvbGVzLnB1c2goewogICAgICAgICAgICAgICAgICB1c2VyX3JvbGU6IGxpc3RbaV0uUm9sZSwKICAgICAgICAgICAgICAgICAgdXNlcjogbGlzdFtpXS5Vc2VyVHlwZSwKICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IHBlcm1fbGlzdAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpczIudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2Vjb3VudDsKCiAgICAgICAgICAgICAgX3RoaXMyLnNldHBhZ2luYXRpb24oX3RoaXMyLnBhZ2Vfbm8pOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyX3VzZXJfdHlwZSA9PSAiQm90IikgewogICAgICAgICAgICBpZiAocGFnZSA9PSAiLi4ucyIpIHsKICAgICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAiLi4ubCIpIHsKICAgICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKHRoaXMudG90YWxfcGFnZXMgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2VkaXRfYm90X3JvbGUoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIGlzU2hvdzogdGhpcy5pc1Nob3dfYm90X3JvbGVzLAogICAgICAgICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzMi50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZWNvdW50OwoKICAgICAgICAgICAgICBfdGhpczIuc2V0cGFnaW5hdGlvbihfdGhpczIucGFnZV9ubyk7CgogICAgICAgICAgICAgIF90aGlzMi5yb2xlcyA9IFtdOwoKICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGEuQm90Um9sZVBlcm1pc3Npb25EYXRhKSB7CiAgICAgICAgICAgICAgICAvLyBsZXQgYm90Um9sZXMgPSB0aGlzLmJvdF9yb2xlcy5tYXAoKHsgcm9sZSB9KSA9PiB7CiAgICAgICAgICAgICAgICAvLyAgIHJldHVybiByb2xlOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvLyBpZiAoYm90Um9sZXMuaW5jbHVkZXMoaSkpIHsKICAgICAgICAgICAgICAgIGlmIChfdGhpczIuYm90X3JvbGVzLmluY2x1ZGVzKGkpKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5yb2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB1c2VyOiAiQm90IFVzZXIiLAogICAgICAgICAgICAgICAgICAgIHVzZXJfcm9sZTogIiIuY29uY2F0KGkpLAogICAgICAgICAgICAgICAgICAgIGlucHV0X2VuYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uczogcmVzcG9uc2UuZGF0YS5Cb3RSb2xlUGVybWlzc2lvbkRhdGFbaV0ubWFwKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMucmVwbGFjZSgvXy9nLCAiICIpLnRvTG93ZXJDYXNlKCkuc3BsaXQoIiAiKS5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnN1YnN0cmluZygxKTsKICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oIiAiKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbF9wZXJtaXNzaW9uczogcmVzcG9uc2UuZGF0YS5Cb3RSb2xlUGVybWlzc2lvbkRhdGFbaV0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpczIudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2Vjb3VudDsKCiAgICAgICAgICAgICAgX3RoaXMyLnNldHBhZ2luYXRpb24oX3RoaXMyLnBhZ2Vfbm8pOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIi4uLmwiKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9ubyA9IHBhZ2U7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMucG9ydGFsX3Blcm1pc3Npb25zX3VybCgpLCB7CiAgICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgaXNzZWFyY2g6IHRydWUsCiAgICAgICAgICAgIGtleTogdGhpcy5zZWFyY2hfbmFtZSwKICAgICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubwogICAgICAgICAgfSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gInRva2VuIGludmFsaWQiICYmIHJlc3BvbnNlLmRhdGEgIT0gbnVsbCAmJiByZXNwb25zZS5kYXRhLk1TRyAhPSAiTm8gUmVzdWx0cyBGb3VuZCIgJiYgcmVzcG9uc2UuZGF0YS5NU0cgIT0gIkludHJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICAgIHZhciBsaXN0ID0gcmVzcG9uc2UuZGF0YS5Sb2xlUGVybWlzc2lvbkRhdGE7CiAgICAgICAgICAgICAgX3RoaXMyLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5Sb2xlUGVybWlzc2lvbkRhdGEubGVuZ3RoOwogICAgICAgICAgICAgIF90aGlzMi50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZV9jb3VudDsKCiAgICAgICAgICAgICAgX3RoaXMyLnNldHBhZ2luYXRpb24oX3RoaXMyLnBhZ2Vfbm8pOwoKICAgICAgICAgICAgICBfdGhpczIucm9sZXMgPSBbXTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBsaXN0KSB7CiAgICAgICAgICAgICAgICB2YXIgcGVybWlzc2lvbnMgPSBsaXN0W2ldLk1lbnUuZmlsdGVyKGZ1bmN0aW9uIChtZW51bGlzdCkgewogICAgICAgICAgICAgICAgICBpZiAobWVudWxpc3QuRW5hYmxlZCAmJiAhbWVudWxpc3QuSGFzU3ViTWVudXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVudWxpc3QuTWVudUl0ZW07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdmFyIHBlcm1fbGlzdCA9IFtdOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gcGVybWlzc2lvbnMpIHsKICAgICAgICAgICAgICAgICAgcGVybV9saXN0LnB1c2gocGVybWlzc2lvbnNbal0uTWVudUl0ZW0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMi5yb2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgdXNlcl9yb2xlOiBsaXN0W2ldLlJvbGUsCiAgICAgICAgICAgICAgICAgIHVzZXI6IGxpc3RbaV0uVXNlclR5cGUsCiAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBwZXJtX2xpc3QKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAvLyBlbHNlIGlmKHJlc3BvbnNlLmRhdGEuTVNHPT0nTm8gUmVzdWx0cyBGb3VuZCcpewogICAgICAgICAgICAvLyAgIHRvYXN0ci5lcnJvcigiTm8gcm9sZSBmb3VuZCIpOwogICAgICAgICAgICAvLyAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAvLyAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgLy8gICAgIH0sIDI1MDApOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIC8vIGVsc2UgaWYocmVzcG9uc2UuZGF0YS5NU0c9PSdJbnRybmFsIFNlcnZlciBFcnJvcicpewogICAgICAgICAgICAvLyAgIHRvYXN0ci5lcnJvcigiSW50cm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIC8vICAgICB9LCAyNTAwKTsKICAgICAgICAgICAgLy8gfQoKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2F2ZV9yb2xlOiBmdW5jdGlvbiBzYXZlX3JvbGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRfcm9sZSA9PSAiIiB8fCB0aGlzLnNlbGVjdGVkX3Blcm1pc3Npb25zLmxlbmd0aCA9PSAwKSB7fSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkX3JvbGUgPT0gIkFkbWluIikgewogICAgICAgIHRoaXMuY2xlYXJfZmllbGRzKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3R5cGUgPT0gIlBvcnRhbCIpIHsKICAgICAgICB2YXIgc2VsZWN0ZWRfbWVudSA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuc2VsZWN0ZWRfcGVybWlzc2lvbnMpIHsKICAgICAgICAgIHNlbGVjdGVkX21lbnUucHVzaCh0aGlzLnNlbGVjdGVkX3Blcm1pc3Npb25zW2ldLnN1Yl9tZW51KTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tZW51X2xpc3RfZnJvbV9hcGkpIHsKICAgICAgICAgIGlmIChzZWxlY3RlZF9tZW51LmluY2x1ZGVzKHRoaXMubWVudV9saXN0X2Zyb21fYXBpW2ldLk1lbnVJdGVtKSkgdGhpcy5tZW51X2xpc3RfZnJvbV9hcGlbaV0uRW5hYmxlZCA9IHRydWU7ZWxzZSB0aGlzLm1lbnVfbGlzdF9mcm9tX2FwaVtpXS5FbmFibGVkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5wb3J0YWxfcGVybWlzc2lvbnNfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlpZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBpc0VkaXQ6IHRydWUsCiAgICAgICAgICByb2xlX25hbWU6IHRoaXMuc2VsZWN0ZWRfcm9sZSwKICAgICAgICAgIHVzZXJfdHlwZTogdGhpcy51c2VyX3R5cGUgKyAiIFVzZXIiLAogICAgICAgICAgbWVudTogdGhpcy5tZW51X2xpc3RfZnJvbV9hcGkKICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJVc2VyIFJvbGUgRWRpdGVkIikgewogICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygiVXNlciBQZXJtaXNzaW9ucyBoYXZlIGJlZW4gdXBkYXRlZC4gVGhlIHVwZGF0ZWQgcGVybWlzc2lvbnMgd2lsbCBiZSBhdmFpbGFibGUgYWZ0ZXIgbmV4dCBsb2dpbi4iKTsKICAgICAgICAgIH0KCiAgICAgICAgICAkKCIjaW50ZW50bW9kYWwiKS5tb2RhbCgiaGlkZSIpOwoKICAgICAgICAgIF90aGlzMy5sb2FkX3Blcm1pc3Npb24oKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIF90aGlzMy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAiQm90IikgewogICAgICAgIHZhciBzZWxlY3RlZF9tZW51ID0gW107CgogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5zZWxlY3RlZF9wZXJtaXNzaW9ucykgewogICAgICAgICAgc2VsZWN0ZWRfbWVudS5wdXNoKHRoaXMuc2VsZWN0ZWRfcGVybWlzc2lvbnNbaV0ucGVybWlzc2lvbnMpOwogICAgICAgIH0KCiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2VkaXRfYm90X3JvbGUoKSwgewogICAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGJvdF9yb2xlX25hbWU6IHRoaXMuc2VsZWN0ZWRfcm9sZSwKICAgICAgICAgIHBlcm1pc3Npb25fbGlzdDogc2VsZWN0ZWRfbWVudQogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlF1ZXJ5IEV4ZWN1dGVkIFN1Y2Nlc3NmdWxseSIpIHsKICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoIlVzZXIgUGVybWlzc2lvbnMgaGF2ZSBiZWVuIHVwZGF0ZWQuIFRoZSB1cGRhdGVkIHBlcm1pc3Npb25zIHdpbGwgYmUgYXZhaWxhYmxlIGFmdGVyIG5leHQgbG9naW4uIik7CgogICAgICAgICAgICBfdGhpczMubG9hZF9wZXJtaXNzaW9uKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgIH0KCiAgICAgICAgICAkKCIjaW50ZW50bW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXMzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZWRpdF9yZXN0cmljdGlvbnM6IGZ1bmN0aW9uIGVkaXRfcmVzdHJpY3Rpb25zKGluZGV4KSB7CiAgICAgIGlmICh0aGlzLnJvbGVzW2luZGV4XS51c2VyICE9ICIiKSB7CiAgICAgICAgdGhpcy5yb2xlc1tpbmRleF0uaW5wdXRfZW5hYmxlID0gIXRoaXMucm9sZXNbaW5kZXhdLmlucHV0X2VuYWJsZTsKICAgICAgfQoKICAgICAgdGhpcy5lZGl0ID0gdHJ1ZTsKICAgIH0sCiAgICB1cGRhdGVfbGlzdDogZnVuY3Rpb24gdXBkYXRlX2xpc3QocmVzcG9uc2UpIHsKICAgICAgLy8gdGhpcy5yb2xlcyA9IFtdOwogICAgICB2YXIgaW5wdXQ7IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQoKICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5yZXN0cmljdGlvbmxpc3QpIHsKICAgICAgICBpZiAocmVzcG9uc2UucmVzdHJpY3Rpb25saXN0W2ldID09ICIiKSB7CiAgICAgICAgICBpbnB1dCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlucHV0ID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnJvbGVzLnB1c2goewogICAgICAgICAgdXNlcjogcmVzcG9uc2UucmVzdHJpY3Rpb25saXN0W2ldLAogICAgICAgICAgcm9sZTogcmVzcG9uc2Uucm9sZWxpc3RbaV0sCiAgICAgICAgICBpbnB1dF9lbmFibGU6IGlucHV0CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVfYm90X3JvbGVzOiBmdW5jdGlvbiB1cGRhdGVfYm90X3JvbGVzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmZpbHRlcl91c2VyX3R5cGUgPT0gIkJvdCIpIHsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5hZGRfZWRpdF9ib3Rfcm9sZSgpLCB7CiAgICAgICAgICBjb21wYW55aWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgaXNTaG93OiB0aGlzLmlzU2hvd19ib3Rfcm9sZXMsCiAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubwogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgX3RoaXM0LnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdlY291bnQ7CgogICAgICAgICAgX3RoaXM0LnNldHBhZ2luYXRpb24oX3RoaXM0LnBhZ2Vfbm8pOwoKICAgICAgICAgIGZvciAodmFyIGkgaW4gcmVzcG9uc2UuZGF0YS5Cb3RSb2xlUGVybWlzc2lvbkRhdGEpIHsKICAgICAgICAgICAgLy8gbGV0IGJvdFJvbGVzID0gdGhpcy5ib3Rfcm9sZXMubWFwKCh7IHJvbGUgfSkgPT4gewogICAgICAgICAgICAvLyAgIHJldHVybiByb2xlOwogICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgLy8gaWYgKGJvdFJvbGVzLmluY2x1ZGVzKGkpKSB7CiAgICAgICAgICAgIGlmIChfdGhpczQuYm90X3JvbGVzLmluY2x1ZGVzKGkpKSB7CiAgICAgICAgICAgICAgX3RoaXM0LnJvbGVzLnB1c2goewogICAgICAgICAgICAgICAgdXNlcjogIkJvdCBVc2VyIiwKICAgICAgICAgICAgICAgIHVzZXJfcm9sZTogIiIuY29uY2F0KGkpLAogICAgICAgICAgICAgICAgaW5wdXRfZW5hYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IHJlc3BvbnNlLmRhdGEuQm90Um9sZVBlcm1pc3Npb25EYXRhW2ldLm1hcChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXMucmVwbGFjZSgvXy9nLCAiICIpLnRvTG93ZXJDYXNlKCkuc3BsaXQoIiAiKS5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc3Vic3RyaW5nKDEpOwogICAgICAgICAgICAgICAgICB9KS5qb2luKCIgIik7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG9yaWdpbmFsX3Blcm1pc3Npb25zOiByZXNwb25zZS5kYXRhLkJvdFJvbGVQZXJtaXNzaW9uRGF0YVtpXQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM0LnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdlY291bnQ7CgogICAgICAgICAgX3RoaXM0LnNldHBhZ2luYXRpb24oX3RoaXM0LnBhZ2Vfbm8pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXM0LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFnaW5hdGlvbl9jbGFzczogZnVuY3Rpb24gcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgICBpZiAoaW5kZXggPT0gdGhpcy5wYWdlX25vKSB7CiAgICAgICAgcmV0dXJuICIgYWN0aXZlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhcl9maWVsZHM6IGZ1bmN0aW9uIGNsZWFyX2ZpZWxkcygpIHsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3BvcnRhbF9ib3giKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYm90X2JveCIpLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0ZWRfcm9sZSA9ICIiOwogICAgICB0aGlzLnNlbGVjdGVkX3Blcm1pc3Npb25zID0gW107CiAgICAgICQoIiNpbnRlbnRtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICB9LAogICAgY2FsbHNlYXJjaDogZnVuY3Rpb24gY2FsbHNlYXJjaCgpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgdGhpcy5zZWFyY2hfcHJvZHVjdCgpOwogICAgICB9CiAgICB9LAogICAgc2VhcmNoX3Byb2R1Y3Q6IGZ1bmN0aW9uIHNlYXJjaF9wcm9kdWN0KCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9ICIiKSB7CiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnBvcnRhbF9wZXJtaXNzaW9uc191cmwoKSwgewogICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgICBwYWdlX25vOiAxCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczUuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gInRva2VuIGludmFsaWQiICYmIHJlc3BvbnNlLmRhdGEgIT0gbnVsbCAmJiByZXNwb25zZS5kYXRhLk1TRyAhPSAiTm8gUmVzdWx0cyBGb3VuZCIgJiYgcmVzcG9uc2UuZGF0YS5NU0cgIT0gIkludHJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGEuUm9sZVBlcm1pc3Npb25EYXRhOwogICAgICAgICAgICBfdGhpczUubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLlJvbGVQZXJtaXNzaW9uRGF0YS5sZW5ndGg7CiAgICAgICAgICAgIF90aGlzNS50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZV9jb3VudDsKICAgICAgICAgICAgX3RoaXM1LnBhZ2Vfbm8gPSAxOwoKICAgICAgICAgICAgX3RoaXM1LnNldHBhZ2luYXRpb24oX3RoaXM1LnBhZ2Vfbm8pOwoKICAgICAgICAgICAgX3RoaXM1LnJvbGVzID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpIGluIGxpc3QpIHsKICAgICAgICAgICAgICB2YXIgcGVybWlzc2lvbnMgPSBsaXN0W2ldLk1lbnUuZmlsdGVyKGZ1bmN0aW9uIChtZW51bGlzdCkgewogICAgICAgICAgICAgICAgaWYgKG1lbnVsaXN0LkVuYWJsZWQgJiYgIW1lbnVsaXN0Lkhhc1N1Yk1lbnVzKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBtZW51bGlzdC5NZW51SXRlbTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB2YXIgcGVybV9saXN0ID0gW107CgogICAgICAgICAgICAgIGZvciAodmFyIGogaW4gcGVybWlzc2lvbnMpIHsKICAgICAgICAgICAgICAgIHBlcm1fbGlzdC5wdXNoKHBlcm1pc3Npb25zW2pdLk1lbnVJdGVtKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzNS5yb2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgIHVzZXJfcm9sZTogbGlzdFtpXS5Sb2xlLAogICAgICAgICAgICAgICAgdXNlcjogbGlzdFtpXS5Vc2VyVHlwZSwKICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBwZXJtX2xpc3QKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLk1TRyA9PSAiTm8gUmVzdWx0cyBGb3VuZCIpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJObyByb2xlIGZvdW5kIik7CgogICAgICAgICAgICBfdGhpczUubG9hZF9wZXJtaXNzaW9uKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJJbnRybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRybmFsIFNlcnZlciBFcnJvciIpOwoKICAgICAgICAgICAgX3RoaXM1LmxvYWRfcGVybWlzc2lvbigpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXM1LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRvYXN0ci5lcnJvcigiRW50ZXIgcHJvcGVyIGRhdGEgZm9yIHNlYXJjaGluZyIpOwogICAgICB9CiAgICB9LAogICAgc2V0cGFnaW5hdGlvbjogZnVuY3Rpb24gc2V0cGFnaW5hdGlvbihwYWdlX25vKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheSA9IFtdOwoKICAgICAgaWYgKHRoaXMudG90YWxfcGFnZXMgPD0gNykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50b3RhbF9wYWdlczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhZ2Vfbm8gPT0gMSkgewogICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IDQ7IF9pNCsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTQgKyAxKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSB0aGlzLnRvdGFsX3BhZ2VzKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgICAgZm9yICh2YXIgX2k1ID0gdGhpcy50b3RhbF9wYWdlcyAtIDQ7IF9pNSA8IHRoaXMudG90YWxfcGFnZXM7IF9pNSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTUgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA8PSA0KSB7CiAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgcGFnZV9ubyArIDM7IF9pNisrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTYgKyAxKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA+PSB0aGlzLnRvdGFsX3BhZ2VzIC0gNCkgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CgogICAgICAgIGZvciAodmFyIF9pNyA9IHBhZ2Vfbm8gLSA0OyBfaTcgPCB0aGlzLnRvdGFsX3BhZ2VzOyBfaTcrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k3ICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CgogICAgICAgIGZvciAodmFyIF9pOCA9IHBhZ2Vfbm8gLSAzOyBfaTggPD0gcGFnZV9ubyArIDM7IF9pOCsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfQogIH0KfTs="},null]}