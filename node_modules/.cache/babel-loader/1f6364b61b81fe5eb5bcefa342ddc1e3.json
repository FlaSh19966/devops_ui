{"remainingRequest":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js!/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Customer Support/SuperAdminTicketDashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/Learning/devops_ui/src/portal/Chatbot/Dashboard/Customer Support/SuperAdminTicketDashboard.vue","mtime":1660042032563},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/Learning/devops_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsgY2xvc2VfbW9kYWwgfSBmcm9tICJAL3BvcnRhbC9taXhpbnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbY2xvc2VfbW9kYWxdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZW5jaWxfc3ZnOiAnIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUuNTQ2IiBoZWlnaHQ9IjE1LjQ2MSIgdmlld0JveD0iMCAwIDE1LjU0NiAxNS40NjEiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiM5ZTllOWU7fTwvc3R5bGU+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDcuODg4IC0zNTYuNzY5KSI+PHBhdGggY2xhc3M9ImEiIGQ9Ik03NTkuNDE2LDM1Ni43NjlhMi4zNTgsMi4zNTgsMCwwLDEsMS43NzcuNjYyYy41MzQuNTEzLDEuMDcyLDEuMDI1LDEuNTY3LDEuNTc1YTIuMywyLjMsMCwwLDEtLjA3MSwzLjMyNWMtMi43MzYsMi43Ni01LjQ5NCw1LjUtOC4yMzgsOC4yNTFhMS4zODEsMS4zODEsMCwwLDEtLjc1OC4yODhjLS43MTkuMTc0LTEuNDI5LjM3OS0yLjE0NC41NzItLjkzMi4yNTEtMS44NjIuNS0yLjc5NS43NTEtLjYuMTU4LS45ODktLjIxMy0uODMyLS44MDdxLjY4OS0yLjU5NSwxLjQwNi01LjE4MmExLjE2NCwxLjE2NCwwLDAsMSwuMjg5LS40ODdxNC4wOTEtNC4xMDcsOC4yLTguMkEyLjI2NSwyLjI2NSwwLDAsMSw3NTkuNDE2LDM1Ni43NjlabS0xLjk4OSwyLjk1Ni02LjU0LDYuNTM4LDMuMDI1LDMuMDI0LDYuNTM4LTYuNTM3Wm00LjAyMywyLjE2NWMuMTE4LS4xMzUuMjI1LS4yNjkuMzQzLS4zOTJhMS4xMzQsMS4xMzQsMCwwLDAsMC0xLjczNGMtLjQ2LS40NjYtLjkyNi0uOTI1LTEuMzg4LTEuMzlhMS4xNjYsMS4xNjYsMCwwLDAtLjg2MS0uMzY4Yy0uNTc4LDAtLjg4MS40LTEuMjE0Ljc2Wm0tMTIuMDg0LDguODYzLDMuMi0uODYzLTIuMzM3LTIuMzMxWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCkiLz48cGF0aCBjbGFzcz0iYSIgZD0iTTgxMy45NDIsNDIyLjZsLS43ODktLjgsMy44MjEtMy44MTkuNzg0LjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTkuNjQ4IC01NS45NDcpIi8+PC9nPjwvc3ZnPicsCiAgICAgIGZpbHRlcl9zdGF0dXM6ICdBbGxUaWNrZXRzJywKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgcGFnZV9ubzogMSwKICAgICAgcGVyX3BhZ2U6IDIwLAogICAgICB0b3RhbF9wYWdlczogbnVsbCwKICAgICAgbnVtYmVyX29mX3Jvd3M6IG51bGwsCiAgICAgIHRpY2tldHNfbGlzdDogW10sCiAgICAgIHNvcnRfc3RhdHVzOiAnQWxsJywKICAgICAgY29tcGFueV9saXN0OiBbXSwKICAgICAgcGFnZV9hcnJheTogW10sCiAgICAgIFVzZXJfY29tbWVudHM6IFtdLAogICAgICBjb21tZW50c19saXN0OiBbXSwKICAgICAgY29tbWVudF9pdGVtX2xpc3Q6IFtdLAogICAgICB0aWNrZXRfbnVtYmVyOiAiIiwKICAgICAgY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyOiAiIiwKICAgICAgdGlja2V0X2Rlc2NyaXB0aW9uOiAiIiwKICAgICAgbmV3X3RpY2tldF9jb21tZW50OiAiIiwKICAgICAgY3VycmVudF9pbWFnZV91cmw6ICIiLAogICAgICAvLyBjdXJyZW50X2ltYWdlX25hbWU6ICIiLAogICAgICBjdXJyZW50X2ltYWdlX25hbWVfaW5fY29tbWVudDogIiIsCiAgICAgIGltYWdlc19pbl9jdXJyZW50X2NvbW1lbnQ6ICIiLAogICAgICBuZXdfaW1hZ2VfbmFtZTogIiIsCiAgICAgIG5ld19pbWFnZV9maWxlOiAiIiwKICAgICAgaW1hZ2VfZmlsZTogIiIsCiAgICAgIHNlbmRfc29sdXRpb25fdGV4dDogIiIsCiAgICAgIHRpY2tldF9pc3N1ZV9uYW1lOiAiIiwKICAgICAgdGlja2V0X3N0YXR1czogIiIsCiAgICAgIHRpY2tldF9zb2x1dGlvbjogIiIsCiAgICAgIGlzX3N0YXR1czogbnVsbCwKICAgICAgY3VycmVudF9zdGF0dXM6ICIiLAogICAgICBpc19zdGF0dXNfY2xvc2VkOiBmYWxzZSwKICAgICAgc2VhcmNoX2tleTogIiIsCiAgICAgIGlzRWRpdFRpY2tldFN0YXR1czogZmFsc2UsCiAgICAgIGlzX0VkaXRfU3RhdHVzOiBmYWxzZSwKICAgICAgY3VycmVudF90aWNrZXRfc3RhdHVzOiAiIiwKICAgICAgY29tcGFueV90aWNrZXRzX2xpc3Q6IFtdLAogICAgICBzb3J0X2NvbXBhbnlfc3RhdHVzOiAnQWxsJywKICAgICAgaXNfY29sbGFwc2U6IGZhbHNlLAogICAgICBzZW5kX2J5X2NvbXBhbnk6IGZhbHNlLAogICAgICByZXFfY29tcF9pZDogIiIsCiAgICAgIHJlcV9jb21wX25hbWU6ICIiLAogICAgICB0aWNrZXRfY29tcGFueV9pZDogIiIsCiAgICAgIHRpY2tldF9jb21wYW55X25hbWU6ICIiLAogICAgICBpc1Zpc2libGVTZWFyY2hDbGVhcjogZmFsc2UsCiAgICAgIGlzX3N1cGVyX2FkbWluOiBmYWxzZSwKICAgICAgaXNfZGV2ZWxvcGVyOiBmYWxzZSwKICAgICAgZGV2ZWxvcGVyc19saXN0OiBbXSwKICAgICAgYXNzaWduZWRfZGV2ZWxvcGVyOiAiIiwKICAgICAgbmV3X2ludGVybmFsX2NvbW1lbnQ6ICIiLAogICAgICBpc19pbnRlcm5hbF9jb21tZW50OiBmYWxzZSwKICAgICAgaW50ZXJuYWxfY29tbWVudHNfbGlzdDogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNfc2VuZF9idG5fZW5hYmxlOiBmdW5jdGlvbiBpc19zZW5kX2J0bl9lbmFibGUoKSB7CiAgICAgIGlmIChCb29sZWFuKHRoaXMuc2VuZF9zb2x1dGlvbl90ZXh0IHx8IHRoaXMubmV3X2ltYWdlX25hbWUgfHwgdGhpcy5uZXdfdGlja2V0X2NvbW1lbnQgfHwgdGhpcy5uZXdfaW50ZXJuYWxfY29tbWVudCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBpc19yZW9wZW5fYnRuX2VuYWJsZTogZnVuY3Rpb24gaXNfcmVvcGVuX2J0bl9lbmFibGUoKSB7CiAgICAgIGlmIChCb29sZWFuKHRoaXMubmV3X3RpY2tldF9jb21tZW50IHx8IHRoaXMubmV3X2ltYWdlX25hbWUpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKCF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikgJiYgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIHRvYXN0ci53YXJuaW5nKHRoaXMudGx0KCdzZWxlY3RfY29tcGFueV9uYW1lX21zZzInKSk7CiAgICB9IGVsc2UgaWYgKHRoaXMudXNlcl9yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpKSB7CiAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQoKICAgIHRoaXMuZ2V0X3RpY2tldF9kZXRhaWxzKCk7CiAgfSwKICB3YXRjaDogewogICAgZmlsdGVyX3N0YXR1czogZnVuY3Rpb24gZmlsdGVyX3N0YXR1cygpIHsKICAgICAgdGhpcy5wYWdlX25vID0gMTsKICAgICAgdGhpcy5wZXJfcGFnZSA9IDIwOwogICAgICB0aGlzLmlzX2NvbGxhcHNlID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5maWx0ZXJfc3RhdHVzID09PSAnQWxsVGlja2V0cycpIHsKICAgICAgICB0aGlzLmdldF90aWNrZXRfZGV0YWlscygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ2V0X2NvbXBhbnlfbGlzdCgpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzd2l0Y2hfdG9faW50ZXJuYWxfY29tbWVudHM6IGZ1bmN0aW9uIHN3aXRjaF90b19pbnRlcm5hbF9jb21tZW50cygpIHsKICAgICAgaWYgKCF0aGlzLmlzX2ludGVybmFsX2NvbW1lbnQpIHsKICAgICAgICB0aGlzLmlzX2ludGVybmFsX2NvbW1lbnQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNfaW50ZXJuYWxfY29tbWVudCA9IGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9LAogICAgY2hlY2tfY29sbGFwc2U6IGZ1bmN0aW9uIGNoZWNrX2NvbGxhcHNlKGluZGV4KSB7CiAgICAgIGlmICgkKCcjY29sbGFwc2VFeGFtcGxlX18nICsgaW5kZXgpLmlzKCcuY29sbGFwc2Uuc2hvdycpID09PSBmYWxzZSkgewogICAgICAgIHRoaXMuaXNfY29sbGFwc2UgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNfY29sbGFwc2UgPSBmYWxzZTsKICAgICAgICB0aGlzLnNvcnRfY29tcGFueV9zdGF0dXMgPSAnQWxsJzsKICAgICAgfQogICAgfSwKICAgIHRyaW1fdGlja2V0X2lzc3VlOiBmdW5jdGlvbiB0cmltX3RpY2tldF9pc3N1ZSh2YWwxKSB7CiAgICAgIGlmICh2YWwxLmxlbmd0aCA+IDUwKSB7CiAgICAgICAgdmFyIHN0cjEgPSB2YWwxLnN1YnN0cmluZygwLCA1MCkgKyAiLi4uLiI7CiAgICAgICAgcmV0dXJuIHN0cjE7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWwxOwogICAgfSwKICAgIHRyaW1fdGlja2V0X2Rlc2NyaXB0aW9uOiBmdW5jdGlvbiB0cmltX3RpY2tldF9kZXNjcmlwdGlvbihkZXNfbmFtZSkgewogICAgICBpZiAoZGVzX25hbWUubGVuZ3RoID4gNjApIHsKICAgICAgICB2YXIgdGlja2V0X2Rlc19uYW1lID0gZGVzX25hbWUuc3Vic3RyaW5nKDAsIDUwKSArICIuLi4iOwogICAgICAgIHJldHVybiB0aWNrZXRfZGVzX25hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXNfbmFtZTsKICAgIH0sCiAgICBkYXRlX2Zvcm1hdGluZzogZnVuY3Rpb24gZGF0ZV9mb3JtYXRpbmcoc3ViX2RhdGUpIHsKICAgICAgcmV0dXJuIG1vbWVudChzdWJfZGF0ZSkuZm9ybWF0KCJEIE1NTSBZWVlZIEhIOm1tIGEiKTsKICAgIH0sCiAgICBmb3JtYXRfZGF0ZTogZnVuY3Rpb24gZm9ybWF0X2RhdGUoZGF0ZSkgewogICAgICBpZiAoZGF0ZSA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuICJOL0EiOwogICAgICB9CgogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiRG8gTU1NIFlZWVkiKTsKICAgIH0sCiAgICBlZGl0X3RpY2tldF9zdGF0dXM6IGZ1bmN0aW9uIGVkaXRfdGlja2V0X3N0YXR1cygpIHsKICAgICAgaWYgKCF0aGlzLmlzRWRpdFRpY2tldFN0YXR1cykgewogICAgICAgIHRoaXMuaXNFZGl0VGlja2V0U3RhdHVzID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzRWRpdFRpY2tldFN0YXR1cyA9IGZhbHNlOyAvLyB0aGlzLmxvYWRfaW50ZW50KCk7CiAgICAgIH0KCiAgICAgIHJldHVybjsKICAgIH0sCiAgICBlZGl0X2Fzc2lnbl9zdGF0dXM6IGZ1bmN0aW9uIGVkaXRfYXNzaWduX3N0YXR1cygpIHsKICAgICAgaWYgKCF0aGlzLmlzX0VkaXRfU3RhdHVzKSB7CiAgICAgICAgdGhpcy5pc19FZGl0X1N0YXR1cyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc19FZGl0X1N0YXR1cyA9IGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9LAogICAgc2F2ZV90aWNrZXRfc3RhdHVzOiBmdW5jdGlvbiBzYXZlX3RpY2tldF9zdGF0dXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CgogICAgICBpZiAodGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMgPT09ICIiKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMgPSB0aGlzLmN1cnJlbnRfc3RhdHVzOwogICAgICB9CgogICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGlzX2VkaXQ6IHRydWUsCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIHJlc3BvbnNlOiB7CiAgICAgICAgICB0aWNrZXRfbnVtYmVyOiB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRfdGlja2V0X251bWJlciwKICAgICAgICAgIHVwZGF0ZV9zdGF0dXM6IHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzLAogICAgICAgICAgc29sdXRpb246IG51bGwsCiAgICAgICAgICB0aWNrZXRfY29tcGFueV9pZDogdGhpcy50aWNrZXRfY29tcGFueV9pZCA9PSAiIiA/IHRoaXMucmVxX2NvbXBfaWQgOiB0aGlzLnRpY2tldF9jb21wYW55X2lkLAogICAgICAgICAgdGlja2V0X2NvbXBhbnlfbmFtZTogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lID09ICIiID8gdGhpcy5yZXFfY29tcF9uYW1lIDogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lLAogICAgICAgICAgYXNzaWduX3RvOiB0aGlzLmFzc2lnbmVkX2RldmVsb3BlcgogICAgICAgIH0gLy8gcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgLy8gcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKCiAgICAgIH0sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgaWYgKF90aGlzLmFwaV9zdGF0dXNfY29kZS5USUNLRVRfVVBEQVRFRC5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIHRleHQ6IF90aGlzLnRsdCgnYWRtaW5fdGlja2V0X3N0YXR1c191cGRhdGVkJyksCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy5lbXB0eV92YXJpYWJsZSgpOwoKICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwoKICAgICAgICAgIGlmIChfdGhpcy5zZW5kX2J5X2NvbXBhbnkgPT09IHRydWUpIHsKICAgICAgICAgICAgX3RoaXMuZ2V0X2NvbXBhbnlfdGlja2V0cyhfdGhpcy5yZXFfY29tcF9uYW1lLCBfdGhpcy5yZXFfY29tcF9pZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmFwaV9zdGF0dXNfY29kZS5VTlNVQ0NFU1NGVUxfREJfT1BFUkFUSU9OLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwoKICAgICAgICAgIGlmIChfdGhpcy5zZW5kX2J5X2NvbXBhbnkgPT09IHRydWUpIHsKICAgICAgICAgICAgX3RoaXMuZ2V0X2NvbXBhbnlfdGlja2V0cyhfdGhpcy5yZXFfY29tcF9uYW1lLCBfdGhpcy5yZXFfY29tcF9pZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuYXBpX3N0YXR1c19jb2RlLlVOU1VDQ0VTU0ZVTF9EQl9RVUVSWS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKF90aGlzLnNlbmRfYnlfY29tcGFueSA9PT0gdHJ1ZSkgewogICAgICAgICAgICBfdGhpcy5nZXRfY29tcGFueV90aWNrZXRzKF90aGlzLnJlcV9jb21wX25hbWUsIF90aGlzLnJlcV9jb21wX2lkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmdldF90aWNrZXRfZGV0YWlscygpOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CgogICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7IC8vJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAvL3RoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLmVtcHR5X3ZhcmlhYmxlKCk7CgogICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CgogICAgICAgICAgaWYgKF90aGlzLnNlbmRfYnlfY29tcGFueSA9PT0gdHJ1ZSkgewogICAgICAgICAgICBfdGhpcy5nZXRfY29tcGFueV90aWNrZXRzKF90aGlzLnJlcV9jb21wX25hbWUsIF90aGlzLnJlcV9jb21wX2lkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmdldF90aWNrZXRfZGV0YWlscygpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRleHQ6IF90aGlzLnRsdCgnYWRtaW5fdGlja2V0X2ludGVybmFsX3NlcnZlcjInKSwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuY2xvc2VfbW9kYWwoJ3Jlc19uX2ludF9zYXZlJyk7CiAgICB9LAogICAgb3Blbl9jb21tZW50X21vZGVsOiBmdW5jdGlvbiBvcGVuX2NvbW1lbnRfbW9kZWwoaW5kZXgsIGtleSkgewogICAgICBpZiAoa2V5ID09PSBudWxsKSB7CiAgICAgICAgdGhpcy5jb21tZW50c19saXN0ID0gW107CiAgICAgICAgdGhpcy5pbnRlcm5hbF9jb21tZW50c19saXN0ID0gW107CiAgICAgICAgdGhpcy5jb21tZW50c19saXN0ID0gQm9vbGVhbih0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uQ29tbWVudHMpID8gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLkNvbW1lbnRzIDogW107CiAgICAgICAgdGhpcy5jdXJyZW50X3NlbGVjdGVkX3RpY2tldF9udW1iZXIgPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uVGlja2V0TnVtYmVyOwogICAgICAgIHRoaXMudGlja2V0X2NvbXBhbnlfaWQgPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uQ29tcGFueUlkOwogICAgICAgIHRoaXMudGlja2V0X2NvbXBhbnlfbmFtZSA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5Db21wYW55TmFtZTsKICAgICAgICB0aGlzLnRpY2tldF9kZXNjcmlwdGlvbiA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5EZXNjcmlwdGlvbjsKICAgICAgICB0aGlzLnRpY2tldF9pc3N1ZV9uYW1lID0gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLlRpY2tldElzc3VlOwogICAgICAgIHRoaXMudGlja2V0X3N0YXR1cyA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5DdXJyZW50U3RhdHVzOwogICAgICAgIHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdCA9IHRoaXMudGlja2V0c19saXN0W2luZGV4XS5JbnRlcm5hbENvbW1lbnRzOwogICAgICAgIHRoaXMuYXNzaWduZWRfZGV2ZWxvcGVyID0gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLkFzc2lnbmVkVG87CgogICAgICAgIGlmICh0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uU29sdXRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdGhpcy50aWNrZXRfc29sdXRpb24gPSB0aGlzLnRpY2tldHNfbGlzdFtpbmRleF0uU29sdXRpb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudGlja2V0X3NvbHV0aW9uID0gIiI7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy50aWNrZXRfc3RhdHVzID09PSAiQ2xvc2VkIikgewogICAgICAgICAgdGhpcy5pc19zdGF0dXNfY2xvc2VkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pc19zdGF0dXNfY2xvc2VkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmN1cnJlbnRfc3RhdHVzID0gdGhpcy50aWNrZXRzX2xpc3RbaW5kZXhdLkN1cnJlbnRTdGF0dXM7CiAgICAgICAgdGhpcy5zZW5kX2J5X2NvbXBhbnkgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdDb21wYW55X3RpY2tldHMnKSB7CiAgICAgICAgdGhpcy5jb21tZW50c19saXN0ID0gW107CiAgICAgICAgdGhpcy5pbnRlcm5hbF9jb21tZW50c19saXN0ID0gW107CiAgICAgICAgdGhpcy5jb21tZW50c19saXN0ID0gQm9vbGVhbih0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0W2luZGV4XS5Db21tZW50cykgPyB0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0W2luZGV4XS5Db21tZW50cyA6IFtdOwogICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uVGlja2V0TnVtYmVyOwogICAgICAgIHRoaXMudGlja2V0X2Rlc2NyaXB0aW9uID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uRGVzY3JpcHRpb247CiAgICAgICAgdGhpcy50aWNrZXRfaXNzdWVfbmFtZSA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLlRpY2tldElzc3VlOwogICAgICAgIHRoaXMudGlja2V0X3N0YXR1cyA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkN1cnJlbnRTdGF0dXM7CiAgICAgICAgdGhpcy5hc3NpZ25lZF9kZXZlbG9wZXIgPSB0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0W2luZGV4XS5Bc3NpZ25lZFRvOwogICAgICAgIHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdCA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkludGVybmFsQ29tbWVudHM7CiAgICAgICAgdGhpcy5yZXFfY29tcF9pZCA9IHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLkNvbXBhbnlJZDsKICAgICAgICB0aGlzLnJlcV9jb21wX25hbWUgPSB0aGlzLmNvbXBhbnlfdGlja2V0c19saXN0W2luZGV4XS5Db21wYW55TmFtZTsKCiAgICAgICAgaWYgKHRoaXMuY29tcGFueV90aWNrZXRzX2xpc3RbaW5kZXhdLlNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMudGlja2V0X3NvbHV0aW9uID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uU29sdXRpb247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudGlja2V0X3NvbHV0aW9uID0gIiI7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy50aWNrZXRfc3RhdHVzID09PSAiQ2xvc2VkIikgewogICAgICAgICAgdGhpcy5pc19zdGF0dXNfY2xvc2VkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pc19zdGF0dXNfY2xvc2VkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmN1cnJlbnRfc3RhdHVzID0gdGhpcy5jb21wYW55X3RpY2tldHNfbGlzdFtpbmRleF0uQ3VycmVudFN0YXR1czsKICAgICAgICB0aGlzLnNlbmRfYnlfY29tcGFueSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBnZXRfdGlja2V0X2RldGFpbHM6IGZ1bmN0aW9uIGdldF90aWNrZXRfZGV0YWlscygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLnN1cHBvcnRfdGlja2V0KCksIHsKICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICBmaWx0ZXJfYnk6IHRoaXMuc29ydF9zdGF0dXMsCiAgICAgICAgaXNfZ2V0OiB0cnVlLAogICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubwogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAoX3RoaXMyLmFwaV9zdGF0dXNfY29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoX3RoaXMyLnRsdCgnYWRtaW5fdGlja2V0X2ludGVybmFsX3NlcnZlcjMnKSk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgX3RoaXMyLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX2RhdGE7CiAgICAgICAgICBfdGhpczIudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfcGFnZTsKICAgICAgICAgIF90aGlzMi50aWNrZXRzX2xpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEuVGlja2V0OwoKICAgICAgICAgIF90aGlzMi5zZXRwYWdpbmF0aW9uKF90aGlzMi5wYWdlX25vKTsKCiAgICAgICAgICBfdGhpczIuaXNfZGV2ZWxvcGVyID0gcmVzcG9uc2UuZGF0YS5kYXRhLklzRGV2ZWxvcGVyID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICBfdGhpczIuZGV2ZWxvcGVyc19saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLkRldmVsb3BlcnNMaXN0OwogICAgICAgICAgX3RoaXMyLmlzX3N1cGVyX2FkbWluID0gcmVzcG9uc2UuZGF0YS5kYXRhLklzU3VwZXJBZG1pbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMyLmFwaV9zdGF0dXNfY29kZS5OT19FWElTVElOR19USUNLRVQuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICBfdGhpczIudGlja2V0c19saXN0ID0gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgX3RoaXMyLnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRleHQ6IF90aGlzMi50bHQoJ2FkbWluX3RpY2tldF9pbnRlcm5hbF9zZXJ2ZXI0JyksCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRfc29sdXRpb246IGZ1bmN0aW9uIHNlbmRfc29sdXRpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuc2VuZF9zb2x1dGlvbl90ZXh0ICE9ICIiICYmIHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzID09PSAnQ2xvc2VkJykgewogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGlzX2VkaXQ6IHRydWUsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgcmVzcG9uc2U6IHsKICAgICAgICAgICAgdGlja2V0X251bWJlcjogdGhpcy5jdXJyZW50X3NlbGVjdGVkX3RpY2tldF9udW1iZXIsCiAgICAgICAgICAgIHNvbHV0aW9uOiB0aGlzLnNlbmRfc29sdXRpb25fdGV4dCwKICAgICAgICAgICAgdXBkYXRlX3N0YXR1czogdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMsCiAgICAgICAgICAgIHRpY2tldF9jb21wYW55X2lkOiB0aGlzLnRpY2tldF9jb21wYW55X2lkID09ICIiID8gdGhpcy5yZXFfY29tcF9pZCA6IHRoaXMudGlja2V0X2NvbXBhbnlfaWQsCiAgICAgICAgICAgIHRpY2tldF9jb21wYW55X25hbWU6IHRoaXMudGlja2V0X2NvbXBhbnlfbmFtZSA9PSAiIiA/IHRoaXMucmVxX2NvbXBfaWQgOiB0aGlzLnRpY2tldF9jb21wYW55X25hbWUKICAgICAgICAgIH0gLy8gcGFnZW5vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICAvLyBwZXJwYWdlOiB0aGlzLnBlcl9wYWdlLAoKICAgICAgICB9LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzMy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICBpZiAoX3RoaXMzLmFwaV9zdGF0dXNfY29kZS5USUNLRVRfVVBEQVRFRC5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRleHQ6IF90aGlzMy50bHQoJ2FkbWluX3RpY2tldF9zdGF0dXNfdXBkYXRlZDEnKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMzLnNlbmRfYnlfY29tcGFueSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgX3RoaXMzLmdldF9jb21wYW55X3RpY2tldHMoX3RoaXMzLnJlcV9jb21wX25hbWUsIF90aGlzMy5yZXFfY29tcF9pZCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMy5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwoKICAgICAgICAgICAgICBfdGhpczMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy5hcGlfc3RhdHVzX2NvZGUuSU1HX0RVUExJQ0FURS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGV4dDogX3RoaXMzLnRsdCgnYWRtaW5fdGlja2V0X2ltZ19hbHJlYWR5X2ZvdW5kJyksCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMzLmFwaV9zdGF0dXNfY29kZS5VTlNVQ0NFU1NGVUxfREJfT1BFUkFUSU9OLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczMudGx0KCdhZG1pbl90aWNrZXRfZXJyb3Jfb2NjdXJyZWQzJyksCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMy5lbXB0eV92YXJpYWJsZSgpOwoKICAgICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMy5hcGlfc3RhdHVzX2NvZGUuVU5TVUNDRVNTRlVMX0RCX1FVRVJZLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0csCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSk7IC8vJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICAgIC8vdGhpcy5lbXB0eV92YXJpYWJsZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgIF90aGlzMy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRleHQ6IF90aGlzMy50bHQoJ2FkbWluX3RpY2tldF9pbnRlcm5hbF9zZXJ2ZXI2JyksCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jbG9zZV9tb2RhbCgnYnRuX3NlbmRfaWQnKTsKICAgICAgfSBlbHNlIHt9CiAgICB9LAogICAgb3Blbl9pbWFnZV9tb2RlbDogZnVuY3Rpb24gb3Blbl9pbWFnZV9tb2RlbChpbmRleCkgewogICAgICBpZiAoIXRoaXMuaXNfaW50ZXJuYWxfY29tbWVudCAmJiB0aGlzLmNvbW1lbnRzX2xpc3RbaW5kZXhdLmltYWdlX3VybCAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5pbWFnZXNfaW5fY3VycmVudF9jb21tZW50ID0gdGhpcy5jb21tZW50c19saXN0W2luZGV4XS5pbWFnZV91cmw7CiAgICAgICAgdGhpcy5jdXJyZW50X2ltYWdlX25hbWVfaW5fY29tbWVudCA9IHRoaXMuY29tbWVudHNfbGlzdFtpbmRleF0uaW1hZ2VfbmFtZTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzX2ludGVybmFsX2NvbW1lbnQgJiYgdGhpcy5pbnRlcm5hbF9jb21tZW50c19saXN0W2luZGV4XS5pbWFnZV91cmwgIT0gbnVsbCkgewogICAgICAgIHRoaXMuaW1hZ2VzX2luX2N1cnJlbnRfY29tbWVudCA9IHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdFtpbmRleF0uaW1hZ2VfdXJsOwogICAgICAgIHRoaXMuY3VycmVudF9pbWFnZV9uYW1lX2luX2NvbW1lbnQgPSB0aGlzLmludGVybmFsX2NvbW1lbnRzX2xpc3RbaW5kZXhdLmltYWdlX25hbWU7CiAgICAgIH0KICAgIH0sCiAgICBVcGxvYWRfaW1hZ2VfZmlsZTogZnVuY3Rpb24gVXBsb2FkX2ltYWdlX2ZpbGUoZXZlbnQpIHsKICAgICAgdmFyIGZpbGVzID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwoKICAgICAgaWYgKGZpbGVzLnNpemUgPiAyMDk3MTUyKSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0ZXh0OiB0aGlzLnRsdCgnYWRtaW5fdGlja2V0X3VwbG9hZF9pbWcnKSwKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMTAwMDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubmV3X2ltYWdlX25hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTsKICAgICAgdGhpcy5uZXdfaW1hZ2VfZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS50eXBlOwoKICAgICAgaWYgKHRoaXMubmV3X2ltYWdlX25hbWUgIT0gdGhpcy5jdXJyZW50X2ltYWdlX25hbWVfaW5fY29tbWVudCkge30KCiAgICAgIGlmICh0aGlzLm5ld19pbWFnZV9maWxlID09ICJpbWFnZS9wbmciKSB7CiAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlcywgdGhpcy5uZXdfaW1hZ2VfZmlsZSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5uZXdfaW1hZ2VfZmlsZSA9PSAiaW1hZ2UvanBlZyIpIHsKICAgICAgICB0aGlzLmNyZWF0ZUltYWdlKGZpbGVzLCB0aGlzLm5ld19pbWFnZV9maWxlKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm5ld19pbWFnZV9maWxlID09ICJpbWFnZS9qcGciKSB7CiAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlcywgdGhpcy5uZXdfaW1hZ2VfZmlsZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgU3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9zZWxlY3RfaW1nX3R5cGUnKSwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVJbWFnZTogZnVuY3Rpb24gY3JlYXRlSW1hZ2UoZmlsZSwgdHlwZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM0LmltYWdlX2ZpbGUgPSBlLnRhcmdldC5yZXN1bHQuc3BsaXQoImJhc2U2NCwiKVsxXTsKICAgICAgfTsKCiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgfSwKICAgIHNlbmRfaW50ZXJuYWxfdGlja2V0X2NvbW1lbnRzOiBmdW5jdGlvbiBzZW5kX2ludGVybmFsX3RpY2tldF9jb21tZW50cygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5uZXdfaW50ZXJuYWxfY29tbWVudCAhPSAiIiB8fCB0aGlzLm5ld19pbWFnZV9uYW1lICE9ICIiICYmIHRoaXMubmV3X2ltYWdlX2ZpbGUgIT0gIiIpIHsKICAgICAgICBTd2FsKHsKICAgICAgICAgIHRleHQ6IHRoaXMudGx0KCdhZG1pbl90aWNrZXRfYWRkaW5nX3lvdXJfY29tbWVudCcpLAogICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuc3VwcG9ydF90aWNrZXQoKSwgewogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBpc19lZGl0OiB0cnVlLAogICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIHJlc3BvbnNlOiB7CiAgICAgICAgICAgIHRpY2tldF9udW1iZXI6IHRoaXMuY3VycmVudF9zZWxlY3RlZF90aWNrZXRfbnVtYmVyLAogICAgICAgICAgICB1cGRhdGVfc3RhdHVzOiB0aGlzLmN1cnJlbnRfdGlja2V0X3N0YXR1cyA/IHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzIDogbnVsbCwKICAgICAgICAgICAgbmV3X2ludGVybmFsX2NvbW1lbnQ6IHRoaXMubmV3X2ludGVybmFsX2NvbW1lbnQgPyB0aGlzLm5ld19pbnRlcm5hbF9jb21tZW50IDogbnVsbCwKICAgICAgICAgICAgdGlja2V0X2ltZ19uYW1lOiB0aGlzLm5ld19pbWFnZV9uYW1lID8gdGhpcy5uZXdfaW1hZ2VfbmFtZSA6IG51bGwsCiAgICAgICAgICAgIHRpY2tldF9pbWdfZmlsZTogdGhpcy5pbWFnZV9maWxlID8gdGhpcy5pbWFnZV9maWxlIDogbnVsbCwKICAgICAgICAgICAgdGlja2V0X2NvbXBhbnlfaWQ6IHRoaXMudGlja2V0X2NvbXBhbnlfaWQgPT0gIiIgPyB0aGlzLnJlcV9jb21wX2lkIDogdGhpcy50aWNrZXRfY29tcGFueV9pZCwKICAgICAgICAgICAgdGlja2V0X2NvbXBhbnlfbmFtZTogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lID09ICIiID8gdGhpcy5yZXFfY29tcF9uYW1lIDogdGhpcy50aWNrZXRfY29tcGFueV9uYW1lCiAgICAgICAgICB9IC8vIHBhZ2VubzogdGhpcy5wYWdlX25vLAogICAgICAgICAgLy8gcGVycGFnZTogdGhpcy5wZXJfcGFnZSwKCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczUuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKF90aGlzNS5hcGlfc3RhdHVzX2NvZGUuVElDS0VUX1VQREFURUQuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczUudGx0KCdhZG1pbl90aWNrZXRfY29tbWVudHNfYWRkZWQnKSwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBfdGhpczUuZW1wdHlfdmFyaWFibGUoKTsKCiAgICAgICAgICAgICAgJCgiI3RpY2tldE1vZGVsRGV0YWlscyIpLm1vZGFsKCJoaWRlIik7IC8vICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpOwogICAgICAgICAgICAgIC8vICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXM1LnNlbmRfYnlfY29tcGFueSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgX3RoaXM1LmdldF9jb21wYW55X3RpY2tldHMoX3RoaXM1LnJlcV9jb21wX25hbWUsIF90aGlzNS5yZXFfY29tcF9pZCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzNS5nZXRfdGlja2V0X2RldGFpbHMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChfdGhpczUuYXBpX3N0YXR1c19jb2RlLklNR19EVVBMSUNBVEUuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRleHQ6IF90aGlzNS50bHQoJ2FkbWluX3RpY2tldF9pbWdfYWxyZWFkeV9mb3VuZDEnKSwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChfdGhpczUuYXBpX3N0YXR1c19jb2RlLlVOU1VDQ0VTU0ZVTF9EQl9RVUVSWS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOyAvLyQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAvL3RoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXM1LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICBfdGhpczUuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczUudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyOCcpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2xvc2VfbW9kYWwoJ2J0bl9zZW5kX2lkJyk7CiAgICAgIH0KICAgIH0sCiAgICBzZW5kX3RpY2tldF9jb21tZW50czogZnVuY3Rpb24gc2VuZF90aWNrZXRfY29tbWVudHMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubmV3X3RpY2tldF9jb21tZW50ICE9ICIiIHx8IHRoaXMubmV3X2ltYWdlX25hbWUgIT0gIiIgJiYgdGhpcy5uZXdfaW1hZ2VfZmlsZSAhPSAiIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGV4dDogdGhpcy50bHQoJ2FkbWluX3RpY2tldF9hZGRpbmdfeW91cl9jb21tZW50JyksCiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGlzX2VkaXQ6IHRydWUsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgcmVzcG9uc2U6IHsKICAgICAgICAgICAgdGlja2V0X251bWJlcjogdGhpcy5jdXJyZW50X3NlbGVjdGVkX3RpY2tldF9udW1iZXIsCiAgICAgICAgICAgIHVwZGF0ZV9zdGF0dXM6IHRoaXMuY3VycmVudF90aWNrZXRfc3RhdHVzID8gdGhpcy5jdXJyZW50X3RpY2tldF9zdGF0dXMgOiBudWxsLAogICAgICAgICAgICBuZXdfY29tbWVudDogdGhpcy5uZXdfdGlja2V0X2NvbW1lbnQgPyB0aGlzLm5ld190aWNrZXRfY29tbWVudCA6IG51bGwsCiAgICAgICAgICAgIHRpY2tldF9pbWdfbmFtZTogdGhpcy5uZXdfaW1hZ2VfbmFtZSA/IHRoaXMubmV3X2ltYWdlX25hbWUgOiBudWxsLAogICAgICAgICAgICB0aWNrZXRfaW1nX2ZpbGU6IHRoaXMuaW1hZ2VfZmlsZSA/IHRoaXMuaW1hZ2VfZmlsZSA6IG51bGwsCiAgICAgICAgICAgIHRpY2tldF9jb21wYW55X2lkOiB0aGlzLnRpY2tldF9jb21wYW55X2lkID09ICIiID8gdGhpcy5yZXFfY29tcF9pZCA6IHRoaXMudGlja2V0X2NvbXBhbnlfaWQsCiAgICAgICAgICAgIHRpY2tldF9jb21wYW55X25hbWU6IHRoaXMudGlja2V0X2NvbXBhbnlfbmFtZSA9PSAiIiA/IHRoaXMucmVxX2NvbXBfbmFtZSA6IHRoaXMudGlja2V0X2NvbXBhbnlfbmFtZQogICAgICAgICAgfSAvLyBwYWdlbm86IHRoaXMucGFnZV9ubywKICAgICAgICAgIC8vIHBlcnBhZ2U6IHRoaXMucGVyX3BhZ2UsCgogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgIGlmIChfdGhpczYuYXBpX3N0YXR1c19jb2RlLlRJQ0tFVF9VUERBVEVELk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGV4dDogX3RoaXM2LnRsdCgnYWRtaW5fdGlja2V0X2NvbW1lbnRzX2FkZGVkJyksCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgX3RoaXM2LmVtcHR5X3ZhcmlhYmxlKCk7CgogICAgICAgICAgICAgICQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOyAvLyAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTsKICAgICAgICAgICAgICAvLyAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmUoKTsKCiAgICAgICAgICAgICAgaWYgKF90aGlzNi5zZW5kX2J5X2NvbXBhbnkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5nZXRfY29tcGFueV90aWNrZXRzKF90aGlzNi5yZXFfY29tcF9uYW1lLCBfdGhpczYucmVxX2NvbXBfaWQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczYuZ2V0X3RpY2tldF9kZXRhaWxzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM2LmFwaV9zdGF0dXNfY29kZS5JTUdfRFVQTElDQVRFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczYudGx0KCdhZG1pbl90aWNrZXRfaW1nX2FscmVhZHlfZm91bmQxJyksCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM2LmFwaV9zdGF0dXNfY29kZS5VTlNVQ0NFU1NGVUxfREJfUVVFUlkuTVNHX0NPREUgPT0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFKSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogX3RoaXM2LnRsdCgnYWRtaW5fdGlja2V0X2Vycm9yX29jY3VycmVkNScpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOyAvLyQoIiN0aWNrZXRNb2RlbERldGFpbHMiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICAvL3RoaXMuZW1wdHlfdmFyaWFibGUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUsCiAgICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICBfdGhpczYuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkKCIjdGlja2V0TW9kZWxEZXRhaWxzIikubW9kYWwoImhpZGUiKTsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0ZXh0OiBfdGhpczYudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyOCcpLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2xvc2VfbW9kYWwoJ2J0bl9zZW5kX2lkJyk7CiAgICAgIH0KICAgIH0sCiAgICBlbXB0eV92YXJpYWJsZTogZnVuY3Rpb24gZW1wdHlfdmFyaWFibGUoKSB7CiAgICAgIHRoaXMuY29tbWVudHNfbGlzdCA9IFsiIl07CiAgICAgIHRoaXMuaW50ZXJuYWxfY29tbWVudHNfbGlzdCA9IFsiIl07CiAgICAgIHRoaXMuY29tbWVudF9pdGVtX2xpc3QgPSBbIiJdOwogICAgICB0aGlzLm5ld190aWNrZXRfY29tbWVudCA9ICIiOwogICAgICB0aGlzLm5ld19pbnRlcm5hbF9jb21tZW50ID0gIiI7CiAgICAgIHRoaXMuc2VuZF9zb2x1dGlvbl90ZXh0ID0gIiI7CiAgICAgIHRoaXMubmV3X2ltYWdlX25hbWUgPSAiIjsKICAgICAgdGhpcy5uZXdfaW1hZ2VfZmlsZSA9ICIiOwogICAgICB0aGlzLmZpbGVfY29udGVudDIgPSAiIjsKICAgICAgdGhpcy5pc0VkaXRUaWNrZXRTdGF0dXMgPSBmYWxzZTsKICAgICAgdGhpcy5pc19FZGl0X1N0YXR1cyA9IGZhbHNlOwogICAgICB0aGlzLmFzc2lnbmVkX2RldmVsb3BlciA9ICIiOwogICAgICB0aGlzLmN1cnJlbnRfdGlja2V0X3N0YXR1cyA9ICIiOwogICAgICB0aGlzLnRpY2tldF9jb21wYW55X2lkID0gJyc7CiAgICAgIHRoaXMudGlja2V0X2NvbXBhbnlfbmFtZSA9ICcnOwogICAgfSwKICAgIGdldF9jb21wYW55X2xpc3Q6IGZ1bmN0aW9uIGdldF9jb21wYW55X2xpc3QoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgc29ydF9ieV9jb21wYW55OiB0cnVlLAogICAgICAgIGlzX2dldDogdHJ1ZSwKICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8KICAgICAgfSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgaWYgKF90aGlzNy5hcGlfc3RhdHVzX2NvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgdG9hc3RyLmVycm9yKF90aGlzNy50bHQoJ2FkbWluX3RpY2tldF9pbnRlcm5hbF9zZXJ2ZXI5JykpOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXM3LmFwaV9zdGF0dXNfY29kZS5EQVRBX0FWQUlMQUJMRS5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIF90aGlzNy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9kYXRhOwogICAgICAgICAgX3RoaXM3LnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdpbmF0aW9uLnRvdGFsX3BhZ2U7CiAgICAgICAgICBfdGhpczcuY29tcGFueV9saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLlJlc3BvbnNlTGlzdDsKCiAgICAgICAgICBfdGhpczcuc2V0cGFnaW5hdGlvbihfdGhpczcucGFnZV9ubyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0aXRsZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TR19DT0RFLAogICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHLAogICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgIF90aGlzNy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRleHQ6IF90aGlzNy50bHQoJ2FkbWluX3RpY2tldF9pbnRlcm5hbF9zZXJ2ZXJfbXNnMScpLAogICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRfY29tcGFueV90aWNrZXRzOiBmdW5jdGlvbiBnZXRfY29tcGFueV90aWNrZXRzKGtleTEsIGtleTIpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLnJlcV9jb21wX25hbWUgPSBrZXkxOwogICAgICB0aGlzLnJlcV9jb21wX2lkID0ga2V5MjsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5zdXBwb3J0X3RpY2tldCgpLCB7CiAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgZmlsdGVyX2J5OiB0aGlzLnNvcnRfY29tcGFueV9zdGF0dXMsCiAgICAgICAgcmVxX2NvbXBhbnlfbmFtZToga2V5MSwKICAgICAgICByZXFfY29tcGFueV9pZDoga2V5MiwKICAgICAgICBpc19nZXQ6IHRydWUsCiAgICAgICAgcGVyX3BhZ2U6IHRoaXMucGVyX3BhZ2UsCiAgICAgICAgcGFnZV9ubzogdGhpcy5wYWdlX25vCiAgICAgIH0sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczguc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgIGlmIChfdGhpczguYXBpX3N0YXR1c19jb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcihfdGhpczgudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyX21zZzInKSk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczguYXBpX3N0YXR1c19jb2RlLkRBVEFfQVZBSUxBQkxFLk1TR19DT0RFID09IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSkgewogICAgICAgICAgLy8gdGhpcy5yZXFfY29tcF9pZCA9ICIiOwogICAgICAgICAgLy8gdGhpcy5yZXFfY29tcF9uYW1lID0gIiI7CiAgICAgICAgICBfdGhpczgubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWxfZGF0YTsKICAgICAgICAgIF90aGlzOC50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnaW5hdGlvbi50b3RhbF9wYWdlOwogICAgICAgICAgX3RoaXM4LmNvbXBhbnlfdGlja2V0c19saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLlRpY2tldDsKCiAgICAgICAgICBfdGhpczguc2V0cGFnaW5hdGlvbihfdGhpczgucGFnZV9ubyk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczguYXBpX3N0YXR1c19jb2RlLk5PX0VYSVNUSU5HX1RJQ0tFVC5NU0dfQ09ERSA9PSByZXNwb25zZS5kYXRhLm1lc3NhZ2UuTVNHX0NPREUpIHsKICAgICAgICAgIF90aGlzOC5jb21wYW55X3RpY2tldHNfbGlzdCA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZS5NU0dfQ09ERSwKICAgICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLk1TRywKICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICAgIF90aGlzOC5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICBfdGhpczguJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFN3YWwoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB0ZXh0OiBfdGhpczgudGx0KCdhZG1pbl90aWNrZXRfaW50ZXJuYWxfc2VydmVyX21zZzMnKSwKICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcGFnZV9yZXF1aXJlOiBmdW5jdGlvbiBwYWdlX3JlcXVpcmUocGFnZSkgewogICAgICBpZiAocGFnZSA9PSAwIHx8IHBhZ2UgPT0gdGhpcy50b3RhbF9wYWdlcyArIDEpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwYWdlID09ICIuLi5zIikgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCgxICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAiLi4ubCIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKCiAgICAgICAgaWYgKHRoaXMuZmlsdGVyX3N0YXR1cyA9PT0gJ0FsbFRpY2tldHMnKSB7CiAgICAgICAgICB0aGlzLmdldF90aWNrZXRfZGV0YWlscygpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc19jb2xsYXBzZSkgewogICAgICAgICAgdGhpcy5nZXRfY29tcGFueV90aWNrZXRzKHRoaXMucmVxX2NvbXBfbmFtZSwgdGhpcy5yZXFfY29tcF9pZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZ2V0X2NvbXBhbnlfbGlzdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldHBhZ2luYXRpb246IGZ1bmN0aW9uIHNldHBhZ2luYXRpb24ocGFnZV9ubykgewogICAgICB0aGlzLnBhZ2VfYXJyYXkgPSBbXTsKCiAgICAgIGlmICh0aGlzLnRvdGFsX3BhZ2VzIDw9IDcpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goaSArIDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgNDsgX2krKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2kgKyAxKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSB0aGlzLnRvdGFsX3BhZ2VzKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goMSk7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgICAgZm9yICh2YXIgX2kyID0gdGhpcy50b3RhbF9wYWdlcyAtIDQ7IF9pMiA8IHRoaXMudG90YWxfcGFnZXM7IF9pMisrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTIgKyAxKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA8PSA0KSB7CiAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgcGFnZV9ubyArIDM7IF9pMysrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTMgKyAxKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5sIik7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFnZV9ubyA+PSB0aGlzLnRvdGFsX3BhZ2VzIC0gNCkgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CgogICAgICAgIGZvciAodmFyIF9pNCA9IHBhZ2Vfbm8gLSA0OyBfaTQgPCB0aGlzLnRvdGFsX3BhZ2VzOyBfaTQrKykgewogICAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k0ICsgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKCIuLi5zIik7CgogICAgICAgIGZvciAodmFyIF9pNSA9IHBhZ2Vfbm8gLSAzOyBfaTUgPD0gcGFnZV9ubyArIDM7IF9pNSsrKSB7CiAgICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaTUpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgICAgfQogICAgfQogIH0KfTs="},null]}