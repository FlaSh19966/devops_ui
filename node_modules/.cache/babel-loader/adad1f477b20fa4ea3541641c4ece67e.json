{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Pages/Login.vue","mtime":1645594423491},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBzaWRlYmFyaXRlbXMgZnJvbSAiLi4vTGF5b3V0L1NpZGVCYXJJdGVtIjsKaW1wb3J0IHsgc2V0VGltZW91dCB9IGZyb20gInRpbWVycyI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IHsgYnVzIH0gZnJvbSAiQC9wb3J0YWwvbWFpbiI7CmltcG9ydCBDb29raWVzIGZyb20gImpzLWNvb2tpZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICBkYXRlOiAiIgogICAgICB9LAogICAgICBvcGVuX21vZGFsOiBmYWxzZSwKICAgICAgZm9yZ290X3Bhc3N3b3JkX2VtYWlsOiAiIiwKICAgICAgcmVnX2VtYWlsOiAvXihbMC05YS16QS1aXShbLS5cd10qWzAtOWEtekEtWl0pKkAoWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KSQvLAogICAgICBzaG93X3ZhbGlkYXRpb25fc3RyaW5nOiBmYWxzZSwKICAgICAgbG9naW5fdHlwZTogIlBvcnRhbCIsCiAgICAgIGlzX3N1cGVyX2FkbWluOiBmYWxzZSwKICAgICAgb3Blbl9ib3RfYXBpX3Jlc3BvbnNlX3JlY2VpdmVkOiBmYWxzZSwKICAgICAgbG9naW5fYnV0dG9uX3NwaW5uZXI6IGZhbHNlLAogICAgICBpc19zdWJtaXR0aW5nOiBmYWxzZSwKICAgICAgYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmc6IG51bGwsCiAgICAgIGlzX3VzZXJfbG9ja2VkOiBmYWxzZSwKICAgICAgdXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkOiBudWxsCiAgICB9OwogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpICYmIEJvb2xlYW4odGhpcy4kcm91dGUucXVlcnkuaXNfc2hvcGlmeV9iaWxsaW5nX3JlZGlyZWN0KSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIkRhc2hib2FyZCIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpc19zaG9waWZ5X2JpbGxpbmdfcmVkaXJlY3Q6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIGlmICh0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikgJiYgIShCb29sZWFuKHRoaXMuJHJvdXRlLnF1ZXJ5LmVtYWlsKSAmJiBCb29sZWFuKHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuKSkpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ib3QvZGFzaGJvYXJkIik7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIGxfdHlwZSA9IENvb2tpZXMuZ2V0KCJsb2dpbl90eXBlIik7CgogICAgaWYgKGxfdHlwZSAhPT0gdW5kZWZpbmVkICYmIGxfdHlwZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgdGhpcy5sb2dpbl90eXBlID0gQ29va2llcy5nZXQoImxvZ2luX3R5cGUiKTsKICAgIH0KCiAgICBpZiAodGhpcy5sb2dpbl90eXBlID09IHVuZGVmaW5lZCkgewogICAgICB0aGlzLmxvZ2luX3R5cGUgPSAiUG9ydGFsIjsKICAgIH0KICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBlbWFpbCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmVtYWlsOwogICAgdmFyIHRva2VuX2lkID0gdGhpcy4kcm91dGUucXVlcnkudG9rZW47CgogICAgaWYgKGVtYWlsICYmIHRva2VuX2lkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCJsb2dpbiIpOwogICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy52YWxpZGF0ZV9sb2dpbigpLCB7CiAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgIHRva2VuOiB0b2tlbl9pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJFbWFpbCBhbHJlYWR5IHZlcmlmaWVkIikgewogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIGh0bWw6ICI8aDY+VGhpcyBFbWFpbCB2ZXJpZmljYXRpb24gbGluayBpcyBFeHBpcmVkLiBZb3UgYWxyZWFkeSBWZXJpZmllZCB5b3VyIGFjY291bnQuIEtpbmRseSBsb2dpbjwvaDY+IgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJFbWFpbCB2ZXJpZmljYXRpb24gc3VjY2Vzc2Z1bCIpIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIGh0bWw6ICI8aDY+WW91ciBlbWFpbCB2ZXJpZmljYXRpb24gaXMgc3VjY2Vzc2Z1bGx5IGRvbmUgLiBQbGVhc2UgdXNlIEVtYWlsIGlkIGFzIHlvdXIgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIGZvciBsb2dpbjwvaDY+IiwKICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiVXNlciBEb2Vzbid0IEV4aXN0IikgewogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIGh0bWw6ICI8aDY+VXNlciBEb2Vzbid0IEV4aXN0PC9oNj4iLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGVtYWlsX3ZhbGlkYXRlOiBmdW5jdGlvbiBlbWFpbF92YWxpZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMucmVnX2VtYWlsLnRlc3QodGhpcy5mb3Jnb3RfcGFzc3dvcmRfZW1haWwpKSB7CiAgICAgICAgdGhpcy5zaG93X3ZhbGlkYXRpb25fc3RyaW5nID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93X3ZhbGlkYXRpb25fc3RyaW5nID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vICB0b2dnbGVfZG9tYWluKGV2ZW50KSB7CiAgICAvLyAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT0gIlBvcnRhbCIpIHsKICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZG9tYWluX2lucHV0Iikuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgLy8gICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAiQm90IikgewogICAgLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkb21haW5faW5wdXQiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgLy8gICB9fSwKICAgIGNsZWFyX2ZpZWxkczogZnVuY3Rpb24gY2xlYXJfZmllbGRzKCkgewogICAgICB0aGlzLmZvcmdvdF9wYXNzd29yZCA9ICIiOwogICAgICAkKCIjdXNlcm1vZGFsIikubW9kYWwoImhpZGUiKTsKICAgIH0sCiAgICBmb3Jnb3RfcGFzc3dvcmQ6IGZ1bmN0aW9uIGZvcmdvdF9wYXNzd29yZCgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgIGlmICh0aGlzLnNob3dfdmFsaWRhdGlvbl9zdHJpbmcgPT0gZmFsc2UgJiYgdGhpcy5mb3Jnb3RfcGFzc3dvcmRfZW1haWwgIT0gIiIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgdGV4dDogIlBsZWFzZSB3YWl0IHdoaWxlIHdlIHN1Ym1pdCB5b3VyIGRldGFpbHMiLAogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgdHlwZTogImluZm8iCiAgICAgICAgfSk7CiAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuZm9yZ290X3Bhc3N3b3JkKCksIHsKICAgICAgICAgIGVtYWlsOiB0aGlzLmZvcmdvdF9wYXNzd29yZF9lbWFpbAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbmNsdWRlcygiZW1haWwgYWRkcmVzcyIpKSB7CiAgICAgICAgICAgIHN3YWwoewogICAgICAgICAgICAgIGh0bWw6IHJlc3BvbnNlLmRhdGEsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiQSBtYWlsIGhhcyBiZWVuIHNlbnQgdG8geW91ciBlbWFpbCIpIHsKICAgICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgICAgaHRtbDogIjxoNj5XZSBoYXZlIHNlbnQgYSBsaW5rIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuIEtpbmRseSBjaGVjayB5b3VyIGUtbWFpbDwvaDY+IiwKICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiI3VzZXJtb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzd2FsKHsKICAgICAgICAgICAgICBodG1sOiAiPGg2PlNvbWUgRXJyb3IgT2NjdXJyZWQuIFBsZWFzZSBUcnkgQWdhaW48L2g2PiIsCiAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIiN1c2VybW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGFzc3dvcmRfdG9nZ2xlOiBmdW5jdGlvbiBwYXNzd29yZF90b2dnbGUoKSB7CiAgICAgIHZhciBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtX3Bhc3N3b3JkIik7CgogICAgICBpZiAocGFzc3dvcmQudHlwZSA9PSAidGV4dCIpIHsKICAgICAgICBwYXNzd29yZC50eXBlID0gInBhc3N3b3JkIjsKICAgICAgfSBlbHNlIGlmIChwYXNzd29yZC50eXBlID09ICJwYXNzd29yZCIpIHsKICAgICAgICBwYXNzd29yZC50eXBlID0gInRleHQiOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICAgIHRoaXMuaXNfc3VibWl0dGluZyA9IHRydWU7CgogICAgICBpZiAodGhpcy51c2VyLm5hbWUgPT0gIiIgfHwgdGhpcy51c2VyLnBhc3N3b3JkID09ICIiKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICB0aXRsZTogIjxoND5LaW5kbHkgZW50ZXIgdGhlIGVtYWlsIGFuZCBwYXNzd29yZDwvaDQ+IiwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc19zdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2dpbl9idXR0b25fc3Bpbm5lciA9IHRydWU7IC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGlubmVyIikuc3R5bGUub3BhY2l0eSA9ICIxIjsKCiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICB0aGlzLmNhbGxfYXBpKCk7CiAgICAgIH0KICAgIH0sCiAgICByZWRpcjogZnVuY3Rpb24gcmVkaXIobWVzc2FnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gaWYgKCF0aGlzLmlzX3N1cGVyX2FkbWluKXsKICAgICAgdmFyIHJlc2V0X2ZpZWxkcyA9IHRydWU7CiAgICAgIHRoaXMubG9naW5fYnV0dG9uX3NwaW5uZXIgPSBmYWxzZTsgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwaW5uZXIiKS5zdHlsZS5vcGFjaXR5ID0gIjAiOwoKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjAuNSI7IC8vIH0gCgogICAgICBpZiAobWVzc2FnZS5NU0cgPT0gIkVtYWlsIGhhc24ndCBiZWVuIHZlcmlmaWVkLiIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIGh0bWw6ICI8aDY+WW91ciBhY2NvdW50IGhhcyBub3QgYmVlbiB2YWxpZGF0ZWQgZm9yIGxvZ2luLjxicj5QbGVhc2UgY2hlY2sgeW91ciBlLW1haWwgZm9yIGRldGFpbHMuPC9oNj4iLAogICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLk1TRyA9PSAiWW91ciBhY2NvdW50IGhhcyBiZWVuIGxvY2tlZCBkdWUgaW5jb3JyZWN0IGxvZ2luIGF0dGVtcHRzIikgewogICAgICAgIHJlc2V0X2ZpZWxkcyA9IGZhbHNlOwogICAgICAgIHN3YWwoewogICAgICAgICAgaHRtbDogIjxoNj5Zb3VyIGFjY291bnQgaGFzIGJlZW4gbG9ja2VkIGZvciBleGNlZWRpbmcgdGhlIG51bWJlciBvZiBhbGxvd2VkIGF0dGVtcHRzLjwvaDY+IiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5NU0cgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBodG1sOiAiPGg2PlRoZXJlIHdhcyBhbiBpbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uPC9oNj4iCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuTVNHID09ICJVc2VyIGhhcyBub3QgYmVlbiBhcHByb3ZlZCB5ZXQuIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgaHRtbDogIjxoNj5Zb3VyIHJlZ2lzdHJhdGlvbiBoYXMgbm90IGJlZW4gYXBwcm92ZWQgb3IgaXQgaGFzIGJlZW4gZGVjbGluZWQgYnkgQWRtaW4uIEtpbmRseSBjaGVjayB5b3VyIG1haWw8L2g2PiIsCiAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLk1TRyA9PSAiWW91IGFyZSBhbHJlYWR5IGxvZ2dlZCBpbiEiKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgaHRtbDogIjxoNj5UaGlzIHVzZXIgaXMgYWxyZWFkeSBsb2dnZWQgaW48L2g2PiIsCiAgICAgICAgICB0aW1lcjogMjAwMAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLk1TRyA9PSAiSW52YWxpZCBDcmVkZW50aWFscyIpIHsKICAgICAgICByZXNldF9maWVsZHMgPSBmYWxzZTsKCiAgICAgICAgaWYgKCFpc05hTihtZXNzYWdlLmFsbG93ZWRfYXR0ZW1wdHMpKSB7CiAgICAgICAgICB0aGlzLmFsbG93ZWRfYXR0ZW1wdHNfcmVtYWluaW5nID0gbWVzc2FnZS5hbGxvd2VkX2F0dGVtcHRzOwogICAgICAgICAgc3dhbCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIGh0bWw6ICI8aDY+SW52YWxpZCBDcmVkZW50aWFscyE8L2g2PiIsCiAgICAgICAgICAgIHRleHQ6ICJZb3UgaGF2ZSAiLmNvbmNhdCh0aGlzLmFsbG93ZWRfYXR0ZW1wdHNfcmVtYWluaW5nLCAiIGF0dGVtcHRzIHJlbWFpbmluZyBiZWZvcmUgeW91ciBhY2NvdW50IGdldHMgbG9ja2VkLiIpLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN3YWwoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBodG1sOiAiPGg2PkludmFsaWQgQ3JlZGVudGlhbHMhPC9oNj4iLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5NU0cgPT0gIkFQSSBMSU1JVCBFWENFRURFRCIpIHsKICAgICAgICBzd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBodG1sOiAiPGg2PllvdXIgbW9udGhseSBhcGkgcmVxdWVzdHMgaGFzIGV4Y2VlZGVkLiBQbGVhc2UgVXBncmFkZSB5b3VyIHBsYW5zIHRvIGxvZ2luPC9oNj4iLAogICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keSIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CiAgICAgICAgJCgnYnV0dG9uW3R5cGU9InN1Ym1pdCJdJykucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5NU0cgPT0gIlBhc3N3b3JkIHNob3VsZCBiZSBSZW5ld2VkIikgewogICAgICAgIHN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGh0bWw6ICI8aDY+WW91ciBwYXNzd29yZCBoYXMgYmVlbiBleHBpcmVkLiBQbGVhc2UgUmVuZXcgeW91ciBwYXNzd29yZDwvaDY+IiwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJvZHkiKS5zdHlsZS5vcGFjaXR5ID0gIjEiOwogICAgICAgICQoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKEJvb2xlYW4obWVzc2FnZS5pc19zdXBlcl9hZG1pbl9sb2dpbikpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiU3VwZXJBZG1pbkludGVybWVkaWF0ZVNjcmVlbiIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgZGF0YTogbWVzc2FnZS5hbGxfdXNlcnNfbGlzdAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc3RhcnQoKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiVXNlckluZm9ybWF0aW9uIiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJhdCIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uLmFjY2Vzc190b2tlbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoInJ0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24ucmVmcmVzaF90b2tlbik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5sb2dpbl90eXBlID09ICJCb3QiKSB7CiAgICAgICAgQ29va2llcy5yZW1vdmUoImxvZ2luX3R5cGUiKTsKICAgICAgICBDb29raWVzLnNldCgibG9naW5fdHlwZSIsIHRoaXMubG9naW5fdHlwZSwgewogICAgICAgICAgZXhwaXJlczogMzY1CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zdGFydCgpOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJVc2VySW5mb3JtYXRpb24iLCBtZXNzYWdlLnVzZXJpbmZvcm1hdGlvbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoImF0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicnQiLCBtZXNzYWdlLnVzZXJpbmZvcm1hdGlvbi5yZWZyZXNoX3Rva2VuKTsKICAgICAgICB0aGlzLmNoZWNrX3RlbXBsYXRlX3N1YnNjcmlwdGlvbigncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90Jyk7IC8vIHRoaXMuJHJvdXRlci5wdXNoKCIvYm90L2RpcmVjdHJlc3BvbnNlYm90Iik7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5NU0cgPT0gIlVzZXIgSXMgTG9ja2VkIikgewogICAgICAgIHJlc2V0X2ZpZWxkcyA9IGZhbHNlOwoKICAgICAgICBpZiAobWVzc2FnZS5sb2NrZWRfYXQgIT0gbnVsbCAmJiBtZXNzYWdlLmxvY2tlZF9hdCAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuaXNfdXNlcl9sb2NrZWQgPSB0cnVlOyAvLyB0aGlzLnVzZXJfbG9ja2VkX2RhdGVfYWxsb3dlZCA9IG1vbWVudChtb21lbnQobmV3IERhdGUobWVzc2FnZS5sb2NrZWRfYXQpKS5hZGQoMSwgJ2QnKSkuZm9ybWF0KCJNTU0gRG8sIGg6bW0gYSIpOwoKICAgICAgICAgIHRoaXMudXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkID0gbW9tZW50KG1vbWVudChuZXcgRGF0ZShtZXNzYWdlLmxvY2tlZF9hdCkpLmFkZCgxLCAnZCcpKS5jYWxlbmRhcigpOwogICAgICAgIH0KCiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgdGl0bGU6ICJBY2NvdW50IExvY2tlZCEiLAogICAgICAgICAgaHRtbDogIlRoaXMgdXNlciBoYXMgYmVlbiBsb2NrZWQgZm9yIGV4Y2VlZGluZyB0aGUgYWxsb3dlZCBudW1iZXIgb2YgZmFpbGVkIGxvZ2luIGF0dGVtcHRzLiBQbGVhc2UgdHJ5IGFnYWluICIuY29uY2F0KHRoaXMudXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkLCAiLiA8YSBocmVmPVwibWFpbHRvOnN1cHBvcnRAY2Vuc2UuYWk/c3ViamVjdD1IZWxwJTIwUmVxdWlyZWQlMjAtJTIwQ2Vuc2UlMjBQb3J0YWwlMjBBY2NvdW50JTIwTG9ja2VkXCIgY2xhc3M9XCJjdGN0LXVzXCI+Q29udGFjdCBVczwvYT4gaWYgeW91IHRoaW5rIHRoaXMgd2FzIGEgbWlzdGFrZS4iKQogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5Iikuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBDb29raWVzLnJlbW92ZSgibG9naW5fdHlwZSIpOwogICAgICAgIENvb2tpZXMuc2V0KCJsb2dpbl90eXBlIiwgdGhpcy5sb2dpbl90eXBlLCB7CiAgICAgICAgICBleHBpcmVzOiAzNjUKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJJbmZvcm1hdGlvbiIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgicmV0YWlsX3dlYl9mcmFtZXdvcmsiLCBtZXNzYWdlLnJldGFpbF93ZWJfZnJhbWV3b3JrKTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5ib3RfcmVzcG9uc2VfdG9rZW4oKSwgewogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMuJHNlc3Npb24uc2V0KCJCb3RUb2tlbiIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgIF90aGlzLiRzZXNzaW9uLnJlbW92ZSgiVGVtcG9yYXJ5Qm90VG9rZW4iKTsKCiAgICAgICAgICBidXMuJGVtaXQoIlRva2VuIGNoYW5nZWQiLCAiVHJ1ZSIpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCJVc2VyRmlyc3ROYW1lIiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24uZmlyc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIlVzZXJMYXN0TmFtZSIsIG1lc3NhZ2UudXNlcmluZm9ybWF0aW9uLmxhc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoInJ0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24ucmVmcmVzaF90b2tlbik7CiAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoImF0IiwgbWVzc2FnZS51c2VyaW5mb3JtYXRpb24uYWNjZXNzX3Rva2VuKTsKICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgiUmVzdHJpY3Rpb25MaXN0IiwgbWVzc2FnZS5yZXN0cmljdGlvbl9saXN0KTsKICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiY29tcGFueV9pZD0iICsgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0gImNvbXBhbnlfbmFtZT0iICsgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZTsKICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiY29tcGFueV9lbWFpbD0iICsgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsOwogICAgICAgIHRoaXMubG9naW5fYnV0dG9uX3NwaW5uZXIgPSB0cnVlOyAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Bpbm5lciIpLnN0eWxlLm9wYWNpdHkgPSAiMSI7CgogICAgICAgIHRoaXMuY2hlY2tfdGVtcGxhdGVfc3Vic2NyaXB0aW9uKG51bGwsIG1lc3NhZ2UubWVudWJpbmQpOyAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAvLyB0aGlzLnVwZGF0ZV9tZW51X2xpc3QobWVzc2FnZS5tZW51YmluZCk7CiAgICAgICAgLy8gfSwgMTAwKTsKICAgICAgfQoKICAgICAgaWYgKHJlc2V0X2ZpZWxkcykgewogICAgICAgIHRoaXMudXNlci5lbWFpbCA9ICIiOwogICAgICB9CgogICAgICB0aGlzLnVzZXIucGFzc3dvcmQgPSAiIjsKICAgIH0sCiAgICBjaGVja190ZW1wbGF0ZV9zdWJzY3JpcHRpb246IGZ1bmN0aW9uIGNoZWNrX3RlbXBsYXRlX3N1YnNjcmlwdGlvbihwYXJhbSwgbWVudSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLmdldChhcGlfY2FsbHMub3Blbl9ib3RfdGVtcGxhdGVfc3Vic2NyaXB0aW9uX2FwaSgpLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZAogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICBfdGhpczIub3Blbl9ib3RfYXBpX3Jlc3BvbnNlX3JlY2VpdmVkID0gdHJ1ZTsKCiAgICAgICAgaWYgKHBhcmFtID09PSBudWxsKSB7CiAgICAgICAgICBfdGhpczIudXBkYXRlX21lbnVfbGlzdChtZW51KTsKICAgICAgICB9CgogICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gIlN1Y2Nlc3MiKSB7CiAgICAgICAgICBfdGhpczIuJHNlc3Npb24uc2V0KCJCb3RUZW1wbGF0ZXMiLCBkYXRhLnRlbXBsYXRlcyk7CgogICAgICAgICAgaWYgKHBhcmFtID09PSAncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90JykgewogICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAiRGlyZWN0IFJlc3BvbnNlIEJvdCIsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocGFyYW0gPT09ICdwdXNoX2RpcmVjdF9yZXNwb25zZV9ib3QnKSB7CiAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICJEaXJlY3QgUmVzcG9uc2UgQm90IiwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHJlbG9hZDogdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMi5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQgPSB0cnVlOwoKICAgICAgICBpZiAocGFyYW0gPT09IG51bGwpIHsKICAgICAgICAgIF90aGlzMi51cGRhdGVfbWVudV9saXN0KG1lbnUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBhcmFtID09PSAncHVzaF9kaXJlY3RfcmVzcG9uc2VfYm90JykgewogICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJEaXJlY3QgUmVzcG9uc2UgQm90IiwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgcmVsb2FkOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNhbGxfYXBpOiBmdW5jdGlvbiBjYWxsX2FwaSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnVzZXIuZGF0ZSA9IG1vbWVudCgpLnRvSVNPU3RyaW5nKCk7CiAgICAgIHRoaXMuYWxsb3dlZF9hdHRlbXB0c19yZW1haW5pbmcgPSAwOwogICAgICB0aGlzLmlzX3VzZXJfbG9ja2VkID0gZmFsc2U7CiAgICAgIHRoaXMudXNlcl9sb2NrZWRfZGF0ZV9hbGxvd2VkID0gbnVsbDsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMubG9naW4oKSwgdGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5yZWRpcihyZXNwb25zZS5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczMubG9naW5fYnV0dG9uX3NwaW5uZXIgPSBmYWxzZTsgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwaW5uZXIiKS5zdHlsZS5vcGFjaXR5ID0gIjAiOwoKICAgICAgICAkKCdidXR0b25bdHlwZT0ic3VibWl0Il0nKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICBzd2FsKHsKICAgICAgICAgIGh0bWw6ICI8aDQ+U29tZSBFcnJvciBPY2N1cnJlZC48YnI+UGxlYXNlIFRyeSBBZ2FpbiE8L2g0PiIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICB9KTsgLy8gdG9hc3RyLmVycm9yKCJUaGVyZSBpcyBhbiBpbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIik7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZV9tZW51X2xpc3Q6IGZ1bmN0aW9uIHVwZGF0ZV9tZW51X2xpc3QobWVzc2FnZSkgewogICAgICB2YXIgbWVudSA9IHt9OwogICAgICB2YXIgbWFpbl9tZW51X2xpc3QgPSBtZXNzYWdlLmZpbHRlcihmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgcmV0dXJuIGFyci5Jc01hc3Rlck1lbnUgPT0gdHJ1ZSAmJiBhcnIuRW5hYmxlZCA9PSB0cnVlOwogICAgICB9KTsKICAgICAgdmFyIG1haW5fbWVudV9saXN0X2ZpbHRlcmVkID0gW107CiAgICAgIHZhciBzdWJfbWVudV9saXN0ID0gbWVzc2FnZS5maWx0ZXIoZnVuY3Rpb24gKGFycikgewogICAgICAgIHJldHVybiBhcnIuSGFzU3ViTWVudXMgPT0gZmFsc2UgJiYgYXJyLkVuYWJsZWQgPT0gdHJ1ZSAmJiBhcnIuSXNTdWJNZW51ID09IHRydWU7CiAgICAgIH0pOwoKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSwgbikgewogICAgICAgIHZhciBtZW51RmlsdGVyID0gc2lkZWJhcml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoc2lkZWJhcikgewogICAgICAgICAgcmV0dXJuIHNpZGViYXIubmFtZSA9PT0gbWFpbl9tZW51X2xpc3RbaV0uTWVudUl0ZW0gJiYgQm9vbGVhbihzaWRlYmFyLnN2Z19odG1sKTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG1lbnVGaWx0ZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgbWFpbl9tZW51X2xpc3RfZmlsdGVyZWQucHVzaChtZW51RmlsdGVyWzBdKTsKICAgICAgICAgIG1lbnVbbWVudUZpbHRlclswXS5uYW1lXSA9IHsKICAgICAgICAgICAgbWFpbl9tZW51OiBtZW51RmlsdGVyWzBdLAogICAgICAgICAgICBzdWJfbWVudV9saXN0OiBbXQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IG1haW5fbWVudV9saXN0Lmxlbmd0aDsgaSA8IG47IGkgKz0gMSkgewogICAgICAgIF9sb29wKGksIG4pOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pID0gMCwgX24gPSBzdWJfbWVudV9saXN0Lmxlbmd0aDsgX2kgPCBfbjsgX2kgKz0gMSkgewogICAgICAgICAgZm9yICh2YXIgaiBpbiBzaWRlYmFyaXRlbXMpIHsKICAgICAgICAgICAgaWYgKHNpZGViYXJpdGVtc1tqXS5uYW1lID09PSBzdWJfbWVudV9saXN0W19pXS5NZW51SXRlbSAmJiBCb29sZWFuKHNpZGViYXJpdGVtc1tqXS5wYWdlX3BhdGggJiYgc2lkZWJhcml0ZW1zW2pdLm1hc3Rlcl9tZW51ID09PSBzdWJfbWVudV9saXN0W19pXS5NYXN0ZXJNZW51KSkgewogICAgICAgICAgICAgIG1lbnVbc3ViX21lbnVfbGlzdFtfaV0uTWFzdGVyTWVudV0uc3ViX21lbnVfbGlzdC5wdXNoKHNpZGViYXJpdGVtc1tqXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsgLy8gZGVidWdnZXI7CiAgICAgIH0KCiAgICAgIG1lbnUgPSBPYmplY3QudmFsdWVzKG1lbnUpOyAvLyBmb3IgKGxldCBpID0gMCwgbiA9IG1lc3NhZ2UubGVuZ3RoOyBpIDwgbjsgaSArPSAxKSB7CiAgICAgIC8vICAgaWYgKG1lc3NhZ2VbaV0uRW5hYmxlZCAmJiBtZXNzYWdlW2ldLklzTWFzdGVyTWVudSkgewogICAgICAvLyAgICAgbGV0IG1lbnVGaWx0ZXIgPSBzaWRlYmFyaXRlbXMuZmlsdGVyKChzaWRlYmFyKSA9PiB7CiAgICAgIC8vICAgICAgIHJldHVybiAoCiAgICAgIC8vICAgICAgICAgc2lkZWJhci5uYW1lID09PSBtZXNzYWdlW2ldLk1lbnVJdGVtICYmIEJvb2xlYW4oc2lkZWJhci5zdmdfaHRtbCkKICAgICAgLy8gICAgICAgKTsKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgICAgaWYgKG1lbnVGaWx0ZXIubGVuZ3RoID4gMCkgewogICAgICAvLyAgICAgICBtYWluX21lbnUgPSBtZW51RmlsdGVyWzBdOwogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0gZWxzZSBpZiAoCiAgICAgIC8vICAgICBtZXNzYWdlW2ldLkhhc1N1Yk1lbnVzID09IGZhbHNlICYmCiAgICAgIC8vICAgICBtZXNzYWdlW2ldLkVuYWJsZWQgJiYKICAgICAgLy8gICAgIG1lc3NhZ2VbaV0uSXNTdWJNZW51ICYmCiAgICAgIC8vICAgICBPYmplY3Qua2V5cyhtYWluX21lbnUpLmxlbmd0aCA+IDAKICAgICAgLy8gICApIHsKICAgICAgLy8gICAgIGZvciAodmFyIGogaW4gc2lkZWJhcml0ZW1zKSB7CiAgICAgIC8vICAgICAgIGlmICgKICAgICAgLy8gICAgICAgICBzaWRlYmFyaXRlbXNbal0ubmFtZSA9PT0gbWVzc2FnZVtpXS5NZW51SXRlbSAmJgogICAgICAvLyAgICAgICAgIEJvb2xlYW4oc2lkZWJhcml0ZW1zW2pdLnBhZ2VfcGF0aCkKICAgICAgLy8gICAgICAgKSB7CiAgICAgIC8vICAgICAgICAgc3VibWVudXMucHVzaChzaWRlYmFyaXRlbXNbal0pOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfQogICAgICAvLyAgIGlmICgKICAgICAgLy8gICAgIGkgPT0gbiAtIDEgfHwKICAgICAgLy8gICAgIChtZXNzYWdlW2ldLklzTWFzdGVyTWVudSA9PSB0cnVlICYmCiAgICAgIC8vICAgICAgIG1lc3NhZ2VbaV0uSGFzU3ViTWVudXMgPT09IGZhbHNlICYmCiAgICAgIC8vICAgICAgICFCb29sZWFuKG1lc3NhZ2VbaV0uSXNTdWJNZW51KSAmJgogICAgICAvLyAgICAgICBtZXNzYWdlW2ldLkVuYWJsZWQpCiAgICAgIC8vICAgKSB7CiAgICAgIC8vICAgICBtZW51LnB1c2goewogICAgICAvLyAgICAgICBtYWluX21lbnU6IG1haW5fbWVudSwKICAgICAgLy8gICAgICAgc3ViX21lbnVfbGlzdDogc3VibWVudXMsCiAgICAgIC8vICAgICB9KTsKICAgICAgLy8gICAgIG1haW5fbWVudSA9IFtdOwogICAgICAvLyAgICAgc3VibWVudXMgPSBbXTsKICAgICAgLy8gICB9IGVsc2UgaWYgKAogICAgICAvLyAgICAgaSA8IG4gLSAxICYmCiAgICAgIC8vICAgICBtZXNzYWdlW2kgKyAxXS5Jc01hc3Rlck1lbnUgJiYKICAgICAgLy8gICAgICghQm9vbGVhbihtZXNzYWdlW2kgKyAxXS5Jc1N1Yk1lbnUpIHx8CiAgICAgIC8vICAgICAgIG1lc3NhZ2VbaSArIDFdLkhhc1N1Yk1lbnVzID09IHRydWUpICYmCiAgICAgIC8vICAgICBPYmplY3Qua2V5cyhtYWluX21lbnUpLmxlbmd0aCA+IDAKICAgICAgLy8gICApIHsKICAgICAgLy8gICAgIG1lbnUucHVzaCh7CiAgICAgIC8vICAgICAgIG1haW5fbWVudTogbWFpbl9tZW51LAogICAgICAvLyAgICAgICBzdWJfbWVudV9saXN0OiBzdWJtZW51cywKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgICAgbWFpbl9tZW51ID0gW107CiAgICAgIC8vICAgICBzdWJtZW51cyA9IFtdOwogICAgICAvLyAgIH0KICAgICAgLy8gfQoKICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoIkNoYXRib3RNZW51IiwgbWVudSk7IC8vIHdoaWxlICghdGhpcy5vcGVuX2JvdF9hcGlfcmVzcG9uc2VfcmVjZWl2ZWQpewoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ib3QvZGFzaGJvYXJkIik7IC8vIH0KICAgIH0KICB9Cn07"},null]}