{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/AddIntent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Data Inputs/AddIntent.vue","mtime":1660042032563},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvaG9tZS92aW1hbGVzaC9DRU5TRS9jaGF0Ym90LXBvcnRhbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKdmFyIF9uYW1lJGRhdGEkd2F0Y2gkY3JlYTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGFwaV9jYWxscyBmcm9tICJAL3BvcnRhbC9hcGlfY2FsbHMiOwppbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSAidGltZXJzIjsKZXhwb3J0IGRlZmF1bHQgKF9uYW1lJGRhdGEkd2F0Y2gkY3JlYSA9IHsKICBuYW1lOiAiYWRkLWludGVudCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzVmlzaWJsZVNlYXJjaENsZWFyOiBmYWxzZSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgY2hlY2tlZF9saXN0OiBbXSwKICAgICAgdG90YWxfcGFnZXM6IG51bGwsCiAgICAgIHBhZ2Vfbm86IDEsCiAgICAgIHBlcl9wYWdlOiAyMCwKICAgICAgbmV3X2ludGVudF9saXN0OiBbXSwKICAgICAgbmV3X2ludGVudHM6ICIiLAogICAgICBpbnRlbnRsaXN0OiBbXSwKICAgICAgY29tcGFueW5hbWU6ICIiLAogICAgICBjb21wYW55aWQ6ICIiLAogICAgICBudW1iZXJfb2Zfcm93czogbnVsbCwKICAgICAgZWRpdDogIkZhbHNlIiwKICAgICAgb2xkX2ludGVudF9kYXRhOiBbXSwKICAgICAgbmV3X2ludGVudF9kYXRhOiBbXSwKICAgICAgc2VhcmNoX25hbWU6ICIiLAogICAgICBwYWdlX2FycmF5OiBbXSwKICAgICAgYWRkX2ludGVudHNfbGlzdDogWyIiXSwKICAgICAgaXNHbG9iYWxFZGl0OiBmYWxzZSwKICAgICAgZ2xvYmFsX2ludGVudHNfZWRpdF9saXN0OiBbXSAvLyBzZWFyY2hfYnk6ICcnLAogICAgICAvLyBzZWFyY2hieTogJycsCgogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpc0dsb2JhbEVkaXQ6IGZ1bmN0aW9uIGlzR2xvYmFsRWRpdChuZXdWYWwpIHsKICAgICAgaWYgKEJvb2xlYW4obmV3VmFsKSkgewogICAgICAgIHRoaXMuZ2xvYmFsX2ludGVudHNfZWRpdF9saXN0ID0gdGhpcy5pbnRlbnRsaXN0Lm1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIGludGVudCA9IF9yZWYuaW50ZW50OwogICAgICAgICAgcmV0dXJuIGludGVudDsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikucm9sZSA9PSAiU3VwZXJBZG1pbiIpIHsKICAgICAgaWYgKHRoaXMuJHNlc3Npb24uaGFzKCJDb21wYW55SWQiKSkgewogICAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIkNvbXBhbnlJZCIpOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueU5hbWUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkOwogICAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgICAgIHRvYXN0ci53YXJuaW5nKHRoaXMudGx0KCdzZWxlY3RfY29tcGFueV9uYW1lX3RleHQnKSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29tcGFueWlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQ7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lOwogICAgfQoKICAgIHRoaXMubG9hZF9pbnRlbnRzKCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHZtID0gdGhpczsKICAgICQoIiNzZWxlY3RhbGwiKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgkKHRoaXMpLmlzKCI6Y2hlY2tlZCIpKSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICB9CiAgICB9KTsKICAgICQoIiNpbnRlbnRtb2RlbCIpLm9uKCJoaWRkZW4uYnMubW9kYWwiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCJpbnB1dDpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgIHZtLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgfSk7CgogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5tb2RhbF9vcGVuX3N3aXRjaF90YWIpIHsKICAgICAgJCgiI2ludGVudG1vZGVsIikubW9kYWwoInNob3ciKTsKICAgIH0gLy8gJCgiI2Zyb21fZGF0ZXBpY2tlciIpLmRhdGVwaWNrZXIoewogICAgLy8gICBkYXRlRm9ybWF0OiAieXktbW0tZGQiLAogICAgLy8gICBvbkNsb3NlOiAoZGF0ZVRleHQsIGluc3QpID0+IHsKICAgIC8vICAgICB0aGlzLnNlYXJjaF9uYW1lPWRhdGVUZXh0OwogICAgLy8gICB9LAogICAgLy8gICBvblNlbGVjdDogZnVuY3Rpb24oZGF0ZVRleHQsIGluc3QpIHsKICAgIC8vICAgfQogICAgLy8gfSk7CgogIH0KfSwgX2RlZmluZVByb3BlcnR5KF9uYW1lJGRhdGEkd2F0Y2gkY3JlYSwgIndhdGNoIiwgewogIHNlYXJjaF9uYW1lOiBmdW5jdGlvbiBzZWFyY2hfbmFtZSgpIHsKICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09PSAiIikgewogICAgICB0aGlzLmxvYWRfaW50ZW50cygpOwogICAgICB0aGlzLmlzVmlzaWJsZVNlYXJjaENsZWFyID0gZmFsc2U7CiAgICB9IGVsc2UgaWYgKHRoaXMuc2VhcmNoX25hbWUgIT09ICIiKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlU2VhcmNoQ2xlYXIgPSB0cnVlOwogICAgfQogIH0KfSksIF9kZWZpbmVQcm9wZXJ0eShfbmFtZSRkYXRhJHdhdGNoJGNyZWEsICJtZXRob2RzIiwgewogIGNsZWFyX3NlYXJjaF9uYW1lOiBmdW5jdGlvbiBjbGVhcl9zZWFyY2hfbmFtZSgpIHsKICAgIHRoaXMuc2VhcmNoX25hbWUgPSAiIjsKICB9LAogIGxvYWRfaW50ZW50czogZnVuY3Rpb24gbG9hZF9pbnRlbnRzKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICB0aGlzLmludGVudGxpc3QgPSBbXTsKICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgc2hvd2ludGVudDogIlRydWUiLAogICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9ICJ0b2tlbiBpbnZhbGlkIikgewogICAgICAgIF90aGlzLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YVszXS5udW1iZXJfb2Zfcm93czsKICAgICAgICBfdGhpcy50b3RhbF9wYWdlcyA9IE1hdGguY2VpbChfdGhpcy5udW1iZXJfb2Zfcm93cyAvIF90aGlzLnBlcl9wYWdlKTsKCiAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhWzBdKSB7CiAgICAgICAgICBfdGhpcy5pbnRlbnRsaXN0LnB1c2goewogICAgICAgICAgICBpbnRlbnQ6IHJlc3BvbnNlLmRhdGFbMF1baV0ucmVwbGFjZSgiIi5jb25jYXQoX3RoaXMuY29tcGFueWlkLCAiXyIpLCAiIiksCiAgICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgICAgICAgICBjcmVhdGVkOiByZXNwb25zZS5kYXRhWzJdW2ldCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIF90aGlzLnNldHBhZ2luYXRpb24oX3RoaXMucGFnZV9ubyk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBjYWxsc2VhcmNoOiBmdW5jdGlvbiBjYWxsc2VhcmNoKCkgewogICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7CiAgICAgIHRoaXMuc2VhcmNoX2ludGVudCgpOwogICAgfQogIH0sCiAgc2VhcmNoX2ludGVudDogZnVuY3Rpb24gc2VhcmNoX2ludGVudCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lICE9ICIiKSB7CiAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2ludGVudF91cmwoKSwgewogICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgIGNvbXBhbnlfbmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgaXNzZWFyY2g6IHRydWUsCiAgICAgICAga2V5OiB0aGlzLnNlYXJjaF9uYW1lLAogICAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlLAogICAgICAgIHBhZ2Vfbm86IDEKICAgICAgfSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHICE9ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiICYmIHJlc3BvbnNlLmRhdGEuTVNHICE9ICJObyBJbnRlbnRzIEZvdW5kIikgewogICAgICAgICAgX3RoaXMyLmludGVudGxpc3QgPSBbXTsKICAgICAgICAgIF90aGlzMi5wYWdlX25vID0gMTsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSAidG9rZW4gaW52YWxpZCIpIHsKICAgICAgICAgICAgX3RoaXMyLm51bWJlcl9vZl9yb3dzID0gcmVzcG9uc2UuZGF0YS5pbnRlbnRsaXN0Lmxlbmd0aDsKICAgICAgICAgICAgX3RoaXMyLnRvdGFsX3BhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdlY291bnQ7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIF90aGlzMi5pbnRlbnRsaXN0LnB1c2goewogICAgICAgICAgICAgICAgaW50ZW50OiByZXNwb25zZS5kYXRhLmludGVudGxpc3RbaV0uSW50ZW50LnJlcGxhY2UoX3RoaXMyLmNvbXBhbnlpZCArICJfIiwgIiIpLAogICAgICAgICAgICAgICAgZW1haWw6IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdFtpXS5DcmVhdGVkQnksCiAgICAgICAgICAgICAgICBjcmVhdGVkOiByZXNwb25zZS5kYXRhLmludGVudGxpc3RbaV0uQ3JlYXRlZERhdGUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMyLnNldHBhZ2luYXRpb24oX3RoaXMyLnBhZ2Vfbm8pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIEludGVudHMgRm91bmQiKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIk5vIGludGVudCBmb3VuZCIpOwogICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIkludHJuYWwgU2VydmVyIEVycm9yIikgewogICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRybmFsIFNlcnZlciBFcnJvciIpOyAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIC8vICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAvLyB9LCAyNTAwKTsKCiAgICAgICAgICBfdGhpczIubG9hZF9pbnRlbnRzKCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0b2FzdHIuZXJyb3IoIkVudGVyIHByb3BlciBkYXRhIGZvciBzZWFyY2hpbmciKTsKICAgIH0KICB9LAogIHNlbGVjdGVkX2ludGVudHM6IGZ1bmN0aW9uIHNlbGVjdGVkX2ludGVudHMoaW50ZW50KSB7CiAgICBpZiAoaW50ZW50ID09ICJhbGwiKSB7CiAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkgewogICAgICAgIHZhciB0ZW1wID0gdGhpcy5pbnRlbnRsaXN0OwogICAgICAgIHRoaXMuY2hlY2tlZF9saXN0ID0gdGVtcDsKICAgICAgfSBlbHNlIGlmICghZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IFtdOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgIHZhciB2YWxfaW5kZXggPSB0aGlzLmNoZWNrZWRfbGlzdC5maWx0ZXIoZnVuY3Rpb24gKGludGVudHMpIHsKICAgICAgICAgIHJldHVybiBpbnRlbnRzLmludGVudCA9PSBpbnRlbnQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmICh2YWxfaW5kZXgubGVuZ3RoID09IDApIHsKICAgICAgICAgIHRoaXMuY2hlY2tlZF9saXN0LnB1c2goaW50ZW50KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQgPT0gZmFsc2UpIHsKICAgICAgICB2YXIgc2VsZWN0YWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlbGVjdGFsbCIpOwoKICAgICAgICBpZiAoc2VsZWN0YWxsLmNoZWNrZWQgPT0gdHJ1ZSkgewogICAgICAgICAgc2VsZWN0YWxsLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBfdGVtcCA9IHRoaXMuY2hlY2tlZF9saXN0LmZpbHRlcihmdW5jdGlvbiAoaW50ZW50cykgewogICAgICAgICAgcmV0dXJuIGludGVudHMgIT0gaW50ZW50OwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLmNoZWNrZWRfbGlzdCA9IF90ZW1wOwogICAgICB9CiAgICB9CiAgfSwKICBwYWdlX2NoYW5nZTogZnVuY3Rpb24gcGFnZV9jaGFuZ2UocGFnZV9ubykgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYWRkX2ludGVudF91cmwoKSwgewogICAgICBpbnRlbnQ6IHRoaXMuY29tcGFueWlkICsgIl8iICsgdGhpcy5uZXdfaW50ZW50cywKICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIHN1YnNjcmlwdGlvbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbiwKICAgICAgc2hvd2ludGVudDogIlRydWUiLAogICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgIHBlcl9wYWdlOiB0aGlzLnBlcl9wYWdlCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgIF90aGlzMy5udW1iZXJfb2Zfcm93cyA9IHJlc3BvbnNlLmRhdGFbM10ubnVtYmVyX29mX3Jvd3M7CgogICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGFbMF0pIHsKICAgICAgICBfdGhpczMuaW50ZW50bGlzdC5wdXNoKHsKICAgICAgICAgIGludGVudDogcmVzcG9uc2UuZGF0YVswXVtpXS5yZXBsYWNlKF90aGlzMy5jb21wYW55aWQgKyAiXyIsICIiKSwKICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgICAgICAgY3JlYXRlZDogcmVzcG9uc2UuZGF0YVsyXVtpXQogICAgICAgIH0pOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICBfdGhpczMuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgZWRpdF9pbnRlbnQ6IGZ1bmN0aW9uIGVkaXRfaW50ZW50KGluZGV4KSB7CiAgICB0aGlzLm5ld19pbnRlbnRzID0gdGhpcy5pbnRlbnRsaXN0W2luZGV4XS5pbnRlbnQ7CiAgICB0aGlzLm9sZF9pbnRlbnRfZGF0YS5wdXNoKCIiLmNvbmNhdCh0aGlzLmNvbXBhbnlpZCwgIl8iKS5jb25jYXQodGhpcy5pbnRlbnRsaXN0W2luZGV4XS5pbnRlbnQpKTsKICAgIHRoaXMuZWRpdCA9ICJUcnVlIjsKICB9LAogIGRlbGV0ZV9zZWxlY3RlZDogZnVuY3Rpb24gZGVsZXRlX3NlbGVjdGVkKCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgaWYgKHRoaXMuY2hlY2tlZF9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgIFN3YWwuZmlyZSgiTm8gaW50ZW50IHNlbGVjdGVkISIsICIiLCAiZXJyb3IiKTsKICAgIH0gZWxzZSBpZiAodGhpcy5jaGVja2VkX2xpc3QubGVuZ3RoID4gMCkgewogICAgICBmb3IgKHZhciBpIGluIHRoaXMuY2hlY2tlZF9saXN0KSB7CiAgICAgICAgdGhpcy5uZXdfaW50ZW50X2xpc3QucHVzaCh0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuY2hlY2tlZF9saXN0W2ldKTsKICAgICAgfQoKICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogIkFyZSB5b3Ugc3VyZT8iLAogICAgICAgIHRleHQ6ICJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyEiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIGRlbGV0ZSEhIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmRlbGV0ZV9pbnRlbnRfdXJsKCksIHsKICAgICAgICAgICAgaW50ZW50X2xpc3Q6IF90aGlzNC5uZXdfaW50ZW50X2xpc3QsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM0LmNvbXBhbnluYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczQuY29tcGFueWlkLAogICAgICAgICAgICBlbWFpbDogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgdG9rZW46IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoX3RoaXM0LiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIklOVEVOVFMgREVMRVRFRCIpIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJZb3VyIEludGVudChzKSBoYXZlIGJlZW4gZGVsZXRlZC4iLAogICAgICAgICAgICAgICAgdGltZXI6IDIwMDAKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmxvYWRfaW50ZW50cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIk5vdGhpbmcgdG8gZGVsZXRlISIpIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdSBoYXZlIG5vdCBzZWxlY3RlZCBhbnkgaW50ZW50IHRvIGJlIGRlbGV0ZWQuIik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSA9PSAiVHJhaW5lZCBpbnRlbnQgZGVsZXRpb24gaXMgY3VycmVudGx5IGRpc2FibGVkISIpIHsKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIkRlbGV0aW9uIG9mIHRyYWluZWQvY29uZmlndXJlZCBpbnRlbnQgaXMgZGlzYWJsZWQuIEEgQ29kZWFycmF5IEFkbWluIHdpbGwgZ2V0IGluIGNvbnRhY3Qgd2l0aCB5b3UiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgZGVsZXRlX2ludGVudDogZnVuY3Rpb24gZGVsZXRlX2ludGVudChpbmRleCkgewogICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgdGhpcy5uZXdfaW50ZW50X2xpc3RbMF0gPSB0aGlzLmNvbXBhbnlpZCArICJfIiArIHRoaXMuaW50ZW50bGlzdFtpbmRleF0uaW50ZW50OwogICAgU3dhbC5maXJlKHsKICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgdGV4dDogIllvdSB3b24ndCBiZSBhYmxlIHRvIHJldmVydCB0aGlzISIsCiAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiIzMwODVkNiIsCiAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkZWxldGUgaXQhIgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICBfdGhpczUuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5kZWxldGVfaW50ZW50X3VybCgpLCB7CiAgICAgICAgICBpbnRlbnRfbGlzdDogX3RoaXM1Lm5ld19pbnRlbnRfbGlzdCwKICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM1LmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueV9pZDogX3RoaXM1LmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiBfdGhpczUuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBzdWJzY3JpcHRpb246IF90aGlzNS4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnN1YnNjcmlwdGlvbgogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChfdGhpczUuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczUuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIklOVEVOVFMgREVMRVRFRCIpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRleHQ6ICJZb3VyIEludGVudChzKSBoYXZlIGJlZW4gZGVsZXRlZC4iLAogICAgICAgICAgICAgIHRpbWVyOiAyMDAwLAogICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgICAgICAgX3RoaXM1LmxvYWRfaW50ZW50cygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIlRyYWluZWQgaW50ZW50IGRlbGV0aW9uIGlzIGN1cnJlbnRseSBkaXNhYmxlZCEiKSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiRGVsZXRpb24gb2YgdHJhaW5lZC9jb25maWd1cmVkIGludGVudCBpcyBkaXNhYmxlZC4gQSBDb2RlYXJyYXkgQWRtaW4gd2lsbCBnZXQgaW4gY29udGFjdCB3aXRoIHlvdSIpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXM1LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9LAogIHBhZ2VfcmVxdWlyZTogZnVuY3Rpb24gcGFnZV9yZXF1aXJlKHBhZ2UpIHsKICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgIGlmIChwYWdlID09IDAgfHwgcGFnZSA9PSB0aGlzLnRvdGFsX3BhZ2VzICsgMSkge30gZWxzZSB7CiAgICAgIGlmICh0aGlzLnNlYXJjaF9uYW1lID09ICIiKSB7CiAgICAgICAgaWYgKHBhZ2UgPT0gIi4uLnMiKSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBNYXRoLmNlaWwoKDEgKyB0aGlzLnBhZ2Vfbm8pIC8gMik7CiAgICAgICAgfSBlbHNlIGlmIChwYWdlID09ICIuLi5sIikgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gTWF0aC5jZWlsKCh0aGlzLnRvdGFsX3BhZ2VzICsgdGhpcy5wYWdlX25vKSAvIDIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBhZ2Vfbm8gPSBwYWdlOwogICAgICAgIH0KCiAgICAgICAgJCgiaW5wdXQ6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5hZGRfaW50ZW50X3VybCgpLCB7CiAgICAgICAgICBpbnRlbnQ6IHRoaXMubmV3X2ludGVudHMsCiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBzdWJzY3JpcHRpb246IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICBzaG93aW50ZW50OiAiVHJ1ZSIsCiAgICAgICAgICBwYWdlX25vOiB0aGlzLnBhZ2Vfbm8sCiAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZQogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgX3RoaXM2LmludGVudGxpc3QgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBpIGluIHJlc3BvbnNlLmRhdGFbMF0pIHsKICAgICAgICAgICAgX3RoaXM2LmludGVudGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgaW50ZW50OiByZXNwb25zZS5kYXRhWzBdW2ldLnJlcGxhY2UoX3RoaXM2LmNvbXBhbnlpZCArICJfIiwgIiIpLAogICAgICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhWzFdW2ldLAogICAgICAgICAgICAgIGNyZWF0ZWQ6IHJlc3BvbnNlLmRhdGFbMl1baV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM2LnNldHBhZ2luYXRpb24oX3RoaXM2LnBhZ2Vfbm8pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXM2LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGlmKHRoaXMuc2VhcmNoX2J5PT0nRW1haWwgQWRkcmVzcycpewogICAgICAgIC8vICAgdGhpcy5zZWFyY2hieT0nQ3JlYXRlZEJ5JzsKICAgICAgICAvLyB9CiAgICAgICAgLy8gZWxzZXsKICAgICAgICAvLyAgIHRoaXMuc2VhcmNoYnk9dGhpcy5zZWFyY2hfYnk7CiAgICAgICAgLy8gfQogICAgICAgICQoImlucHV0OmNoZWNrYm94IikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKCiAgICAgICAgaWYgKHBhZ2VubyA9PSAiLi4ucyIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgoMSArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgaWYgKHBhZ2VubyA9PSAiLi4ubCIpIHsKICAgICAgICAgIHRoaXMucGFnZV9ubyA9IE1hdGguY2VpbCgodGhpcy50b3RhbF9wYWdlcyArIHRoaXMucGFnZV9ubykgLyAyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wYWdlX25vID0gcGFnZW5vOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgIGlzc2VhcmNoOiB0cnVlLAogICAgICAgICAgLy8gc2VhcmNoYnk6IHRoaXMuc2VhcmNoYnksCiAgICAgICAgICBrZXk6IHRoaXMuc2VhcmNoX25hbWUsCiAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJfcGFnZSwKICAgICAgICAgIHBhZ2Vfbm86IHRoaXMucGFnZV9ubwogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgX3RoaXM2LmludGVudGxpc3QgPSBbXTsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnRlbnRsaXN0Lmxlbmd0aCkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSAidG9rZW4gaW52YWxpZCIpIHsKICAgICAgICAgICAgICBfdGhpczYubnVtYmVyX29mX3Jvd3MgPSByZXNwb25zZS5kYXRhLmludGVudGxpc3QubGVuZ3RoOwogICAgICAgICAgICAgIF90aGlzNi50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEucGFnZWNvdW50OwoKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgX3RoaXM2LmludGVudGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgIGludGVudDogcmVzcG9uc2UuZGF0YS5pbnRlbnRsaXN0W2ldLkludGVudC5yZXBsYWNlKF90aGlzNi5jb21wYW55aWQgKyAiXyIsICIiKSwKICAgICAgICAgICAgICAgICAgZW1haWw6IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdFtpXS5DcmVhdGVkQnksCiAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHJlc3BvbnNlLmRhdGEuaW50ZW50bGlzdFtpXS5DcmVhdGVkRGF0ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpczYuc2V0cGFnaW5hdGlvbihfdGhpczYucGFnZV9ubyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5NU0cgPT0gIk5vIEludGVudHMgRm91bmQiKSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiTm8gaW50ZW50IGZvdW5kIik7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHID09ICJJbnRybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIC8vICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIC8vIH0sIDI1MDApOwoKICAgICAgICAgICAgX3RoaXM2LmxvYWRfaW50ZW50cygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3RyLmVycm9yKCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIC8vICAgdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIC8vIH0sIDI1MDApOwoKICAgICAgICAgICAgX3RoaXM2LmxvYWRfaW50ZW50cygpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgX3RoaXM2LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBhZGRfaW50ZW50czogZnVuY3Rpb24gYWRkX2ludGVudHMoKSB7CiAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICBpZiAodGhpcy5pc0dsb2JhbEVkaXQpIHsKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICB2YXIgcmVzdWx0MSA9IFtdOwogICAgICB2YXIgcmVzdWx0MiA9IFtdOwogICAgICB2YXIgaW50ZW50c19tYXAgPSB0aGlzLmludGVudGxpc3QubWFwKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBpbnRlbnQgPSBfcmVmMi5pbnRlbnQ7CiAgICAgICAgcmV0dXJuIGludGVudDsKICAgICAgfSk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludGVudHNfbWFwLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsX2ludGVudHNfZWRpdF9saXN0LmluZGV4T2YoaW50ZW50c19tYXBbaV0pID09PSAtMSkgewogICAgICAgICAgcmVzdWx0MS5wdXNoKGludGVudHNfbWFwW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmdsb2JhbF9pbnRlbnRzX2VkaXRfbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpbnRlbnRzX21hcC5pbmRleE9mKHRoaXMuZ2xvYmFsX2ludGVudHNfZWRpdF9saXN0W2ldKSA9PT0gLTEpIHsKICAgICAgICAgIHJlc3VsdDIucHVzaCh0aGlzLmdsb2JhbF9pbnRlbnRzX2VkaXRfbGlzdFtpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocmVzdWx0Mi5zb21lKGZ1bmN0aW9uICh2YWwsIGkpIHsKICAgICAgICByZXR1cm4gcmVzdWx0Mi5pbmRleE9mKHZhbCkgIT09IGk7CiAgICAgIH0pKSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJZb3UgaGF2ZSBlbnRlcmVkIHNvbWUgaW50ZW50cyBtb3JlIHRoYW4gb25jZSwgZW5zdXJlIHVuaXF1ZSB2YWx1ZXMiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgb2xkX2ludGVudF9kYXRhID0gcmVzdWx0MS5tYXAoZnVuY3Rpb24gKGludGVudCkgewogICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChfdGhpczcuY29tcGFueWlkLCAiXyIpLmNvbmNhdChpbnRlbnQpOwogICAgICAgIH0pOwogICAgICAgIHZhciBuZXdfaW50ZW50X2RhdGEgPSByZXN1bHQyLm1hcChmdW5jdGlvbiAoaW50ZW50KSB7CiAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KF90aGlzNy5jb21wYW55aWQsICJfIikuY29uY2F0KGludGVudCk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5lZGl0X2ludGVudF9hcGkob2xkX2ludGVudF9kYXRhLCBuZXdfaW50ZW50X2RhdGEpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdCA9PSAiRmFsc2UiKSB7CiAgICAgIGlmICh0aGlzLmFkZF9pbnRlbnRzX2xpc3QuaW5jbHVkZXMoIiIpKSB7CiAgICAgICAgdG9hc3RyLmVycm9yKCJQbGVhc2UgRW50ZXIgdGhlIEludGVudCIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICB0aGlzLm5ld19pbnRlbnRfbGlzdCA9IHRoaXMuYWRkX2ludGVudHNfbGlzdC5tYXAoZnVuY3Rpb24gKGludGVudCkgewogICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChfdGhpczcuY29tcGFueWlkLCAiXyIpLmNvbmNhdChpbnRlbnQpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3Bpbm5lck9uID0gdHJ1ZTsKICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5hZGRfaW50ZW50X3VybCgpLCB7CiAgICAgICAgICBpbnRlbnQ6IHRoaXMubmV3X2ludGVudF9saXN0LAogICAgICAgICAgY29tcGFueV9uYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgICAgICAgY29tcGFueV9pZDogdGhpcy5jb21wYW55aWQsCiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICAgICAgc2hvd2ludGVudDogIkZhbHNlIgogICAgICAgIH0sIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM3Lm5ld19pbnRlbnRfbGlzdCA9IFtdOwogICAgICAgICAgX3RoaXM3LmFkZF9pbnRlbnRzX2xpc3QgPSBbIiJdOwogICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOwoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJVc2VyIFJvbGUgU2V0IikgewogICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGV4dDogIkZlZWRiYWNrIGFkZGVkIHN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgdGltZXI6IDIwMDAsCiAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICBfdGhpczcubG9hZF9pbnRlbnRzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gIkZhaWx1cmUiKSB7CiAgICAgICAgICAgIHZhciBteWh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgdmFyIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIik7CiAgICAgICAgICAgIHAuc3R5bGUudGV4dEFsaWduID0gImNlbnRlciI7IC8vIHAuc3R5bGUubWFyZ2luTGVmdCA9ICc1JSc7CgogICAgICAgICAgICBwLmlubmVySFRNTCA9ICJUaGUgZm9sbG93aW5nIGludGVudChzKSBhbHJlYWR5IGV4aXN0OiI7CiAgICAgICAgICAgIG15aHRtbC5hcHBlbmRDaGlsZChwKTsKICAgICAgICAgICAgdmFyIHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgICAgICAgdWwuc3R5bGUubWFyZ2luTGVmdCA9ICIxMCUiOwogICAgICAgICAgICB1bC5zZXRBdHRyaWJ1dGUoImlkIiwgInByb0xpc3QiKTsKICAgICAgICAgICAgdmFyIHByb2R1Y3RMaXN0ID0gcmVzcG9uc2UuZGF0YS5mYWlsZWRfaW50ZW50czsKICAgICAgICAgICAgcHJvZHVjdExpc3QgPSBwcm9kdWN0TGlzdC5tYXAoZnVuY3Rpb24gKGludGVudCkgewogICAgICAgICAgICAgIHJldHVybiBpbnRlbnQuc3BsaXQoX3RoaXM3LmNvbXBhbnlpZCArICJfIikucG9wKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBteWh0bWwuYXBwZW5kQ2hpbGQodWwpOwogICAgICAgICAgICBwcm9kdWN0TGlzdC5mb3JFYWNoKHJlbmRlclByb2R1Y3RMaXN0KTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbmRlclByb2R1Y3RMaXN0KGVsZW1lbnQsIGluZGV4LCBhcnIpIHsKICAgICAgICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpOwogICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaXRlbSIpOwogICAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTsKICAgICAgICAgICAgICBsaS5pbm5lckhUTUwgPSBsaS5pbm5lckhUTUwgKyBlbGVtZW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICB1bC5zdHlsZS5saXN0U3R5bGUgPSAiaW5pdGlhbCI7CiAgICAgICAgICAgIHVsLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmZhaWxlZF9pbnRlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBTd2FsKHsKICAgICAgICAgICAgICAgIGh0bWw6IG15aHRtbCwKICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiAvLyB0aXRsZTogIlRoZSBmb2xsb3dpbmcgaW50ZW50cyBhbHJlYWR5IGV4aXN0OiIKCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBmb2xsb3dpbmcgaW50ZW50cyBhbHJlYWR5IGV4aXN0OiIsCiAgICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJFcnJvciIpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0ZXh0OiAiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09ICJRdWVzdGlvbiBMaW1pdCBBbHJlYWR5IEV4Y2VlZGVkISIpIHsKICAgICAgICAgICAgU3dhbCh7CiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIHRleHQ6ICJZb3VyIGNhcGFjaXR5IHRvIGFkZCBxdWVzdGlvbnMgaGFzIGV4Y2VlZGVkLiBQbGVhc2UgdXBncmFkZSB5b3VyIHBsYW5zLiIsCiAgICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICBfdGhpczcuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vIHRoaXMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICQoIiNpbnRlbnRtb2RlbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0ID09ICJUcnVlIikgewogICAgICBpZiAodGhpcy5uZXdfaW50ZW50cyA9PSAiIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdGV4dDogIlBsZWFzZSBlbnRlciB0aGUgcmVxdWlyZWQgZmllbGRzIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5uZXdfaW50ZW50X2RhdGEucHVzaCgiIi5jb25jYXQodGhpcy5jb21wYW55aWQsICJfIikuY29uY2F0KHRoaXMubmV3X2ludGVudHMpKTsKICAgICAgICB0aGlzLmVkaXRfaW50ZW50X2FwaSh0aGlzLm9sZF9pbnRlbnRfZGF0YSwgdGhpcy5uZXdfaW50ZW50X2RhdGEpOwogICAgICB9CiAgICB9CiAgfSwKICBlZGl0X2ludGVudF9hcGk6IGZ1bmN0aW9uIGVkaXRfaW50ZW50X2FwaShvbGRfaW50ZW50X2RhdGEsIG5ld19pbnRlbnRfZGF0YSkgewogICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgJCgiI2ludGVudG1vZGVsIikubW9kYWwoImhpZGUiKTsKICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmFkZF9pbnRlbnRfdXJsKCksIHsKICAgICAgb2xkX2ludGVudF9kYXRhOiBvbGRfaW50ZW50X2RhdGEsCiAgICAgIG5ld19pbnRlbnRfZGF0YTogbmV3X2ludGVudF9kYXRhLAogICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuc3Vic2NyaXB0aW9uLAogICAgICBlZGl0aW50ZW50OiAiVHJ1ZSIKICAgIH0sIHsKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodGhpcy4kc2Vzc2lvbi5nZXQoImF0IikpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzOC5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgX3RoaXM4LmVkaXQgPT0gIkZhbHNlIjsKICAgICAgX3RoaXM4LmlzR2xvYmFsRWRpdCA9IGZhbHNlOyAvLyAkKCIjaW50ZW50bW9kZWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAvLyByZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIkZhaWxlZCB0byBlZGl0IGludGVudChzKSIgfHwKCiAgICAgIF90aGlzOC5jbGVhcl9maWVsZHMoKTsKCiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZmFpbGVkX2ludGVudHMpOwoKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJGYWlsdXJlIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRleHQ6ICJJbnRlbnQocykgYXJlIG5vdCB1cGRhdGVkLCBkdWUgdG8gc29tZSB0ZWNobmljYWwgaXNzdWVzLiIsCiAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgdGV4dDogIkludGVudChzKSBVcGRhdGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgIF90aGlzOC5sb2FkX2ludGVudHMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIkludGVybmFsIFNlcnZlciBFcnJvciIpIHsKICAgICAgICBTd2FsKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB0ZXh0OiAiVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iLAogICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICB9KTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgX3RoaXM4LiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIGNsZWFyX2ZpZWxkczogZnVuY3Rpb24gY2xlYXJfZmllbGRzKCkgewogICAgdGhpcy5uZXdfaW50ZW50cyA9IFtdOwogICAgdGhpcy5uZXdfaW50ZW50X2RhdGEgPSBbXTsKICAgIHRoaXMub2xkX2ludGVudF9kYXRhID0gW107CiAgICB0aGlzLmFkZF9pbnRlbnRzX2xpc3QgPSBbIiJdOwogICAgdGhpcy5lZGl0ID0gIkZhbHNlIjsKICB9LAogIHNldHBhZ2luYXRpb246IGZ1bmN0aW9uIHNldHBhZ2luYXRpb24ocGFnZV9ubykgewogICAgdGhpcy5wYWdlX2FycmF5ID0gW107CgogICAgaWYgKHRoaXMudG90YWxfcGFnZXMgPD0gNykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudG90YWxfcGFnZXM7IGkrKykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKGkgKyAxKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChwYWdlX25vID09IDEpIHsKICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IDQ7IF9pKyspIHsKICAgICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaChfaSArIDEpOwogICAgICB9CgogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIH0gZWxzZSBpZiAocGFnZV9ubyA9PSB0aGlzLnRvdGFsX3BhZ2VzKSB7CiAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKDEpOwogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ucyIpOwoKICAgICAgZm9yICh2YXIgX2kyID0gdGhpcy50b3RhbF9wYWdlcyAtIDQ7IF9pMiA8IHRoaXMudG90YWxfcGFnZXM7IF9pMisrKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2kyICsgMSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocGFnZV9ubyA8PSA0KSB7CiAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHBhZ2Vfbm8gKyAzOyBfaTMrKykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pMyArIDEpOwogICAgICB9CgogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgiLi4ubCIpOwogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCh0aGlzLnRvdGFsX3BhZ2VzKTsKICAgIH0gZWxzZSBpZiAocGFnZV9ubyA+PSB0aGlzLnRvdGFsX3BhZ2VzIC0gNCkgewogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgIGZvciAodmFyIF9pNCA9IHBhZ2Vfbm8gLSA0OyBfaTQgPCB0aGlzLnRvdGFsX3BhZ2VzOyBfaTQrKykgewogICAgICAgIHRoaXMucGFnZV9hcnJheS5wdXNoKF9pNCArIDEpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBhZ2VfYXJyYXkucHVzaCgxKTsKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLnMiKTsKCiAgICAgIGZvciAodmFyIF9pNSA9IHBhZ2Vfbm8gLSAzOyBfaTUgPD0gcGFnZV9ubyArIDM7IF9pNSsrKSB7CiAgICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goX2k1KTsKICAgICAgfQoKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2goIi4uLmwiKTsKICAgICAgdGhpcy5wYWdlX2FycmF5LnB1c2godGhpcy50b3RhbF9wYWdlcyk7CiAgICB9CiAgfSwKICAvLyByZXNldHBhZ2VudW1iZXIoKXsKICAvLyAgIHRoaXMucGFnZV9ubz0xOwogIC8vIH0sCiAgcGFnaW5hdGlvbl9jbGFzczogZnVuY3Rpb24gcGFnaW5hdGlvbl9jbGFzcyhpbmRleCkgewogICAgaWYgKGluZGV4ID09IHRoaXMucGFnZV9ubykgewogICAgICByZXR1cm4gIiBhY3RpdmUiOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0sCiAgYWRkX3RvX2ludGVudF9saXN0OiBmdW5jdGlvbiBhZGRfdG9faW50ZW50X2xpc3QodHlwZSwgaW5kZXgpIHsKICAgIGlmICh0eXBlID09ICJhZGQiKSB7CiAgICAgIHRoaXMuYWRkX2ludGVudHNfbGlzdC5wdXNoKCIiKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAicmVtb3ZlIikgewogICAgICB0aGlzLmFkZF9pbnRlbnRzX2xpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0KICB9Cn0pLCBfbmFtZSRkYXRhJHdhdGNoJGNyZWEpOw=="},null]}