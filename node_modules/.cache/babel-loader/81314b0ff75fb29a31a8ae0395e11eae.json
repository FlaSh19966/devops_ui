{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/AnalyticsConfigV2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/analytics/AnalyticsConfigV2.vue","mtime":1643027096184},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvdmltYWxlc2gvQ0VOU0UvY2hhdGJvdC1wb3J0YWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL3ZpbWFsZXNoL0NFTlNFL2NoYXRib3QtcG9ydGFsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgYXBpX2NhbGxzIGZyb20gIkAvcG9ydGFsL2FwaV9jYWxscyI7CmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJ2dWUtbXVsdGlzZWxlY3QiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCBzd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBbmFseXRpY3NDb25maWdWMiIsCiAgY29tcG9uZW50czogewogICAgTXVsdGlzZWxlY3Q6IE11bHRpc2VsZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3Bpbm5lck9uOiBmYWxzZSwKICAgICAgY29sdW1uczogW10sCiAgICAgIG1ldHJpY3M6IFtdLAogICAgICBmaWxlX2xhYmVsOiAiQ2hvb3NlIGZpbGUiLAogICAgICBpc19maWxlX3VwbG9hZGVkOiBmYWxzZSwKICAgICAgbmV3Y29sdW1uczogW10sCiAgICAgIGlzY29sdW1uc25hbWVjaGFuZ2VkOiBmYWxzZSwKICAgICAgb2JqZWN0X25hbWU6ICIiLAogICAgICBtZXRyaWNzZGF0YTogW10sCiAgICAgIGlzbWV0cmljc3NhdmVkOiBmYWxzZSwKICAgICAgZGF0YXNldF9uYW1lOiAiIiwKICAgICAgZmlsZTogbnVsbCwKICAgICAgbmV3Y29sdW1uc2NvbXBsZXRlOiBbXSwKICAgICAgY29sdW1uX2RldGFpbHM6IHt9LAogICAgICBpc19kYXRhc2V0X2VkaXRhYmxlOiBmYWxzZSwKICAgICAgZGF0YXNldHM6IFtdLAogICAgICBzaG93X2RhdGFzZXRfc2V0dGluZ3M6IGZhbHNlLAogICAgICAvLyBjb3VudHJ5X2NvZGVzOlsiQUZOIiwiRVVSIiwiQUxMIiwiRFpEIiwiVVNEIiwiRVVSIiwiQU9BIiwiWENEIiwiWENEIiwiQVJTIiwiQU1EIiwiQVdHIiwiQVVEIiwiRVVSIiwiQVpOIiwiQlNEIiwiQkhEIiwiQkRUIiwiQkJEIiwiQllOIiwiRVVSIiwiQlpEIiwiWE9GIiwiQk1EIiwiSU5SIiwiQlROIiwiQk9CIiwiQk9WIiwiVVNEIiwiQkFNIiwiQldQIiwiTk9LIiwiQlJMIiwiVVNEIiwiQk5EIiwiQkdOIiwiWE9GIiwiQklGIiwiQ1ZFIiwiS0hSIiwiWEFGIiwiQ0FEIiwiS1lEIiwiWEFGIiwiWEFGIiwiQ0xQIiwiQ0xGIiwiQ05ZIiwiQVVEIiwiQVVEIiwiQ09QIiwiQ09VIiwiS01GIiwiQ0RGIiwiWEFGIiwiTlpEIiwiQ1JDIiwiWE9GIiwiSFJLIiwiQ1VQIiwiQ1VDIiwiQU5HIiwiRVVSIiwiQ1pLIiwiREtLIiwiREpGIiwiWENEIiwiRE9QIiwiVVNEIiwiRUdQIiwiU1ZDIiwiVVNEIiwiWEFGIiwiRVJOIiwiRVVSIiwiRVRCIiwiRVVSIiwiRktQIiwiREtLIiwiRkpEIiwiRVVSIiwiRVVSIiwiRVVSIiwiWFBGIiwiRVVSIiwiWEFGIiwiR01EIiwiR0VMIiwiRVVSIiwiR0hTIiwiR0lQIiwiRVVSIiwiREtLIiwiWENEIiwiRVVSIiwiVVNEIiwiR1RRIiwiR0JQIiwiR05GIiwiWE9GIiwiR1lEIiwiSFRHIiwiVVNEIiwiQVVEIiwiRVVSIiwiSE5MIiwiSEtEIiwiSFVGIiwiSVNLIiwiSU5SIiwiSURSIiwiWERSIiwiSVJSIiwiSVFEIiwiRVVSIiwiR0JQIiwiSUxTIiwiRVVSIiwiSk1EIiwiSlBZIiwiR0JQIiwiSk9EIiwiS1pUIiwiS0VTIiwiQVVEIiwiS1BXIiwiS1JXIiwiS1dEIiwiS0dTIiwiTEFLIiwiRVVSIiwiTEJQIiwiTFNMIiwiWkFSIiwiTFJEIiwiTFlEIiwiQ0hGIiwiRVVSIiwiRVVSIiwiTU9QIiwiTUtEIiwiTUdBIiwiTVdLIiwiTVlSIiwiTVZSIiwiWE9GIiwiRVVSIiwiVVNEIiwiRVVSIiwiTVJPIiwiTVVSIiwiRVVSIiwiWFVBIiwiTVhOIiwiTVhWIiwiVVNEIiwiTURMIiwiRVVSIiwiTU5UIiwiRVVSIiwiWENEIiwiTUFEIiwiTVpOIiwiTU1LIiwiTkFEIiwiWkFSIiwiQVVEIiwiTlBSIiwiRVVSIiwiWFBGIiwiTlpEIiwiTklPIiwiWE9GIiwiTkdOIiwiTlpEIiwiQVVEIiwiVVNEIiwiTk9LIiwiT01SIiwiUEtSIiwiVVNEIiwiIiwiUEFCIiwiVVNEIiwiUEdLIiwiUFlHIiwiUEVOIiwiUEhQIiwiTlpEIiwiUExOIiwiRVVSIiwiVVNEIiwiUUFSIiwiRVVSIiwiUk9OIiwiUlVCIiwiUldGIiwiRVVSIiwiU0hQIiwiWENEIiwiWENEIiwiRVVSIiwiRVVSIiwiWENEIiwiV1NUIiwiRVVSIiwiU1REIiwiU0FSIiwiWE9GIiwiUlNEIiwiU0NSIiwiU0xMIiwiU0dEIiwiQU5HIiwiWFNVIiwiRVVSIiwiRVVSIiwiU0JEIiwiU09TIiwiWkFSIiwiIiwiU1NQIiwiRVVSIiwiTEtSIiwiU0RHIiwiU1JEIiwiTk9LIiwiU1pMIiwiU0VLIiwiQ0hGIiwiQ0hFIiwiQ0hXIiwiU1lQIiwiVFdEIiwiVEpTIiwiVFpTIiwiVEhCIiwiVVNEIiwiWE9GIiwiTlpEIiwiVE9QIiwiVFREIiwiVE5EIiwiVFJZIiwiVE1UIiwiVVNEIiwiQVVEIiwiVUdYIiwiVUFIIiwiQUVEIiwiR0JQIiwiVVNEIiwiVVNEIiwiVVNOIiwiVVlVIiwiVVlJIiwiVVpTIiwiVlVWIiwiVkVGIiwiVk5EIiwiVVNEIiwiVVNEIiwiWFBGIiwiTUFEIiwiWUVSIiwiWk1XIiwiWldMIiwiWEJBIiwiWEJCIiwiWEJDIiwiWEJEIiwiWFRTIiwiWFhYIiwiWEFVIiwiWFBEIiwiWFBUIiwiWEFHIiwiQUZBIiwiRklNIiwiQUxLIiwiQURQIiwiRVNQIiwiRlJGIiwiQU9LIiwiQU9OIiwiQU9SIiwiQVJBIiwiQVJQIiwiQVJZIiwiUlVSIiwiQVRTIiwiQVlNIiwiQVpNIiwiUlVSIiwiQllSIiwiQllCIiwiUlVSIiwiQkVDIiwiQkVGIiwiQkVMIiwiQk9QIiwiQkFEIiwiQlJCIiwiQlJDIiwiQlJFIiwiQlJOIiwiQlJSIiwiQkdKIiwiQkdLIiwiQkdMIiwiQlVLIiwiQ05YIiwiSFJEIiwiSFJLIiwiQ1lQIiwiQ1NKIiwiQ1NLIiwiRUNTIiwiRUNWIiwiR1FFIiwiRUVLIiwiWEVVIiwiRklNIiwiRlJGIiwiRlJGIiwiRlJGIiwiR0VLIiwiUlVSIiwiRERNIiwiREVNIiwiR0hDIiwiR0hQIiwiR1JEIiwiRlJGIiwiR05FIiwiR05TIiwiR1dFIiwiR1dQIiwiSVRMIiwiSVNKIiwiSUVQIiwiSUxQIiwiSUxSIiwiSVRMIiwiUlVSIiwiUlVSIiwiTEFKIiwiTFZMIiwiTFZSIiwiTFNNIiwiWkFMIiwiTFRMIiwiTFRUIiwiTFVDIiwiTFVGIiwiTFVMIiwiTUdGIiwiTVdLIiwiTVZRIiwiTUxGIiwiTVRMIiwiTVRQIiwiRlJGIiwiRlJGIiwiTVhQIiwiUlVSIiwiRlJGIiwiTVpFIiwiTVpNIiwiTkxHIiwiQU5HIiwiTklDIiwiUEVOIiwiUEVIIiwiUEVJIiwiUEVTIiwiUExaIiwiUFRFIiwiRlJGIiwiUk9LIiwiUk9OIiwiUk9MIiwiUlVSIiwiRlJGIiwiRlJGIiwiRlJGIiwiSVRMIiwiQ1NEIiwiRVVSIiwiU0tLIiwiU0lUIiwiWkFMIiwiU0RHIiwiUkhEIiwiRVNBIiwiRVNCIiwiRVNQIiwiU0REIiwiU0RQIiwiU1JHIiwiQ0hDIiwiUlVSIiwiVEpSIiwiSURSIiwiVFBFIiwiVFJMIiwiVFJZIiwiUlVSIiwiVE1NIiwiVUdTIiwiVUdXIiwiVUFLIiwiU1VSIiwiVVNTIiwiVVlOIiwiVVlQIiwiUlVSIiwiVkVCIiwiVkVGIiwiVkVGIiwiVk5DIiwiWUREIiwiWVVEIiwiWVVNIiwiWVVOIiwiWlJOIiwiWlJaIiwiWk1LIiwiWldDIiwiWldEIiwiWldEIiwiWldOIiwiWldSIiwiWEZPIiwiWFJFIiwiWEZVIl0sIAogICAgICBjb3VudHJ5X2lzb19jb2RlOiBudWxsLAogICAgICBjdXJyZW5jeV9mb3JtYXRfbW9kYWw6ICcnLAogICAgICBpc19jb3VudHJ5X2NvZGVzX2Ryb3Bkb3duX2Rpc2FibGVkOiB0cnVlLAogICAgICBjdXJyZW50X2NvbHVtbl9pbmRleDogbnVsbCwKICAgICAgYWdncmVnYXRpb25fb3B0aW9uczogW251bGwsICJTVU0iLCAiQVZHIl0sCiAgICAgIHNhbXBsZTogIiIsCiAgICAgIGNvdW50cnlfY29kZXM6IFsiQUxMIiwgIkFGTiIsICJBUlMiLCAiQVdHIiwgIkFVRCIsICJBWk4iLCAiQlNEIiwgIkJCRCIsICJCWVIiLCAiQlpEIiwgIkJNRCIsICJCT0IiLCAiQkFNIiwgIkJXUCIsICJCR04iLCAiQlJMIiwgIkJORCIsICJLSFIiLCAiQ0FEIiwgIktZRCIsICJDTFAiLCAiQ05ZIiwgIkNPUCIsICJDUkMiLCAiSFJLIiwgIkNVUCIsICJDWksiLCAiREtLIiwgIkRPUCIsICJFR1AiLCAiU1ZDIiwgIkVFSyIsICJFVVIiLCAiRktQIiwgIkZKRCIsICJHRUwiLCAiR0hDIiwgIkdJUCIsICJHVFEiLCAiR0dQIiwgIkdZRCIsICJITkwiLCAiSEtEIiwgIkhVRiIsICJJU0siLCAiSU5SIiwgIklEUiIsICJJUlIiLCAiSU1QIiwgIklMUyIsICJKTUQiLCAiSlBZIiwgIkpFUCIsICJLWlQiLCAiS1BXIiwgIktSVyIsICJLR1MiLCAiTEFLIiwgIkxWTCIsICJMQlAiLCAiTFJEIiwgIkxUTCIsICJNS0QiLCAiTVlSIiwgIk1VUiIsICJNWE4iLCAiTU5UIiwgIk1aTiIsICJOQUQiLCAiTlBSIiwgIkFORyIsICJOWkQiLCAiTklPIiwgIk5HTiIsICJOT0siLCAiT01SIiwgIlBLUiIsICJQQUIiLCAiUFlHIiwgIlBFTiIsICJQSFAiLCAiUExOIiwgIlFBUiIsICJST04iLCAiUlVCIiwgIlNIUCIsICJTQVIiLCAiUlNEIiwgIlNDUiIsICJTR0QiLCAiU0JEIiwgIlNPUyIsICJaQVIiLCAiTEtSIiwgIlNFSyIsICJDSEYiLCAiU1JEIiwgIlNZUCIsICJUV0QiLCAiVEhCIiwgIlRURCIsICJUUkwiLCAiVFZEIiwgIlVBSCIsICJHQlAiLCAiVVNEIiwgIlVZVSIsICJVWlMiLCAiVkVGIiwgIlZORCIsICJZRVIiLCAiWldEIl0sCiAgICAgIG1ldHJpY19vcGVyYXRpb25fb3B0aW9uczogWydTVU0nLCAnQVZHJywgJ0NPVU5UJywgJ05VTklRVUUnXSwKICAgICAgb2xkX3dvcmtzaGVldF9kZXRhaWxzOiB7fSwKICAgICAgcG9zdGdyZXNfaWNvbl9wYXRoOiByZXF1aXJlKCdAL3BvcnRhbC9hc3NldHMvaW1nL3Bvc3RncmVzX2ljb24ucG5nJyksCiAgICAgIC8vIG15c3FsX2ljb25fcGF0aDogcmVxdWlyZSgnQC9wb3J0YWwvYXNzZXRzL2ltZy9teXNxbF9pY29uLnBuZycpLAogICAgICBteXNxbF9pY29uX3BhdGg6IHJlcXVpcmUoJ0AvcG9ydGFsL2Fzc2V0cy9pbWcvbG9nby1teXNxbC5wbmcnKSwKICAgICAgc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzOiBmYWxzZSwKICAgICAgZGF0YWJhc2VfZGF0YXNldF9pZDogbnVsbCwKICAgICAgZGF0YWJhc2VfZGF0YXNldF9uYW1lOiBudWxsLAogICAgICBkYXRhYmFzZV9zY2hlbWFfbmFtZTogbnVsbCwKICAgICAgZGF0YWJhc2VfamRiY19jb25uZWN0aW9uX3N0cmluZzogbnVsbCwKICAgICAgZGF0YWJhc2VfaG9zdDogbnVsbCwKICAgICAgZGF0YWJhc2VfcG9ydDogbnVsbCwKICAgICAgZGF0YWJhc2VfdXNlcm5hbWU6IG51bGwsCiAgICAgIGRhdGFiYXNlX3Bhc3N3b3JkOiBudWxsLAogICAgICBkYXRhYmFzZV9kYl9uYW1lOiBudWxsLAogICAgICBzaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3NfZGV0YWlsczogZmFsc2UsCiAgICAgIGN1cnJlbnRfZGF0YXNldF9kYXRhYmFzZV9pY29uOiBudWxsLAogICAgICBpc1Nob3dpbmdfdGVzdDogZmFsc2UsCiAgICAgIHNob3dfZGF0YWJhc2Vfb3B0aW9uczogdHJ1ZSwKICAgICAgZGF0YWJhc2VfZGF0YXNldF9jb25uZWN0aW9uX3R5cGU6ICdKREJDJwogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldF9kYXRhc2V0X2xpc3QoKTsgLy8gdGhpcy5wb3N0Z3Jlc19pY29uX3BhdGggPSByZXF1aXJlKCdAL3BvcnRhbC9hc3NldHMvaW1nL3Bvc3RncmVzX2ljb24ucG5nJykKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5fc2V0dGluZ3NfZm9yX2RhdGFzZXQ6IGZ1bmN0aW9uIG9wZW5fc2V0dGluZ3NfZm9yX2RhdGFzZXQoaW5kZXgpIHsKICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgpOwogICAgICBpZiAoaW5kZXggPT09IG51bGwpIHsKICAgICAgICB0aGlzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhc2V0c1tpbmRleF0pCiAgICAgICAgdGhpcy5vbGRfd29ya3NoZWV0X2RldGFpbHMgPSB0aGlzLmRhdGFzZXRzW2luZGV4XS5vbGRfd29ya3NoZWV0X2RldGFpbHM7CiAgICAgICAgdGhpcy5pc19kYXRhc2V0X2VkaXRhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSB0aGlzLmRhdGFzZXRzW2luZGV4XS5maWxlX25hbWU7CiAgICAgICAgJCgiI2lucHV0R3JvdXBGaWxlMDEiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICQoIiNkYXRhc2V0X25hbWUiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgIHRoaXMuZGF0YXNldF9uYW1lID0gdGhpcy5kYXRhc2V0c1tpbmRleF0uZGF0YV9uYW1lOwogICAgICAgICQoIiN1cGxvYWRfZmlsZSIpLmhpZGUoKTsgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbMF0ud29ya3NoZWV0X2RldGFpbHMuY29sdW1uX2RldGFpbHMpOwoKICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3QkZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLmNvbHVtbl9yZW5hbWVfbWFwKTsgX2kgPCBfT2JqZWN0JGVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzW19pXSwgMiksCiAgICAgICAgICAgICAga2V5ID0gX09iamVjdCRlbnRyaWVzJF9pWzBdLAogICAgICAgICAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzJF9pWzFdOwoKICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgbmFtZToga2V5LAogICAgICAgICAgICBuZXduYW1lOiB2YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmlzX2ZpbGVfdXBsb2FkZWQgPSB0cnVlOwogICAgICAgIHZhciBtZXRyaWNzX2xlbiA9IHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLm1ldHJpY3MubGVuZ3RoOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldHJpY3NfbGVuOyBpKyspIHsKICAgICAgICAgIHRoaXMubWV0cmljcy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdGhpcy5kYXRhc2V0c1tpbmRleF0ud29ya3NoZWV0X2RldGFpbHMubWV0cmljc1tpXS5uYW1lLAogICAgICAgICAgICBjb2x1bW46IHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLm1ldHJpY3NbaV0uY29sdW1uLAogICAgICAgICAgICBvcGVyYXRpb246IHRoaXMuZGF0YXNldHNbaW5kZXhdLndvcmtzaGVldF9kZXRhaWxzLm1ldHJpY3NbaV0ub3BlcmF0aW9uCiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIGRlYnVnZ2VyOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWV0cmljcyk7CgoKICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLm1ldHJpY3MubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgdGhpcy5tZXRyaWNzZGF0YS5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdGhpcy5tZXRyaWNzW19pMl0ubmFtZSwKICAgICAgICAgICAgY29sdW1uOiB0aGlzLm1ldHJpY3NbX2kyXS5jb2x1bW4sCiAgICAgICAgICAgIG9wZXJhdGlvbjogdGhpcy5tZXRyaWNzW19pMl0ub3BlcmF0aW9uIC8vIG9uOiBbdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjEsIHRoaXMubWV0cmljc1tpXS5jb2x1bW4yXQoKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIG9iamVjdCA9IHRoaXMuY29sdW1ucy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgaXRlbSkgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCBfZGVmaW5lUHJvcGVydHkoe30sIGl0ZW0ubmFtZSwgaXRlbS5uZXduYW1lKSk7CiAgICAgICAgfSwge30pOwoKICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBfT2JqZWN0JGVudHJpZXMyID0gT2JqZWN0LmVudHJpZXModGhpcy5kYXRhc2V0c1tpbmRleF0ud29ya3NoZWV0X2RldGFpbHMuY29sdW1uX2RldGFpbHMpOyBfaTMgPCBfT2JqZWN0JGVudHJpZXMyLmxlbmd0aDsgX2kzKyspIHsKICAgICAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMyJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzMltfaTNdLCAyKSwKICAgICAgICAgICAgICBfa2V5ID0gX09iamVjdCRlbnRyaWVzMiRfaVswXSwKICAgICAgICAgICAgICBfdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzFdOwoKICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IF9pNCsrKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbnNbX2k0XS5uZXduYW1lID09PSBfa2V5KSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codmFsdWUuY3VycmVuY3lfZm9ybWF0KTsKICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNbX2k0XS5kYXRhX3R5cGUgPSBfdmFsdWUuZGF0YXR5cGU7CiAgICAgICAgICAgICAgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmNvbHVtbnNbX2k0XS5uYW1lLAogICAgICAgICAgICAgICAgbmV3bmFtZTogdGhpcy5jb2x1bW5zW19pNF0ubmV3bmFtZSwKICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogX3ZhbHVlLmRhdGF0eXBlLAogICAgICAgICAgICAgICAgY29sdW1uX3R5cGU6IF92YWx1ZS5jb2x1bW5fdHlwZSwKICAgICAgICAgICAgICAgIGFkZGl0aXZlOiBfdmFsdWUuYWRkaXRpdmUsCiAgICAgICAgICAgICAgICBhZ2dyZWdhdGlvbjogX3ZhbHVlLmFnZ3JlZ2F0aW9uID09PSBudWxsID8gX3ZhbHVlLmFnZ3JlZ2F0aW9uID0gIk5vbmUiIDogX3ZhbHVlLmFnZ3JlZ2F0aW9uID0gX3ZhbHVlLmFnZ3JlZ2F0aW9uLAogICAgICAgICAgICAgICAgaGlkZGVuOiBfdmFsdWUuaGlkZGVuLAogICAgICAgICAgICAgICAgbmxwX3NlYXJjaF9lbmFibGVkOiBfdmFsdWUubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAgICAgc3lub255bXM6IF92YWx1ZS5zeW5vbnltcyA/IHVuZGVmaW5lZCA6ICIiLAogICAgICAgICAgICAgICAgaW5kZXhfdHlwZTogX3ZhbHVlLmluZGV4X3R5cGUsCiAgICAgICAgICAgICAgICBlbnRpdHlfY2F0ZWdvcnk6IF92YWx1ZS5lbnRpdHlfY2F0ZWdvcnksCiAgICAgICAgICAgICAgICBjdXJyZW5jeV9mb3JtYXQ6IF92YWx1ZS5jdXJyZW5jeV9mb3JtYXQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfdmFsdWUuY3VycmVuY3lfZm9ybWF0CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gLy8gYnJlYWs7CgogICAgICAgICAgfQogICAgICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGUpOwogICAgICAgIC8vIGNvbnNvbGUubG9nCgoKICAgICAgICB2YXIgYXJyYXkgPSB7fTsKICAgICAgICB2YXIgd29ya3NoZWV0X2RldGFpbHMgPSB7fTsKCiAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUubGVuZ3RoOyBfaTUrKykgewogICAgICAgICAgdmFyIHRlbXAgPSB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVtfaTVdOyAvLyBjb25zb2xlLmxvZyh0ZW1wLmN1cnJlbmN5X2Zvcm1hdCkKICAgICAgICAgIC8vIHRlbXAuc3lub255bXMgPSB0ZW1wLnN5bm9ueW1zLnJlcGxhY2UoLywvZywgJz4+Jyk7CgogICAgICAgICAgd29ya3NoZWV0X2RldGFpbHNbdGVtcC5uZXduYW1lXSA9IHsKICAgICAgICAgICAgImRhdGF0eXBlIjogIiIuY29uY2F0KHRlbXAuZGF0YV90eXBlKSwKICAgICAgICAgICAgImNvbHVtbl90eXBlIjogIiIuY29uY2F0KHRlbXAuY29sdW1uX3R5cGUpLAogICAgICAgICAgICAiYWRkaXRpdmUiOiB0ZW1wLmFkZGl0aXZlLAogICAgICAgICAgICAiYWdncmVnYXRpb24iOiB0ZW1wLmFnZ3JlZ2F0aW9uLAogICAgICAgICAgICAiaGlkZGVuIjogdGVtcC5oaWRkZW4sCiAgICAgICAgICAgICJubHBfc2VhcmNoX2VuYWJsZWQiOiB0ZW1wLm5scF9zZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgImluZGV4X3R5cGUiOiAiIi5jb25jYXQodGVtcC5pbmRleF90eXBlKSwKICAgICAgICAgICAgInN5bm9ueW1zIjogIiIuY29uY2F0KHRlbXAuc3lub255bXMpLAogICAgICAgICAgICAiZW50aXR5X2NhdGVnb3J5IjogIiIuY29uY2F0KHRlbXAuZW50aXR5X2NhdGVnb3J5KSwKICAgICAgICAgICAgImN1cnJlbmN5X2Zvcm1hdCI6IHRlbXAuY3VycmVuY3lfZm9ybWF0CiAgICAgICAgICB9OyAvLyB0ZW1wLnN5bm9ueW1zID0gdGVtcC5zeW5vbnltcy5yZXBsYWNlKC8+PiAvZywgJywnKTsKICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHdvcmtzaGVldF9kZXRhaWxzKTsKCgogICAgICAgIHRoaXMuY29sdW1uX2RldGFpbHMgPSBPYmplY3QuYXNzaWduKHdvcmtzaGVldF9kZXRhaWxzKTsgLy8gY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGUsdGhpcy5jb2x1bW5fZGV0YWlscyk7CgogICAgICAgIHRoaXMubmV3Y29sdW1ucyA9IG9iamVjdDsKICAgICAgICB0aGlzLmlzY29sdW1uc25hbWVjaGFuZ2VkID0gdHJ1ZTsKICAgICAgICB0aGlzLmlzbWV0cmljc3NhdmVkID0gdHJ1ZTsKICAgICAgICB0aGlzLnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gdHJ1ZTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQoIiNpbnB1dEdyb3VwRmlsZTAxIikucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICAgICQoIiNkYXRhc2V0X25hbWUiKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0KICAgIH0sCiAgICBnZW5lcmF0ZVVVSUQ6IGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHsKICAgICAgLy8gUHVibGljIERvbWFpbi9NSVQKICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgLy9UaW1lc3RhbXAKCiAgICAgIHZhciBkMiA9IHBlcmZvcm1hbmNlICYmIHBlcmZvcm1hbmNlLm5vdyAmJiBwZXJmb3JtYW5jZS5ub3coKSAqIDEwMDAgfHwgMDsgLy9UaW1lIGluIG1pY3Jvc2Vjb25kcyBzaW5jZSBwYWdlLWxvYWQgb3IgMCBpZiB1bnN1cHBvcnRlZAoKICAgICAgcmV0dXJuICJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgiLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHsKICAgICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNjsgLy9yYW5kb20gbnVtYmVyIGJldHdlZW4gMCBhbmQgMTYKCiAgICAgICAgaWYgKGQgPiAwKSB7CiAgICAgICAgICAvL1VzZSB0aW1lc3RhbXAgdW50aWwgZGVwbGV0ZWQKICAgICAgICAgIHIgPSAoZCArIHIpICUgMTYgfCAwOwogICAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy9Vc2UgbWljcm9zZWNvbmRzIHNpbmNlIHBhZ2UtbG9hZCBpZiBzdXBwb3J0ZWQKICAgICAgICAgIHIgPSAoZDIgKyByKSAlIDE2IHwgMDsKICAgICAgICAgIGQyID0gTWF0aC5mbG9vcihkMiAvIDE2KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoYyA9PT0gIngiID8gciA6IHIgJiAweDMgfCAweDgpLnRvU3RyaW5nKDE2KTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdHZhbHVlOiBmdW5jdGlvbiBlZGl0dmFsdWUoaW5kZXgpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlucHV0IiArIGluZGV4KS5kaXNhYmxlZCA9ICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5wdXQiICsgaW5kZXgpLmRpc2FibGVkOwogICAgfSwKICAgIGdldEZpbGU6IGZ1bmN0aW9uIGdldEZpbGUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBmaWxlbmFtZSA9ICIiOwogICAgICB2YXIgZmlsZWRhdGEgPSAiIjsKICAgICAgdmFyIGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgdGhpcy5maWxlX2xhYmVsID0gZmlsZS5uYW1lOyAvLyBjb25zb2xlLmxvZyhmaWxlKTsKCiAgICAgIGlmIChmaWxlLnR5cGUgIT0gInRleHQvY3N2IikgewogICAgICAgIFN3YWwoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIHRleHQ6ICJPbmx5IENTViBmaWxlcyBjYW4gYmUgdXBsb2FkZWQuIiwKICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5maWxlX2xhYmVsID0gIkNob29zZSBmaWxlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgfQogICAgfSwKICAgIGFkZG1ldHJpY3ZhbHVlOiBmdW5jdGlvbiBhZGRtZXRyaWN2YWx1ZSgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5tZXRyaWNzLnB1c2goewogICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgb3BlcmF0aW9uOiAiU1VNIiwKICAgICAgICBjb2x1bW46IG51bGwKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlaGVhZGVyOiBmdW5jdGlvbiBkZWxldGVoZWFkZXIodmFsdWVpbmRleCkgewogICAgICB0aGlzLm1ldHJpY3Muc3BsaWNlKHZhbHVlaW5kZXgsIDEpOwogICAgfSwKICAgIGVkaXRjb2x1bW5zOiBmdW5jdGlvbiBlZGl0Y29sdW1ucygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB2YWxpZGF0aW9uX3N1Y2Nlc3MgPSB0cnVlOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jb2x1bW5zW2ldLm5ld25hbWUgPT09ICcnIHx8IHRoaXMuY29sdW1uc1tpXS5uZXduYW1lLnNwbGl0KCcgJykuam9pbignJykgPT09ICcnKSB7CiAgICAgICAgICB0b2FzdHIuZXJyb3IoIllvdSBjYW5ub3Qgc2V0IGNvbHVtbiBuYW1lcyBFbXB0eSIpOwogICAgICAgICAgdmFsaWRhdGlvbl9zdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh2YWxpZGF0aW9uX3N1Y2Nlc3MpIHsKICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICAgIHRleHQ6ICIgWW91IHdhbnQgdG8gRWRpdCB0aGUgQ29sdW1ucz8iLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgIC8vIGRlYnVnZ2VyOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbHVtbnMpCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1uX2RldGFpbHMpOwogICAgICAgICAgICAvLyB0aGlzLm5ld2NvbHVtbnMgPSB0aGlzLmNvbHVtbnMKICAgICAgICAgICAgdmFyIG5ld2NvbHVtbnNkYXRhID0gW107CgogICAgICAgICAgICBpZiAoIV90aGlzLmlzX2RhdGFzZXRfZWRpdGFibGUpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfaTYgPSAwOyBfaTYgPCBfdGhpcy5jb2x1bW5zLmxlbmd0aDsgX2k2KyspIHsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1uc1tpXSkKICAgICAgICAgICAgICAgIG5ld2NvbHVtbnNkYXRhLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpcy5jb2x1bW5zW19pNl0ubmFtZSwKICAgICAgICAgICAgICAgICAgbmV3bmFtZTogX3RoaXMuY29sdW1uc1tfaTZdLm5ld25hbWUsCiAgICAgICAgICAgICAgICAgIGRhdGFfdHlwZTogX3RoaXMuY29sdW1uc1tfaTZdLmRhdGFfdHlwZSwKICAgICAgICAgICAgICAgICAgY29sdW1uX3R5cGU6ICJNZXRyaWMiLAogICAgICAgICAgICAgICAgICBhZGRpdGl2ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uOiAiTm9uZSIsCiAgICAgICAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIG5scF9zZWFyY2hfZW5hYmxlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHN5bm9ueW1zOiAiIiwKICAgICAgICAgICAgICAgICAgaW5kZXhfdHlwZTogIkRFRkFVTFQiLAogICAgICAgICAgICAgICAgICBlbnRpdHlfY2F0ZWdvcnk6ICJQRVJTT04iLAogICAgICAgICAgICAgICAgICBjdXJyZW5jeV9mb3JtYXQ6ICJOb25lIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZvciAodmFyIF9pNyA9IDAsIF9PYmplY3QkZW50cmllczMgPSBPYmplY3QuZW50cmllcyhfdGhpcy5jb2x1bW5fZGV0YWlscyk7IF9pNyA8IF9PYmplY3QkZW50cmllczMubGVuZ3RoOyBfaTcrKykgewogICAgICAgICAgICAgICAgdmFyIF9PYmplY3QkZW50cmllczMkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXMzW19pN10sIDIpLAogICAgICAgICAgICAgICAgICAgIGtleSA9IF9PYmplY3QkZW50cmllczMkX2lbMF0sCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMzJF9pWzFdOwoKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSwgdmFsdWUpCiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBfdGhpcy5jb2x1bW5zLmxlbmd0aDsgX2k4KyspIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbHVtbnNbX2k4XS5uYW1lID09PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICBuZXdjb2x1bW5zZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLmNvbHVtbnNbX2k4XS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgbmV3bmFtZTogX3RoaXMuY29sdW1uc1tfaThdLm5ld25hbWUsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhX3R5cGU6IF90aGlzLmNvbHVtbnNbX2k4XS5kYXRhX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5fdHlwZTogdmFsdWUuY29sdW1uX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICBhZGRpdGl2ZTogdmFsdWUuYWRkaXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGlvbjogdmFsdWUuYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46IHZhbHVlLmhpZGRlbiwKICAgICAgICAgICAgICAgICAgICAgIG5scF9zZWFyY2hfZW5hYmxlZDogdmFsdWUubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAgICAgICAgICAgc3lub255bXM6IHZhbHVlLnN5bm9ueW1zLAogICAgICAgICAgICAgICAgICAgICAgaW5kZXhfdHlwZTogdmFsdWUuaW5kZXhfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIGVudGl0eV9jYXRlZ29yeTogdmFsdWUuZW50aXR5X2NhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lfZm9ybWF0OiB2YWx1ZS5jdXJyZW5jeV9mb3JtYXQKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAvLyAgIG5ld2NvbHVtbnNkYXRhLnB1c2goewogICAgICAgICAgICAgIC8vICAgICBuYW1lOiB0aGlzLmNvbHVtbnNbaV0ubmFtZSwKICAgICAgICAgICAgICAvLyAgICAgbmV3bmFtZTogdGhpcy5jb2x1bW5zW2ldLm5ld25hbWUsCiAgICAgICAgICAgICAgLy8gICAgIGRhdGFfdHlwZSA6IHRoaXMuY29sdW1uc1tpXS5kYXRhX3R5cGUsCiAgICAgICAgICAgICAgLy8gICAgIGNvbHVtbl90eXBlOiB0aGlzLmNvbHVtbnNbaV0uY29sdW1uX3R5cGUsCiAgICAgICAgICAgICAgLy8gICAgIGFkZGl0aXZlOiB0aGlzLmNvbHVtbnNbaV0uYWRkaXRpdmUsCiAgICAgICAgICAgICAgLy8gICAgIGFnZ3JlZ2F0aW9uOiB0aGlzLmNvbHVtbnNbaV0uYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgLy8gICAgIGhpZGRlbjogdGhpcy5jb2x1bW5zW2ldLmhpZGRlbiwKICAgICAgICAgICAgICAvLyAgICAgbmxwX3NlYXJjaF9lbmFibGVkOiB0aGlzLmNvbHVtbnNbaV0ubmxwX3NlYXJjaF9lbmFibGVkLAogICAgICAgICAgICAgIC8vICAgICBzeW5vbnltczogdGhpcy5jb2x1bW5zW2ldLnN5bm9ueW1zLAogICAgICAgICAgICAgIC8vICAgICBpbmRleF90eXBlOiB0aGlzLmNvbHVtbnNbaV0uaW5kZXhfdHlwZSwKICAgICAgICAgICAgICAvLyAgICAgZW50aXR5X2NhdGVnb3J5OiB0aGlzLmNvbHVtbnNbaV0uZW50aXR5X2NhdGVnb3J5LAogICAgICAgICAgICAgIC8vICAgICBjdXJyZW5jeV9mb3JtYXQ6IHRoaXMuY29sdW1uc1tpXS5jdXJyZW5jeV9mb3JtYXQgCiAgICAgICAgICAgICAgLy8gICB9KTsKICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKG5ld2NvbHVtbnNkYXRhKTsKCgogICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3Y29sdW1uc2RhdGEucmVkdWNlKGZ1bmN0aW9uIChvYmosIGl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIF9kZWZpbmVQcm9wZXJ0eSh7fSwgaXRlbS5uYW1lLCBpdGVtLm5ld25hbWUpKTsKICAgICAgICAgICAgfSwge30pOyAvLyBjb25zb2xlLmxvZyhvYmplY3QpOwoKICAgICAgICAgICAgX3RoaXMubmV3Y29sdW1ucyA9IG9iamVjdDsKICAgICAgICAgICAgX3RoaXMubmV3Y29sdW1uc2NvbXBsZXRlID0gbmV3Y29sdW1uc2RhdGE7CiAgICAgICAgICAgIF90aGlzLmlzY29sdW1uc25hbWVjaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFkZG1ldHJpY3M6IGZ1bmN0aW9uIGFkZG1ldHJpY3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHZhbGlkYXRpb25fc3VjY2VzcyA9IHRydWUsCiAgICAgICAgICBtZXRyaWNzX25hbWVfbGlzdCA9IFtdOyAvLyBjb25zb2xlLmxvZyhtZXRyaWNzX25hbWVfbGlzdCkKICAgICAgLy8gZm9yKGxldCBpID0gMDtpIDwgdGhpcy5tZXRyaWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgaWYoKHRoaXMubWV0cmljc1tpXS5uYW1lID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0ubmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyApIHx8ICh0aGlzLm1ldHJpY3NbaV0uY29sdW1uID09PSBudWxsKSB8fCAodGhpcy5tZXRyaWNzW2ldLm9wZXJhdGlvbiA9PT0gbnVsbCkpewogICAgICAvLyAgIG1ldHJpY3NfbmFtZV9saXN0LnB1c2godGhpcy5tZXRyaWNzW2ldLm5hbWUpCiAgICAgIC8vICAgfQogICAgICAvLyB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWV0cmljcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWV0cmljc1tpXSk7CiAgICAgICAgaWYgKHRoaXMubWV0cmljc1tpXS5uYW1lID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5uYW1lID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0ubmFtZS5zcGxpdCgnICcpLmpvaW4oJycpID09PSAnJyB8fCB0aGlzLm1ldHJpY3NbaV0uY29sdW1uID09PSBudWxsIHx8IHRoaXMubWV0cmljc1tpXS5vcGVyYXRpb24gPT09IG51bGwpIHsKICAgICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIEZpbGwgaW4gYWxsIHRoZSB2YWx1ZXMgZm9yIHRoZSBtZXRyaWNzIik7CiAgICAgICAgICB2YWxpZGF0aW9uX3N1Y2Nlc3MgPSBmYWxzZTsgLy8gYnJlYWs7CiAgICAgICAgfSAvLyBlbHNlewogICAgICAgIC8vICAgbWV0cmljc19uYW1lX2xpc3QucHVzaCh0aGlzLm1ldHJpY3NbaV0ubmFtZSk7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNvbnNvbGUubG9nKG1ldHJpY3NfbmFtZV9saXN0KQogICAgICAgIC8vIGlmKG1ldHJpY3NfbmFtZV9saXN0Lmxlbmd0aCA+IDEgJiYgdmFsaWRhdGlvbl9zdWNjZXNzID09PSB0cnVlICYmIG1ldHJpY3NfbmFtZV9saXN0LmluY2x1ZGVzKHRoaXMubWV0cmljc1tpXS5uYW1lKSl7CiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhpKTsKICAgICAgICAvLyAgIHRvYXN0ci5lcnJvcigiVHdvIG1ldHJpYyBuYW1lcyBjYW5ub3QgYmUgc2FtZSIpOwogICAgICAgIC8vICAgdmFsaWRhdGlvbl9zdWNjZXNzID0gZmFsc2U7CiAgICAgICAgLy8gICAvLyBicmVhazsKICAgICAgICAvLyB9CgogICAgICB9CgogICAgICBpZiAodmFsaWRhdGlvbl9zdWNjZXNzKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIGFkZCB0aGVzZSBtZXRyaWNzPyIsCiAgICAgICAgICB0eXBlOiAicXVlc3Rpb24iLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjZDMzIiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgICAgX3RoaXMyLm1ldHJpY3NkYXRhID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBfdGhpczIubWV0cmljcy5sZW5ndGg7IF9pOSsrKSB7CiAgICAgICAgICAgICAgX3RoaXMyLm1ldHJpY3NkYXRhLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogX3RoaXMyLm1ldHJpY3NbX2k5XS5uYW1lLAogICAgICAgICAgICAgICAgY29sdW1uOiBfdGhpczIubWV0cmljc1tfaTldLmNvbHVtbiwKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogX3RoaXMyLm1ldHJpY3NbX2k5XS5vcGVyYXRpb24gLy8gb246IFt0aGlzLm1ldHJpY3NbaV0uY29sdW1uMSwgdGhpcy5tZXRyaWNzW2ldLmNvbHVtbjJdCgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczIuaXNtZXRyaWNzc2F2ZWQgPSB0cnVlOwogICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyh0aGlzLm1ldHJpY3NkYXRhKTsKCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBmaW5hbHNhdmU6IGZ1bmN0aW9uIGZpbmFsc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiMzMDg1ZDYiLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMsIENvbmZpcm0hIiwKICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgX3RoaXMzLnNwaW5uZXJPbiA9IHRydWU7CgogICAgICAgICAgaWYgKCFfdGhpczMuaXNfZGF0YXNldF9lZGl0YWJsZSkgewogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5iaV9wcm9jZXNzX2RhdGEoKSwgewogICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICAgICAgZW1haWw6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgICAgIGxpY2Vuc2Vfa2V5OiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgICAgICAgICB0b2tlbjogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgICAgICAgIG9iamVjdF9uYW1lOiBfdGhpczMub2JqZWN0X25hbWUsCiAgICAgICAgICAgICAgY29sdW1uX3JlbmFtZV9tYXBwaW5nOiBfdGhpczMubmV3Y29sdW1ucywKICAgICAgICAgICAgICBkYXRhc2V0X25hbWU6IF90aGlzMy5kYXRhc2V0X25hbWUsCiAgICAgICAgICAgICAgbWV0cmljczogX3RoaXMzLm1ldHJpY3NkYXRhLAogICAgICAgICAgICAgIHdvcmtzaGVldF9kZXRhaWxzOiBfdGhpczMuY29sdW1uX2RldGFpbHMKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAiRGF0YSBQcm9jZXNzZWQgU3VjY2Vzc2Z1bGx5IiwKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHRfc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0X3N1Y2Nlc3MudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0X2RhdGFzZXRfbGlzdCgpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLmdvKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOyAvLyB0aGlzLmdldF9kYXRhc2V0X2xpc3QoKTsKICAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvd19kYXRhc2V0X3NldHRpbmdzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oKQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIF90aGlzMy5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHRoaXMuY29sdW1uX2RldGFpbHM7CiAgICAgICAgICAgIC8vIHZhciBjb2x1bW5fcmVuYW1lX21hcCA9IHRoaXMubmV3Y29sdW1uczsKICAgICAgICAgICAgLy8gdmFyIG1ldHJpY3MgPSB0aGlzLm1ldHJpY3NkYXRhCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1uX2RldGFpbHMpCiAgICAgICAgICAgIHZhciB3b3Jrc2hlZXRfZGV0YWlscyA9IHt9OwogICAgICAgICAgICB3b3Jrc2hlZXRfZGV0YWlscy5jb2x1bW5fZGV0YWlscyA9IF90aGlzMy5jb2x1bW5fZGV0YWlsczsKICAgICAgICAgICAgd29ya3NoZWV0X2RldGFpbHMuY29sdW1uX3JlbmFtZV9tYXAgPSBfdGhpczMubmV3Y29sdW1uczsKICAgICAgICAgICAgd29ya3NoZWV0X2RldGFpbHMubWV0cmljcyA9IF90aGlzMy5tZXRyaWNzZGF0YTsKICAgICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYmlfZGF0YV9zaGVldF9kZXRhaWxzKCksIHsKICAgICAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICAgIGVtYWlsOiBfdGhpczMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXMzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgICAgdG9rZW46IF90aGlzMy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgICAgICAgICBkYXRhc2V0X25hbWU6IF90aGlzMy5kYXRhc2V0X25hbWUsCiAgICAgICAgICAgICAgd29ya3NoZWV0X2RldGFpbHM6IHdvcmtzaGVldF9kZXRhaWxzLAogICAgICAgICAgICAgIG9sZF93b3Jrc2hlZXRfZGV0YWlsczogX3RoaXMzLm9sZF93b3Jrc2hlZXRfZGV0YWlscwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIF90aGlzMy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gIldPUktTSEVFVCBERVRBSUxTIFVQREFURUQiKSB7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogIkRhdGEgVXBkYXRlZCBTdWNjZXNzZnVsbHkiLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0X3N1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF9zdWNjZXNzLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmdldF9kYXRhc2V0X2xpc3QoKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnNob3dfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczMuJHJvdXRlci5nbygpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBfdGhpczMuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiEiLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRmaWxlOiBmdW5jdGlvbiB1cGxvYWRmaWxlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YXNldF9uYW1lKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5maWxlKTsKCiAgICAgIHZhciBmaWxlbmFtZSA9ICIiOwogICAgICB2YXIgZmlsZWRhdGEgPSAiIjsKICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIGZpbGVuYW1lID0gdGhpcy5maWxlLm5hbWU7CiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZSk7CgogICAgICByZWFkZXIub25sb2Fkc3RhcnQgPSBmdW5jdGlvbiAoKSB7Ly8gdGhpcy4kcm9vdC4kZW1pdCgnc2hvd19sb2FkZXInLCB0cnVlKTsKICAgICAgfTsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gdGhpcy4kcm9vdC4kZW1pdCgnc2hvd19sb2FkZXInLCB0cnVlKTsKICAgICAgICBmaWxlZGF0YSA9IHJlYWRlci5yZXN1bHQuc3BsaXQoImJhc2U2NCwiKVsxXTsKICAgICAgfTsKCiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHggPSBmaWxlZGF0YS5zcGxpdCgiYmFzZTY0LCIpWzFdOwogICAgICAgIHZhciB0ZW1wX3V1aWQgPSAiIjsKICAgICAgICB0ZW1wX3V1aWQgPSBfdGhpczQuZ2VuZXJhdGVVVUlEKCk7CiAgICAgICAgdmFyIHVzZXJfZGV0YWlscyA9IHsKICAgICAgICAgIGVtYWlsOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgICAgIHRva2VuOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBjb21wYW55X25hbWU6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgICAgICAgIGNvbXBhbnlfaWQ6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfaWQsCiAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICBpZGVtcG90ZW5jeV9rZXk6IHRlbXBfdXVpZCwKICAgICAgICAgIGRhdGFzZXRfbmFtZTogX3RoaXM0LmRhdGFzZXRfbmFtZQogICAgICAgIH07CiAgICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeSh1c2VyX2RldGFpbHMpOwogICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2pzb25dLCB7CiAgICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICB9KTsKICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmZC5hcHBlbmQoImZpbGUiLCBfdGhpczQuZmlsZSwgZmlsZW5hbWUpOwogICAgICAgIGZkLmFwcGVuZCgianNvbiIsIGJsb2IpOwogICAgICAgIF90aGlzNC5zcGlubmVyT24gPSB0cnVlOyAvLyBjb25zb2xlLmxvZyhmZCk7CgogICAgICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmJpX3VwbG9hZF9maWxlKCksIGZkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICJTdWNjZXNzIikgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuZmlsZV9kZXRhaWxzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBfdGhpczQuY29sdW1ucy5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLmRhdGEuZmlsZV9kZXRhaWxzLmNvbHVtbnNbaV0sCiAgICAgICAgICAgICAgICBuZXduYW1lOiByZXNwb25zZS5kYXRhLmZpbGVfZGV0YWlscy5jb2x1bW5zW2ldCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgX3RoaXM0LmNvbHVtbnMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfaTEwID0gMCwgX09iamVjdCRlbnRyaWVzNCA9IE9iamVjdC5lbnRyaWVzKHJlc3BvbnNlLmRhdGEuZmlsZV9kZXRhaWxzLmRhdGFfdHlwZXMpOyBfaTEwIDwgX09iamVjdCRlbnRyaWVzNC5sZW5ndGg7IF9pMTArKykgewogICAgICAgICAgICAgICAgdmFyIF9PYmplY3QkZW50cmllczQkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXM0W19pMTBdLCAyKSwKICAgICAgICAgICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXM0JF9pWzBdLAogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzNCRfaVsxXTsKCiAgICAgICAgICAgICAgICBpZiAoa2V5ID09IF90aGlzNC5jb2x1bW5zW2tdLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmNvbHVtbnNba10uZGF0YV90eXBlID0gdmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHRoaXMuY29sdW1ucyk7CiAgICAgICAgICAgIC8vICAgdGhpcy5jb2x1bW5zID0gcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMuY29sdW1uczsKCgogICAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNC5pc19maWxlX3VwbG9hZGVkID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXM0Lm9iamVjdF9uYW1lID0gcmVzcG9uc2UuZGF0YS5maWxlX2RldGFpbHMub2JqZWN0X25hbWU7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJGaWxlIFVwbG9hZGVkIFN1Y2Nlc3NmdWxseSIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRpbWVyOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyAhPSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgX3RoaXM0LmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICB0aW1lcjogMjUwMAogICAgICAgICAgICB9KTsgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIC8vICRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgLy8gfSwgMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXM0LmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgICAgX3RoaXM0LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coZXJyLCJ3RWVlZWUiKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgIH0sCiAgICBzYXZlX2NvbHVtbl9kYXRhOiBmdW5jdGlvbiBzYXZlX2NvbHVtbl9kYXRhKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlKTsKICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZS5sZW5ndGg7IGkrKyl7CiAgICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMpCiAgICAgIC8vICAgaWYodGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMgIT0gIiIgfHwgdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMuc3BsaXQoJyAnKS5qb2luKCcnKSAhPSAiIiB8fHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2ldLnN5bm9ueW1zICE9IHVuZGVmaW5lZCApewogICAgICAvLyAgICAgY29uc29sZS5sb2codGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaV0uc3lub255bXMpCiAgICAgIC8vICAgfQogICAgICAvLyB9CiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAiIFlvdSB3YW50IHRvIGFkZCB0aGVzZSB3b3Jrc2hlZXQgZGV0YWlscz8iLAogICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgdmFyIGFycmF5ID0ge307CiAgICAgICAgICB2YXIgd29ya3NoZWV0X2RldGFpbHMgPSB7fTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzNS5uZXdjb2x1bW5zY29tcGxldGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHRlbXAgPSBfdGhpczUubmV3Y29sdW1uc2NvbXBsZXRlW2ldOyAvLyBjb25zb2xlLmxvZyh0ZW1wKTsKCiAgICAgICAgICAgIHRlbXAuYWdncmVnYXRpb24gPT09ICJOb25lIiA/IHRlbXAuYWdncmVnYXRpb24gPSBudWxsIDogdGVtcC5hZ2dyZWdhdGlvbiA9IHRlbXAuYWdncmVnYXRpb247CgogICAgICAgICAgICBpZiAodGVtcC5zeW5vbnltcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdGVtcC5zeW5vbnltcyA9IHRlbXAuc3lub255bXMucmVwbGFjZSgvLC9nLCAnPj4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd29ya3NoZWV0X2RldGFpbHNbdGVtcC5uZXduYW1lXSA9IHsKICAgICAgICAgICAgICAiZGF0YXR5cGUiOiAiIi5jb25jYXQodGVtcC5kYXRhX3R5cGUpLAogICAgICAgICAgICAgICJjb2x1bW5fdHlwZSI6ICIiLmNvbmNhdCh0ZW1wLmNvbHVtbl90eXBlKSwKICAgICAgICAgICAgICAiYWRkaXRpdmUiOiB0ZW1wLmFkZGl0aXZlLAogICAgICAgICAgICAgICJhZ2dyZWdhdGlvbiI6IHRlbXAuYWdncmVnYXRpb24sCiAgICAgICAgICAgICAgImhpZGRlbiI6IHRlbXAuaGlkZGVuLAogICAgICAgICAgICAgICJubHBfc2VhcmNoX2VuYWJsZWQiOiB0ZW1wLm5scF9zZWFyY2hfZW5hYmxlZCwKICAgICAgICAgICAgICAiaW5kZXhfdHlwZSI6ICIiLmNvbmNhdCh0ZW1wLmluZGV4X3R5cGUpLAogICAgICAgICAgICAgICJzeW5vbnltcyI6ICIiLmNvbmNhdCh0ZW1wLnN5bm9ueW1zKSwKICAgICAgICAgICAgICAiZW50aXR5X2NhdGVnb3J5IjogIiIuY29uY2F0KHRlbXAuZW50aXR5X2NhdGVnb3J5KSwKICAgICAgICAgICAgICAiY3VycmVuY3lfZm9ybWF0IjogdGVtcC5jdXJyZW5jeV9mb3JtYXQKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmICh0ZW1wLnN5bm9ueW1zICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICB0ZW1wLnN5bm9ueW1zID0gdGVtcC5zeW5vbnltcy5yZXBsYWNlKC8+PiAvZywgJywnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGVtcC5hZ2dyZWdhdGlvbiA9PT0gbnVsbCA/IHRlbXAuYWdncmVnYXRpb24gPSAiTm9uZSIgOiB0ZW1wLmFnZ3JlZ2F0aW9uID0gdGVtcC5hZ2dyZWdhdGlvbjsKICAgICAgICAgIH0gLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwoKCiAgICAgICAgICBfdGhpczUuY29sdW1uX2RldGFpbHMgPSBPYmplY3QuYXNzaWduKHdvcmtzaGVldF9kZXRhaWxzKTsgLy8gY29uc29sZS5sb2codGhpcy5jb2x1bW5fZGV0YWlscyk7CiAgICAgICAgfQogICAgICB9KTsgLy8gY29uc29sZS5sb2cod29ya3NoZWV0X2RldGFpbHMpOwogICAgfSwKICAgIGdldF9kYXRhc2V0X2xpc3Q6IGZ1bmN0aW9uIGdldF9kYXRhc2V0X2xpc3QoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5zcGlubmVyT24gPSB0cnVlOwogICAgICBheGlvcy5nZXQoYXBpX2NhbGxzLmJpX2RhdGFfc2hlZXRfZGV0YWlscygpLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICBjb21wYW55X25hbWU6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICBjb21wYW55X2lkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXkgLy8gZGF0YXNldF9uYW1lOiAiRnJ1aXRodXQgdjEiLAogICAgICAgICAgLy8gZGF0YXNldF9uYW1lOiAiRHJ1ZyBUcmlhbCBEYXRhIiwKCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNi5zcGlubmVyT24gPSBmYWxzZTsKICAgICAgICBfdGhpczYuZGF0YXNldHMgPSByZXNwb25zZS5kYXRhLmRhdGFfc291cmNlczsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLmRhdGFfc291cmNlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbaV0ub2xkX3dvcmtzaGVldF9kZXRhaWxzID0gcmVzcG9uc2UuZGF0YS5kYXRhX3NvdXJjZXNbaV0ud29ya3NoZWV0X2RldGFpbHM7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXM2LnNwaW5uZXJPbiA9IGZhbHNlOwogICAgICAgIHRvYXN0ci5lcnJvcigiU29tZSBFcnJvciBPY2N1cnJlZCwgUGxlYXNlIFRyeSBBZ2FpbiIpOwogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRfZGF0ZTogZnVuY3Rpb24gZm9ybWF0X2RhdGUoZGF0ZSkgewogICAgICAvLyByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiWVlZWSBNTU1NIEREIikKICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoImRkZGQsIE1NTU0gRG8gWVlZWSIpOwogICAgfSwKICAgIG9wZW5fY3VycmVuY3lfZm9ybWF0X21vZGFsOiBmdW5jdGlvbiBvcGVuX2N1cnJlbmN5X2Zvcm1hdF9tb2RhbChpbmRleCkgewogICAgICBpZiAodGhpcy5uZXdjb2x1bW5zY29tcGxldGVbaW5kZXhdLmN1cnJlbmN5X2Zvcm1hdCA9PT0gbnVsbCkgewogICAgICAgIHRoaXMuY3VycmVuY3lfZm9ybWF0X21vZGFsID0gIk5vbmUiOwogICAgICAgIHRoaXMuY3VycmVudF9jb2x1bW5faW5kZXggPSBpbmRleDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gaW5kZXg7CiAgICAgICAgdGhpcy5jdXJyZW5jeV9mb3JtYXRfbW9kYWwgPSAiU3BlY2lmaWMiOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IHRoaXMubmV3Y29sdW1uc2NvbXBsZXRlW2luZGV4XS5jdXJyZW5jeV9mb3JtYXQ7CiAgICAgIH0KCiAgICAgICQoIiNjdXJyZW5jeUZvcm1hdE1vZGFsIikubW9kYWwoInNob3ciKTsKICAgIH0sCiAgICBjaGFuZ2VfY3VycmVuY3lfZm9ybWF0OiBmdW5jdGlvbiBjaGFuZ2VfY3VycmVuY3lfZm9ybWF0KG9wZXJhdGlvbikgewogICAgICBpZiAob3BlcmF0aW9uID09PSAnY2xvc2UnKSB7CiAgICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdzYXZlJykgewogICAgICAgIGlmICh0aGlzLmN1cnJlbmN5X2Zvcm1hdF9tb2RhbCA9PT0gIk5vbmUiKSB7CiAgICAgICAgICB0aGlzLm5ld2NvbHVtbnNjb21wbGV0ZVt0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4XS5jdXJyZW5jeV9mb3JtYXQgPSBudWxsOwogICAgICAgICAgdGhpcy5jdXJyZW50X2NvbHVtbl9pbmRleCA9IG51bGw7CiAgICAgICAgICAkKCIjY3VycmVuY3lGb3JtYXRNb2RhbCIpLm1vZGFsKCJoaWRlIik7CiAgICAgICAgICB0aGlzLmNvdW50cnlfaXNvX2NvZGUgPSBudWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5jb3VudHJ5X2lzb19jb2RlID09PSBudWxsKSB7CiAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiUGxlYXNlIFNlbGVjdCBhbiBJU08gQ29kZSIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5uZXdjb2x1bW5zY29tcGxldGVbdGhpcy5jdXJyZW50X2NvbHVtbl9pbmRleF0uY3VycmVuY3lfZm9ybWF0ID0gdGhpcy5jb3VudHJ5X2lzb19jb2RlOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRfY29sdW1uX2luZGV4ID0gbnVsbDsKICAgICAgICAgICAgJCgiI2N1cnJlbmN5Rm9ybWF0TW9kYWwiKS5tb2RhbCgiaGlkZSIpOwogICAgICAgICAgICB0aGlzLmNvdW50cnlfaXNvX2NvZGUgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9wZW5fc2V0dGluZ3NfZm9yX2RhdGFiYXNlX2RhdGFzZXQ6IGZ1bmN0aW9uIG9wZW5fc2V0dGluZ3NfZm9yX2RhdGFiYXNlX2RhdGFzZXQoaW5kZXgpIHsKICAgICAgdGhpcy5zaG93X2RhdGFzZXRfc2V0dGluZ3MgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93X2RhdGFiYXNlX2RhdGFzZXRfc2V0dGluZ3MgPSB0cnVlOwogICAgfSwKICAgIG9wZW5fZGF0YWJhc2VfZGF0YXNldF9tb2RhbDogZnVuY3Rpb24gb3Blbl9kYXRhYmFzZV9kYXRhc2V0X21vZGFsKGRhdGFiYXNlKSB7CiAgICAgIHRoaXMuc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzX2RldGFpbHMgPSBmYWxzZTsKCiAgICAgIGlmIChkYXRhYmFzZSA9PT0gJ3Bvc3RncmVzJykgewogICAgICAgIHRoaXMuY3VycmVudF9kYXRhc2V0X2RhdGFiYXNlX2ljb24gPSB0aGlzLnBvc3RncmVzX2ljb25fcGF0aDsKICAgICAgfQoKICAgICAgaWYgKGRhdGFiYXNlID09PSAnbXlzcWwnKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X2RhdGFzZXRfZGF0YWJhc2VfaWNvbiA9IHRoaXMubXlzcWxfaWNvbl9wYXRoOwogICAgICB9CgogICAgICB0aGlzLmRhdGFiYXNlX2RhdGFzZXRfaWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpOwogICAgICB0aGlzLnNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzID0gdHJ1ZTsKICAgIH0sCiAgICBhZGRfZGF0YXNldF9kZXRhaWxzOiBmdW5jdGlvbiBhZGRfZGF0YXNldF9kZXRhaWxzKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICJBcmUgeW91IHN1cmU/IiwKICAgICAgICB0ZXh0OiAnWW91IHdhbnQgdG8gaW50ZWdyYXRlIHdpdGggdGhpcyBEYXRhYmFzZT8nLAogICAgICAgIHR5cGU6ICJxdWVzdGlvbiIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBDb25maXJtISIsCiAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKICAgICAgICAgIF90aGlzNy5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuYmlfZGJfaW50ZWdyYXRpb24oKSwgewogICAgICAgICAgICBlbWFpbDogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgIHRva2VuOiBfdGhpczcuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lLAogICAgICAgICAgICBjb21wYW55X2lkOiBfdGhpczcuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkLAogICAgICAgICAgICBsaWNlbnNlX2tleTogX3RoaXM3LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAgICAgICAgIHJkYm1zX25hbWU6ICdwb3N0Z3Jlc3FsJywKICAgICAgICAgICAgZGF0YXNldF9pZDogX3RoaXM3LmRhdGFiYXNlX2RhdGFzZXRfaWQsCiAgICAgICAgICAgIGRhdGFzZXRfbmFtZTogX3RoaXM3LmRhdGFiYXNlX2RhdGFzZXRfbmFtZSwKICAgICAgICAgICAgc2NoZW1hX25hbWU6IF90aGlzNy5kYXRhYmFzZV9zY2hlbWFfbmFtZSwKICAgICAgICAgICAgamRiY19jb25uZWN0aW9uX3N0cmluZzogX3RoaXM3LmRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmcsCiAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpczcuZGF0YWJhc2VfdXNlcm5hbWUsCiAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpczcuZGF0YWJhc2VfcGFzc3dvcmQKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzNy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICdEQiBJTlRFR1JBVElPTiBERVRBSUxTIFNBVkVEJykgewogICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIkRCIEludGVncmF0aW9uIFN1Y2Nlc3NmdWwiLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0X3N1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfc3VjY2Vzcy52YWx1ZSkgewogICAgICAgICAgICAgICAgICBfdGhpczcuZ2V0X2RhdGFzZXRfbGlzdCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM3LnNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5ncyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXM3LiRyb3V0ZXIuZ28oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb21lIEVycm9yIE9jY3VycmVkLCBQbGVhc2UgVHJ5IEFnYWluISIsCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGltZXI6IDI1MDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKCiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXM3LnNwaW5uZXJPbiA9IGZhbHNlOyAvLyB0b2FzdHIuZXJyb3IoIlNvbWUgRXJyb3IgT2NjdXJyZWQuIFBsZWFzZSBUcnkgQWdhaW4iKQoKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICB0aXRsZTogIlNvbWUgRXJyb3IgT2NjdXJyZWQsIFBsZWFzZSBUcnkgQWdhaW4hIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIHRpbWVyOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzaG93X2RhdGFzZXRfc2V0dGluZ3M6IGZ1bmN0aW9uIHNob3dfZGF0YXNldF9zZXR0aW5ncyhuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsKSB7Ly8gY29uc29sZS5sb2coJ2tqaGd2ZmNkeGQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTsKICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTsKICAgICAgICB0aGlzLmZpbGVfbGFiZWwgPSAiQ2hvb3NlIGZpbGUiOwogICAgICAgIHRoaXMuaXNfZmlsZV91cGxvYWRlZCA9IGZhbHNlOwogICAgICAgIHRoaXMubmV3Y29sdW1ucyA9IFtdOwogICAgICAgIHRoaXMuaXNjb2x1bW5zbmFtZWNoYW5nZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLm9iamVjdF9uYW1lID0gIiI7CiAgICAgICAgdGhpcy5tZXRyaWNzZGF0YSA9IFtdOwogICAgICAgIHRoaXMuaXNtZXRyaWNzc2F2ZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmRhdGFzZXRfbmFtZSA9ICIiOwogICAgICAgIHRoaXMuZmlsZSA9IG51bGw7CiAgICAgICAgdGhpcy5uZXdjb2x1bW5zY29tcGxldGUgPSBbXTsKICAgICAgICB0aGlzLmNvbHVtbl9kZXRhaWxzID0ge307CiAgICAgICAgdGhpcy5pc19kYXRhc2V0X2VkaXRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjdXJyZW5jeV9mb3JtYXRfbW9kYWw6IGZ1bmN0aW9uIGN1cnJlbmN5X2Zvcm1hdF9tb2RhbChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09PSAiTm9uZSIpIHsKICAgICAgICB0aGlzLmlzX2NvdW50cnlfY29kZXNfZHJvcGRvd25fZGlzYWJsZWQgPSB0cnVlOwogICAgICAgIHRoaXMuY291bnRyeV9pc29fY29kZSA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChuZXdWYWwgPT09ICJTcGVjaWZpYyIpIHsKICAgICAgICB0aGlzLmlzX2NvdW50cnlfY29kZXNfZHJvcGRvd25fZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGRhdGFiYXNlX2RhdGFzZXRfY29ubmVjdGlvbl90eXBlOiBmdW5jdGlvbiBkYXRhYmFzZV9kYXRhc2V0X2Nvbm5lY3Rpb25fdHlwZShuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09PSAnSkRCQycpIHsKICAgICAgICB0aGlzLmRhdGFiYXNlX2hvc3QgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfcG9ydCA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9kYl9uYW1lID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKG5ld1ZhbCA9PT0gJ2hvc3RfcG9ydCcpIHsKICAgICAgICB0aGlzLmRhdGFiYXNlX2pkYmNfY29ubmVjdGlvbl9zdHJpbmcgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgc2hvd19kYXRhYmFzZV9kYXRhc2V0X3NldHRpbmdzX2RldGFpbHM6IGZ1bmN0aW9uIHNob3dfZGF0YWJhc2VfZGF0YXNldF9zZXR0aW5nc19kZXRhaWxzKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChuZXdWYWwgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9kYXRhc2V0X25hbWUgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2Vfc2NoZW1hX25hbWUgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfdXNlcm5hbWUgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfcGFzc3dvcmQgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfamRiY19jb25uZWN0aW9uX3N0cmluZyA9IG51bGw7CiAgICAgICAgdGhpcy5kYXRhYmFzZV9ob3N0ID0gbnVsbDsKICAgICAgICB0aGlzLmRhdGFiYXNlX3BvcnQgPSBudWxsOwogICAgICAgIHRoaXMuZGF0YWJhc2VfZGJfbmFtZSA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}