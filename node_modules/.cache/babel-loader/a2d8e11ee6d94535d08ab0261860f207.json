{"remainingRequest":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js!/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vimalesh/CENSE/chatbot-portal/src/portal/Chatbot/Dashboard/Dashboard.vue","mtime":1645594423483},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vimalesh/CENSE/chatbot-portal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgYnVzIH0gZnJvbSAiQC9wb3J0YWwvbWFpbiI7CmltcG9ydCBhcGlfY2FsbHMgZnJvbSAiQC9wb3J0YWwvYXBpX2NhbGxzIjsKaW1wb3J0IFJlcXVlc3RDaGFydCBmcm9tICJAL3BvcnRhbC9jb21wb25lbnRzL1JlcXVlc3RDaGFydC52dWUiOwppbXBvcnQgQXJlYUNoYXJ0IGZyb20gIkAvcG9ydGFsL2NvbXBvbmVudHMvQXJlYUNoYXJ0LnZ1ZSI7CmltcG9ydCBCaWxsaW5nQ2hhcnQgZnJvbSAiQC9wb3J0YWwvY29tcG9uZW50cy9CaWxsaW5nQ2hhcnQudnVlIjsKaW1wb3J0IHN3YWwgZnJvbSAnc3dlZXRhbGVydDInOyAvL2ltcG9ydCBwYWdlX2d1aWRlIGZyb20gIkAvcG9ydGFsL21peGlucy9wYWdlZ3VpZGUuanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIC8vbWl4aW5zOiBbcGFnZV9ndWlkZV0sCiAgcHJvcHM6IHt9LAogIGNvbXBvbmVudHM6IHsKICAgIFJlcXVlc3RDaGFydDogUmVxdWVzdENoYXJ0LAogICAgQXJlYUNoYXJ0OiBBcmVhQ2hhcnQsCiAgICBCaWxsaW5nQ2hhcnQ6IEJpbGxpbmdDaGFydAogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKCF0aGlzLiRzZXNzaW9uLmhhcygiQ29tcGFueUlkIikgJiYgdGhpcy4kc2Vzc2lvbi5oYXMoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgJiYgdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnJvbGUgPT0gIlN1cGVyQWRtaW4iKSB7CiAgICAgIHRvYXN0ci53YXJuaW5nKCJQbGVhc2Ugc2VsZWN0IGEgY29tcGFueSBuYW1lIGZyb20gdGhlIGRyb3Bkb3duIik7CiAgICB9CgogICAgaWYgKHRoaXMudXNlcl9yb2xlID09ICJTdXBlckFkbWluIikgewogICAgICBpZiAodGhpcy4kc2Vzc2lvbi5oYXMoIkNvbXBhbnlJZCIpKSB7CiAgICAgICAgdGhpcy5jb21wYW55aWQgPSB0aGlzLiRzZXNzaW9uLmdldCgiQ29tcGFueUlkIik7CiAgICAgICAgdGhpcy5jb21wYW55bmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCJDb21wYW55TmFtZSIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbXBhbnlpZCA9IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKSA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X2lkIDogIiI7CiAgICAgIHRoaXMuY29tcGFueW5hbWUgPSB0aGlzLiRzZXNzaW9uLmhhcygiVXNlckluZm9ybWF0aW9uIikgPyB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9uYW1lIDogIiI7CiAgICB9IC8vIGF4aW9zCiAgICAvLyAgIC5wb3N0KAogICAgLy8gICAgIGFwaV9jYWxscy5iaWxsaW5nX3VzYWdlX3VybCgpLAogICAgLy8gICAgIHsKICAgIC8vICAgICAgIGNvbXBhbnluYW1lOiB0aGlzLmNvbXBhbnluYW1lLAogICAgLy8gICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgIC8vICAgICAgIGVtYWlsOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAvLyAgICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgIC8vICAgICAgIGxvYWRfZGF0YV9ieTogIkxhc3QgNyBkYXlzIiwKICAgIC8vICAgICAgIGxpY2Vuc2Vfa2V5OiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikubGljZW5zZV9rZXksCiAgICAvLyAgICAgfSwKICAgIC8vICAgICB7CiAgICAvLyAgICAgICBoZWFkZXJzOiB7CiAgICAvLyAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICB9CiAgICAvLyAgICkKICAgIC8vICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzID0gW107CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50ID0gW107CiAgICAvLyAgICAgdGhpcy5TZWNvbmRfY2hhcnQuTXNnRXhjaGFuZ2UgPSBbXTsKICAgIC8vICAgICB0aGlzLlNlY29uZF9jaGFydC5UYXNrRXhlY3V0aW9uID0gW107CiAgICAvLyAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIk5vIERhdGEgYXZhaWxhYmxlIikgewogICAgLy8gICAgICAgYnVzLiRlbWl0KAogICAgLy8gICAgICAgICAiY2hhcnQgaXMgdXBkYXRlZCIsCiAgICAvLyAgICAgICAgICJUcnVlIiwKICAgIC8vICAgICAgICAgW10sCiAgICAvLyAgICAgICAgIFtdLAogICAgLy8gICAgICAgICBbXSwKICAgIC8vICAgICAgICAgW10sCiAgICAvLyAgICAgICAgIHRoaXMuYmFyX2NoYXJ0Ml9kcm9wZG93bl92YWx1ZQogICAgLy8gICAgICAgKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LmxhYmVscy5wdXNoKGkpOwogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5DYWxsQ291bnQucHVzaChyZXNwb25zZS5kYXRhW2ldLkNhbGxDb3VudCk7CiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0Lk1zZ0V4Y2hhbmdlLnB1c2gocmVzcG9uc2UuZGF0YVtpXS5Nc2dFeGNoYW5nZSk7CiAgICAvLyAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LlRhc2tFeGVjdXRpb24ucHVzaCgKICAgIC8vICAgICAgICAgICByZXNwb25zZS5kYXRhW2ldLlRhc2tFeGVjdXRpb24KICAgIC8vICAgICAgICAgKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIGJ1cy4kZW1pdCgKICAgIC8vICAgICAgICAgImJpbGxpbmcgY2hhcnQgaXMgdXBkYXRlZCIsCiAgICAvLyAgICAgICAgICJUcnVlIiwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50LAogICAgLy8gICAgICAgICB0aGlzLlNlY29uZF9jaGFydC5Nc2dFeGNoYW5nZSwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbiwKICAgIC8vICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzLAogICAgLy8gICAgICAgICB0aGlzLmJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWUKICAgIC8vICAgICAgICk7CiAgICAvLyAgICAgfQogICAgLy8gICB9KQogICAgLy8gICAuY2F0Y2goKGUpID0+IHsKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8CiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8CiAgICAvLyAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgKSB7CiAgICAvLyAgICAgICB0aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgLy8gICAgIH0KICAgIC8vICAgfSk7CgoKICAgIGF4aW9zLnBvc3QoYXBpX2NhbGxzLmRhc2hib2FyZF9jaGFydF91cmwoKSwgewogICAgICBjb21wYW55bmFtZTogdGhpcy5jb21wYW55bmFtZSwKICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgIGxvYWRfZGF0YV9ieTogIkxhc3QgNyBkYXlzIiwKICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleQogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMudXBkYXRlX2NoYXJ0X2RhdGEocmVzcG9uc2UuZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5yZXNwb25zZS5zdGF0dXMgPT09IDQxMCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDQwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLnNwaW5uZXJPbiA9IHRydWU7CiAgICBheGlvcy5wb3N0KGFwaV9jYWxscy5kYXNoYm9hcmRfYm90X2RldGFpbHNfY291bnQoKSwgewogICAgICBjb21wYW55X25hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgIGNvbXBhbnlfaWQ6IHRoaXMuY29tcGFueWlkLAogICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICB0b2tlbjogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLnRva2VucywKICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleSwKICAgICAgaXNfZ2V0OiB0cnVlCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRoaXMuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgIGZvciAodmFyIGkgaW4gX3RoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpKSB7CiAgICAgICAgX3RoaXMucGVybWlzc2lvbl9saXN0LnB1c2goX3RoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpW2ldLm1haW5fbWVudS5uYW1lKTsKCiAgICAgICAgZm9yICh2YXIgaiBpbiBfdGhpcy4kc2Vzc2lvbi5nZXQoIkNoYXRib3RNZW51IilbaV0uc3ViX21lbnVfbGlzdCkgewogICAgICAgICAgX3RoaXMucGVybWlzc2lvbl9saXN0LnB1c2goX3RoaXMuJHNlc3Npb24uZ2V0KCJDaGF0Ym90TWVudSIpW2ldLnN1Yl9tZW51X2xpc3Rbal0ubmFtZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocmVzcG9uc2UuZGF0YS5TdGF0dXMgPT09ICJTdWNjZXNzIikgewogICAgICAgIHZhciB0ZW1wX2xpc3QgPSBbXTsgLy8gdHJ5IHsKICAgICAgICAvLyAgIGxldCB0cmFpbmluZ19kYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhLmZpbHRlcigoeCkgPT4geC5lbnRpdHkgPT09ICJUcmFpbmluZyIpOwogICAgICAgIC8vICAgaWYgKAogICAgICAgIC8vICAgICAgIHRyYWluaW5nX2RhdGEubGVuZ3RoID09PSAxCiAgICAgICAgLy8gICApIHsKICAgICAgICAvLyAgICAgdGhpcy5kaXNwbGF5X2xpc3QucHVzaCh0cmFpbmluZ19kYXRhWzBdKQogICAgICAgIC8vICAgfQogICAgICAgIC8vIH0gY2F0Y2ggKGVycm9yKSB7fQogICAgICAgIC8vIHRyeSB7CiAgICAgICAgLy8gICBsZXQgc3lub255bXNfZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5maWx0ZXIoKHgpID0+IHguZW50aXR5ID09PSAiU3lub255bXMiKTsKICAgICAgICAvLyAgIGlmICgKICAgICAgICAvLyAgICAgICBzeW5vbnltc19kYXRhLmxlbmd0aCA9PT0gMQogICAgICAgIC8vICAgKSB7CiAgICAgICAgLy8gICAgIHRoaXMuZGlzcGxheV9saXN0LnB1c2goc3lub255bXNfZGF0YVswXSkKICAgICAgICAvLyAgIH0KICAgICAgICAvLyB9IGNhdGNoIChlcnJvcikge30KCiAgICAgICAgdmFyIHZlcmlmeV9ib3RfcmVzcG9uc2UgPSBmYWxzZSwKICAgICAgICAgICAgc3RvcmVfc2V0dGluZ3MgPSBmYWxzZTsKCiAgICAgICAgZm9yICh2YXIgbiBpbiBfdGhpcy5wZXJtaXNzaW9uX2xpc3QpIHsKICAgICAgICAgIGlmIChfdGhpcy5wZXJtaXNzaW9uX2xpc3Rbbl0gPT0gIlZlcmlmeSBCb3QgUmVzcG9uc2UiKSB7CiAgICAgICAgICAgIHZlcmlmeV9ib3RfcmVzcG9uc2UgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChfdGhpcy5wZXJtaXNzaW9uX2xpc3Rbbl0gPT09ICJTdG9yZSIpIHsKICAgICAgICAgICAgc3RvcmVfc2V0dGluZ3MgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhLmRhdGEpIHsKICAgICAgICAgIHZhciBwdXNoZWQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKHZhciBqIGluIF90aGlzLnBlcm1pc3Npb25fbGlzdCkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PSBfdGhpcy5wZXJtaXNzaW9uX2xpc3Rbal0pIHsKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0ubGlzdF9iZWxvbmcgPSBfdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KTsKCiAgICAgICAgICAgICAgX3RoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKTsKCiAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHZlcmlmeV9ib3RfcmVzcG9uc2UgPT0gdHJ1ZSAmJiByZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09ICJWZXJpZnkgUmVzcG9uc2VzIFVuYW5zd2VyZWQiKSB7CiAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0ubGlzdF9iZWxvbmcgPSBfdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KTsKCiAgICAgICAgICAgICAgX3RoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKTsKCiAgICAgICAgICAgICAgdmVyaWZ5X2JvdF9yZXNwb25zZSA9IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc3RvcmVfc2V0dGluZ3MgPT0gdHJ1ZSAmJiByZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09ICJQcm9kdWN0cyIpIHsKICAgICAgICAgICAgICBwdXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5saXN0X2JlbG9uZyA9IF90aGlzLmxpc3RfZ3JvdXBfZHluYW1pY190eXBlKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkpOwoKICAgICAgICAgICAgICBfdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pOwoKICAgICAgICAgICAgICBzdG9yZV9zZXR0aW5ncyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFwdXNoZWQpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkgPT09ICJUcmFpbmluZyIpIHsKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGFbaV0ubGlzdF9iZWxvbmcgPSBfdGhpcy5saXN0X2dyb3VwX2R5bmFtaWNfdHlwZShyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5KTsKCiAgICAgICAgICAgICAgX3RoaXMuZGlzcGxheV9saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhW2ldKTsKCiAgICAgICAgICAgICAgcHVzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICghcHVzaGVkKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGFbaV0uZW50aXR5ID09PSAiU3lub255bXMiKSB7CiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhW2ldLmxpc3RfYmVsb25nID0gX3RoaXMubGlzdF9ncm91cF9keW5hbWljX3R5cGUocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSk7CgogICAgICAgICAgICAgIF90aGlzLmRpc3BsYXlfbGlzdC5wdXNoKHJlc3BvbnNlLmRhdGEuZGF0YVtpXSk7CgogICAgICAgICAgICAgIHB1c2hlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIXB1c2hlZCkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhW2ldLmVudGl0eSA9PT0gIkFjY291bnRzIikgewogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5saXN0X2JlbG9uZyA9IF90aGlzLmxpc3RfZ3JvdXBfZHluYW1pY190eXBlKHJlc3BvbnNlLmRhdGEuZGF0YVtpXS5lbnRpdHkpOwoKICAgICAgICAgICAgICBfdGhpcy5kaXNwbGF5X2xpc3QucHVzaChyZXNwb25zZS5kYXRhLmRhdGFbaV0pOwoKICAgICAgICAgICAgICBwdXNoZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5kaXNwbGF5X2xpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIGEubGlzdF9iZWxvbmcgPiBiLmxpc3RfYmVsb25nID8gMSA6IC0xOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBfdGhpcy5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAogIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBidXMuJG9uKCJjb21wYW55IGF0dHJpYnV0ZXMgdXBkYXRlZCIsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGlmIChkYXRhID09ICJUcnVlIikgewogICAgICAgIGJ1cy4kZW1pdCgic2VuZCBjb21wYW55IGF0dHJpYnV0ZXMiKTsKICAgICAgfQogICAgfSk7CiAgICBidXMuJG9uKCJjb21wYW55IG5hbWUgYW5kIGNvbXBhbnkgaWQiLCBmdW5jdGlvbiAoZGF0YTEsIGRhdGEyKSB7CiAgICAgIF90aGlzMi4kcm91dGVyLmdvKCk7CiAgICB9KTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93OiBmYWxzZSwKICAgICAgYmFyX2NoYXJ0X2Ryb3Bkb3duX3ZhbHVlOiAiTGFzdCA3IGRheXMiLAogICAgICBiYXJfY2hhcnQyX2Ryb3Bkb3duX3ZhbHVlOiAiTGFzdCA3IGRheXMiLAogICAgICBjb21wYW55bmFtZTogbnVsbCwKICAgICAgY29tcGFueWlkOiBudWxsLAogICAgICBwZXJtaXNzaW9uX2xpc3Q6IFtdLAogICAgICBBUElfZGF0YTogewogICAgICAgIGxhYmVsczogW10sCiAgICAgICAgU3VjY2Vzc2Z1bDogW10sCiAgICAgICAgVG90YWw6IFtdLAogICAgICAgIFVuc3VjY2Vzc2Z1bDogW10sCiAgICAgICAgeEF4aXNMYWJlbDogIiIKICAgICAgfSwKICAgICAgU2Vjb25kX2NoYXJ0OiB7CiAgICAgICAgbGFiZWxzOiBbXSwKICAgICAgICBDYWxsQ291bnQ6IFtdLAogICAgICAgIE1zZ0V4Y2hhbmdlOiBbXSwKICAgICAgICBUYXNrRXhlY3V0aW9uOiBbXQogICAgICB9LAogICAgICBDb25jdXJyZW50X1VzZXJzX0RhdGE6IHsKICAgICAgICBsYWJlbHM6IFtdLAogICAgICAgIGRhdGE6IFtdCiAgICAgIH0sCiAgICAgIGNvbmN1cnJlbnRfdXNlcnNfbW9udGg6ICIiLAogICAgICB1c2VyX3JvbGU6IHRoaXMuJHNlc3Npb24uaGFzKCJVc2VySW5mb3JtYXRpb24iKSA/IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5yb2xlIDogIiIsCiAgICAgIGludGVudF9jb3VudDogNTMsCiAgICAgIGludGVudF9jb3VudF9kaXNwbGF5OiAwLAogICAgICBkaXNwbGF5X2xpc3Q6IFtdLAogICAgICBwcmltYXJ5X2l0ZW1fZW50aXRpZXNfbGlzdDogWyJJbnRlbnRzIiwgIlF1ZXN0aW9ucyIsICJSZXNwb25zZXMiLCAiVHJhaW5pbmciXSwKICAgICAgZGFuZ2VyX2l0ZW1fZW50aXRpZXNfbGlzdDogWyJWZXJpZnkgUmVzcG9uc2VzIFVuYW5zd2VyZWQiLCAiVmVyaWZ5IEJvdCBSZXNwb25zZSIsICJQcm9kdWN0cyIsICJTeW5vbnltcyIsICJBY2NvdW50cyJdLAogICAgICBpbmZvX2l0ZW1fZW50aXRpZXNfbGlzdDogW10sCiAgICAgIHN1Y2Nlc3NfaXRlbV9pbmZvX2xpc3Q6IFsiQ2hlY2sgQm90IFJlc3BvbnNlIiwgIkJvdCBDb25maWd1cmF0aW9uIl0sCiAgICAgIGl0ZW1fbGlzdF9vcmRlcjogWyJkYW5nZXJfaXRlbV9lbnRpdGllc19saXN0IiwgInN1Y2Nlc3NfaXRlbV9pbmZvX2xpc3QiLCAicHJpbWFyeV9pdGVtX2VudGl0aWVzX2xpc3QiXSwKICAgICAgc3Bpbm5lck9uOiBmYWxzZSAvL3RvdXJfZ3VpZGVfaWNvbjogcmVxdWlyZSgiQC9wb3J0YWwvYXNzZXRzL2ltZy9pbmZvX2ljb24uc3ZnIiksCgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGdyYXBoXzJfYmFyX2NoYXJ0X2Ryb3Bkb3duKCkgewogICAgLy8gICB0aGlzLmJhcl9jaGFydDJfZHJvcGRvd25fdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7CiAgICAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYmFyX2NoYXJ0Ml9kcm9wZG93bl92YWx1ZSkKICAgIC8vICAgYXhpb3MKICAgIC8vICAgICAucG9zdCgKICAgIC8vICAgICAgIGFwaV9jYWxscy5iaWxsaW5nX3VzYWdlX3VybCgpLAogICAgLy8gICAgICAgewogICAgLy8gICAgICAgICBjb21wYW55bmFtZTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmNvbXBhbnlfbmFtZSwKICAgIC8vICAgICAgICAgY29tcGFueWlkOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgIC8vICAgICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5lbWFpbCwKICAgIC8vICAgICAgICAgdG9rZW46IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAvLyAgICAgICAgIGxvYWRfZGF0YV9ieTogdGhpcy5iYXJfY2hhcnQyX2Ryb3Bkb3duX3ZhbHVlLAogICAgLy8gICAgICAgICBsaWNlbnNlX2tleTogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgaGVhZGVyczogewogICAgLy8gICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRzZXNzaW9uLmdldCgiYXQiKX1gLAogICAgLy8gICAgICAgICB9LAogICAgLy8gICAgICAgfQogICAgLy8gICAgICkKICAgIC8vICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0LmxhYmVscyA9IFtdOwogICAgLy8gICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50ID0gW107CiAgICAvLyAgICAgICB0aGlzLlNlY29uZF9jaGFydC5Nc2dFeGNoYW5nZSA9IFtdOwogICAgLy8gICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbiA9IFtdOwogICAgLy8gICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gIk5vIERhdGEgYXZhaWxhYmxlIikgewogICAgLy8gICAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiByZXNwb25zZS5kYXRhKSB7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQubGFiZWxzLnB1c2goaSk7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuQ2FsbENvdW50LnB1c2gocmVzcG9uc2UuZGF0YVtpXS5DYWxsQ291bnQpOwogICAgLy8gICAgICAgICAgIHRoaXMuU2Vjb25kX2NoYXJ0Lk1zZ0V4Y2hhbmdlLnB1c2gocmVzcG9uc2UuZGF0YVtpXS5Nc2dFeGNoYW5nZSk7CiAgICAvLyAgICAgICAgICAgdGhpcy5TZWNvbmRfY2hhcnQuVGFza0V4ZWN1dGlvbi5wdXNoKAogICAgLy8gICAgICAgICAgICAgcmVzcG9uc2UuZGF0YVtpXS5UYXNrRXhlY3V0aW9uCiAgICAvLyAgICAgICAgICAgKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAvLyAgICAgICBpZiAoCiAgICAvLyAgICAgICAgIGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwKICAgIC8vICAgICAgICAgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fAogICAgLy8gICAgICAgICBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5CiAgICAvLyAgICAgICApIHsKICAgIC8vICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiU2Vzc2lvbl9FeHBpcmVkIiwgZS5yZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICB9KTsKICAgIC8vIH0sCiAgICBiYXJfY2hhcnRfZHJvcGRvd246IGZ1bmN0aW9uIGJhcl9jaGFydF9kcm9wZG93bigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmJhcl9jaGFydF9kcm9wZG93bl92YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgYXhpb3MucG9zdChhcGlfY2FsbHMuZGFzaGJvYXJkX2NoYXJ0X3VybCgpLCB7CiAgICAgICAgY29tcGFueW5hbWU6IHRoaXMuY29tcGFueW5hbWUsCiAgICAgICAgY29tcGFueWlkOiB0aGlzLmNvbXBhbnlpZCwKICAgICAgICBlbWFpbDogdGhpcy4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmVtYWlsLAogICAgICAgIHRva2VuOiB0aGlzLiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikudG9rZW5zLAogICAgICAgIGxvYWRfZGF0YV9ieTogdGhpcy5iYXJfY2hhcnRfZHJvcGRvd25fdmFsdWUsCiAgICAgICAgbGljZW5zZV9rZXk6IHRoaXMuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5saWNlbnNlX2tleQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzZXNzaW9uLmdldCgiYXQiKSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLnVwZGF0ZV9jaGFydF9kYXRhKHJlc3BvbnNlLmRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEwIHx8IGUucmVzcG9uc2Uuc3RhdHVzID09PSA0NDAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgX3RoaXMzLiRyb290LiRlbWl0KCJTZXNzaW9uX0V4cGlyZWQiLCBlLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlX2NoYXJ0X2RhdGE6IGZ1bmN0aW9uIHVwZGF0ZV9jaGFydF9kYXRhKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5BUElfZGF0YS5sYWJlbHMgPSBbXTsKICAgICAgdGhpcy5BUElfZGF0YS5TdWNjZXNzZnVsID0gW107CiAgICAgIHRoaXMuQVBJX2RhdGEuVG90YWwgPSBbXTsKICAgICAgdGhpcy5BUElfZGF0YS5VbnN1Y2Nlc3NmdWwgPSBbXTsKCiAgICAgIGlmIChtZXNzYWdlID09ICJObyBEYXRhIGF2YWlsYWJsZSIpIHt9IGVsc2UgewogICAgICAgIGZvciAodmFyIGkgaW4gbWVzc2FnZSkgewogICAgICAgICAgdGhpcy5BUElfZGF0YS5sYWJlbHMucHVzaChpKTsKICAgICAgICAgIHRoaXMuQVBJX2RhdGEuU3VjY2Vzc2Z1bC5wdXNoKG1lc3NhZ2VbaV0uU3VjY2Vzc2Z1bCk7CiAgICAgICAgICB0aGlzLkFQSV9kYXRhLlRvdGFsLnB1c2gobWVzc2FnZVtpXS5Ub3RhbCk7CiAgICAgICAgICB0aGlzLkFQSV9kYXRhLlVuc3VjY2Vzc2Z1bC5wdXNoKG1lc3NhZ2VbaV0uVW5zdWNjZXNzZnVsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnb190b19wYWdlOiBmdW5jdGlvbiBnb190b19wYWdlKHBhZ2VfbmFtZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmIChwYWdlX25hbWUgPT0gIlZlcmlmeSBSZXNwb25zZXMgVW5hbnN3ZXJlZCIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiVmVyaWZ5IEJvdCBSZXNwb25zZSIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgbW9kYWxfb3Blbl9zd2l0Y2hfdGFiOiBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHBhZ2VfbmFtZSA9PSAiU3lub255bXMiKSB7CiAgICAgICAgc3dhbCh7CiAgICAgICAgICB0aXRsZTogIkFyZSBZb3UgU3VyZT8iLAogICAgICAgICAgdGV4dDogIllvdSB3YW50IHRvIFRyYWluIFRoZSBNb2RlbD8iLAogICAgICAgICAgdHlwZTogInF1ZXN0aW9uIiwKICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAiI2QzMyIsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcywgQ29uZmlybSEiLAogICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzNC5zcGlubmVyT24gPSB0cnVlOwogICAgICAgICAgICBheGlvcy5wb3N0KGFwaV9jYWxscy50cmFpbl9pbnRlbnRfbmVyX21vZGVsKCksIHsKICAgICAgICAgICAgICBlbWFpbDogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuZW1haWwsCiAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IF90aGlzNC4kc2Vzc2lvbi5nZXQoIlVzZXJJbmZvcm1hdGlvbiIpLmxpY2Vuc2Vfa2V5LAogICAgICAgICAgICAgIHRva2VuOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS50b2tlbnMsCiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5zdWJzY3JpcHRpb24sCiAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBfdGhpczQuJHNlc3Npb24uZ2V0KCJVc2VySW5mb3JtYXRpb24iKS5jb21wYW55X25hbWUsCiAgICAgICAgICAgICAgY29tcGFueV9pZDogX3RoaXM0LiRzZXNzaW9uLmdldCgiVXNlckluZm9ybWF0aW9uIikuY29tcGFueV9pZCwKICAgICAgICAgICAgICB1cGRhdGVfbW9kZWw6IHRydWUsCiAgICAgICAgICAgICAgdXBkYXRlX21vZGVsX3N0YXR1czogdHJ1ZQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChfdGhpczQuJHNlc3Npb24uZ2V0KCJhdCIpKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczQuc3Bpbm5lck9uID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzNC4kcm9vdC4kZW1pdCgid2FudF9tb2RlbF9zdGF0dXMiLCB0cnVlKTsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDQwNDYpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKHJlc3BvbnNlLmRhdGEuTVNHKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuTVNHX0NPREUgPT09IDEwMzQpIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihyZXNwb25zZS5kYXRhLk1TRyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcigiSW50ZXJuYWwgU2VydmVyIEVycm9yIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIF90aGlzNC5zcGlubmVyT24gPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKGUucmVzcG9uc2Uuc3RhdHVzID09PSA0MTAgfHwgZS5yZXNwb25zZS5zdGF0dXMgPT09IDQ0MCB8fCBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7CiAgICAgICAgICAgICAgICBfdGhpczQuJHJvb3QuJGVtaXQoIlNlc3Npb25fRXhwaXJlZCIsIGUucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoIlNvbWUgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uIik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHBhZ2VfbmFtZSA9PSAiUHJvZHVjdHMiKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9ib3Qvc3RvcmUtY29uZmlndXJhdGlvbiIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChwYWdlX25hbWUgPT0gIkFjY291bnRzIikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdTZXR0aW5ncycsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgU3Vic2NyaXB0aW9uOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogcGFnZV9uYW1lLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIG1vZGFsX29wZW5fc3dpdGNoX3RhYjogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaW50ZW50c19jb3VudF9mdW5jdGlvbjogZnVuY3Rpb24gaW50ZW50c19jb3VudF9mdW5jdGlvbigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgc3RhcnRUaW1lc3RhbXAgPSBudWxsOwogICAgICB2YXIgZHVyYXRpb24gPSAyMDAwOwogICAgICB2YXIgZW5kID0gdGhpcy5pbnRlbnRfY291bnQ7CiAgICAgIHZhciBzdGFydCA9IDA7CgogICAgICB2YXIgc3RlcCA9IGZ1bmN0aW9uIHN0ZXAodGltZXN0YW1wKSB7CiAgICAgICAgaWYgKCFzdGFydFRpbWVzdGFtcCkgc3RhcnRUaW1lc3RhbXAgPSB0aW1lc3RhbXA7CiAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5taW4oKHRpbWVzdGFtcCAtIHN0YXJ0VGltZXN0YW1wKSAvIGR1cmF0aW9uLCAxKTsKICAgICAgICBfdGhpczUuaW50ZW50X2NvdW50X2Rpc3BsYXkgPSBNYXRoLmZsb29yKHByb2dyZXNzICogKGVuZCAtIHN0YXJ0KSArIHN0YXJ0KTsKCiAgICAgICAgaWYgKHByb2dyZXNzIDwgMSkgewogICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApOwogICAgfSwKICAgIGxpc3RfZ3JvdXBfZHluYW1pY19jbGFzczogZnVuY3Rpb24gbGlzdF9ncm91cF9keW5hbWljX2NsYXNzKHJvdykgewogICAgICBpZiAodGhpcy5wcmltYXJ5X2l0ZW1fZW50aXRpZXNfbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJsaXN0LWdyb3VwLWl0ZW0tcHJpbWFyeSI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYW5nZXJfaXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImxpc3QtZ3JvdXAtaXRlbS1kYW5nZXIiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mb19pdGVtX2VudGl0aWVzX2xpc3QuaW5jbHVkZXMocm93KSkgewogICAgICAgIHJldHVybiAibGlzdC1ncm91cC1pdGVtLWluZm8iOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3VjY2Vzc19pdGVtX2luZm9fbGlzdC5pbmNsdWRlcyhyb3cpKSB7CiAgICAgICAgcmV0dXJuICJsaXN0LWdyb3VwLWl0ZW0tc3VjY2VzcyI7CiAgICAgIH0KICAgIH0sCiAgICBsaXN0X2dyb3VwX2R5bmFtaWNfdHlwZTogZnVuY3Rpb24gbGlzdF9ncm91cF9keW5hbWljX3R5cGUocm93KSB7CiAgICAgIC8qKiAgCiAgICAgICAgKiBAcGFyYW0tIHJvdyBkZXRlcm1pbmVzIHdoaWNoIGxpc3QgZ3JvdSBwaXQgYmVsb25ncyB0by4KICAgICAgICAqIEByZXR1cm5zLSB0aGUgcmVzcGVjdGl2ZSBsaXN0IGl0ZW0gY29sb3VyIHByZWZpeGVkIHdpdGggYWxwaGFiZXQgZm9yIGVhc3kgc29ydGluZyBhcyBwZXIgb3VyIHJlcXVpcmVtZW50CiAgICAgICovCiAgICAgIGlmICh0aGlzLnByaW1hcnlfaXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImQtcHJpbWFyeSI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYW5nZXJfaXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImEtZGFuZ2VyIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluZm9faXRlbV9lbnRpdGllc19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImItaW5mbyI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdWNjZXNzX2l0ZW1faW5mb19saXN0LmluY2x1ZGVzKHJvdykpIHsKICAgICAgICByZXR1cm4gImMtc3VjY2VzcyI7CiAgICAgIH0KICAgIH0sCiAgICBkaXNwbGF5X2xpc3RfZHluYW1pY19jbGFzczogZnVuY3Rpb24gZGlzcGxheV9saXN0X2R5bmFtaWNfY2xhc3MoKSB7CiAgICAgIGlmICh0aGlzLmRpc3BsYXlfbGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuICJwYWRkaW5nOiAyMHB4IDI1cHg7IjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gInBhZGRpbmc6IDEwcHggMjVweDsiOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},null]}